<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\utils\adt\ruleutils.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\utils\adt\ruleutils.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:53 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * ruleutils.c 
 *    Functions to convert stored expressions/querytrees back to 
 *    source text 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/utils/adt/ruleutils.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;ctype.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;unistd.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;fcntl.h&GT;</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/amapi.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/htup_details.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/sysattr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/dependency.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/indexing.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/partition.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_aggregate.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_am.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_authid.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_collation.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_constraint.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_depend.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_language.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_opclass.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_operator.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_partitioned_table.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_proc.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_statistic_ext.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_trigger.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/defrem.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"commands/tablespace.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"common/keywords.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"executor/spi.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"funcapi.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"mb/pg_wchar.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"miscadmin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/makefuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/nodeFuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"optimizer/tlist.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parse_node.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parse_agg.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parse_func.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parse_oper.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parser.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parsetree.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"rewrite/rewriteHandler.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"rewrite/rewriteManip.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"rewrite/rewriteSupport.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/array.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/fmgroids.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/hsearch.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/lsyscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/rel.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/ruleutils.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/snapmgr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/syscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/tqual.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/typcache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/varlena.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/xml.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Pretty formatting constants 
 * ---------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* Indent counts */ 
</span><a name="LN81"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PRETTYINDENT_STD</span>        <span class='Number'>8</span> 
<a name="LN82"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PRETTYINDENT_JOIN</span>       <span class='Number'>4</span> 
<a name="LN83"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PRETTYINDENT_VAR</span>        <span class='Number'>4</span> 
 
<a name="LN85"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PRETTYINDENT_LIMIT</span>      <span class='Number'>40</span>      <span class='Comment_Single_Line'>/* wrap limit */ 
</span> 
<span class='Comment_Multi_Line'>/* Pretty flags */ 
</span><a name="LN88"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PRETTYFLAG_PAREN</span>        <span class='Number'>1</span> 
<a name="LN89"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PRETTYFLAG_INDENT</span>       <span class='Number'>2</span> 
 
<span class='Comment_Multi_Line'>/* Default line length for pretty-print wrapping: 0 means wrap always */ 
</span><a name="LN92"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>WRAP_COLUMN_DEFAULT</span>     <span class='Number'>0</span> 
 
<span class='Comment_Multi_Line'>/* macro to test if pretty action needed */ 
</span><a name="LN95"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PRETTY_PAREN</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span>   <span class='Parentheses'>((</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>prettyFlags <span class='Operator'>& </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a><span class='Parentheses'>)</span> 
<a name="LN96"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PRETTY_INDENT</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span>  <span class='Parentheses'>((</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>prettyFlags <span class='Operator'>& </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Parentheses'>)</span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Local data types 
 * ---------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* Context info needed for invoking a recursive querytree display routine */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN107"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Member'>buf</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* output buffer to append to */ 
</span><a name="LN108"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>namespaces</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* List of deparse_namespace nodes */ 
</span><a name="LN109"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>windowClause</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* Current query level's WINDOW clause */ 
</span><a name="LN110"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>windowTList</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* targetlist for resolving WINDOW clause */ 
</span><a name="LN111"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>prettyFlags</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* enabling of pretty-print functions */ 
</span><a name="LN112"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>wrapColumn</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* max line length, or -1 for no limit */ 
</span><a name="LN113"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>indentLevel</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* current indent level for prettyprint */ 
</span><a name="LN114"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>varprefix</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* TRUE to print prefixes on Vars */ 
</span><a name="LN115"></a>    <a href="../../../include/parser/parse_node.h.html#LN32"><span class='Ref_to_Enum'>ParseExprKind</span></a> <span class='Declare_Member'>special_exprkind</span><span class='Delimiter'>;</span>     <span class='Comment_Multi_Line'>/* set only for exprkinds needing 
                                         * special handling */ 
</span><a name="LN117"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>deparse_context</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Each level of query context around a subtree needs a level of Var namespace. 
 * A Var having varlevelsup=N refers to the N'th item (counting from 0) in 
 * the current context's namespaces list. 
 * 
 * The rangetable is the list of actual RTEs from the query tree, and the 
 * cte list is the list of actual CTEs. 
 * 
 * rtable_names holds the alias name to be used for each RTE (either a C 
 * string, or NULL for nameless RTEs such as unnamed joins). 
 * rtable_columns holds the column alias names to be used for each RTE. 
 * 
 * In some cases we need to make names of merged JOIN USING columns unique 
 * across the whole query, not only per-RTE.  If so, unique_using is TRUE 
 * and using_names is a list of C strings representing names already assigned 
 * to USING columns. 
 * 
 * When deparsing plan trees, there is always just a single item in the 
 * deparse_namespace list (since a plan tree never contains Vars with 
 * varlevelsup &GT; 0).  We store the PlanState node that is the immediate 
 * parent of the expression to be deparsed, as well as a list of that 
 * PlanState's ancestors.  In addition, we store its outer and inner subplan 
 * state nodes, as well as their plan nodes' targetlists, and the index tlist 
 * if the current plan node might contain INDEX_VAR Vars.  (These fields could 
 * be derived on-the-fly from the current PlanState, but it seems notationally 
 * clearer to set them up as separate fields.) 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN148"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>rtable</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* List of RangeTblEntry nodes */ 
</span><a name="LN149"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>rtable_names</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* Parallel list of names for RTEs */ 
</span><a name="LN150"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>rtable_columns</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* Parallel list of deparse_columns structs */ 
</span><a name="LN151"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>ctes</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* List of CommonTableExpr nodes */ 
</span>    <span class='Comment_Multi_Line'>/* Workspace for column alias assignment: */ 
</span><a name="LN153"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>unique_using</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* Are we making USING names globally unique */ 
</span><a name="LN154"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>using_names</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* List of assigned names for USING columns */ 
</span>    <span class='Comment_Multi_Line'>/* Remaining fields are used only when deparsing a Plan tree: */ 
</span><a name="LN156"></a>    <a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a>  <span class='Operator'>*</span><span class='Declare_Member'>planstate</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* immediate parent of current expression */ 
</span><a name="LN157"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>ancestors</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* ancestors of planstate */ 
</span><a name="LN158"></a>    <a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a>  <span class='Operator'>*</span><span class='Declare_Member'>outer_planstate</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* outer subplan state, or NULL if none */ 
</span><a name="LN159"></a>    <a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a>  <span class='Operator'>*</span><span class='Declare_Member'>inner_planstate</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* inner subplan state, or NULL if none */ 
</span><a name="LN160"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>outer_tlist</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* referent for OUTER_VAR Vars */ 
</span><a name="LN161"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>inner_tlist</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* referent for INNER_VAR Vars */ 
</span><a name="LN162"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>index_tlist</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* referent for INDEX_VAR Vars */ 
</span><a name="LN163"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>deparse_namespace</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Per-relation data about column alias names. 
 * 
 * Selecting aliases is unreasonably complicated because of the need to dump 
 * rules/views whose underlying tables may have had columns added, deleted, or 
 * renamed since the query was parsed.  We must nonetheless print the rule/view 
 * in a form that can be reloaded and will produce the same results as before. 
 * 
 * For each RTE used in the query, we must assign column aliases that are 
 * unique within that RTE.  SQL does not require this of the original query, 
 * but due to factors such as *-expansion we need to be able to uniquely 
 * reference every column in a decompiled query.  As long as we qualify all 
 * column references, per-RTE uniqueness is sufficient for that. 
 * 
 * However, we can't ensure per-column name uniqueness for unnamed join RTEs, 
 * since they just inherit column names from their input RTEs, and we can't 
 * rename the columns at the join level.  Most of the time this isn't an issue 
 * because we don't need to reference the join's output columns as such; we 
 * can reference the input columns instead.  That approach can fail for merged 
 * JOIN USING columns, however, so when we have one of those in an unnamed 
 * join, we have to make that column's alias globally unique across the whole 
 * query to ensure it can be referenced unambiguously. 
 * 
 * Another problem is that a JOIN USING clause requires the columns to be 
 * merged to have the same aliases in both input RTEs, and that no other 
 * columns in those RTEs or their children conflict with the USING names. 
 * To handle that, we do USING-column alias assignment in a recursive 
 * traversal of the query's jointree.  When descending through a JOIN with 
 * USING, we preassign the USING column names to the child columns, overriding 
 * other rules for column alias assignment.  We also mark each RTE with a list 
 * of all USING column names selected for joins containing that RTE, so that 
 * when we assign other columns' aliases later, we can avoid conflicts. 
 * 
 * Another problem is that if a JOIN's input tables have had columns added or 
 * deleted since the query was parsed, we must generate a column alias list 
 * for the join that matches the current set of input columns --- otherwise, a 
 * change in the number of columns in the left input would throw off matching 
 * of aliases to columns of the right input.  Thus, positions in the printable 
 * column alias list are not necessarily one-for-one with varattnos of the 
 * JOIN, so we need a separate new_colnames[] array for printing purposes. 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * colnames is an array containing column aliases to use for columns that 
     * existed when the query was parsed.  Dropped columns have NULL entries. 
     * This array can be directly indexed by varattno to get a Var's name. 
     * 
     * Non-NULL entries are guaranteed unique within the RTE, *except* when 
     * this is for an unnamed JOIN RTE.  In that case we merely copy up names 
     * from the two input RTEs. 
     * 
     * During the recursive descent in set_using_names(), forcible assignment 
     * of a child RTE's column name is represented by pre-setting that element 
     * of the child's colnames array.  So at that stage, NULL entries in this 
     * array just mean that no name has been preassigned, not necessarily that 
     * the column is dropped. 
     */ 
</span><a name="LN223"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>num_cols</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* length of colnames[] array */ 
</span><a name="LN224"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Member'>colnames</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* array of C strings and NULLs */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * new_colnames is an array containing column aliases to use for columns 
     * that would exist if the query was re-parsed against the current 
     * definitions of its base tables.  This is what to print as the column 
     * alias list for the RTE.  This array does not include dropped columns, 
     * but it will include columns added since original parsing.  Indexes in 
     * it therefore have little to do with current varattno values.  As above, 
     * entries are unique unless this is for an unnamed JOIN RTE.  (In such an 
     * RTE, we never actually print this array, but we must compute it anyway 
     * for possible use in computing column names of upper joins.) The 
     * parallel array is_new_col marks which of these columns are new since 
     * original parsing.  Entries with is_new_col false must match the 
     * non-NULL colnames entries one-for-one. 
     */ 
</span><a name="LN240"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>num_new_cols</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* length of new_colnames[] array */ 
</span><a name="LN241"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Member'>new_colnames</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* array of C strings */ 
</span><a name="LN242"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Member'>is_new_col</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* array of bool flags */ 
</span> 
    <span class='Comment_Multi_Line'>/* This flag tells whether we should actually print a column alias list */ 
</span><a name="LN245"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>printaliases</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* This list has all names used as USING names in joins above this RTE */ 
</span><a name="LN248"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>parentUsing</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* names assigned to parent merged columns */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If this struct is for a JOIN RTE, we fill these fields during the 
     * set_using_names() pass to describe its relationship to its child RTEs. 
     * 
     * leftattnos and rightattnos are arrays with one entry per existing 
     * output column of the join (hence, indexable by join varattno).  For a 
     * simple reference to a column of the left child, leftattnos[i] is the 
     * child RTE's attno and rightattnos[i] is zero; and conversely for a 
     * column of the right child.  But for merged columns produced by JOIN 
     * USING/NATURAL JOIN, both leftattnos[i] and rightattnos[i] are nonzero. 
     * Also, if the column has been dropped, both are zero. 
     * 
     * If it's a JOIN USING, usingNames holds the alias names selected for the 
     * merged columns (these might be different from the original USING list, 
     * if we had to modify names to achieve uniqueness). 
     */ 
</span><a name="LN266"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>leftrti</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* rangetable index of left child */ 
</span><a name="LN267"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>rightrti</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* rangetable index of right child */ 
</span><a name="LN268"></a>    <span class='Keyword'>int</span>        <span class='Operator'>*</span><span class='Declare_Member'>leftattnos</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* left-child varattnos of join cols, or 0 */ 
</span><a name="LN269"></a>    <span class='Keyword'>int</span>        <span class='Operator'>*</span><span class='Declare_Member'>rightattnos</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* right-child varattnos of join cols, or 0 */ 
</span><a name="LN270"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>usingNames</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* names assigned to merged columns */ 
</span><a name="LN271"></a><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end {anondeparse_columns} &raquo; </span> <span class='Declare_Typedef'>deparse_columns</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* This macro is analogous to rt_fetch(), but for deparse_columns structs */ 
</span><a name="LN274"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>deparse_columns_fetch</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>rangetable_index</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>dpns</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>((</span><a href="ruleutils.c.html#LN274"><span class='Ref_to_Parameter'>dpns</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rtable_columns<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN274"><span class='Ref_to_Parameter'>rangetable_index</span></a><span class='Parentheses'>)</span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Entry in set_rtable_names' hash table 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN282"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>name</span><span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Delimiter'>];</span>      <span class='Comment_Single_Line'>/* Hash key --- must be first */ 
</span><a name="LN283"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>counter</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* Largest addition used so far for name */ 
</span><a name="LN284"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>NameHashEntry</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Global data 
 * ---------- 
 */ 
</span><a name="LN291"></a><span class='Keyword'>static </span><a href="../../../include/executor/spi.h.html#LN33"><span class='Ref_to_Typedef'>SPIPlanPtr</span></a> <span class='Declare_Var'>plan_getrulebyoid</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN292"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>query_getrulebyoid</span> <span class='Operator'>= </span><span class='String'>"SELECT * FROM pg_catalog.pg_rewrite WHERE oid = $1"</span><span class='Delimiter'>; 
</span><a name="LN293"></a><span class='Keyword'>static </span><a href="../../../include/executor/spi.h.html#LN33"><span class='Ref_to_Typedef'>SPIPlanPtr</span></a> <span class='Declare_Var'>plan_getviewrule</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN294"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>query_getviewrule</span> <span class='Operator'>= </span><span class='String'>"SELECT * FROM pg_catalog.pg_rewrite WHERE ev_class = $1 AND rulename = $2"</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* GUC parameters */ 
</span><a name="LN297"></a><span class='Keyword'>bool</span>        <span class='Declare_Var'>quote_all_identifiers</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * Local functions 
 * 
 * Most of these functions used to use fixed-size buffers to build their 
 * results.  Now, they take an (already initialized) StringInfo object 
 * as a parameter, and append their text output to its contents. 
 * ---------- 
 */ 
</span><a name="LN308"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>deparse_expression_pretty</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpcontext</span><span class='Delimiter'>, 
</span><a name="LN309"></a>                          <span class='Keyword'>bool </span><span class='Declare_Parameter'>forceprefix</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Delimiter'>, 
</span><a name="LN310"></a>                          <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>startIndent</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN311"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>pg_get_viewdef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>viewoid</span><span class='Delimiter'>, 
</span><a name="LN312"></a>                      <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>wrapColumn</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN313"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>pg_get_triggerdef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>trigid</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>pretty</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN314"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>decompile_column_index_array</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>column_index_array</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relId</span><span class='Delimiter'>, 
</span><a name="LN315"></a>                             <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN316"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>pg_get_ruledef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>ruleoid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN317"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>pg_get_indexdef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>indexrelid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>colno</span><span class='Delimiter'>, 
</span><a name="LN318"></a>                       <span class='Keyword'>const </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>excludeOps</span><span class='Delimiter'>, 
</span><a name="LN319"></a>                       <span class='Keyword'>bool </span><span class='Declare_Parameter'>attrsOnly</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>showTblSpc</span><span class='Delimiter'>, 
</span><a name="LN320"></a>                       <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>missing_ok</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN321"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>pg_get_statisticsobj_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>statextid</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>missing_ok</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN322"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>pg_get_partkeydef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, 
</span><a name="LN323"></a>                         <span class='Keyword'>bool </span><span class='Declare_Parameter'>attrsOnly</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>missing_ok</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN324"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>pg_get_constraintdef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>constraintId</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>fullCommand</span><span class='Delimiter'>, 
</span><a name="LN325"></a>                            <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>missing_ok</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN326"></a><span class='Keyword'>static </span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>pg_get_expr_worker</span><span class='Parentheses'>(</span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>relname</span><span class='Delimiter'>, 
</span><a name="LN327"></a>                   <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN328"></a><span class='Keyword'>static int </span><span class='Declare_Prototype'>print_function_arguments</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>proctup</span><span class='Delimiter'>, 
</span><a name="LN329"></a>                         <span class='Keyword'>bool </span><span class='Declare_Parameter'>print_table_args</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>print_defaults</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN330"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>print_function_rettype</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>proctup</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN331"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>print_function_trftypes</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>proctup</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN332"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>set_rtable_names</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent_namespaces</span><span class='Delimiter'>, 
</span><a name="LN333"></a>                 <a href="../../../include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rels_used</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN334"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>set_deparse_for_query</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, 
</span><a name="LN335"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent_namespaces</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN336"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>set_simple_column_names</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN337"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>has_dangerous_join_using</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>jtnode</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN338"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>set_using_names</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>jtnode</span><span class='Delimiter'>, 
</span><a name="LN339"></a>                <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parentUsing</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN340"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>set_relation_column_names</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, 
</span><a name="LN341"></a>                          <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rte</span><span class='Delimiter'>, 
</span><a name="LN342"></a>                          <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN343"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>set_join_column_names</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rte</span><span class='Delimiter'>, 
</span><a name="LN344"></a>                      <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN345"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>colname_is_unique</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>colname</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, 
</span><a name="LN346"></a>                  <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN347"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>make_colname_unique</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>colname</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, 
</span><a name="LN348"></a>                    <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN349"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>expand_colnames_array_to</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>n</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN350"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>identify_join_columns</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>j</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>jrte</span><span class='Delimiter'>, 
</span><a name="LN351"></a>                      <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN352"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>flatten_join_using_qual</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>qual</span><span class='Delimiter'>, 
</span><a name="LN353"></a>                        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>leftvars</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>rightvars</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN354"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>get_rtable_name</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>rtindex</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN355"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>set_deparse_planstate</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ps</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN356"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>push_child_plan</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ps</span><span class='Delimiter'>, 
</span><a name="LN357"></a>                <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>save_dpns</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN358"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>pop_child_plan</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, 
</span><a name="LN359"></a>               <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>save_dpns</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN360"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>push_ancestor_plan</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ancestor_cell</span><span class='Delimiter'>, 
</span><a name="LN361"></a>                   <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>save_dpns</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN362"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>pop_ancestor_plan</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, 
</span><a name="LN363"></a>                  <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>save_dpns</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN364"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>make_ruledef</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>ruletup</span><span class='Delimiter'>, </span><a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>rulettc</span><span class='Delimiter'>, 
</span><a name="LN365"></a>             <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN366"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>make_viewdef</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>ruletup</span><span class='Delimiter'>, </span><a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>rulettc</span><span class='Delimiter'>, 
</span><a name="LN367"></a>             <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>wrapColumn</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN368"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parentnamespace</span><span class='Delimiter'>, 
</span><a name="LN369"></a>              <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>resultDesc</span><span class='Delimiter'>, 
</span><a name="LN370"></a>              <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>wrapColumn</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>startIndent</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN371"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_values_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>values_lists</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN372"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_with_clause</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN373"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_select_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN374"></a>                     <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>resultDesc</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN375"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_insert_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN376"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_update_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN377"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_update_query_targetlist_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetList</span><span class='Delimiter'>, 
</span><a name="LN378"></a>                                <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN379"></a>                                <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rte</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN380"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_delete_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN381"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_utility_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN382"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_basic_select_query</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN383"></a>                       <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>resultDesc</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN384"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_target_list</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetList</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN385"></a>                <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>resultDesc</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN386"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_setop_query</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>setOp</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, 
</span><a name="LN387"></a>                <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN388"></a>                <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>resultDesc</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN389"></a><span class='Keyword'>static </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>get_rule_sortgroupclause</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>ref</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, 
</span><a name="LN390"></a>                         <span class='Keyword'>bool </span><span class='Declare_Parameter'>force_colno</span><span class='Delimiter'>, 
</span><a name="LN391"></a>                         <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN392"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_rule_groupingset</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1230"><span class='Ref_to_Struct'>GroupingSet</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>gset</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetlist</span><span class='Delimiter'>, 
</span><a name="LN393"></a>                     <span class='Keyword'>bool </span><span class='Declare_Parameter'>omit_parens</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN394"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_rule_orderby</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>orderList</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetList</span><span class='Delimiter'>, 
</span><a name="LN395"></a>                 <span class='Keyword'>bool </span><span class='Declare_Parameter'>force_colno</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN396"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_rule_windowclause</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN397"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_rule_windowspec</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1252"><span class='Ref_to_Struct'>WindowClause</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>wc</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetList</span><span class='Delimiter'>, 
</span><a name="LN398"></a>                    <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN399"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>get_variable</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>levelsup</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>istoplevel</span><span class='Delimiter'>, 
</span><a name="LN400"></a>             <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN401"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_special_variable</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN402"></a>                     <span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>private</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN403"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>resolve_special_varno</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN404"></a>                      <span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>private</span><span class='Delimiter'>, 
</span><a name="LN405"></a>                      <span class='Keyword'>void </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Parameter'>callback</span><span class='Parentheses'>) (</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN406"></a><span class='Keyword'>static </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>find_param_referent</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>param</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN407"></a>                    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>dpns_p</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>ancestor_cell_p</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN408"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_parameter</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>param</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN409"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Prototype'>get_simple_binary_op_name</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN410"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>isSimpleNode</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parentNode</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN411"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>appendContextKeyword</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, 
</span><a name="LN412"></a>                     <span class='Keyword'>int </span><span class='Declare_Parameter'>indentBefore</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>indentAfter</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>indentPlus</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN413"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>removeStringInfoSpaces</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN414"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_rule_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN415"></a>              <span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN416"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_rule_expr_toplevel</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN417"></a>                       <span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN418"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_oper_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN419"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_func_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN420"></a>              <span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN421"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_agg_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>aggref</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN422"></a>             <a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>original_aggref</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN423"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_agg_combine_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN424"></a>                     <span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>private</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN425"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_windowfunc_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN351"><span class='Ref_to_Struct'>WindowFunc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>wfunc</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN426"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_coercion_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>arg</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN427"></a>                  <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>resulttype</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>resulttypmod</span><span class='Delimiter'>, 
</span><a name="LN428"></a>                  <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parentNode</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN429"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_const_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>constval</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN430"></a>               <span class='Keyword'>int </span><span class='Declare_Parameter'>showtype</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN431"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_const_collation</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>constval</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN432"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>simple_quote_literal</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>val</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN433"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_sublink_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>sublink</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN434"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_tablefunc</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN78"><span class='Ref_to_Struct'>TableFunc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tf</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN435"></a>              <span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN436"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_from_clause</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>prefix</span><span class='Delimiter'>, 
</span><a name="LN437"></a>                <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN438"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_from_clause_item</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>jtnode</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, 
</span><a name="LN439"></a>                     <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN440"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_column_alias_list</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Delimiter'>, 
</span><a name="LN441"></a>                      <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN442"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_from_clause_coldeflist</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rtfunc</span><span class='Delimiter'>, 
</span><a name="LN443"></a>                           <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Delimiter'>, 
</span><a name="LN444"></a>                           <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN445"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_tablesample_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1071"><span class='Ref_to_Struct'>TableSampleClause</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tablesample</span><span class='Delimiter'>, 
</span><a name="LN446"></a>                    <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN447"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>get_opclass_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opclass</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>actual_datatype</span><span class='Delimiter'>, 
</span><a name="LN448"></a>                 <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN449"></a><span class='Keyword'>static </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>processIndirection</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN450"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>printSubscripts</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>aref</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN451"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>get_relation_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN452"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>generate_relation_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>namespaces</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN453"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>generate_qualified_relation_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN454"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>generate_function_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nargs</span><span class='Delimiter'>, 
</span><a name="LN455"></a>                       <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>argnames</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>argtypes</span><span class='Delimiter'>, 
</span><a name="LN456"></a>                       <span class='Keyword'>bool </span><span class='Declare_Parameter'>has_variadic</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>use_variadic_p</span><span class='Delimiter'>, 
</span><a name="LN457"></a>                       <a href="../../../include/parser/parse_node.h.html#LN32"><span class='Ref_to_Enum'>ParseExprKind</span></a> <span class='Declare_Parameter'>special_exprkind</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN458"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>generate_operator_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>operid</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>arg1</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>arg2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN459"></a><span class='Keyword'>static </span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>string_to_text</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN460"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>flatten_reloptions</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN462"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>only_marker</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>rte</span><span class='Parentheses'>)</span>  <span class='Parentheses'>((</span><a href="ruleutils.c.html#LN462"><span class='Ref_to_Parameter'>rte</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>inh <span class='Operator'>? </span><span class='String'>""</span> <span class='Operator'>: </span><span class='String'>"ONLY "</span><span class='Parentheses'>)</span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_ruledef          - Do it all and return a text 
 *                that could be used as a statement 
 *                to recreate the rule 
 * ---------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN472"></a><span class='Declare_Function'>pg_get_ruledef</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN474"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>ruleoid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN475"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN476"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN475"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN476"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN316"><span class='Ref_to_Proto'>pg_get_ruledef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN474"><span class='Ref_To_Local'>ruleoid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN475"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN476"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN476"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN490"></a><span class='Declare_Function'>pg_get_ruledef_ext</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN492"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>ruleoid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN493"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>pretty</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN238"><span class='Ref_to_Macro'>PG_GETARG_BOOL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN494"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN495"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN494"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN493"><span class='Ref_To_Local'>pretty</span></a> <span class='Operator'>? </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a> <span class='Operator'>| </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a> <span class='Operator'>: </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN495"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN316"><span class='Ref_to_Proto'>pg_get_ruledef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN492"><span class='Ref_To_Local'>ruleoid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN494"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN495"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN495"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN509"></a><span class='Declare_Function'>pg_get_ruledef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>ruleoid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN511"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>args</span><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN512"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>nulls</span><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN513"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>spirc</span><span class='Delimiter'>; 
</span><a name="LN514"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>ruletup</span><span class='Delimiter'>; 
</span><a name="LN515"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>rulettc</span><span class='Delimiter'>; 
</span><a name="LN516"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Do this first so that string is alloc'd in outer context not SPI's. 
     */ 
</span>    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN516"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Connect to SPI manager 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/executor/spi.h.html#LN79"><span class='Ref_to_Proto'>SPI_connect</span></a><span class='Parentheses'>() </span><span class='Operator'>!= </span><a href="../../../include/executor/spi.h.html#LN49"><span class='Ref_to_Const'>SPI_OK_CONNECT</span></a><span class='Parentheses'>)</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"SPI_connect failed"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * On the first call prepare the plan to lookup pg_rewrite. We read 
     * pg_rewrite over the SPI manager instead of using the syscache to be 
     * checked for read access on pg_rewrite. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN291"><span class='Ref_to_Global_Var'>plan_getrulebyoid</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN536"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>argtypes</span><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN537"></a>        <a href="../../../include/executor/spi.h.html#LN33"><span class='Ref_to_Typedef'>SPIPlanPtr</span></a>  <span class='Declare_Local'>plan</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN536"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN27"><span class='Ref_to_Const'>OIDOID</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN537"><span class='Ref_To_Local'>plan</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN99"><span class='Ref_to_Proto'>SPI_prepare</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN292"><span class='Ref_to_Global_Var'>query_getrulebyoid</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN536"><span class='Ref_To_Local'>argtypes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN537"><span class='Ref_To_Local'>plan</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"SPI_prepare failed for \"%s\""</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN292"><span class='Ref_to_Global_Var'>query_getrulebyoid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/executor/spi.h.html#LN106"><span class='Ref_to_Proto'>SPI_keepplan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN537"><span class='Ref_To_Local'>plan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN291"><span class='Ref_to_Global_Var'>plan_getrulebyoid</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN537"><span class='Ref_To_Local'>plan</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Get the pg_rewrite tuple for this rule 
     */ 
</span>    <a href="ruleutils.c.html#LN511"><span class='Ref_To_Local'>args</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN509"><span class='Ref_to_Parameter'>ruleoid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN512"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN513"><span class='Ref_To_Local'>spirc</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN82"><span class='Ref_to_Proto'>SPI_execute_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN291"><span class='Ref_to_Global_Var'>plan_getrulebyoid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN511"><span class='Ref_To_Local'>args</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN512"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN513"><span class='Ref_To_Local'>spirc</span></a> <span class='Operator'>!= </span><a href="../../../include/executor/spi.h.html#LN53"><span class='Ref_to_Const'>SPI_OK_SELECT</span></a><span class='Parentheses'>) 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"failed to get pg_rewrite tuple for rule %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN509"><span class='Ref_to_Parameter'>ruleoid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../executor/spi.c.html#LN38"><span class='Ref_to_Global_Var'>SPI_processed</span></a> <span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * There is no tuple data available here, just keep the output buffer 
         * empty. 
         */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Get the rule's definition and put it into executor's memory 
         */ 
</span>        <a href="ruleutils.c.html#LN514"><span class='Ref_To_Local'>ruletup</span></a> <span class='Operator'>= </span><a href="../../executor/spi.c.html#LN40"><span class='Ref_to_Global_Var'>SPI_tuptable</span></a><span class='Operator'>-&GT;</span><a href="../../../include/executor/spi.h.html#LN27"><span class='Ref_to_Member'>vals</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>        <a href="ruleutils.c.html#LN515"><span class='Ref_To_Local'>rulettc</span></a> <span class='Operator'>= </span><a href="../../executor/spi.c.html#LN40"><span class='Ref_to_Global_Var'>SPI_tuptable</span></a><span class='Operator'>-&GT;</span><a href="../../../include/executor/spi.h.html#LN26"><span class='Ref_to_Member'>tupdesc</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN364"><span class='Ref_to_Proto'>make_ruledef</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN516"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN514"><span class='Ref_To_Local'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN515"><span class='Ref_To_Local'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN509"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Disconnect from SPI manager 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/executor/spi.h.html#LN80"><span class='Ref_to_Proto'>SPI_finish</span></a><span class='Parentheses'>() </span><span class='Operator'>!= </span><a href="../../../include/executor/spi.h.html#LN50"><span class='Ref_to_Const'>SPI_OK_FINISH</span></a><span class='Parentheses'>)</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"SPI_finish failed"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN516"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN516"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_ruledef_worker &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_viewdef          - Mainly the same thing, but we 
 *                only return the SELECT part of a view 
 * ---------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN591"></a><span class='Declare_Function'>pg_get_viewdef</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* By OID */ 
</span><a name="LN594"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>viewoid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN595"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN596"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN595"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN596"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN311"><span class='Ref_to_Proto'>pg_get_viewdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN594"><span class='Ref_To_Local'>viewoid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN595"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN92"><span class='Ref_to_Const'>WRAP_COLUMN_DEFAULT</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN596"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN596"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN610"></a><span class='Declare_Function'>pg_get_viewdef_ext</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* By OID */ 
</span><a name="LN613"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>viewoid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN614"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>pretty</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN238"><span class='Ref_to_Macro'>PG_GETARG_BOOL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN615"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN616"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN615"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN614"><span class='Ref_To_Local'>pretty</span></a> <span class='Operator'>? </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a> <span class='Operator'>| </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a> <span class='Operator'>: </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN616"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN311"><span class='Ref_to_Proto'>pg_get_viewdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN613"><span class='Ref_To_Local'>viewoid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN615"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN92"><span class='Ref_to_Const'>WRAP_COLUMN_DEFAULT</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN616"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN616"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN629"></a><span class='Declare_Function'>pg_get_viewdef_wrap</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* By OID */ 
</span><a name="LN632"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>viewoid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN633"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>wrap</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN634"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN635"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* calling this implies we want pretty printing */ 
</span>    <a href="ruleutils.c.html#LN634"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a> <span class='Operator'>| </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN635"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN311"><span class='Ref_to_Proto'>pg_get_viewdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN632"><span class='Ref_To_Local'>viewoid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN634"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN633"><span class='Ref_To_Local'>wrap</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN635"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN635"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN649"></a><span class='Declare_Function'>pg_get_viewdef_name</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* By qualified name */ 
</span><a name="LN652"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>viewname</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN653"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN654"></a>    <a href="../../../include/nodes/primnodes.h.html#LN62"><span class='Ref_to_Struct'>RangeVar</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>viewrel</span><span class='Delimiter'>; 
</span><a name="LN655"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>viewoid</span><span class='Delimiter'>; 
</span><a name="LN656"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN653"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Look up view name.  Can't lock it - we might not have privileges. */ 
</span>    <a href="ruleutils.c.html#LN654"><span class='Ref_To_Local'>viewrel</span></a> <span class='Operator'>= </span><a href="../../../include/catalog/namespace.h.html#LN119"><span class='Ref_to_Proto'>makeRangeVarFromNameList</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/varlena.h.html#LN28"><span class='Ref_to_Proto'>textToQualifiedNameList</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN652"><span class='Ref_To_Local'>viewname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN655"><span class='Ref_To_Local'>viewoid</span></a> <span class='Operator'>= </span><a href="../../../include/catalog/namespace.h.html#LN52"><span class='Ref_to_Macro'>RangeVarGetRelid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN654"><span class='Ref_To_Local'>viewrel</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN656"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN311"><span class='Ref_to_Proto'>pg_get_viewdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN655"><span class='Ref_To_Local'>viewoid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN653"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN92"><span class='Ref_to_Const'>WRAP_COLUMN_DEFAULT</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN656"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN656"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_viewdef_name &raquo; </span> 
 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN674"></a><span class='Declare_Function'>pg_get_viewdef_name_ext</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* By qualified name */ 
</span><a name="LN677"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>viewname</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN678"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>pretty</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN238"><span class='Ref_to_Macro'>PG_GETARG_BOOL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN679"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN680"></a>    <a href="../../../include/nodes/primnodes.h.html#LN62"><span class='Ref_to_Struct'>RangeVar</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>viewrel</span><span class='Delimiter'>; 
</span><a name="LN681"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>viewoid</span><span class='Delimiter'>; 
</span><a name="LN682"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN679"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN678"><span class='Ref_To_Local'>pretty</span></a> <span class='Operator'>? </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a> <span class='Operator'>| </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a> <span class='Operator'>: </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Look up view name.  Can't lock it - we might not have privileges. */ 
</span>    <a href="ruleutils.c.html#LN680"><span class='Ref_To_Local'>viewrel</span></a> <span class='Operator'>= </span><a href="../../../include/catalog/namespace.h.html#LN119"><span class='Ref_to_Proto'>makeRangeVarFromNameList</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/varlena.h.html#LN28"><span class='Ref_to_Proto'>textToQualifiedNameList</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN677"><span class='Ref_To_Local'>viewname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN681"><span class='Ref_To_Local'>viewoid</span></a> <span class='Operator'>= </span><a href="../../../include/catalog/namespace.h.html#LN52"><span class='Ref_to_Macro'>RangeVarGetRelid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN680"><span class='Ref_To_Local'>viewrel</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN682"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN311"><span class='Ref_to_Proto'>pg_get_viewdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN681"><span class='Ref_To_Local'>viewoid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN679"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN92"><span class='Ref_to_Const'>WRAP_COLUMN_DEFAULT</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN682"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN682"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_viewdef_name_ext &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Common code for by-OID and by-name variants of pg_get_viewdef 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN702"></a><span class='Declare_Function'>pg_get_viewdef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>viewoid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>wrapColumn</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN704"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>args</span><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>]; 
</span><a name="LN705"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>nulls</span><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>]; 
</span><a name="LN706"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>spirc</span><span class='Delimiter'>; 
</span><a name="LN707"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>ruletup</span><span class='Delimiter'>; 
</span><a name="LN708"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>rulettc</span><span class='Delimiter'>; 
</span><a name="LN709"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Do this first so that string is alloc'd in outer context not SPI's. 
     */ 
</span>    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN709"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Connect to SPI manager 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/executor/spi.h.html#LN79"><span class='Ref_to_Proto'>SPI_connect</span></a><span class='Parentheses'>() </span><span class='Operator'>!= </span><a href="../../../include/executor/spi.h.html#LN49"><span class='Ref_to_Const'>SPI_OK_CONNECT</span></a><span class='Parentheses'>)</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"SPI_connect failed"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * On the first call prepare the plan to lookup pg_rewrite. We read 
     * pg_rewrite over the SPI manager instead of using the syscache to be 
     * checked for read access on pg_rewrite. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN293"><span class='Ref_to_Global_Var'>plan_getviewrule</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN729"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>argtypes</span><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>]; 
</span><a name="LN730"></a>        <a href="../../../include/executor/spi.h.html#LN33"><span class='Ref_to_Typedef'>SPIPlanPtr</span></a>  <span class='Declare_Local'>plan</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN729"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN27"><span class='Ref_to_Const'>OIDOID</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN729"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN20"><span class='Ref_to_Const'>NAMEOID</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN730"><span class='Ref_To_Local'>plan</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN99"><span class='Ref_to_Proto'>SPI_prepare</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN294"><span class='Ref_to_Global_Var'>query_getviewrule</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN729"><span class='Ref_To_Local'>argtypes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN730"><span class='Ref_To_Local'>plan</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"SPI_prepare failed for \"%s\""</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN294"><span class='Ref_to_Global_Var'>query_getviewrule</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/executor/spi.h.html#LN106"><span class='Ref_to_Proto'>SPI_keepplan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN730"><span class='Ref_To_Local'>plan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN293"><span class='Ref_to_Global_Var'>plan_getviewrule</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN730"><span class='Ref_To_Local'>plan</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Get the pg_rewrite tuple for the view's SELECT rule 
     */ 
</span>    <a href="ruleutils.c.html#LN704"><span class='Ref_To_Local'>args</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN702"><span class='Ref_to_Parameter'>viewoid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN704"><span class='Ref_To_Local'>args</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN583"><span class='Ref_to_Macro'>DirectFunctionCall1</span></a><span class='Parentheses'>(</span><a href="name.c.html#LN44"><span class='Ref_to_Func'>namein</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN583"><span class='Ref_to_Macro'>CStringGetDatum</span></a><span class='Parentheses'>(</span><a href="../../../include/rewrite/rewriteSupport.h.html#LN17"><span class='Ref_to_Const'>ViewSelectRuleName</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN705"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN705"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN706"><span class='Ref_To_Local'>spirc</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN82"><span class='Ref_to_Proto'>SPI_execute_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN293"><span class='Ref_to_Global_Var'>plan_getviewrule</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN704"><span class='Ref_To_Local'>args</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN705"><span class='Ref_To_Local'>nulls</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN706"><span class='Ref_To_Local'>spirc</span></a> <span class='Operator'>!= </span><a href="../../../include/executor/spi.h.html#LN53"><span class='Ref_to_Const'>SPI_OK_SELECT</span></a><span class='Parentheses'>) 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"failed to get pg_rewrite tuple for view %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN702"><span class='Ref_to_Parameter'>viewoid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../executor/spi.c.html#LN38"><span class='Ref_to_Global_Var'>SPI_processed</span></a> <span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * There is no tuple data available here, just keep the output buffer 
         * empty. 
         */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Get the rule's definition and put it into executor's memory 
         */ 
</span>        <a href="ruleutils.c.html#LN707"><span class='Ref_To_Local'>ruletup</span></a> <span class='Operator'>= </span><a href="../../executor/spi.c.html#LN40"><span class='Ref_to_Global_Var'>SPI_tuptable</span></a><span class='Operator'>-&GT;</span><a href="../../../include/executor/spi.h.html#LN27"><span class='Ref_to_Member'>vals</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>        <a href="ruleutils.c.html#LN708"><span class='Ref_To_Local'>rulettc</span></a> <span class='Operator'>= </span><a href="../../executor/spi.c.html#LN40"><span class='Ref_to_Global_Var'>SPI_tuptable</span></a><span class='Operator'>-&GT;</span><a href="../../../include/executor/spi.h.html#LN26"><span class='Ref_to_Member'>tupdesc</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN366"><span class='Ref_to_Proto'>make_viewdef</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN709"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN707"><span class='Ref_To_Local'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN708"><span class='Ref_To_Local'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN702"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN702"><span class='Ref_to_Parameter'>wrapColumn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Disconnect from SPI manager 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/executor/spi.h.html#LN80"><span class='Ref_to_Proto'>SPI_finish</span></a><span class='Parentheses'>() </span><span class='Operator'>!= </span><a href="../../../include/executor/spi.h.html#LN50"><span class='Ref_to_Const'>SPI_OK_FINISH</span></a><span class='Parentheses'>)</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"SPI_finish failed"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN709"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN709"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_viewdef_worker &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_triggerdef           - Get the definition of a trigger 
 * ---------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN785"></a><span class='Declare_Function'>pg_get_triggerdef</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN787"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>trigid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN788"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN788"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN313"><span class='Ref_to_Proto'>pg_get_triggerdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN787"><span class='Ref_To_Local'>trigid</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN788"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN788"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN799"></a><span class='Declare_Function'>pg_get_triggerdef_ext</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN801"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>trigid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN802"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>pretty</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN238"><span class='Ref_to_Macro'>PG_GETARG_BOOL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN803"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN803"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN313"><span class='Ref_to_Proto'>pg_get_triggerdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN801"><span class='Ref_To_Local'>trigid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN802"><span class='Ref_To_Local'>pretty</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN803"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN803"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN814"></a><span class='Declare_Function'>pg_get_triggerdef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>trigid</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>pretty</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN816"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>ht_trig</span><span class='Delimiter'>; 
</span><a name="LN817"></a>    <a href="../../../include/catalog/pg_trigger.h.html#LN71"><span class='Ref_to_Typedef'>Form_pg_trigger</span></a> <span class='Declare_Local'>trigrec</span><span class='Delimiter'>; 
</span><a name="LN818"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN819"></a>    <a href="../../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>tgrel</span><span class='Delimiter'>; 
</span><a name="LN820"></a>    <a href="../../../include/access/skey.h.html#LN63"><span class='Ref_to_Struct'>ScanKeyData</span></a> <span class='Declare_Local'>skey</span><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN821"></a>    <a href="../../../include/access/genam.h.html#LN86"><span class='Ref_to_Typedef'>SysScanDesc</span></a> <span class='Declare_Local'>tgscan</span><span class='Delimiter'>; 
</span><a name="LN822"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>findx</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN823"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tgname</span><span class='Delimiter'>; 
</span><a name="LN824"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tgoldtable</span><span class='Delimiter'>; 
</span><a name="LN825"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tgnewtable</span><span class='Delimiter'>; 
</span><a name="LN826"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>argtypes</span><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>];</span>    <span class='Comment_Single_Line'>/* dummy */ 
</span><a name="LN827"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>value</span><span class='Delimiter'>; 
</span><a name="LN828"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Fetch the pg_trigger tuple by the Oid of the trigger 
     */ 
</span>    <a href="ruleutils.c.html#LN819"><span class='Ref_To_Local'>tgrel</span></a> <span class='Operator'>= </span><a href="../../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_trigger.h.html#LN33"><span class='Ref_to_Const'>TriggerRelationId</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN820"><span class='Ref_To_Local'>skey</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], 
</span>                <a href="../../../include/access/sysattr.h.html#LN21"><span class='Ref_to_Const'>ObjectIdAttributeNumber</span></a><span class='Delimiter'>, 
</span>                <a href="../../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN814"><span class='Ref_to_Parameter'>trigid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN821"><span class='Ref_To_Local'>tgscan</span></a> <span class='Operator'>= </span><a href="../../../include/access/genam.h.html#LN189"><span class='Ref_to_Proto'>systable_beginscan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN819"><span class='Ref_To_Local'>tgrel</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/indexing.h.html#LN250"><span class='Ref_to_Const'>TriggerOidIndexId</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN820"><span class='Ref_To_Local'>skey</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN816"><span class='Ref_To_Local'>ht_trig</span></a> <span class='Operator'>= </span><a href="../../../include/access/genam.h.html#LN194"><span class='Ref_to_Proto'>systable_getnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN821"><span class='Ref_To_Local'>tgscan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN816"><span class='Ref_To_Local'>ht_trig</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN821"><span class='Ref_To_Local'>tgscan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN819"><span class='Ref_To_Local'>tgrel</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_trigger.h.html#LN71"><span class='Ref_to_Typedef'>Form_pg_trigger</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN816"><span class='Ref_To_Local'>ht_trig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Start the trigger definition. Note that the trigger's name should never 
     * be schema-qualified, but the trigger rel's name may be. 
     */ 
</span>    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN823"><span class='Ref_To_Local'>tgname</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE %sTRIGGER %s "</span><span class='Delimiter'>, 
</span>                     <a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgconstraint<span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"CONSTRAINT "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                     <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN823"><span class='Ref_To_Local'>tgname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/pg_trigger.h.html#LN130"><span class='Ref_to_Macro'>TRIGGER_FOR_BEFORE</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgtype<span class='Parentheses'>))</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"BEFORE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/pg_trigger.h.html#LN131"><span class='Ref_to_Macro'>TRIGGER_FOR_AFTER</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgtype<span class='Parentheses'>))</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"AFTER"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/pg_trigger.h.html#LN132"><span class='Ref_to_Macro'>TRIGGER_FOR_INSTEAD</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgtype<span class='Parentheses'>))</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"INSTEAD OF"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected tgtype value: %d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgtype<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/pg_trigger.h.html#LN133"><span class='Ref_to_Macro'>TRIGGER_FOR_INSERT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgtype<span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" INSERT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN822"><span class='Ref_To_Local'>findx</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/pg_trigger.h.html#LN134"><span class='Ref_to_Macro'>TRIGGER_FOR_DELETE</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgtype<span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN822"><span class='Ref_To_Local'>findx</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" OR DELETE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DELETE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN822"><span class='Ref_To_Local'>findx</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/pg_trigger.h.html#LN135"><span class='Ref_to_Macro'>TRIGGER_FOR_UPDATE</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgtype<span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN822"><span class='Ref_To_Local'>findx</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" OR UPDATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" UPDATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN822"><span class='Ref_To_Local'>findx</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* tgattr is first var-width field, so OK to access directly */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgattr<span class='Operator'>.</span>dim1 <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN897"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" OF "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN897"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN897"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgattr<span class='Operator'>.</span>dim1<span class='Delimiter'>; </span><a href="ruleutils.c.html#LN897"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN902"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attname</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN897"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN902"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN86"><span class='Ref_to_Proto'>get_relid_attribute_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgrelid<span class='Delimiter'>, 
</span>                                                   <a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgattr<span class='Operator'>.</span>values<span class='Delimiter'>[</span><a href="ruleutils.c.html#LN897"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN902"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if TRIGGER_FOR_UPDATE(tr... &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/pg_trigger.h.html#LN136"><span class='Ref_to_Macro'>TRIGGER_FOR_TRUNCATE</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgtype<span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN822"><span class='Ref_To_Local'>findx</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" OR TRUNCATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" TRUNCATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN822"><span class='Ref_To_Local'>findx</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ON %s "</span><span class='Delimiter'>, 
</span>                     <a href="../../../../contrib/dblink/dblink.c.html#LN111"><span class='Ref_to_Proto'>generate_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgrelid<span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgconstraint<span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgconstrrelid<span class='Parentheses'>))</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"FROM %s "</span><span class='Delimiter'>, 
</span>                        <a href="../../../../contrib/dblink/dblink.c.html#LN111"><span class='Ref_to_Proto'>generate_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgconstrrelid<span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgdeferrable<span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NOT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"DEFERRABLE INITIALLY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tginitdeferred<span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"DEFERRED "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"IMMEDIATE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Keyword'>value </span><span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN718"><span class='Ref_to_Macro'>fastgetattr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN816"><span class='Ref_To_Local'>ht_trig</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/pg_trigger.h.html#LN93"><span class='Ref_to_Const'>Anum_pg_trigger_tgoldtable</span></a><span class='Delimiter'>, 
</span>                        <a href="ruleutils.c.html#LN819"><span class='Ref_To_Local'>tgrel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rel.h.html#LN114"><span class='Ref_to_Member'>rd_att</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN828"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN828"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN824"><span class='Ref_To_Local'>tgoldtable</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN492"><span class='Ref_to_Typedef'>NameData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN824"><span class='Ref_To_Local'>tgoldtable</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Keyword'>value </span><span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN718"><span class='Ref_to_Macro'>fastgetattr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN816"><span class='Ref_To_Local'>ht_trig</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/pg_trigger.h.html#LN94"><span class='Ref_to_Const'>Anum_pg_trigger_tgnewtable</span></a><span class='Delimiter'>, 
</span>                        <a href="ruleutils.c.html#LN819"><span class='Ref_To_Local'>tgrel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rel.h.html#LN114"><span class='Ref_to_Member'>rd_att</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN828"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN828"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN825"><span class='Ref_To_Local'>tgnewtable</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN492"><span class='Ref_to_Typedef'>NameData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN825"><span class='Ref_To_Local'>tgnewtable</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN824"><span class='Ref_To_Local'>tgoldtable</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="ruleutils.c.html#LN825"><span class='Ref_To_Local'>tgnewtable</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"REFERENCING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN824"><span class='Ref_To_Local'>tgoldtable</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"OLD TABLE AS %s "</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN824"><span class='Ref_To_Local'>tgoldtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN825"><span class='Ref_To_Local'>tgnewtable</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NEW TABLE AS %s "</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN825"><span class='Ref_To_Local'>tgnewtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/pg_trigger.h.html#LN129"><span class='Ref_to_Macro'>TRIGGER_FOR_ROW</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgtype<span class='Parentheses'>))</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"FOR EACH ROW "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"FOR EACH STATEMENT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If the trigger has a WHEN qualification, add that */ 
</span>    <span class='Keyword'>value </span><span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN718"><span class='Ref_to_Macro'>fastgetattr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN816"><span class='Ref_To_Local'>ht_trig</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/pg_trigger.h.html#LN92"><span class='Ref_to_Const'>Anum_pg_trigger_tgqual</span></a><span class='Delimiter'>, 
</span>                        <a href="ruleutils.c.html#LN819"><span class='Ref_To_Local'>tgrel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rel.h.html#LN114"><span class='Ref_to_Member'>rd_att</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN828"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN828"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN968"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>qual</span><span class='Delimiter'>; 
</span><a name="LN969"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>relkind</span><span class='Delimiter'>; 
</span><a name="LN970"></a>        <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span><a name="LN971"></a>        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span><a name="LN972"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>oldrte</span><span class='Delimiter'>; 
</span><a name="LN973"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>newrte</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"WHEN ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN968"><span class='Ref_To_Local'>qual</span></a> <span class='Operator'>= </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN969"><span class='Ref_To_Local'>relkind</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN127"><span class='Ref_to_Proto'>get_rel_relkind</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgrelid<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Build minimal OLD and NEW RTEs for the rel */ 
</span>        <a href="ruleutils.c.html#LN972"><span class='Ref_To_Local'>oldrte</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN972"><span class='Ref_To_Local'>oldrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN972"><span class='Ref_To_Local'>oldrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgrelid<span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN972"><span class='Ref_To_Local'>oldrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN948"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN969"><span class='Ref_To_Local'>relkind</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN972"><span class='Ref_To_Local'>oldrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/makefuncs.h.html#LN63"><span class='Ref_to_Proto'>makeAlias</span></a><span class='Parentheses'>(</span><span class='String'>"old"</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN972"><span class='Ref_To_Local'>oldrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN972"><span class='Ref_To_Local'>oldrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN972"><span class='Ref_To_Local'>oldrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1024"><span class='Ref_to_Member'>lateral</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN972"><span class='Ref_To_Local'>oldrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1025"><span class='Ref_to_Member'>inh</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN972"><span class='Ref_To_Local'>oldrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1026"><span class='Ref_to_Member'>inFromCl</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN973"><span class='Ref_To_Local'>newrte</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN973"><span class='Ref_To_Local'>newrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN973"><span class='Ref_To_Local'>newrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgrelid<span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN973"><span class='Ref_To_Local'>newrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN948"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN969"><span class='Ref_To_Local'>relkind</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN973"><span class='Ref_To_Local'>newrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/makefuncs.h.html#LN63"><span class='Ref_to_Proto'>makeAlias</span></a><span class='Parentheses'>(</span><span class='String'>"new"</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN973"><span class='Ref_To_Local'>newrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN973"><span class='Ref_To_Local'>newrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN973"><span class='Ref_To_Local'>newrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1024"><span class='Ref_to_Member'>lateral</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN973"><span class='Ref_To_Local'>newrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1025"><span class='Ref_to_Member'>inh</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN973"><span class='Ref_To_Local'>newrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1026"><span class='Ref_to_Member'>inFromCl</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Build two-element rtable */ 
</span>        memset<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN971"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN971"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN971"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN139"><span class='Ref_to_Macro'>list_make2</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN972"><span class='Ref_To_Local'>oldrte</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN973"><span class='Ref_To_Local'>newrte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN971"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN151"><span class='Ref_to_Member'>ctes</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN332"><span class='Ref_to_Proto'>set_rtable_names</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN971"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN336"><span class='Ref_to_Proto'>set_simple_column_names</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN971"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Set up context with one-deep namespace stack */ 
</span>        <a href="ruleutils.c.html#LN970"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= &</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN970"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN971"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN970"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN109"><span class='Ref_to_Member'>windowClause</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN970"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN110"><span class='Ref_to_Member'>windowTList</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN970"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN970"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN111"><span class='Ref_to_Member'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN814"><span class='Ref_to_Parameter'>pretty</span></a> <span class='Operator'>? </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a> <span class='Operator'>| </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a> <span class='Operator'>: </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN970"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN92"><span class='Ref_to_Const'>WRAP_COLUMN_DEFAULT</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN970"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN970"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN115"><span class='Ref_to_Member'>special_exprkind</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parse_node.h.html#LN34"><span class='Ref_to_EnumConst'>EXPR_KIND_NONE</span></a><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN968"><span class='Ref_To_Local'>qual</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN970"><span class='Ref_To_Local'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !isnull &raquo; </span> 
 
    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"EXECUTE PROCEDURE %s("</span><span class='Delimiter'>, 
</span>                     <a href="ruleutils.c.html#LN454"><span class='Ref_to_Proto'>generate_function_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgfoid<span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                            <a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN826"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>, 
</span>                                            <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="../../../include/parser/parse_node.h.html#LN34"><span class='Ref_to_EnumConst'>EXPR_KIND_NONE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgnargs <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1032"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span><a name="LN1033"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <span class='Keyword'>value </span><span class='Operator'>= </span><a href="../../../include/access/htup_details.h.html#LN718"><span class='Ref_to_Macro'>fastgetattr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN816"><span class='Ref_To_Local'>ht_trig</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/pg_trigger.h.html#LN91"><span class='Ref_to_Const'>Anum_pg_trigger_tgargs</span></a><span class='Delimiter'>, 
</span>                            <a href="ruleutils.c.html#LN819"><span class='Ref_To_Local'>tgrel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/rel.h.html#LN114"><span class='Ref_to_Member'>rd_att</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN828"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN828"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"tgargs is null for trigger %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN814"><span class='Ref_to_Parameter'>trigid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN1032"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN254"><span class='Ref_to_Macro'>DatumGetByteaPP</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1033"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN1033"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN817"><span class='Ref_To_Local'>trigrec</span></a><span class='Operator'>-&GT;</span>tgnargs<span class='Delimiter'>; </span><a href="ruleutils.c.html#LN1033"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1033"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN432"><span class='Ref_to_Proto'>simple_quote_literal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1032"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* advance p to next string embedded in tgargs */ 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="ruleutils.c.html#LN1032"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN1032"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN1032"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if trigrec-&GT;tgnargs&GT;0 &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* We deliberately do not put semi-colon at end */ 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Clean up */ 
</span>    <a href="../../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN821"><span class='Ref_To_Local'>tgscan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN819"><span class='Ref_To_Local'>tgrel</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN818"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_triggerdef_worker &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_indexdef         - Get the definition of an index 
 * 
 * In the extended version, there is a colno argument as well as pretty bool. 
 *  if colno == 0, we want a complete index definition. 
 *  if colno &GT; 0, we only want the Nth index key's variable or expression. 
 * 
 * Note that the SQL-function versions of this omit any info about the 
 * index tablespace; this is intentional because pg_dump wants it that way. 
 * However pg_get_indexdef_string() includes the index tablespace. 
 * ---------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1076"></a><span class='Declare_Function'>pg_get_indexdef</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1078"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>indexrelid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1079"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN1080"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1079"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1080"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN317"><span class='Ref_to_Proto'>pg_get_indexdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1078"><span class='Ref_To_Local'>indexrelid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                 <a href="ruleutils.c.html#LN1079"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1080"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1080"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1094"></a><span class='Declare_Function'>pg_get_indexdef_ext</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1096"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>indexrelid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1097"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>colno</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1098"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>pretty</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN238"><span class='Ref_to_Macro'>PG_GETARG_BOOL</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1099"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN1100"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1099"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1098"><span class='Ref_To_Local'>pretty</span></a> <span class='Operator'>? </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a> <span class='Operator'>| </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a> <span class='Operator'>: </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1100"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN317"><span class='Ref_to_Proto'>pg_get_indexdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1096"><span class='Ref_To_Local'>indexrelid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1097"><span class='Ref_To_Local'>colno</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1097"><span class='Ref_To_Local'>colno</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                 <a href="ruleutils.c.html#LN1099"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1100"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1100"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Internal version for use by ALTER TABLE. 
 * Includes a tablespace clause in the result. 
 * Returns a palloc'd C string; no pretty-printing. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1119"></a><span class='Declare_Function'>pg_get_indexdef_string</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>indexrelid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="ruleutils.c.html#LN317"><span class='Ref_to_Proto'>pg_get_indexdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1119"><span class='Ref_to_Parameter'>indexrelid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* Internal version that just reports the column definitions */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1126"></a><span class='Declare_Function'>pg_get_indexdef_columns</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>indexrelid</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>pretty</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1128"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1128"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1126"><span class='Ref_to_Parameter'>pretty</span></a> <span class='Operator'>? </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a> <span class='Operator'>| </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a> <span class='Operator'>: </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="ruleutils.c.html#LN317"><span class='Ref_to_Proto'>pg_get_indexdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1126"><span class='Ref_to_Parameter'>indexrelid</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                  <a href="ruleutils.c.html#LN1128"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Internal workhorse to decompile an index definition. 
 * 
 * This is now used for exclusion constraints as well: if excludeOps is not 
 * NULL then it points to an array of exclusion operator OIDs. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN1142"></a><span class='Declare_Function'>pg_get_indexdef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>indexrelid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>colno</span><span class='Delimiter'>, 
</span><a name="LN1143"></a>                       <span class='Keyword'>const </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>excludeOps</span><span class='Delimiter'>, 
</span><a name="LN1144"></a>                       <span class='Keyword'>bool </span><span class='Declare_Parameter'>attrsOnly</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>showTblSpc</span><span class='Delimiter'>, 
</span><a name="LN1145"></a>                       <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>missing_ok</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* might want a separate isConstraint parameter later */ 
</span><a name="LN1148"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isConstraint</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1143"><span class='Ref_to_Parameter'>excludeOps</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1149"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>ht_idx</span><span class='Delimiter'>; 
</span><a name="LN1150"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>ht_idxrel</span><span class='Delimiter'>; 
</span><a name="LN1151"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>ht_am</span><span class='Delimiter'>; 
</span><a name="LN1152"></a>    <a href="../../../include/catalog/pg_index.h.html#LN66"><span class='Ref_to_Typedef'>Form_pg_index</span></a> <span class='Declare_Local'>idxrec</span><span class='Delimiter'>; 
</span><a name="LN1153"></a>    <a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a> <span class='Declare_Local'>idxrelrec</span><span class='Delimiter'>; 
</span><a name="LN1154"></a>    <a href="../../../include/catalog/pg_am.h.html#LN45"><span class='Ref_to_Typedef'>Form_pg_am</span></a>  <span class='Declare_Local'>amrec</span><span class='Delimiter'>; 
</span><a name="LN1155"></a>    <a href="../../../include/access/amapi.h.html#LN158"><span class='Ref_to_Struct'>IndexAmRoutine</span></a> <span class='Operator'>*</span><span class='Declare_Local'>amroutine</span><span class='Delimiter'>; 
</span><a name="LN1156"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>indexprs</span><span class='Delimiter'>; 
</span><a name="LN1157"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>indexpr_item</span><span class='Delimiter'>; 
</span><a name="LN1158"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span><a name="LN1159"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>indrelid</span><span class='Delimiter'>; 
</span><a name="LN1160"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>keyno</span><span class='Delimiter'>; 
</span><a name="LN1161"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>indcollDatum</span><span class='Delimiter'>; 
</span><a name="LN1162"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>indclassDatum</span><span class='Delimiter'>; 
</span><a name="LN1163"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>indoptionDatum</span><span class='Delimiter'>; 
</span><a name="LN1164"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN1165"></a>    <a href="../../../include/c.h.html#LN477"><span class='Ref_to_Typedef'>oidvector</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>indcollation</span><span class='Delimiter'>; 
</span><a name="LN1166"></a>    <a href="../../../include/c.h.html#LN477"><span class='Ref_to_Typedef'>oidvector</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>indclass</span><span class='Delimiter'>; 
</span><a name="LN1167"></a>    <a href="../../../include/c.h.html#LN466"><span class='Ref_to_Typedef'>int2vector</span></a> <span class='Operator'>*</span><span class='Declare_Local'>indoption</span><span class='Delimiter'>; 
</span><a name="LN1168"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN1169"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span><span class='Delimiter'>; 
</span><a name="LN1170"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Fetch the pg_index tuple by the Oid of the index 
     */ 
</span>    <a href="ruleutils.c.html#LN1149"><span class='Ref_To_Local'>ht_idx</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN65"><span class='Ref_to_EnumConst'>INDEXRELID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>indexrelid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1149"><span class='Ref_To_Local'>ht_idx</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1145"><span class='Ref_to_Parameter'>missing_ok</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for index %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>indexrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="ruleutils.c.html#LN1152"><span class='Ref_To_Local'>idxrec</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_index.h.html#LN66"><span class='Ref_to_Typedef'>Form_pg_index</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1149"><span class='Ref_To_Local'>ht_idx</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1159"><span class='Ref_To_Local'>indrelid</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1152"><span class='Ref_To_Local'>idxrec</span></a><span class='Operator'>-&GT;</span>indrelid<span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>indexrelid</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN1152"><span class='Ref_To_Local'>idxrec</span></a><span class='Operator'>-&GT;</span>indexrelid<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Must get indcollation, indclass, and indoption the hard way */ 
</span>    <a href="ruleutils.c.html#LN1161"><span class='Ref_To_Local'>indcollDatum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN65"><span class='Ref_to_EnumConst'>INDEXRELID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1149"><span class='Ref_To_Local'>ht_idx</span></a><span class='Delimiter'>, 
</span>                                   <a href="../../../include/catalog/pg_index.h.html#LN87"><span class='Ref_to_Const'>Anum_pg_index_indcollation</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1164"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1164"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1165"><span class='Ref_To_Local'>indcollation</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN477"><span class='Ref_to_Typedef'>oidvector</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1161"><span class='Ref_To_Local'>indcollDatum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1162"><span class='Ref_To_Local'>indclassDatum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN65"><span class='Ref_to_EnumConst'>INDEXRELID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1149"><span class='Ref_To_Local'>ht_idx</span></a><span class='Delimiter'>, 
</span>                                    <a href="../../../include/catalog/pg_index.h.html#LN88"><span class='Ref_to_Const'>Anum_pg_index_indclass</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1164"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1164"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1166"><span class='Ref_To_Local'>indclass</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN477"><span class='Ref_to_Typedef'>oidvector</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1162"><span class='Ref_To_Local'>indclassDatum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1163"><span class='Ref_To_Local'>indoptionDatum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN65"><span class='Ref_to_EnumConst'>INDEXRELID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1149"><span class='Ref_To_Local'>ht_idx</span></a><span class='Delimiter'>, 
</span>                                     <a href="../../../include/catalog/pg_index.h.html#LN89"><span class='Ref_to_Const'>Anum_pg_index_indoption</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1164"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1164"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1167"><span class='Ref_To_Local'>indoption</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN466"><span class='Ref_to_Typedef'>int2vector</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1163"><span class='Ref_To_Local'>indoptionDatum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Fetch the pg_class tuple of the index relation 
     */ 
</span>    <a href="ruleutils.c.html#LN1150"><span class='Ref_To_Local'>ht_idxrel</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>indexrelid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1150"><span class='Ref_To_Local'>ht_idxrel</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for relation %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>indexrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1153"><span class='Ref_To_Local'>idxrelrec</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1150"><span class='Ref_To_Local'>ht_idxrel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Fetch the pg_am tuple of the index' access method 
     */ 
</span>    <a href="ruleutils.c.html#LN1151"><span class='Ref_To_Local'>ht_am</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN35"><span class='Ref_to_EnumConst'>AMOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1153"><span class='Ref_To_Local'>idxrelrec</span></a><span class='Operator'>-&GT;</span>relam<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1151"><span class='Ref_To_Local'>ht_am</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for access method %u"</span><span class='Delimiter'>, 
</span>             <a href="ruleutils.c.html#LN1153"><span class='Ref_To_Local'>idxrelrec</span></a><span class='Operator'>-&GT;</span>relam<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1154"><span class='Ref_To_Local'>amrec</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_am.h.html#LN45"><span class='Ref_to_Typedef'>Form_pg_am</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1151"><span class='Ref_To_Local'>ht_am</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fetch the index AM's API struct */ 
</span>    <a href="ruleutils.c.html#LN1155"><span class='Ref_To_Local'>amroutine</span></a> <span class='Operator'>= </span><a href="../../access/index/amapi.c.html#LN31"><span class='Ref_to_Func'>GetIndexAmRoutine</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1154"><span class='Ref_To_Local'>amrec</span></a><span class='Operator'>-&GT;</span>amhandler<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Get the index expressions, if any.  (NOTE: we do not use the relcache 
     * versions of the expressions and predicate, because we want to display 
     * non-const-folded expressions.) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../access/common/heaptuple.c.html#LN295"><span class='Ref_to_Func'>heap_attisnull</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1149"><span class='Ref_To_Local'>ht_idx</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/pg_index.h.html#LN90"><span class='Ref_to_Const'>Anum_pg_index_indexprs</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1230"></a>        <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>exprsDatum</span><span class='Delimiter'>; 
</span><a name="LN1231"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN1232"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>exprsString</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN1230"><span class='Ref_To_Local'>exprsDatum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN65"><span class='Ref_to_EnumConst'>INDEXRELID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1149"><span class='Ref_To_Local'>ht_idx</span></a><span class='Delimiter'>, 
</span>                                     <a href="../../../include/catalog/pg_index.h.html#LN90"><span class='Ref_to_Const'>Anum_pg_index_indexprs</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1231"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1231"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN1232"><span class='Ref_To_Local'>exprsString</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1230"><span class='Ref_To_Local'>exprsDatum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN1156"><span class='Ref_To_Local'>indexprs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1232"><span class='Ref_To_Local'>exprsString</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1232"><span class='Ref_To_Local'>exprsString</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN1156"><span class='Ref_To_Local'>indexprs</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1157"><span class='Ref_To_Local'>indexpr_item</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1156"><span class='Ref_To_Local'>indexprs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1158"><span class='Ref_To_Local'>context</span></a> <span class='Operator'>= </span><a href="../../../include/utils/ruleutils.h.html#LN28"><span class='Ref_to_Proto'>deparse_context_for</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN451"><span class='Ref_to_Proto'>get_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1159"><span class='Ref_To_Local'>indrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1159"><span class='Ref_To_Local'>indrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Start the index definition.  Note that the index's name should never be 
     * schema-qualified, but the indexed rel's name may be. 
     */ 
</span>    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1144"><span class='Ref_to_Parameter'>attrsOnly</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1148"><span class='Ref_To_Local'>isConstraint</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE %sINDEX %s ON %s USING %s ("</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN1152"><span class='Ref_To_Local'>idxrec</span></a><span class='Operator'>-&GT;</span>indisunique <span class='Operator'>? </span><span class='String'>"UNIQUE "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1153"><span class='Ref_To_Local'>idxrelrec</span></a><span class='Operator'>-&GT;</span>relname<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                             <a href="../../../../contrib/dblink/dblink.c.html#LN111"><span class='Ref_to_Proto'>generate_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1159"><span class='Ref_To_Local'>indrelid</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1154"><span class='Ref_To_Local'>amrec</span></a><span class='Operator'>-&GT;</span>amname<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span>    <span class='Comment_Single_Line'>/* currently, must be EXCLUDE constraint */ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"EXCLUDE USING %s ("</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1154"><span class='Ref_To_Local'>amrec</span></a><span class='Operator'>-&GT;</span>amname<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Report the indexed attributes 
     */ 
</span>    <a href="ruleutils.c.html#LN1170"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1160"><span class='Ref_To_Local'>keyno</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN1160"><span class='Ref_To_Local'>keyno</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN1152"><span class='Ref_To_Local'>idxrec</span></a><span class='Operator'>-&GT;</span>indnatts<span class='Delimiter'>; </span><a href="ruleutils.c.html#LN1160"><span class='Ref_To_Local'>keyno</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1273"></a>        <a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attnum</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1152"><span class='Ref_To_Local'>idxrec</span></a><span class='Operator'>-&GT;</span>indkey<span class='Operator'>.</span>values<span class='Delimiter'>[</span><a href="ruleutils.c.html#LN1160"><span class='Ref_To_Local'>keyno</span></a><span class='Delimiter'>]; 
</span><a name="LN1274"></a>        <a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Local'>opt</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1167"><span class='Ref_To_Local'>indoption</span></a><span class='Operator'>-&GT;</span><a href="../../../include/c.h.html#LN474"><span class='Ref_to_Member'>values</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN1160"><span class='Ref_To_Local'>keyno</span></a><span class='Delimiter'>]; 
</span><a name="LN1275"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>keycoltype</span><span class='Delimiter'>; 
</span><a name="LN1276"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>keycolcollation</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>colno</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1170"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN1170"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1273"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Simple index column */ 
</span><a name="LN1285"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attname</span><span class='Delimiter'>; 
</span><a name="LN1286"></a>            <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>keycoltypmod</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN1285"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN86"><span class='Ref_to_Proto'>get_relid_attribute_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1159"><span class='Ref_To_Local'>indrelid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1273"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>colno</span></a> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>colno</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN1160"><span class='Ref_To_Local'>keyno</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1285"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../../include/utils/lsyscache.h.html#LN91"><span class='Ref_to_Proto'>get_atttypetypmodcoll</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1159"><span class='Ref_To_Local'>indrelid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1273"><span class='Ref_To_Local'>attnum</span></a><span class='Delimiter'>, 
</span>                                  <span class='Operator'>&</span><a href="ruleutils.c.html#LN1275"><span class='Ref_To_Local'>keycoltype</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1286"><span class='Ref_To_Local'>keycoltypmod</span></a><span class='Delimiter'>, 
</span>                                  <span class='Operator'>&</span><a href="ruleutils.c.html#LN1276"><span class='Ref_To_Local'>keycolcollation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* expressional index */ 
</span><a name="LN1298"></a>            <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>indexkey</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1157"><span class='Ref_To_Local'>indexpr_item</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"too few entries in indexprs list"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN1298"><span class='Ref_To_Local'>indexkey</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1157"><span class='Ref_To_Local'>indexpr_item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN1157"><span class='Ref_To_Local'>indexpr_item</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1157"><span class='Ref_To_Local'>indexpr_item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Deparse */ 
</span>            <a href="ruleutils.c.html#LN1169"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN308"><span class='Ref_to_Proto'>deparse_expression_pretty</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1298"><span class='Ref_To_Local'>indexkey</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1158"><span class='Ref_To_Local'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                            <a href="ruleutils.c.html#LN1145"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>colno</span></a> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>colno</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN1160"><span class='Ref_To_Local'>keyno</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Need parens if it's not a bare function call */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1298"><span class='Ref_To_Local'>indexkey</span></a> <span class='Operator'>&& </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1298"><span class='Ref_To_Local'>indexkey</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>                 <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN1298"><span class='Ref_To_Local'>indexkey</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>funcformat <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN436"><span class='Ref_to_EnumConst'>COERCE_EXPLICIT_CALL</span></a><span class='Parentheses'>)</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1169"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"(%s)"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1169"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="ruleutils.c.html#LN1275"><span class='Ref_To_Local'>keycoltype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1298"><span class='Ref_To_Local'>indexkey</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN1276"><span class='Ref_To_Local'>keycolcollation</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodeFuncs.h.html#LN38"><span class='Ref_to_Proto'>exprCollation</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1298"><span class='Ref_To_Local'>indexkey</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1144"><span class='Ref_to_Parameter'>attrsOnly</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>colno</span></a> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>colno</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN1160"><span class='Ref_To_Local'>keyno</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN1322"></a>            <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>indcoll</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Add collation, if not default for column */ 
</span>            <a href="ruleutils.c.html#LN1322"><span class='Ref_To_Local'>indcoll</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1165"><span class='Ref_To_Local'>indcollation</span></a><span class='Operator'>-&GT;</span><a href="../../../include/c.h.html#LN485"><span class='Ref_to_Member'>values</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN1160"><span class='Ref_To_Local'>keyno</span></a><span class='Delimiter'>]; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1322"><span class='Ref_To_Local'>indcoll</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="ruleutils.c.html#LN1322"><span class='Ref_To_Local'>indcoll</span></a> <span class='Operator'>!= </span><a href="ruleutils.c.html#LN1276"><span class='Ref_To_Local'>keycolcollation</span></a><span class='Parentheses'>)</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" COLLATE %s"</span><span class='Delimiter'>, 
</span>                                 <a href="../../../include/utils/ruleutils.h.html#LN34"><span class='Ref_to_Proto'>generate_collation_name</span></a><span class='Parentheses'>((</span><a href="ruleutils.c.html#LN1322"><span class='Ref_To_Local'>indcoll</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Add the operator class name, if not default */ 
</span>            <a href="ruleutils.c.html#LN447"><span class='Ref_to_Proto'>get_opclass_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1166"><span class='Ref_To_Local'>indclass</span></a><span class='Operator'>-&GT;</span><a href="../../../include/c.h.html#LN485"><span class='Ref_to_Member'>values</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN1160"><span class='Ref_To_Local'>keyno</span></a><span class='Delimiter'>], </span><a href="ruleutils.c.html#LN1275"><span class='Ref_To_Local'>keycoltype</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Add options if relevant */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1155"><span class='Ref_To_Local'>amroutine</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/amapi.h.html#LN170"><span class='Ref_to_Member'>amcanorder</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* if it supports sort ordering, report DESC and NULLS opts */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1274"><span class='Ref_To_Local'>opt</span></a> <span class='Operator'>& </span><a href="../../../include/catalog/pg_index.h.html#LN98"><span class='Ref_to_Const'>INDOPTION_DESC</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DESC"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* NULLS FIRST is the default in this case */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1274"><span class='Ref_To_Local'>opt</span></a> <span class='Operator'>& </span><a href="../../../include/catalog/pg_index.h.html#LN99"><span class='Ref_to_Const'>INDOPTION_NULLS_FIRST</span></a><span class='Parentheses'>))</span> 
                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NULLS LAST"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1274"><span class='Ref_To_Local'>opt</span></a> <span class='Operator'>& </span><a href="../../../include/catalog/pg_index.h.html#LN99"><span class='Ref_to_Const'>INDOPTION_NULLS_FIRST</span></a><span class='Parentheses'>) 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NULLS FIRST"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* Add the exclusion operator if relevant */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1143"><span class='Ref_to_Parameter'>excludeOps</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WITH %s"</span><span class='Delimiter'>, 
</span>                                 <a href="ruleutils.c.html#LN458"><span class='Ref_to_Proto'>generate_operator_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1143"><span class='Ref_to_Parameter'>excludeOps</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN1160"><span class='Ref_To_Local'>keyno</span></a><span class='Delimiter'>], 
</span>                                                        <a href="ruleutils.c.html#LN1275"><span class='Ref_To_Local'>keycoltype</span></a><span class='Delimiter'>, 
</span>                                                        <a href="ruleutils.c.html#LN1275"><span class='Ref_To_Local'>keycoltype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !attrsOnly&&(!colno||... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for keyno=0;keyno&LT;idxrec-... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1144"><span class='Ref_to_Parameter'>attrsOnly</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If it has options, append "WITH (options)" 
         */ 
</span>        <a href="ruleutils.c.html#LN1169"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN460"><span class='Ref_to_Proto'>flatten_reloptions</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>indexrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1169"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WITH (%s)"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1169"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1169"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Print tablespace, but only if requested 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1144"><span class='Ref_to_Parameter'>showTblSpc</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN1379"></a>            <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tblspc</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN1379"><span class='Ref_To_Local'>tblspc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN128"><span class='Ref_to_Proto'>get_rel_tablespace</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1142"><span class='Ref_to_Parameter'>indexrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1379"><span class='Ref_To_Local'>tblspc</span></a><span class='Parentheses'>))</span> 
                <a href="ruleutils.c.html#LN1379"><span class='Ref_To_Local'>tblspc</span></a> <span class='Operator'>= </span><a href="../init/globals.c.html#LN78"><span class='Ref_to_Global_Var'>MyDatabaseTableSpace</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1148"><span class='Ref_To_Local'>isConstraint</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" USING INDEX"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" TABLESPACE %s"</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/commands/tablespace.h.html#LN56"><span class='Ref_to_Proto'>get_tablespace_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1379"><span class='Ref_To_Local'>tblspc</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If it's a partial index, decompile and append the predicate 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../access/common/heaptuple.c.html#LN295"><span class='Ref_to_Func'>heap_attisnull</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1149"><span class='Ref_To_Local'>ht_idx</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/pg_index.h.html#LN91"><span class='Ref_to_Const'>Anum_pg_index_indpred</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN1395"></a>            <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>node</span><span class='Delimiter'>; 
</span><a name="LN1396"></a>            <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>predDatum</span><span class='Delimiter'>; 
</span><a name="LN1397"></a>            <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN1398"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>predString</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Convert text string to node tree */ 
</span>            <a href="ruleutils.c.html#LN1396"><span class='Ref_To_Local'>predDatum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN65"><span class='Ref_to_EnumConst'>INDEXRELID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1149"><span class='Ref_To_Local'>ht_idx</span></a><span class='Delimiter'>, 
</span>                                        <a href="../../../include/catalog/pg_index.h.html#LN91"><span class='Ref_to_Const'>Anum_pg_index_indpred</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1397"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1397"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN1398"><span class='Ref_To_Local'>predString</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1396"><span class='Ref_To_Local'>predDatum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN1395"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1398"><span class='Ref_To_Local'>predString</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1398"><span class='Ref_To_Local'>predString</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Deparse */ 
</span>            <a href="ruleutils.c.html#LN1169"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN308"><span class='Ref_to_Proto'>deparse_expression_pretty</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1395"><span class='Ref_To_Local'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1158"><span class='Ref_To_Local'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                            <a href="ruleutils.c.html#LN1145"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1148"><span class='Ref_To_Local'>isConstraint</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE (%s)"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1169"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE %s"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1169"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !heap_attisnull(ht_id... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !attrsOnly &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Clean up */ 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1149"><span class='Ref_To_Local'>ht_idx</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1150"><span class='Ref_To_Local'>ht_idxrel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1151"><span class='Ref_To_Local'>ht_am</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN1168"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_indexdef_worker &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * pg_get_statisticsobjdef 
 *      Get the definition of an extended statistics object 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1431"></a><span class='Declare_Function'>pg_get_statisticsobjdef</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1433"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>statextid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1434"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1434"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN321"><span class='Ref_to_Proto'>pg_get_statisticsobj_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1433"><span class='Ref_To_Local'>statextid</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1434"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1434"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Internal workhorse to decompile an extended statistics object. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN1448"></a><span class='Declare_Function'>pg_get_statisticsobj_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>statextid</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>missing_ok</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1450"></a>    <a href="../../../include/catalog/pg_statistic_ext.h.html#LN60"><span class='Ref_to_Typedef'>Form_pg_statistic_ext</span></a> <span class='Declare_Local'>statextrec</span><span class='Delimiter'>; 
</span><a name="LN1451"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>statexttup</span><span class='Delimiter'>; 
</span><a name="LN1452"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN1453"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>colno</span><span class='Delimiter'>; 
</span><a name="LN1454"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nsp</span><span class='Delimiter'>; 
</span><a name="LN1455"></a>    <a href="../../../include/utils/array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>arr</span><span class='Delimiter'>; 
</span><a name="LN1456"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>enabled</span><span class='Delimiter'>; 
</span><a name="LN1457"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>datum</span><span class='Delimiter'>; 
</span><a name="LN1458"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN1459"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>ndistinct_enabled</span><span class='Delimiter'>; 
</span><a name="LN1460"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>dependencies_enabled</span><span class='Delimiter'>; 
</span><a name="LN1461"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1451"><span class='Ref_To_Local'>statexttup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN89"><span class='Ref_to_EnumConst'>STATEXTOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1448"><span class='Ref_to_Parameter'>statextid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1451"><span class='Ref_To_Local'>statexttup</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1448"><span class='Ref_to_Parameter'>missing_ok</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for statistics object %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1448"><span class='Ref_to_Parameter'>statextid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="ruleutils.c.html#LN1450"><span class='Ref_To_Local'>statextrec</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_statistic_ext.h.html#LN60"><span class='Ref_to_Typedef'>Form_pg_statistic_ext</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1451"><span class='Ref_To_Local'>statexttup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1452"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1454"><span class='Ref_To_Local'>nsp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1450"><span class='Ref_To_Local'>statextrec</span></a><span class='Operator'>-&GT;</span>stxnamespace<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1452"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE STATISTICS %s"</span><span class='Delimiter'>, 
</span>                     <a href="../../../include/utils/builtins.h.html#LN78"><span class='Ref_to_Proto'>quote_qualified_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1454"><span class='Ref_To_Local'>nsp</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1450"><span class='Ref_To_Local'>statextrec</span></a><span class='Operator'>-&GT;</span>stxname<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Decode the stxkind column so that we know which stats types to print. 
     */ 
</span>    <a href="ruleutils.c.html#LN1457"><span class='Ref_To_Local'>datum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN89"><span class='Ref_to_EnumConst'>STATEXTOID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1451"><span class='Ref_To_Local'>statexttup</span></a><span class='Delimiter'>, 
</span>                            <a href="../../../include/catalog/pg_statistic_ext.h.html#LN72"><span class='Ref_to_Const'>Anum_pg_statistic_ext_stxkind</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1458"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1458"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1455"><span class='Ref_To_Local'>arr</span></a> <span class='Operator'>= </span><a href="../../../include/utils/array.h.html#LN241"><span class='Ref_to_Macro'>DatumGetArrayTypeP</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1457"><span class='Ref_To_Local'>datum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/array.h.html#LN270"><span class='Ref_to_Macro'>ARR_NDIM</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1455"><span class='Ref_To_Local'>arr</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span> <span class='Operator'>|| 
</span>        <a href="../../../include/utils/array.h.html#LN271"><span class='Ref_to_Macro'>ARR_HASNULL</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1455"><span class='Ref_To_Local'>arr</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>        <a href="../../../include/utils/array.h.html#LN272"><span class='Ref_to_Macro'>ARR_ELEMTYPE</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1455"><span class='Ref_To_Local'>arr</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN19"><span class='Ref_to_Const'>CHAROID</span></a><span class='Parentheses'>)</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"stxkind is not a 1-D char array"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1456"><span class='Ref_To_Local'>enabled</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/utils/array.h.html#LN302"><span class='Ref_to_Macro'>ARR_DATA_PTR</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1455"><span class='Ref_To_Local'>arr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1459"><span class='Ref_To_Local'>ndistinct_enabled</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1460"><span class='Ref_To_Local'>dependencies_enabled</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1461"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN1461"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="../../../include/utils/array.h.html#LN274"><span class='Ref_to_Macro'>ARR_DIMS</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1455"><span class='Ref_To_Local'>arr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; </span><a href="ruleutils.c.html#LN1461"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1456"><span class='Ref_To_Local'>enabled</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN1461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../../include/catalog/pg_statistic_ext.h.html#LN76"><span class='Ref_to_Const'>STATS_EXT_NDISTINCT</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN1459"><span class='Ref_To_Local'>ndistinct_enabled</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1456"><span class='Ref_To_Local'>enabled</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN1461"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../../include/catalog/pg_statistic_ext.h.html#LN77"><span class='Ref_to_Const'>STATS_EXT_DEPENDENCIES</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN1460"><span class='Ref_To_Local'>dependencies_enabled</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If any option is disabled, then we'll need to append the types clause 
     * to show which options are enabled.  We omit the types clause on purpose 
     * when all options are enabled, so a pg_dump/pg_restore will create all 
     * statistics types on a newer postgres version, if the statistics had all 
     * options enabled on the original version. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1459"><span class='Ref_To_Local'>ndistinct_enabled</span></a> <span class='Operator'>|| !</span><a href="ruleutils.c.html#LN1460"><span class='Ref_To_Local'>dependencies_enabled</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1452"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1459"><span class='Ref_To_Local'>ndistinct_enabled</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1452"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ndistinct"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1460"><span class='Ref_To_Local'>dependencies_enabled</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1452"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"dependencies"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1452"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1452"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ON "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1453"><span class='Ref_To_Local'>colno</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN1453"><span class='Ref_To_Local'>colno</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN1450"><span class='Ref_To_Local'>statextrec</span></a><span class='Operator'>-&GT;</span>stxkeys<span class='Operator'>.</span>dim1<span class='Delimiter'>; </span><a href="ruleutils.c.html#LN1453"><span class='Ref_To_Local'>colno</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1526"></a>        <a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attnum</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1450"><span class='Ref_To_Local'>statextrec</span></a><span class='Operator'>-&GT;</span>stxkeys<span class='Operator'>.</span>values<span class='Delimiter'>[</span><a href="ruleutils.c.html#LN1453"><span class='Ref_To_Local'>colno</span></a><span class='Delimiter'>]; 
</span><a name="LN1527"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attname</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1453"><span class='Ref_To_Local'>colno</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1452"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN1527"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN86"><span class='Ref_to_Proto'>get_relid_attribute_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1450"><span class='Ref_To_Local'>statextrec</span></a><span class='Operator'>-&GT;</span>stxrelid<span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1526"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1452"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1527"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1452"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" FROM %s"</span><span class='Delimiter'>, 
</span>                     <a href="../../../../contrib/dblink/dblink.c.html#LN111"><span class='Ref_to_Proto'>generate_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1450"><span class='Ref_To_Local'>statextrec</span></a><span class='Operator'>-&GT;</span>stxrelid<span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1451"><span class='Ref_To_Local'>statexttup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN1452"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_statisticsobj_worker &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * pg_get_partkeydef 
 * 
 * Returns the partition key specification, ie, the following: 
 * 
 * PARTITION BY { RANGE | LIST } (column opt_collation opt_opclass [, ...]) 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1553"></a><span class='Declare_Function'>pg_get_partkeydef</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1555"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>relid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1556"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1556"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN322"><span class='Ref_to_Proto'>pg_get_partkeydef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1555"><span class='Ref_To_Local'>relid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1556"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1556"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* Internal version that just reports the column definitions */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1568"></a><span class='Declare_Function'>pg_get_partkeydef_columns</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>pretty</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1570"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1570"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1568"><span class='Ref_to_Parameter'>pretty</span></a> <span class='Operator'>? </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a> <span class='Operator'>| </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a> <span class='Operator'>: </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="ruleutils.c.html#LN322"><span class='Ref_to_Proto'>pg_get_partkeydef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1568"><span class='Ref_to_Parameter'>relid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1570"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Internal workhorse to decompile a partition key definition. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN1580"></a><span class='Declare_Function'>pg_get_partkeydef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, 
</span><a name="LN1581"></a>                         <span class='Keyword'>bool </span><span class='Declare_Parameter'>attrsOnly</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>missing_ok</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1583"></a>    <a href="../../../include/catalog/pg_partitioned_table.h.html#LN58"><span class='Ref_to_Typedef'>Form_pg_partitioned_table</span></a> <span class='Declare_Local'>form</span><span class='Delimiter'>; 
</span><a name="LN1584"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span><span class='Delimiter'>; 
</span><a name="LN1585"></a>    <a href="../../../include/c.h.html#LN477"><span class='Ref_to_Typedef'>oidvector</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>partclass</span><span class='Delimiter'>; 
</span><a name="LN1586"></a>    <a href="../../../include/c.h.html#LN477"><span class='Ref_to_Typedef'>oidvector</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>partcollation</span><span class='Delimiter'>; 
</span><a name="LN1587"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>partexprs</span><span class='Delimiter'>; 
</span><a name="LN1588"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>partexpr_item</span><span class='Delimiter'>; 
</span><a name="LN1589"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span><a name="LN1590"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>datum</span><span class='Delimiter'>; 
</span><a name="LN1591"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN1592"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN1593"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>keyno</span><span class='Delimiter'>; 
</span><a name="LN1594"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span><span class='Delimiter'>; 
</span><a name="LN1595"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1584"><span class='Ref_To_Local'>tuple</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN74"><span class='Ref_to_EnumConst'>PARTRELID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1580"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1584"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1581"><span class='Ref_to_Parameter'>missing_ok</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for partition key of %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1580"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="ruleutils.c.html#LN1583"><span class='Ref_To_Local'>form</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_partitioned_table.h.html#LN58"><span class='Ref_to_Typedef'>Form_pg_partitioned_table</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1584"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1583"><span class='Ref_To_Local'>form</span></a><span class='Operator'>-&GT;</span>partrelid <span class='Operator'>== </span><a href="ruleutils.c.html#LN1580"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Must get partclass and partcollation the hard way */ 
</span>    <a href="ruleutils.c.html#LN1590"><span class='Ref_To_Local'>datum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN74"><span class='Ref_to_EnumConst'>PARTRELID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1584"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, 
</span>                            <a href="../../../include/catalog/pg_partitioned_table.h.html#LN69"><span class='Ref_to_Const'>Anum_pg_partitioned_table_partclass</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1591"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1591"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1585"><span class='Ref_To_Local'>partclass</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN477"><span class='Ref_to_Typedef'>oidvector</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1590"><span class='Ref_To_Local'>datum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1590"><span class='Ref_To_Local'>datum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN74"><span class='Ref_to_EnumConst'>PARTRELID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1584"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, 
</span>                            <a href="../../../include/catalog/pg_partitioned_table.h.html#LN70"><span class='Ref_to_Const'>Anum_pg_partitioned_table_partcollation</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1591"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1591"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1586"><span class='Ref_To_Local'>partcollation</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN477"><span class='Ref_to_Typedef'>oidvector</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/postgres.h.html#LN554"><span class='Ref_to_Macro'>DatumGetPointer</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1590"><span class='Ref_To_Local'>datum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Get the expressions, if any.  (NOTE: we do not use the relcache 
     * versions of the expressions, because we want to display 
     * non-const-folded expressions.) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../access/common/heaptuple.c.html#LN295"><span class='Ref_to_Func'>heap_attisnull</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1584"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/pg_partitioned_table.h.html#LN71"><span class='Ref_to_Const'>Anum_pg_partitioned_table_partexprs</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1628"></a>        <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>exprsDatum</span><span class='Delimiter'>; 
</span><a name="LN1629"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN1630"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>exprsString</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN1628"><span class='Ref_To_Local'>exprsDatum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN74"><span class='Ref_to_EnumConst'>PARTRELID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1584"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, 
</span>                               <a href="../../../include/catalog/pg_partitioned_table.h.html#LN71"><span class='Ref_to_Const'>Anum_pg_partitioned_table_partexprs</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1629"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1629"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN1630"><span class='Ref_To_Local'>exprsString</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1628"><span class='Ref_To_Local'>exprsDatum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN1587"><span class='Ref_To_Local'>partexprs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1630"><span class='Ref_To_Local'>exprsString</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1587"><span class='Ref_To_Local'>partexprs</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a><span class='Parentheses'>))</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected node type found in partexprs: %d"</span><span class='Delimiter'>, 
</span>                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1587"><span class='Ref_To_Local'>partexprs</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1630"><span class='Ref_To_Local'>exprsString</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN1587"><span class='Ref_To_Local'>partexprs</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1588"><span class='Ref_To_Local'>partexpr_item</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1587"><span class='Ref_To_Local'>partexprs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1589"><span class='Ref_To_Local'>context</span></a> <span class='Operator'>= </span><a href="../../../include/utils/ruleutils.h.html#LN28"><span class='Ref_to_Proto'>deparse_context_for</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN451"><span class='Ref_to_Proto'>get_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1580"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1580"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1592"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1583"><span class='Ref_To_Local'>form</span></a><span class='Operator'>-&GT;</span>partstrat<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN786"><span class='Ref_to_Const'>PARTITION_STRATEGY_LIST</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1581"><span class='Ref_to_Parameter'>attrsOnly</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"LIST"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN787"><span class='Ref_to_Const'>PARTITION_STRATEGY_RANGE</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1581"><span class='Ref_to_Parameter'>attrsOnly</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"RANGE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected partition strategy: %d"</span><span class='Delimiter'>, 
</span>                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN1583"><span class='Ref_To_Local'>form</span></a><span class='Operator'>-&GT;</span>partstrat<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1581"><span class='Ref_to_Parameter'>attrsOnly</span></a><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1595"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1593"><span class='Ref_To_Local'>keyno</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN1593"><span class='Ref_To_Local'>keyno</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN1583"><span class='Ref_To_Local'>form</span></a><span class='Operator'>-&GT;</span>partnatts<span class='Delimiter'>; </span><a href="ruleutils.c.html#LN1593"><span class='Ref_To_Local'>keyno</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1672"></a>        <a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attnum</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1583"><span class='Ref_To_Local'>form</span></a><span class='Operator'>-&GT;</span>partattrs<span class='Operator'>.</span>values<span class='Delimiter'>[</span><a href="ruleutils.c.html#LN1593"><span class='Ref_To_Local'>keyno</span></a><span class='Delimiter'>]; 
</span><a name="LN1673"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>keycoltype</span><span class='Delimiter'>; 
</span><a name="LN1674"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>keycolcollation</span><span class='Delimiter'>; 
</span><a name="LN1675"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>partcoll</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1595"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN1595"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1672"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Simple attribute reference */ 
</span><a name="LN1682"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attname</span><span class='Delimiter'>; 
</span><a name="LN1683"></a>            <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>keycoltypmod</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN1682"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN86"><span class='Ref_to_Proto'>get_relid_attribute_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1580"><span class='Ref_to_Parameter'>relid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1672"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1682"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../../include/utils/lsyscache.h.html#LN91"><span class='Ref_to_Proto'>get_atttypetypmodcoll</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1580"><span class='Ref_to_Parameter'>relid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1672"><span class='Ref_To_Local'>attnum</span></a><span class='Delimiter'>, 
</span>                                  <span class='Operator'>&</span><a href="ruleutils.c.html#LN1673"><span class='Ref_To_Local'>keycoltype</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1683"><span class='Ref_To_Local'>keycoltypmod</span></a><span class='Delimiter'>, 
</span>                                  <span class='Operator'>&</span><a href="ruleutils.c.html#LN1674"><span class='Ref_To_Local'>keycolcollation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Expression */ 
</span><a name="LN1694"></a>            <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>partkey</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1588"><span class='Ref_To_Local'>partexpr_item</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"too few entries in partexprs list"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN1694"><span class='Ref_To_Local'>partkey</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1588"><span class='Ref_To_Local'>partexpr_item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN1588"><span class='Ref_To_Local'>partexpr_item</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1588"><span class='Ref_To_Local'>partexpr_item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Deparse */ 
</span>            <a href="ruleutils.c.html#LN1594"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN308"><span class='Ref_to_Proto'>deparse_expression_pretty</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1694"><span class='Ref_To_Local'>partkey</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1589"><span class='Ref_To_Local'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                            <span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1594"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN1673"><span class='Ref_To_Local'>keycoltype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1694"><span class='Ref_To_Local'>partkey</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN1674"><span class='Ref_To_Local'>keycolcollation</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodeFuncs.h.html#LN38"><span class='Ref_to_Proto'>exprCollation</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1694"><span class='Ref_To_Local'>partkey</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Add collation, if not default for column */ 
</span>        <a href="ruleutils.c.html#LN1675"><span class='Ref_To_Local'>partcoll</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1586"><span class='Ref_To_Local'>partcollation</span></a><span class='Operator'>-&GT;</span><a href="../../../include/c.h.html#LN485"><span class='Ref_to_Member'>values</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN1593"><span class='Ref_To_Local'>keyno</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1581"><span class='Ref_to_Parameter'>attrsOnly</span></a> <span class='Operator'>&& </span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1675"><span class='Ref_To_Local'>partcoll</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="ruleutils.c.html#LN1675"><span class='Ref_To_Local'>partcoll</span></a> <span class='Operator'>!= </span><a href="ruleutils.c.html#LN1674"><span class='Ref_To_Local'>keycolcollation</span></a><span class='Parentheses'>)</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" COLLATE %s"</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/ruleutils.h.html#LN34"><span class='Ref_to_Proto'>generate_collation_name</span></a><span class='Parentheses'>((</span><a href="ruleutils.c.html#LN1675"><span class='Ref_To_Local'>partcoll</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Add the operator class name, if not default */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1581"><span class='Ref_to_Parameter'>attrsOnly</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN447"><span class='Ref_to_Proto'>get_opclass_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1585"><span class='Ref_To_Local'>partclass</span></a><span class='Operator'>-&GT;</span><a href="../../../include/c.h.html#LN485"><span class='Ref_to_Member'>values</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN1593"><span class='Ref_To_Local'>keyno</span></a><span class='Delimiter'>], </span><a href="ruleutils.c.html#LN1673"><span class='Ref_To_Local'>keycoltype</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1592"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for keyno=0;keyno&LT;form-&GT;p... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1581"><span class='Ref_to_Parameter'>attrsOnly</span></a><span class='Parentheses'>) 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1592"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Clean up */ 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1584"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN1592"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_partkeydef_worker &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * pg_get_partition_constraintdef 
 * 
 * Returns partition constraint expression as a string for the input relation 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1735"></a><span class='Declare_Function'>pg_get_partition_constraintdef</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1737"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>relationId</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1738"></a>    <a href="../../../include/nodes/primnodes.h.html#LN131"><span class='Ref_to_Struct'>Expr</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>constr_expr</span><span class='Delimiter'>; 
</span><a name="LN1739"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN1740"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span><a name="LN1741"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>consrc</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1738"><span class='Ref_To_Local'>constr_expr</span></a> <span class='Operator'>= </span><a href="../../../include/catalog/partition.h.html#LN84"><span class='Ref_to_Proto'>get_partition_qual_relid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1737"><span class='Ref_To_Local'>relationId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Quick exit if not a partition */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1738"><span class='Ref_To_Local'>constr_expr</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Deparse and return the constraint expression. 
     */ 
</span>    <a href="ruleutils.c.html#LN1739"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1740"><span class='Ref_To_Local'>context</span></a> <span class='Operator'>= </span><a href="../../../include/utils/ruleutils.h.html#LN28"><span class='Ref_to_Proto'>deparse_context_for</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN451"><span class='Ref_to_Proto'>get_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1737"><span class='Ref_To_Local'>relationId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1737"><span class='Ref_To_Local'>relationId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN1741"><span class='Ref_To_Local'>consrc</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN308"><span class='Ref_to_Proto'>deparse_expression_pretty</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN1738"><span class='Ref_To_Local'>constr_expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1740"><span class='Ref_To_Local'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                       <span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1739"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1741"><span class='Ref_To_Local'>consrc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_partition_constraintdef &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * pg_get_constraintdef 
 * 
 * Returns the definition for the constraint, ie, everything that needs to 
 * appear after "ALTER TABLE ... ADD CONSTRAINT &LT;constraintname&GT;". 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1767"></a><span class='Declare_Function'>pg_get_constraintdef</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1769"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>constraintId</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1770"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN1771"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1770"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1771"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN324"><span class='Ref_to_Proto'>pg_get_constraintdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1769"><span class='Ref_To_Local'>constraintId</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1770"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1771"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1771"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1784"></a><span class='Declare_Function'>pg_get_constraintdef_ext</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1786"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>constraintId</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1787"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>pretty</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN238"><span class='Ref_to_Macro'>PG_GETARG_BOOL</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1788"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN1789"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1788"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1787"><span class='Ref_To_Local'>pretty</span></a> <span class='Operator'>? </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a> <span class='Operator'>| </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a> <span class='Operator'>: </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1789"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN324"><span class='Ref_to_Proto'>pg_get_constraintdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1786"><span class='Ref_To_Local'>constraintId</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1788"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1789"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1789"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Internal version that returns a full ALTER TABLE ... ADD CONSTRAINT command 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1805"></a><span class='Declare_Function'>pg_get_constraintdef_command</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>constraintId</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="ruleutils.c.html#LN324"><span class='Ref_to_Proto'>pg_get_constraintdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1805"><span class='Ref_to_Parameter'>constraintId</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * As of 9.4, we now use an MVCC snapshot for this. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN1814"></a><span class='Declare_Function'>pg_get_constraintdef_worker</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>constraintId</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>fullCommand</span><span class='Delimiter'>, 
</span><a name="LN1815"></a>                            <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>missing_ok</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1817"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tup</span><span class='Delimiter'>; 
</span><a name="LN1818"></a>    <a href="../../../include/catalog/pg_constraint.h.html#LN146"><span class='Ref_to_Typedef'>Form_pg_constraint</span></a> <span class='Declare_Local'>conForm</span><span class='Delimiter'>; 
</span><a name="LN1819"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN1820"></a>    <a href="../../../include/access/genam.h.html#LN86"><span class='Ref_to_Typedef'>SysScanDesc</span></a> <span class='Declare_Local'>scandesc</span><span class='Delimiter'>; 
</span><a name="LN1821"></a>    <a href="../../../include/access/skey.h.html#LN63"><span class='Ref_to_Struct'>ScanKeyData</span></a> <span class='Declare_Local'>scankey</span><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN1822"></a>    <a href="../../../include/utils/snapshot.h.html#LN22"><span class='Ref_to_Typedef'>Snapshot</span></a>    <span class='Declare_Local'>snapshot</span> <span class='Operator'>= </span><a href="../../../include/utils/snapmgr.h.html#LN80"><span class='Ref_to_Proto'>RegisterSnapshot</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/snapmgr.h.html#LN63"><span class='Ref_to_Proto'>GetTransactionSnapshot</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span><a name="LN1823"></a>    <a href="../../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>relation</span> <span class='Operator'>= </span><a href="../../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_constraint.h.html#LN28"><span class='Ref_to_Const'>ConstraintRelationId</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1821"><span class='Ref_To_Local'>scankey</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], 
</span>                <a href="../../../include/access/sysattr.h.html#LN21"><span class='Ref_to_Const'>ObjectIdAttributeNumber</span></a><span class='Delimiter'>, 
</span>                <a href="../../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1814"><span class='Ref_to_Parameter'>constraintId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN1820"><span class='Ref_To_Local'>scandesc</span></a> <span class='Operator'>= </span><a href="../../../include/access/genam.h.html#LN189"><span class='Ref_to_Proto'>systable_beginscan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1823"><span class='Ref_To_Local'>relation</span></a><span class='Delimiter'>, 
</span>                                  <a href="../../../include/catalog/indexing.h.html#LN129"><span class='Ref_to_Const'>ConstraintOidIndexId</span></a><span class='Delimiter'>, 
</span>                                  <span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                  <a href="ruleutils.c.html#LN1822"><span class='Ref_To_Local'>snapshot</span></a><span class='Delimiter'>, 
</span>                                  <span class='Number'>1</span><span class='Delimiter'>, 
</span>                                  <a href="ruleutils.c.html#LN1821"><span class='Ref_To_Local'>scankey</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We later use the tuple with SysCacheGetAttr() as if we had obtained it 
     * via SearchSysCache, which works fine. 
     */ 
</span>    <a href="ruleutils.c.html#LN1817"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../../include/access/genam.h.html#LN194"><span class='Ref_to_Proto'>systable_getnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1820"><span class='Ref_To_Local'>scandesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/snapmgr.h.html#LN81"><span class='Ref_to_Proto'>UnregisterSnapshot</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1822"><span class='Ref_To_Local'>snapshot</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1817"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1815"><span class='Ref_to_Parameter'>missing_ok</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1820"><span class='Ref_To_Local'>scandesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1823"><span class='Ref_To_Local'>relation</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"could not find tuple for constraint %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1814"><span class='Ref_to_Parameter'>constraintId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_constraint.h.html#LN146"><span class='Ref_to_Typedef'>Form_pg_constraint</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1817"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1814"><span class='Ref_to_Parameter'>fullCommand</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Currently, callers want ALTER TABLE (without ONLY) for CHECK 
         * constraints, and other types of constraints don't inherit anyway so 
         * it doesn't matter whether we say ONLY or not.  Someday we might 
         * need to let callers specify whether to put ONLY in the command. 
         */ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE %s ADD CONSTRAINT %s "</span><span class='Delimiter'>, 
</span>                         <a href="ruleutils.c.html#LN453"><span class='Ref_to_Proto'>generate_qualified_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>conrelid<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>conname<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>contype<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_constraint.h.html#LN188"><span class='Ref_to_Const'>CONSTRAINT_FOREIGN</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1877"></a>                <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span><a name="LN1878"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN1879"></a>                <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>string</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Start off the constraint definition */ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"FOREIGN KEY ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Fetch and build referencing-column list */ 
</span>                <a href="ruleutils.c.html#LN1877"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN52"><span class='Ref_to_EnumConst'>CONSTROID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1817"><span class='Ref_To_Local'>tup</span></a><span class='Delimiter'>, 
</span>                                      <a href="../../../include/catalog/pg_constraint.h.html#LN169"><span class='Ref_to_Const'>Anum_pg_constraint_conkey</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1878"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1878"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>                    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"null conkey for constraint %u"</span><span class='Delimiter'>, 
</span>                         <a href="ruleutils.c.html#LN1814"><span class='Ref_to_Parameter'>constraintId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN314"><span class='Ref_to_Proto'>decompile_column_index_array</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1877"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>conrelid<span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* add foreign relation name */ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") REFERENCES %s("</span><span class='Delimiter'>, 
</span>                                 <a href="../../../../contrib/dblink/dblink.c.html#LN111"><span class='Ref_to_Proto'>generate_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>confrelid<span class='Delimiter'>, 
</span>                                                        <a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Fetch and build referenced-column list */ 
</span>                <a href="ruleutils.c.html#LN1877"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN52"><span class='Ref_to_EnumConst'>CONSTROID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1817"><span class='Ref_To_Local'>tup</span></a><span class='Delimiter'>, 
</span>                                      <a href="../../../include/catalog/pg_constraint.h.html#LN170"><span class='Ref_to_Const'>Anum_pg_constraint_confkey</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1878"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1878"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>                    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"null confkey for constraint %u"</span><span class='Delimiter'>, 
</span>                         <a href="ruleutils.c.html#LN1814"><span class='Ref_to_Parameter'>constraintId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN314"><span class='Ref_to_Proto'>decompile_column_index_array</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1877"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>confrelid<span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Add match type */ 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>confmatchtype<span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2046"><span class='Ref_to_Const'>FKCONSTR_MATCH_FULL</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>" MATCH FULL"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2047"><span class='Ref_to_Const'>FKCONSTR_MATCH_PARTIAL</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>" MATCH PARTIAL"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2048"><span class='Ref_to_Const'>FKCONSTR_MATCH_SIMPLE</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized confmatchtype: %d"</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>confmatchtype<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Add ON UPDATE and ON DELETE clauses, if needed */ 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>confupdtype<span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2039"><span class='Ref_to_Const'>FKCONSTR_ACTION_NOACTION</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* suppress default */ 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2040"><span class='Ref_to_Const'>FKCONSTR_ACTION_RESTRICT</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>"RESTRICT"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2041"><span class='Ref_to_Const'>FKCONSTR_ACTION_CASCADE</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>"CASCADE"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2042"><span class='Ref_to_Const'>FKCONSTR_ACTION_SETNULL</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>"SET NULL"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2043"><span class='Ref_to_Const'>FKCONSTR_ACTION_SETDEFAULT</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>"SET DEFAULT"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized confupdtype: %d"</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>confupdtype<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch conForm-&GT;confupdtype &raquo; </span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ON UPDATE %s"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>confdeltype<span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2039"><span class='Ref_to_Const'>FKCONSTR_ACTION_NOACTION</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* suppress default */ 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2040"><span class='Ref_to_Const'>FKCONSTR_ACTION_RESTRICT</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>"RESTRICT"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2041"><span class='Ref_to_Const'>FKCONSTR_ACTION_CASCADE</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>"CASCADE"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2042"><span class='Ref_to_Const'>FKCONSTR_ACTION_SETNULL</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>"SET NULL"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN2043"><span class='Ref_to_Const'>FKCONSTR_ACTION_SETDEFAULT</span></a><span class='Operator'>: 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='String'>"SET DEFAULT"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized confdeltype: %d"</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>confdeltype<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch conForm-&GT;confdeltype &raquo; </span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ON DELETE %s"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1879"><span class='Ref_To_Local'>string</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_constraint.h.html#LN189"><span class='Ref_to_Const'>CONSTRAINT_PRIMARY</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_constraint.h.html#LN190"><span class='Ref_to_Const'>CONSTRAINT_UNIQUE</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1987"></a>                <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span><a name="LN1988"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN1989"></a>                <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>indexId</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Start off the constraint definition */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>contype <span class='Operator'>== </span><a href="../../../include/catalog/pg_constraint.h.html#LN189"><span class='Ref_to_Const'>CONSTRAINT_PRIMARY</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"PRIMARY KEY ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"UNIQUE ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Fetch and build target column list */ 
</span>                <a href="ruleutils.c.html#LN1987"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN52"><span class='Ref_to_EnumConst'>CONSTROID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1817"><span class='Ref_To_Local'>tup</span></a><span class='Delimiter'>, 
</span>                                      <a href="../../../include/catalog/pg_constraint.h.html#LN169"><span class='Ref_to_Const'>Anum_pg_constraint_conkey</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1988"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1988"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>                    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"null conkey for constraint %u"</span><span class='Delimiter'>, 
</span>                         <a href="ruleutils.c.html#LN1814"><span class='Ref_to_Parameter'>constraintId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN314"><span class='Ref_to_Proto'>decompile_column_index_array</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1987"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>conrelid<span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN1989"><span class='Ref_To_Local'>indexId</span></a> <span class='Operator'>= </span><a href="../../../include/catalog/dependency.h.html#LN244"><span class='Ref_to_Proto'>get_constraint_index</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1814"><span class='Ref_to_Parameter'>constraintId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* XXX why do we only print these bits if fullCommand? */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1814"><span class='Ref_to_Parameter'>fullCommand</span></a> <span class='Operator'>&& </span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1989"><span class='Ref_To_Local'>indexId</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN2013"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>options</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN460"><span class='Ref_to_Proto'>flatten_reloptions</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1989"><span class='Ref_To_Local'>indexId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2014"></a>                    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tblspc</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2013"><span class='Ref_To_Local'>options</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WITH (%s)"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2013"><span class='Ref_To_Local'>options</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2013"><span class='Ref_To_Local'>options</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <a href="ruleutils.c.html#LN2014"><span class='Ref_To_Local'>tblspc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN128"><span class='Ref_to_Proto'>get_rel_tablespace</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1989"><span class='Ref_To_Local'>indexId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2014"><span class='Ref_To_Local'>tblspc</span></a><span class='Parentheses'>))</span> 
                        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" USING INDEX TABLESPACE %s"</span><span class='Delimiter'>, 
</span>                              <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/commands/tablespace.h.html#LN56"><span class='Ref_to_Proto'>get_tablespace_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2014"><span class='Ref_To_Local'>tblspc</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_constraint.h.html#LN187"><span class='Ref_to_Const'>CONSTRAINT_CHECK</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN2032"></a>                <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span><a name="LN2033"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN2034"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>conbin</span><span class='Delimiter'>; 
</span><a name="LN2035"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>consrc</span><span class='Delimiter'>; 
</span><a name="LN2036"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span><a name="LN2037"></a>                <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Fetch constraint expression in parsetree form */ 
</span>                <a href="ruleutils.c.html#LN2032"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN52"><span class='Ref_to_EnumConst'>CONSTROID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1817"><span class='Ref_To_Local'>tup</span></a><span class='Delimiter'>, 
</span>                                      <a href="../../../include/catalog/pg_constraint.h.html#LN175"><span class='Ref_to_Const'>Anum_pg_constraint_conbin</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2033"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2033"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>                    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"null conbin for constraint %u"</span><span class='Delimiter'>, 
</span>                         <a href="ruleutils.c.html#LN1814"><span class='Ref_to_Parameter'>constraintId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN2034"><span class='Ref_To_Local'>conbin</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2032"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN2036"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2034"><span class='Ref_To_Local'>conbin</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Set up deparsing context for Var nodes in constraint */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>conrelid <span class='Operator'>!= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* relation constraint */ 
</span>                    <a href="ruleutils.c.html#LN2037"><span class='Ref_To_Local'>context</span></a> <span class='Operator'>= </span><a href="../../../include/utils/ruleutils.h.html#LN28"><span class='Ref_to_Proto'>deparse_context_for</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN451"><span class='Ref_to_Proto'>get_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>conrelid<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                  <a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>conrelid<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* domain constraint --- can't have Vars */ 
</span>                    <a href="ruleutils.c.html#LN2037"><span class='Ref_To_Local'>context</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <a href="ruleutils.c.html#LN2035"><span class='Ref_To_Local'>consrc</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN308"><span class='Ref_to_Proto'>deparse_expression_pretty</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2036"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2037"><span class='Ref_To_Local'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                                   <a href="ruleutils.c.html#LN1815"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Now emit the constraint definition, adding NO INHERIT if 
                 * necessary. 
                 * 
                 * There are cases where the constraint expression will be 
                 * fully parenthesized and we don't need the outer parens ... 
                 * but there are other cases where we do need 'em.  Be 
                 * conservative for now. 
                 * 
                 * Note that simply checking for leading '(' and trailing ')' 
                 * would NOT be good enough, consider "(x &GT; 0) AND (y &GT; 0)". 
                 */ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CHECK (%s)%s"</span><span class='Delimiter'>, 
</span>                                 <a href="ruleutils.c.html#LN2035"><span class='Ref_To_Local'>consrc</span></a><span class='Delimiter'>, 
</span>                                 <a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>connoinherit <span class='Operator'>? </span><span class='String'>" NO INHERIT"</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_constraint.h.html#LN191"><span class='Ref_to_Const'>CONSTRAINT_TRIGGER</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * There isn't an ALTER TABLE syntax for creating a user-defined 
             * constraint trigger, but it seems better to print something than 
             * throw an error; if we throw error then this function couldn't 
             * safely be applied to all rows of pg_constraint. 
             */ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"TRIGGER"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_constraint.h.html#LN192"><span class='Ref_to_Const'>CONSTRAINT_EXCLUSION</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN2094"></a>                <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>indexOid</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>conindid<span class='Delimiter'>; 
</span><a name="LN2095"></a>                <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span><a name="LN2096"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN2097"></a>                <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>elems</span><span class='Delimiter'>; 
</span><a name="LN2098"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>nElems</span><span class='Delimiter'>; 
</span><a name="LN2099"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN2100"></a>                <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>operators</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Extract operator OIDs from the pg_constraint tuple */ 
</span>                <a href="ruleutils.c.html#LN2095"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN52"><span class='Ref_to_EnumConst'>CONSTROID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1817"><span class='Ref_To_Local'>tup</span></a><span class='Delimiter'>, 
</span>                                      <a href="../../../include/catalog/pg_constraint.h.html#LN174"><span class='Ref_to_Const'>Anum_pg_constraint_conexclop</span></a><span class='Delimiter'>, 
</span>                                      <span class='Operator'>&</span><a href="ruleutils.c.html#LN2096"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2096"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>                    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"null conexclop for constraint %u"</span><span class='Delimiter'>, 
</span>                         <a href="ruleutils.c.html#LN1814"><span class='Ref_to_Parameter'>constraintId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../../include/utils/array.h.html#LN382"><span class='Ref_to_Proto'>deconstruct_array</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/array.h.html#LN241"><span class='Ref_to_Macro'>DatumGetArrayTypeP</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2095"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN27"><span class='Ref_to_Const'>OIDOID</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, 
</span>                                  <span class='Operator'>&</span><a href="ruleutils.c.html#LN2097"><span class='Ref_To_Local'>elems</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2098"><span class='Ref_To_Local'>nElems</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN2100"><span class='Ref_To_Local'>operators</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2098"><span class='Ref_To_Local'>nElems</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2099"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN2099"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN2098"><span class='Ref_To_Local'>nElems</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN2099"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                    <a href="ruleutils.c.html#LN2100"><span class='Ref_To_Local'>operators</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN2099"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN505"><span class='Ref_to_Macro'>DatumGetObjectId</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2097"><span class='Ref_To_Local'>elems</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN2099"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* pg_get_indexdef_worker does the rest */ 
</span>                <span class='Comment_Multi_Line'>/* suppress tablespace because pg_dump wants it that way */ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, 
</span>                                       <a href="ruleutils.c.html#LN317"><span class='Ref_to_Proto'>pg_get_indexdef_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2094"><span class='Ref_To_Local'>indexOid</span></a><span class='Delimiter'>, 
</span>                                                              <span class='Number'>0</span><span class='Delimiter'>, 
</span>                                                              <a href="ruleutils.c.html#LN2100"><span class='Ref_To_Local'>operators</span></a><span class='Delimiter'>, 
</span>                                                              <span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                                              <span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                                              <a href="ruleutils.c.html#LN1815"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>, 
</span>                                                              <span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid constraint type \"%c\""</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>contype<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch conForm-&GT;contype &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>condeferrable<span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DEFERRABLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>condeferred<span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" INITIALLY DEFERRED"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN1818"><span class='Ref_To_Local'>conForm</span></a><span class='Operator'>-&GT;</span>convalidated<span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NOT VALID"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Cleanup */ 
</span>    <a href="../../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1820"><span class='Ref_To_Local'>scandesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN1823"><span class='Ref_To_Local'>relation</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN1819"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_constraintdef_worker &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Convert an int16[] Datum into a comma-separated list of column names 
 * for the indicated relation; append the list to buf. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2155"></a><span class='Declare_Function'>decompile_column_index_array</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>column_index_array</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relId</span><span class='Delimiter'>, 
</span><a name="LN2156"></a>                             <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2158"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>keys</span><span class='Delimiter'>; 
</span><a name="LN2159"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nKeys</span><span class='Delimiter'>; 
</span><a name="LN2160"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Extract data from array of int16 */ 
</span>    <a href="../../../include/utils/array.h.html#LN382"><span class='Ref_to_Proto'>deconstruct_array</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/array.h.html#LN241"><span class='Ref_to_Macro'>DatumGetArrayTypeP</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2155"><span class='Ref_to_Parameter'>column_index_array</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN22"><span class='Ref_to_Const'>INT2OID</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='String'>'s'</span><span class='Delimiter'>, 
</span>                      <span class='Operator'>&</span><a href="ruleutils.c.html#LN2158"><span class='Ref_To_Local'>keys</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2159"><span class='Ref_To_Local'>nKeys</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2160"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN2160"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN2159"><span class='Ref_To_Local'>nKeys</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN2160"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2169"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>colName</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN2169"><span class='Ref_To_Local'>colName</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN86"><span class='Ref_to_Proto'>get_relid_attribute_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2155"><span class='Ref_to_Parameter'>relId</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN449"><span class='Ref_to_Macro'>DatumGetInt16</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2158"><span class='Ref_To_Local'>keys</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN2160"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2160"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2156"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2169"><span class='Ref_To_Local'>colName</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2156"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", %s"</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2169"><span class='Ref_To_Local'>colName</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end decompile_column_index_array &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_expr         - Decompile an expression tree 
 * 
 * Input: an expression tree in nodeToString form, and a relation OID 
 * 
 * Output: reverse-listed expression 
 * 
 * Currently, the expression can only refer to a single relation, namely 
 * the one specified by the second parameter.  This is sufficient for 
 * partial indexes, column default expressions, etc.  We also support 
 * Var-free expressions, for which the OID can be InvalidOid. 
 * ---------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2195"></a><span class='Declare_Function'>pg_get_expr</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2197"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2198"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>relid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2199"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN2200"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>relname</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2199"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2198"><span class='Ref_To_Local'>relid</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Get the name for the relation */ 
</span>        <a href="ruleutils.c.html#LN2200"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN124"><span class='Ref_to_Proto'>get_rel_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2198"><span class='Ref_To_Local'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If the OID isn't actually valid, don't throw an error, just return 
         * NULL.  This is a bit questionable, but it's what we've done 
         * historically, and it can help avoid unwanted failures when 
         * examining catalog entries for just-deleted relations. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2200"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN2200"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN326"><span class='Ref_to_Proto'>pg_get_expr_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2197"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2198"><span class='Ref_To_Local'>relid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2200"><span class='Ref_To_Local'>relname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2199"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_expr &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2225"></a><span class='Declare_Function'>pg_get_expr_ext</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2227"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2228"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>relid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2229"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>pretty</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN238"><span class='Ref_to_Macro'>PG_GETARG_BOOL</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2230"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>prettyFlags</span><span class='Delimiter'>; 
</span><a name="LN2231"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>relname</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2230"><span class='Ref_To_Local'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN2229"><span class='Ref_To_Local'>pretty</span></a> <span class='Operator'>? </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a> <span class='Operator'>| </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a> <span class='Operator'>: </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2228"><span class='Ref_To_Local'>relid</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Get the name for the relation */ 
</span>        <a href="ruleutils.c.html#LN2231"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN124"><span class='Ref_to_Proto'>get_rel_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2228"><span class='Ref_To_Local'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* See notes above */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2231"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN2231"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN326"><span class='Ref_to_Proto'>pg_get_expr_worker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2227"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2228"><span class='Ref_To_Local'>relid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2231"><span class='Ref_To_Local'>relname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2230"><span class='Ref_To_Local'>prettyFlags</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_expr_ext &raquo; </span> 
 
<span class='Keyword'>static </span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>* 
</span><a name="LN2250"></a><span class='Declare_Function'>pg_get_expr_worker</span><span class='Parentheses'>(</span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>relname</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2252"></a>    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>node</span><span class='Delimiter'>; 
</span><a name="LN2253"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span><a name="LN2254"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>exprstr</span><span class='Delimiter'>; 
</span><a name="LN2255"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Convert input TEXT object to C string */ 
</span>    <a href="ruleutils.c.html#LN2254"><span class='Ref_To_Local'>exprstr</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN87"><span class='Ref_to_Proto'>text_to_cstring</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2250"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Convert expression to node tree */ 
</span>    <a href="ruleutils.c.html#LN2252"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2254"><span class='Ref_To_Local'>exprstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2254"><span class='Ref_To_Local'>exprstr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Prepare deparse context if needed */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2250"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN2253"><span class='Ref_To_Local'>context</span></a> <span class='Operator'>= </span><a href="../../../include/utils/ruleutils.h.html#LN28"><span class='Ref_to_Proto'>deparse_context_for</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2250"><span class='Ref_to_Parameter'>relname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2250"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN2253"><span class='Ref_To_Local'>context</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Deparse */ 
</span>    <a href="ruleutils.c.html#LN2255"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN308"><span class='Ref_to_Proto'>deparse_expression_pretty</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2252"><span class='Ref_To_Local'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2253"><span class='Ref_To_Local'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                    <a href="ruleutils.c.html#LN2250"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2255"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_expr_worker &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_userbyid         - Get a user name by roleid and 
 *                fallback to 'unknown (OID=n)' 
 * ---------- 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2285"></a><span class='Declare_Function'>pg_get_userbyid</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2287"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>roleid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2288"></a>    <a href="../../../include/c.h.html#LN496"><span class='Ref_to_Typedef'>Name</span></a>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN2289"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>roletup</span><span class='Delimiter'>; 
</span><a name="LN2290"></a>    <a href="../../../include/catalog/pg_authid.h.html#LN71"><span class='Ref_to_Typedef'>Form_pg_authid</span></a> <span class='Declare_Local'>role_rec</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Allocate space for the result 
     */ 
</span>    <a href="ruleutils.c.html#LN2288"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN496"><span class='Ref_to_Typedef'>Name</span></a><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    memset<span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="ruleutils.c.html#LN2288"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Get the pg_authid entry and print the result 
     */ 
</span>    <a href="ruleutils.c.html#LN2289"><span class='Ref_To_Local'>roletup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN44"><span class='Ref_to_EnumConst'>AUTHOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2287"><span class='Ref_To_Local'>roleid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2289"><span class='Ref_To_Local'>roletup</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN2290"><span class='Ref_To_Local'>role_rec</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_authid.h.html#LN71"><span class='Ref_to_Typedef'>Form_pg_authid</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2289"><span class='Ref_To_Local'>roletup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/c.h.html#LN829"><span class='Ref_to_Macro'>StrNCpy</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="ruleutils.c.html#LN2288"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2290"><span class='Ref_To_Local'>role_rec</span></a><span class='Operator'>-&GT;</span>rolname<span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2289"><span class='Ref_To_Local'>roletup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="ruleutils.c.html#LN2288"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"unknown (OID=%u)"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2287"><span class='Ref_To_Local'>roleid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN322"><span class='Ref_to_Macro'>PG_RETURN_NAME</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2288"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_userbyid &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * pg_get_serial_sequence 
 *      Get the name of the sequence used by a serial column, 
 *      formatted suitably for passing to setval, nextval or currval. 
 *      First parameter is not treated as double-quoted, second parameter 
 *      is --- see documentation for reason. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2323"></a><span class='Declare_Function'>pg_get_serial_sequence</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2325"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>tablename</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2326"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>columnname</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN272"><span class='Ref_to_Macro'>PG_GETARG_TEXT_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2327"></a>    <a href="../../../include/nodes/primnodes.h.html#LN62"><span class='Ref_to_Struct'>RangeVar</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>tablerv</span><span class='Delimiter'>; 
</span><a name="LN2328"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>tableOid</span><span class='Delimiter'>; 
</span><a name="LN2329"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>column</span><span class='Delimiter'>; 
</span><a name="LN2330"></a>    <a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attnum</span><span class='Delimiter'>; 
</span><a name="LN2331"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>sequenceId</span> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span><a name="LN2332"></a>    <a href="../../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>depRel</span><span class='Delimiter'>; 
</span><a name="LN2333"></a>    <a href="../../../include/access/skey.h.html#LN63"><span class='Ref_to_Struct'>ScanKeyData</span></a> <span class='Declare_Local'>key</span><span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>]; 
</span><a name="LN2334"></a>    <a href="../../../include/access/genam.h.html#LN86"><span class='Ref_to_Typedef'>SysScanDesc</span></a> <span class='Declare_Local'>scan</span><span class='Delimiter'>; 
</span><a name="LN2335"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tup</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Look up table name.  Can't lock it - we might not have privileges. */ 
</span>    <a href="ruleutils.c.html#LN2327"><span class='Ref_To_Local'>tablerv</span></a> <span class='Operator'>= </span><a href="../../../include/catalog/namespace.h.html#LN119"><span class='Ref_to_Proto'>makeRangeVarFromNameList</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/varlena.h.html#LN28"><span class='Ref_to_Proto'>textToQualifiedNameList</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2325"><span class='Ref_To_Local'>tablename</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN2328"><span class='Ref_To_Local'>tableOid</span></a> <span class='Operator'>= </span><a href="../../../include/catalog/namespace.h.html#LN52"><span class='Ref_to_Macro'>RangeVarGetRelid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2327"><span class='Ref_To_Local'>tablerv</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN33"><span class='Ref_to_Const'>NoLock</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get the number of the column */ 
</span>    <a href="ruleutils.c.html#LN2329"><span class='Ref_To_Local'>column</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN87"><span class='Ref_to_Proto'>text_to_cstring</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2326"><span class='Ref_To_Local'>columnname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2330"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN87"><span class='Ref_to_Proto'>get_attnum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2328"><span class='Ref_To_Local'>tableOid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2329"><span class='Ref_To_Local'>column</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2330"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>== </span><a href="../../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_COLUMN<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"column \"%s\" of relation \"%s\" does not exist"</span><span class='Delimiter'>, 
</span>                        <a href="ruleutils.c.html#LN2329"><span class='Ref_To_Local'>column</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2327"><span class='Ref_To_Local'>tablerv</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN67"><span class='Ref_to_Member'>relname</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Search the dependency table for the dependent sequence */ 
</span>    <a href="ruleutils.c.html#LN2332"><span class='Ref_To_Local'>depRel</span></a> <span class='Operator'>= </span><a href="../../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_depend.h.html#LN28"><span class='Ref_to_Const'>DependRelationId</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2333"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], 
</span>                <a href="../../../include/catalog/pg_depend.h.html#LN70"><span class='Ref_to_Const'>Anum_pg_depend_refclassid</span></a><span class='Delimiter'>, 
</span>                <a href="../../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_class.h.html#LN28"><span class='Ref_to_Const'>RelationRelationId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2333"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], 
</span>                <a href="../../../include/catalog/pg_depend.h.html#LN71"><span class='Ref_to_Const'>Anum_pg_depend_refobjid</span></a><span class='Delimiter'>, 
</span>                <a href="../../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_OIDEQ<span class='Delimiter'>, 
</span>                <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2328"><span class='Ref_To_Local'>tableOid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../access/common/scankey.c.html#LN74"><span class='Ref_to_Func'>ScanKeyInit</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2333"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>], 
</span>                <a href="../../../include/catalog/pg_depend.h.html#LN72"><span class='Ref_to_Const'>Anum_pg_depend_refobjsubid</span></a><span class='Delimiter'>, 
</span>                <a href="../../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Delimiter'>, </span>F_INT4EQ<span class='Delimiter'>, 
</span>                <a href="../../../include/postgres.h.html#LN484"><span class='Ref_to_Macro'>Int32GetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2330"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2334"><span class='Ref_To_Local'>scan</span></a> <span class='Operator'>= </span><a href="../../../include/access/genam.h.html#LN189"><span class='Ref_to_Proto'>systable_beginscan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2332"><span class='Ref_To_Local'>depRel</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/indexing.h.html#LN146"><span class='Ref_to_Const'>DependReferenceIndexId</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                              <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2333"><span class='Ref_To_Local'>key</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2335"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../../include/access/genam.h.html#LN194"><span class='Ref_to_Proto'>systable_getnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2334"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2372"></a>        <a href="../../../include/catalog/pg_depend.h.html#LN60"><span class='Ref_to_Typedef'>Form_pg_depend</span></a> <span class='Declare_Local'>deprec</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_depend.h.html#LN60"><span class='Ref_to_Typedef'>Form_pg_depend</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2335"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We assume any auto dependency of a sequence on a column must be 
         * what we are looking for.  (We need the relkind test because indexes 
         * can also have auto dependencies on columns.) 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2372"><span class='Ref_To_Local'>deprec</span></a><span class='Operator'>-&GT;</span>classid <span class='Operator'>== </span><a href="../../../include/catalog/pg_class.h.html#LN28"><span class='Ref_to_Const'>RelationRelationId</span></a> <span class='Operator'>&& 
</span>            <a href="ruleutils.c.html#LN2372"><span class='Ref_To_Local'>deprec</span></a><span class='Operator'>-&GT;</span>objsubid <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>            <a href="ruleutils.c.html#LN2372"><span class='Ref_To_Local'>deprec</span></a><span class='Operator'>-&GT;</span>deptype <span class='Operator'>== </span><a href="../../../include/catalog/dependency.h.html#LN75"><span class='Ref_to_EnumConst'>DEPENDENCY_AUTO</span></a> <span class='Operator'>&& 
</span>            <a href="../../../include/utils/lsyscache.h.html#LN127"><span class='Ref_to_Proto'>get_rel_relkind</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2372"><span class='Ref_To_Local'>deprec</span></a><span class='Operator'>-&GT;</span>objid<span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN2331"><span class='Ref_To_Local'>sequenceId</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN2372"><span class='Ref_To_Local'>deprec</span></a><span class='Operator'>-&GT;</span>objid<span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/access/genam.h.html#LN196"><span class='Ref_to_Proto'>systable_endscan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2334"><span class='Ref_To_Local'>scan</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2332"><span class='Ref_To_Local'>depRel</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2331"><span class='Ref_To_Local'>sequenceId</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2394"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN2394"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN453"><span class='Ref_to_Proto'>generate_qualified_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2331"><span class='Ref_To_Local'>sequenceId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2394"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_serial_sequence &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * pg_get_functiondef 
 *      Returns the complete "CREATE OR REPLACE FUNCTION ..." statement for 
 *      the specified function. 
 * 
 * Note: if you change the output format of this function, be careful not 
 * to break psql's rules (in \ef and \sf) for identifying the start of the 
 * function body.  To wit: the function body starts on a line that begins 
 * with "AS ", and no preceding line will look like that. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2416"></a><span class='Declare_Function'>pg_get_functiondef</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2418"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>funcid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2419"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN2420"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>dq</span><span class='Delimiter'>; 
</span><a name="LN2421"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>proctup</span><span class='Delimiter'>; 
</span><a name="LN2422"></a>    <a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a> <span class='Declare_Local'>proc</span><span class='Delimiter'>; 
</span><a name="LN2423"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span><a name="LN2424"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN2425"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>prosrc</span><span class='Delimiter'>; 
</span><a name="LN2426"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>name</span><span class='Delimiter'>; 
</span><a name="LN2427"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>nsp</span><span class='Delimiter'>; 
</span><a name="LN2428"></a>    <a href="../../../include/c.h.html#LN379"><span class='Ref_to_Typedef'>float4</span></a>      <span class='Declare_Local'>procost</span><span class='Delimiter'>; 
</span><a name="LN2429"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>oldlen</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Look up the function */ 
</span>    <a href="ruleutils.c.html#LN2421"><span class='Ref_To_Local'>proctup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2418"><span class='Ref_To_Local'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2421"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2421"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN2426"><span class='Ref_To_Local'>name</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>proname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>proisagg<span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_WRONG_OBJECT_TYPE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"%s\" is an aggregate function"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2426"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We always qualify the function name, to ensure the right function gets 
     * replaced. 
     */ 
</span>    <a href="ruleutils.c.html#LN2427"><span class='Ref_To_Local'>nsp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>pronamespace<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE OR REPLACE FUNCTION %s("</span><span class='Delimiter'>, 
</span>                     <a href="../../../include/utils/builtins.h.html#LN78"><span class='Ref_to_Proto'>quote_qualified_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2427"><span class='Ref_To_Local'>nsp</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2426"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN328"><span class='Ref_to_Proto'>print_function_arguments</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2421"><span class='Ref_To_Local'>proctup</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>")\n RETURNS "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN330"><span class='Ref_to_Proto'>print_function_rettype</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2421"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN331"><span class='Ref_to_Proto'>print_function_trftypes</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2421"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"\n LANGUAGE %s\n"</span><span class='Delimiter'>, 
</span>                  <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN95"><span class='Ref_to_Proto'>get_language_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>prolang<span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Emit some miscellaneous options on one line */ 
</span>    <a href="ruleutils.c.html#LN2429"><span class='Ref_To_Local'>oldlen</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>proiswindow<span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WINDOW"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>provolatile<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_proc.h.html#LN5482"><span class='Ref_to_Const'>PROVOLATILE_IMMUTABLE</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IMMUTABLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_proc.h.html#LN5483"><span class='Ref_to_Const'>PROVOLATILE_STABLE</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" STABLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_proc.h.html#LN5484"><span class='Ref_to_Const'>PROVOLATILE_VOLATILE</span></a><span class='Operator'>: 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>proparallel<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_proc.h.html#LN5491"><span class='Ref_to_Const'>PROPARALLEL_SAFE</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" PARALLEL SAFE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_proc.h.html#LN5492"><span class='Ref_to_Const'>PROPARALLEL_RESTRICTED</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" PARALLEL RESTRICTED"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/catalog/pg_proc.h.html#LN5493"><span class='Ref_to_Const'>PROPARALLEL_UNSAFE</span></a><span class='Operator'>: 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>proisstrict<span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" STRICT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>prosecdef<span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" SECURITY DEFINER"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>proleakproof<span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" LEAKPROOF"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* This code for the default cost and rows should match functioncmds.c */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>prolang <span class='Operator'>== </span><a href="../../../include/catalog/pg_language.h.html#LN73"><span class='Ref_to_Const'>INTERNALlanguageId</span></a> <span class='Operator'>|| 
</span>        <a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>prolang <span class='Operator'>== </span><a href="../../../include/catalog/pg_language.h.html#LN76"><span class='Ref_to_Const'>ClanguageId</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN2428"><span class='Ref_To_Local'>procost</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN2428"><span class='Ref_To_Local'>procost</span></a> <span class='Operator'>= </span><span class='Number'>100</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>procost <span class='Operator'>!= </span><a href="ruleutils.c.html#LN2428"><span class='Ref_To_Local'>procost</span></a><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" COST %g"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>procost<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>prorows <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>prorows <span class='Operator'>!= </span><span class='Number'>1000</span><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ROWS %g"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2422"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>prorows<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2429"><span class='Ref_To_Local'>oldlen</span></a> <span class='Operator'>!= </span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a><span class='Parentheses'>) 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Emit any proconfig options, one per line */ 
</span>    <a href="ruleutils.c.html#LN2423"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2421"><span class='Ref_To_Local'>proctup</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/pg_proc.h.html#LN116"><span class='Ref_to_Const'>Anum_pg_proc_proconfig</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2424"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN2424"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2517"></a>        <a href="../../../include/utils/array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>a</span> <span class='Operator'>= </span><a href="../../../include/utils/array.h.html#LN241"><span class='Ref_to_Macro'>DatumGetArrayTypeP</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2423"><span class='Ref_To_Local'>tmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2518"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/utils/array.h.html#LN272"><span class='Ref_to_Macro'>ARR_ELEMTYPE</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2517"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN26"><span class='Ref_to_Const'>TEXTOID</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/utils/array.h.html#LN270"><span class='Ref_to_Macro'>ARR_NDIM</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2517"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/utils/array.h.html#LN276"><span class='Ref_to_Macro'>ARR_LBOUND</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2517"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2518"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN2518"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT;= </span><a href="../../../include/utils/array.h.html#LN274"><span class='Ref_to_Macro'>ARR_DIMS</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2517"><span class='Ref_To_Local'>a</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; </span><a href="ruleutils.c.html#LN2518"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span><a name="LN2526"></a>            <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>d</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN2526"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="../../../include/utils/array.h.html#LN355"><span class='Ref_to_Proto'>array_ref</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2517"><span class='Ref_To_Local'>a</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2518"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, 
</span>                          <span class='Operator'>-</span><span class='Number'>1</span> <span class='Comment_Multi_Line'>/* varlenarray */ </span><span class='Delimiter'>, 
</span>                          <span class='Operator'>-</span><span class='Number'>1</span> <span class='Comment_Multi_Line'>/* TEXT's typlen */ </span><span class='Delimiter'>, 
</span>                          <span class='Boolean'>false </span><span class='Comment_Multi_Line'>/* TEXT's typbyval */ </span><span class='Delimiter'>, 
</span>                          <span class='String'>'i'</span> <span class='Comment_Multi_Line'>/* TEXT's typalign */ </span><span class='Delimiter'>, 
</span>                          <span class='Operator'>&</span><a href="ruleutils.c.html#LN2424"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN2424"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN2536"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>configitem</span> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2526"><span class='Ref_To_Local'>d</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2537"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>pos</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN2537"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2536"><span class='Ref_To_Local'>configitem</span></a><span class='Delimiter'>, </span><span class='String'>'='</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2537"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="ruleutils.c.html#LN2537"><span class='Ref_To_Local'>pos</span></a><span class='Operator'>++ = </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" SET %s TO "</span><span class='Delimiter'>, 
</span>                                 <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2536"><span class='Ref_To_Local'>configitem</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Some GUC variable names are 'LIST' type and hence must not 
                 * be quoted. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2536"><span class='Ref_To_Local'>configitem</span></a><span class='Delimiter'>, </span><span class='String'>"DateStyle"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> 
                    <span class='Operator'>|| </span><a href="../../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2536"><span class='Ref_To_Local'>configitem</span></a><span class='Delimiter'>, </span><span class='String'>"search_path"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2537"><span class='Ref_To_Local'>pos</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="ruleutils.c.html#LN432"><span class='Ref_to_Proto'>simple_quote_literal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2537"><span class='Ref_To_Local'>pos</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !isnull &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=1;i&LT;=ARR_DIMS(a)[0]... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !isnull &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* And finally the function definition ... */ 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"AS "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2423"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2421"><span class='Ref_To_Local'>proctup</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/pg_proc.h.html#LN115"><span class='Ref_to_Const'>Anum_pg_proc_probin</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2424"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN2424"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN432"><span class='Ref_to_Proto'>simple_quote_literal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2423"><span class='Ref_To_Local'>tmp</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* assume prosrc isn't null */ 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="ruleutils.c.html#LN2423"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2421"><span class='Ref_To_Local'>proctup</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/pg_proc.h.html#LN114"><span class='Ref_to_Const'>Anum_pg_proc_prosrc</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2424"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2424"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"null prosrc"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN2425"><span class='Ref_To_Local'>prosrc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2423"><span class='Ref_To_Local'>tmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We always use dollar quoting.  Figure out a suitable delimiter. 
     * 
     * Since the user is likely to be editing the function body string, we 
     * shouldn't use a short delimiter that he might easily create a conflict 
     * with.  Hence prefer "$function$", but extend if needed. 
     */ 
</span>    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2420"><span class='Ref_To_Local'>dq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2420"><span class='Ref_To_Local'>dq</span></a><span class='Delimiter'>, </span><span class='String'>"$function"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span>strstr<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2425"><span class='Ref_To_Local'>prosrc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2420"><span class='Ref_To_Local'>dq</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2420"><span class='Ref_To_Local'>dq</span></a><span class='Delimiter'>, </span><span class='String'>'x'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2420"><span class='Ref_To_Local'>dq</span></a><span class='Delimiter'>, </span><span class='String'>'$'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2420"><span class='Ref_To_Local'>dq</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2425"><span class='Ref_To_Local'>prosrc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2420"><span class='Ref_To_Local'>dq</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2421"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2419"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_functiondef &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * pg_get_function_arguments 
 *      Get a nicely-formatted list of arguments for a function. 
 *      This is everything that would go between the parentheses in 
 *      CREATE FUNCTION. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2607"></a><span class='Declare_Function'>pg_get_function_arguments</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2609"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>funcid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2610"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN2611"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>proctup</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2611"><span class='Ref_To_Local'>proctup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2609"><span class='Ref_To_Local'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2611"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2610"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN328"><span class='Ref_to_Proto'>print_function_arguments</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2610"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2611"><span class='Ref_To_Local'>proctup</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2611"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2610"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * pg_get_function_identity_arguments 
 *      Get a formatted list of arguments for a function. 
 *      This is everything that would go between the parentheses in 
 *      ALTER FUNCTION, etc.  In particular, don't print defaults. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2633"></a><span class='Declare_Function'>pg_get_function_identity_arguments</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2635"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>funcid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2636"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN2637"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>proctup</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2637"><span class='Ref_To_Local'>proctup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2635"><span class='Ref_To_Local'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2637"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2636"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN328"><span class='Ref_to_Proto'>print_function_arguments</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2636"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2637"><span class='Ref_To_Local'>proctup</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2637"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2636"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * pg_get_function_result 
 *      Get a nicely-formatted version of the result type of a function. 
 *      This is what would appear after RETURNS in CREATE FUNCTION. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2658"></a><span class='Declare_Function'>pg_get_function_result</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2660"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>funcid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2661"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN2662"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>proctup</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2662"><span class='Ref_To_Local'>proctup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2660"><span class='Ref_To_Local'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2662"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2661"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN330"><span class='Ref_to_Proto'>print_function_rettype</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2661"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2662"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2662"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2661"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Guts of pg_get_function_result: append the function's return type 
 * to the specified buffer. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2682"></a><span class='Declare_Function'>print_function_rettype</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>proctup</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2684"></a>    <a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a> <span class='Declare_Local'>proc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2682"><span class='Ref_to_Parameter'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2685"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntabargs</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN2686"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>rbuf</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2686"><span class='Ref_To_Local'>rbuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2684"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>proretset<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* It might be a table function; try to print the arguments */ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2686"><span class='Ref_To_Local'>rbuf</span></a><span class='Delimiter'>, </span><span class='String'>"TABLE("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN2685"><span class='Ref_To_Local'>ntabargs</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN328"><span class='Ref_to_Proto'>print_function_arguments</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2686"><span class='Ref_To_Local'>rbuf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2682"><span class='Ref_to_Parameter'>proctup</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2685"><span class='Ref_To_Local'>ntabargs</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2686"><span class='Ref_To_Local'>rbuf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../lib/stringinfo.c.html#LN60"><span class='Ref_to_Func'>resetStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2686"><span class='Ref_To_Local'>rbuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2685"><span class='Ref_To_Local'>ntabargs</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Not a table function, so do the normal thing */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2684"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>proretset<span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2686"><span class='Ref_To_Local'>rbuf</span></a><span class='Delimiter'>, </span><span class='String'>"SETOF "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2686"><span class='Ref_To_Local'>rbuf</span></a><span class='Delimiter'>, </span><a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2684"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>prorettype<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2682"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2686"><span class='Ref_To_Local'>rbuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end print_function_rettype &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Common code for pg_get_function_arguments and pg_get_function_result: 
 * append the desired subset of arguments to buf.  We print only TABLE 
 * arguments when print_table_args is true, and all the others when it's false. 
 * We print argument defaults only if print_defaults is true. 
 * Function return value is the number of arguments printed. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN2720"></a><span class='Declare_Function'>print_function_arguments</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>proctup</span><span class='Delimiter'>, 
</span><a name="LN2721"></a>                         <span class='Keyword'>bool </span><span class='Declare_Parameter'>print_table_args</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>print_defaults</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2723"></a>    <a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a> <span class='Declare_Local'>proc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2724"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numargs</span><span class='Delimiter'>; 
</span><a name="LN2725"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>argtypes</span><span class='Delimiter'>; 
</span><a name="LN2726"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>argnames</span><span class='Delimiter'>; 
</span><a name="LN2727"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>argmodes</span><span class='Delimiter'>; 
</span><a name="LN2728"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>insertorderbyat</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN2729"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>argsprinted</span><span class='Delimiter'>; 
</span><a name="LN2730"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>inputargno</span><span class='Delimiter'>; 
</span><a name="LN2731"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nlackdefaults</span><span class='Delimiter'>; 
</span><a name="LN2732"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>nextargdefault</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2733"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2724"><span class='Ref_To_Local'>numargs</span></a> <span class='Operator'>= </span><a href="../../../include/funcapi.h.html#LN171"><span class='Ref_to_Proto'>get_func_arg_info</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>proctup</span></a><span class='Delimiter'>, 
</span>                                <span class='Operator'>&</span><a href="ruleutils.c.html#LN2725"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2726"><span class='Ref_To_Local'>argnames</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2727"><span class='Ref_To_Local'>argmodes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2731"><span class='Ref_To_Local'>nlackdefaults</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN2724"><span class='Ref_To_Local'>numargs</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2721"><span class='Ref_to_Parameter'>print_defaults</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN2723"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>pronargdefaults <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2741"></a>        <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>proargdefaults</span><span class='Delimiter'>; 
</span><a name="LN2742"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN2741"><span class='Ref_To_Local'>proargdefaults</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>proctup</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/catalog/pg_proc.h.html#LN112"><span class='Ref_to_Const'>Anum_pg_proc_proargdefaults</span></a><span class='Delimiter'>, 
</span>                                         <span class='Operator'>&</span><a href="ruleutils.c.html#LN2742"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN2742"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2749"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span><span class='Delimiter'>; 
</span><a name="LN2750"></a>            <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>argdefaults</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN2749"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2741"><span class='Ref_To_Local'>proargdefaults</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN2750"><span class='Ref_To_Local'>argdefaults</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN575"><span class='Ref_to_Macro'>castNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a><span class='Delimiter'>, </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2749"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2749"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN2732"><span class='Ref_To_Local'>nextargdefault</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2750"><span class='Ref_To_Local'>argdefaults</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* nlackdefaults counts only *input* arguments lacking defaults */ 
</span>            <a href="ruleutils.c.html#LN2731"><span class='Ref_To_Local'>nlackdefaults</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN2723"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>pronargs <span class='Operator'>- </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2750"><span class='Ref_To_Local'>argdefaults</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if print_defaults&&proc-... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Check for special treatment of ordered-set aggregates */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2723"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>proisagg<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2764"></a>        <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>aggtup</span><span class='Delimiter'>; 
</span><a name="LN2765"></a>        <a href="../../../include/catalog/pg_aggregate.h.html#LN86"><span class='Ref_to_Typedef'>Form_pg_aggregate</span></a> <span class='Declare_Local'>agg</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN2764"><span class='Ref_To_Local'>aggtup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN33"><span class='Ref_to_EnumConst'>AGGFNOID</span></a><span class='Delimiter'>, 
</span>                                 <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="../../../include/access/htup_details.h.html#LN694"><span class='Ref_to_Macro'>HeapTupleGetOid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>proctup</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2764"><span class='Ref_To_Local'>aggtup</span></a><span class='Parentheses'>))</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for aggregate %u"</span><span class='Delimiter'>, 
</span>                 <a href="../../../include/access/htup_details.h.html#LN694"><span class='Ref_to_Macro'>HeapTupleGetOid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>proctup</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN2765"><span class='Ref_To_Local'>agg</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_aggregate.h.html#LN86"><span class='Ref_to_Typedef'>Form_pg_aggregate</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2764"><span class='Ref_To_Local'>aggtup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/pg_aggregate.h.html#LN128"><span class='Ref_to_Macro'>AGGKIND_IS_ORDERED_SET</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2765"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span>aggkind<span class='Parentheses'>))</span> 
            <a href="ruleutils.c.html#LN2728"><span class='Ref_To_Local'>insertorderbyat</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN2765"><span class='Ref_To_Local'>agg</span></a><span class='Operator'>-&GT;</span>aggnumdirectargs<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2764"><span class='Ref_To_Local'>aggtup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="ruleutils.c.html#LN2729"><span class='Ref_To_Local'>argsprinted</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN2730"><span class='Ref_To_Local'>inputargno</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2733"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN2733"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN2724"><span class='Ref_To_Local'>numargs</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN2733"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2782"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>argtype</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN2725"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN2733"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN2783"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>argname</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN2726"><span class='Ref_To_Local'>argnames</span></a> <span class='Operator'>? </span><a href="ruleutils.c.html#LN2726"><span class='Ref_To_Local'>argnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN2733"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>: </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2784"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>argmode</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN2727"><span class='Ref_To_Local'>argmodes</span></a> <span class='Operator'>? </span><a href="ruleutils.c.html#LN2727"><span class='Ref_To_Local'>argmodes</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN2733"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>: </span><a href="../../../include/catalog/pg_proc.h.html#LN5500"><span class='Ref_to_Const'>PROARGMODE_IN</span></a><span class='Delimiter'>; 
</span><a name="LN2785"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>modename</span><span class='Delimiter'>; 
</span><a name="LN2786"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>isinput</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2784"><span class='Ref_To_Local'>argmode</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../../include/catalog/pg_proc.h.html#LN5500"><span class='Ref_to_Const'>PROARGMODE_IN</span></a><span class='Operator'>: 
</span>                <a href="ruleutils.c.html#LN2785"><span class='Ref_To_Local'>modename</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN2786"><span class='Ref_To_Local'>isinput</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/catalog/pg_proc.h.html#LN5502"><span class='Ref_to_Const'>PROARGMODE_INOUT</span></a><span class='Operator'>: 
</span>                <a href="ruleutils.c.html#LN2785"><span class='Ref_To_Local'>modename</span></a> <span class='Operator'>= </span><span class='String'>"INOUT "</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN2786"><span class='Ref_To_Local'>isinput</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/catalog/pg_proc.h.html#LN5501"><span class='Ref_to_Const'>PROARGMODE_OUT</span></a><span class='Operator'>: 
</span>                <a href="ruleutils.c.html#LN2785"><span class='Ref_To_Local'>modename</span></a> <span class='Operator'>= </span><span class='String'>"OUT "</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN2786"><span class='Ref_To_Local'>isinput</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/catalog/pg_proc.h.html#LN5503"><span class='Ref_to_Const'>PROARGMODE_VARIADIC</span></a><span class='Operator'>: 
</span>                <a href="ruleutils.c.html#LN2785"><span class='Ref_To_Local'>modename</span></a> <span class='Operator'>= </span><span class='String'>"VARIADIC "</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN2786"><span class='Ref_To_Local'>isinput</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/catalog/pg_proc.h.html#LN5504"><span class='Ref_to_Const'>PROARGMODE_TABLE</span></a><span class='Operator'>: 
</span>                <a href="ruleutils.c.html#LN2785"><span class='Ref_To_Local'>modename</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN2786"><span class='Ref_To_Local'>isinput</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid parameter mode '%c'"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2784"><span class='Ref_To_Local'>argmode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN2785"><span class='Ref_To_Local'>modename</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span>                <a href="ruleutils.c.html#LN2786"><span class='Ref_To_Local'>isinput</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch argmode &raquo; </span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2786"><span class='Ref_To_Local'>isinput</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN2730"><span class='Ref_To_Local'>inputargno</span></a><span class='Operator'>++</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* this is a 1-based counter */ 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2721"><span class='Ref_to_Parameter'>print_table_args</span></a> <span class='Operator'>!= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2784"><span class='Ref_To_Local'>argmode</span></a> <span class='Operator'>== </span><a href="../../../include/catalog/pg_proc.h.html#LN5504"><span class='Ref_to_Const'>PROARGMODE_TABLE</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2729"><span class='Ref_To_Local'>argsprinted</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN2728"><span class='Ref_To_Local'>insertorderbyat</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2729"><span class='Ref_To_Local'>argsprinted</span></a><span class='Parentheses'>) 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ORDER BY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2729"><span class='Ref_To_Local'>argsprinted</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2785"><span class='Ref_To_Local'>modename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2783"><span class='Ref_To_Local'>argname</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN2783"><span class='Ref_To_Local'>argname</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s "</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2783"><span class='Ref_To_Local'>argname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2782"><span class='Ref_To_Local'>argtype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2721"><span class='Ref_to_Parameter'>print_defaults</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN2786"><span class='Ref_To_Local'>isinput</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN2730"><span class='Ref_To_Local'>inputargno</span></a> <span class='Operator'>&GT; </span><a href="ruleutils.c.html#LN2731"><span class='Ref_To_Local'>nlackdefaults</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2837"></a>            <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span> 
            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2732"><span class='Ref_To_Local'>nextargdefault</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN2837"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2732"><span class='Ref_To_Local'>nextargdefault</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN2732"><span class='Ref_To_Local'>nextargdefault</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2732"><span class='Ref_To_Local'>nextargdefault</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2720"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DEFAULT %s"</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/ruleutils.h.html#LN26"><span class='Ref_to_Proto'>deparse_expression</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2837"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="ruleutils.c.html#LN2729"><span class='Ref_To_Local'>argsprinted</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* nasty hack: print the last arg twice for variadic ordered-set agg */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2729"><span class='Ref_To_Local'>argsprinted</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN2728"><span class='Ref_To_Local'>insertorderbyat</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN2733"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN2724"><span class='Ref_To_Local'>numargs</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN2733"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* aggs shouldn't have defaults anyway, but just to be sure ... */ 
</span>            <a href="ruleutils.c.html#LN2721"><span class='Ref_to_Parameter'>print_defaults</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numargs;i++ &raquo; </span> 
 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN2729"><span class='Ref_To_Local'>argsprinted</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end print_function_arguments &raquo; </span> 
 
<span class='Keyword'>static bool 
</span><a name="LN2861"></a><span class='Declare_Function'>is_input_argument</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>nth</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>argmodes</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN2861"><span class='Ref_to_Parameter'>argmodes</span></a> 
            <span class='Operator'>|| </span><a href="ruleutils.c.html#LN2861"><span class='Ref_to_Parameter'>argmodes</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN2861"><span class='Ref_to_Parameter'>nth</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../../include/catalog/pg_proc.h.html#LN5500"><span class='Ref_to_Const'>PROARGMODE_IN</span></a> 
            <span class='Operator'>|| </span><a href="ruleutils.c.html#LN2861"><span class='Ref_to_Parameter'>argmodes</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN2861"><span class='Ref_to_Parameter'>nth</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../../include/catalog/pg_proc.h.html#LN5502"><span class='Ref_to_Const'>PROARGMODE_INOUT</span></a> 
            <span class='Operator'>|| </span><a href="ruleutils.c.html#LN2861"><span class='Ref_to_Parameter'>argmodes</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN2861"><span class='Ref_to_Parameter'>nth</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../../include/catalog/pg_proc.h.html#LN5503"><span class='Ref_to_Const'>PROARGMODE_VARIADIC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Append used transformed types to specified buffer 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2873"></a><span class='Declare_Function'>print_function_trftypes</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>proctup</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2875"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>trftypes</span><span class='Delimiter'>; 
</span><a name="LN2876"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntypes</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2876"><span class='Ref_To_Local'>ntypes</span></a> <span class='Operator'>= </span><a href="../../../include/funcapi.h.html#LN178"><span class='Ref_to_Proto'>get_func_trftypes</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2873"><span class='Ref_to_Parameter'>proctup</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2875"><span class='Ref_To_Local'>trftypes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2876"><span class='Ref_To_Local'>ntypes</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2881"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2873"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"\n TRANSFORM "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2881"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN2881"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN2876"><span class='Ref_To_Local'>ntypes</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN2881"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2881"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2873"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2873"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"FOR TYPE %s"</span><span class='Delimiter'>, </span><a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2875"><span class='Ref_To_Local'>trftypes</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN2881"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end print_function_trftypes &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Get textual representation of a function argument's default value.  The 
 * second argument of this function is the argument number among all arguments 
 * (i.e. proallargtypes, *not* proargtypes), starting with 1, because that's 
 * how information_schema.sql uses it. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN2900"></a><span class='Declare_Function'>pg_get_function_arg_default</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2902"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>funcid</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2903"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>nth_arg</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2904"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>proctup</span><span class='Delimiter'>; 
</span><a name="LN2905"></a>    <a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a> <span class='Declare_Local'>proc</span><span class='Delimiter'>; 
</span><a name="LN2906"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numargs</span><span class='Delimiter'>; 
</span><a name="LN2907"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>argtypes</span><span class='Delimiter'>; 
</span><a name="LN2908"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>argnames</span><span class='Delimiter'>; 
</span><a name="LN2909"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>argmodes</span><span class='Delimiter'>; 
</span><a name="LN2910"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN2911"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>argdefaults</span><span class='Delimiter'>; 
</span><a name="LN2912"></a>    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>node</span><span class='Delimiter'>; 
</span><a name="LN2913"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span><span class='Delimiter'>; 
</span><a name="LN2914"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nth_inputarg</span><span class='Delimiter'>; 
</span><a name="LN2915"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>proargdefaults</span><span class='Delimiter'>; 
</span><a name="LN2916"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN2917"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nth_default</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2904"><span class='Ref_To_Local'>proctup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2902"><span class='Ref_To_Local'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2904"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2906"><span class='Ref_To_Local'>numargs</span></a> <span class='Operator'>= </span><a href="../../../include/funcapi.h.html#LN171"><span class='Ref_to_Proto'>get_func_arg_info</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2904"><span class='Ref_To_Local'>proctup</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2907"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2908"><span class='Ref_To_Local'>argnames</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN2909"><span class='Ref_To_Local'>argmodes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2903"><span class='Ref_To_Local'>nth_arg</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN2903"><span class='Ref_To_Local'>nth_arg</span></a> <span class='Operator'>&GT; </span><a href="ruleutils.c.html#LN2906"><span class='Ref_To_Local'>numargs</span></a> <span class='Operator'>|| !</span><a href="ruleutils.c.html#LN2860"><span class='Ref_to_Func'>is_input_argument</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2903"><span class='Ref_To_Local'>nth_arg</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2909"><span class='Ref_To_Local'>argmodes</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2904"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="ruleutils.c.html#LN2914"><span class='Ref_To_Local'>nth_inputarg</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2910"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN2910"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN2903"><span class='Ref_To_Local'>nth_arg</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN2910"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2860"><span class='Ref_to_Func'>is_input_argument</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2910"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2909"><span class='Ref_To_Local'>argmodes</span></a><span class='Parentheses'>))</span> 
            <a href="ruleutils.c.html#LN2914"><span class='Ref_To_Local'>nth_inputarg</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2915"><span class='Ref_To_Local'>proargdefaults</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2904"><span class='Ref_To_Local'>proctup</span></a><span class='Delimiter'>, 
</span>                                     <a href="../../../include/catalog/pg_proc.h.html#LN112"><span class='Ref_to_Const'>Anum_pg_proc_proargdefaults</span></a><span class='Delimiter'>, 
</span>                                     <span class='Operator'>&</span><a href="ruleutils.c.html#LN2916"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2916"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2904"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="ruleutils.c.html#LN2913"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2915"><span class='Ref_To_Local'>proargdefaults</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN2911"><span class='Ref_To_Local'>argdefaults</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN575"><span class='Ref_to_Macro'>castNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a><span class='Delimiter'>, </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2913"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2913"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN2905"><span class='Ref_To_Local'>proc</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2904"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Calculate index into proargdefaults: proargdefaults corresponds to the 
     * last N input arguments, where N = pronargdefaults. 
     */ 
</span>    <a href="ruleutils.c.html#LN2917"><span class='Ref_To_Local'>nth_default</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN2914"><span class='Ref_To_Local'>nth_inputarg</span></a> <span class='Operator'>- </span><span class='Number'>1</span> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2905"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>pronargs <span class='Operator'>- </span><a href="ruleutils.c.html#LN2905"><span class='Ref_To_Local'>proc</span></a><span class='Operator'>-&GT;</span>pronargdefaults<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2917"><span class='Ref_To_Local'>nth_default</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN2917"><span class='Ref_To_Local'>nth_default</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2911"><span class='Ref_To_Local'>argdefaults</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2904"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/fmgr.h.html#LN304"><span class='Ref_to_Macro'>PG_RETURN_NULL</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="ruleutils.c.html#LN2912"><span class='Ref_To_Local'>node</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2911"><span class='Ref_To_Local'>argdefaults</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2917"><span class='Ref_To_Local'>nth_default</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN2913"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><a href="../../../include/utils/ruleutils.h.html#LN26"><span class='Ref_to_Proto'>deparse_expression</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2912"><span class='Ref_To_Local'>node</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2904"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN329"><span class='Ref_to_Macro'>PG_RETURN_TEXT_P</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN459"><span class='Ref_to_Proto'>string_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2913"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_get_function_arg_default &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * deparse_expression           - General utility for deparsing expressions 
 * 
 * calls deparse_expression_pretty with all prettyPrinting disabled 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN2976"></a><span class='Declare_Function'>deparse_expression</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpcontext</span><span class='Delimiter'>, 
</span><a name="LN2977"></a>                   <span class='Keyword'>bool </span><span class='Declare_Parameter'>forceprefix</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="ruleutils.c.html#LN308"><span class='Ref_to_Proto'>deparse_expression_pretty</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN2976"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2976"><span class='Ref_to_Parameter'>dpcontext</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN2977"><span class='Ref_to_Parameter'>forceprefix</span></a><span class='Delimiter'>, 
</span>                                     <a href="ruleutils.c.html#LN2977"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * deparse_expression_pretty    - General utility for deparsing expressions 
 * 
 * expr is the node tree to be deparsed.  It must be a transformed expression 
 * tree (ie, not the raw output of gram.y). 
 * 
 * dpcontext is a list of deparse_namespace nodes representing the context 
 * for interpreting Vars in the node tree.  It can be NIL if no Vars are 
 * expected. 
 * 
 * forceprefix is TRUE to force all Vars to be prefixed with their table names. 
 * 
 * showimplicit is TRUE to force all implicit casts to be shown explicitly. 
 * 
 * Tries to pretty up the output according to prettyFlags and startIndent. 
 * 
 * The result is a palloc'd string. 
 * ---------- 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN3003"></a><span class='Declare_Function'>deparse_expression_pretty</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpcontext</span><span class='Delimiter'>, 
</span><a name="LN3004"></a>                          <span class='Keyword'>bool </span><span class='Declare_Parameter'>forceprefix</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Delimiter'>, 
</span><a name="LN3005"></a>                          <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>startIndent</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3007"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN3008"></a>    <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN3007"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3008"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= &</span><a href="ruleutils.c.html#LN3007"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3008"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3003"><span class='Ref_to_Parameter'>dpcontext</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3008"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN109"><span class='Ref_to_Member'>windowClause</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3008"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN110"><span class='Ref_to_Member'>windowTList</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3008"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3004"><span class='Ref_to_Parameter'>forceprefix</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3008"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN111"><span class='Ref_to_Member'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3005"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3008"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN92"><span class='Ref_to_Const'>WRAP_COLUMN_DEFAULT</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3008"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3005"><span class='Ref_to_Parameter'>startIndent</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3008"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN115"><span class='Ref_to_Member'>special_exprkind</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parse_node.h.html#LN34"><span class='Ref_to_EnumConst'>EXPR_KIND_NONE</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3003"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN3008"><span class='Ref_To_Local'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3004"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN3007"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparse_expression_pretty &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * deparse_context_for          - Build deparse context for a single relation 
 * 
 * Given the reference name (alias) and OID of a relation, build deparsing 
 * context for an expression referencing only that relation (as varno 1, 
 * varlevelsup 0).  This is sufficient for many uses of deparse_expression. 
 * ---------- 
 */ 
</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN3035"></a><span class='Declare_Function'>deparse_context_for</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>aliasname</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3037"></a>    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span><a name="LN3038"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN3037"><span class='Ref_To_Local'>dpns</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build a minimal RTE for the rel */ 
</span>    <a href="ruleutils.c.html#LN3038"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN556"><span class='Ref_to_Macro'>makeNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3038"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3038"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3035"><span class='Ref_to_Parameter'>relid</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3038"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN948"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>= </span><a href="../../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* no need for exactness here */ 
</span>    <a href="ruleutils.c.html#LN3038"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/makefuncs.h.html#LN63"><span class='Ref_to_Proto'>makeAlias</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3035"><span class='Ref_to_Parameter'>aliasname</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3038"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3038"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3038"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1024"><span class='Ref_to_Member'>lateral</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3038"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1025"><span class='Ref_to_Member'>inh</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3038"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1026"><span class='Ref_to_Member'>inFromCl</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build one-element rtable */ 
</span>    <a href="ruleutils.c.html#LN3037"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3038"><span class='Ref_To_Local'>rte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3037"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN151"><span class='Ref_to_Member'>ctes</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN332"><span class='Ref_to_Proto'>set_rtable_names</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3037"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN336"><span class='Ref_to_Proto'>set_simple_column_names</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3037"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Return a one-deep namespace stack */ 
</span>    <span class='Control'>return</span> <a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3037"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparse_context_for &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * deparse_context_for_plan_rtable - Build deparse context for a plan's rtable 
 * 
 * When deparsing an expression in a Plan tree, we use the plan's rangetable 
 * to resolve names of simple Vars.  The initialization of column names for 
 * this is rather expensive if the rangetable is large, and it'll be the same 
 * for every expression in the Plan tree; so we do it just once and re-use 
 * the result of this function for each expression.  (Note that the result 
 * is not usable until set_deparse_context_planstate() is applied to it.) 
 * 
 * In addition to the plan's rangetable list, pass the per-RTE alias names 
 * assigned by a previous call to select_rtable_names_for_explain. 
 */ 
</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN3077"></a><span class='Declare_Function'>deparse_context_for_plan_rtable</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rtable</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rtable_names</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3079"></a>    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN3079"><span class='Ref_To_Local'>dpns</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Initialize fields that stay the same across the whole plan tree */ 
</span>    <a href="ruleutils.c.html#LN3079"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3077"><span class='Ref_to_Parameter'>rtable</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3079"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN149"><span class='Ref_to_Member'>rtable_names</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3077"><span class='Ref_to_Parameter'>rtable_names</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3079"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN151"><span class='Ref_to_Member'>ctes</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Set up column name aliases.  We will get rather bogus results for join 
     * RTEs, but that doesn't matter because plan trees don't contain any join 
     * alias Vars. 
     */ 
</span>    <a href="ruleutils.c.html#LN336"><span class='Ref_to_Proto'>set_simple_column_names</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3079"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Return a one-deep namespace stack */ 
</span>    <span class='Control'>return</span> <a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3079"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end deparse_context_for_plan_rtable &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * set_deparse_context_planstate    - Specify Plan node containing expression 
 * 
 * When deparsing an expression in a Plan tree, we might have to resolve 
 * OUTER_VAR, INNER_VAR, or INDEX_VAR references.  To do this, the caller must 
 * provide the parent PlanState node.  Then OUTER_VAR and INNER_VAR references 
 * can be resolved by drilling down into the left and right child plans. 
 * Similarly, INDEX_VAR references can be resolved by reference to the 
 * indextlist given in a parent IndexOnlyScan node, or to the scan tlist in 
 * ForeignScan and CustomScan nodes.  (Note that we don't currently support 
 * deparsing of indexquals in regular IndexScan or BitmapIndexScan nodes; 
 * for those, we can only deparse the indexqualorig fields, which won't 
 * contain INDEX_VAR Vars.) 
 * 
 * Note: planstate really ought to be declared as "PlanState *", but we use 
 * "Node *" to avoid having to include execnodes.h in ruleutils.h. 
 * 
 * The ancestors list is a list of the PlanState's parent PlanStates, the 
 * most-closely-nested first.  This is needed to resolve PARAM_EXEC Params. 
 * Note we assume that all the PlanStates share the same rtable. 
 * 
 * Once this function has been called, deparse_expression() can be called on 
 * subsidiary expression(s) of the specified PlanState node.  To deparse 
 * expressions of a different Plan node in the same Plan tree, re-call this 
 * function to identify the new parent Plan node. 
 * 
 * The result is the same List passed in; this is a notational convenience. 
 */ 
</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN3128"></a><span class='Declare_Function'>set_deparse_context_planstate</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpcontext</span><span class='Delimiter'>, 
</span><a name="LN3129"></a>                              <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>planstate</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ancestors</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3131"></a>    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Should always have one-entry namespace list for Plan deparsing */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3128"><span class='Ref_to_Parameter'>dpcontext</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3131"><span class='Ref_To_Local'>dpns</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3128"><span class='Ref_to_Parameter'>dpcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set our attention on the specific plan node passed in */ 
</span>    <a href="ruleutils.c.html#LN355"><span class='Ref_to_Proto'>set_deparse_planstate</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3131"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN3129"><span class='Ref_to_Parameter'>planstate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3131"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN157"><span class='Ref_to_Member'>ancestors</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3129"><span class='Ref_to_Parameter'>ancestors</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN3128"><span class='Ref_to_Parameter'>dpcontext</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * select_rtable_names_for_explain  - Select RTE aliases for EXPLAIN 
 * 
 * Determine the relation aliases we'll use during an EXPLAIN operation. 
 * This is just a frontend to set_rtable_names.  We have to expose the aliases 
 * to EXPLAIN because EXPLAIN needs to know the right alias names to print. 
 */ 
</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN3152"></a><span class='Declare_Function'>select_rtable_names_for_explain</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rtable</span><span class='Delimiter'>, </span><a href="../../../include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rels_used</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3154"></a>    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span> 
    memset<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN3154"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3154"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3154"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3152"><span class='Ref_to_Parameter'>rtable</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3154"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN151"><span class='Ref_to_Member'>ctes</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN332"><span class='Ref_to_Proto'>set_rtable_names</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN3154"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3152"><span class='Ref_to_Parameter'>rels_used</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* We needn't bother computing column aliases yet */ 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN3154"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN149"><span class='Ref_to_Member'>rtable_names</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * set_rtable_names: select RTE aliases to be used in printing a query 
 * 
 * We fill in dpns-&GT;rtable_names with a list of names that is one-for-one with 
 * the already-filled dpns-&GT;rtable list.  Each RTE name is unique among those 
 * in the new namespace plus any ancestor namespaces listed in 
 * parent_namespaces. 
 * 
 * If rels_used isn't NULL, only RTE indexes listed in it are given aliases. 
 * 
 * Note that this function is only concerned with relation names, not column 
 * names. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3179"></a><span class='Declare_Function'>set_rtable_names</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent_namespaces</span><span class='Delimiter'>, 
</span><a name="LN3180"></a>                 <a href="../../../include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rels_used</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3182"></a>    <a href="../../../include/utils/hsearch.h.html#LN64"><span class='Ref_to_Struct'>HASHCTL</span></a>     <span class='Declare_Local'>hash_ctl</span><span class='Delimiter'>; 
</span><a name="LN3183"></a>    <a href="../hash/dynahash.c.html#LN192"><span class='Ref_to_Struct'>HTAB</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>names_hash</span><span class='Delimiter'>; 
</span><a name="LN3184"></a>    <a href="ruleutils.c.html#LN280"><span class='Ref_to_Typedef'>NameHashEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>hentry</span><span class='Delimiter'>; 
</span><a name="LN3185"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>found</span><span class='Delimiter'>; 
</span><a name="LN3186"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>rtindex</span><span class='Delimiter'>; 
</span><a name="LN3187"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN3179"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN149"><span class='Ref_to_Member'>rtable_names</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* nothing more to do if empty rtable */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3179"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We use a hash table to hold known names, so that this process is O(N) 
     * not O(N^2) for N names. 
     */ 
</span>    <a href="../../../include/c.h.html#LN856"><span class='Ref_to_Macro'>MemSet</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN3182"><span class='Ref_To_Local'>hash_ctl</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3182"><span class='Ref_To_Local'>hash_ctl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3182"><span class='Ref_To_Local'>hash_ctl</span></a><span class='Operator'>.</span><a href="../../../include/utils/hsearch.h.html#LN71"><span class='Ref_to_Member'>keysize</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3182"><span class='Ref_To_Local'>hash_ctl</span></a><span class='Operator'>.</span><a href="../../../include/utils/hsearch.h.html#LN72"><span class='Ref_to_Member'>entrysize</span></a> <span class='Operator'>= </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN280"><span class='Ref_to_Typedef'>NameHashEntry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3182"><span class='Ref_To_Local'>hash_ctl</span></a><span class='Operator'>.</span><a href="../../../include/utils/hsearch.h.html#LN77"><span class='Ref_to_Member'>hcxt</span></a> <span class='Operator'>= </span><a href="../mmgr/mcxt.c.html#LN36"><span class='Ref_to_Global_Var'>CurrentMemoryContext</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3183"><span class='Ref_To_Local'>names_hash</span></a> <span class='Operator'>= </span><a href="../../../include/utils/hsearch.h.html#LN121"><span class='Ref_to_Proto'>hash_create</span></a><span class='Parentheses'>(</span><span class='String'>"set_rtable_names names"</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3179"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>&</span><a href="ruleutils.c.html#LN3182"><span class='Ref_To_Local'>hash_ctl</span></a><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/hsearch.h.html#LN86"><span class='Ref_to_Const'>HASH_ELEM</span></a> <span class='Operator'>| </span><a href="../../../include/utils/hsearch.h.html#LN92"><span class='Ref_to_Const'>HASH_CONTEXT</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Preload the hash table with names appearing in parent_namespaces */ 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3187"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3179"><span class='Ref_to_Parameter'>parent_namespaces</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3209"></a>        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>olddpns</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3187"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3210"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc2</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3210"><span class='Ref_To_Local'>lc2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3209"><span class='Ref_To_Local'>olddpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN149"><span class='Ref_to_Member'>rtable_names</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN3214"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oldname</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3210"><span class='Ref_To_Local'>lc2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3214"><span class='Ref_To_Local'>oldname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN3184"><span class='Ref_To_Local'>hentry</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN280"><span class='Ref_to_Typedef'>NameHashEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/utils/hsearch.h.html#LN125"><span class='Ref_to_Proto'>hash_search</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3183"><span class='Ref_To_Local'>names_hash</span></a><span class='Delimiter'>, 
</span>                                                   <a href="ruleutils.c.html#LN3214"><span class='Ref_To_Local'>oldname</span></a><span class='Delimiter'>, 
</span>                                                   <a href="../../../include/utils/hsearch.h.html#LN105"><span class='Ref_to_EnumConst'>HASH_ENTER</span></a><span class='Delimiter'>, 
</span>                                                   <span class='Operator'>&</span><a href="ruleutils.c.html#LN3185"><span class='Ref_To_Local'>found</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* we do not complain about duplicate names in parent namespaces */ 
</span>            <a href="ruleutils.c.html#LN3184"><span class='Ref_To_Local'>hentry</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN283"><span class='Ref_to_Member'>counter</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Now we can scan the rtable */ 
</span>    <a href="ruleutils.c.html#LN3186"><span class='Ref_To_Local'>rtindex</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3187"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3179"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3231"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3187"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3232"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>refname</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Just in case this takes an unreasonable amount of time ... */ 
</span>        <a href="../../../include/miscadmin.h.html#LN99"><span class='Ref_to_Macro'>CHECK_FOR_INTERRUPTS</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3180"><span class='Ref_to_Parameter'>rels_used</span></a> <span class='Operator'>&& !</span><a href="../../../include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3186"><span class='Ref_To_Local'>rtindex</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3180"><span class='Ref_to_Parameter'>rels_used</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Ignore unreferenced RTE */ 
</span>            <a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3231"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* If RTE has a user-defined alias, prefer that */ 
</span>            <a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3231"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3231"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Use the current actual name of the relation */ 
</span>            <a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN124"><span class='Ref_to_Proto'>get_rel_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3231"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3231"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN924"><span class='Ref_to_EnumConst'>RTE_JOIN</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Unnamed join has no refname */ 
</span>            <a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Otherwise use whatever the parser assigned */ 
</span>            <a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3231"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If the selected name isn't unique, append digits to make it so, and 
         * make a new hash entry for it once we've got a unique name.  For a 
         * very long input name, we might have to truncate to stay within 
         * NAMEDATALEN. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN3184"><span class='Ref_To_Local'>hentry</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN280"><span class='Ref_to_Typedef'>NameHashEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/utils/hsearch.h.html#LN125"><span class='Ref_to_Proto'>hash_search</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3183"><span class='Ref_To_Local'>names_hash</span></a><span class='Delimiter'>, 
</span>                                                   <a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a><span class='Delimiter'>, 
</span>                                                   <a href="../../../include/utils/hsearch.h.html#LN105"><span class='Ref_to_EnumConst'>HASH_ENTER</span></a><span class='Delimiter'>, 
</span>                                                   <span class='Operator'>&</span><a href="ruleutils.c.html#LN3185"><span class='Ref_To_Local'>found</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3185"><span class='Ref_To_Local'>found</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Name already in use, must choose a new one */ 
</span><a name="LN3278"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>refnamelen</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3279"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>modname</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3278"><span class='Ref_To_Local'>refnamelen</span></a> <span class='Operator'>+ </span><span class='Number'>16</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3280"></a>                <a href="ruleutils.c.html#LN280"><span class='Ref_to_Typedef'>NameHashEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>hentry2</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>do</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN3184"><span class='Ref_To_Local'>hentry</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN283"><span class='Ref_to_Member'>counter</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * We avoid using %.*s here because it can misbehave 
                         * if the data is not valid in what libc thinks is the 
                         * prevailing encoding. 
                         */ 
</span>                        memcpy<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3279"><span class='Ref_To_Local'>modname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3278"><span class='Ref_To_Local'>refnamelen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3279"><span class='Ref_To_Local'>modname</span></a> <span class='Operator'>+ </span><a href="ruleutils.c.html#LN3278"><span class='Ref_To_Local'>refnamelen</span></a><span class='Delimiter'>, </span><span class='String'>"_%d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3184"><span class='Ref_To_Local'>hentry</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN283"><span class='Ref_to_Member'>counter</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3279"><span class='Ref_To_Local'>modname</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><a href="../../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Parentheses'>)</span> 
                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* drop chars from refname to keep all the digits */ 
</span>                        <a href="ruleutils.c.html#LN3278"><span class='Ref_To_Local'>refnamelen</span></a> <span class='Operator'>= </span><a href="../../../include/mb/pg_wchar.h.html#LN530"><span class='Ref_to_Proto'>pg_mbcliplen</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3278"><span class='Ref_To_Local'>refnamelen</span></a><span class='Delimiter'>, 
</span>                                                  <a href="ruleutils.c.html#LN3278"><span class='Ref_To_Local'>refnamelen</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <a href="ruleutils.c.html#LN3280"><span class='Ref_To_Local'>hentry2</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN280"><span class='Ref_to_Typedef'>NameHashEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/utils/hsearch.h.html#LN125"><span class='Ref_to_Proto'>hash_search</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3183"><span class='Ref_To_Local'>names_hash</span></a><span class='Delimiter'>, 
</span>                                                            <a href="ruleutils.c.html#LN3279"><span class='Ref_To_Local'>modname</span></a><span class='Delimiter'>, 
</span>                                                            <a href="../../../include/utils/hsearch.h.html#LN105"><span class='Ref_to_EnumConst'>HASH_ENTER</span></a><span class='Delimiter'>, 
</span>                                                            <span class='Operator'>&</span><a href="ruleutils.c.html#LN3185"><span class='Ref_To_Local'>found</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end do &raquo; </span> <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3185"><span class='Ref_To_Local'>found</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN3280"><span class='Ref_To_Local'>hentry2</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN283"><span class='Ref_to_Member'>counter</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* init new hash entry */ 
</span>                <a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3279"><span class='Ref_To_Local'>modname</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if found &raquo; </span> 
            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Name not previously used, need only initialize hentry */ 
</span>                <a href="ruleutils.c.html#LN3184"><span class='Ref_To_Local'>hentry</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN283"><span class='Ref_to_Member'>counter</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if refname &raquo; </span> 
 
        <a href="ruleutils.c.html#LN3179"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN149"><span class='Ref_to_Member'>rtable_names</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3179"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN149"><span class='Ref_to_Member'>rtable_names</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3232"><span class='Ref_To_Local'>refname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN3186"><span class='Ref_To_Local'>rtindex</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/hsearch.h.html#LN123"><span class='Ref_to_Proto'>hash_destroy</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3183"><span class='Ref_To_Local'>names_hash</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end set_rtable_names &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * set_deparse_for_query: set up deparse_namespace for deparsing a Query tree 
 * 
 * For convenience, this is defined to initialize the deparse_namespace struct 
 * from scratch. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3329"></a><span class='Declare_Function'>set_deparse_for_query</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, 
</span><a name="LN3330"></a>                      <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parent_namespaces</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3332"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN3333"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Initialize *dpns and fill rtable/ctes links */ 
</span>    memset<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN151"><span class='Ref_to_Member'>ctes</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN132"><span class='Ref_to_Member'>cteList</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Assign a unique relation alias to each RTE */ 
</span>    <a href="ruleutils.c.html#LN332"><span class='Ref_to_Proto'>set_rtable_names</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3330"><span class='Ref_to_Parameter'>parent_namespaces</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Initialize dpns-&GT;rtable_columns to contain zeroed structs */ 
</span>    <a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN150"><span class='Ref_to_Member'>rtable_columns</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN150"><span class='Ref_to_Member'>rtable_columns</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN150"><span class='Ref_to_Member'>rtable_columns</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN150"><span class='Ref_to_Member'>rtable_columns</span></a><span class='Delimiter'>, 
</span>                                       <a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If it's a utility query, it won't have a jointree */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN135"><span class='Ref_to_Member'>jointree</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Detect whether global uniqueness of USING names is needed */ 
</span>        <a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN153"><span class='Ref_to_Member'>unique_using</span></a> <span class='Operator'>= 
</span>            <a href="ruleutils.c.html#LN337"><span class='Ref_to_Proto'>has_dangerous_join_using</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN135"><span class='Ref_to_Member'>jointree</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Select names for columns merged by USING, via a recursive pass over 
         * the query jointree. 
         */ 
</span>        <a href="ruleutils.c.html#LN338"><span class='Ref_to_Proto'>set_using_names</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN135"><span class='Ref_to_Member'>jointree</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now assign remaining column aliases for each RTE.  We do this in a 
     * linear scan of the rtable, so as to process RTEs whether or not they 
     * are in the jointree (we mustn't miss NEW.*, INSERT target relations, 
     * etc).  JOIN RTEs must be processed after their children, but this is 
     * okay because they appear later in the rtable list than their children 
     * (cf Asserts in identify_join_columns()). 
     */ 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN179"><span class='Ref_to_Macro'>forboth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3332"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3333"><span class='Ref_To_Local'>lc2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN150"><span class='Ref_to_Member'>rtable_columns</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3373"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3332"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3374"></a>        <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Local'>colinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3333"><span class='Ref_To_Local'>lc2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3373"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN924"><span class='Ref_to_EnumConst'>RTE_JOIN</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN343"><span class='Ref_to_Proto'>set_join_column_names</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3373"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3374"><span class='Ref_To_Local'>colinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="ruleutils.c.html#LN340"><span class='Ref_to_Proto'>set_relation_column_names</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3329"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3373"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3374"><span class='Ref_To_Local'>colinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end set_deparse_for_query &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * set_simple_column_names: fill in column aliases for non-query situations 
 * 
 * This handles EXPLAIN and cases where we only have relation RTEs.  Without 
 * a join tree, we can't do anything smart about join RTEs, but we don't 
 * need to (note that EXPLAIN should never see join alias Vars anyway). 
 * If we do hit a join RTE we'll just process it like a non-table base RTE. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3392"></a><span class='Declare_Function'>set_simple_column_names</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3394"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN3395"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc2</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Initialize dpns-&GT;rtable_columns to contain zeroed structs */ 
</span>    <a href="ruleutils.c.html#LN3392"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN150"><span class='Ref_to_Member'>rtable_columns</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3392"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN150"><span class='Ref_to_Member'>rtable_columns</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3392"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN3392"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN150"><span class='Ref_to_Member'>rtable_columns</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3392"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN150"><span class='Ref_to_Member'>rtable_columns</span></a><span class='Delimiter'>, 
</span>                                       <a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Assign unique column aliases within each RTE */ 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN179"><span class='Ref_to_Macro'>forboth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3394"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3392"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3395"><span class='Ref_To_Local'>lc2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3392"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN150"><span class='Ref_to_Member'>rtable_columns</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3406"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3394"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3407"></a>        <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Local'>colinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3395"><span class='Ref_To_Local'>lc2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN340"><span class='Ref_to_Proto'>set_relation_column_names</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3392"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3406"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3407"><span class='Ref_To_Local'>colinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end set_simple_column_names &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * has_dangerous_join_using: search jointree for unnamed JOIN USING 
 * 
 * Merged columns of a JOIN USING may act differently from either of the input 
 * columns, either because they are merged with COALESCE (in a FULL JOIN) or 
 * because an implicit coercion of the underlying input column is required. 
 * In such a case the column must be referenced as a column of the JOIN not as 
 * a column of either input.  And this is problematic if the join is unnamed 
 * (alias-less): we cannot qualify the column's name with an RTE name, since 
 * there is none.  (Forcibly assigning an alias to the join is not a solution, 
 * since that will prevent legal references to tables below the join.) 
 * To ensure that every column in the query is unambiguously referenceable, 
 * we must assign such merged columns names that are globally unique across 
 * the whole query, aliasing other columns out of the way as necessary. 
 * 
 * Because the ensuing re-aliasing is fairly damaging to the readability of 
 * the query, we don't do this unless we have to.  So, we must pre-scan 
 * the join tree to see if we have to, before starting set_using_names(). 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN3433"></a><span class='Declare_Function'>has_dangerous_join_using</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>jtnode</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3433"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* nothing to do here */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3433"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1466"><span class='Ref_to_Struct'>FromExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN3441"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1466"><span class='Ref_to_Struct'>FromExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>f</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1466"><span class='Ref_to_Struct'>FromExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN3433"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>; 
</span><a name="LN3442"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3442"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3441"><span class='Ref_To_Local'>f</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1469"><span class='Ref_to_Member'>fromlist</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN337"><span class='Ref_to_Proto'>has_dangerous_join_using</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3433"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3442"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)))</span> 
                <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3433"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN3452"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>j</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN3433"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Is it an unnamed JOIN with USING? */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3452"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1453"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="ruleutils.c.html#LN3452"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1451"><span class='Ref_to_Member'>usingClause</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Yes, so check each join alias var to see if any of them are not 
             * simple references to underlying columns.  If so, we have a 
             * dangerous situation and must pick unique aliases. 
             */ 
</span><a name="LN3462"></a>            <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>jrte</span> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3452"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1454"><span class='Ref_to_Member'>rtindex</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3433"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3463"></a>            <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
            <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3463"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3462"><span class='Ref_To_Local'>jrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN3467"></a>                <a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>aliasvar</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3463"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3467"><span class='Ref_To_Local'>aliasvar</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3467"><span class='Ref_To_Local'>aliasvar</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Nope, but inspect children */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN337"><span class='Ref_to_Proto'>has_dangerous_join_using</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3433"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3452"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1449"><span class='Ref_to_Member'>larg</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN337"><span class='Ref_to_Proto'>has_dangerous_join_using</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3433"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3452"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1450"><span class='Ref_to_Member'>rarg</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(jtnode,JoinExpr) &raquo; </span> 
    <span class='Control'>else</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized node type: %d"</span><span class='Delimiter'>, 
</span>             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3433"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end has_dangerous_join_using &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * set_using_names: select column aliases to be used for merged USING columns 
 * 
 * We do this during a recursive descent of the query jointree. 
 * dpns-&GT;unique_using must already be set to determine the global strategy. 
 * 
 * Column alias info is saved in the dpns-&GT;rtable_columns list, which is 
 * assumed to be filled with pre-zeroed deparse_columns structs. 
 * 
 * parentUsing is a list of all USING aliases assigned in parent joins of 
 * the current jointree node.  (The passed-in list must not be modified.) 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3499"></a><span class='Declare_Function'>set_using_names</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>jtnode</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parentUsing</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* nothing to do now */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1466"><span class='Ref_to_Struct'>FromExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN3507"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1466"><span class='Ref_to_Struct'>FromExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>f</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1466"><span class='Ref_to_Struct'>FromExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>; 
</span><a name="LN3508"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3508"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3507"><span class='Ref_To_Local'>f</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1469"><span class='Ref_to_Member'>fromlist</span></a><span class='Parentheses'>) 
</span><a name="LN3511"></a>            <span class='Declare_Local'>set_using_names</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3508"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>parentUsing</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN3515"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>j</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>; 
</span><a name="LN3516"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3515"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1454"><span class='Ref_to_Member'>rtindex</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3517"></a>        <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Local'>colinfo</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN274"><span class='Ref_to_Macro'>deparse_columns_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3515"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1454"><span class='Ref_to_Member'>rtindex</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3518"></a>        <span class='Keyword'>int</span>        <span class='Operator'>*</span><span class='Declare_Local'>leftattnos</span><span class='Delimiter'>; 
</span><a name="LN3519"></a>        <span class='Keyword'>int</span>        <span class='Operator'>*</span><span class='Declare_Local'>rightattnos</span><span class='Delimiter'>; 
</span><a name="LN3520"></a>        <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Local'>leftcolinfo</span><span class='Delimiter'>; 
</span><a name="LN3521"></a>        <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rightcolinfo</span><span class='Delimiter'>; 
</span><a name="LN3522"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3523"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Get info about the shape of the join */ 
</span>        <a href="ruleutils.c.html#LN350"><span class='Ref_to_Proto'>identify_join_columns</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3515"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3516"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN3518"><span class='Ref_To_Local'>leftattnos</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN268"><span class='Ref_to_Member'>leftattnos</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN3519"><span class='Ref_To_Local'>rightattnos</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN269"><span class='Ref_to_Member'>rightattnos</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Look up the not-yet-filled-in child deparse_columns structs */ 
</span>        <a href="ruleutils.c.html#LN3520"><span class='Ref_To_Local'>leftcolinfo</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN274"><span class='Ref_to_Macro'>deparse_columns_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN266"><span class='Ref_to_Member'>leftrti</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN3521"><span class='Ref_To_Local'>rightcolinfo</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN274"><span class='Ref_to_Macro'>deparse_columns_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN267"><span class='Ref_to_Member'>rightrti</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If this join is unnamed, then we cannot substitute new aliases at 
         * this level, so any name requirements pushed down to here must be 
         * pushed down again to the children. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3516"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN3543"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>colname</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3543"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Push down to left column, unless it's a system column */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3518"><span class='Ref_To_Local'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN349"><span class='Ref_to_Proto'>expand_colnames_array_to</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3520"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3518"><span class='Ref_To_Local'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN3520"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3518"><span class='Ref_To_Local'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3543"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* Same on the righthand side */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3519"><span class='Ref_To_Local'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN349"><span class='Ref_to_Proto'>expand_colnames_array_to</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3521"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3519"><span class='Ref_To_Local'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN3521"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3519"><span class='Ref_To_Local'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3543"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;colinfo-&GT;num_co... &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if rte-&GT;alias==NULL &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * If there's a USING clause, select the USING column names and push 
         * those names down to the children.  We have two strategies: 
         * 
         * If dpns-&GT;unique_using is TRUE, we force all USING names to be 
         * unique across the whole query level.  In principle we'd only need 
         * the names of dangerous USING columns to be globally unique, but to 
         * safely assign all USING names in a single pass, we have to enforce 
         * the same uniqueness rule for all of them.  However, if a USING 
         * column's name has been pushed down from the parent, we should use 
         * it as-is rather than making a uniqueness adjustment.  This is 
         * necessary when we're at an unnamed join, and it creates no risk of 
         * ambiguity.  Also, if there's a user-written output alias for a 
         * merged column, we prefer to use that rather than the input name; 
         * this simplifies the logic and seems likely to lead to less aliasing 
         * overall. 
         * 
         * If dpns-&GT;unique_using is FALSE, we only need USING names to be 
         * unique within their own join RTE.  We still need to honor 
         * pushed-down names, though. 
         * 
         * Though significantly different in results, these two strategies are 
         * implemented by the same code, with only the difference of whether 
         * to put assigned names into dpns-&GT;using_names. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3515"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1451"><span class='Ref_to_Member'>usingClause</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Copy the input parentUsing list so we don't modify it */ 
</span>            <a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>parentUsing</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN268"><span class='Ref_to_Proto'>list_copy</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>parentUsing</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* USING names must correspond to the first join output columns */ 
</span>            <a href="ruleutils.c.html#LN349"><span class='Ref_to_Proto'>expand_colnames_array_to</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3515"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1451"><span class='Ref_to_Member'>usingClause</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3523"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3515"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1451"><span class='Ref_to_Member'>usingClause</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN3599"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>colname</span> <span class='Operator'>= </span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3523"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Assert it's a merged column */ 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3518"><span class='Ref_To_Local'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN3519"><span class='Ref_To_Local'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Adopt passed-down name if any, else select unique name */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <a href="ruleutils.c.html#LN3599"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* Prefer user-written output alias if any */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3516"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3516"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>))</span> 
                        <a href="ruleutils.c.html#LN3599"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3516"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* Make it appropriately unique */ 
</span>                    <a href="ruleutils.c.html#LN3599"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN347"><span class='Ref_to_Proto'>make_colname_unique</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3599"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN153"><span class='Ref_to_Member'>unique_using</span></a><span class='Parentheses'>) 
</span>                        <a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN154"><span class='Ref_to_Member'>using_names</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN154"><span class='Ref_to_Member'>using_names</span></a><span class='Delimiter'>, 
</span>                                                    <a href="ruleutils.c.html#LN3599"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* Save it as output column name, too */ 
</span>                    <a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3599"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* Remember selected names for use later */ 
</span>                <a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN270"><span class='Ref_to_Member'>usingNames</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3517"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN270"><span class='Ref_to_Member'>usingNames</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3599"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>parentUsing</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>parentUsing</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3599"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Push down to left column, unless it's a system column */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3518"><span class='Ref_To_Local'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN349"><span class='Ref_to_Proto'>expand_colnames_array_to</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3520"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3518"><span class='Ref_To_Local'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN3520"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3518"><span class='Ref_To_Local'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3599"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* Same on the righthand side */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3519"><span class='Ref_To_Local'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN349"><span class='Ref_to_Proto'>expand_colnames_array_to</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3521"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3519"><span class='Ref_To_Local'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN3521"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3519"><span class='Ref_To_Local'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3599"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <a href="ruleutils.c.html#LN3522"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if j-&GT;usingClause &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* Mark child deparse_columns structs with correct parentUsing info */ 
</span>        <a href="ruleutils.c.html#LN3520"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN248"><span class='Ref_to_Member'>parentUsing</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>parentUsing</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN3521"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN248"><span class='Ref_to_Member'>parentUsing</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>parentUsing</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Now recursively assign USING column names in children */ 
</span>        <a href="ruleutils.c.html#LN338"><span class='Ref_to_Proto'>set_using_names</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3515"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1449"><span class='Ref_to_Member'>larg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>parentUsing</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN338"><span class='Ref_to_Proto'>set_using_names</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3515"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1450"><span class='Ref_to_Member'>rarg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>parentUsing</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(jtnode,JoinExpr) &raquo; </span> 
    <span class='Control'>else</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized node type: %d"</span><span class='Delimiter'>, 
</span>             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3499"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end set_using_names &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * set_relation_column_names: select column aliases for a non-join RTE 
 * 
 * Column alias info is saved in *colinfo, which is assumed to be pre-zeroed. 
 * If any colnames entries are already filled in, those override local 
 * choices. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3664"></a><span class='Declare_Function'>set_relation_column_names</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rte</span><span class='Delimiter'>, 
</span><a name="LN3665"></a>                          <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3667"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncolumns</span><span class='Delimiter'>; 
</span><a name="LN3668"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>real_colnames</span><span class='Delimiter'>; 
</span><a name="LN3669"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>changed_any</span><span class='Delimiter'>; 
</span><a name="LN3670"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>noldcolumns</span><span class='Delimiter'>; 
</span><a name="LN3671"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3672"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Extract the RTE's "real" column names.  This is comparable to 
     * get_rte_attribute_name, except that it's important to disregard dropped 
     * columns.  We put NULL into the array for a dropped column. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Relation --- look to the system catalogs for up-to-date info */ 
</span><a name="LN3682"></a>        <a href="../../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>rel</span><span class='Delimiter'>; 
</span><a name="LN3683"></a>        <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN3682"><span class='Ref_To_Local'>rel</span></a> <span class='Operator'>= </span><a href="../../../include/access/heapam.h.html#LN84"><span class='Ref_to_Proto'>relation_open</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN3683"><span class='Ref_To_Local'>tupdesc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/rel.h.html#LN428"><span class='Ref_to_Macro'>RelationGetDescr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3682"><span class='Ref_To_Local'>rel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN3667"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3683"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN3668"><span class='Ref_To_Local'>real_colnames</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3667"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3667"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3683"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN3668"><span class='Ref_To_Local'>real_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="ruleutils.c.html#LN3668"><span class='Ref_To_Local'>real_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3683"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../../include/access/heapam.h.html#LN89"><span class='Ref_to_Proto'>relation_close</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3682"><span class='Ref_To_Local'>rel</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if rte-&GT;rtekind==RTE_REL... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Otherwise use the column names from eref */ 
</span><a name="LN3703"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN3667"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN3668"><span class='Ref_To_Local'>real_colnames</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3667"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3703"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * If the column name shown in eref is an empty string, then it's 
             * a column that was dropped at the time of parsing the query, so 
             * treat it as dropped. 
             */ 
</span><a name="LN3716"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cname</span> <span class='Operator'>= </span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3703"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3716"><span class='Ref_To_Local'>cname</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN3716"><span class='Ref_To_Local'>cname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN3668"><span class='Ref_To_Local'>real_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3716"><span class='Ref_To_Local'>cname</span></a><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Ensure colinfo-&GT;colnames has a slot for each column.  (It could be long 
     * enough already, if we pushed down a name for the last column.)  Note: 
     * it's possible that there are now more columns than there were when the 
     * query was parsed, ie colnames could be longer than rte-&GT;eref-&GT;colnames. 
     * We must assign unique aliases to the new columns too, else there could 
     * be unresolved conflicts when the view/rule is reloaded. 
     */ 
</span>    <a href="ruleutils.c.html#LN349"><span class='Ref_to_Proto'>expand_colnames_array_to</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3667"><span class='Ref_To_Local'>ncolumns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN3667"><span class='Ref_To_Local'>ncolumns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Make sufficiently large new_colnames and is_new_col arrays, too. 
     * 
     * Note: because we leave colinfo-&GT;num_new_cols zero until after the loop, 
     * colname_is_unique will not consult that array, which is fine because it 
     * would only be duplicate effort. 
     */ 
</span>    <a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3667"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN242"><span class='Ref_to_Member'>is_new_col</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3667"><span class='Ref_To_Local'>ncolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Scan the columns, select a unique alias for each one, and store it in 
     * colinfo-&GT;colnames and colinfo-&GT;new_colnames.  The former array has NULL 
     * entries for dropped columns, the latter omits them.  Also mark 
     * new_colnames entries as to whether they are new since parse time; this 
     * is the case for entries beyond the length of rte-&GT;eref-&GT;colnames. 
     */ 
</span>    <a href="ruleutils.c.html#LN3670"><span class='Ref_To_Local'>noldcolumns</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3669"><span class='Ref_To_Local'>changed_any</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3672"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3667"><span class='Ref_To_Local'>ncolumns</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3758"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>real_colname</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3668"><span class='Ref_To_Local'>real_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN3759"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>colname</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Comment_Multi_Line'>/* Skip dropped columns */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3758"><span class='Ref_To_Local'>real_colname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3759"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* colnames[i] is already NULL */ 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* If alias already assigned, that's what to use */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3759"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* If user wrote an alias, prefer that over real column name */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>))</span> 
                <a href="ruleutils.c.html#LN3759"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="ruleutils.c.html#LN3759"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3758"><span class='Ref_To_Local'>real_colname</span></a><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Unique-ify and insert into colinfo */ 
</span>            <a href="ruleutils.c.html#LN3759"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN347"><span class='Ref_to_Proto'>make_colname_unique</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3759"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3759"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Put names of non-dropped columns in new_colnames[] too */ 
</span>        <a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3672"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3759"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* And mark them as new or not */ 
</span>        <a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN242"><span class='Ref_to_Member'>is_new_col</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3672"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3671"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><a href="ruleutils.c.html#LN3670"><span class='Ref_To_Local'>noldcolumns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN3672"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Remember if any assigned aliases differ from "real" name */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN3669"><span class='Ref_To_Local'>changed_any</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3759"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3758"><span class='Ref_To_Local'>real_colname</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="ruleutils.c.html#LN3669"><span class='Ref_To_Local'>changed_any</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ncolumns;i++ &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Set correct length for new_colnames[] array.  (Note: if columns have 
     * been added, colinfo-&GT;num_cols includes them, which is not really quite 
     * right but is harmless, since any new columns must be at the end where 
     * they won't affect varattnos of pre-existing columns.) 
     */ 
</span>    <a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN240"><span class='Ref_to_Member'>num_new_cols</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3672"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For a relation RTE, we need only print the alias column names if any 
     * are different from the underlying "real" names.  For a function RTE, 
     * always emit a complete column alias list; this is to protect against 
     * possible instability of the default column names (eg, from altering 
     * parameter names).  For tablefunc RTEs, we never print aliases, because 
     * the column names are part of the clause itself.  For other RTE types, 
     * print if we changed anything OR if there were user-written column 
     * aliases (since the latter would be part of the underlying "reality"). 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN245"><span class='Ref_to_Member'>printaliases</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3669"><span class='Ref_To_Local'>changed_any</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN925"><span class='Ref_to_EnumConst'>RTE_FUNCTION</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN245"><span class='Ref_to_Member'>printaliases</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN926"><span class='Ref_to_EnumConst'>RTE_TABLEFUNC</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN245"><span class='Ref_to_Member'>printaliases</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN3664"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN245"><span class='Ref_to_Member'>printaliases</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN3665"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN245"><span class='Ref_to_Member'>printaliases</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3669"><span class='Ref_To_Local'>changed_any</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end set_relation_column_names &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * set_join_column_names: select column aliases for a join RTE 
 * 
 * Column alias info is saved in *colinfo, which is assumed to be pre-zeroed. 
 * If any colnames entries are already filled in, those override local 
 * choices.  Also, names for USING columns were already chosen by 
 * set_using_names().  We further expect that column alias selection has been 
 * completed for both input RTEs. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3834"></a><span class='Declare_Function'>set_join_column_names</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rte</span><span class='Delimiter'>, 
</span><a name="LN3835"></a>                      <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3837"></a>    <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Local'>leftcolinfo</span><span class='Delimiter'>; 
</span><a name="LN3838"></a>    <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rightcolinfo</span><span class='Delimiter'>; 
</span><a name="LN3839"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>changed_any</span><span class='Delimiter'>; 
</span><a name="LN3840"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>noldcolumns</span><span class='Delimiter'>; 
</span><a name="LN3841"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nnewcolumns</span><span class='Delimiter'>; 
</span><a name="LN3842"></a>    <a href="../../../include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>leftmerged</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN3843"></a>    <a href="../../../include/nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>rightmerged</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN3844"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3845"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span><a name="LN3846"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ic</span><span class='Delimiter'>; 
</span><a name="LN3847"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>jc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Look up the previously-filled-in child deparse_columns structs */ 
</span>    <a href="ruleutils.c.html#LN3837"><span class='Ref_To_Local'>leftcolinfo</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN274"><span class='Ref_to_Macro'>deparse_columns_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN266"><span class='Ref_to_Member'>leftrti</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3838"><span class='Ref_To_Local'>rightcolinfo</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN274"><span class='Ref_to_Macro'>deparse_columns_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN267"><span class='Ref_to_Member'>rightrti</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Ensure colinfo-&GT;colnames has a slot for each column.  (It could be long 
     * enough already, if we pushed down a name for the last column.)  Note: 
     * it's possible that one or both inputs now have more columns than there 
     * were when the query was parsed, but we'll deal with that below.  We 
     * only need entries in colnames for pre-existing columns. 
     */ 
</span>    <a href="ruleutils.c.html#LN3840"><span class='Ref_To_Local'>noldcolumns</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN349"><span class='Ref_to_Proto'>expand_colnames_array_to</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3840"><span class='Ref_To_Local'>noldcolumns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN3840"><span class='Ref_To_Local'>noldcolumns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Scan the join output columns, select an alias for each one, and store 
     * it in colinfo-&GT;colnames.  If there are USING columns, set_using_names() 
     * already selected their names, so we can start the loop at the first 
     * non-merged column. 
     */ 
</span>    <a href="ruleutils.c.html#LN3839"><span class='Ref_To_Local'>changed_any</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN270"><span class='Ref_to_Member'>usingNames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3840"><span class='Ref_To_Local'>noldcolumns</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN3873"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>colname</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN3874"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>real_colname</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore dropped column (only possible for non-merged column) */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN268"><span class='Ref_to_Member'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN269"><span class='Ref_to_Member'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3873"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Get the child column name */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN268"><span class='Ref_to_Member'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN3874"><span class='Ref_To_Local'>real_colname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3837"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN268"><span class='Ref_to_Member'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN269"><span class='Ref_to_Member'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN3874"><span class='Ref_To_Local'>real_colname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3838"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN269"><span class='Ref_to_Member'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* We're joining system columns --- use eref name */ 
</span>            <a href="ruleutils.c.html#LN3874"><span class='Ref_To_Local'>real_colname</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3874"><span class='Ref_To_Local'>real_colname</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* In an unnamed join, just report child column names as-is */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3874"><span class='Ref_To_Local'>real_colname</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* If alias already assigned, that's what to use */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3873"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* If user wrote an alias, prefer that over real column name */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>))</span> 
                <a href="ruleutils.c.html#LN3873"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="ruleutils.c.html#LN3873"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3874"><span class='Ref_To_Local'>real_colname</span></a><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Unique-ify and insert into colinfo */ 
</span>            <a href="ruleutils.c.html#LN3873"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN347"><span class='Ref_to_Proto'>make_colname_unique</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3873"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3873"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Remember if any assigned aliases differ from "real" name */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN3839"><span class='Ref_To_Local'>changed_any</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3873"><span class='Ref_To_Local'>colname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3874"><span class='Ref_To_Local'>real_colname</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="ruleutils.c.html#LN3839"><span class='Ref_To_Local'>changed_any</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=list_length(colinfo... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Calculate number of columns the join would have if it were re-parsed 
     * now, and create storage for the new_colnames and is_new_col arrays. 
     * 
     * Note: colname_is_unique will be consulting new_colnames[] during the 
     * loops below, so its not-yet-filled entries must be zeroes. 
     */ 
</span>    <a href="ruleutils.c.html#LN3841"><span class='Ref_To_Local'>nnewcolumns</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3837"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN240"><span class='Ref_to_Member'>num_new_cols</span></a> <span class='Operator'>+ </span><a href="ruleutils.c.html#LN3838"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN240"><span class='Ref_to_Member'>num_new_cols</span></a> <span class='Operator'>- 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN270"><span class='Ref_to_Member'>usingNames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN240"><span class='Ref_to_Member'>num_new_cols</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3841"><span class='Ref_To_Local'>nnewcolumns</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3841"><span class='Ref_To_Local'>nnewcolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN242"><span class='Ref_to_Member'>is_new_col</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3841"><span class='Ref_To_Local'>nnewcolumns</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Generating the new_colnames array is a bit tricky since any new columns 
     * added since parse time must be inserted in the right places.  This code 
     * must match the parser, which will order a join's columns as merged 
     * columns first (in USING-clause order), then non-merged columns from the 
     * left input (in attnum order), then non-merged columns from the right 
     * input (ditto).  If one of the inputs is itself a join, its columns will 
     * be ordered according to the same rule, which means newly-added columns 
     * might not be at the end.  We can figure out what's what by consulting 
     * the leftattnos and rightattnos arrays plus the input is_new_col arrays. 
     * 
     * In these loops, i indexes leftattnos/rightattnos (so it's join varattno 
     * less one), j indexes new_colnames/is_new_col, and ic/jc have similar 
     * meanings for the current child RTE. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Handle merged columns; they are first and can't be new */ 
</span>    <a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3840"><span class='Ref_To_Local'>noldcolumns</span></a> <span class='Operator'>&& 
</span>           <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN268"><span class='Ref_to_Member'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>           <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN269"><span class='Ref_to_Member'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* column name is already determined and known unique */ 
</span>        <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN242"><span class='Ref_to_Member'>is_new_col</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* build bitmapsets of child attnums of merged columns */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN268"><span class='Ref_to_Member'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN3842"><span class='Ref_To_Local'>leftmerged</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/bitmapset.h.html#LN89"><span class='Ref_to_Proto'>bms_add_member</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3842"><span class='Ref_To_Local'>leftmerged</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN268"><span class='Ref_to_Member'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN269"><span class='Ref_to_Member'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN3843"><span class='Ref_To_Local'>rightmerged</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/bitmapset.h.html#LN89"><span class='Ref_to_Proto'>bms_add_member</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3843"><span class='Ref_To_Local'>rightmerged</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN269"><span class='Ref_to_Member'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Handle non-merged left-child columns */ 
</span>    <a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3837"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN240"><span class='Ref_to_Member'>num_new_cols</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3974"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>child_colname</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3837"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN3837"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN242"><span class='Ref_to_Member'>is_new_col</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Advance ic to next non-dropped old column of left child */ 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3837"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a> <span class='Operator'>&& 
</span>                   <a href="ruleutils.c.html#LN3837"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3837"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* If it is a merged column, we already processed it */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3842"><span class='Ref_To_Local'>leftmerged</span></a><span class='Parentheses'>))</span> 
                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Else, advance i to the corresponding existing join column */ 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a> <span class='Operator'>&& 
</span>                   <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN268"><span class='Ref_to_Member'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Use the already-assigned name of this column */ 
</span>            <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>            <a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !leftcolinfo-&GT;is_new_... &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Unique-ify the new child column name and assign, unless we're 
             * in an unnamed join, in which case just copy 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= 
</span>                    <a href="ruleutils.c.html#LN347"><span class='Ref_to_Proto'>make_colname_unique</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3974"><span class='Ref_To_Local'>child_colname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN3839"><span class='Ref_To_Local'>changed_any</span></a> <span class='Operator'>&& 
</span>                    strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], </span><a href="ruleutils.c.html#LN3974"><span class='Ref_To_Local'>child_colname</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <a href="ruleutils.c.html#LN3839"><span class='Ref_To_Local'>changed_any</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
                <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3974"><span class='Ref_To_Local'>child_colname</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN242"><span class='Ref_to_Member'>is_new_col</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3837"><span class='Ref_To_Local'>leftcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN242"><span class='Ref_to_Member'>is_new_col</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a><span class='Delimiter'>]; 
</span>        <a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for jc=0;jc&LT;leftcolinfo-&GT;... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Handle non-merged right-child columns in exactly the same way */ 
</span>    <a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3838"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN240"><span class='Ref_to_Member'>num_new_cols</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4023"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>child_colname</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3838"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN3838"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN242"><span class='Ref_to_Member'>is_new_col</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Advance ic to next non-dropped old column of right child */ 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3838"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a> <span class='Operator'>&& 
</span>                   <a href="ruleutils.c.html#LN3838"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3838"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* If it is a merged column, we already processed it */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3843"><span class='Ref_To_Local'>rightmerged</span></a><span class='Parentheses'>))</span> 
                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Else, advance i to the corresponding existing join column */ 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a> <span class='Operator'>&& 
</span>                   <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3846"><span class='Ref_To_Local'>ic</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN269"><span class='Ref_to_Member'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Use the already-assigned name of this column */ 
</span>            <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>            <a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !rightcolinfo-&GT;is_new... &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Unique-ify the new child column name and assign, unless we're 
             * in an unnamed join, in which case just copy 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= 
</span>                    <a href="ruleutils.c.html#LN347"><span class='Ref_to_Proto'>make_colname_unique</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4023"><span class='Ref_To_Local'>child_colname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN3839"><span class='Ref_To_Local'>changed_any</span></a> <span class='Operator'>&& 
</span>                    strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], </span><a href="ruleutils.c.html#LN4023"><span class='Ref_To_Local'>child_colname</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <a href="ruleutils.c.html#LN3839"><span class='Ref_To_Local'>changed_any</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
                <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN4023"><span class='Ref_To_Local'>child_colname</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN242"><span class='Ref_to_Member'>is_new_col</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN3838"><span class='Ref_To_Local'>rightcolinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN242"><span class='Ref_to_Member'>is_new_col</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3847"><span class='Ref_To_Local'>jc</span></a><span class='Delimiter'>]; 
</span>        <a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for jc=0;jc&LT;rightcolinfo-... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Assert we processed the right number of columns */ 
</span><span class='Directive'>#ifdef</span> USE_ASSERT_CHECKING 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3844"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3845"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN3841"><span class='Ref_To_Local'>nnewcolumns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <span class='Comment_Multi_Line'>/* 
     * For a named join, print column aliases if we changed any from the child 
     * names.  Unnamed joins cannot print aliases. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN3834"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN245"><span class='Ref_to_Member'>printaliases</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN3839"><span class='Ref_To_Local'>changed_any</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN3835"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN245"><span class='Ref_to_Member'>printaliases</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end set_join_column_names &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * colname_is_unique: is colname distinct from already-chosen column names? 
 * 
 * dpns is query-wide info, colinfo is for the column's RTE 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN4092"></a><span class='Declare_Function'>colname_is_unique</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>colname</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, 
</span><a name="LN4093"></a>                  <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4095"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN4096"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check against already-assigned column aliases within RTE */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4095"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN4095"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN4093"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN4095"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4101"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oldname</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4093"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN4095"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4101"><span class='Ref_To_Local'>oldname</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4101"><span class='Ref_To_Local'>oldname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4092"><span class='Ref_to_Parameter'>colname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If we're building a new_colnames array, check that too (this will be 
     * partially but not completely redundant with the previous checks) 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4095"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN4095"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN4093"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN240"><span class='Ref_to_Member'>num_new_cols</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN4095"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4113"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oldname</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4093"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN4095"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4113"><span class='Ref_To_Local'>oldname</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4113"><span class='Ref_To_Local'>oldname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4092"><span class='Ref_to_Parameter'>colname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Also check against USING-column names that must be globally unique */ 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4096"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4092"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN154"><span class='Ref_to_Member'>using_names</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4122"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oldname</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4096"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4122"><span class='Ref_To_Local'>oldname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4092"><span class='Ref_to_Parameter'>colname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Also check against names already assigned for parent-join USING cols */ 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4096"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4093"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN248"><span class='Ref_to_Member'>parentUsing</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4131"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oldname</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4096"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4131"><span class='Ref_To_Local'>oldname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4092"><span class='Ref_to_Parameter'>colname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end colname_is_unique &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * make_colname_unique: modify colname if necessary to make it unique 
 * 
 * dpns is query-wide info, colinfo is for the column's RTE 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN4146"></a><span class='Declare_Function'>make_colname_unique</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>colname</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, 
</span><a name="LN4147"></a>                    <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * If the selected name isn't unique, append digits to make it so.  For a 
     * very long input name, we might have to truncate to stay within 
     * NAMEDATALEN. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN345"><span class='Ref_to_Proto'>colname_is_unique</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4146"><span class='Ref_to_Parameter'>colname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4146"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4147"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN4156"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>colnamelen</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4146"><span class='Ref_to_Parameter'>colname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4157"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>modname</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4156"><span class='Ref_To_Local'>colnamelen</span></a> <span class='Operator'>+ </span><span class='Number'>16</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4158"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>do</span> 
        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN4158"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * We avoid using %.*s here because it can misbehave if the 
                 * data is not valid in what libc thinks is the prevailing 
                 * encoding. 
                 */ 
</span>                memcpy<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4157"><span class='Ref_To_Local'>modname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4146"><span class='Ref_to_Parameter'>colname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4156"><span class='Ref_To_Local'>colnamelen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4157"><span class='Ref_To_Local'>modname</span></a> <span class='Operator'>+ </span><a href="ruleutils.c.html#LN4156"><span class='Ref_To_Local'>colnamelen</span></a><span class='Delimiter'>, </span><span class='String'>"_%d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4158"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4157"><span class='Ref_To_Local'>modname</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><a href="../../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Parentheses'>)</span> 
                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* drop chars from colname to keep all the digits */ 
</span>                <a href="ruleutils.c.html#LN4156"><span class='Ref_To_Local'>colnamelen</span></a> <span class='Operator'>= </span><a href="../../../include/mb/pg_wchar.h.html#LN530"><span class='Ref_to_Proto'>pg_mbcliplen</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4146"><span class='Ref_to_Parameter'>colname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4156"><span class='Ref_To_Local'>colnamelen</span></a><span class='Delimiter'>, 
</span>                                          <a href="ruleutils.c.html#LN4156"><span class='Ref_To_Local'>colnamelen</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN345"><span class='Ref_to_Proto'>colname_is_unique</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4157"><span class='Ref_To_Local'>modname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4146"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4147"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN4146"><span class='Ref_to_Parameter'>colname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4157"><span class='Ref_To_Local'>modname</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !colname_is_unique(co... &raquo; </span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN4146"><span class='Ref_to_Parameter'>colname</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end make_colname_unique &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * expand_colnames_array_to: make colinfo-&GT;colnames at least n items long 
 * 
 * Any added array entries are initialized to zero. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4190"></a><span class='Declare_Function'>expand_colnames_array_to</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>n</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>n</span></a> <span class='Operator'>&GT; </span><a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>n</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>, 
</span>                                                   <a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>n</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            memset<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a> <span class='Operator'>+ </span><a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                   <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>n</span></a> <span class='Operator'>- </span><a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4190"><span class='Ref_to_Parameter'>n</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * identify_join_columns: figure out where columns of a join come from 
 * 
 * Fills the join-specific fields of the colinfo struct, except for 
 * usingNames which is filled later. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4214"></a><span class='Declare_Function'>identify_join_columns</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>j</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>jrte</span><span class='Delimiter'>, 
</span><a name="LN4215"></a>                      <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4217"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numjoincols</span><span class='Delimiter'>; 
</span><a name="LN4218"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN4219"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Extract left/right child RT indexes */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1449"><span class='Ref_to_Member'>larg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN266"><span class='Ref_to_Member'>leftrti</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1449"><span class='Ref_to_Member'>larg</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rtindex<span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1449"><span class='Ref_to_Member'>larg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN266"><span class='Ref_to_Member'>leftrti</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1449"><span class='Ref_to_Member'>larg</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rtindex<span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized node type in jointree: %d"</span><span class='Delimiter'>, 
</span>             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1449"><span class='Ref_to_Member'>larg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1450"><span class='Ref_to_Member'>rarg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN267"><span class='Ref_to_Member'>rightrti</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1450"><span class='Ref_to_Member'>rarg</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rtindex<span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1450"><span class='Ref_to_Member'>rarg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN267"><span class='Ref_to_Member'>rightrti</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1450"><span class='Ref_to_Member'>rarg</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rtindex<span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized node type in jointree: %d"</span><span class='Delimiter'>, 
</span>             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1450"><span class='Ref_to_Member'>rarg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Assert children will be processed earlier than join in second pass */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN266"><span class='Ref_to_Member'>leftrti</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1454"><span class='Ref_to_Member'>rtindex</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN267"><span class='Ref_to_Member'>rightrti</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1454"><span class='Ref_to_Member'>rtindex</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Initialize result arrays with zeroes */ 
</span>    <a href="ruleutils.c.html#LN4217"><span class='Ref_To_Local'>numjoincols</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>jrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4217"><span class='Ref_To_Local'>numjoincols</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>jrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN268"><span class='Ref_to_Member'>leftattnos</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4217"><span class='Ref_To_Local'>numjoincols</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN269"><span class='Ref_to_Member'>rightattnos</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4217"><span class='Ref_To_Local'>numjoincols</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Scan the joinaliasvars list to identify simple column references */ 
</span>    <a href="ruleutils.c.html#LN4218"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4219"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>jrte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4251"></a>        <a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>aliasvar</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4219"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* get rid of any implicit coercion above the Var */ 
</span>        <a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodeFuncs.h.html#LN35"><span class='Ref_to_Proto'>strip_implicit_coercions</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* It's a dropped column; nothing to do here */ 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN266"><span class='Ref_to_Member'>leftrti</span></a><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN268"><span class='Ref_to_Member'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN4218"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN267"><span class='Ref_to_Member'>rightrti</span></a><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN269"><span class='Ref_to_Member'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN4218"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected varno %d in JOIN RTE"</span><span class='Delimiter'>, 
</span>                     <a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1040"><span class='Ref_to_Struct'>CoalesceExpr</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * It's a merged column in FULL JOIN USING.  Ignore it for now and 
             * let the code below identify the merged columns. 
             */ 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized node type in join alias vars: %d"</span><span class='Delimiter'>, 
</span>                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4251"><span class='Ref_To_Local'>aliasvar</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN4218"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If there's a USING clause, deconstruct the join quals to identify the 
     * merged columns.  This is a tad painful but if we cannot rely on the 
     * column names, there is no other representation of which columns were 
     * joined by USING.  (Unless the join type is FULL, we can't tell from the 
     * joinaliasvars list which columns are merged.)  Note: we assume that the 
     * merged columns are the first output column(s) of the join. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1451"><span class='Ref_to_Member'>usingClause</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4296"></a>        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>leftvars</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN4297"></a>        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>rightvars</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN4298"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc2</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Extract left- and right-side Vars from the qual expression */ 
</span>        <a href="ruleutils.c.html#LN352"><span class='Ref_to_Proto'>flatten_join_using_qual</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1452"><span class='Ref_to_Member'>quals</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4296"><span class='Ref_To_Local'>leftvars</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4297"><span class='Ref_To_Local'>rightvars</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4296"><span class='Ref_To_Local'>leftvars</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1451"><span class='Ref_to_Member'>usingClause</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4297"><span class='Ref_To_Local'>rightvars</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4214"><span class='Ref_to_Parameter'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1451"><span class='Ref_to_Member'>usingClause</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Mark the output columns accordingly */ 
</span>        <a href="ruleutils.c.html#LN4218"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN179"><span class='Ref_to_Macro'>forboth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4219"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4296"><span class='Ref_To_Local'>leftvars</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4298"><span class='Ref_To_Local'>lc2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4297"><span class='Ref_To_Local'>rightvars</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN4309"></a>            <a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>leftvar</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4219"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4310"></a>            <a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>rightvar</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4298"><span class='Ref_To_Local'>lc2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4309"><span class='Ref_To_Local'>leftvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4309"><span class='Ref_To_Local'>leftvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4309"><span class='Ref_To_Local'>leftvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>!= </span><a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN266"><span class='Ref_to_Member'>leftrti</span></a><span class='Parentheses'>) 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected varno %d in JOIN USING qual"</span><span class='Delimiter'>, 
</span>                     <a href="ruleutils.c.html#LN4309"><span class='Ref_To_Local'>leftvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN268"><span class='Ref_to_Member'>leftattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN4218"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN4309"><span class='Ref_To_Local'>leftvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>; 
</span> 
            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4310"><span class='Ref_To_Local'>rightvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4310"><span class='Ref_To_Local'>rightvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4310"><span class='Ref_To_Local'>rightvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>!= </span><a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN267"><span class='Ref_to_Member'>rightrti</span></a><span class='Parentheses'>) 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected varno %d in JOIN USING qual"</span><span class='Delimiter'>, 
</span>                     <a href="ruleutils.c.html#LN4310"><span class='Ref_To_Local'>rightvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN4215"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN269"><span class='Ref_to_Member'>rightattnos</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN4218"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN4310"><span class='Ref_To_Local'>rightvar</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN4218"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if j-&GT;usingClause &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end identify_join_columns &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * flatten_join_using_qual: extract Vars being joined from a JOIN/USING qual 
 * 
 * We assume that transformJoinUsingClause won't have produced anything except 
 * AND nodes, equality operator nodes, and possibly implicit coercions, and 
 * that the AND node inputs match left-to-right with the original USING list. 
 * 
 * Caller must initialize the result lists to NIL. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4341"></a><span class='Declare_Function'>flatten_join_using_qual</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>qual</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>leftvars</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>rightvars</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>qual</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Handle AND nodes by recursion */ 
</span><a name="LN4346"></a>        <a href="../../../include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>b</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>qual</span></a><span class='Delimiter'>; 
</span><a name="LN4347"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4346"><span class='Ref_To_Local'>b</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN560"><span class='Ref_to_Member'>boolop</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>AND_EXPR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4347"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4346"><span class='Ref_To_Local'>b</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN561"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN352"><span class='Ref_to_Proto'>flatten_join_using_qual</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4347"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                    <a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>leftvars</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>rightvars</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>qual</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Otherwise we should have an equality operator */ 
</span><a name="LN4359"></a>        <a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>op</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>qual</span></a><span class='Delimiter'>; 
</span><a name="LN4360"></a>        <a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>var</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4359"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>2</span><span class='Parentheses'>)</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected unary operator in JOIN/USING qual"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Arguments should be Vars with perhaps implicit coercions */ 
</span>        <a href="ruleutils.c.html#LN4360"><span class='Ref_To_Local'>var</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodeFuncs.h.html#LN35"><span class='Ref_to_Proto'>strip_implicit_coercions</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4359"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4360"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected node type in JOIN/USING qual: %d"</span><span class='Delimiter'>, 
</span>                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4360"><span class='Ref_To_Local'>var</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>leftvars</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>leftvars</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4360"><span class='Ref_To_Local'>var</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN4360"><span class='Ref_To_Local'>var</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodeFuncs.h.html#LN35"><span class='Ref_to_Proto'>strip_implicit_coercions</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4359"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4360"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected node type in JOIN/USING qual: %d"</span><span class='Delimiter'>, 
</span>                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4360"><span class='Ref_To_Local'>var</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>rightvars</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>rightvars</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4360"><span class='Ref_To_Local'>var</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(qual,OpExpr) &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Perhaps we have an implicit coercion to boolean? */ 
</span><a name="LN4379"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>q</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodeFuncs.h.html#LN35"><span class='Ref_to_Proto'>strip_implicit_coercions</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>qual</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4379"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>!= </span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>qual</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN352"><span class='Ref_to_Proto'>flatten_join_using_qual</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4379"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>leftvars</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>rightvars</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected node type in JOIN/USING qual: %d"</span><span class='Delimiter'>, 
</span>                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4341"><span class='Ref_to_Parameter'>qual</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end flatten_join_using_qual &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_rtable_name: convenience function to get a previously assigned RTE alias 
 * 
 * The RTE must belong to the topmost namespace level in "context". 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN4395"></a><span class='Declare_Function'>get_rtable_name</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>rtindex</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4397"></a>    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dpns</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4395"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4395"><span class='Ref_to_Parameter'>rtindex</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN4395"><span class='Ref_to_Parameter'>rtindex</span></a> <span class='Operator'>&LT;= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4397"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN149"><span class='Ref_to_Member'>rtable_names</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4397"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN149"><span class='Ref_to_Member'>rtable_names</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4395"><span class='Ref_to_Parameter'>rtindex</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * set_deparse_planstate: set up deparse_namespace to parse subexpressions 
 * of a given PlanState node 
 * 
 * This sets the planstate, outer_planstate, inner_planstate, outer_tlist, 
 * inner_tlist, and index_tlist fields.  Caller is responsible for adjusting 
 * the ancestors list if necessary.  Note that the rtable and ctes fields do 
 * not need to change when shifting attention to different plan nodes in a 
 * single plan tree. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4414"></a><span class='Declare_Function'>set_deparse_planstate</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ps</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN156"><span class='Ref_to_Member'>planstate</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We special-case Append and MergeAppend to pretend that the first child 
     * plan is the OUTER referent; we have to interpret OUTER Vars in their 
     * tlists according to one of the children, and the first one is the most 
     * natural choice.  Likewise special-case ModifyTable to pretend that the 
     * first child plan is the OUTER referent; this is to support RETURNING 
     * lists containing references to non-target relations. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN957"><span class='Ref_to_Struct'>AppendState</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN158"><span class='Ref_to_Member'>outer_planstate</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/execnodes.h.html#LN957"><span class='Ref_to_Struct'>AppendState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>appendplans<span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN976"><span class='Ref_to_Struct'>MergeAppendState</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN158"><span class='Ref_to_Member'>outer_planstate</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/execnodes.h.html#LN976"><span class='Ref_to_Struct'>MergeAppendState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>mergeplans<span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN916"><span class='Ref_to_Struct'>ModifyTableState</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN158"><span class='Ref_to_Member'>outer_planstate</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/execnodes.h.html#LN916"><span class='Ref_to_Struct'>ModifyTableState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>mt_plans<span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN158"><span class='Ref_to_Member'>outer_planstate</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/execnodes.h.html#LN854"><span class='Ref_to_Macro'>outerPlanState</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN158"><span class='Ref_to_Member'>outer_planstate</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN160"><span class='Ref_to_Member'>outer_tlist</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN158"><span class='Ref_to_Member'>outer_planstate</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/plannodes.h.html#LN143"><span class='Ref_to_Member'>targetlist</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN160"><span class='Ref_to_Member'>outer_tlist</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For a SubqueryScan, pretend the subplan is INNER referent.  (We don't 
     * use OUTER because that could someday conflict with the normal meaning.) 
     * Likewise, for a CteScan, pretend the subquery's plan is INNER referent. 
     * For ON CONFLICT .. UPDATE we just need the inner tlist to point to the 
     * excluded expression's tlist. (Similar to the SubqueryScan we don't want 
     * to reuse OUTER, it's used for RETURNING in some modify table cases, 
     * although not INSERT .. CONFLICT). 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN1350"><span class='Ref_to_Struct'>SubqueryScanState</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/execnodes.h.html#LN1350"><span class='Ref_to_Struct'>SubqueryScanState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>subplan<span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN1448"><span class='Ref_to_Struct'>CteScanState</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/execnodes.h.html#LN1448"><span class='Ref_to_Struct'>CteScanState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>cteplanstate<span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN916"><span class='Ref_to_Struct'>ModifyTableState</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/execnodes.h.html#LN853"><span class='Ref_to_Macro'>innerPlanState</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN916"><span class='Ref_to_Struct'>ModifyTableState</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN161"><span class='Ref_to_Member'>inner_tlist</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/execnodes.h.html#LN916"><span class='Ref_to_Struct'>ModifyTableState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>mt_excludedtlist<span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN161"><span class='Ref_to_Member'>inner_tlist</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/plannodes.h.html#LN143"><span class='Ref_to_Member'>targetlist</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN161"><span class='Ref_to_Member'>inner_tlist</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set up referent for INDEX_VAR Vars, if needed */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/plannodes.h.html#LN414"><span class='Ref_to_Struct'>IndexOnlyScan</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN162"><span class='Ref_to_Member'>index_tlist</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/plannodes.h.html#LN414"><span class='Ref_to_Struct'>IndexOnlyScan</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>indextlist<span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/plannodes.h.html#LN594"><span class='Ref_to_Struct'>ForeignScan</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN162"><span class='Ref_to_Member'>index_tlist</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/plannodes.h.html#LN594"><span class='Ref_to_Struct'>ForeignScan</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>fdw_scan_tlist<span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/plannodes.h.html#LN623"><span class='Ref_to_Struct'>CustomScan</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN162"><span class='Ref_to_Member'>index_tlist</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/plannodes.h.html#LN623"><span class='Ref_to_Struct'>CustomScan</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>ps</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>custom_scan_tlist<span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN4414"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN162"><span class='Ref_to_Member'>index_tlist</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end set_deparse_planstate &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * push_child_plan: temporarily transfer deparsing attention to a child plan 
 * 
 * When expanding an OUTER_VAR or INNER_VAR reference, we must adjust the 
 * deparse context in case the referenced expression itself uses 
 * OUTER_VAR/INNER_VAR.  We modify the top stack entry in-place to avoid 
 * affecting levelsup issues (although in a Plan tree there really shouldn't 
 * be any). 
 * 
 * Caller must provide a local deparse_namespace variable to save the 
 * previous state for pop_child_plan. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4489"></a><span class='Declare_Function'>push_child_plan</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ps</span><span class='Delimiter'>, 
</span><a name="LN4490"></a>                <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>save_dpns</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Save state for restoration later */ 
</span>    <span class='Operator'>*</span><a href="ruleutils.c.html#LN4490"><span class='Ref_to_Parameter'>save_dpns</span></a> <span class='Operator'>= *</span><a href="ruleutils.c.html#LN4489"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Link current plan node into ancestors list */ 
</span>    <a href="ruleutils.c.html#LN4489"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN157"><span class='Ref_to_Member'>ancestors</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN215"><span class='Ref_to_Proto'>lcons</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4489"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN156"><span class='Ref_to_Member'>planstate</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4489"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN157"><span class='Ref_to_Member'>ancestors</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set attention on selected child */ 
</span>    <a href="ruleutils.c.html#LN355"><span class='Ref_to_Proto'>set_deparse_planstate</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4489"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4489"><span class='Ref_to_Parameter'>ps</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * pop_child_plan: undo the effects of push_child_plan 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4506"></a><span class='Declare_Function'>pop_child_plan</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>save_dpns</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4508"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>ancestors</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get rid of ancestors list cell added by push_child_plan */ 
</span>    <a href="ruleutils.c.html#LN4508"><span class='Ref_To_Local'>ancestors</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN237"><span class='Ref_to_Proto'>list_delete_first</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4506"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN157"><span class='Ref_to_Member'>ancestors</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Restore fields changed by push_child_plan */ 
</span>    <span class='Operator'>*</span><a href="ruleutils.c.html#LN4506"><span class='Ref_to_Parameter'>dpns</span></a> <span class='Operator'>= *</span><a href="ruleutils.c.html#LN4506"><span class='Ref_to_Parameter'>save_dpns</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure dpns-&GT;ancestors is right (may be unnecessary) */ 
</span>    <a href="ruleutils.c.html#LN4506"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN157"><span class='Ref_to_Member'>ancestors</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4508"><span class='Ref_To_Local'>ancestors</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * push_ancestor_plan: temporarily transfer deparsing attention to an 
 * ancestor plan 
 * 
 * When expanding a Param reference, we must adjust the deparse context 
 * to match the plan node that contains the expression being printed; 
 * otherwise we'd fail if that expression itself contains a Param or 
 * OUTER_VAR/INNER_VAR/INDEX_VAR variable. 
 * 
 * The target ancestor is conveniently identified by the ListCell holding it 
 * in dpns-&GT;ancestors. 
 * 
 * Caller must provide a local deparse_namespace variable to save the 
 * previous state for pop_ancestor_plan. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4536"></a><span class='Declare_Function'>push_ancestor_plan</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ancestor_cell</span><span class='Delimiter'>, 
</span><a name="LN4537"></a>                   <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>save_dpns</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4539"></a>    <a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>ps</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4536"><span class='Ref_to_Parameter'>ancestor_cell</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4540"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>ancestors</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Save state for restoration later */ 
</span>    <span class='Operator'>*</span><a href="ruleutils.c.html#LN4537"><span class='Ref_to_Parameter'>save_dpns</span></a> <span class='Operator'>= *</span><a href="ruleutils.c.html#LN4536"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build a new ancestor list with just this node's ancestors */ 
</span>    <a href="ruleutils.c.html#LN4540"><span class='Ref_To_Local'>ancestors</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="ruleutils.c.html#LN4536"><span class='Ref_to_Parameter'>ancestor_cell</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4536"><span class='Ref_to_Parameter'>ancestor_cell</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <a href="ruleutils.c.html#LN4540"><span class='Ref_To_Local'>ancestors</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4540"><span class='Ref_To_Local'>ancestors</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4536"><span class='Ref_to_Parameter'>ancestor_cell</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4536"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN157"><span class='Ref_to_Member'>ancestors</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4540"><span class='Ref_To_Local'>ancestors</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set attention on selected ancestor */ 
</span>    <a href="ruleutils.c.html#LN355"><span class='Ref_to_Proto'>set_deparse_planstate</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4536"><span class='Ref_to_Parameter'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4539"><span class='Ref_To_Local'>ps</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * pop_ancestor_plan: undo the effects of push_ancestor_plan 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4559"></a><span class='Declare_Function'>pop_ancestor_plan</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dpns</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>save_dpns</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Free the ancestor list made in push_ancestor_plan */ 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN265"><span class='Ref_to_Proto'>list_free</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4559"><span class='Ref_to_Parameter'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN157"><span class='Ref_to_Member'>ancestors</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Restore fields changed by push_ancestor_plan */ 
</span>    <span class='Operator'>*</span><a href="ruleutils.c.html#LN4559"><span class='Ref_to_Parameter'>dpns</span></a> <span class='Operator'>= *</span><a href="ruleutils.c.html#LN4559"><span class='Ref_to_Parameter'>save_dpns</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * make_ruledef         - reconstruct the CREATE RULE command 
 *                for a given pg_rewrite tuple 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4575"></a><span class='Declare_Function'>make_ruledef</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>ruletup</span><span class='Delimiter'>, </span><a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>rulettc</span><span class='Delimiter'>, 
</span><a name="LN4576"></a>             <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4578"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>rulename</span><span class='Delimiter'>; 
</span><a name="LN4579"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>ev_type</span><span class='Delimiter'>; 
</span><a name="LN4580"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>ev_class</span><span class='Delimiter'>; 
</span><a name="LN4581"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_instead</span><span class='Delimiter'>; 
</span><a name="LN4582"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ev_qual</span><span class='Delimiter'>; 
</span><a name="LN4583"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ev_action</span><span class='Delimiter'>; 
</span><a name="LN4584"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>actions</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN4585"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>fno</span><span class='Delimiter'>; 
</span><a name="LN4586"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>dat</span><span class='Delimiter'>; 
</span><a name="LN4587"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Get the attribute values from the rules tuple 
     */ 
</span>    <a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN123"><span class='Ref_to_Proto'>SPI_fnumber</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><span class='String'>"rulename"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4586"><span class='Ref_To_Local'>dat</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN126"><span class='Ref_to_Proto'>SPI_getbinval</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4587"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN4587"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4578"><span class='Ref_To_Local'>rulename</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN590"><span class='Ref_to_Macro'>DatumGetName</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4586"><span class='Ref_To_Local'>dat</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN123"><span class='Ref_to_Proto'>SPI_fnumber</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><span class='String'>"ev_type"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4586"><span class='Ref_To_Local'>dat</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN126"><span class='Ref_to_Proto'>SPI_getbinval</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4587"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN4587"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4579"><span class='Ref_To_Local'>ev_type</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN414"><span class='Ref_to_Macro'>DatumGetChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4586"><span class='Ref_To_Local'>dat</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN123"><span class='Ref_to_Proto'>SPI_fnumber</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><span class='String'>"ev_class"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4586"><span class='Ref_To_Local'>dat</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN126"><span class='Ref_to_Proto'>SPI_getbinval</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4587"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN4587"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4580"><span class='Ref_To_Local'>ev_class</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN505"><span class='Ref_to_Macro'>DatumGetObjectId</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4586"><span class='Ref_To_Local'>dat</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN123"><span class='Ref_to_Proto'>SPI_fnumber</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><span class='String'>"is_instead"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4586"><span class='Ref_To_Local'>dat</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN126"><span class='Ref_to_Proto'>SPI_getbinval</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4587"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN4587"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4581"><span class='Ref_To_Local'>is_instead</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4586"><span class='Ref_To_Local'>dat</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* these could be nulls */ 
</span>    <a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN123"><span class='Ref_to_Proto'>SPI_fnumber</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><span class='String'>"ev_qual"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4582"><span class='Ref_To_Local'>ev_qual</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN125"><span class='Ref_to_Proto'>SPI_getvalue</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN123"><span class='Ref_to_Proto'>SPI_fnumber</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><span class='String'>"ev_action"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4583"><span class='Ref_To_Local'>ev_action</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN125"><span class='Ref_to_Proto'>SPI_getvalue</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4585"><span class='Ref_To_Local'>fno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4583"><span class='Ref_To_Local'>ev_action</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN4584"><span class='Ref_To_Local'>actions</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4583"><span class='Ref_To_Local'>ev_action</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Build the rules definition text 
     */ 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE RULE %s AS"</span><span class='Delimiter'>, 
</span>                     <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4578"><span class='Ref_To_Local'>rulename</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4576"><span class='Ref_to_Parameter'>prettyFlags</span></a> <span class='Operator'>& </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"\n    ON "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ON "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* The event the rule is fired for */ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4579"><span class='Ref_To_Local'>ev_type</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <span class='String'>'1'</span><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <span class='String'>'2'</span><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <span class='String'>'3'</span><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"INSERT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <span class='String'>'4'</span><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"DELETE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"rule \"%s\" has unsupported event type %d"</span><span class='Delimiter'>, 
</span>                            <a href="ruleutils.c.html#LN4578"><span class='Ref_To_Local'>rulename</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4579"><span class='Ref_To_Local'>ev_type</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch ev_type &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* The relation the rule is fired on */ 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" TO %s"</span><span class='Delimiter'>, </span><a href="../../../../contrib/dblink/dblink.c.html#LN111"><span class='Ref_to_Proto'>generate_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4580"><span class='Ref_To_Local'>ev_class</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If the rule has an event qualification, add it */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4582"><span class='Ref_To_Local'>ev_qual</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN4582"><span class='Ref_To_Local'>ev_qual</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4582"><span class='Ref_To_Local'>ev_qual</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4582"><span class='Ref_To_Local'>ev_qual</span></a><span class='Delimiter'>, </span><span class='String'>"&LT;&GT;"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN4667"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>qual</span><span class='Delimiter'>; 
</span><a name="LN4668"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN4669"></a>        <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span><a name="LN4670"></a>        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4576"><span class='Ref_to_Parameter'>prettyFlags</span></a> <span class='Operator'>& </span><a href="ruleutils.c.html#LN89"><span class='Ref_to_Const'>PRETTYFLAG_INDENT</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"\n  "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN4667"><span class='Ref_To_Local'>qual</span></a> <span class='Operator'>= </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4582"><span class='Ref_To_Local'>ev_qual</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We need to make a context for recognizing any Vars in the qual 
         * (which can only be references to OLD and NEW).  Use the rtable of 
         * the first query in the action list for this purpose. 
         */ 
</span>        <a href="ruleutils.c.html#LN4668"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4584"><span class='Ref_To_Local'>actions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If the action is INSERT...SELECT, OLD/NEW have been pushed down 
         * into the SELECT, and that's what we need to look at. (Ugly kluge 
         * ... try to fix this when we redesign querytrees.) 
         */ 
</span>        <a href="ruleutils.c.html#LN4668"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../../include/rewrite/rewriteManip.h.html#LN52"><span class='Ref_to_Proto'>getInsertSelectQuery</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4668"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Must acquire locks right away; see notes in get_query_def() */ 
</span>        <a href="../../../include/rewrite/rewriteHandler.h.html#LN20"><span class='Ref_to_Proto'>AcquireRewriteLocks</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4668"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN4669"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN4669"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4670"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN4669"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN109"><span class='Ref_to_Member'>windowClause</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN4669"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN110"><span class='Ref_to_Member'>windowTList</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN4669"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4668"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN4669"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN111"><span class='Ref_to_Member'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4576"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN4669"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN92"><span class='Ref_to_Const'>WRAP_COLUMN_DEFAULT</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN4669"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN4669"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN115"><span class='Ref_to_Member'>special_exprkind</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parse_node.h.html#LN34"><span class='Ref_to_EnumConst'>EXPR_KIND_NONE</span></a><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN334"><span class='Ref_to_Proto'>set_deparse_for_query</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4670"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4668"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4667"><span class='Ref_To_Local'>qual</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4669"><span class='Ref_To_Local'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if strlen(ev_qual)&GT;0&&st... &raquo; </span> 
 
    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DO "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* The INSTEAD keyword (if so) */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4581"><span class='Ref_To_Local'>is_instead</span></a><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"INSTEAD "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Finally the rules actions */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4584"><span class='Ref_To_Local'>actions</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN4719"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>action</span><span class='Delimiter'>; 
</span><a name="LN4720"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span> 
        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4719"><span class='Ref_To_Local'>action</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4584"><span class='Ref_To_Local'>actions</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN4720"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4719"><span class='Ref_To_Local'>action</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN368"><span class='Ref_to_Proto'>get_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4720"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                          <a href="ruleutils.c.html#LN4576"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN92"><span class='Ref_to_Const'>WRAP_COLUMN_DEFAULT</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4576"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"; "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>");"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4584"><span class='Ref_To_Local'>actions</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NOTHING;"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN4741"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN4741"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4584"><span class='Ref_To_Local'>actions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN368"><span class='Ref_to_Proto'>get_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4741"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                      <a href="ruleutils.c.html#LN4576"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN92"><span class='Ref_to_Const'>WRAP_COLUMN_DEFAULT</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4575"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>';'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end make_ruledef &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * make_viewdef         - reconstruct the SELECT part of a 
 *                view rewrite rule 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4757"></a><span class='Declare_Function'>make_viewdef</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>ruletup</span><span class='Delimiter'>, </span><a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>rulettc</span><span class='Delimiter'>, 
</span><a name="LN4758"></a>             <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>wrapColumn</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4760"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN4761"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>ev_type</span><span class='Delimiter'>; 
</span><a name="LN4762"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>ev_class</span><span class='Delimiter'>; 
</span><a name="LN4763"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_instead</span><span class='Delimiter'>; 
</span><a name="LN4764"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ev_qual</span><span class='Delimiter'>; 
</span><a name="LN4765"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ev_action</span><span class='Delimiter'>; 
</span><a name="LN4766"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>actions</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN4767"></a>    <a href="../../../include/utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a>    <span class='Declare_Local'>ev_relation</span><span class='Delimiter'>; 
</span><a name="LN4768"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>fno</span><span class='Delimiter'>; 
</span><a name="LN4769"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Get the attribute values from the rules tuple 
     */ 
</span>    <a href="ruleutils.c.html#LN4768"><span class='Ref_To_Local'>fno</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN123"><span class='Ref_to_Proto'>SPI_fnumber</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><span class='String'>"ev_type"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4761"><span class='Ref_To_Local'>ev_type</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>) </span><a href="../../../include/executor/spi.h.html#LN126"><span class='Ref_to_Proto'>SPI_getbinval</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4768"><span class='Ref_To_Local'>fno</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4769"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN4768"><span class='Ref_To_Local'>fno</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN123"><span class='Ref_to_Proto'>SPI_fnumber</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><span class='String'>"ev_class"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4762"><span class='Ref_To_Local'>ev_class</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>) </span><a href="../../../include/executor/spi.h.html#LN126"><span class='Ref_to_Proto'>SPI_getbinval</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4768"><span class='Ref_To_Local'>fno</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4769"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN4768"><span class='Ref_To_Local'>fno</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN123"><span class='Ref_to_Proto'>SPI_fnumber</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><span class='String'>"is_instead"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4763"><span class='Ref_To_Local'>is_instead</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>) </span><a href="../../../include/executor/spi.h.html#LN126"><span class='Ref_to_Proto'>SPI_getbinval</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4768"><span class='Ref_To_Local'>fno</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4769"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN4768"><span class='Ref_To_Local'>fno</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN123"><span class='Ref_to_Proto'>SPI_fnumber</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><span class='String'>"ev_qual"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4764"><span class='Ref_To_Local'>ev_qual</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN125"><span class='Ref_to_Proto'>SPI_getvalue</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4768"><span class='Ref_To_Local'>fno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN4768"><span class='Ref_To_Local'>fno</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN123"><span class='Ref_to_Proto'>SPI_fnumber</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><span class='String'>"ev_action"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4765"><span class='Ref_To_Local'>ev_action</span></a> <span class='Operator'>= </span><a href="../../../include/executor/spi.h.html#LN125"><span class='Ref_to_Proto'>SPI_getvalue</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>ruletup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>rulettc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4768"><span class='Ref_To_Local'>fno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4765"><span class='Ref_To_Local'>ev_action</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN4766"><span class='Ref_To_Local'>actions</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4765"><span class='Ref_To_Local'>ev_action</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4766"><span class='Ref_To_Local'>actions</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* keep output buffer empty and leave */ 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="ruleutils.c.html#LN4760"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4766"><span class='Ref_To_Local'>actions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4761"><span class='Ref_To_Local'>ev_type</span></a> <span class='Operator'>!= </span><span class='String'>'1'</span> <span class='Operator'>|| !</span><a href="ruleutils.c.html#LN4763"><span class='Ref_To_Local'>is_instead</span></a> <span class='Operator'>|| 
</span>        strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4764"><span class='Ref_To_Local'>ev_qual</span></a><span class='Delimiter'>, </span><span class='String'>"&LT;&GT;"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN4760"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN109"><span class='Ref_to_Member'>commandType</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/nodes.h.html#LN650"><span class='Ref_to_EnumConst'>CMD_SELECT</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* keep output buffer empty and leave */ 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="ruleutils.c.html#LN4767"><span class='Ref_To_Local'>ev_relation</span></a> <span class='Operator'>= </span><a href="../../../include/access/heapam.h.html#LN91"><span class='Ref_to_Proto'>heap_open</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4762"><span class='Ref_To_Local'>ev_class</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN368"><span class='Ref_to_Proto'>get_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4760"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/rel.h.html#LN428"><span class='Ref_to_Macro'>RelationGetDescr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4767"><span class='Ref_To_Local'>ev_relation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                  <a href="ruleutils.c.html#LN4758"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4758"><span class='Ref_to_Parameter'>wrapColumn</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4757"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>';'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/access/heapam.h.html#LN96"><span class='Ref_to_Macro'>heap_close</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4767"><span class='Ref_To_Local'>ev_relation</span></a><span class='Delimiter'>, </span><a href="../../../include/storage/lockdefs.h.html#LN35"><span class='Ref_to_Const'>AccessShareLock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end make_viewdef &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_query_def            - Parse back one query parsetree 
 * 
 * If resultDesc is not NULL, then it is the output tuple descriptor for 
 * the view represented by a SELECT query. 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4824"></a><span class='Declare_Function'>get_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parentnamespace</span><span class='Delimiter'>, 
</span><a name="LN4825"></a>              <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>resultDesc</span><span class='Delimiter'>, 
</span><a name="LN4826"></a>              <span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>wrapColumn</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>startIndent</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4828"></a>    <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Declare_Local'>context</span><span class='Delimiter'>; 
</span><a name="LN4829"></a>    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Guard against excessively long or deeply-nested queries */ 
</span>    <a href="../../../include/miscadmin.h.html#LN99"><span class='Ref_to_Macro'>CHECK_FOR_INTERRUPTS</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Before we begin to examine the query, acquire locks on referenced 
     * relations, and fix up deleted columns in JOIN RTEs.  This ensures 
     * consistent results.  Note we assume it's OK to scribble on the passed 
     * querytree! 
     * 
     * We are only deparsing the query (we are not about to execute it), so we 
     * only need AccessShareLock on the relations it mentions. 
     */ 
</span>    <a href="../../../include/rewrite/rewriteHandler.h.html#LN20"><span class='Ref_to_Proto'>AcquireRewriteLocks</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN215"><span class='Ref_to_Proto'>lcons</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4829"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN268"><span class='Ref_to_Proto'>list_copy</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>parentnamespace</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN109"><span class='Ref_to_Member'>windowClause</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN110"><span class='Ref_to_Member'>windowTList</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>parentnamespace</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a> <span class='Operator'>|| 
</span>                         <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN111"><span class='Ref_to_Member'>prettyFlags</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4826"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4826"><span class='Ref_to_Parameter'>wrapColumn</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4826"><span class='Ref_to_Parameter'>startIndent</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Operator'>.</span><a href="ruleutils.c.html#LN115"><span class='Ref_to_Member'>special_exprkind</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parse_node.h.html#LN34"><span class='Ref_to_EnumConst'>EXPR_KIND_NONE</span></a><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN334"><span class='Ref_to_Proto'>set_deparse_for_query</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4829"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>parentnamespace</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN109"><span class='Ref_to_Member'>commandType</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN650"><span class='Ref_to_EnumConst'>CMD_SELECT</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN373"><span class='Ref_to_Proto'>get_select_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4825"><span class='Ref_to_Parameter'>resultDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN651"><span class='Ref_to_EnumConst'>CMD_UPDATE</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN376"><span class='Ref_to_Proto'>get_update_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN652"><span class='Ref_to_EnumConst'>CMD_INSERT</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN375"><span class='Ref_to_Proto'>get_insert_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN653"><span class='Ref_to_EnumConst'>CMD_DELETE</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN380"><span class='Ref_to_Proto'>get_delete_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN656"><span class='Ref_to_EnumConst'>CMD_NOTHING</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NOTHING"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN654"><span class='Ref_to_EnumConst'>CMD_UTILITY</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN381"><span class='Ref_to_Proto'>get_utility_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN4828"><span class='Ref_To_Local'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized query command type: %d"</span><span class='Delimiter'>, 
</span>                 <a href="ruleutils.c.html#LN4824"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN109"><span class='Ref_to_Member'>commandType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch query-&GT;commandType &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end get_query_def &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_values_def           - Parse back a VALUES list 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4897"></a><span class='Declare_Function'>get_values_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>values_lists</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4899"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4897"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN4900"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first_list</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN4901"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>vtl</span><span class='Delimiter'>; 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4899"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"VALUES "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4901"><span class='Ref_To_Local'>vtl</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4897"><span class='Ref_to_Parameter'>values_lists</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4907"></a>        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>sublist</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4901"><span class='Ref_To_Local'>vtl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN4908"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>first_col</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN4909"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4900"><span class='Ref_To_Local'>first_list</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN4900"><span class='Ref_To_Local'>first_list</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4899"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4899"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4909"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4907"><span class='Ref_To_Local'>sublist</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN4919"></a>            <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>col</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4909"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4908"><span class='Ref_To_Local'>first_col</span></a><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN4908"><span class='Ref_To_Local'>first_col</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4899"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Print the value.  Whole-row Vars need special treatment. 
             */ 
</span>            <a href="ruleutils.c.html#LN416"><span class='Ref_to_Proto'>get_rule_expr_toplevel</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4919"><span class='Ref_To_Local'>col</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4897"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4899"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_values_def &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_with_clause          - Parse back a WITH clause 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4940"></a><span class='Declare_Function'>get_with_clause</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4942"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN4943"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span><a name="LN4944"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN132"><span class='Ref_to_Member'>cteList</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>+= </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4942"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN127"><span class='Ref_to_Member'>hasRecursive</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN4943"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>"WITH RECURSIVE "</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN4943"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>"WITH "</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4944"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN132"><span class='Ref_to_Member'>cteList</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4961"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN1339"><span class='Ref_to_Struct'>CommonTableExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cte</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1339"><span class='Ref_to_Struct'>CommonTableExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4944"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4942"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4943"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4942"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4961"><span class='Ref_To_Local'>cte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1342"><span class='Ref_to_Member'>ctename</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4961"><span class='Ref_To_Local'>cte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1343"><span class='Ref_to_Member'>aliascolnames</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN4967"></a>            <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN4968"></a>            <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>col</span><span class='Delimiter'>; 
</span> 
            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4942"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4968"><span class='Ref_To_Local'>col</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4961"><span class='Ref_To_Local'>cte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1343"><span class='Ref_to_Member'>aliascolnames</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4967"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>                    <a href="ruleutils.c.html#LN4967"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4942"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4942"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, 
</span>                                       <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4968"><span class='Ref_To_Local'>col</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4942"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4942"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" AS ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
            <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN368"><span class='Ref_to_Proto'>get_query_def</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN4961"><span class='Ref_To_Local'>cte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1345"><span class='Ref_to_Member'>ctequery</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4942"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                      <a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN111"><span class='Ref_to_Member'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a><span class='Delimiter'>, 
</span>                      <a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
            <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4942"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN4943"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>-= </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4940"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN4942"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_with_clause &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_select_query_def         - Parse back a SELECT parsetree 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN5008"></a><span class='Declare_Function'>get_select_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN5009"></a>                     <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>resultDesc</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5011"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN5012"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>save_windowclause</span><span class='Delimiter'>; 
</span><a name="LN5013"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>save_windowtlist</span><span class='Delimiter'>; 
</span><a name="LN5014"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>force_colno</span><span class='Delimiter'>; 
</span><a name="LN5015"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Insert the WITH clause if given */ 
</span>    <a href="ruleutils.c.html#LN372"><span class='Ref_to_Proto'>get_with_clause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set up context for possible window functions */ 
</span>    <a href="ruleutils.c.html#LN5012"><span class='Ref_To_Local'>save_windowclause</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN109"><span class='Ref_to_Member'>windowClause</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN109"><span class='Ref_to_Member'>windowClause</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN151"><span class='Ref_to_Member'>windowClause</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN5013"><span class='Ref_To_Local'>save_windowtlist</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN110"><span class='Ref_to_Member'>windowTList</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN110"><span class='Ref_to_Member'>windowTList</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the Query node has a setOperations tree, then it's the top level of 
     * a UNION/INTERSECT/EXCEPT query; only the WITH, ORDER BY and LIMIT 
     * fields are interesting in the top query itself. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN162"><span class='Ref_to_Member'>setOperations</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN386"><span class='Ref_to_Proto'>get_setop_query</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN162"><span class='Ref_to_Member'>setOperations</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5009"><span class='Ref_to_Parameter'>resultDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* ORDER BY clauses must be simple in this case */ 
</span>        <a href="ruleutils.c.html#LN5014"><span class='Ref_To_Local'>force_colno</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN382"><span class='Ref_to_Proto'>get_basic_select_query</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5009"><span class='Ref_to_Parameter'>resultDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5014"><span class='Ref_To_Local'>force_colno</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Add the ORDER BY clause if given */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN155"><span class='Ref_to_Member'>sortClause</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" ORDER BY "</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN394"><span class='Ref_to_Proto'>get_rule_orderby</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN155"><span class='Ref_to_Member'>sortClause</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>, 
</span>                         <a href="ruleutils.c.html#LN5014"><span class='Ref_To_Local'>force_colno</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Add the LIMIT clause if given */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN157"><span class='Ref_to_Member'>limitOffset</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" OFFSET "</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN157"><span class='Ref_to_Member'>limitOffset</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN158"><span class='Ref_to_Member'>limitCount</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" LIMIT "</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN158"><span class='Ref_to_Member'>limitCount</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>            <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN158"><span class='Ref_to_Member'>limitCount</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>constisnull<span class='Parentheses'>)</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5011"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ALL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN158"><span class='Ref_to_Member'>limitCount</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Add FOR [KEY] UPDATE/SHARE clauses if present */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN129"><span class='Ref_to_Member'>hasForUpdate</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5015"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN160"><span class='Ref_to_Member'>rowMarks</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN5075"></a>            <a href="../../../include/nodes/parsenodes.h.html#LN1278"><span class='Ref_to_Struct'>RowMarkClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1278"><span class='Ref_to_Struct'>RowMarkClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5015"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* don't print implicit clauses */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5075"><span class='Ref_To_Local'>rc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1284"><span class='Ref_to_Member'>pushedDown</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5075"><span class='Ref_To_Local'>rc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1282"><span class='Ref_to_Member'>strength</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/lockoptions.h.html#LN22"><span class='Ref_to_EnumConst'>LCS_NONE</span></a><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* we intentionally throw an error for LCS_NONE */ 
</span>                    <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized LockClauseStrength %d"</span><span class='Delimiter'>, 
</span>                         <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5075"><span class='Ref_To_Local'>rc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1282"><span class='Ref_to_Member'>strength</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/lockoptions.h.html#LN23"><span class='Ref_to_EnumConst'>LCS_FORKEYSHARE</span></a><span class='Operator'>: 
</span>                    <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" FOR KEY SHARE"</span><span class='Delimiter'>, 
</span>                                     <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/lockoptions.h.html#LN24"><span class='Ref_to_EnumConst'>LCS_FORSHARE</span></a><span class='Operator'>: 
</span>                    <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" FOR SHARE"</span><span class='Delimiter'>, 
</span>                                     <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/lockoptions.h.html#LN25"><span class='Ref_to_EnumConst'>LCS_FORNOKEYUPDATE</span></a><span class='Operator'>: 
</span>                    <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" FOR NO KEY UPDATE"</span><span class='Delimiter'>, 
</span>                                     <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/lockoptions.h.html#LN26"><span class='Ref_to_EnumConst'>LCS_FORUPDATE</span></a><span class='Operator'>: 
</span>                    <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" FOR UPDATE"</span><span class='Delimiter'>, 
</span>                                     <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch rc-&GT;strength &raquo; </span> 
 
            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5011"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" OF %s"</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN354"><span class='Ref_to_Proto'>get_rtable_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5075"><span class='Ref_To_Local'>rc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1281"><span class='Ref_to_Member'>rti</span></a><span class='Delimiter'>, 
</span>                                                              <a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5075"><span class='Ref_To_Local'>rc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1283"><span class='Ref_to_Member'>waitPolicy</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/lockoptions.h.html#LN42"><span class='Ref_to_EnumConst'>LockWaitError</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5011"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NOWAIT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5075"><span class='Ref_To_Local'>rc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1283"><span class='Ref_to_Member'>waitPolicy</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/lockoptions.h.html#LN40"><span class='Ref_to_EnumConst'>LockWaitSkip</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5011"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" SKIP LOCKED"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if query-&GT;hasForUpdate &raquo; </span> 
 
    <a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN109"><span class='Ref_to_Member'>windowClause</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5012"><span class='Ref_To_Local'>save_windowclause</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN5008"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN110"><span class='Ref_to_Member'>windowTList</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5013"><span class='Ref_To_Local'>save_windowtlist</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_select_query_def &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Detect whether query looks like SELECT ... FROM VALUES(); 
 * if so, return the VALUES RTE.  Otherwise return NULL. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>* 
</span><a name="LN5125"></a><span class='Declare_Function'>get_simple_values_rte</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5127"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN5128"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We want to return TRUE even if the Query also contains OLD or NEW rule 
     * RTEs.  So the idea is to scan the rtable and see if there is only one 
     * inFromCl RTE that is a VALUES RTE. 
     */ 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5128"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5125"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN5137"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5128"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5137"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN927"><span class='Ref_to_EnumConst'>RTE_VALUES</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN5137"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1026"><span class='Ref_to_Member'>inFromCl</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5127"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* multiple VALUES (probably not possible) */ 
</span>            <a href="ruleutils.c.html#LN5127"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5137"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5137"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a> <span class='Operator'>&& !</span><a href="ruleutils.c.html#LN5137"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1026"><span class='Ref_to_Member'>inFromCl</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* ignore rule entries */ 
</span>        <span class='Control'>else</span> 
            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* something else -&GT; not simple VALUES */ 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We don't need to check the targetlist in any great detail, because 
     * parser/analyze.c will never generate a "bare" VALUES RTE --- they only 
     * appear inside auto-generated sub-queries with very restricted 
     * structure.  However, DefineView might have modified the tlist by 
     * injecting new column aliases; so compare tlist resnames against the 
     * RTE's names to detect that. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5127"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN5161"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lcn</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5125"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5127"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* this probably cannot happen */ 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN179"><span class='Ref_to_Macro'>forboth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5128"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5125"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5161"><span class='Ref_To_Local'>lcn</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5127"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN5167"></a>            <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5128"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5168"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cname</span> <span class='Operator'>= </span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5161"><span class='Ref_To_Local'>lcn</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5167"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* this probably cannot happen */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5167"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1368"><span class='Ref_to_Member'>resname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5167"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1368"><span class='Ref_to_Member'>resname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5168"><span class='Ref_To_Local'>cname</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* column name has been changed */ 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN5127"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_simple_values_rte &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN5181"></a><span class='Declare_Function'>get_basic_select_query</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN5182"></a>                       <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>resultDesc</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5184"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN5185"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>values_rte</span><span class='Delimiter'>; 
</span><a name="LN5186"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span><a name="LN5187"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>+= </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5184"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the query looks like SELECT * FROM (VALUES ...), then print just the 
     * VALUES part.  This reverses what transformValuesClause() did at parse 
     * time. 
     */ 
</span>    <a href="ruleutils.c.html#LN5185"><span class='Ref_To_Local'>values_rte</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5124"><span class='Ref_to_Func'>get_simple_values_rte</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5185"><span class='Ref_To_Local'>values_rte</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN371"><span class='Ref_to_Proto'>get_values_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5185"><span class='Ref_To_Local'>values_rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN996"><span class='Ref_to_Member'>values_lists</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Build up the query string - first we say SELECT 
     */ 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5184"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Add the DISTINCT clause if given */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN153"><span class='Ref_to_Member'>distinctClause</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN126"><span class='Ref_to_Member'>hasDistinctOn</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5184"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DISTINCT ON ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN5186"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>            <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5187"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN153"><span class='Ref_to_Member'>distinctClause</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN5221"></a>                <a href="../../../include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>srt</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5187"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5184"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5186"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN389"><span class='Ref_to_Proto'>get_rule_sortgroupclause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5221"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1164"><span class='Ref_to_Member'>tleSortGroupRef</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>, 
</span>                                         <span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN5186"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5184"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5184"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DISTINCT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if query-&GT;distinctClause... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Then we tell what to select (the targetlist) */ 
</span>    <a href="ruleutils.c.html#LN384"><span class='Ref_to_Proto'>get_target_list</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5182"><span class='Ref_to_Parameter'>resultDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Add the FROM clause if needed */ 
</span>    <a href="ruleutils.c.html#LN436"><span class='Ref_to_Proto'>get_from_clause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><span class='String'>" FROM "</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Add the WHERE clause if given */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN135"><span class='Ref_to_Member'>jointree</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1470"><span class='Ref_to_Member'>quals</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE "</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN135"><span class='Ref_to_Member'>jointree</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1470"><span class='Ref_to_Member'>quals</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Add the GROUP BY clause if given */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN145"><span class='Ref_to_Member'>groupClause</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN147"><span class='Ref_to_Member'>groupingSets</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN5251"></a>        <a href="../../../include/parser/parse_node.h.html#LN32"><span class='Ref_to_Enum'>ParseExprKind</span></a> <span class='Declare_Local'>save_exprkind</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" GROUP BY "</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN5251"><span class='Ref_To_Local'>save_exprkind</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN115"><span class='Ref_to_Member'>special_exprkind</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN115"><span class='Ref_to_Member'>special_exprkind</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parse_node.h.html#LN51"><span class='Ref_to_EnumConst'>EXPR_KIND_GROUP_BY</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN147"><span class='Ref_to_Member'>groupingSets</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN5186"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>            <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5187"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN145"><span class='Ref_to_Member'>groupClause</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN5264"></a>                <a href="../../../include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>grp</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5187"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5184"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5186"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN389"><span class='Ref_to_Proto'>get_rule_sortgroupclause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5264"><span class='Ref_To_Local'>grp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1164"><span class='Ref_to_Member'>tleSortGroupRef</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>, 
</span>                                         <span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN5186"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN5186"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>            <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5187"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN147"><span class='Ref_to_Member'>groupingSets</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN5277"></a>                <a href="../../../include/nodes/parsenodes.h.html#LN1230"><span class='Ref_to_Struct'>GroupingSet</span></a> <span class='Operator'>*</span><span class='Declare_Local'>grp</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5187"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5184"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5186"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN392"><span class='Ref_to_Proto'>get_rule_groupingset</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5277"><span class='Ref_To_Local'>grp</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN5186"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN115"><span class='Ref_to_Member'>special_exprkind</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5251"><span class='Ref_To_Local'>save_exprkind</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if query-&GT;groupClause!=N... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Add the HAVING clause if given */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN149"><span class='Ref_to_Member'>havingQual</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" HAVING "</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN149"><span class='Ref_to_Member'>havingQual</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Add the WINDOW clause if needed */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN151"><span class='Ref_to_Member'>windowClause</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN396"><span class='Ref_to_Proto'>get_rule_windowclause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5181"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_basic_select_query &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_target_list          - Parse back a SELECT target list 
 * 
 * This is also used for RETURNING lists in INSERT/UPDATE/DELETE. 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN5308"></a><span class='Declare_Function'>get_target_list</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetList</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN5309"></a>                <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>resultDesc</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5311"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5308"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN5312"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>targetbuf</span><span class='Delimiter'>; 
</span><a name="LN5313"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>last_was_multiline</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN5314"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span><a name="LN5315"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>colno</span><span class='Delimiter'>; 
</span><a name="LN5316"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* we use targetbuf to hold each TLE's text temporarily */ 
</span>    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN5312"><span class='Ref_To_Local'>targetbuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN5314"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>" "</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN5315"><span class='Ref_To_Local'>colno</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5316"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5308"><span class='Ref_to_Parameter'>targetList</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN5325"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5316"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5326"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>colname</span><span class='Delimiter'>; 
</span><a name="LN5327"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attname</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5325"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* ignore junk entries */ 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5311"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5314"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5314"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5315"><span class='Ref_To_Local'>colno</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Put the new field text into targetbuf so we can decide after we've 
         * got it whether or not it needs to go on a new line. 
         */ 
</span>        <a href="../../lib/stringinfo.c.html#LN60"><span class='Ref_to_Func'>resetStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN5312"><span class='Ref_To_Local'>targetbuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5308"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= &</span><a href="ruleutils.c.html#LN5312"><span class='Ref_To_Local'>targetbuf</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We special-case Var nodes rather than using get_rule_expr. This is 
         * needed because get_rule_expr will display a whole-row Var as 
         * "foo.*", which is the preferred notation in most contexts, but at 
         * the top level of a SELECT list it's not right (the parser will 
         * expand that notation into multiple columns, yielding behavior 
         * different from a whole-row Var).  We need to call get_variable 
         * directly so that we can tell it to do the right thing, and so that 
         * we can get the attribute name which is the default AS label. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5325"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5325"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN5327"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN399"><span class='Ref_to_Proto'>get_variable</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5325"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5308"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5325"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5308"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* We'll show the AS name unless it's this: */ 
</span>            <a href="ruleutils.c.html#LN5327"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><span class='String'>"?column?"</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Figure out what the result column should be called.  In the context 
         * of a view, use the view's tuple descriptor (so as to pick up the 
         * effects of any column RENAME that's been done on the view). 
         * Otherwise, just use what we can find in the TLE. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5309"><span class='Ref_to_Parameter'>resultDesc</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN5315"><span class='Ref_To_Local'>colno</span></a> <span class='Operator'>&LT;= </span><a href="ruleutils.c.html#LN5309"><span class='Ref_to_Parameter'>resultDesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN5326"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5309"><span class='Ref_to_Parameter'>resultDesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN5315"><span class='Ref_To_Local'>colno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="ruleutils.c.html#LN5326"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5325"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1368"><span class='Ref_to_Member'>resname</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Show AS unless the column's name is correct as-is */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5326"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>)</span>            <span class='Comment_Single_Line'>/* resname could be NULL */ 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5327"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5327"><span class='Ref_To_Local'>attname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5326"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN5312"><span class='Ref_To_Local'>targetbuf</span></a><span class='Delimiter'>, </span><span class='String'>" AS %s"</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5326"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Restore context's output buffer */ 
</span>        <a href="ruleutils.c.html#LN5308"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5311"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Consider line-wrapping if enabled */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5308"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="ruleutils.c.html#LN5308"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span><a name="LN5388"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>leading_nl_pos</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Does the new field start with a new line? */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5312"><span class='Ref_To_Local'>targetbuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN5312"><span class='Ref_To_Local'>targetbuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\n'</span><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN5388"><span class='Ref_To_Local'>leading_nl_pos</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="ruleutils.c.html#LN5388"><span class='Ref_To_Local'>leading_nl_pos</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* If so, we shouldn't add anything */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5388"><span class='Ref_To_Local'>leading_nl_pos</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* instead, remove any trailing spaces currently in buf */ 
</span>                <a href="ruleutils.c.html#LN413"><span class='Ref_to_Proto'>removeStringInfoSpaces</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5311"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span><a name="LN5404"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>trailing_nl</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Locate the start of the current line in the output buffer */ 
</span>                <a href="ruleutils.c.html#LN5404"><span class='Ref_To_Local'>trailing_nl</span></a> <span class='Operator'>= </span>strrchr<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5311"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5404"><span class='Ref_To_Local'>trailing_nl</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <a href="ruleutils.c.html#LN5404"><span class='Ref_To_Local'>trailing_nl</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5311"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="ruleutils.c.html#LN5404"><span class='Ref_To_Local'>trailing_nl</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Add a newline, plus some indentation, if the new field is 
                 * not the first and either the new field would cause an 
                 * overflow or the last field used more than one line. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5315"><span class='Ref_To_Local'>colno</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span> <span class='Operator'>&& 
</span>                    <span class='Parentheses'>((</span>strlen<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5404"><span class='Ref_To_Local'>trailing_nl</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><a href="ruleutils.c.html#LN5312"><span class='Ref_To_Local'>targetbuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&GT; </span><a href="ruleutils.c.html#LN5308"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a><span class='Parentheses'>)</span> <span class='Operator'>|| 
</span>                     <a href="ruleutils.c.html#LN5313"><span class='Ref_To_Local'>last_was_multiline</span></a><span class='Parentheses'>))</span> 
                    <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5308"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                         <a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN83"><span class='Ref_to_Const'>PRETTYINDENT_VAR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
            <span class='Comment_Multi_Line'>/* Remember this field's multiline status for next iteration */ 
</span>            <a href="ruleutils.c.html#LN5313"><span class='Ref_To_Local'>last_was_multiline</span></a> <span class='Operator'>= 
</span>                <span class='Parentheses'>(</span>strchr<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5312"><span class='Ref_To_Local'>targetbuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a> <span class='Operator'>+ </span><a href="ruleutils.c.html#LN5388"><span class='Ref_To_Local'>leading_nl_pos</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if PRETTY_INDENT(context... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* Add the new field */ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5311"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5312"><span class='Ref_To_Local'>targetbuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* clean up */ 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5312"><span class='Ref_To_Local'>targetbuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_target_list &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN5439"></a><span class='Declare_Function'>get_setop_query</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>setOp</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN5440"></a>                <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a> <span class='Declare_Parameter'>resultDesc</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5442"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN5443"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>need_paren</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Guard against excessively long or deeply-nested queries */ 
</span>    <a href="../../../include/miscadmin.h.html#LN99"><span class='Ref_to_Macro'>CHECK_FOR_INTERRUPTS</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>setOp</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN5451"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rtr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>setOp</span></a><span class='Delimiter'>; 
</span><a name="LN5452"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5451"><span class='Ref_To_Local'>rtr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1418"><span class='Ref_to_Member'>rtindex</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5453"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>subquery</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5452"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN954"><span class='Ref_to_Member'>subquery</span></a><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5453"><span class='Ref_To_Local'>subquery</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5453"><span class='Ref_To_Local'>subquery</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN162"><span class='Ref_to_Member'>setOperations</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Need parens if WITH, ORDER BY, FOR UPDATE, or LIMIT; see gram.y */ 
</span>        <a href="ruleutils.c.html#LN5443"><span class='Ref_To_Local'>need_paren</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5453"><span class='Ref_To_Local'>subquery</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN132"><span class='Ref_to_Member'>cteList</span></a> <span class='Operator'>|| 
</span>                      <a href="ruleutils.c.html#LN5453"><span class='Ref_To_Local'>subquery</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN155"><span class='Ref_to_Member'>sortClause</span></a> <span class='Operator'>|| 
</span>                      <a href="ruleutils.c.html#LN5453"><span class='Ref_To_Local'>subquery</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN160"><span class='Ref_to_Member'>rowMarks</span></a> <span class='Operator'>|| 
</span>                      <a href="ruleutils.c.html#LN5453"><span class='Ref_To_Local'>subquery</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN157"><span class='Ref_to_Member'>limitOffset</span></a> <span class='Operator'>|| 
</span>                      <a href="ruleutils.c.html#LN5453"><span class='Ref_To_Local'>subquery</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN158"><span class='Ref_to_Member'>limitCount</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5443"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5442"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN368"><span class='Ref_to_Proto'>get_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5453"><span class='Ref_To_Local'>subquery</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5442"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5440"><span class='Ref_to_Parameter'>resultDesc</span></a><span class='Delimiter'>, 
</span>                      <a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN111"><span class='Ref_to_Member'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a><span class='Delimiter'>, 
</span>                      <a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5443"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5442"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(setOp,RangeTblRef... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>setOp</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN1545"><span class='Ref_to_Struct'>SetOperationStmt</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN5473"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN1545"><span class='Ref_to_Struct'>SetOperationStmt</span></a> <span class='Operator'>*</span><span class='Declare_Local'>op</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1545"><span class='Ref_to_Struct'>SetOperationStmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>setOp</span></a><span class='Delimiter'>; 
</span><a name="LN5474"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>subindent</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We force parens when nesting two SetOperationStmts, except when the 
         * lefthand input is another setop of the same kind.  Syntactically, 
         * we could omit parens in rather more cases, but it seems best to use 
         * parens to flag cases where the setop operator changes.  If we use 
         * parens, we also increase the indentation level for the child query. 
         * 
         * There are some cases in which parens are needed around a leaf query 
         * too, but those are more easily handled at the next level down (see 
         * code above). 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5473"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1550"><span class='Ref_to_Member'>larg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN1545"><span class='Ref_to_Struct'>SetOperationStmt</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN5489"></a>            <a href="../../../include/nodes/parsenodes.h.html#LN1545"><span class='Ref_to_Struct'>SetOperationStmt</span></a> <span class='Operator'>*</span><span class='Declare_Local'>lop</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1545"><span class='Ref_to_Struct'>SetOperationStmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5473"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1550"><span class='Ref_to_Member'>larg</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5473"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1548"><span class='Ref_to_Member'>op</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN5489"><span class='Ref_To_Local'>lop</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1548"><span class='Ref_to_Member'>op</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN5473"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1549"><span class='Ref_to_Member'>all</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN5489"><span class='Ref_To_Local'>lop</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1549"><span class='Ref_to_Member'>all</span></a><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN5443"><span class='Ref_To_Local'>need_paren</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="ruleutils.c.html#LN5443"><span class='Ref_To_Local'>need_paren</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="ruleutils.c.html#LN5443"><span class='Ref_To_Local'>need_paren</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5443"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5442"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN5474"><span class='Ref_To_Local'>subindent</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5474"><span class='Ref_To_Local'>subindent</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="ruleutils.c.html#LN5474"><span class='Ref_To_Local'>subindent</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN386"><span class='Ref_to_Proto'>get_setop_query</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5473"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1550"><span class='Ref_to_Member'>larg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5440"><span class='Ref_to_Parameter'>resultDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5443"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>") "</span><span class='Delimiter'>, </span><span class='Operator'>-</span><a href="ruleutils.c.html#LN5474"><span class='Ref_To_Local'>subindent</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
            <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Operator'>-</span><a href="ruleutils.c.html#LN5474"><span class='Ref_To_Local'>subindent</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5442"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5473"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1548"><span class='Ref_to_Member'>op</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN1473"><span class='Ref_to_EnumConst'>SETOP_UNION</span></a><span class='Operator'>: 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5442"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"UNION "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN1474"><span class='Ref_to_EnumConst'>SETOP_INTERSECT</span></a><span class='Operator'>: 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5442"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"INTERSECT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN1475"><span class='Ref_to_EnumConst'>SETOP_EXCEPT</span></a><span class='Operator'>: 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5442"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"EXCEPT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized set op: %d"</span><span class='Delimiter'>, 
</span>                     <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5473"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1548"><span class='Ref_to_Member'>op</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5473"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1549"><span class='Ref_to_Member'>all</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5442"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ALL "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Always parenthesize if RHS is another setop */ 
</span>        <a href="ruleutils.c.html#LN5443"><span class='Ref_To_Local'>need_paren</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5473"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1551"><span class='Ref_to_Member'>rarg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN1545"><span class='Ref_to_Struct'>SetOperationStmt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * The indentation code here is deliberately a bit different from that 
         * for the lefthand input, because we want the line breaks in 
         * different places. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5443"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5442"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN5474"><span class='Ref_To_Local'>subindent</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="ruleutils.c.html#LN5474"><span class='Ref_To_Local'>subindent</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5474"><span class='Ref_To_Local'>subindent</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN386"><span class='Ref_to_Proto'>get_setop_query</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5473"><span class='Ref_To_Local'>op</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1551"><span class='Ref_to_Member'>rarg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5440"><span class='Ref_to_Parameter'>resultDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
            <a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>-= </span><a href="ruleutils.c.html#LN5474"><span class='Ref_To_Local'>subindent</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5443"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>")"</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(setOp,SetOperatio... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized node type: %d"</span><span class='Delimiter'>, 
</span>             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5439"><span class='Ref_to_Parameter'>setOp</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_setop_query &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Display a sort/group clause. 
 * 
 * Also returns the expression tree, so caller need not find it again. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>* 
</span><a name="LN5572"></a><span class='Declare_Function'>get_rule_sortgroupclause</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a> <span class='Declare_Parameter'>ref</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tlist</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>force_colno</span><span class='Delimiter'>, 
</span><a name="LN5573"></a>                         <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5575"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5573"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN5576"></a>    <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span><a name="LN5577"></a>    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN5576"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/tlist.h.html#LN35"><span class='Ref_to_Proto'>get_sortgroupref_tle</span></a><span class='Parentheses'>(</span><span class='Keyword'>ref</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5572"><span class='Ref_to_Parameter'>tlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5576"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Use column-number form if requested by caller.  Otherwise, if 
     * expression is a constant, force it to be dumped with an explicit cast 
     * as decoration --- this is because a simple integer constant is 
     * ambiguous (and will be misinterpreted by findTargetlistEntry()) if we 
     * dump it without any decoration.  If it's anything more complex than a 
     * simple Var, then force extra parens around it, to ensure it can't be 
     * misinterpreted as a cube() or rollup() construct. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5572"><span class='Ref_to_Parameter'>force_colno</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN5576"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5575"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5576"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1367"><span class='Ref_to_Member'>resno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>&& </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN429"><span class='Ref_to_Proto'>get_const_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5573"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>|| </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5573"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * We must force parens for function-like expressions even if 
         * PRETTY_PAREN is off, since those are the ones in danger of 
         * misparsing. For other expressions we need to force them only if 
         * PRETTY_PAREN is on, since otherwise the expression will output them 
         * itself. (We can't skip the parens.) 
         */ 
</span><a name="LN5609"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>need_paren</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5573"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>) 
</span>                                  <span class='Operator'>|| </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a><span class='Parentheses'>) 
</span>                                  <span class='Operator'>||</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a><span class='Parentheses'>) 
</span>                                  <span class='Operator'>||</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN351"><span class='Ref_to_Struct'>WindowFunc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5609"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5573"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5573"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5609"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5573"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>, </span><span class='String'>")"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN5577"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_rule_sortgroupclause &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Display a GroupingSet 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN5628"></a><span class='Declare_Function'>get_rule_groupingset</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1230"><span class='Ref_to_Struct'>GroupingSet</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>gset</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetlist</span><span class='Delimiter'>, 
</span><a name="LN5629"></a>                     <span class='Keyword'>bool </span><span class='Declare_Parameter'>omit_parens</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5631"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span><a name="LN5632"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5629"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN5633"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>omit_child_parens</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN5634"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sep</span> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5628"><span class='Ref_to_Parameter'>gset</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1233"><span class='Ref_to_Member'>kind</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN1223"><span class='Ref_to_EnumConst'>GROUPING_SET_EMPTY</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5632"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"()"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN1224"><span class='Ref_to_EnumConst'>GROUPING_SET_SIMPLE</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN5629"><span class='Ref_to_Parameter'>omit_parens</span></a> <span class='Operator'>|| </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5628"><span class='Ref_to_Parameter'>gset</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1234"><span class='Ref_to_Member'>content</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5632"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5631"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5628"><span class='Ref_to_Parameter'>gset</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1234"><span class='Ref_to_Member'>content</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN5649"></a>                    <a href="../../../include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a>       <span class='Declare_Local'>ref</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5631"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5632"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5634"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN389"><span class='Ref_to_Proto'>get_rule_sortgroupclause</span></a><span class='Parentheses'>(</span><span class='Keyword'>ref</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5628"><span class='Ref_to_Parameter'>targetlist</span></a><span class='Delimiter'>, 
</span>                                             <span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5629"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN5634"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN5629"><span class='Ref_to_Parameter'>omit_parens</span></a> <span class='Operator'>|| </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5628"><span class='Ref_to_Parameter'>gset</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1234"><span class='Ref_to_Member'>content</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5632"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>")"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN1225"><span class='Ref_to_EnumConst'>GROUPING_SET_ROLLUP</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5632"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ROLLUP("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN1226"><span class='Ref_to_EnumConst'>GROUPING_SET_CUBE</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5632"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CUBE("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN1227"><span class='Ref_to_EnumConst'>GROUPING_SET_SETS</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5632"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"GROUPING SETS ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN5633"><span class='Ref_To_Local'>omit_child_parens</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch gset-&GT;kind &raquo; </span> 
 
    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5631"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5628"><span class='Ref_to_Parameter'>gset</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1234"><span class='Ref_to_Member'>content</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5632"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5634"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN392"><span class='Ref_to_Proto'>get_rule_groupingset</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5631"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5628"><span class='Ref_to_Parameter'>targetlist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5633"><span class='Ref_To_Local'>omit_child_parens</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5629"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5634"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5632"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>")"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_rule_groupingset &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Display an ORDER BY list. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN5688"></a><span class='Declare_Function'>get_rule_orderby</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>orderList</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetList</span><span class='Delimiter'>, 
</span><a name="LN5689"></a>                 <span class='Keyword'>bool </span><span class='Declare_Parameter'>force_colno</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5691"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5689"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN5692"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span><a name="LN5693"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN5692"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5693"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5688"><span class='Ref_to_Parameter'>orderList</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN5698"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>srt</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5693"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN5699"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>sortexpr</span><span class='Delimiter'>; 
</span><a name="LN5700"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>sortcoltype</span><span class='Delimiter'>; 
</span><a name="LN5701"></a>        <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typentry</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5691"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5692"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5699"><span class='Ref_To_Local'>sortexpr</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN389"><span class='Ref_to_Proto'>get_rule_sortgroupclause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5698"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1164"><span class='Ref_to_Member'>tleSortGroupRef</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5688"><span class='Ref_to_Parameter'>targetList</span></a><span class='Delimiter'>, 
</span>                                            <a href="ruleutils.c.html#LN5689"><span class='Ref_to_Parameter'>force_colno</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5689"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5700"><span class='Ref_To_Local'>sortcoltype</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5699"><span class='Ref_To_Local'>sortexpr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* See whether operator is default &LT; or &GT; for datatype */ 
</span>        <a href="ruleutils.c.html#LN5701"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5700"><span class='Ref_To_Local'>sortcoltype</span></a><span class='Delimiter'>, 
</span>                                     <a href="../../../include/utils/typcache.h.html#LN110"><span class='Ref_to_Const'>TYPECACHE_LT_OPR</span></a> <span class='Operator'>| </span><a href="../../../include/utils/typcache.h.html#LN111"><span class='Ref_to_Const'>TYPECACHE_GT_OPR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5698"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN5701"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN54"><span class='Ref_to_Member'>lt_opr</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* ASC is default, so emit nothing for it */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5698"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1167"><span class='Ref_to_Member'>nulls_first</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5691"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NULLS FIRST"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5698"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN5701"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN55"><span class='Ref_to_Member'>gt_opr</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5691"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DESC"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* DESC defaults to NULLS FIRST */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN5698"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1167"><span class='Ref_to_Member'>nulls_first</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5691"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NULLS LAST"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5691"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" USING %s"</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN458"><span class='Ref_to_Proto'>generate_operator_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5698"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1166"><span class='Ref_to_Member'>sortop</span></a><span class='Delimiter'>, 
</span>                                                    <a href="ruleutils.c.html#LN5700"><span class='Ref_To_Local'>sortcoltype</span></a><span class='Delimiter'>, 
</span>                                                    <a href="ruleutils.c.html#LN5700"><span class='Ref_To_Local'>sortcoltype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* be specific to eliminate ambiguity */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5698"><span class='Ref_To_Local'>srt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1167"><span class='Ref_to_Member'>nulls_first</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5691"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NULLS FIRST"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5691"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NULLS LAST"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="ruleutils.c.html#LN5692"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_rule_orderby &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Display a WINDOW clause. 
 * 
 * Note that the windowClause list might contain only anonymous window 
 * specifications, in which case we should print nothing here. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN5746"></a><span class='Declare_Function'>get_rule_windowclause</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5748"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5746"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN5749"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span><a name="LN5750"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN5749"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5750"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5746"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN151"><span class='Ref_to_Member'>windowClause</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN5755"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN1252"><span class='Ref_to_Struct'>WindowClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>wc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1252"><span class='Ref_to_Struct'>WindowClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5750"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5755"><span class='Ref_To_Local'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1255"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* ignore anonymous windows */ 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5749"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5746"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" WINDOW "</span><span class='Delimiter'>, 
</span>                                 <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5748"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5749"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5748"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s AS "</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5755"><span class='Ref_To_Local'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1255"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN397"><span class='Ref_to_Proto'>get_rule_windowspec</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5755"><span class='Ref_To_Local'>wc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5746"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5746"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN5749"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_rule_windowclause &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Display a window definition 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN5778"></a><span class='Declare_Function'>get_rule_windowspec</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1252"><span class='Ref_to_Struct'>WindowClause</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>wc</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetList</span><span class='Delimiter'>, 
</span><a name="LN5779"></a>                    <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5781"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5779"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN5782"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>needspace</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN5783"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span><a name="LN5784"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1256"><span class='Ref_to_Member'>refname</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1256"><span class='Ref_to_Member'>refname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5782"><span class='Ref_To_Local'>needspace</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* partition clauses are always inherited, so only print if no refname */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1257"><span class='Ref_to_Member'>partitionClause</span></a> <span class='Operator'>&& !</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1256"><span class='Ref_to_Member'>refname</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5782"><span class='Ref_To_Local'>needspace</span></a><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"PARTITION BY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5783"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5784"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1257"><span class='Ref_to_Member'>partitionClause</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN5801"></a>            <a href="../../../include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>grp</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1161"><span class='Ref_to_Struct'>SortGroupClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5784"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5783"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN389"><span class='Ref_to_Proto'>get_rule_sortgroupclause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5801"><span class='Ref_To_Local'>grp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1164"><span class='Ref_to_Member'>tleSortGroupRef</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>targetList</span></a><span class='Delimiter'>, 
</span>                                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5779"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN5783"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="ruleutils.c.html#LN5782"><span class='Ref_To_Local'>needspace</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* print ordering clause only if not inherited */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1258"><span class='Ref_to_Member'>orderClause</span></a> <span class='Operator'>&& !</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1263"><span class='Ref_to_Member'>copiedOrder</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5782"><span class='Ref_To_Local'>needspace</span></a><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ORDER BY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN394"><span class='Ref_to_Proto'>get_rule_orderby</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1258"><span class='Ref_to_Member'>orderClause</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>targetList</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5779"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5782"><span class='Ref_To_Local'>needspace</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* framing clause is never inherited, so print unless it's default */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN504"><span class='Ref_to_Const'>FRAMEOPTION_NONDEFAULT</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5782"><span class='Ref_To_Local'>needspace</span></a><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN505"><span class='Ref_to_Const'>FRAMEOPTION_RANGE</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"RANGE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN506"><span class='Ref_to_Const'>FRAMEOPTION_ROWS</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ROWS "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN507"><span class='Ref_to_Const'>FRAMEOPTION_BETWEEN</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"BETWEEN "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN508"><span class='Ref_to_Const'>FRAMEOPTION_START_UNBOUNDED_PRECEDING</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"UNBOUNDED PRECEDING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN512"><span class='Ref_to_Const'>FRAMEOPTION_START_CURRENT_ROW</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT ROW "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN519"><span class='Ref_to_Const'>FRAMEOPTION_START_VALUE</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1260"><span class='Ref_to_Member'>startOffset</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5779"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN514"><span class='Ref_to_Const'>FRAMEOPTION_START_VALUE_PRECEDING</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" PRECEDING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN516"><span class='Ref_to_Const'>FRAMEOPTION_START_VALUE_FOLLOWING</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" FOLLOWING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN507"><span class='Ref_to_Const'>FRAMEOPTION_BETWEEN</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"AND "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN511"><span class='Ref_to_Const'>FRAMEOPTION_END_UNBOUNDED_FOLLOWING</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"UNBOUNDED FOLLOWING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN513"><span class='Ref_to_Const'>FRAMEOPTION_END_CURRENT_ROW</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT ROW "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN521"><span class='Ref_to_Const'>FRAMEOPTION_END_VALUE</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1261"><span class='Ref_to_Member'>endOffset</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5779"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN515"><span class='Ref_to_Const'>FRAMEOPTION_END_VALUE_PRECEDING</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" PRECEDING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5778"><span class='Ref_to_Parameter'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1259"><span class='Ref_to_Member'>frameOptions</span></a> <span class='Operator'>& </span><a href="../../../include/nodes/parsenodes.h.html#LN517"><span class='Ref_to_Const'>FRAMEOPTION_END_VALUE_FOLLOWING</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" FOLLOWING "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if wc-&GT;frameOptions&FRAM... &raquo; </span> 
        <span class='Comment_Multi_Line'>/* we will now have a trailing space; remove it */ 
</span>        <a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if wc-&GT;frameOptions&FRAM... &raquo; </span> 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5781"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_rule_windowspec &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_insert_query_def         - Parse back an INSERT parsetree 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN5879"></a><span class='Declare_Function'>get_insert_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5881"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN5882"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>select_rte</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN5883"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>values_rte</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN5884"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span><a name="LN5885"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span><a name="LN5886"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span><a name="LN5887"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>strippedexprs</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Insert the WITH clause if given */ 
</span>    <a href="ruleutils.c.html#LN372"><span class='Ref_to_Proto'>get_with_clause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it's an INSERT ... SELECT or multi-row VALUES, there will be a 
     * single RTE for the SELECT or VALUES.  Plain VALUES has neither. 
     */ 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5886"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5886"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN923"><span class='Ref_to_EnumConst'>RTE_SUBQUERY</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5882"><span class='Ref_To_Local'>select_rte</span></a><span class='Parentheses'>) 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"too many subquery RTEs in INSERT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN5882"><span class='Ref_To_Local'>select_rte</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN927"><span class='Ref_to_EnumConst'>RTE_VALUES</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5883"><span class='Ref_To_Local'>values_rte</span></a><span class='Parentheses'>) 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"too many values RTEs in INSERT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN5883"><span class='Ref_To_Local'>values_rte</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5882"><span class='Ref_To_Local'>select_rte</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN5883"><span class='Ref_To_Local'>values_rte</span></a><span class='Parentheses'>) 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"both subquery and values RTEs in INSERT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Start the query with INSERT INTO relname 
     */ 
</span>    <a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN119"><span class='Ref_to_Member'>resultRelation</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>+= </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"INSERT INTO %s "</span><span class='Delimiter'>, 
</span>                     <a href="../../../../contrib/dblink/dblink.c.html#LN111"><span class='Ref_to_Proto'>generate_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* INSERT requires AS keyword for target alias */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"AS %s "</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Add the insert-column-names list.  Any indirection decoration needed on 
     * the column names can be inferred from the top targetlist. 
     */ 
</span>    <a href="ruleutils.c.html#LN5887"><span class='Ref_To_Local'>strippedexprs</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN5885"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Parentheses'>) 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5886"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN5945"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5886"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5945"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* ignore junk entries */ 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5885"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN5885"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Put out name of target column; look in the catalogs, not at 
         * tle-&GT;resname, since resname will fail to track RENAME. 
         */ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, 
</span>                        <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN86"><span class='Ref_to_Proto'>get_relid_attribute_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, 
</span>                                                               <a href="ruleutils.c.html#LN5945"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1367"><span class='Ref_to_Member'>resno</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Print any indirection needed (subfields or subscripts), and strip 
         * off the top-level nodes representing the indirection assignments. 
         * Add the stripped expressions to strippedexprs.  (If it's a 
         * single-VALUES statement, the stripped expressions are the VALUES to 
         * print below.  Otherwise they're just Vars and not really 
         * interesting.) 
         */ 
</span>        <a href="ruleutils.c.html#LN5887"><span class='Ref_To_Local'>strippedexprs</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5887"><span class='Ref_To_Local'>strippedexprs</span></a><span class='Delimiter'>, 
</span>                                <a href="ruleutils.c.html#LN449"><span class='Ref_to_Proto'>processIndirection</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5945"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, 
</span>                                                   <a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>override</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>override </span><span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN33"><span class='Ref_to_EnumConst'>OVERRIDING_SYSTEM_VALUE</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"OVERRIDING SYSTEM VALUE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>override </span><span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN32"><span class='Ref_to_EnumConst'>OVERRIDING_USER_VALUE</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"OVERRIDING USER VALUE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5882"><span class='Ref_To_Local'>select_rte</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Add the SELECT */ 
</span>        <a href="ruleutils.c.html#LN368"><span class='Ref_to_Proto'>get_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5882"><span class='Ref_To_Local'>select_rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN954"><span class='Ref_to_Member'>subquery</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                      <a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN111"><span class='Ref_to_Member'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a><span class='Delimiter'>, 
</span>                      <a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5883"><span class='Ref_To_Local'>values_rte</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Add the multi-VALUES expression lists */ 
</span>        <a href="ruleutils.c.html#LN371"><span class='Ref_to_Proto'>get_values_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5883"><span class='Ref_To_Local'>values_rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN996"><span class='Ref_to_Member'>values_lists</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5887"><span class='Ref_To_Local'>strippedexprs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Add the single-VALUES expression list */ 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>"VALUES ("</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN5887"><span class='Ref_To_Local'>strippedexprs</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* No expressions, so it must be DEFAULT VALUES */ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"DEFAULT VALUES"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Add ON CONFLICT if present */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN141"><span class='Ref_to_Member'>onConflict</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6013"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1482"><span class='Ref_to_Struct'>OnConflictExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>confl</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN141"><span class='Ref_to_Member'>onConflict</span></a><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ON CONFLICT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6013"><span class='Ref_To_Local'>confl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1488"><span class='Ref_to_Member'>arbiterElems</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Add the single-VALUES expression list */ 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6013"><span class='Ref_To_Local'>confl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1488"><span class='Ref_to_Member'>arbiterElems</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Add a WHERE clause (for partial indexes) if given */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6013"><span class='Ref_To_Local'>confl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1490"><span class='Ref_to_Member'>arbiterWhere</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN6027"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>save_varprefix</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Force non-prefixing of Vars, since parser assumes that they 
                 * belong to target relation.  WHERE clause does not use 
                 * InferenceElem, so this is separately required. 
                 */ 
</span>                <a href="ruleutils.c.html#LN6027"><span class='Ref_To_Local'>save_varprefix</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE "</span><span class='Delimiter'>, 
</span>                                     <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6013"><span class='Ref_To_Local'>confl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1490"><span class='Ref_to_Member'>arbiterWhere</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6027"><span class='Ref_To_Local'>save_varprefix</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if confl-&GT;arbiterElems &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6013"><span class='Ref_To_Local'>confl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1491"><span class='Ref_to_Member'>constraint</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN6046"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>constraint</span> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN94"><span class='Ref_to_Proto'>get_constraint_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6013"><span class='Ref_To_Local'>confl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1491"><span class='Ref_to_Member'>constraint</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6046"><span class='Ref_To_Local'>constraint</span></a><span class='Parentheses'>) 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for constraint %u"</span><span class='Delimiter'>, 
</span>                     <a href="ruleutils.c.html#LN6013"><span class='Ref_To_Local'>confl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1491"><span class='Ref_to_Member'>constraint</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ON CONSTRAINT %s"</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6046"><span class='Ref_To_Local'>constraint</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6013"><span class='Ref_To_Local'>confl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1485"><span class='Ref_to_Member'>action</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/nodes.h.html#LN800"><span class='Ref_to_EnumConst'>ONCONFLICT_NOTHING</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DO NOTHING"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5881"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DO UPDATE SET "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Deparse targetlist */ 
</span>            <a href="ruleutils.c.html#LN377"><span class='Ref_to_Proto'>get_update_query_targetlist_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6013"><span class='Ref_To_Local'>confl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1494"><span class='Ref_to_Member'>onConflictSet</span></a><span class='Delimiter'>, 
</span>                                            <a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5884"><span class='Ref_To_Local'>rte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Add a WHERE clause if given */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6013"><span class='Ref_To_Local'>confl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1495"><span class='Ref_to_Member'>onConflictWhere</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE "</span><span class='Delimiter'>, 
</span>                                     <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6013"><span class='Ref_To_Local'>confl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1495"><span class='Ref_to_Member'>onConflictWhere</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if query-&GT;onConflict &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Add RETURNING if present */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN143"><span class='Ref_to_Member'>returningList</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" RETURNING"</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN384"><span class='Ref_to_Proto'>get_target_list</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN143"><span class='Ref_to_Member'>returningList</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN5879"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_insert_query_def &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_update_query_def         - Parse back an UPDATE parsetree 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN6091"></a><span class='Declare_Function'>get_update_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6093"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN6094"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Insert the WITH clause if given */ 
</span>    <a href="ruleutils.c.html#LN372"><span class='Ref_to_Proto'>get_with_clause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Start the query with UPDATE relname SET 
     */ 
</span>    <a href="ruleutils.c.html#LN6094"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN119"><span class='Ref_to_Member'>resultRelation</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6094"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6093"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>+= </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6093"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE %s%s"</span><span class='Delimiter'>, 
</span>                     <a href="ruleutils.c.html#LN462"><span class='Ref_to_Macro'>only_marker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6094"><span class='Ref_To_Local'>rte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../../contrib/dblink/dblink.c.html#LN111"><span class='Ref_to_Proto'>generate_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6094"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6094"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6093"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s"</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6094"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6093"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" SET "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Deparse targetlist */ 
</span>    <a href="ruleutils.c.html#LN377"><span class='Ref_to_Proto'>get_update_query_targetlist_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6094"><span class='Ref_To_Local'>rte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Add the FROM clause if needed */ 
</span>    <a href="ruleutils.c.html#LN436"><span class='Ref_to_Proto'>get_from_clause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><span class='String'>" FROM "</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Add a WHERE clause if given */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN135"><span class='Ref_to_Member'>jointree</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1470"><span class='Ref_to_Member'>quals</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE "</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN135"><span class='Ref_to_Member'>jointree</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1470"><span class='Ref_to_Member'>quals</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Add RETURNING if present */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN143"><span class='Ref_to_Member'>returningList</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" RETURNING"</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN384"><span class='Ref_to_Proto'>get_target_list</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN143"><span class='Ref_to_Member'>returningList</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6091"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_update_query_def &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_update_query_targetlist_def          - Parse back an UPDATE targetlist 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN6146"></a><span class='Declare_Function'>get_update_query_targetlist_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>targetList</span><span class='Delimiter'>, 
</span><a name="LN6147"></a>                                <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rte</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6149"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6147"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN6150"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span><a name="LN6151"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>next_ma_cell</span><span class='Delimiter'>; 
</span><a name="LN6152"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>remaining_ma_columns</span><span class='Delimiter'>; 
</span><a name="LN6153"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span><a name="LN6154"></a>    <a href="../../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>cur_ma_sublink</span><span class='Delimiter'>; 
</span><a name="LN6155"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>ma_sublinks</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Prepare to deal with MULTIEXPR assignments: collect the source SubLinks 
     * into a list.  We expect them to appear, in ID order, in resjunk tlist 
     * entries. 
     */ 
</span>    <a href="ruleutils.c.html#LN6155"><span class='Ref_To_Local'>ma_sublinks</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6146"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN125"><span class='Ref_to_Member'>hasSubLinks</span></a><span class='Parentheses'>)</span>     <span class='Comment_Single_Line'>/* else there can't be any */ 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6150"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6146"><span class='Ref_to_Parameter'>targetList</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN6167"></a>            <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6150"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6167"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a> <span class='Operator'>&& </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6167"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span><a name="LN6171"></a>                <a href="../../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>sl</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6167"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6171"><span class='Ref_To_Local'>sl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN632"><span class='Ref_to_Member'>subLinkType</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN623"><span class='Ref_to_EnumConst'>MULTIEXPR_SUBLINK</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN6155"><span class='Ref_To_Local'>ma_sublinks</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6155"><span class='Ref_To_Local'>ma_sublinks</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6171"><span class='Ref_To_Local'>sl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6171"><span class='Ref_To_Local'>sl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN633"><span class='Ref_to_Member'>subLinkId</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6155"><span class='Ref_To_Local'>ma_sublinks</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <a href="ruleutils.c.html#LN6151"><span class='Ref_To_Local'>next_ma_cell</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6155"><span class='Ref_To_Local'>ma_sublinks</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN6154"><span class='Ref_To_Local'>cur_ma_sublink</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN6152"><span class='Ref_To_Local'>remaining_ma_columns</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Add the comma separated list of 'attname = value' */ 
</span>    <a href="ruleutils.c.html#LN6153"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6150"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6146"><span class='Ref_to_Parameter'>targetList</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6189"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6150"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN6190"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6189"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* ignore junk entries */ 
</span> 
        <span class='Comment_Multi_Line'>/* Emit separator (OK whether we're in multiassignment or not) */ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6149"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6153"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN6153"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Check to see if we're starting a multiassignment group: if so, 
         * output a left paren. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6151"><span class='Ref_To_Local'>next_ma_cell</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="ruleutils.c.html#LN6154"><span class='Ref_To_Local'>cur_ma_sublink</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * We must dig down into the expr to see if it's a PARAM_MULTIEXPR 
             * Param.  That could be buried under FieldStores and ArrayRefs 
             * (cf processIndirection()), and underneath those there could be 
             * an implicit type coercion. 
             */ 
</span>            <a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6189"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN6216"></a>                    <a href="../../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fstore</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>; 
</span> 
                    <a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6216"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN767"><span class='Ref_to_Member'>newvals</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN6222"></a>                    <a href="../../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>aref</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6222"><span class='Ref_To_Local'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN408"><span class='Ref_to_Member'>refassgnexpr</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6222"><span class='Ref_To_Local'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN408"><span class='Ref_to_Member'>refassgnexpr</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodeFuncs.h.html#LN35"><span class='Ref_to_Proto'>strip_implicit_coercions</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>&& </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>                <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>paramkind <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN237"><span class='Ref_to_EnumConst'>PARAM_MULTIEXPR</span></a><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="ruleutils.c.html#LN6154"><span class='Ref_To_Local'>cur_ma_sublink</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6151"><span class='Ref_To_Local'>next_ma_cell</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN6151"><span class='Ref_To_Local'>next_ma_cell</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6151"><span class='Ref_To_Local'>next_ma_cell</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN6152"><span class='Ref_To_Local'>remaining_ma_columns</span></a> <span class='Operator'>= </span><a href="../../../include/optimizer/tlist.h.html#LN26"><span class='Ref_to_Proto'>count_nonjunk_tlist_entries</span></a><span class='Parentheses'>(</span> 
                          <span class='Parentheses'>((</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6154"><span class='Ref_To_Local'>cur_ma_sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN636"><span class='Ref_to_Member'>subselect</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>targetList<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(((</span><a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>paramid <span class='Operator'>== 
</span>                       <span class='Parentheses'>((</span><a href="ruleutils.c.html#LN6154"><span class='Ref_To_Local'>cur_ma_sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN633"><span class='Ref_to_Member'>subLinkId</span></a> <span class='Operator'>&LT;&LT; </span><span class='Number'>16</span><span class='Parentheses'>) </span><span class='Operator'>| </span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6149"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if next_ma_cell!=NULL&&c... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * Put out name of target column; look in the catalogs, not at 
         * tle-&GT;resname, since resname will fail to track RENAME. 
         */ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6149"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, 
</span>                        <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN86"><span class='Ref_to_Proto'>get_relid_attribute_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6147"><span class='Ref_to_Parameter'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, 
</span>                                                               <a href="ruleutils.c.html#LN6189"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1367"><span class='Ref_to_Member'>resno</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Print any indirection needed (subfields or subscripts), and strip 
         * off the top-level nodes representing the indirection assignments. 
         */ 
</span>        <a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN449"><span class='Ref_to_Proto'>processIndirection</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6189"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6147"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If we're in a multiassignment, skip printing anything more, unless 
         * this is the last column; in which case, what we print should be the 
         * sublink, not the Param. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6154"><span class='Ref_To_Local'>cur_ma_sublink</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>--</span><a href="ruleutils.c.html#LN6152"><span class='Ref_To_Local'>remaining_ma_columns</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* not the last column of multiassignment */ 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6149"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6154"><span class='Ref_To_Local'>cur_ma_sublink</span></a><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN6154"><span class='Ref_To_Local'>cur_ma_sublink</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6149"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6190"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6147"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_update_query_targetlist_def &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_delete_query_def         - Parse back a DELETE parsetree 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN6286"></a><span class='Declare_Function'>get_delete_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6288"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN6289"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Insert the WITH clause if given */ 
</span>    <a href="ruleutils.c.html#LN372"><span class='Ref_to_Proto'>get_with_clause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Start the query with DELETE FROM relname 
     */ 
</span>    <a href="ruleutils.c.html#LN6289"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN119"><span class='Ref_to_Member'>resultRelation</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6289"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6288"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>+= </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6288"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"DELETE FROM %s%s"</span><span class='Delimiter'>, 
</span>                     <a href="ruleutils.c.html#LN462"><span class='Ref_to_Macro'>only_marker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6289"><span class='Ref_To_Local'>rte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../../contrib/dblink/dblink.c.html#LN111"><span class='Ref_to_Proto'>generate_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6289"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6289"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6288"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s"</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6289"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Add the USING clause if given */ 
</span>    <a href="ruleutils.c.html#LN436"><span class='Ref_to_Proto'>get_from_clause</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><span class='String'>" USING "</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Add a WHERE clause if given */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN135"><span class='Ref_to_Member'>jointree</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1470"><span class='Ref_to_Member'>quals</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" WHERE "</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN135"><span class='Ref_to_Member'>jointree</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1470"><span class='Ref_to_Member'>quals</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Add RETURNING if present */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN143"><span class='Ref_to_Member'>returningList</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" RETURNING"</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN384"><span class='Ref_to_Proto'>get_target_list</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN143"><span class='Ref_to_Member'>returningList</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6286"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_delete_query_def &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_utility_query_def            - Parse back a UTILITY parsetree 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN6337"></a><span class='Declare_Function'>get_utility_query_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6339"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6337"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6337"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN117"><span class='Ref_to_Member'>utilityStmt</span></a> <span class='Operator'>&& </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6337"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN117"><span class='Ref_to_Member'>utilityStmt</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN2857"><span class='Ref_to_Struct'>NotifyStmt</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN6343"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN2857"><span class='Ref_to_Struct'>NotifyStmt</span></a> <span class='Operator'>*</span><span class='Declare_Local'>stmt</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN2857"><span class='Ref_to_Struct'>NotifyStmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6337"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN117"><span class='Ref_to_Member'>utilityStmt</span></a><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6337"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                             <span class='Number'>0</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6339"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NOTIFY %s"</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6343"><span class='Ref_To_Local'>stmt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN2860"><span class='Ref_to_Member'>conditionname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6343"><span class='Ref_To_Local'>stmt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN2861"><span class='Ref_to_Member'>payload</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6339"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN432"><span class='Ref_to_Proto'>simple_quote_literal</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6339"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6343"><span class='Ref_To_Local'>stmt</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN2861"><span class='Ref_to_Member'>payload</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Currently only NOTIFY utility commands can appear in rules */ 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unexpected utility statement type"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_utility_query_def &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Display a Var appropriately. 
 * 
 * In some cases (currently only when recursing into an unnamed join) 
 * the Var's varlevelsup has to be interpreted with respect to a context 
 * above the current one; levelsup indicates the offset. 
 * 
 * If istoplevel is TRUE, the Var is at the top level of a SELECT's 
 * targetlist, which means we need special treatment of whole-row Vars. 
 * Instead of the normal "tab.*", we'll print "tab.*::typename", which is a 
 * dirty hack to prevent "tab.*" from being expanded into multiple columns. 
 * (The parser will strip the useless coercion, so no inefficiency is added in 
 * dump and reload.)  We used to print just "tab" in such cases, but that is 
 * ambiguous and will yield the wrong result if "tab" is also a plain column 
 * name in the query. 
 * 
 * Returns the attname of the Var, or NULL if the Var has no attname (because 
 * it is a whole-row Var or a subplan output reference). 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN6382"></a><span class='Declare_Function'>get_variable</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>levelsup</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>istoplevel</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6384"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN6385"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span><a name="LN6386"></a>    <a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attnum</span><span class='Delimiter'>; 
</span><a name="LN6387"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>netlevelsup</span><span class='Delimiter'>; 
</span><a name="LN6388"></a>    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span><a name="LN6389"></a>    <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Local'>colinfo</span><span class='Delimiter'>; 
</span><a name="LN6390"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>refname</span><span class='Delimiter'>; 
</span><a name="LN6391"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Find appropriate nesting depth */ 
</span>    <a href="ruleutils.c.html#LN6387"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>+ </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6387"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varlevelsup: %d offset %d"</span><span class='Delimiter'>, 
</span>             <a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN6388"><span class='Ref_To_Local'>dpns</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Delimiter'>, 
</span>                                          <a href="ruleutils.c.html#LN6387"><span class='Ref_To_Local'>netlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Try to find the relevant RTE in this rtable.  In a plan tree, it's 
     * likely that varno is OUTER_VAR or INNER_VAR, in which case we must dig 
     * down into the subplans, or INDEX_VAR, which is resolved similarly. Also 
     * find the aliases previously assigned for this RTE. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>&GT;= </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>&LT;= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6388"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6388"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN6390"><span class='Ref_To_Local'>refname</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6388"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN149"><span class='Ref_to_Member'>rtable_names</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN6389"><span class='Ref_To_Local'>colinfo</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN274"><span class='Ref_to_Macro'>deparse_columns_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6388"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN6386"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN403"><span class='Ref_to_Proto'>resolve_special_varno</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                              <a href="ruleutils.c.html#LN401"><span class='Ref_to_Proto'>get_special_variable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * The planner will sometimes emit Vars referencing resjunk elements of a 
     * subquery's target list (this is currently only possible if it chooses 
     * to generate a "physical tlist" for a SubqueryScan or CteScan node). 
     * Although we prefer to print subquery-referencing Vars using the 
     * subquery's alias, that's not possible for resjunk items since they have 
     * no alias.  So in that case, drill down to the subplan and print the 
     * contents of the referenced tlist item.  This works because in a plan 
     * tree, such Vars can only occur in a SubqueryScan or CteScan node, and 
     * we'll have set dpns-&GT;inner_planstate to reference the child plan node. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN923"><span class='Ref_to_EnumConst'>RTE_SUBQUERY</span></a> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN928"><span class='Ref_to_EnumConst'>RTE_CTE</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>        <a href="ruleutils.c.html#LN6386"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&GT; </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN42"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>        <a href="ruleutils.c.html#LN6388"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN6436"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span><a name="LN6437"></a>        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>save_dpns</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN6436"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6388"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN161"><span class='Ref_to_Member'>inner_tlist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6436"><span class='Ref_To_Local'>tle</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid attnum %d for relation \"%s\""</span><span class='Delimiter'>, 
</span>                 <a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6387"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN356"><span class='Ref_to_Proto'>push_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6388"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6388"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6437"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Force parentheses because our caller probably assumed a Var is a 
         * simple expression. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6436"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6384"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6436"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6436"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6384"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN358"><span class='Ref_to_Proto'>pop_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6388"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6437"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if (rte-&GT;rtekind==RTE_SU... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * If it's an unnamed join, look at the expansion of the alias variable. 
     * If it's a simple reference to one of the input vars, then recursively 
     * print the name of that var instead.  When it's not a simple reference, 
     * we have to just print the unqualified join column name.  (This can only 
     * happen with "dangerous" merged columns in a JOIN USING; we took pains 
     * previously to make the unqualified column name unique in such cases.) 
     * 
     * This wouldn't work in decompiling plan trees, because we don't store 
     * joinaliasvars lists after planning; but a plan tree should never 
     * contain a join alias variable. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN924"><span class='Ref_to_EnumConst'>RTE_JOIN</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cannot decompile join alias var in plan tree"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6386"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN6479"></a>            <a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>aliasvar</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN6479"><span class='Ref_To_Local'>aliasvar</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6386"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* we intentionally don't strip implicit coercions here */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6479"><span class='Ref_To_Local'>aliasvar</span></a> <span class='Operator'>&& </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6479"><span class='Ref_To_Local'>aliasvar</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>return</span> <a href="ruleutils.c.html#LN399"><span class='Ref_to_Proto'>get_variable</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6479"><span class='Ref_To_Local'>aliasvar</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>+ </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Delimiter'>, 
</span>                                    <a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>istoplevel</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Unnamed join has no refname.  (Note: since it's unnamed, there is 
         * no way the user could have referenced it to create a whole-row Var 
         * for it.  So we don't have to cover that case below.) 
         */ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6390"><span class='Ref_To_Local'>refname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if rte-&GT;rtekind==RTE_JOI... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6386"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>== </span><a href="../../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN6391"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6386"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Get column name to use from the colinfo struct */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6386"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&GT; </span><a href="ruleutils.c.html#LN6389"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN223"><span class='Ref_to_Member'>num_cols</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid attnum %d for relation \"%s\""</span><span class='Delimiter'>, 
</span>                 <a href="ruleutils.c.html#LN6386"><span class='Ref_To_Local'>attnum</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN6391"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6389"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN6386"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6391"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* dropped column? */ 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"invalid attnum %d for relation \"%s\""</span><span class='Delimiter'>, 
</span>                 <a href="ruleutils.c.html#LN6386"><span class='Ref_To_Local'>attnum</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* System column - name is fixed, get it from the catalog */ 
</span>        <a href="ruleutils.c.html#LN6391"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN47"><span class='Ref_to_Proto'>get_rte_attribute_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6385"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6386"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6390"><span class='Ref_To_Local'>refname</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN6391"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6384"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6390"><span class='Ref_To_Local'>refname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6384"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'.'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6391"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6384"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6391"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6384"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'*'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>istoplevel</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6384"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                             <a href="format_type.c.html#LN111"><span class='Ref_to_Func'>format_type_with_typemod</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN169"><span class='Ref_to_Member'>vartype</span></a><span class='Delimiter'>, 
</span>                                                      <a href="ruleutils.c.html#LN6382"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN170"><span class='Ref_to_Member'>vartypmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN6391"><span class='Ref_To_Local'>attname</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_variable &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Deparse a Var which references OUTER_VAR, INNER_VAR, or INDEX_VAR.  This 
 * routine is actually a callback for get_special_varno, which handles finding 
 * the correct TargetEntry.  We get the expression contained in that 
 * TargetEntry and just need to deparse it, a job we can throw back on 
 * get_rule_expr. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN6544"></a><span class='Declare_Function'>get_special_variable</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>private</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6546"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6544"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Force parentheses because our caller probably assumed a Var is a simple 
     * expression. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6544"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6546"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6544"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6544"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6544"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6546"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Chase through plan references to special varnos (OUTER_VAR, INNER_VAR, 
 * INDEX_VAR) until we find a real Var or some kind of non-Var node; then, 
 * invoke the callback provided. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN6565"></a><span class='Declare_Function'>resolve_special_varno</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>private</span><span class='Delimiter'>, 
</span><a name="LN6566"></a>                      <span class='Keyword'>void </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Parameter'>callback</span><span class='Parentheses'>) (</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Parentheses'>))</span> 
<span class='Delimiter'>{ 
</span><a name="LN6568"></a>    <a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>var</span><span class='Delimiter'>; 
</span><a name="LN6569"></a>    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If it's not a Var, invoke the callback. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6565"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN6566"><span class='Ref_to_Parameter'>callback</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6565"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6565"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Keyword'>private</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Find appropriate nesting depth */ 
</span>    <a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6565"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6565"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Delimiter'>, 
</span>                                          <a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * It's a special RTE, so recurse. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN153"><span class='Ref_to_Const'>OUTER_VAR</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN160"><span class='Ref_to_Member'>outer_tlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6588"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span><a name="LN6589"></a>        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>save_dpns</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN6588"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN160"><span class='Ref_to_Member'>outer_tlist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6588"><span class='Ref_To_Local'>tle</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varattno for OUTER_VAR var: %d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN356"><span class='Ref_to_Proto'>push_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN158"><span class='Ref_to_Member'>outer_planstate</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6589"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN403"><span class='Ref_to_Proto'>resolve_special_varno</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6588"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6565"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Keyword'>private</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6566"><span class='Ref_to_Parameter'>callback</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN358"><span class='Ref_to_Proto'>pop_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6589"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN152"><span class='Ref_to_Const'>INNER_VAR</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN161"><span class='Ref_to_Member'>inner_tlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6602"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span><a name="LN6603"></a>        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>save_dpns</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN6602"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN161"><span class='Ref_to_Member'>inner_tlist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6602"><span class='Ref_To_Local'>tle</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varattno for INNER_VAR var: %d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN356"><span class='Ref_to_Proto'>push_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6603"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN403"><span class='Ref_to_Proto'>resolve_special_varno</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6602"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6565"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Keyword'>private</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6566"><span class='Ref_to_Parameter'>callback</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN358"><span class='Ref_to_Proto'>pop_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6603"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN154"><span class='Ref_to_Const'>INDEX_VAR</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN162"><span class='Ref_to_Member'>index_tlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6616"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN6616"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN162"><span class='Ref_to_Member'>index_tlist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6616"><span class='Ref_To_Local'>tle</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varattno for INDEX_VAR var: %d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN403"><span class='Ref_to_Proto'>resolve_special_varno</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6616"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6565"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Keyword'>private</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6566"><span class='Ref_to_Parameter'>callback</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>&GT; </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6569"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varno: %d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6568"><span class='Ref_To_Local'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Not special.  Just invoke the callback. */ 
</span>    <a href="ruleutils.c.html#LN6566"><span class='Ref_to_Parameter'>callback</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6565"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6565"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Keyword'>private</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end resolve_special_varno &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Get the name of a field of an expression of composite type.  The 
 * expression is usually a Var, but we handle other cases too. 
 * 
 * levelsup is an extra offset to interpret the Var's varlevelsup correctly. 
 * 
 * This is fairly straightforward when the expression has a named composite 
 * type; we need only look up the type in the catalogs.  However, the type 
 * could also be RECORD.  Since no actual table or view column is allowed to 
 * have type RECORD, a Var of type RECORD must refer to a JOIN or FUNCTION RTE 
 * or to a subquery output.  We drill down to find the ultimate defining 
 * expression and attempt to infer the field name from it.  We ereport if we 
 * can't determine the name. 
 * 
 * Similarly, a PARAM of type RECORD has to refer to some expression of 
 * a determinable composite type. 
 */ 
</span><span class='Keyword'>static const char </span><span class='Operator'>* 
</span><a name="LN6650"></a><span class='Declare_Function'>get_name_for_var_field</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>fieldno</span><span class='Delimiter'>, 
</span><a name="LN6651"></a>                       <span class='Keyword'>int </span><span class='Declare_Parameter'>levelsup</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6653"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span><span class='Delimiter'>; 
</span><a name="LN6654"></a>    <a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>attnum</span><span class='Delimiter'>; 
</span><a name="LN6655"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>netlevelsup</span><span class='Delimiter'>; 
</span><a name="LN6656"></a>    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span><a name="LN6657"></a>    <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupleDesc</span><span class='Delimiter'>; 
</span><a name="LN6658"></a>    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it's a RowExpr that was expanded from a whole-row Var, use the 
     * column names attached to it. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN981"><span class='Ref_to_Struct'>RowExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN6666"></a>        <a href="../../../include/nodes/primnodes.h.html#LN981"><span class='Ref_to_Struct'>RowExpr</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>r</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN981"><span class='Ref_to_Struct'>RowExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a> <span class='Operator'>&LT;= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6666"><span class='Ref_To_Local'>r</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN997"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6666"><span class='Ref_To_Local'>r</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN997"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it's a Param of type RECORD, try to find what the Param refers to. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN6677"></a>        <a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>param</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>; 
</span><a name="LN6678"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ancestor_cell</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN406"><span class='Ref_to_Proto'>find_param_referent</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6677"><span class='Ref_To_Local'>param</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6678"><span class='Ref_To_Local'>ancestor_cell</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Found a match, so recurse to decipher the field name */ 
</span><a name="LN6684"></a>            <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>save_dpns</span><span class='Delimiter'>; 
</span><a name="LN6685"></a>            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN360"><span class='Ref_to_Proto'>push_ancestor_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6678"><span class='Ref_To_Local'>ancestor_cell</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6684"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN6685"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6649"><span class='Ref_to_Func'>get_name_for_var_field</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a><span class='Delimiter'>, 
</span>                                            <span class='Number'>0</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN362"><span class='Ref_to_Proto'>pop_ancestor_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6684"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="ruleutils.c.html#LN6685"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it's a Var of type RECORD, we have to find what the Var refers to; 
     * if not, we can use get_expr_result_type. If that fails, we try 
     * lookup_rowtype_tupdesc, which will probably fail too, but will ereport 
     * an acceptable message. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>        <a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN169"><span class='Ref_to_Member'>vartype</span></a> <span class='Operator'>!= </span><a href="../../../include/catalog/pg_type.h.html#LN679"><span class='Ref_to_Const'>RECORDOID</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/funcapi.h.html#LN160"><span class='Ref_to_Proto'>get_expr_result_type</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6657"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Parentheses'>)</span> <span class='Operator'>!= </span><a href="../../../include/funcapi.h.html#LN152"><span class='Ref_to_EnumConst'>TYPEFUNC_COMPOSITE</span></a><span class='Parentheses'>)</span> 
            <a href="ruleutils.c.html#LN6657"><span class='Ref_To_Local'>tupleDesc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN156"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc_copy</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/nodes/nodeFuncs.h.html#LN32"><span class='Ref_to_Proto'>exprTypmod</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6657"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Got the tupdesc, so we can extract the field name */ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a> <span class='Operator'>&GT;= </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a> <span class='Operator'>&LT;= </span><a href="ruleutils.c.html#LN6657"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6657"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Find appropriate nesting depth */ 
</span>    <a href="ruleutils.c.html#LN6655"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>+ </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6655"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varlevelsup: %d offset %d"</span><span class='Delimiter'>, 
</span>             <a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Delimiter'>, 
</span>                                          <a href="ruleutils.c.html#LN6655"><span class='Ref_To_Local'>netlevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Try to find the relevant RTE in this rtable.  In a plan tree, it's 
     * likely that varno is OUTER_VAR or INNER_VAR, in which case we must dig 
     * down into the subplans, or INDEX_VAR, which is resolved similarly. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>&GT;= </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>&LT;= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN148"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN153"><span class='Ref_to_Const'>OUTER_VAR</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN160"><span class='Ref_to_Member'>outer_tlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6733"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span><a name="LN6734"></a>        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>save_dpns</span><span class='Delimiter'>; 
</span><a name="LN6735"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN6733"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN160"><span class='Ref_to_Member'>outer_tlist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6733"><span class='Ref_To_Local'>tle</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varattno for OUTER_VAR var: %d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6655"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN356"><span class='Ref_to_Proto'>push_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN158"><span class='Ref_to_Member'>outer_planstate</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6734"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN6735"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6649"><span class='Ref_to_Func'>get_name_for_var_field</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6733"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a><span class='Delimiter'>, 
</span>                                        <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN358"><span class='Ref_to_Proto'>pop_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6734"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="ruleutils.c.html#LN6735"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN152"><span class='Ref_to_Const'>INNER_VAR</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN161"><span class='Ref_to_Member'>inner_tlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6752"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span><a name="LN6753"></a>        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>save_dpns</span><span class='Delimiter'>; 
</span><a name="LN6754"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN6752"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN161"><span class='Ref_to_Member'>inner_tlist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6752"><span class='Ref_To_Local'>tle</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varattno for INNER_VAR var: %d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6655"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN356"><span class='Ref_to_Proto'>push_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6753"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN6754"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6649"><span class='Ref_to_Func'>get_name_for_var_field</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6752"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a><span class='Delimiter'>, 
</span>                                        <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN358"><span class='Ref_to_Proto'>pop_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6753"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="ruleutils.c.html#LN6754"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN154"><span class='Ref_to_Const'>INDEX_VAR</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN162"><span class='Ref_to_Member'>index_tlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6771"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span><a name="LN6772"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN6771"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN162"><span class='Ref_to_Member'>index_tlist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6771"><span class='Ref_To_Local'>tle</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varattno for INDEX_VAR var: %d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN167"><span class='Ref_to_Member'>varattno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6655"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN6772"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6649"><span class='Ref_to_Func'>get_name_for_var_field</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6771"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a><span class='Delimiter'>, 
</span>                                        <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>return</span> <a href="ruleutils.c.html#LN6772"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varno: %d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN165"><span class='Ref_to_Member'>varno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>== </span><a href="../../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Var is whole-row reference to RTE, so select the right field */ 
</span>        <span class='Control'>return</span> <a href="../../../include/parser/parsetree.h.html#LN47"><span class='Ref_to_Proto'>get_rte_attribute_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * This part has essentially the same logic as the parser's 
     * expandRecordVariable() function, but we are dealing with a different 
     * representation of the input context, and we only need one field name 
     * not a TupleDesc.  Also, we need special cases for finding subquery and 
     * CTE subplans when deparsing Plan trees. 
     */ 
</span>    <a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* default if we can't drill down */ 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN927"><span class='Ref_to_EnumConst'>RTE_VALUES</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN929"><span class='Ref_to_EnumConst'>RTE_NAMEDTUPLESTORE</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * This case should not occur: a column of a table or values list 
             * shouldn't have type RECORD.  Fall through and fail (most 
             * likely) at the bottom. 
             */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN923"><span class='Ref_to_EnumConst'>RTE_SUBQUERY</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* Subselect-in-FROM: examine sub-select's output expr */ 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN954"><span class='Ref_to_Member'>subquery</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN6823"></a>                    <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ste</span> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN954"><span class='Ref_to_Member'>subquery</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN137"><span class='Ref_to_Member'>targetList</span></a><span class='Delimiter'>, 
</span>                                                        <a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6823"><span class='Ref_To_Local'>ste</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="ruleutils.c.html#LN6823"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"subquery %s does not have attribute %d"</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6823"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Recurse into the sub-select to see what its Var 
                         * refers to. We have to build an additional level of 
                         * namespace to keep in step with varlevelsup in the 
                         * subselect. 
                         */ 
</span><a name="LN6838"></a>                        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>mydpns</span><span class='Delimiter'>; 
</span><a name="LN6839"></a>                        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
                        <a href="ruleutils.c.html#LN334"><span class='Ref_to_Proto'>set_deparse_for_query</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6838"><span class='Ref_To_Local'>mydpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN954"><span class='Ref_to_Member'>subquery</span></a><span class='Delimiter'>, 
</span>                                              <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN215"><span class='Ref_to_Proto'>lcons</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6838"><span class='Ref_To_Local'>mydpns</span></a><span class='Delimiter'>, 
</span>                                                    <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <a href="ruleutils.c.html#LN6839"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6649"><span class='Ref_to_Func'>get_name_for_var_field</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a><span class='Delimiter'>, 
</span>                                                        <span class='Number'>0</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a> <span class='Operator'>= 
</span>                            <a href="../../../include/nodes/pg_list.h.html#LN237"><span class='Ref_to_Proto'>list_delete_first</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>return</span> <a href="ruleutils.c.html#LN6839"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(expr,Var) &raquo; </span> 
                    <span class='Comment_Multi_Line'>/* else fall through to inspect the expression */ 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if rte-&GT;subquery &raquo; </span> 
                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* 
                     * We're deparsing a Plan tree so we don't have complete 
                     * RTE entries (in particular, rte-&GT;subquery is NULL). But 
                     * the only place we'd see a Var directly referencing a 
                     * SUBQUERY RTE is in a SubqueryScan plan node, and we can 
                     * look into the child plan's tlist instead. 
                     */ 
</span><a name="LN6866"></a>                    <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span><a name="LN6867"></a>                    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>save_dpns</span><span class='Delimiter'>; 
</span><a name="LN6868"></a>                    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a><span class='Parentheses'>) 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"failed to find plan for subquery %s"</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN6866"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN161"><span class='Ref_to_Member'>inner_tlist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6866"><span class='Ref_To_Local'>tle</span></a><span class='Parentheses'>) 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varattno for subquery var: %d"</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6655"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN356"><span class='Ref_to_Proto'>push_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6867"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="ruleutils.c.html#LN6868"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6649"><span class='Ref_to_Func'>get_name_for_var_field</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6866"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a><span class='Delimiter'>, 
</span>                                                    <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="ruleutils.c.html#LN358"><span class='Ref_to_Proto'>pop_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6867"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <a href="ruleutils.c.html#LN6868"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN924"><span class='Ref_to_EnumConst'>RTE_JOIN</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* Join RTE --- recursively inspect the alias variable */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cannot decompile join alias var in plan tree"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>&LT;= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN975"><span class='Ref_to_Member'>joinaliasvars</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* we intentionally don't strip implicit coercions here */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
                <span class='Control'>return</span> <a href="ruleutils.c.html#LN6649"><span class='Ref_to_Func'>get_name_for_var_field</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a><span class='Delimiter'>, 
</span>                                              <a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN172"><span class='Ref_to_Member'>varlevelsup</span></a> <span class='Operator'>+ </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Delimiter'>, 
</span>                                              <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* else fall through to inspect the expression */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN925"><span class='Ref_to_EnumConst'>RTE_FUNCTION</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN926"><span class='Ref_to_EnumConst'>RTE_TABLEFUNC</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * We couldn't get here unless a function is declared with one of 
             * its result columns as RECORD, which is not allowed. 
             */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN928"><span class='Ref_to_EnumConst'>RTE_CTE</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* CTE reference: examine subquery's output expr */ 
</span>            <span class='Delimiter'>{ 
</span><a name="LN6913"></a>                <a href="../../../include/nodes/parsenodes.h.html#LN1339"><span class='Ref_to_Struct'>CommonTableExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cte</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN6914"></a>                <a href="../../../include/c.h.html#LN364"><span class='Ref_to_Typedef'>Index</span></a>       <span class='Declare_Local'>ctelevelsup</span><span class='Delimiter'>; 
</span><a name="LN6915"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Try to find the referenced CTE using the namespace stack. 
                 */ 
</span>                <a href="ruleutils.c.html#LN6914"><span class='Ref_To_Local'>ctelevelsup</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1002"><span class='Ref_to_Member'>ctelevelsup</span></a> <span class='Operator'>+ </span><a href="ruleutils.c.html#LN6655"><span class='Ref_To_Local'>netlevelsup</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6914"><span class='Ref_To_Local'>ctelevelsup</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Parentheses'>))</span> 
                    <a href="ruleutils.c.html#LN6915"><span class='Ref_To_Local'>lc</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span><a name="LN6925"></a>                    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ctedpns</span><span class='Delimiter'>; 
</span> 
                    <a href="ruleutils.c.html#LN6925"><span class='Ref_To_Local'>ctedpns</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>                        <a href="../../../include/nodes/pg_list.h.html#LN223"><span class='Ref_to_Proto'>list_nth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6914"><span class='Ref_To_Local'>ctelevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6915"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6925"><span class='Ref_To_Local'>ctedpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN151"><span class='Ref_to_Member'>ctes</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="ruleutils.c.html#LN6913"><span class='Ref_To_Local'>cte</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1339"><span class='Ref_to_Struct'>CommonTableExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6915"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6913"><span class='Ref_To_Local'>cte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1342"><span class='Ref_to_Member'>ctename</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1001"><span class='Ref_to_Member'>ctename</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6915"><span class='Ref_To_Local'>lc</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN6938"></a>                    <a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>ctequery</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6913"><span class='Ref_To_Local'>cte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1345"><span class='Ref_to_Member'>ctequery</span></a><span class='Delimiter'>; 
</span><a name="LN6939"></a>                    <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ste</span> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1358"><span class='Ref_to_Macro'>GetCTETargetList</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6913"><span class='Ref_To_Local'>cte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                        <a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6939"><span class='Ref_To_Local'>ste</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| </span><a href="ruleutils.c.html#LN6939"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"subquery %s does not have attribute %d"</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6939"><span class='Ref_To_Local'>ste</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Recurse into the CTE to see what its Var refers to. 
                         * We have to build an additional level of namespace 
                         * to keep in step with varlevelsup in the CTE. 
                         * Furthermore it could be an outer CTE, so we may 
                         * have to delete some levels of namespace. 
                         */ 
</span><a name="LN6955"></a>                        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>save_nslist</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Delimiter'>; 
</span><a name="LN6956"></a>                        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>new_nslist</span><span class='Delimiter'>; 
</span><a name="LN6957"></a>                        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>mydpns</span><span class='Delimiter'>; 
</span><a name="LN6958"></a>                        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
                        <a href="ruleutils.c.html#LN334"><span class='Ref_to_Proto'>set_deparse_for_query</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6957"><span class='Ref_To_Local'>mydpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6938"><span class='Ref_To_Local'>ctequery</span></a><span class='Delimiter'>, 
</span>                                              <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <a href="ruleutils.c.html#LN6956"><span class='Ref_To_Local'>new_nslist</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN269"><span class='Ref_to_Proto'>list_copy_tail</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Delimiter'>, 
</span>                                                    <a href="ruleutils.c.html#LN6914"><span class='Ref_To_Local'>ctelevelsup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN215"><span class='Ref_to_Proto'>lcons</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6957"><span class='Ref_To_Local'>mydpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6956"><span class='Ref_To_Local'>new_nslist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <a href="ruleutils.c.html#LN6958"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6649"><span class='Ref_to_Func'>get_name_for_var_field</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a><span class='Delimiter'>, 
</span>                                                        <span class='Number'>0</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6955"><span class='Ref_To_Local'>save_nslist</span></a><span class='Delimiter'>; 
</span> 
                        <span class='Control'>return</span> <a href="ruleutils.c.html#LN6958"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(expr,Var) &raquo; </span> 
                    <span class='Comment_Multi_Line'>/* else fall through to inspect the expression */ 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if lc!=NULL &raquo; </span> 
                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* 
                     * We're deparsing a Plan tree so we don't have a CTE 
                     * list.  But the only place we'd see a Var directly 
                     * referencing a CTE RTE is in a CteScan plan node, and we 
                     * can look into the subplan's tlist instead. 
                     */ 
</span><a name="LN6984"></a>                    <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span><span class='Delimiter'>; 
</span><a name="LN6985"></a>                    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>save_dpns</span><span class='Delimiter'>; 
</span><a name="LN6986"></a>                    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a><span class='Parentheses'>) 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"failed to find plan for CTE %s"</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN6653"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1023"><span class='Ref_to_Member'>eref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN6984"><span class='Ref_To_Local'>tle</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN69"><span class='Ref_to_Proto'>get_tle_by_resno</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN161"><span class='Ref_to_Member'>inner_tlist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN6984"><span class='Ref_To_Local'>tle</span></a><span class='Parentheses'>) 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus varattno for subquery var: %d"</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN6654"><span class='Ref_To_Local'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6655"><span class='Ref_To_Local'>netlevelsup</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN356"><span class='Ref_to_Proto'>push_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN159"><span class='Ref_to_Member'>inner_planstate</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6985"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="ruleutils.c.html#LN6986"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6649"><span class='Ref_to_Func'>get_name_for_var_field</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN6984"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a><span class='Delimiter'>, 
</span>                                                    <a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>levelsup</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN6651"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="ruleutils.c.html#LN358"><span class='Ref_to_Proto'>pop_child_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6656"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6985"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <a href="ruleutils.c.html#LN6986"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch rte-&GT;rtekind &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * We now have an expression we can't expand any more, so see if 
     * get_expr_result_type() can do anything with it.  If not, pass to 
     * lookup_rowtype_tupdesc() which will probably fail, but will give an 
     * appropriate error message while failing. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/funcapi.h.html#LN160"><span class='Ref_to_Proto'>get_expr_result_type</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN6657"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../include/funcapi.h.html#LN152"><span class='Ref_to_EnumConst'>TYPEFUNC_COMPOSITE</span></a><span class='Parentheses'>)</span> 
        <a href="ruleutils.c.html#LN6657"><span class='Ref_To_Local'>tupleDesc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN156"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc_copy</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                <a href="../../../include/nodes/nodeFuncs.h.html#LN32"><span class='Ref_to_Proto'>exprTypmod</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6658"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6657"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Got the tupdesc, so we can extract the field name */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a> <span class='Operator'>&GT;= </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a> <span class='Operator'>&LT;= </span><a href="ruleutils.c.html#LN6657"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN6657"><span class='Ref_To_Local'>tupleDesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN6650"><span class='Ref_to_Parameter'>fieldno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_name_for_var_field &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Try to find the referenced expression for a PARAM_EXEC Param that might 
 * reference a parameter supplied by an upper NestLoop or SubPlan plan node. 
 * 
 * If successful, return the expression and set *dpns_p and *ancestor_cell_p 
 * appropriately for calling push_ancestor_plan().  If no referent can be 
 * found, return NULL. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>* 
</span><a name="LN7032"></a><span class='Declare_Function'>find_param_referent</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>param</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN7033"></a>                    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>dpns_p</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>ancestor_cell_p</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Initialize output parameters to prevent compiler warnings */ 
</span>    <span class='Operator'>*</span><a href="ruleutils.c.html#LN7033"><span class='Ref_to_Parameter'>dpns_p</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="ruleutils.c.html#LN7033"><span class='Ref_to_Parameter'>ancestor_cell_p</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it's a PARAM_EXEC parameter, look for a matching NestLoopParam or 
     * SubPlan argument.  This will necessarily be in some ancestor of the 
     * current expression's PlanState. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7032"><span class='Ref_to_Parameter'>param</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN243"><span class='Ref_to_Member'>paramkind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN235"><span class='Ref_to_EnumConst'>PARAM_EXEC</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN7046"></a>        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span><a name="LN7047"></a>        <a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>child_ps</span><span class='Delimiter'>; 
</span><a name="LN7048"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>in_same_plan_level</span><span class='Delimiter'>; 
</span><a name="LN7049"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN7046"><span class='Ref_To_Local'>dpns</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7032"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN7047"><span class='Ref_To_Local'>child_ps</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7046"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN156"><span class='Ref_to_Member'>planstate</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN7048"><span class='Ref_To_Local'>in_same_plan_level</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7049"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7046"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN157"><span class='Ref_to_Member'>ancestors</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN7057"></a>            <a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>ps</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/execnodes.h.html#LN808"><span class='Ref_to_Struct'>PlanState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7049"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN7058"></a>            <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc2</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * NestLoops transmit params to their inner child only; also, once 
             * we've crawled up out of a subplan, this couldn't possibly be 
             * the right match. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7057"><span class='Ref_To_Local'>ps</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/execnodes.h.html#LN1562"><span class='Ref_to_Struct'>NestLoopState</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                <a href="ruleutils.c.html#LN7047"><span class='Ref_To_Local'>child_ps</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/execnodes.h.html#LN853"><span class='Ref_to_Macro'>innerPlanState</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7057"><span class='Ref_To_Local'>ps</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                <a href="ruleutils.c.html#LN7048"><span class='Ref_To_Local'>in_same_plan_level</span></a><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span><a name="LN7069"></a>                <a href="../../../include/nodes/plannodes.h.html#LN684"><span class='Ref_to_Struct'>NestLoop</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>nl</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/plannodes.h.html#LN684"><span class='Ref_to_Struct'>NestLoop</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7057"><span class='Ref_To_Local'>ps</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN812"><span class='Ref_to_Member'>plan</span></a><span class='Delimiter'>; 
</span> 
                <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7058"><span class='Ref_To_Local'>lc2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7069"><span class='Ref_To_Local'>nl</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/plannodes.h.html#LN687"><span class='Ref_to_Member'>nestParams</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN7073"></a>                    <a href="../../../include/nodes/plannodes.h.html#LN690"><span class='Ref_to_Struct'>NestLoopParam</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nlp</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/plannodes.h.html#LN690"><span class='Ref_to_Struct'>NestLoopParam</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7058"><span class='Ref_To_Local'>lc2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7073"><span class='Ref_To_Local'>nlp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/plannodes.h.html#LN693"><span class='Ref_to_Member'>paramno</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN7032"><span class='Ref_to_Parameter'>param</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN244"><span class='Ref_to_Member'>paramid</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* Found a match, so return it */ 
</span>                        <span class='Operator'>*</span><a href="ruleutils.c.html#LN7033"><span class='Ref_to_Parameter'>dpns_p</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7046"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>; 
</span>                        <span class='Operator'>*</span><a href="ruleutils.c.html#LN7033"><span class='Ref_to_Parameter'>ancestor_cell_p</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7049"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7073"><span class='Ref_To_Local'>nlp</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/plannodes.h.html#LN694"><span class='Ref_to_Member'>paramval</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Check to see if we're crawling up from a subplan. 
             */ 
</span>            <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7058"><span class='Ref_To_Local'>lc2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7057"><span class='Ref_To_Local'>ps</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN831"><span class='Ref_to_Member'>subPlan</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7090"></a>                <a href="../../../include/nodes/execnodes.h.html#LN731"><span class='Ref_to_Struct'>SubPlanState</span></a> <span class='Operator'>*</span><span class='Declare_Local'>sstate</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/execnodes.h.html#LN731"><span class='Ref_to_Struct'>SubPlanState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7058"><span class='Ref_To_Local'>lc2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN7091"></a>                <a href="../../../include/nodes/primnodes.h.html#LN678"><span class='Ref_to_Struct'>SubPlan</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>subplan</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7090"><span class='Ref_To_Local'>sstate</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN734"><span class='Ref_to_Member'>subplan</span></a><span class='Delimiter'>; 
</span><a name="LN7092"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc3</span><span class='Delimiter'>; 
</span><a name="LN7093"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc4</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7047"><span class='Ref_To_Local'>child_ps</span></a> <span class='Operator'>!= </span><a href="ruleutils.c.html#LN7090"><span class='Ref_To_Local'>sstate</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN735"><span class='Ref_to_Member'>planstate</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Matched subplan, so check its arguments */ 
</span>                <a href="../../../include/nodes/pg_list.h.html#LN179"><span class='Ref_to_Macro'>forboth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7092"><span class='Ref_To_Local'>lc3</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7091"><span class='Ref_To_Local'>subplan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN707"><span class='Ref_to_Member'>parParam</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7093"><span class='Ref_To_Local'>lc4</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7091"><span class='Ref_To_Local'>subplan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN708"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN7101"></a>                    <span class='Keyword'>int</span>         <span class='Declare_Local'>paramid</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7092"><span class='Ref_To_Local'>lc3</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN7102"></a>                    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7093"><span class='Ref_To_Local'>lc4</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7101"><span class='Ref_To_Local'>paramid</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN7032"><span class='Ref_to_Parameter'>param</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN244"><span class='Ref_to_Member'>paramid</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* Found a match, so return it */ 
</span>                        <span class='Operator'>*</span><a href="ruleutils.c.html#LN7033"><span class='Ref_to_Parameter'>dpns_p</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7046"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>; 
</span>                        <span class='Operator'>*</span><a href="ruleutils.c.html#LN7033"><span class='Ref_to_Parameter'>ancestor_cell_p</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7049"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>return</span> <a href="ruleutils.c.html#LN7102"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* Keep looking, but we are emerging from a subplan. */ 
</span>                <a href="ruleutils.c.html#LN7048"><span class='Ref_To_Local'>in_same_plan_level</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Likewise check to see if we're emerging from an initplan. 
             * Initplans never have any parParams, so no need to search that 
             * list, but we need to know if we should reset 
             * in_same_plan_level. 
             */ 
</span>            <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7058"><span class='Ref_To_Local'>lc2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7057"><span class='Ref_To_Local'>ps</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN829"><span class='Ref_to_Member'>initPlan</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7126"></a>                <a href="../../../include/nodes/execnodes.h.html#LN731"><span class='Ref_to_Struct'>SubPlanState</span></a> <span class='Operator'>*</span><span class='Declare_Local'>sstate</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/execnodes.h.html#LN731"><span class='Ref_to_Struct'>SubPlanState</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7058"><span class='Ref_To_Local'>lc2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7047"><span class='Ref_To_Local'>child_ps</span></a> <span class='Operator'>!= </span><a href="ruleutils.c.html#LN7126"><span class='Ref_To_Local'>sstate</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN735"><span class='Ref_to_Member'>planstate</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* No parameters to be had here. */ 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7126"><span class='Ref_To_Local'>sstate</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/execnodes.h.html#LN734"><span class='Ref_to_Member'>subplan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN707"><span class='Ref_to_Member'>parParam</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Keep looking, but we are emerging from an initplan. */ 
</span>                <a href="ruleutils.c.html#LN7048"><span class='Ref_To_Local'>in_same_plan_level</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* No luck, crawl up to next ancestor */ 
</span>            <a href="ruleutils.c.html#LN7047"><span class='Ref_To_Local'>child_ps</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7057"><span class='Ref_To_Local'>ps</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if param-&GT;paramkind==PAR... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* No referent found */ 
</span>    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end find_param_referent &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Display a Param appropriately. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN7152"></a><span class='Declare_Function'>get_parameter</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>param</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7154"></a>    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span><a name="LN7155"></a>    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dpns</span><span class='Delimiter'>; 
</span><a name="LN7156"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ancestor_cell</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it's a PARAM_EXEC parameter, try to locate the expression from which 
     * the parameter was computed.  Note that failing to find a referent isn't 
     * an error, since the Param might well be a subplan output rather than an 
     * input. 
     */ 
</span>    <a href="ruleutils.c.html#LN7154"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN406"><span class='Ref_to_Proto'>find_param_referent</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7152"><span class='Ref_to_Parameter'>param</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7152"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN7155"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN7156"><span class='Ref_To_Local'>ancestor_cell</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7154"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Found a match, so print it */ 
</span><a name="LN7168"></a>        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Declare_Local'>save_dpns</span><span class='Delimiter'>; 
</span><a name="LN7169"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>save_varprefix</span><span class='Delimiter'>; 
</span><a name="LN7170"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>need_paren</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Switch attention to the ancestor plan node */ 
</span>        <a href="ruleutils.c.html#LN360"><span class='Ref_to_Proto'>push_ancestor_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7155"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7156"><span class='Ref_To_Local'>ancestor_cell</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN7168"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Force prefixing of Vars, since they won't belong to the relation 
         * being scanned in the original plan node. 
         */ 
</span>        <a href="ruleutils.c.html#LN7169"><span class='Ref_To_Local'>save_varprefix</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7152"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN7152"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * A Param's expansion is typically a Var, Aggref, or upper-level 
         * Param, which wouldn't need extra parentheses.  Otherwise, insert 
         * parens to ensure the expression looks atomic. 
         */ 
</span>        <a href="ruleutils.c.html#LN7170"><span class='Ref_To_Local'>need_paren</span></a> <span class='Operator'>= !</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7154"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>                       <a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7154"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>                       <a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7154"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7170"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7152"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7154"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7152"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7170"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7152"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN7152"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7169"><span class='Ref_To_Local'>save_varprefix</span></a><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN362"><span class='Ref_to_Proto'>pop_ancestor_plan</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7155"><span class='Ref_To_Local'>dpns</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN7168"><span class='Ref_To_Local'>save_dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if expr &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Not PARAM_EXEC, or couldn't find referent: just print $N. 
     */ 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7152"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"$%d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7152"><span class='Ref_to_Parameter'>param</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN244"><span class='Ref_to_Member'>paramid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_parameter &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_simple_binary_op_name 
 * 
 * helper function for isSimpleNode 
 * will return single char binary operator name, or NULL if it's not 
 */ 
</span><span class='Keyword'>static const char </span><span class='Operator'>* 
</span><a name="LN7218"></a><span class='Declare_Function'>get_simple_binary_op_name</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7220"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>args</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7218"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7220"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>2</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* binary operator */ 
</span><a name="LN7225"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7220"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN7226"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7220"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN7227"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>op</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN7227"><span class='Ref_To_Local'>op</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN458"><span class='Ref_to_Proto'>generate_operator_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7218"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN494"><span class='Ref_to_Member'>opno</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7225"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7226"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7227"><span class='Ref_To_Local'>op</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <a href="ruleutils.c.html#LN7227"><span class='Ref_To_Local'>op</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * isSimpleNode - check if given node is simple (doesn't need parenthesizing) 
 * 
 *  true   : simple in the context of parent node's type 
 *  false  : not simple 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN7244"></a><span class='Declare_Function'>isSimpleNode</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parentNode</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>prettyFlags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN145"><span class='Ref_to_EnumConst'>T_Var</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN146"><span class='Ref_to_EnumConst'>T_Const</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN147"><span class='Ref_to_EnumConst'>T_Param</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN182"><span class='Ref_to_EnumConst'>T_CoerceToDomainValue</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN183"><span class='Ref_to_EnumConst'>T_SetToDefault</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN184"><span class='Ref_to_EnumConst'>T_CurrentOfExpr</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* single words: always simple */ 
</span>            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN151"><span class='Ref_to_EnumConst'>T_ArrayRef</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN172"><span class='Ref_to_EnumConst'>T_ArrayExpr</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN173"><span class='Ref_to_EnumConst'>T_RowExpr</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN175"><span class='Ref_to_EnumConst'>T_CoalesceExpr</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN176"><span class='Ref_to_EnumConst'>T_MinMaxExpr</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN177"><span class='Ref_to_EnumConst'>T_SQLValueFunction</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN178"><span class='Ref_to_EnumConst'>T_XmlExpr</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN156"><span class='Ref_to_EnumConst'>T_NullIfExpr</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN148"><span class='Ref_to_EnumConst'>T_Aggref</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN150"><span class='Ref_to_EnumConst'>T_WindowFunc</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN152"><span class='Ref_to_EnumConst'>T_FuncExpr</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* function-like: name(..) or name[..] */ 
</span>            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* CASE keywords act as parentheses */ 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN169"><span class='Ref_to_EnumConst'>T_CaseExpr</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN162"><span class='Ref_to_EnumConst'>T_FieldSelect</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * appears simple since . has top precedence, unless parent is 
             * T_FieldSelect itself! 
             */ 
</span>            <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN737"><span class='Ref_to_Struct'>FieldSelect</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Boolean'>false </span><span class='Operator'>: </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN163"><span class='Ref_to_EnumConst'>T_FieldStore</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * treat like FieldSelect (probably doesn't matter) 
             */ 
</span>            <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Boolean'>false </span><span class='Operator'>: </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN181"><span class='Ref_to_EnumConst'>T_CoerceToDomain</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* maybe simple, check args */ 
</span>            <span class='Control'>return</span> <a href="ruleutils.c.html#LN410"><span class='Ref_to_Proto'>isSimpleNode</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN1215"><span class='Ref_to_Struct'>CoerceToDomain</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>arg<span class='Delimiter'>, 
</span>                                <a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN164"><span class='Ref_to_EnumConst'>T_RelabelType</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="ruleutils.c.html#LN410"><span class='Ref_to_Proto'>isSimpleNode</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>arg<span class='Delimiter'>, 
</span>                                <a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN165"><span class='Ref_to_EnumConst'>T_CoerceViaIO</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="ruleutils.c.html#LN410"><span class='Ref_to_Proto'>isSimpleNode</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN806"><span class='Ref_to_Struct'>CoerceViaIO</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>arg<span class='Delimiter'>, 
</span>                                <a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN166"><span class='Ref_to_EnumConst'>T_ArrayCoerceExpr</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="ruleutils.c.html#LN410"><span class='Ref_to_Proto'>isSimpleNode</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN829"><span class='Ref_to_Struct'>ArrayCoerceExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>arg<span class='Delimiter'>, 
</span>                                <a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN167"><span class='Ref_to_EnumConst'>T_ConvertRowtypeExpr</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <a href="ruleutils.c.html#LN410"><span class='Ref_to_Proto'>isSimpleNode</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN854"><span class='Ref_to_Struct'>ConvertRowtypeExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>arg<span class='Delimiter'>, 
</span>                                <a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>prettyFlags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN154"><span class='Ref_to_EnumConst'>T_OpExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* depends on parent node type; needs further checking */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>prettyFlags</span></a> <span class='Operator'>& </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a> <span class='Operator'>&& </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span><a name="LN7315"></a>                    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>op</span><span class='Delimiter'>; 
</span><a name="LN7316"></a>                    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>parentOp</span><span class='Delimiter'>; 
</span><a name="LN7317"></a>                    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_lopriop</span><span class='Delimiter'>; 
</span><a name="LN7318"></a>                    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_hipriop</span><span class='Delimiter'>; 
</span><a name="LN7319"></a>                    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_lopriparent</span><span class='Delimiter'>; 
</span><a name="LN7320"></a>                    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_hipriparent</span><span class='Delimiter'>; 
</span> 
                    <a href="ruleutils.c.html#LN7315"><span class='Ref_To_Local'>op</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN409"><span class='Ref_to_Proto'>get_simple_binary_op_name</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN7315"><span class='Ref_To_Local'>op</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* We know only the basic operators + - and * / % */ 
</span>                    <a href="ruleutils.c.html#LN7317"><span class='Ref_To_Local'>is_lopriop</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strchr<span class='Parentheses'>(</span><span class='String'>"+-"</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="ruleutils.c.html#LN7315"><span class='Ref_To_Local'>op</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN7318"><span class='Ref_To_Local'>is_hipriop</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strchr<span class='Parentheses'>(</span><span class='String'>"*/%"</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="ruleutils.c.html#LN7315"><span class='Ref_To_Local'>op</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7317"><span class='Ref_To_Local'>is_lopriop</span></a> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN7318"><span class='Ref_To_Local'>is_hipriop</span></a><span class='Parentheses'>))</span> 
                        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                    <a href="ruleutils.c.html#LN7316"><span class='Ref_To_Local'>parentOp</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN409"><span class='Ref_to_Proto'>get_simple_binary_op_name</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN7316"><span class='Ref_To_Local'>parentOp</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                    <a href="ruleutils.c.html#LN7319"><span class='Ref_To_Local'>is_lopriparent</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strchr<span class='Parentheses'>(</span><span class='String'>"+-"</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="ruleutils.c.html#LN7316"><span class='Ref_To_Local'>parentOp</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN7320"><span class='Ref_To_Local'>is_hipriparent</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strchr<span class='Parentheses'>(</span><span class='String'>"*/%"</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="ruleutils.c.html#LN7316"><span class='Ref_To_Local'>parentOp</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7319"><span class='Ref_To_Local'>is_lopriparent</span></a> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN7320"><span class='Ref_To_Local'>is_hipriparent</span></a><span class='Parentheses'>))</span> 
                        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7318"><span class='Ref_To_Local'>is_hipriop</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN7319"><span class='Ref_To_Local'>is_lopriparent</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* op binds tighter than parent */ 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7317"><span class='Ref_To_Local'>is_lopriop</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN7320"><span class='Ref_To_Local'>is_hipriparent</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Operators are same priority --- can skip parens only if 
                     * we have (a - b) - c, not a - (b - c). 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>== </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(((</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>args<span class='Parentheses'>))</span> 
                        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if prettyFlags&PRETTYFLA... &raquo; </span> 
                <span class='Comment_Multi_Line'>/* else do the same stuff as for T_SubLink et al. */ 
</span>                <span class='Comment_Multi_Line'>/* FALL THROUGH */ 
</span>            <span class='Delimiter'>} 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN159"><span class='Ref_to_EnumConst'>T_SubLink</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN179"><span class='Ref_to_EnumConst'>T_NullTest</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN180"><span class='Ref_to_EnumConst'>T_BooleanTest</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN155"><span class='Ref_to_EnumConst'>T_DistinctExpr</span></a><span class='Operator'>: 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN152"><span class='Ref_to_EnumConst'>T_FuncExpr</span></a><span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* special handling for casts */ 
</span><a name="LN7369"></a>                        <a href="../../../include/nodes/primnodes.h.html#LN434"><span class='Ref_to_Enum'>CoercionForm</span></a> <span class='Declare_Local'>type</span> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>funcformat<span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7369"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN437"><span class='Ref_to_EnumConst'>COERCE_EXPLICIT_CAST</span></a> <span class='Operator'>|| 
</span>                            <a href="ruleutils.c.html#LN7369"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a><span class='Parentheses'>) 
</span>                            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* own parentheses */ 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN158"><span class='Ref_to_EnumConst'>T_BoolExpr</span></a><span class='Operator'>:</span>        <span class='Comment_Single_Line'>/* lower precedence */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN151"><span class='Ref_to_EnumConst'>T_ArrayRef</span></a><span class='Operator'>:</span>        <span class='Comment_Single_Line'>/* other separators */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN172"><span class='Ref_to_EnumConst'>T_ArrayExpr</span></a><span class='Operator'>:</span>       <span class='Comment_Single_Line'>/* other separators */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN173"><span class='Ref_to_EnumConst'>T_RowExpr</span></a><span class='Operator'>: </span><span class='Comment_Single_Line'>/* other separators */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN175"><span class='Ref_to_EnumConst'>T_CoalesceExpr</span></a><span class='Operator'>:</span>    <span class='Comment_Single_Line'>/* own parentheses */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN176"><span class='Ref_to_EnumConst'>T_MinMaxExpr</span></a><span class='Operator'>:</span>      <span class='Comment_Single_Line'>/* own parentheses */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN178"><span class='Ref_to_EnumConst'>T_XmlExpr</span></a><span class='Operator'>: </span><span class='Comment_Single_Line'>/* own parentheses */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN156"><span class='Ref_to_EnumConst'>T_NullIfExpr</span></a><span class='Operator'>:</span>      <span class='Comment_Single_Line'>/* other separators */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN148"><span class='Ref_to_EnumConst'>T_Aggref</span></a><span class='Operator'>:</span>  <span class='Comment_Single_Line'>/* own parentheses */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN150"><span class='Ref_to_EnumConst'>T_WindowFunc</span></a><span class='Operator'>:</span>      <span class='Comment_Single_Line'>/* own parentheses */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN169"><span class='Ref_to_EnumConst'>T_CaseExpr</span></a><span class='Operator'>:</span>        <span class='Comment_Single_Line'>/* other separators */ 
</span>                    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch nodeTag(parentNode) &raquo; </span> 
 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN158"><span class='Ref_to_EnumConst'>T_BoolExpr</span></a><span class='Operator'>: 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN158"><span class='Ref_to_EnumConst'>T_BoolExpr</span></a><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>prettyFlags</span></a> <span class='Operator'>& </span><a href="ruleutils.c.html#LN88"><span class='Ref_to_Const'>PRETTYFLAG_PAREN</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span><a name="LN7398"></a>                        <a href="../../../include/nodes/primnodes.h.html#LN552"><span class='Ref_to_Enum'>BoolExprType</span></a> <span class='Declare_Local'>type</span><span class='Delimiter'>; 
</span><a name="LN7399"></a>                        <a href="../../../include/nodes/primnodes.h.html#LN552"><span class='Ref_to_Enum'>BoolExprType</span></a> <span class='Declare_Local'>parentType</span><span class='Delimiter'>; 
</span> 
                        <a href="ruleutils.c.html#LN7398"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>boolop<span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN7399"><span class='Ref_To_Local'>parentType</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>boolop<span class='Delimiter'>; 
</span>                        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7398"><span class='Ref_To_Local'>type</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>NOT_EXPR</span></a><span class='Operator'>: 
</span>                            <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>AND_EXPR</span></a><span class='Operator'>: 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7399"><span class='Ref_To_Local'>parentType</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>AND_EXPR</span></a> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN7399"><span class='Ref_To_Local'>parentType</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>OR_EXPR</span></a><span class='Parentheses'>) 
</span>                                    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                                <span class='Control'>break</span><span class='Delimiter'>; 
</span>                            <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>OR_EXPR</span></a><span class='Operator'>: 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7399"><span class='Ref_To_Local'>parentType</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>OR_EXPR</span></a><span class='Parentheses'>) 
</span>                                    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                                <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if prettyFlags&PRETTYFLA... &raquo; </span> 
                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN152"><span class='Ref_to_EnumConst'>T_FuncExpr</span></a><span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* special handling for casts */ 
</span><a name="LN7420"></a>                        <a href="../../../include/nodes/primnodes.h.html#LN434"><span class='Ref_to_Enum'>CoercionForm</span></a> <span class='Declare_Local'>type</span> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7244"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>funcformat<span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7420"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN437"><span class='Ref_to_EnumConst'>COERCE_EXPLICIT_CAST</span></a> <span class='Operator'>|| 
</span>                            <a href="ruleutils.c.html#LN7420"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a><span class='Parentheses'>) 
</span>                            <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* own parentheses */ 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN151"><span class='Ref_to_EnumConst'>T_ArrayRef</span></a><span class='Operator'>:</span>        <span class='Comment_Single_Line'>/* other separators */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN172"><span class='Ref_to_EnumConst'>T_ArrayExpr</span></a><span class='Operator'>:</span>       <span class='Comment_Single_Line'>/* other separators */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN173"><span class='Ref_to_EnumConst'>T_RowExpr</span></a><span class='Operator'>: </span><span class='Comment_Single_Line'>/* other separators */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN175"><span class='Ref_to_EnumConst'>T_CoalesceExpr</span></a><span class='Operator'>:</span>    <span class='Comment_Single_Line'>/* own parentheses */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN176"><span class='Ref_to_EnumConst'>T_MinMaxExpr</span></a><span class='Operator'>:</span>      <span class='Comment_Single_Line'>/* own parentheses */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN178"><span class='Ref_to_EnumConst'>T_XmlExpr</span></a><span class='Operator'>: </span><span class='Comment_Single_Line'>/* own parentheses */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN156"><span class='Ref_to_EnumConst'>T_NullIfExpr</span></a><span class='Operator'>:</span>      <span class='Comment_Single_Line'>/* other separators */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN148"><span class='Ref_to_EnumConst'>T_Aggref</span></a><span class='Operator'>:</span>  <span class='Comment_Single_Line'>/* own parentheses */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN150"><span class='Ref_to_EnumConst'>T_WindowFunc</span></a><span class='Operator'>:</span>      <span class='Comment_Single_Line'>/* own parentheses */ 
</span>                <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN169"><span class='Ref_to_EnumConst'>T_CaseExpr</span></a><span class='Operator'>:</span>        <span class='Comment_Single_Line'>/* other separators */ 
</span>                    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch nodeTag(parentNode) &raquo; </span> 
 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch nodeTag(node) &raquo; </span> 
    <span class='Comment_Multi_Line'>/* those we don't know: in dubio complexo */ 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end isSimpleNode &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * appendContextKeyword - append a keyword to buffer 
 * 
 * If prettyPrint is enabled, perform a line break, and adjust indentation. 
 * Otherwise, just append the keyword. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN7457"></a><span class='Declare_Function'>appendContextKeyword</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, 
</span><a name="LN7458"></a>                     <span class='Keyword'>int </span><span class='Declare_Parameter'>indentBefore</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>indentAfter</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>indentPlus</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7460"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7457"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7457"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN7464"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>indentAmount</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN7457"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>+= </span><a href="ruleutils.c.html#LN7458"><span class='Ref_to_Parameter'>indentBefore</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* remove any trailing spaces currently in the buffer ... */ 
</span>        <a href="ruleutils.c.html#LN413"><span class='Ref_to_Proto'>removeStringInfoSpaces</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7460"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* ... then add a newline and some spaces */ 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7460"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7457"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN85"><span class='Ref_to_Const'>PRETTYINDENT_LIMIT</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN7464"><span class='Ref_To_Local'>indentAmount</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7457"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>+ </span><a href="ruleutils.c.html#LN7458"><span class='Ref_to_Parameter'>indentPlus</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * If we're indented more than PRETTYINDENT_LIMIT characters, try 
             * to conserve horizontal space by reducing the per-level 
             * indentation.  For best results the scale factor here should 
             * divide all the indent amounts that get added to indentLevel 
             * (PRETTYINDENT_STD, etc).  It's important that the indentation 
             * not grow unboundedly, else deeply-nested trees use O(N^2) 
             * whitespace; so we also wrap modulo PRETTYINDENT_LIMIT. 
             */ 
</span>            <a href="ruleutils.c.html#LN7464"><span class='Ref_To_Local'>indentAmount</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN85"><span class='Ref_to_Const'>PRETTYINDENT_LIMIT</span></a> <span class='Operator'>+ 
</span>                <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7457"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>- </span><a href="ruleutils.c.html#LN85"><span class='Ref_to_Const'>PRETTYINDENT_LIMIT</span></a><span class='Parentheses'>) </span><span class='Operator'>/ 
</span>                <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a> <span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN7464"><span class='Ref_To_Local'>indentAmount</span></a> <span class='Operator'>%= </span><a href="ruleutils.c.html#LN85"><span class='Ref_to_Const'>PRETTYINDENT_LIMIT</span></a><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* scale/wrap logic affects indentLevel, but not indentPlus */ 
</span>            <a href="ruleutils.c.html#LN7464"><span class='Ref_To_Local'>indentAmount</span></a> <span class='Operator'>+= </span><a href="ruleutils.c.html#LN7458"><span class='Ref_to_Parameter'>indentPlus</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../../include/lib/stringinfo.h.html#LN135"><span class='Ref_to_Proto'>appendStringInfoSpaces</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7460"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7464"><span class='Ref_To_Local'>indentAmount</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7460"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7457"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN7457"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>+= </span><a href="ruleutils.c.html#LN7458"><span class='Ref_to_Parameter'>indentAfter</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7457"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN7457"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if PRETTY_INDENT(context... &raquo; </span> 
    <span class='Control'>else</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7460"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7457"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end appendContextKeyword &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * removeStringInfoSpaces - delete trailing spaces from a buffer. 
 * 
 * Possibly this should move to stringinfo.c at some point. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN7511"></a><span class='Declare_Function'>removeStringInfoSpaces</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7511"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN7511"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN7511"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>' '</span><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN7511"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Operator'>--</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7511"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_rule_expr_paren  - deparse expr using get_rule_expr, 
 * embracing the string with parentheses if necessary for prettyPrint. 
 * 
 * Never embrace if prettyFlags=0, because it's done in the calling node. 
 * 
 * Any node that does *not* embrace its argument node by sql syntax (with 
 * parentheses, non-operator keywords like CASE/WHEN/ON, or comma etc) should 
 * use get_rule_expr_paren instead of get_rule_expr so parentheses can be 
 * added. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN7530"></a><span class='Declare_Function'>get_rule_expr_paren</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN7531"></a>                    <span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Delimiter'>, </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parentNode</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7533"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>need_paren</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN7533"><span class='Ref_To_Local'>need_paren</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7530"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>        <span class='Operator'>!</span><a href="ruleutils.c.html#LN410"><span class='Ref_to_Proto'>isSimpleNode</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7530"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7531"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7530"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN111"><span class='Ref_to_Member'>prettyFlags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7533"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7530"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7530"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7530"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7531"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7533"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7530"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_rule_expr            - Parse back an expression 
 * 
 * Note: showimplicit determines whether we display any implicit cast that 
 * is present at the top of the expression tree.  It is a passed argument, 
 * not a field of the context struct, because we change the value as we 
 * recurse down into the expression.  In general we suppress implicit casts 
 * when the result type is known with certainty (eg, the arguments of an 
 * OR must be boolean).  We display implicit casts for arguments of functions 
 * and operators, since this is needed to be certain that the same function 
 * or operator will be chosen when the expression is re-parsed. 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN7562"></a><span class='Declare_Function'>get_rule_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN7563"></a>              <span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7565"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Guard against excessively long or deeply-nested queries */ 
</span>    <a href="../../../include/miscadmin.h.html#LN99"><span class='Ref_to_Macro'>CHECK_FOR_INTERRUPTS</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../../include/miscadmin.h.html#LN275"><span class='Ref_to_Proto'>check_stack_depth</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Each level of get_rule_expr must emit an indivisible term 
     * (parenthesized if necessary) to ensure result is reparsed into the same 
     * expression tree.  The only exception is that when the input is a List, 
     * we emit the component items comma-separated with no surrounding 
     * decoration; this is convenient for most callers. 
     */ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN145"><span class='Ref_to_EnumConst'>T_Var</span></a><span class='Operator'>: 
</span>            <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN399"><span class='Ref_to_Proto'>get_variable</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN146"><span class='Ref_to_EnumConst'>T_Const</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN429"><span class='Ref_to_Proto'>get_const_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN147"><span class='Ref_to_EnumConst'>T_Param</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN408"><span class='Ref_to_Proto'>get_parameter</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN240"><span class='Ref_to_Struct'>Param</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN148"><span class='Ref_to_EnumConst'>T_Aggref</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN421"><span class='Ref_to_Proto'>get_agg_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN149"><span class='Ref_to_EnumConst'>T_GroupingFunc</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7601"></a>                <a href="../../../include/nodes/primnodes.h.html#LN337"><span class='Ref_to_Struct'>GroupingFunc</span></a> <span class='Operator'>*</span><span class='Declare_Local'>gexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN337"><span class='Ref_to_Struct'>GroupingFunc</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"GROUPING("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7601"><span class='Ref_To_Local'>gexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN340"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN150"><span class='Ref_to_EnumConst'>T_WindowFunc</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN425"><span class='Ref_to_Proto'>get_windowfunc_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN351"><span class='Ref_to_Struct'>WindowFunc</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN151"><span class='Ref_to_EnumConst'>T_ArrayRef</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7615"></a>                <a href="../../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>aref</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN7616"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>need_parens</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If the argument is a CaseTestExpr, we must be inside a 
                 * FieldStore, ie, we are assigning to an element of an array 
                 * within a composite column.  Since we already punted on 
                 * displaying the FieldStore's target information, just punt 
                 * here too, and display only the assignment source 
                 * expression. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7615"><span class='Ref_To_Local'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN406"><span class='Ref_to_Member'>refexpr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN931"><span class='Ref_to_Struct'>CaseTestExpr</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7615"><span class='Ref_To_Local'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN408"><span class='Ref_to_Member'>refassgnexpr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7615"><span class='Ref_To_Local'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN408"><span class='Ref_to_Member'>refassgnexpr</span></a><span class='Delimiter'>, 
</span>                                  <a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Parenthesize the argument unless it's a simple Var or a 
                 * FieldSelect.  (In particular, if it's another ArrayRef, we 
                 * *must* parenthesize to avoid confusion.) 
                 */ 
</span>                <a href="ruleutils.c.html#LN7616"><span class='Ref_To_Local'>need_parens</span></a> <span class='Operator'>= !</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7615"><span class='Ref_To_Local'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN406"><span class='Ref_to_Member'>refexpr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                    <span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7615"><span class='Ref_To_Local'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN406"><span class='Ref_to_Member'>refexpr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN737"><span class='Ref_to_Struct'>FieldSelect</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7616"><span class='Ref_To_Local'>need_parens</span></a><span class='Parentheses'>) 
</span>                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7615"><span class='Ref_To_Local'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN406"><span class='Ref_to_Member'>refexpr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7616"><span class='Ref_To_Local'>need_parens</span></a><span class='Parentheses'>) 
</span>                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If there's a refassgnexpr, we want to print the node in the 
                 * format "array[subscripts] := refassgnexpr".  This is not 
                 * legal SQL, so decompilation of INSERT or UPDATE statements 
                 * should always use processIndirection as part of the 
                 * statement-level syntax.  We should only see this when 
                 * EXPLAIN tries to print the targetlist of a plan resulting 
                 * from such a statement. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7615"><span class='Ref_To_Local'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN408"><span class='Ref_to_Member'>refassgnexpr</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN7658"></a>                    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>refassgnexpr</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Use processIndirection to print this node's subscripts 
                     * as well as any additional field selections or 
                     * subscripting in immediate descendants.  It returns the 
                     * RHS expr that is actually being "assigned". 
                     */ 
</span>                    <a href="ruleutils.c.html#LN7658"><span class='Ref_To_Local'>refassgnexpr</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN449"><span class='Ref_to_Proto'>processIndirection</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" := "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7658"><span class='Ref_To_Local'>refassgnexpr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* Just an ordinary array fetch, so print subscripts */ 
</span>                    <a href="ruleutils.c.html#LN450"><span class='Ref_to_Proto'>printSubscripts</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7615"><span class='Ref_To_Local'>aref</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN152"><span class='Ref_to_EnumConst'>T_FuncExpr</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN419"><span class='Ref_to_Proto'>get_func_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN153"><span class='Ref_to_EnumConst'>T_NamedArgExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7684"></a>                <a href="../../../include/nodes/primnodes.h.html#LN473"><span class='Ref_to_Struct'>NamedArgExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>na</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN473"><span class='Ref_to_Struct'>NamedArgExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s =&GT; "</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7684"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN477"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7684"><span class='Ref_To_Local'>na</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN476"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN154"><span class='Ref_to_EnumConst'>T_OpExpr</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN418"><span class='Ref_to_Proto'>get_oper_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN155"><span class='Ref_to_EnumConst'>T_DistinctExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7697"></a>                <a href="../../../include/nodes/primnodes.h.html#LN514"><span class='Ref_to_Typedef'>DistinctExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>expr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN514"><span class='Ref_to_Typedef'>DistinctExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN7698"></a>                <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>args</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7697"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>; 
</span><a name="LN7699"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7698"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN7700"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7698"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7699"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS DISTINCT FROM "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7700"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN156"><span class='Ref_to_EnumConst'>T_NullIfExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7714"></a>                <a href="../../../include/nodes/primnodes.h.html#LN522"><span class='Ref_to_Typedef'>NullIfExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nullifexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN522"><span class='Ref_to_Typedef'>NullIfExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NULLIF("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7714"><span class='Ref_To_Local'>nullifexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN157"><span class='Ref_to_EnumConst'>T_ScalarArrayOpExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7724"></a>                <a href="../../../include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>expr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN534"><span class='Ref_to_Struct'>ScalarArrayOpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN7725"></a>                <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>args</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7724"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN541"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>; 
</span><a name="LN7726"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7725"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN7727"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7725"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7726"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s %s ("</span><span class='Delimiter'>, 
</span>                                 <a href="ruleutils.c.html#LN458"><span class='Ref_to_Proto'>generate_operator_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7724"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN537"><span class='Ref_to_Member'>opno</span></a><span class='Delimiter'>, 
</span>                                                        <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7726"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                      <a href="../../../include/utils/lsyscache.h.html#LN160"><span class='Ref_to_Proto'>get_base_element_type</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7727"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>, 
</span>                                 <a href="ruleutils.c.html#LN7724"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN539"><span class='Ref_to_Member'>useOr</span></a> <span class='Operator'>? </span><span class='String'>"ANY"</span> <span class='Operator'>: </span><span class='String'>"ALL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7727"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * There's inherent ambiguity in "x op ANY/ALL (y)" when y is 
                 * a bare sub-SELECT.  Since we're here, the sub-SELECT must 
                 * be meant as a scalar sub-SELECT yielding an array value to 
                 * be used in ScalarArrayOpExpr; but the grammar will 
                 * preferentially interpret such a construct as an ANY/ALL 
                 * SubLink.  To prevent misparsing the output that way, insert 
                 * a dummy coercion (which will be stripped by parse analysis, 
                 * so no inefficiency is added in dump and reload).  This is 
                 * indeed most likely what the user wrote to get the construct 
                 * accepted in the first place. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7727"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>                    <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7727"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>subLinkType <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN622"><span class='Ref_to_EnumConst'>EXPR_SUBLINK</span></a><span class='Parentheses'>)</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                                     <a href="format_type.c.html#LN111"><span class='Ref_to_Func'>format_type_with_typemod</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7727"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                          <a href="../../../include/nodes/nodeFuncs.h.html#LN32"><span class='Ref_to_Proto'>exprTypmod</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7727"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN158"><span class='Ref_to_EnumConst'>T_BoolExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7764"></a>                <a href="../../../include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>expr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN7765"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>first_arg</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7764"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN561"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN7766"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7764"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN561"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7764"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN560"><span class='Ref_to_Member'>boolop</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>AND_EXPR</span></a><span class='Operator'>: 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7765"><span class='Ref_To_Local'>first_arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                                            <span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7766"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" AND "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7766"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                                                <span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="ruleutils.c.html#LN7766"><span class='Ref_To_Local'>arg</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7766"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>OR_EXPR</span></a><span class='Operator'>: 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7765"><span class='Ref_To_Local'>first_arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                                            <span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7766"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" OR "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7766"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                                                <span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="ruleutils.c.html#LN7766"><span class='Ref_To_Local'>arg</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7766"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN554"><span class='Ref_to_EnumConst'>NOT_EXPR</span></a><span class='Operator'>: 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NOT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7765"><span class='Ref_To_Local'>first_arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                                            <span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized boolop: %d"</span><span class='Delimiter'>, 
</span>                             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7764"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN560"><span class='Ref_to_Member'>boolop</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch expr-&GT;boolop &raquo; </span> 
            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN159"><span class='Ref_to_EnumConst'>T_SubLink</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN433"><span class='Ref_to_Proto'>get_sublink_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN160"><span class='Ref_to_EnumConst'>T_SubPlan</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7825"></a>                <a href="../../../include/nodes/primnodes.h.html#LN678"><span class='Ref_to_Struct'>SubPlan</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>subplan</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN678"><span class='Ref_to_Struct'>SubPlan</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * We cannot see an already-planned subplan in rule deparsing, 
                 * only while EXPLAINing a query plan.  We don't try to 
                 * reconstruct the original SQL, just reference the subplan 
                 * that appears elsewhere in EXPLAIN's result. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7825"><span class='Ref_To_Local'>subplan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN696"><span class='Ref_to_Member'>useHashTable</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"(hashed %s)"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7825"><span class='Ref_To_Local'>subplan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN689"><span class='Ref_to_Member'>plan_name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"(%s)"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7825"><span class='Ref_To_Local'>subplan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN689"><span class='Ref_to_Member'>plan_name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN161"><span class='Ref_to_EnumConst'>T_AlternativeSubPlan</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7842"></a>                <a href="../../../include/nodes/primnodes.h.html#LN722"><span class='Ref_to_Struct'>AlternativeSubPlan</span></a> <span class='Operator'>*</span><span class='Declare_Local'>asplan</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN722"><span class='Ref_to_Struct'>AlternativeSubPlan</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN7843"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* As above, this can only happen during EXPLAIN */ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"(alternatives: "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7843"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7842"><span class='Ref_To_Local'>asplan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN725"><span class='Ref_to_Member'>subplans</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN7849"></a>                    <a href="../../../include/nodes/primnodes.h.html#LN678"><span class='Ref_to_Struct'>SubPlan</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>splan</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN108"><span class='Ref_to_Macro'>lfirst_node</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN678"><span class='Ref_to_Struct'>SubPlan</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7843"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7849"><span class='Ref_To_Local'>splan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN696"><span class='Ref_to_Member'>useHashTable</span></a><span class='Parentheses'>) 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"hashed %s"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7849"><span class='Ref_To_Local'>splan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN689"><span class='Ref_to_Member'>plan_name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7849"><span class='Ref_To_Local'>splan</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN689"><span class='Ref_to_Member'>plan_name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7843"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>))</span> 
                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" or "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN162"><span class='Ref_to_EnumConst'>T_FieldSelect</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7864"></a>                <a href="../../../include/nodes/primnodes.h.html#LN737"><span class='Ref_to_Struct'>FieldSelect</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fselect</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN737"><span class='Ref_to_Struct'>FieldSelect</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN7865"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7864"><span class='Ref_To_Local'>fselect</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN740"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>; 
</span><a name="LN7866"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>fno</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7864"><span class='Ref_To_Local'>fselect</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN741"><span class='Ref_to_Member'>fieldnum</span></a><span class='Delimiter'>; 
</span><a name="LN7867"></a>                <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>fieldname</span><span class='Delimiter'>; 
</span><a name="LN7868"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>need_parens</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Parenthesize the argument unless it's an ArrayRef or 
                 * another FieldSelect.  Note in particular that it would be 
                 * WRONG to not parenthesize a Var argument; simplicity is not 
                 * the issue here, having the right number of names is. 
                 */ 
</span>                <a href="ruleutils.c.html#LN7868"><span class='Ref_To_Local'>need_parens</span></a> <span class='Operator'>= !</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7865"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a><span class='Parentheses'>) </span><span class='Operator'>&&!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7865"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN737"><span class='Ref_to_Struct'>FieldSelect</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7868"><span class='Ref_To_Local'>need_parens</span></a><span class='Parentheses'>) 
</span>                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7865"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7868"><span class='Ref_To_Local'>need_parens</span></a><span class='Parentheses'>) 
</span>                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Get and print the field name. 
                 */ 
</span>                <a href="ruleutils.c.html#LN7867"><span class='Ref_To_Local'>fieldname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN6649"><span class='Ref_to_Func'>get_name_for_var_field</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7865"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7866"><span class='Ref_To_Local'>fno</span></a><span class='Delimiter'>, 
</span>                                                   <span class='Number'>0</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>".%s"</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7867"><span class='Ref_To_Local'>fieldname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN163"><span class='Ref_to_EnumConst'>T_FieldStore</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7894"></a>                <a href="../../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fstore</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN7895"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>need_parens</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * There is no good way to represent a FieldStore as real SQL, 
                 * so decompilation of INSERT or UPDATE statements should 
                 * always use processIndirection as part of the 
                 * statement-level syntax.  We should only get here when 
                 * EXPLAIN tries to print the targetlist of a plan resulting 
                 * from such a statement.  The plan case is even harder than 
                 * ordinary rules would be, because the planner tries to 
                 * collapse multiple assignments to the same field or subfield 
                 * into one FieldStore; so we can see a list of target fields 
                 * not just one, and the arguments could be FieldStores 
                 * themselves.  We don't bother to try to print the target 
                 * field names; we just print the source arguments, with a 
                 * ROW() around them if there's more than one.  This isn't 
                 * terribly complete, but it's probably good enough for 
                 * EXPLAIN's purposes; especially since anything more would be 
                 * either hopelessly confusing or an even poorer 
                 * representation of what the plan is actually doing. 
                 */ 
</span>                <a href="ruleutils.c.html#LN7895"><span class='Ref_To_Local'>need_parens</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7894"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN767"><span class='Ref_to_Member'>newvals</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7895"><span class='Ref_To_Local'>need_parens</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ROW("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7894"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN767"><span class='Ref_to_Member'>newvals</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7895"><span class='Ref_To_Local'>need_parens</span></a><span class='Parentheses'>) 
</span>                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN164"><span class='Ref_to_EnumConst'>T_RelabelType</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7927"></a>                <a href="../../../include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Declare_Local'>relabel</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN786"><span class='Ref_to_Struct'>RelabelType</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN7928"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7927"><span class='Ref_To_Local'>relabel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN789"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7927"><span class='Ref_To_Local'>relabel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN793"><span class='Ref_to_Member'>relabelformat</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a> <span class='Operator'>&& 
</span>                    <span class='Operator'>!</span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* don't show the implicit cast */ 
</span>                    <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7928"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN426"><span class='Ref_to_Proto'>get_coercion_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7928"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN7927"><span class='Ref_To_Local'>relabel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN790"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN7927"><span class='Ref_To_Local'>relabel</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN791"><span class='Ref_to_Member'>resulttypmod</span></a><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN165"><span class='Ref_to_EnumConst'>T_CoerceViaIO</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7948"></a>                <a href="../../../include/nodes/primnodes.h.html#LN806"><span class='Ref_to_Struct'>CoerceViaIO</span></a> <span class='Operator'>*</span><span class='Declare_Local'>iocoerce</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN806"><span class='Ref_to_Struct'>CoerceViaIO</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN7949"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7948"><span class='Ref_To_Local'>iocoerce</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN809"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7948"><span class='Ref_To_Local'>iocoerce</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN813"><span class='Ref_to_Member'>coerceformat</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a> <span class='Operator'>&& 
</span>                    <span class='Operator'>!</span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* don't show the implicit cast */ 
</span>                    <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7949"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN426"><span class='Ref_to_Proto'>get_coercion_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7949"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN7948"><span class='Ref_To_Local'>iocoerce</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN810"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, 
</span>                                      <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN166"><span class='Ref_to_EnumConst'>T_ArrayCoerceExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7969"></a>                <a href="../../../include/nodes/primnodes.h.html#LN829"><span class='Ref_to_Struct'>ArrayCoerceExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>acoerce</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN829"><span class='Ref_to_Struct'>ArrayCoerceExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN7970"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7969"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN832"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7969"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN838"><span class='Ref_to_Member'>coerceformat</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a> <span class='Operator'>&& 
</span>                    <span class='Operator'>!</span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* don't show the implicit cast */ 
</span>                    <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7970"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN426"><span class='Ref_to_Proto'>get_coercion_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7970"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN7969"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN834"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN7969"><span class='Ref_To_Local'>acoerce</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN835"><span class='Ref_to_Member'>resulttypmod</span></a><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN167"><span class='Ref_to_EnumConst'>T_ConvertRowtypeExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN7990"></a>                <a href="../../../include/nodes/primnodes.h.html#LN854"><span class='Ref_to_Struct'>ConvertRowtypeExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>convert</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN854"><span class='Ref_to_Struct'>ConvertRowtypeExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN7991"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7990"><span class='Ref_To_Local'>convert</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN857"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7990"><span class='Ref_To_Local'>convert</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN860"><span class='Ref_to_Member'>convertformat</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a> <span class='Operator'>&& 
</span>                    <span class='Operator'>!</span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* don't show the implicit cast */ 
</span>                    <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7991"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN426"><span class='Ref_to_Proto'>get_coercion_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7991"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN7990"><span class='Ref_To_Local'>convert</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN858"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN168"><span class='Ref_to_EnumConst'>T_CollateExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8010"></a>                <a href="../../../include/nodes/primnodes.h.html#LN871"><span class='Ref_to_Struct'>CollateExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>collate</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN871"><span class='Ref_to_Struct'>CollateExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN8011"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8010"><span class='Ref_To_Local'>collate</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN874"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8011"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" COLLATE %s"</span><span class='Delimiter'>, 
</span>                                 <a href="../../../include/utils/ruleutils.h.html#LN34"><span class='Ref_to_Proto'>generate_collation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8010"><span class='Ref_To_Local'>collate</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN875"><span class='Ref_to_Member'>collOid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN169"><span class='Ref_to_EnumConst'>T_CaseExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8025"></a>                <a href="../../../include/nodes/primnodes.h.html#LN901"><span class='Ref_to_Struct'>CaseExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>caseexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN901"><span class='Ref_to_Struct'>CaseExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN8026"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>temp</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>"CASE"</span><span class='Delimiter'>, 
</span>                                     <span class='Number'>0</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN83"><span class='Ref_to_Const'>PRETTYINDENT_VAR</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8025"><span class='Ref_To_Local'>caseexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN906"><span class='Ref_to_Member'>arg</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8025"><span class='Ref_To_Local'>caseexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN906"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8026"><span class='Ref_To_Local'>temp</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8025"><span class='Ref_To_Local'>caseexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN907"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN8037"></a>                    <a href="../../../include/nodes/primnodes.h.html#LN915"><span class='Ref_to_Struct'>CaseWhen</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>when</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN915"><span class='Ref_to_Struct'>CaseWhen</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8026"><span class='Ref_To_Local'>temp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN8038"></a>                    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>w</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8037"><span class='Ref_To_Local'>when</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN918"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8025"><span class='Ref_To_Local'>caseexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN906"><span class='Ref_to_Member'>arg</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * The parser should have produced WHEN clauses of the 
                         * form "CaseTestExpr = RHS", possibly with an 
                         * implicit coercion inserted above the CaseTestExpr. 
                         * For accurate decompilation of rules it's essential 
                         * that we show just the RHS.  However in an 
                         * expression that's been through the optimizer, the 
                         * WHEN clause could be almost anything (since the 
                         * equality operator could have been expanded into an 
                         * inline function).  If we don't recognize the form 
                         * of the WHEN clause, just punt and display it as-is. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8038"><span class='Ref_To_Local'>w</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a><span class='Parentheses'>))</span> 
                        <span class='Delimiter'>{ 
</span><a name="LN8056"></a>                            <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>args</span> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8038"><span class='Ref_To_Local'>w</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>args<span class='Delimiter'>; 
</span> 
                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8056"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>2</span> <span class='Operator'>&& 
</span>                                <a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/nodeFuncs.h.html#LN35"><span class='Ref_to_Proto'>strip_implicit_coercions</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8056"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                    <a href="../../../include/nodes/primnodes.h.html#LN931"><span class='Ref_to_Struct'>CaseTestExpr</span></a><span class='Parentheses'>))</span> 
                                <a href="ruleutils.c.html#LN8038"><span class='Ref_To_Local'>w</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8056"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if caseexpr-&GT;arg &raquo; </span> 
 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>"WHEN "</span><span class='Delimiter'>, 
</span>                                         <span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8038"><span class='Ref_To_Local'>w</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" THEN "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8037"><span class='Ref_To_Local'>when</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN919"><span class='Ref_to_Member'>result</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>"ELSE "</span><span class='Delimiter'>, 
</span>                                     <span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8025"><span class='Ref_To_Local'>caseexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN908"><span class='Ref_to_Member'>defresult</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>"END"</span><span class='Delimiter'>, 
</span>                                     <span class='Operator'>-</span><a href="ruleutils.c.html#LN83"><span class='Ref_to_Const'>PRETTYINDENT_VAR</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN171"><span class='Ref_to_EnumConst'>T_CaseTestExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * Normally we should never get here, since for expressions 
                 * that can contain this node type we attempt to avoid 
                 * recursing to it.  But in an optimized expression we might 
                 * be unable to avoid that (see comments for CaseExpr).  If we 
                 * do see one, print it as CASE_TEST_EXPR. 
                 */ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CASE_TEST_EXPR"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN172"><span class='Ref_to_EnumConst'>T_ArrayExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8100"></a>                <a href="../../../include/nodes/primnodes.h.html#LN947"><span class='Ref_to_Struct'>ArrayExpr</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>arrayexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN947"><span class='Ref_to_Struct'>ArrayExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ARRAY["</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8100"><span class='Ref_To_Local'>arrayexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN953"><span class='Ref_to_Member'>elements</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>']'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If the array isn't empty, we assume its elements are 
                 * coerced to the desired type.  If it's empty, though, we 
                 * need an explicit coercion to the array type. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8100"><span class='Ref_To_Local'>arrayexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN953"><span class='Ref_to_Member'>elements</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                      <a href="format_type.c.html#LN111"><span class='Ref_to_Func'>format_type_with_typemod</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8100"><span class='Ref_To_Local'>arrayexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN950"><span class='Ref_to_Member'>array_typeid</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN173"><span class='Ref_to_EnumConst'>T_RowExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8119"></a>                <a href="../../../include/nodes/primnodes.h.html#LN981"><span class='Ref_to_Struct'>RowExpr</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>rowexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN981"><span class='Ref_to_Struct'>RowExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN8120"></a>                <a href="../../../include/access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Local'>tupdesc</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN8121"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>arg</span><span class='Delimiter'>; 
</span><a name="LN8122"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN8123"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If it's a named type and not RECORD, we may have to skip 
                 * dropped columns and/or claim there are NULLs for added 
                 * columns. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8119"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN985"><span class='Ref_to_Member'>row_typeid</span></a> <span class='Operator'>!= </span><a href="../../../include/catalog/pg_type.h.html#LN679"><span class='Ref_to_Const'>RECORDOID</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN8120"><span class='Ref_To_Local'>tupdesc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN151"><span class='Ref_to_Proto'>lookup_rowtype_tupdesc</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8119"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN985"><span class='Ref_to_Member'>row_typeid</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8119"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN984"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><a href="ruleutils.c.html#LN8120"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * SQL99 allows "ROW" to be omitted when there is more than 
                 * one column, but for simplicity we always print it. 
                 */ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ROW("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN8123"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN8122"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8121"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8119"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN984"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN8145"></a>                    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8121"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8120"><span class='Ref_To_Local'>tupdesc</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>                        <span class='Operator'>!</span><a href="ruleutils.c.html#LN8120"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN8122"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8123"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* Whole-row Vars need special treatment here */ 
</span>                        <a href="ruleutils.c.html#LN416"><span class='Ref_to_Proto'>get_rule_expr_toplevel</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8145"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN8123"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <a href="ruleutils.c.html#LN8122"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8120"><span class='Ref_To_Local'>tupdesc</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8122"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN8120"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN72"><span class='Ref_to_Member'>natts</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN8120"><span class='Ref_To_Local'>tupdesc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/access/tupdesc.h.html#LN73"><span class='Ref_to_Member'>attrs</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN8122"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span>attisdropped<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8123"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="ruleutils.c.html#LN8123"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <a href="ruleutils.c.html#LN8122"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <a href="../../../include/access/tupdesc.h.html#LN106"><span class='Ref_to_Macro'>ReleaseTupleDesc</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8120"><span class='Ref_To_Local'>tupdesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8119"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN996"><span class='Ref_to_Member'>row_format</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN437"><span class='Ref_to_EnumConst'>COERCE_EXPLICIT_CAST</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                          <a href="format_type.c.html#LN111"><span class='Ref_to_Func'>format_type_with_typemod</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8119"><span class='Ref_To_Local'>rowexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN985"><span class='Ref_to_Member'>row_typeid</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN174"><span class='Ref_to_EnumConst'>T_RowCompareExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8181"></a>                <a href="../../../include/nodes/primnodes.h.html#LN1026"><span class='Ref_to_Struct'>RowCompareExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rcexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1026"><span class='Ref_to_Struct'>RowCompareExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN8182"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>arg</span><span class='Delimiter'>; 
</span><a name="LN8183"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * SQL99 allows "ROW" to be omitted when there is more than 
                 * one column, but for simplicity we always print it. 
                 */ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"(ROW("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN8183"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8182"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8181"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1033"><span class='Ref_to_Member'>largs</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN8193"></a>                    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8182"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8183"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8193"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN8183"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * We assume that the name of the first-column operator will 
                 * do for all the rest too.  This is definitely open to 
                 * failure, eg if some but not all operators were renamed 
                 * since the construct was parsed, but there seems no way to 
                 * be perfect. 
                 */ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") %s ROW("</span><span class='Delimiter'>, 
</span>                          <a href="ruleutils.c.html#LN458"><span class='Ref_to_Proto'>generate_operator_name</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN112"><span class='Ref_to_Macro'>linitial_oid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8181"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1030"><span class='Ref_to_Member'>opnos</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                           <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8181"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1033"><span class='Ref_to_Member'>largs</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                         <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8181"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1034"><span class='Ref_to_Member'>rargs</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN8183"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8182"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8181"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1034"><span class='Ref_to_Member'>rargs</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN8214"></a>                    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8182"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8183"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8214"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN8183"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"))"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN175"><span class='Ref_to_EnumConst'>T_CoalesceExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8226"></a>                <a href="../../../include/nodes/primnodes.h.html#LN1040"><span class='Ref_to_Struct'>CoalesceExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>coalesceexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1040"><span class='Ref_to_Struct'>CoalesceExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"COALESCE("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8226"><span class='Ref_To_Local'>coalesceexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1045"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN176"><span class='Ref_to_EnumConst'>T_MinMaxExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8236"></a>                <a href="../../../include/nodes/primnodes.h.html#LN1058"><span class='Ref_to_Struct'>MinMaxExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>minmaxexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1058"><span class='Ref_to_Struct'>MinMaxExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8236"><span class='Ref_To_Local'>minmaxexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1064"><span class='Ref_to_Member'>op</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1054"><span class='Ref_to_EnumConst'>IS_GREATEST</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"GREATEST("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1055"><span class='Ref_to_EnumConst'>IS_LEAST</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"LEAST("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8236"><span class='Ref_To_Local'>minmaxexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1065"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN177"><span class='Ref_to_EnumConst'>T_SQLValueFunction</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8254"></a>                <a href="../../../include/nodes/primnodes.h.html#LN1099"><span class='Ref_to_Struct'>SQLValueFunction</span></a> <span class='Operator'>*</span><span class='Declare_Local'>svf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1099"><span class='Ref_to_Struct'>SQLValueFunction</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Note: this code knows that typmod for time, timestamp, and 
                 * timestamptz just prints as integer. 
                 */ 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8254"><span class='Ref_To_Local'>svf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1102"><span class='Ref_to_Member'>op</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1082"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_DATE</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT_DATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1083"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_TIME</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT_TIME"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1084"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_TIME_N</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT_TIME(%d)"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8254"><span class='Ref_To_Local'>svf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1104"><span class='Ref_to_Member'>typmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1085"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_TIMESTAMP</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT_TIMESTAMP"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1086"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_TIMESTAMP_N</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT_TIMESTAMP(%d)"</span><span class='Delimiter'>, 
</span>                                         <a href="ruleutils.c.html#LN8254"><span class='Ref_To_Local'>svf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1104"><span class='Ref_to_Member'>typmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1087"><span class='Ref_to_EnumConst'>SVFOP_LOCALTIME</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"LOCALTIME"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1088"><span class='Ref_to_EnumConst'>SVFOP_LOCALTIME_N</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"LOCALTIME(%d)"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8254"><span class='Ref_To_Local'>svf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1104"><span class='Ref_to_Member'>typmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1089"><span class='Ref_to_EnumConst'>SVFOP_LOCALTIMESTAMP</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"LOCALTIMESTAMP"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1090"><span class='Ref_to_EnumConst'>SVFOP_LOCALTIMESTAMP_N</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"LOCALTIMESTAMP(%d)"</span><span class='Delimiter'>, 
</span>                                         <a href="ruleutils.c.html#LN8254"><span class='Ref_To_Local'>svf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1104"><span class='Ref_to_Member'>typmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1091"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_ROLE</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT_ROLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1092"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_USER</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT_USER"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1093"><span class='Ref_to_EnumConst'>SVFOP_USER</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"USER"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1094"><span class='Ref_to_EnumConst'>SVFOP_SESSION_USER</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"SESSION_USER"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1095"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_CATALOG</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT_CATALOG"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1096"><span class='Ref_to_EnumConst'>SVFOP_CURRENT_SCHEMA</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT_SCHEMA"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch svf-&GT;op &raquo; </span> 
            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN178"><span class='Ref_to_EnumConst'>T_XmlExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8315"></a>                <a href="../../../include/nodes/primnodes.h.html#LN1137"><span class='Ref_to_Struct'>XmlExpr</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>xexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1137"><span class='Ref_to_Struct'>XmlExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN8316"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>needcomma</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN8317"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>arg</span><span class='Delimiter'>; 
</span><a name="LN8318"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>narg</span><span class='Delimiter'>; 
</span><a name="LN8319"></a>                <a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>con</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1140"><span class='Ref_to_Member'>op</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1121"><span class='Ref_to_EnumConst'>IS_XMLCONCAT</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"XMLCONCAT("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1122"><span class='Ref_to_EnumConst'>IS_XMLELEMENT</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"XMLELEMENT("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1123"><span class='Ref_to_EnumConst'>IS_XMLFOREST</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"XMLFOREST("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1124"><span class='Ref_to_EnumConst'>IS_XMLPARSE</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"XMLPARSE("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1125"><span class='Ref_to_EnumConst'>IS_XMLPI</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"XMLPI("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1126"><span class='Ref_to_EnumConst'>IS_XMLROOT</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"XMLROOT("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1127"><span class='Ref_to_EnumConst'>IS_XMLSERIALIZE</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"XMLSERIALIZE("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1128"><span class='Ref_to_EnumConst'>IS_DOCUMENT</span></a><span class='Operator'>: 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch xexpr-&GT;op &raquo; </span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1140"><span class='Ref_to_Member'>op</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN1124"><span class='Ref_to_EnumConst'>IS_XMLPARSE</span></a> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1140"><span class='Ref_to_Member'>op</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN1127"><span class='Ref_to_EnumConst'>IS_XMLSERIALIZE</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1145"><span class='Ref_to_Member'>xmloption</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN1133"><span class='Ref_to_EnumConst'>XMLOPTION_DOCUMENT</span></a><span class='Parentheses'>) 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"DOCUMENT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CONTENT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1141"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NAME %s"</span><span class='Delimiter'>, 
</span>                                     <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/xml.h.html#LN74"><span class='Ref_to_Proto'>map_xml_name_to_sql_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1141"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN8316"><span class='Ref_To_Local'>needcomma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1142"><span class='Ref_to_Member'>named_args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1140"><span class='Ref_to_Member'>op</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/primnodes.h.html#LN1123"><span class='Ref_to_EnumConst'>IS_XMLFOREST</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8316"><span class='Ref_To_Local'>needcomma</span></a><span class='Parentheses'>) 
</span>                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"XMLATTRIBUTES("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN8316"><span class='Ref_To_Local'>needcomma</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <a href="../../../include/nodes/pg_list.h.html#LN179"><span class='Ref_to_Macro'>forboth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8317"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1142"><span class='Ref_to_Member'>named_args</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8318"><span class='Ref_To_Local'>narg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1143"><span class='Ref_to_Member'>arg_names</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span><a name="LN8371"></a>                        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>e</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8317"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN8372"></a>                        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>argname</span> <span class='Operator'>= </span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8318"><span class='Ref_To_Local'>narg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8316"><span class='Ref_To_Local'>needcomma</span></a><span class='Parentheses'>) 
</span>                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8371"><span class='Ref_To_Local'>e</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" AS %s"</span><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/xml.h.html#LN74"><span class='Ref_to_Proto'>map_xml_name_to_sql_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8372"><span class='Ref_To_Local'>argname</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN8316"><span class='Ref_To_Local'>needcomma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1140"><span class='Ref_to_Member'>op</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/primnodes.h.html#LN1123"><span class='Ref_to_EnumConst'>IS_XMLFOREST</span></a><span class='Parentheses'>) 
</span>                        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if xexpr-&GT;named_args &raquo; </span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8316"><span class='Ref_To_Local'>needcomma</span></a><span class='Parentheses'>) 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1140"><span class='Ref_to_Member'>op</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1121"><span class='Ref_to_EnumConst'>IS_XMLCONCAT</span></a><span class='Operator'>: 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1122"><span class='Ref_to_EnumConst'>IS_XMLELEMENT</span></a><span class='Operator'>: 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1123"><span class='Ref_to_EnumConst'>IS_XMLFOREST</span></a><span class='Operator'>: 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1125"><span class='Ref_to_EnumConst'>IS_XMLPI</span></a><span class='Operator'>: 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1127"><span class='Ref_to_EnumConst'>IS_XMLSERIALIZE</span></a><span class='Operator'>: 
</span>                            <span class='Comment_Multi_Line'>/* no extra decoration needed */ 
</span>                            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1124"><span class='Ref_to_EnumConst'>IS_XMLPARSE</span></a><span class='Operator'>: 
</span>                            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                          <a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <a href="ruleutils.c.html#LN8319"><span class='Ref_To_Local'>con</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN118"><span class='Ref_to_Macro'>lsecond_node</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN8319"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN196"><span class='Ref_to_Member'>constisnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN398"><span class='Ref_to_Macro'>DatumGetBool</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8319"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Parentheses'>))</span> 
                                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, 
</span>                                                     <span class='String'>" PRESERVE WHITESPACE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, 
</span>                                                       <span class='String'>" STRIP WHITESPACE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1126"><span class='Ref_to_EnumConst'>IS_XMLROOT</span></a><span class='Operator'>: 
</span>                            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                          <a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", VERSION "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="ruleutils.c.html#LN8319"><span class='Ref_To_Local'>con</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8319"><span class='Ref_To_Local'>con</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                                <a href="ruleutils.c.html#LN8319"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN196"><span class='Ref_to_Member'>constisnull</span></a><span class='Parentheses'>)</span> 
                                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NO VALUE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8319"><span class='Ref_To_Local'>con</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <a href="ruleutils.c.html#LN8319"><span class='Ref_To_Local'>con</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN123"><span class='Ref_to_Macro'>lthird_node</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8319"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN196"><span class='Ref_to_Member'>constisnull</span></a><span class='Parentheses'>) 
</span>                                 <span class='Comment_Multi_Line'>/* suppress STANDALONE NO VALUE */ </span><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8319"><span class='Ref_To_Local'>con</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Parentheses'>))</span> 
                                <span class='Delimiter'>{ 
</span>                                    <span class='Control'>case</span> <a href="../../../include/utils/xml.h.html#LN26"><span class='Ref_to_EnumConst'>XML_STANDALONE_YES</span></a><span class='Operator'>: 
</span>                                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, 
</span>                                                         <span class='String'>", STANDALONE YES"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>case</span> <a href="../../../include/utils/xml.h.html#LN27"><span class='Ref_to_EnumConst'>XML_STANDALONE_NO</span></a><span class='Operator'>: 
</span>                                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, 
</span>                                                          <span class='String'>", STANDALONE NO"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>case</span> <a href="../../../include/utils/xml.h.html#LN28"><span class='Ref_to_EnumConst'>XML_STANDALONE_NO_VALUE</span></a><span class='Operator'>: 
</span>                                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, 
</span>                                                    <span class='String'>", STANDALONE NO VALUE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>default</span><span class='Operator'>: 
</span>                                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                                <span class='Delimiter'>} 
</span>                            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1128"><span class='Ref_to_EnumConst'>IS_DOCUMENT</span></a><span class='Operator'>: 
</span>                            <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1144"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch xexpr-&GT;op &raquo; </span> 
 
                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if xexpr-&GT;args &raquo; </span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1140"><span class='Ref_to_Member'>op</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN1127"><span class='Ref_to_EnumConst'>IS_XMLSERIALIZE</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" AS %s"</span><span class='Delimiter'>, 
</span>                                     <a href="format_type.c.html#LN111"><span class='Ref_to_Func'>format_type_with_typemod</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1146"><span class='Ref_to_Member'>type</span></a><span class='Delimiter'>, 
</span>                                                              <a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1147"><span class='Ref_to_Member'>typmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8315"><span class='Ref_To_Local'>xexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1140"><span class='Ref_to_Member'>op</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN1128"><span class='Ref_to_EnumConst'>IS_DOCUMENT</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS DOCUMENT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN179"><span class='Ref_to_EnumConst'>T_NullTest</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8470"></a>                <a href="../../../include/nodes/primnodes.h.html#LN1175"><span class='Ref_to_Struct'>NullTest</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ntest</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1175"><span class='Ref_to_Struct'>NullTest</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8470"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1178"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * For scalar inputs, we prefer to print as IS [NOT] NULL, 
                 * which is shorter and traditional.  If it's a rowtype input 
                 * but we're applying a scalar test, must print IS [NOT] 
                 * DISTINCT FROM NULL to be semantically correct. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8470"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1180"><span class='Ref_to_Member'>argisrow</span></a> <span class='Operator'>|| 
</span>                    <span class='Operator'>!</span><a href="../../../include/utils/lsyscache.h.html#LN150"><span class='Ref_to_Proto'>type_is_rowtype</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8470"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1178"><span class='Ref_to_Member'>arg</span></a><span class='Parentheses'>)))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8470"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1179"><span class='Ref_to_Member'>nulltesttype</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1172"><span class='Ref_to_EnumConst'>IS_NULL</span></a><span class='Operator'>: 
</span>                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1172"><span class='Ref_to_EnumConst'>IS_NOT_NULL</span></a><span class='Operator'>: 
</span>                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS NOT NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>default</span><span class='Operator'>: 
</span>                            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized nulltesttype: %d"</span><span class='Delimiter'>, 
</span>                                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8470"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1179"><span class='Ref_to_Member'>nulltesttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8470"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1179"><span class='Ref_to_Member'>nulltesttype</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1172"><span class='Ref_to_EnumConst'>IS_NULL</span></a><span class='Operator'>: 
</span>                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS NOT DISTINCT FROM NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1172"><span class='Ref_to_EnumConst'>IS_NOT_NULL</span></a><span class='Operator'>: 
</span>                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS DISTINCT FROM NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>default</span><span class='Operator'>: 
</span>                            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized nulltesttype: %d"</span><span class='Delimiter'>, 
</span>                                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8470"><span class='Ref_To_Local'>ntest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1179"><span class='Ref_to_Member'>nulltesttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN180"><span class='Ref_to_EnumConst'>T_BooleanTest</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8520"></a>                <a href="../../../include/nodes/primnodes.h.html#LN1198"><span class='Ref_to_Struct'>BooleanTest</span></a> <span class='Operator'>*</span><span class='Declare_Local'>btest</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1198"><span class='Ref_to_Struct'>BooleanTest</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8520"><span class='Ref_To_Local'>btest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1201"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8520"><span class='Ref_To_Local'>btest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1202"><span class='Ref_to_Member'>booltesttype</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_TRUE</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS TRUE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_NOT_TRUE</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS NOT TRUE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_FALSE</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS FALSE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_NOT_FALSE</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS NOT FALSE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_UNKNOWN</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS UNKNOWN"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN1195"><span class='Ref_to_EnumConst'>IS_NOT_UNKNOWN</span></a><span class='Operator'>: 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IS NOT UNKNOWN"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized booltesttype: %d"</span><span class='Delimiter'>, 
</span>                             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8520"><span class='Ref_To_Local'>btest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1202"><span class='Ref_to_Member'>booltesttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch btest-&GT;booltesttype &raquo; </span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN181"><span class='Ref_to_EnumConst'>T_CoerceToDomain</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8556"></a>                <a href="../../../include/nodes/primnodes.h.html#LN1215"><span class='Ref_to_Struct'>CoerceToDomain</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ctest</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1215"><span class='Ref_to_Struct'>CoerceToDomain</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN8557"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8556"><span class='Ref_To_Local'>ctest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1218"><span class='Ref_to_Member'>arg</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8556"><span class='Ref_To_Local'>ctest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1222"><span class='Ref_to_Member'>coercionformat</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a> <span class='Operator'>&& 
</span>                    <span class='Operator'>!</span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* don't show the implicit cast */ 
</span>                    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8557"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN426"><span class='Ref_to_Proto'>get_coercion_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8557"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN8556"><span class='Ref_To_Local'>ctest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1219"><span class='Ref_to_Member'>resulttype</span></a><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN8556"><span class='Ref_To_Local'>ctest</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1220"><span class='Ref_to_Member'>resulttypmod</span></a><span class='Delimiter'>, 
</span>                                      <a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN182"><span class='Ref_to_EnumConst'>T_CoerceToDomainValue</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"VALUE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN183"><span class='Ref_to_EnumConst'>T_SetToDefault</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"DEFAULT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN184"><span class='Ref_to_EnumConst'>T_CurrentOfExpr</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8585"></a>                <a href="../../../include/nodes/primnodes.h.html#LN1272"><span class='Ref_to_Struct'>CurrentOfExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1272"><span class='Ref_to_Struct'>CurrentOfExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8585"><span class='Ref_To_Local'>cexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1276"><span class='Ref_to_Member'>cursor_name</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT OF %s"</span><span class='Delimiter'>, 
</span>                                     <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8585"><span class='Ref_To_Local'>cexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1276"><span class='Ref_to_Member'>cursor_name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"CURRENT OF $%d"</span><span class='Delimiter'>, 
</span>                                     <a href="ruleutils.c.html#LN8585"><span class='Ref_To_Local'>cexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1277"><span class='Ref_to_Member'>cursor_param</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN185"><span class='Ref_to_EnumConst'>T_InferenceElem</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8598"></a>                <a href="../../../include/nodes/primnodes.h.html#LN1287"><span class='Ref_to_Struct'>InferenceElem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>iexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1287"><span class='Ref_to_Struct'>InferenceElem</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN8599"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>save_varprefix</span><span class='Delimiter'>; 
</span><a name="LN8600"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>need_parens</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * InferenceElem can only refer to target relation, so a 
                 * prefix is not useful, and indeed would cause parse errors. 
                 */ 
</span>                <a href="ruleutils.c.html#LN8599"><span class='Ref_To_Local'>save_varprefix</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Parenthesize the element unless it's a simple Var or a bare 
                 * function call.  Follows pg_get_indexdef_worker(). 
                 */ 
</span>                <a href="ruleutils.c.html#LN8600"><span class='Ref_To_Local'>need_parens</span></a> <span class='Operator'>= !</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8598"><span class='Ref_To_Local'>iexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1290"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8598"><span class='Ref_To_Local'>iexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1290"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>                    <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8598"><span class='Ref_To_Local'>iexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1290"><span class='Ref_to_Member'>expr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>funcformat <span class='Operator'>== 
</span>                    <a href="../../../include/nodes/primnodes.h.html#LN436"><span class='Ref_to_EnumConst'>COERCE_EXPLICIT_CALL</span></a><span class='Parentheses'>)</span> 
                    <a href="ruleutils.c.html#LN8600"><span class='Ref_To_Local'>need_parens</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8600"><span class='Ref_To_Local'>need_parens</span></a><span class='Parentheses'>) 
</span>                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8598"><span class='Ref_To_Local'>iexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1290"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, 
</span>                              <a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8600"><span class='Ref_To_Local'>need_parens</span></a><span class='Parentheses'>) 
</span>                    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN114"><span class='Ref_to_Member'>varprefix</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN8599"><span class='Ref_To_Local'>save_varprefix</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8598"><span class='Ref_To_Local'>iexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1291"><span class='Ref_to_Member'>infercollid</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" COLLATE %s"</span><span class='Delimiter'>, 
</span>                                <a href="../../../include/utils/ruleutils.h.html#LN34"><span class='Ref_to_Proto'>generate_collation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8598"><span class='Ref_To_Local'>iexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1291"><span class='Ref_to_Member'>infercollid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Add the operator class name, if not default */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8598"><span class='Ref_To_Local'>iexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1292"><span class='Ref_to_Member'>inferopclass</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN8635"></a>                    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>inferopclass</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN8598"><span class='Ref_To_Local'>iexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1292"><span class='Ref_to_Member'>inferopclass</span></a><span class='Delimiter'>; 
</span><a name="LN8636"></a>                    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>inferopcinputtype</span> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN97"><span class='Ref_to_Proto'>get_opclass_input_type</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8598"><span class='Ref_To_Local'>iexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1292"><span class='Ref_to_Member'>inferopclass</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="ruleutils.c.html#LN447"><span class='Ref_to_Proto'>get_opclass_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8635"><span class='Ref_To_Local'>inferopclass</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8636"><span class='Ref_To_Local'>inferopcinputtype</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN467"><span class='Ref_to_EnumConst'>T_PartitionBoundSpec</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8645"></a>                <a href="../../../include/nodes/parsenodes.h.html#LN795"><span class='Ref_to_Struct'>PartitionBoundSpec</span></a> <span class='Operator'>*</span><span class='Declare_Local'>spec</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN795"><span class='Ref_to_Struct'>PartitionBoundSpec</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN8646"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>cell</span><span class='Delimiter'>; 
</span><a name="LN8647"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8645"><span class='Ref_To_Local'>spec</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN799"><span class='Ref_to_Member'>strategy</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN786"><span class='Ref_to_Const'>PARTITION_STRATEGY_LIST</span></a><span class='Operator'>: 
</span>                        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8645"><span class='Ref_To_Local'>spec</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN802"><span class='Ref_to_Member'>listdatums</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"FOR VALUES IN ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN8647"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8646"><span class='Ref_To_Local'>cell</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8645"><span class='Ref_To_Local'>spec</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN802"><span class='Ref_to_Member'>listdatums</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span><a name="LN8658"></a>                            <a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>val</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN575"><span class='Ref_to_Macro'>castNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8646"><span class='Ref_To_Local'>cell</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8647"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="ruleutils.c.html#LN429"><span class='Ref_to_Proto'>get_const_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8658"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="ruleutils.c.html#LN8647"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>")"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN787"><span class='Ref_to_Const'>PARTITION_STRATEGY_RANGE</span></a><span class='Operator'>: 
</span>                        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8645"><span class='Ref_To_Local'>spec</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN805"><span class='Ref_to_Member'>lowerdatums</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a> <span class='Operator'>&& 
</span>                               <a href="ruleutils.c.html#LN8645"><span class='Ref_To_Local'>spec</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN806"><span class='Ref_to_Member'>upperdatums</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a> <span class='Operator'>&& 
</span>                               <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8645"><span class='Ref_To_Local'>spec</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN805"><span class='Ref_to_Member'>lowerdatums</span></a><span class='Parentheses'>) </span><span class='Operator'>== 
</span>                               <a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8645"><span class='Ref_To_Local'>spec</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN806"><span class='Ref_to_Member'>upperdatums</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"FOR VALUES FROM ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN8647"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8646"><span class='Ref_To_Local'>cell</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8645"><span class='Ref_To_Local'>spec</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN805"><span class='Ref_to_Member'>lowerdatums</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span><a name="LN8678"></a>                            <a href="../../../include/nodes/parsenodes.h.html#LN816"><span class='Ref_to_Struct'>PartitionRangeDatum</span></a> <span class='Operator'>*</span><span class='Declare_Local'>datum</span> <span class='Operator'>= 
</span>                            <a href="../../../include/nodes/nodes.h.html#LN575"><span class='Ref_to_Macro'>castNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN816"><span class='Ref_to_Struct'>PartitionRangeDatum</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8646"><span class='Ref_To_Local'>cell</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8647"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8678"><span class='Ref_To_Local'>datum</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN820"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>                                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"UNBOUNDED"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                            <span class='Delimiter'>{ 
</span><a name="LN8686"></a>                                <a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>val</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN575"><span class='Ref_to_Macro'>castNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8678"><span class='Ref_To_Local'>datum</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                                <a href="ruleutils.c.html#LN429"><span class='Ref_to_Proto'>get_const_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8686"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <a href="ruleutils.c.html#LN8647"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") TO ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN8647"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8646"><span class='Ref_To_Local'>cell</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8645"><span class='Ref_To_Local'>spec</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN806"><span class='Ref_to_Member'>upperdatums</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span><a name="LN8696"></a>                            <a href="../../../include/nodes/parsenodes.h.html#LN816"><span class='Ref_to_Struct'>PartitionRangeDatum</span></a> <span class='Operator'>*</span><span class='Declare_Local'>datum</span> <span class='Operator'>= 
</span>                            <a href="../../../include/nodes/nodes.h.html#LN575"><span class='Ref_to_Macro'>castNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN816"><span class='Ref_to_Struct'>PartitionRangeDatum</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8646"><span class='Ref_To_Local'>cell</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8647"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8696"><span class='Ref_To_Local'>datum</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN820"><span class='Ref_to_Member'>infinite</span></a><span class='Parentheses'>) 
</span>                                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"UNBOUNDED"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                            <span class='Delimiter'>{ 
</span><a name="LN8704"></a>                                <a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>val</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN575"><span class='Ref_to_Macro'>castNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8696"><span class='Ref_To_Local'>datum</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                                <a href="ruleutils.c.html#LN429"><span class='Ref_to_Proto'>get_const_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8704"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <a href="ruleutils.c.html#LN8647"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>")"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized partition strategy: %d"</span><span class='Delimiter'>, 
</span>                             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8645"><span class='Ref_To_Local'>spec</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN799"><span class='Ref_to_Member'>strategy</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch spec-&GT;strategy &raquo; </span> 
            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN290"><span class='Ref_to_EnumConst'>T_List</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8723"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span><a name="LN8724"></a>                <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
                <a href="ruleutils.c.html#LN8723"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8724"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>)</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7565"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8723"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8724"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="ruleutils.c.html#LN8723"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN143"><span class='Ref_to_EnumConst'>T_TableFunc</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN434"><span class='Ref_to_Proto'>get_tablefunc</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN78"><span class='Ref_to_Struct'>TableFunc</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN7563"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized node type: %d"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN7562"><span class='Ref_to_Parameter'>node</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch nodeTag(node) &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end get_rule_expr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_rule_expr_toplevel       - Parse back a toplevel expression 
 * 
 * Same as get_rule_expr(), except that if the expr is just a Var, we pass 
 * istoplevel = true not false to get_variable().  This causes whole-row Vars 
 * to get printed with decoration that will prevent expansion of "*". 
 * We need to use this in contexts such as ROW() and VALUES(), where the 
 * parser would expand "foo.*" appearing at top level.  (In principle we'd 
 * use this in get_target_list() too, but that has additional worries about 
 * whether to print AS, so it needs to invoke get_variable() directly anyway.) 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN8758"></a><span class='Declare_Function'>get_rule_expr_toplevel</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN8759"></a>                       <span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8758"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>&& </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8758"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a><span class='Parentheses'>))</span> 
        <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN399"><span class='Ref_to_Proto'>get_variable</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN162"><span class='Ref_to_Struct'>Var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8758"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8758"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8758"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8758"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8759"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_oper_expr            - Parse back an OpExpr node 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN8772"></a><span class='Declare_Function'>get_oper_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN8774"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN8775"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>opno</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN494"><span class='Ref_to_Member'>opno</span></a><span class='Delimiter'>; 
</span><a name="LN8776"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>args</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8774"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8776"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>2</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* binary operator */ 
</span><a name="LN8783"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8776"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN8784"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8776"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8783"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8774"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s "</span><span class='Delimiter'>, 
</span>                         <a href="ruleutils.c.html#LN458"><span class='Ref_to_Proto'>generate_operator_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8775"><span class='Ref_To_Local'>opno</span></a><span class='Delimiter'>, 
</span>                                                <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8783"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8784"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8784"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* unary operator --- but which side? */ 
</span><a name="LN8796"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8776"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN8797"></a>        <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN8798"></a>        <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>optup</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN8797"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8775"><span class='Ref_To_Local'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8797"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for operator %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8775"><span class='Ref_To_Local'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN8798"><span class='Ref_To_Local'>optup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8797"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8798"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprkind<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <span class='String'>'l'</span><span class='Operator'>: 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8774"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s "</span><span class='Delimiter'>, 
</span>                                 <a href="ruleutils.c.html#LN458"><span class='Ref_to_Proto'>generate_operator_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8775"><span class='Ref_To_Local'>opno</span></a><span class='Delimiter'>, 
</span>                                                        <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>, 
</span>                                                        <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8796"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8796"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'r'</span><span class='Operator'>: 
</span>                <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8796"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8774"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s"</span><span class='Delimiter'>, 
</span>                                 <a href="ruleutils.c.html#LN458"><span class='Ref_to_Proto'>generate_operator_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8775"><span class='Ref_To_Local'>opno</span></a><span class='Delimiter'>, 
</span>                                                        <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8796"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                        <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"bogus oprkind: %d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8798"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprkind<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8797"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8772"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8774"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_oper_expr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_func_expr            - Parse back a FuncExpr node 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN8833"></a><span class='Declare_Function'>get_func_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>expr</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN8834"></a>              <span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN8836"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN8837"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>funcoid</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN447"><span class='Ref_to_Member'>funcid</span></a><span class='Delimiter'>; 
</span><a name="LN8838"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>argtypes</span><span class='Delimiter'>[</span><a href="../../../include/pg_config_manual.h.html#LN36"><span class='Ref_to_Const'>FUNC_MAX_ARGS</span></a><span class='Delimiter'>]; 
</span><a name="LN8839"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nargs</span><span class='Delimiter'>; 
</span><a name="LN8840"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>argnames</span><span class='Delimiter'>; 
</span><a name="LN8841"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>use_variadic</span><span class='Delimiter'>; 
</span><a name="LN8842"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the function call came from an implicit coercion, then just show the 
     * first argument --- unless caller wants to see implicit coercions. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN452"><span class='Ref_to_Member'>funcformat</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a> <span class='Operator'>&& !</span><a href="ruleutils.c.html#LN8834"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                            <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the function call came from a cast, then show the first argument 
     * plus an explicit cast operation. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN452"><span class='Ref_to_Member'>funcformat</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN437"><span class='Ref_to_EnumConst'>COERCE_EXPLICIT_CAST</span></a> <span class='Operator'>|| 
</span>        <a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN452"><span class='Ref_to_Member'>funcformat</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN438"><span class='Ref_to_EnumConst'>COERCE_IMPLICIT_CAST</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN8862"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN8863"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>rettype</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN448"><span class='Ref_to_Member'>funcresulttype</span></a><span class='Delimiter'>; 
</span><a name="LN8864"></a>        <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>coercedTypmod</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Get the typmod if this is a length-coercion function */ 
</span>        <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodeFuncs.h.html#LN33"><span class='Ref_to_Proto'>exprIsLengthCoercion</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN8864"><span class='Ref_To_Local'>coercedTypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN426"><span class='Ref_to_Proto'>get_coercion_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8862"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, 
</span>                          <a href="ruleutils.c.html#LN8863"><span class='Ref_To_Local'>rettype</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8864"><span class='Ref_To_Local'>coercedTypmod</span></a><span class='Delimiter'>, 
</span>                          <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Normal function: display as proname(args).  First we need to extract 
     * the argument datatypes. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><a href="../../../include/pg_config_manual.h.html#LN36"><span class='Ref_to_Const'>FUNC_MAX_ARGS</span></a><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_TOO_MANY_ARGUMENTS<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too many arguments"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN8839"><span class='Ref_To_Local'>nargs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN8840"><span class='Ref_To_Local'>argnames</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8842"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN8888"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8842"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8888"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN473"><span class='Ref_to_Struct'>NamedArgExpr</span></a><span class='Parentheses'>))</span> 
            <a href="ruleutils.c.html#LN8840"><span class='Ref_To_Local'>argnames</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8840"><span class='Ref_To_Local'>argnames</span></a><span class='Delimiter'>, </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN473"><span class='Ref_to_Struct'>NamedArgExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8888"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>name<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN8838"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN8839"><span class='Ref_To_Local'>nargs</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8888"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN8839"><span class='Ref_To_Local'>nargs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8836"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s("</span><span class='Delimiter'>, 
</span>                     <a href="ruleutils.c.html#LN454"><span class='Ref_to_Proto'>generate_function_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8837"><span class='Ref_To_Local'>funcoid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8839"><span class='Ref_To_Local'>nargs</span></a><span class='Delimiter'>, 
</span>                                            <a href="ruleutils.c.html#LN8840"><span class='Ref_To_Local'>argnames</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8838"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>, 
</span>                                            <a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN450"><span class='Ref_to_Member'>funcvariadic</span></a><span class='Delimiter'>, 
</span>                                            <span class='Operator'>&</span><a href="ruleutils.c.html#LN8841"><span class='Ref_To_Local'>use_variadic</span></a><span class='Delimiter'>, 
</span>                                            <a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN115"><span class='Ref_to_Member'>special_exprkind</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN8839"><span class='Ref_To_Local'>nargs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8842"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8839"><span class='Ref_To_Local'>nargs</span></a><span class='Operator'>++ &GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8836"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8841"><span class='Ref_To_Local'>use_variadic</span></a> <span class='Operator'>&& </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8842"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8836"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"VARIADIC "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8842"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8833"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8836"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_func_expr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_agg_expr         - Parse back an Aggref node 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN8918"></a><span class='Declare_Function'>get_agg_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>aggref</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN8919"></a>             <a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>original_aggref</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN8921"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN8922"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>argtypes</span><span class='Delimiter'>[</span><a href="../../../include/pg_config_manual.h.html#LN36"><span class='Ref_to_Const'>FUNC_MAX_ARGS</span></a><span class='Delimiter'>]; 
</span><a name="LN8923"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nargs</span><span class='Delimiter'>; 
</span><a name="LN8924"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>use_variadic</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For a combining aggregate, we look up and deparse the corresponding 
     * partial aggregate instead.  This is necessary because our input 
     * argument list has been replaced; the new argument list always has just 
     * one element, which will point to a partial Aggref that supplies us with 
     * transition states to combine. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN766"><span class='Ref_to_Macro'>DO_AGGSPLIT_COMBINE</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN309"><span class='Ref_to_Member'>aggsplit</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN8935"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN113"><span class='Ref_to_Macro'>linitial_node</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN300"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN300"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN403"><span class='Ref_to_Proto'>resolve_special_varno</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8935"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8919"><span class='Ref_to_Parameter'>original_aggref</span></a><span class='Delimiter'>, 
</span>                              <a href="ruleutils.c.html#LN423"><span class='Ref_to_Proto'>get_agg_combine_expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Mark as PARTIAL, if appropriate.  We look to the original aggref so as 
     * to avoid printing this when recursing from the code just above. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN767"><span class='Ref_to_Macro'>DO_AGGSPLIT_SKIPFINAL</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8919"><span class='Ref_to_Parameter'>original_aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN309"><span class='Ref_to_Member'>aggsplit</span></a><span class='Parentheses'>))</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8921"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"PARTIAL "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Extract the argument types as seen by the parser */ 
</span>    <a href="ruleutils.c.html#LN8923"><span class='Ref_To_Local'>nargs</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parse_agg.h.html#LN30"><span class='Ref_to_Proto'>get_aggregate_argtypes</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8922"><span class='Ref_To_Local'>argtypes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Print the aggregate name, schema-qualified if needed */ 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8921"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s(%s"</span><span class='Delimiter'>, 
</span>                     <a href="ruleutils.c.html#LN454"><span class='Ref_to_Proto'>generate_function_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN293"><span class='Ref_to_Member'>aggfnoid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8923"><span class='Ref_To_Local'>nargs</span></a><span class='Delimiter'>, 
</span>                                            <a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8922"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>, 
</span>                                            <a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN305"><span class='Ref_to_Member'>aggvariadic</span></a><span class='Delimiter'>, 
</span>                                            <span class='Operator'>&</span><a href="ruleutils.c.html#LN8924"><span class='Ref_To_Local'>use_variadic</span></a><span class='Delimiter'>, 
</span>                                            <a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN115"><span class='Ref_to_Member'>special_exprkind</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN302"><span class='Ref_to_Member'>aggdistinct</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"DISTINCT "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/pg_aggregate.h.html#LN128"><span class='Ref_to_Macro'>AGGKIND_IS_ORDERED_SET</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN307"><span class='Ref_to_Member'>aggkind</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Ordered-set aggregates do not use "*" syntax.  Also, we needn't 
         * worry about inserting VARIADIC.  So we can just dump the direct 
         * args as-is. 
         */ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN305"><span class='Ref_to_Member'>aggvariadic</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN299"><span class='Ref_to_Member'>aggdirectargs</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN301"><span class='Ref_to_Member'>aggorder</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8921"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") WITHIN GROUP (ORDER BY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN394"><span class='Ref_to_Proto'>get_rule_orderby</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN301"><span class='Ref_to_Member'>aggorder</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN300"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* aggstar can be set only in zero-argument aggregates */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN304"><span class='Ref_to_Member'>aggstar</span></a><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8921"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'*'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span><a name="LN8982"></a>            <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span><a name="LN8983"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN8983"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8982"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN300"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8988"></a>                <a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tle</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1363"><span class='Ref_to_Struct'>TargetEntry</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8982"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN8989"></a>                <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8988"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1366"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span> 
                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8989"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN473"><span class='Ref_to_Struct'>NamedArgExpr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8988"><span class='Ref_To_Local'>tle</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1373"><span class='Ref_to_Member'>resjunk</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8983"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++ &GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8921"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8924"><span class='Ref_To_Local'>use_variadic</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN8983"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN8923"><span class='Ref_To_Local'>nargs</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8921"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"VARIADIC "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8989"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN301"><span class='Ref_to_Member'>aggorder</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8921"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ORDER BY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN394"><span class='Ref_to_Proto'>get_rule_orderby</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN301"><span class='Ref_to_Member'>aggorder</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN300"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN303"><span class='Ref_to_Member'>aggfilter</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8921"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") FILTER (WHERE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>aggref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN303"><span class='Ref_to_Member'>aggfilter</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN8918"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN8921"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_agg_expr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * This is a helper function for get_agg_expr().  It's used when we deparse 
 * a combining Aggref; resolve_special_varno locates the corresponding partial 
 * Aggref and then calls this. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9024"></a><span class='Declare_Function'>get_agg_combine_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>private</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9026"></a>    <a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>aggref</span><span class='Delimiter'>; 
</span><a name="LN9027"></a>    <a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>original_aggref</span> <span class='Operator'>= </span><span class='Keyword'>private</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9024"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"combining Aggref does not point to an Aggref"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN9026"><span class='Ref_To_Local'>aggref</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN290"><span class='Ref_to_Struct'>Aggref</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9024"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN421"><span class='Ref_to_Proto'>get_agg_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9026"><span class='Ref_To_Local'>aggref</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9024"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9027"><span class='Ref_To_Local'>original_aggref</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_windowfunc_expr  - Parse back a WindowFunc node 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9040"></a><span class='Declare_Function'>get_windowfunc_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN351"><span class='Ref_to_Struct'>WindowFunc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>wfunc</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9042"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN9043"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>argtypes</span><span class='Delimiter'>[</span><a href="../../../include/pg_config_manual.h.html#LN36"><span class='Ref_to_Const'>FUNC_MAX_ARGS</span></a><span class='Delimiter'>]; 
</span><a name="LN9044"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nargs</span><span class='Delimiter'>; 
</span><a name="LN9045"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>argnames</span><span class='Delimiter'>; 
</span><a name="LN9046"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN358"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><a href="../../../include/pg_config_manual.h.html#LN36"><span class='Ref_to_Const'>FUNC_MAX_ARGS</span></a><span class='Parentheses'>)</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_TOO_MANY_ARGUMENTS<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too many arguments"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN9044"><span class='Ref_To_Local'>nargs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN9045"><span class='Ref_To_Local'>argnames</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9046"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN358"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN9056"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9046"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9056"><span class='Ref_To_Local'>arg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN473"><span class='Ref_to_Struct'>NamedArgExpr</span></a><span class='Parentheses'>))</span> 
            <a href="ruleutils.c.html#LN9045"><span class='Ref_To_Local'>argnames</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9045"><span class='Ref_To_Local'>argnames</span></a><span class='Delimiter'>, </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN473"><span class='Ref_to_Struct'>NamedArgExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9056"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>name<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN9043"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN9044"><span class='Ref_To_Local'>nargs</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9056"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN9044"><span class='Ref_To_Local'>nargs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9042"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s("</span><span class='Delimiter'>, 
</span>                     <a href="ruleutils.c.html#LN454"><span class='Ref_to_Proto'>generate_function_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN354"><span class='Ref_to_Member'>winfnoid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9044"><span class='Ref_To_Local'>nargs</span></a><span class='Delimiter'>, 
</span>                                            <a href="ruleutils.c.html#LN9045"><span class='Ref_To_Local'>argnames</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9043"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>, 
</span>                                            <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                            <a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN115"><span class='Ref_to_Member'>special_exprkind</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* winstar can be set only in zero-argument aggregates */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN361"><span class='Ref_to_Member'>winstar</span></a><span class='Parentheses'>) 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9042"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'*'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN358"><span class='Ref_to_Member'>args</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN359"><span class='Ref_to_Member'>aggfilter</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9042"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") FILTER (WHERE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN359"><span class='Ref_to_Member'>aggfilter</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9042"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") OVER "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9046"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN109"><span class='Ref_to_Member'>windowClause</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN9085"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN1252"><span class='Ref_to_Struct'>WindowClause</span></a> <span class='Operator'>*</span><span class='Declare_Local'>wc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1252"><span class='Ref_to_Struct'>WindowClause</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9046"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9085"><span class='Ref_To_Local'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1262"><span class='Ref_to_Member'>winref</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN360"><span class='Ref_to_Member'>winref</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9085"><span class='Ref_To_Local'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1255"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9042"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9085"><span class='Ref_To_Local'>wc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1255"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="ruleutils.c.html#LN397"><span class='Ref_to_Proto'>get_rule_windowspec</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9085"><span class='Ref_To_Local'>wc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN110"><span class='Ref_to_Member'>windowTList</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9046"><span class='Ref_To_Local'>l</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN109"><span class='Ref_to_Member'>windowClause</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"could not find window clause for winref %u"</span><span class='Delimiter'>, 
</span>                 <a href="ruleutils.c.html#LN9040"><span class='Ref_to_Parameter'>wfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN360"><span class='Ref_to_Member'>winref</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * In EXPLAIN, we don't have window context information available, so 
         * we have to settle for this: 
         */ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9042"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"(?)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_windowfunc_expr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_coercion_expr 
 * 
 *  Make a string representation of a value coerced to a specific type 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9117"></a><span class='Declare_Function'>get_coercion_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>arg</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, 
</span><a name="LN9118"></a>                  <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>resulttype</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>resulttypmod</span><span class='Delimiter'>, 
</span><a name="LN9119"></a>                  <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parentNode</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9121"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9117"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Since parse_coerce.c doesn't immediately collapse application of 
     * length-coercion functions to constants, what we'll typically see in 
     * such cases is a Const with typmod -1 and a length-coercion function 
     * right above it.  Avoid generating redundant output. However, beware of 
     * suppressing casts when the user actually wrote something like 
     * 'foo'::text::char(3). 
     * 
     * Note: it might seem that we are missing the possibility of needing to 
     * print a COLLATE clause for such a Const.  However, a Const could only 
     * have nondefault collation in a post-constant-folding tree, in which the 
     * length coercion would have been folded too.  See also the special 
     * handling of CollateExpr in coerce_to_target_type(): any collation 
     * marking will be above the coercion node, not below it. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9117"><span class='Ref_to_Parameter'>arg</span></a> <span class='Operator'>&& </span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9117"><span class='Ref_to_Parameter'>arg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>        <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9117"><span class='Ref_to_Parameter'>arg</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>consttype <span class='Operator'>== </span><a href="ruleutils.c.html#LN9118"><span class='Ref_to_Parameter'>resulttype</span></a> <span class='Operator'>&& 
</span>        <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9117"><span class='Ref_to_Parameter'>arg</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>consttypmod <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Show the constant without normal ::typename decoration */ 
</span>        <a href="ruleutils.c.html#LN429"><span class='Ref_to_Proto'>get_const_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9117"><span class='Ref_to_Parameter'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9117"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9117"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9121"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN7529"><span class='Ref_to_Func'>get_rule_expr_paren</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9117"><span class='Ref_to_Parameter'>arg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9117"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9119"><span class='Ref_to_Parameter'>parentNode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9117"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9121"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9121"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                     <a href="format_type.c.html#LN111"><span class='Ref_to_Func'>format_type_with_typemod</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9118"><span class='Ref_to_Parameter'>resulttype</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9118"><span class='Ref_to_Parameter'>resulttypmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_coercion_expr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_const_expr 
 * 
 *  Make a string representation of a Const 
 * 
 * showtype can be -1 to never show "::typename" decoration, or +1 to always 
 * show it, or 0 to show it only if the constant wouldn't be assumed to be 
 * the right type by default. 
 * 
 * If the Const's collation isn't default for its type, show that too. 
 * We mustn't do this when showtype is -1 (since that means the caller will 
 * print "::typename", and we can't put a COLLATE clause in between).  It's 
 * caller's responsibility that collation isn't missed in such cases. 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9173"></a><span class='Declare_Function'>get_const_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>constval</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>showtype</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9175"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN9176"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typoutput</span><span class='Delimiter'>; 
</span><a name="LN9177"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>typIsVarlena</span><span class='Delimiter'>; 
</span><a name="LN9178"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>extval</span><span class='Delimiter'>; 
</span><a name="LN9179"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>needlabel</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN196"><span class='Ref_to_Member'>constisnull</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Always label the type of a NULL constant to prevent misdecisions 
         * about type when reparsing. 
         */ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9175"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>showtype</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9175"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                             <a href="format_type.c.html#LN111"><span class='Ref_to_Func'>format_type_with_typemod</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Delimiter'>, 
</span>                                                      <a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN192"><span class='Ref_to_Member'>consttypmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN431"><span class='Ref_to_Proto'>get_const_collation</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/lsyscache.h.html#LN162"><span class='Ref_to_Proto'>getTypeOutputInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Delimiter'>, 
</span>                      <span class='Operator'>&</span><a href="ruleutils.c.html#LN9176"><span class='Ref_To_Local'>typoutput</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN9177"><span class='Ref_To_Local'>typIsVarlena</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN647"><span class='Ref_to_Proto'>OidOutputFunctionCall</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9176"><span class='Ref_To_Local'>typoutput</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN195"><span class='Ref_to_Member'>constvalue</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN24"><span class='Ref_to_Const'>INT4OID</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * INT4 can be printed without any decoration, unless it is 
             * negative; in that case print it as '-nnn'::integer to ensure 
             * that the output will re-parse as a constant, not as a constant 
             * plus operator.  In most cases we could get away with printing 
             * (-nnn) instead, because of the way that gram.y handles negative 
             * literals; but that doesn't work for INT_MIN, and it doesn't 
             * seem that much prettier anyway. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9175"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9175"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"'%s'"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN9179"><span class='Ref_To_Local'>needlabel</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* we must attach a cast */ 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN58"><span class='Ref_to_Const'>NUMERICOID</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * NUMERIC can be printed without quotes if it looks like a float 
             * constant (not an integer, and not Infinity or NaN) and doesn't 
             * have a leading sign (for the same reason as for INT4). 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>isdigit<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>                strcspn<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Delimiter'>, </span><span class='String'>"eE."</span><span class='Parentheses'>)</span> <span class='Operator'>!= </span>strlen<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9175"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9175"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"'%s'"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN9179"><span class='Ref_To_Local'>needlabel</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* we must attach a cast */ 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/catalog/pg_type.h.html#LN541"><span class='Ref_to_Const'>BITOID</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN57"><span class='Ref_to_Const'>VARBITOID</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9175"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"B'%s'"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN17"><span class='Ref_to_Const'>BOOLOID</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9175"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"true"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9175"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"false"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN432"><span class='Ref_to_Proto'>simple_quote_literal</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9175"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch constval-&GT;consttype &raquo; </span> 
 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9178"><span class='Ref_To_Local'>extval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>showtype</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For showtype == 0, append ::typename unless the constant will be 
     * implicitly typed as the right type when it is read in. 
     * 
     * XXX this code has to be kept in sync with the behavior of the parser, 
     * especially make_const. 
     */ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN17"><span class='Ref_to_Const'>BOOLOID</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN43"><span class='Ref_to_Const'>UNKNOWNOID</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* These types can be left unlabeled */ 
</span>            <a href="ruleutils.c.html#LN9179"><span class='Ref_To_Local'>needlabel</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN24"><span class='Ref_to_Const'>INT4OID</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* We determined above whether a label is needed */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN58"><span class='Ref_to_Const'>NUMERICOID</span></a><span class='Operator'>: 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Float-looking constants will be typed as numeric, which we 
             * checked above; but if there's a nondefault typmod we need to 
             * show it. 
             */ 
</span>            <a href="ruleutils.c.html#LN9179"><span class='Ref_To_Local'>needlabel</span></a> <span class='Operator'>|= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN192"><span class='Ref_to_Member'>consttypmod</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN9179"><span class='Ref_To_Local'>needlabel</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch constval-&GT;consttype &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9179"><span class='Ref_To_Local'>needlabel</span></a> <span class='Operator'>|| </span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>showtype</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9175"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"::%s"</span><span class='Delimiter'>, 
</span>                         <a href="format_type.c.html#LN111"><span class='Ref_to_Func'>format_type_with_typemod</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Delimiter'>, 
</span>                                                  <a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN192"><span class='Ref_to_Member'>consttypmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN431"><span class='Ref_to_Proto'>get_const_collation</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>constval</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9173"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_const_expr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * helper for get_const_expr: append COLLATE if needed 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9308"></a><span class='Declare_Function'>get_const_collation</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>constval</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9310"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9308"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9308"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN193"><span class='Ref_to_Member'>constcollid</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN9314"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typcollation</span> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN166"><span class='Ref_to_Proto'>get_typcollation</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9308"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN191"><span class='Ref_to_Member'>consttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9308"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN193"><span class='Ref_to_Member'>constcollid</span></a> <span class='Operator'>!= </span><a href="ruleutils.c.html#LN9314"><span class='Ref_To_Local'>typcollation</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9310"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" COLLATE %s"</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/ruleutils.h.html#LN34"><span class='Ref_to_Proto'>generate_collation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9308"><span class='Ref_to_Parameter'>constval</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN193"><span class='Ref_to_Member'>constcollid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * simple_quote_literal - Format a string as a SQL literal, append to buf 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9328"></a><span class='Declare_Function'>simple_quote_literal</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>val</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9330"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>valptr</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We form the string literal according to the prevailing setting of 
     * standard_conforming_strings; we never use E''. User is responsible for 
     * making sure result is used correctly. 
     */ 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9328"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'\''</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9330"><span class='Ref_To_Local'>valptr</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9328"><span class='Ref_to_Parameter'>val</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="ruleutils.c.html#LN9330"><span class='Ref_To_Local'>valptr</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN9330"><span class='Ref_To_Local'>valptr</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN9340"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>ch</span> <span class='Operator'>= *</span><a href="ruleutils.c.html#LN9330"><span class='Ref_To_Local'>valptr</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN506"><span class='Ref_to_Macro'>SQL_STR_DOUBLE</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9340"><span class='Ref_To_Local'>ch</span></a><span class='Delimiter'>, </span><span class='Operator'>!</span><a href="../../parser/scan.l.html#LN61"><span class='Ref_to_Global_Var'>standard_conforming_strings</span></a><span class='Parentheses'>))</span> 
            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9328"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9340"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9328"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9340"><span class='Ref_To_Local'>ch</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9328"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'\''</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end simple_quote_literal &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_sublink_expr         - Parse back a sublink 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9355"></a><span class='Declare_Function'>get_sublink_expr</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN629"><span class='Ref_to_Struct'>SubLink</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>sublink</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9357"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN9358"></a>    <a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>query</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN636"><span class='Ref_to_Member'>subselect</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN9359"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opname</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN9360"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>need_paren</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN632"><span class='Ref_to_Member'>subLinkType</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/primnodes.h.html#LN624"><span class='Ref_to_EnumConst'>ARRAY_SUBLINK</span></a><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ARRAY("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Note that we print the name of only the first operator, when there are 
     * multiple combining operators.  This is an approximation that could go 
     * wrong in various scenarios (operators in different schemas, renamed 
     * operators, etc) but there is not a whole lot we can do about it, since 
     * the syntax allows only one operator to be shown. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN634"><span class='Ref_to_Member'>testexpr</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN634"><span class='Ref_to_Member'>testexpr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* single combining operator */ 
</span><a name="LN9379"></a>            <a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>opexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN634"><span class='Ref_to_Member'>testexpr</span></a><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9379"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9359"><span class='Ref_To_Local'>opname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN458"><span class='Ref_to_Proto'>generate_operator_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9379"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN494"><span class='Ref_to_Member'>opno</span></a><span class='Delimiter'>, 
</span>                                            <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9379"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                            <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9379"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN634"><span class='Ref_to_Member'>testexpr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* multiple combining operators, = or &LT;&GT; cases */ 
</span><a name="LN9389"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sep</span><span class='Delimiter'>; 
</span><a name="LN9390"></a>            <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9389"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>            <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9390"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN557"><span class='Ref_to_Struct'>BoolExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN634"><span class='Ref_to_Member'>testexpr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>args<span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span><a name="LN9396"></a>                <a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>opexpr</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN108"><span class='Ref_to_Macro'>lfirst_node</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN491"><span class='Ref_to_Struct'>OpExpr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9390"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9389"><span class='Ref_To_Local'>sep</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9396"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN9359"><span class='Ref_To_Local'>opname</span></a><span class='Parentheses'>) 
</span>                    <a href="ruleutils.c.html#LN9359"><span class='Ref_To_Local'>opname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN458"><span class='Ref_to_Proto'>generate_operator_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9396"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN494"><span class='Ref_to_Member'>opno</span></a><span class='Delimiter'>, 
</span>                                            <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9396"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                            <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9396"><span class='Ref_To_Local'>opexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN500"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN9389"><span class='Ref_To_Local'>sep</span></a> <span class='Operator'>= </span><span class='String'>", "</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(sublink-&GT;testexpr... &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN634"><span class='Ref_to_Member'>testexpr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1026"><span class='Ref_to_Struct'>RowCompareExpr</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* multiple combining operators, &LT; &LT;= &GT; &GT;= cases */ 
</span><a name="LN9411"></a>            <a href="../../../include/nodes/primnodes.h.html#LN1026"><span class='Ref_to_Struct'>RowCompareExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rcexpr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1026"><span class='Ref_to_Struct'>RowCompareExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN634"><span class='Ref_to_Member'>testexpr</span></a><span class='Delimiter'>; 
</span> 
            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9411"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1033"><span class='Ref_to_Member'>largs</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9359"><span class='Ref_To_Local'>opname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN458"><span class='Ref_to_Proto'>generate_operator_name</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN112"><span class='Ref_to_Macro'>linitial_oid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9411"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1030"><span class='Ref_to_Member'>opnos</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                            <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9411"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1033"><span class='Ref_to_Member'>largs</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                          <a href="../../../include/nodes/nodeFuncs.h.html#LN31"><span class='Ref_to_Proto'>exprType</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9411"><span class='Ref_To_Local'>rcexpr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1034"><span class='Ref_to_Member'>rargs</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized testexpr type: %d"</span><span class='Delimiter'>, 
</span>                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN634"><span class='Ref_to_Member'>testexpr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if sublink-&GT;testexpr &raquo; </span> 
 
    <a href="ruleutils.c.html#LN9360"><span class='Ref_To_Local'>need_paren</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN632"><span class='Ref_to_Member'>subLinkType</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN618"><span class='Ref_to_EnumConst'>EXISTS_SUBLINK</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"EXISTS "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN620"><span class='Ref_to_EnumConst'>ANY_SUBLINK</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9359"><span class='Ref_To_Local'>opname</span></a><span class='Delimiter'>, </span><span class='String'>"="</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span>       <span class='Comment_Single_Line'>/* Represent = ANY as IN */ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" IN "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s ANY "</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9359"><span class='Ref_To_Local'>opname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN619"><span class='Ref_to_EnumConst'>ALL_SUBLINK</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s ALL "</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9359"><span class='Ref_To_Local'>opname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN621"><span class='Ref_to_EnumConst'>ROWCOMPARE_SUBLINK</span></a><span class='Operator'>: 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s "</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9359"><span class='Ref_To_Local'>opname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN622"><span class='Ref_to_EnumConst'>EXPR_SUBLINK</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN623"><span class='Ref_to_EnumConst'>MULTIEXPR_SUBLINK</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN624"><span class='Ref_to_EnumConst'>ARRAY_SUBLINK</span></a><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN9360"><span class='Ref_To_Local'>need_paren</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <a href="../../../include/nodes/primnodes.h.html#LN625"><span class='Ref_to_EnumConst'>CTE_SUBLINK</span></a><span class='Operator'>:</span>       <span class='Comment_Single_Line'>/* shouldn't occur in a SubLink */ 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized sublink type: %d"</span><span class='Delimiter'>, 
</span>                 <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>sublink</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN632"><span class='Ref_to_Member'>subLinkType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch sublink-&GT;subLinkType &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9360"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN368"><span class='Ref_to_Proto'>get_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9358"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                  <a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN111"><span class='Ref_to_Member'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a><span class='Delimiter'>, 
</span>                  <a href="ruleutils.c.html#LN9355"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9360"><span class='Ref_To_Local'>need_paren</span></a><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"))"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9357"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_sublink_expr &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_tablefunc            - Parse back a table function 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9480"></a><span class='Declare_Function'>get_tablefunc</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN78"><span class='Ref_to_Struct'>TableFunc</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tf</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>showimplicit</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9482"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* XMLTABLE is the only existing implementation.  */ 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"XMLTABLE("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN81"><span class='Ref_to_Member'>ns_uris</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN9490"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc1</span><span class='Delimiter'>, 
</span><a name="LN9491"></a>                   <span class='Operator'>*</span><span class='Declare_Local'>lc2</span><span class='Delimiter'>; 
</span><a name="LN9492"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"XMLNAMESPACES ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN179"><span class='Ref_to_Macro'>forboth</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9490"><span class='Ref_To_Local'>lc1</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN81"><span class='Ref_to_Member'>ns_uris</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9491"><span class='Ref_To_Local'>lc2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN82"><span class='Ref_to_Member'>ns_names</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN9497"></a>            <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9490"><span class='Ref_To_Local'>lc1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN9498"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>name</span> <span class='Operator'>= </span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9491"><span class='Ref_To_Local'>lc2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN9492"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="ruleutils.c.html#LN9492"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9498"><span class='Ref_To_Local'>name</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9497"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" AS %s"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9498"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"DEFAULT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9497"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"), "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tf-&GT;ns_uris!=NIL &raquo; </span> 
 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN84"><span class='Ref_to_Member'>rowexpr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>") PASSING ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN83"><span class='Ref_to_Member'>docexpr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN89"><span class='Ref_to_Member'>colexprs</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN9527"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l1</span><span class='Delimiter'>; 
</span><a name="LN9528"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l2</span><span class='Delimiter'>; 
</span><a name="LN9529"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l3</span><span class='Delimiter'>; 
</span><a name="LN9530"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l4</span><span class='Delimiter'>; 
</span><a name="LN9531"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l5</span><span class='Delimiter'>; 
</span><a name="LN9532"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>colnum</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN9528"><span class='Ref_To_Local'>l2</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN86"><span class='Ref_to_Member'>coltypes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN9529"><span class='Ref_To_Local'>l3</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN87"><span class='Ref_to_Member'>coltypmods</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN9530"><span class='Ref_To_Local'>l4</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN89"><span class='Ref_to_Member'>colexprs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN9531"><span class='Ref_To_Local'>l5</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN90"><span class='Ref_to_Member'>coldefexprs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" COLUMNS "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9527"><span class='Ref_To_Local'>l1</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN85"><span class='Ref_to_Member'>colnames</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN9542"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>colname</span> <span class='Operator'>= </span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9527"><span class='Ref_To_Local'>l1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN9543"></a>            <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typid</span><span class='Delimiter'>; 
</span><a name="LN9544"></a>            <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>typmod</span><span class='Delimiter'>; 
</span><a name="LN9545"></a>            <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>colexpr</span><span class='Delimiter'>; 
</span><a name="LN9546"></a>            <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>coldefexpr</span><span class='Delimiter'>; 
</span><a name="LN9547"></a>            <span class='Keyword'>bool</span>        <span class='Declare_Local'>ordinality</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN92"><span class='Ref_to_Member'>ordinalitycol</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN9532"><span class='Ref_To_Local'>colnum</span></a><span class='Delimiter'>; 
</span><a name="LN9548"></a>            <span class='Keyword'>bool</span>        <span class='Declare_Local'>notnull</span> <span class='Operator'>= </span><a href="../../../include/nodes/bitmapset.h.html#LN75"><span class='Ref_to_Proto'>bms_is_member</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9532"><span class='Ref_To_Local'>colnum</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>tf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN91"><span class='Ref_to_Member'>notnulls</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN9543"><span class='Ref_To_Local'>typid</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN107"><span class='Ref_to_Macro'>lfirst_oid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9528"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9528"><span class='Ref_To_Local'>l2</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9528"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9544"><span class='Ref_To_Local'>typmod</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9529"><span class='Ref_To_Local'>l3</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9529"><span class='Ref_To_Local'>l3</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9529"><span class='Ref_To_Local'>l3</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9545"><span class='Ref_To_Local'>colexpr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9530"><span class='Ref_To_Local'>l4</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9530"><span class='Ref_To_Local'>l4</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9530"><span class='Ref_To_Local'>l4</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9546"><span class='Ref_To_Local'>coldefexpr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9531"><span class='Ref_To_Local'>l5</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9531"><span class='Ref_To_Local'>l5</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9531"><span class='Ref_To_Local'>l5</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9532"><span class='Ref_To_Local'>colnum</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9532"><span class='Ref_To_Local'>colnum</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9542"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="ruleutils.c.html#LN9547"><span class='Ref_To_Local'>ordinality</span></a> <span class='Operator'>? </span><span class='String'>"FOR ORDINALITY"</span> <span class='Operator'>: 
</span>                             <a href="format_type.c.html#LN111"><span class='Ref_to_Func'>format_type_with_typemod</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9543"><span class='Ref_To_Local'>typid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9544"><span class='Ref_To_Local'>typmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9547"><span class='Ref_To_Local'>ordinality</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9546"><span class='Ref_To_Local'>coldefexpr</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" DEFAULT ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9546"><span class='Ref_To_Local'>coldefexpr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9545"><span class='Ref_To_Local'>colexpr</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" PATH ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9545"><span class='Ref_To_Local'>colexpr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9480"><span class='Ref_to_Parameter'>showimplicit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9548"><span class='Ref_To_Local'>notnull</span></a><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" NOT NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tf-&GT;colexprs!=NIL &raquo; </span> 
 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9482"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_tablefunc &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_from_clause          - Parse back a FROM clause 
 * 
 * "prefix" is the keyword that denotes the start of the list of FROM 
 * elements. It is FROM when used to parse back SELECT and UPDATE, but 
 * is USING when parsing back DELETE. 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9598"></a><span class='Declare_Function'>get_from_clause</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>prefix</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9600"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN9601"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN9602"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We use the query's jointree as a guide to what to print.  However, we 
     * must ignore auto-added RTEs that are marked not inFromCl. (These can 
     * only appear at the top level of the jointree, so it's sufficient to 
     * check here.)  This check also ensures we ignore the rule pseudo-RTEs 
     * for NEW and OLD. 
     */ 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9602"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN135"><span class='Ref_to_Member'>jointree</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1469"><span class='Ref_to_Member'>fromlist</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN9613"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>jtnode</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9602"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9613"><span class='Ref_To_Local'>jtnode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN9617"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>varno</span> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9613"><span class='Ref_To_Local'>jtnode</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rtindex<span class='Delimiter'>; 
</span><a name="LN9618"></a>            <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9617"><span class='Ref_To_Local'>varno</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN9618"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1026"><span class='Ref_to_Member'>inFromCl</span></a><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9601"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>prefix</span></a><span class='Delimiter'>, 
</span>                                 <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9601"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN438"><span class='Ref_to_Proto'>get_from_clause_item</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9613"><span class='Ref_To_Local'>jtnode</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span><a name="LN9634"></a>            <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>itembuf</span><span class='Delimiter'>; 
</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9600"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Put the new FROM item's text into itembuf so we can decide 
             * after we've got it whether or not it needs to go on a new line. 
             */ 
</span>            <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN9634"><span class='Ref_To_Local'>itembuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= &</span><a href="ruleutils.c.html#LN9634"><span class='Ref_To_Local'>itembuf</span></a><span class='Delimiter'>; 
</span> 
            <a href="ruleutils.c.html#LN438"><span class='Ref_to_Proto'>get_from_clause_item</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9613"><span class='Ref_To_Local'>jtnode</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Restore context's output buffer */ 
</span>            <a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9600"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Consider line-wrapping if enabled */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN96"><span class='Ref_to_Macro'>PRETTY_INDENT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Does the new item start with a new line? */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9634"><span class='Ref_To_Local'>itembuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN9634"><span class='Ref_To_Local'>itembuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\n'</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* If so, we shouldn't add anything */ 
</span>                    <span class='Comment_Multi_Line'>/* instead, remove any trailing spaces currently in buf */ 
</span>                    <a href="ruleutils.c.html#LN413"><span class='Ref_to_Proto'>removeStringInfoSpaces</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9600"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span><a name="LN9662"></a>                    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>trailing_nl</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Locate the start of the current line in the buffer */ 
</span>                    <a href="ruleutils.c.html#LN9662"><span class='Ref_To_Local'>trailing_nl</span></a> <span class='Operator'>= </span>strrchr<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9600"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9662"><span class='Ref_To_Local'>trailing_nl</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                        <a href="ruleutils.c.html#LN9662"><span class='Ref_To_Local'>trailing_nl</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9600"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="ruleutils.c.html#LN9662"><span class='Ref_To_Local'>trailing_nl</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Add a newline, plus some indentation, if the new item 
                     * would cause an overflow. 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9662"><span class='Ref_To_Local'>trailing_nl</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><a href="ruleutils.c.html#LN9634"><span class='Ref_To_Local'>itembuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&GT; </span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a><span class='Parentheses'>)</span> 
                        <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9598"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                             <a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                             <a href="ruleutils.c.html#LN83"><span class='Ref_to_Const'>PRETTYINDENT_VAR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if PRETTY_INDENT(context... &raquo; </span> 
 
            <span class='Comment_Multi_Line'>/* Add the new item */ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9600"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9634"><span class='Ref_To_Local'>itembuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* clean up */ 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9634"><span class='Ref_To_Local'>itembuf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_from_clause &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN9692"></a><span class='Declare_Function'>get_from_clause_item</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>jtnode</span><span class='Delimiter'>, </span><a href="../../../include/nodes/parsenodes.h.html#LN105"><span class='Ref_to_Struct'>Query</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>query</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9694"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN9695"></a>    <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dpns</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN9699"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>varno</span> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rtindex<span class='Delimiter'>; 
</span><a name="LN9700"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN932"><span class='Ref_to_Struct'>RangeTblEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rte</span> <span class='Operator'>= </span><a href="../../../include/parser/parsetree.h.html#LN30"><span class='Ref_to_Macro'>rt_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9699"><span class='Ref_To_Local'>varno</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>query</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN134"><span class='Ref_to_Member'>rtable</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN9701"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>refname</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN354"><span class='Ref_to_Proto'>get_rtable_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9699"><span class='Ref_To_Local'>varno</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN9702"></a>        <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Local'>colinfo</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN274"><span class='Ref_to_Macro'>deparse_columns_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9699"><span class='Ref_To_Local'>varno</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9695"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN9703"></a>        <a href="../../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rtfunc1</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN9704"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>printalias</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1024"><span class='Ref_to_Member'>lateral</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"LATERAL "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Print the FROM item proper */ 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* Normal relation RTE */ 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s%s"</span><span class='Delimiter'>, 
</span>                                 <a href="ruleutils.c.html#LN462"><span class='Ref_to_Macro'>only_marker</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="../../../../contrib/dblink/dblink.c.html#LN111"><span class='Ref_to_Proto'>generate_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Delimiter'>, 
</span>                                                        <a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN923"><span class='Ref_to_EnumConst'>RTE_SUBQUERY</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* Subquery RTE */ 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN368"><span class='Ref_to_Proto'>get_query_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN954"><span class='Ref_to_Member'>subquery</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN108"><span class='Ref_to_Member'>namespaces</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                              <a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN111"><span class='Ref_to_Member'>prettyFlags</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN112"><span class='Ref_to_Member'>wrapColumn</span></a><span class='Delimiter'>, 
</span>                              <a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN113"><span class='Ref_to_Member'>indentLevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN925"><span class='Ref_to_EnumConst'>RTE_FUNCTION</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* Function RTE */ 
</span>                <a href="ruleutils.c.html#LN9703"><span class='Ref_To_Local'>rtfunc1</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN985"><span class='Ref_to_Member'>functions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Omit ROWS FROM() syntax for just one function, unless it 
                 * has both a coldeflist and WITH ORDINALITY. If it has both, 
                 * we must use ROWS FROM() syntax to avoid ambiguity about 
                 * whether the coldeflist includes the ordinality column. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN985"><span class='Ref_to_Member'>functions</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span> <span class='Operator'>&& 
</span>                    <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9703"><span class='Ref_To_Local'>rtfunc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1058"><span class='Ref_to_Member'>funccolnames</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a> <span class='Operator'>|| !</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN986"><span class='Ref_to_Member'>funcordinality</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9703"><span class='Ref_To_Local'>rtfunc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1055"><span class='Ref_to_Member'>funcexpr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Comment_Multi_Line'>/* we'll print the coldeflist below, if it has one */ 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span><a name="LN9745"></a>                    <span class='Keyword'>bool</span>        <span class='Declare_Local'>all_unnest</span><span class='Delimiter'>; 
</span><a name="LN9746"></a>                    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * If all the function calls in the list are to unnest, 
                     * and none need a coldeflist, then collapse the list back 
                     * down to UNNEST(args).  (If we had more than one 
                     * built-in unnest function, this would get more 
                     * difficult.) 
                     * 
                     * XXX This is pretty ugly, since it makes not-terribly- 
                     * future-proof assumptions about what the parser would do 
                     * with the output; but the alternative is to emit our 
                     * nonstandard ROWS FROM() notation for what might have 
                     * been a perfectly spec-compliant multi-argument 
                     * UNNEST(). 
                     */ 
</span>                    <a href="ruleutils.c.html#LN9745"><span class='Ref_To_Local'>all_unnest</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9746"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN985"><span class='Ref_to_Member'>functions</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span><a name="LN9765"></a>                        <a href="../../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rtfunc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9746"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9765"><span class='Ref_To_Local'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1055"><span class='Ref_to_Member'>funcexpr</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a><span class='Parentheses'>)</span> <span class='Operator'>|| 
</span>                            <span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9765"><span class='Ref_To_Local'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1055"><span class='Ref_to_Member'>funcexpr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>funcid <span class='Operator'>!= </span>F_ARRAY_UNNEST <span class='Operator'>|| 
</span>                            <a href="ruleutils.c.html#LN9765"><span class='Ref_To_Local'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1058"><span class='Ref_to_Member'>funccolnames</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="ruleutils.c.html#LN9745"><span class='Ref_To_Local'>all_unnest</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9745"><span class='Ref_To_Local'>all_unnest</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span><a name="LN9778"></a>                        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>allargs</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
                        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9746"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN985"><span class='Ref_to_Member'>functions</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span><a name="LN9782"></a>                            <a href="../../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rtfunc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9746"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN9783"></a>                            <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>args</span> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9782"><span class='Ref_To_Local'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1055"><span class='Ref_to_Member'>funcexpr</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>args<span class='Delimiter'>; 
</span> 
                            <a href="ruleutils.c.html#LN9778"><span class='Ref_To_Local'>allargs</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN219"><span class='Ref_to_Proto'>list_concat</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9778"><span class='Ref_To_Local'>allargs</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN268"><span class='Ref_to_Proto'>list_copy</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9783"><span class='Ref_To_Local'>args</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"UNNEST("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9778"><span class='Ref_To_Local'>allargs</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span><a name="LN9794"></a>                        <span class='Keyword'>int</span>         <span class='Declare_Local'>funcno</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
                        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"ROWS FROM("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9746"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN985"><span class='Ref_to_Member'>functions</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span><a name="LN9799"></a>                            <a href="../../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Declare_Local'>rtfunc</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9746"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9794"><span class='Ref_To_Local'>funcno</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9799"><span class='Ref_To_Local'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1055"><span class='Ref_to_Member'>funcexpr</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9799"><span class='Ref_To_Local'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1058"><span class='Ref_to_Member'>funccolnames</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Comment_Multi_Line'>/* Reconstruct the column definition list */ 
</span>                                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" AS "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <a href="ruleutils.c.html#LN442"><span class='Ref_to_Proto'>get_from_clause_coldeflist</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9799"><span class='Ref_To_Local'>rtfunc</span></a><span class='Delimiter'>, 
</span>                                                           <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                                           <a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <a href="ruleutils.c.html#LN9794"><span class='Ref_To_Local'>funcno</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
                    <span class='Comment_Multi_Line'>/* prevent printing duplicate coldeflist below */ 
</span>                    <a href="ruleutils.c.html#LN9703"><span class='Ref_To_Local'>rtfunc1</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN986"><span class='Ref_to_Member'>funcordinality</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" WITH ORDINALITY"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN926"><span class='Ref_to_EnumConst'>RTE_TABLEFUNC</span></a><span class='Operator'>: 
</span>                <a href="ruleutils.c.html#LN434"><span class='Ref_to_Proto'>get_tablefunc</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN991"><span class='Ref_to_Member'>tablefunc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN927"><span class='Ref_to_EnumConst'>RTE_VALUES</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* Values list RTE */ 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="ruleutils.c.html#LN371"><span class='Ref_to_Proto'>get_values_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN996"><span class='Ref_to_Member'>values_lists</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/parsenodes.h.html#LN928"><span class='Ref_to_EnumConst'>RTE_CTE</span></a><span class='Operator'>: 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1001"><span class='Ref_to_Member'>ctename</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized RTE kind: %d"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch rte-&GT;rtekind &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* Print the relation alias, if needed */ 
</span>        <a href="ruleutils.c.html#LN9704"><span class='Ref_To_Local'>printalias</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1022"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Always print alias if user provided one */ 
</span>            <a href="ruleutils.c.html#LN9704"><span class='Ref_To_Local'>printalias</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9702"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN245"><span class='Ref_to_Member'>printaliases</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Always print alias if we need to print column aliases */ 
</span>            <a href="ruleutils.c.html#LN9704"><span class='Ref_To_Local'>printalias</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * No need to print alias if it's same as relation name (this 
             * would normally be the case, but not if set_rtable_names had to 
             * resolve a conflict). 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9701"><span class='Ref_To_Local'>refname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN451"><span class='Ref_to_Proto'>get_relation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN947"><span class='Ref_to_Member'>relid</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="ruleutils.c.html#LN9704"><span class='Ref_To_Local'>printalias</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN925"><span class='Ref_to_EnumConst'>RTE_FUNCTION</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * For a function RTE, always print alias.  This covers possible 
             * renaming of the function and/or instability of the 
             * FigureColname rules for things that aren't simple functions. 
             * Note we'd need to force it anyway for the columndef list case. 
             */ 
</span>            <a href="ruleutils.c.html#LN9704"><span class='Ref_To_Local'>printalias</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN927"><span class='Ref_to_EnumConst'>RTE_VALUES</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Alias is syntactically required for VALUES */ 
</span>            <a href="ruleutils.c.html#LN9704"><span class='Ref_To_Local'>printalias</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN928"><span class='Ref_to_EnumConst'>RTE_CTE</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * No need to print alias if it's same as CTE name (this would 
             * normally be the case, but not if set_rtable_names had to 
             * resolve a conflict). 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9701"><span class='Ref_To_Local'>refname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1001"><span class='Ref_to_Member'>ctename</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="ruleutils.c.html#LN9704"><span class='Ref_To_Local'>printalias</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9704"><span class='Ref_To_Local'>printalias</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s"</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9701"><span class='Ref_To_Local'>refname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Print the column definitions or aliases, if needed */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9703"><span class='Ref_To_Local'>rtfunc1</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN9703"><span class='Ref_To_Local'>rtfunc1</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1058"><span class='Ref_to_Member'>funccolnames</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Reconstruct the columndef list, which is also the aliases */ 
</span>            <a href="ruleutils.c.html#LN442"><span class='Ref_to_Proto'>get_from_clause_coldeflist</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9703"><span class='Ref_To_Local'>rtfunc1</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9702"><span class='Ref_To_Local'>colinfo</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Else print column aliases as needed */ 
</span>            <a href="ruleutils.c.html#LN440"><span class='Ref_to_Proto'>get_column_alias_list</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9702"><span class='Ref_To_Local'>colinfo</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Tablesample clause must go after any alias */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN936"><span class='Ref_to_Member'>rtekind</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/parsenodes.h.html#LN922"><span class='Ref_to_EnumConst'>RTE_RELATION</span></a> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN949"><span class='Ref_to_Member'>tablesample</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN445"><span class='Ref_to_Proto'>get_tablesample_def</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9700"><span class='Ref_To_Local'>rte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN949"><span class='Ref_to_Member'>tablesample</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(jtnode,RangeTblRe... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN9907"></a>        <a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>j</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Delimiter'>; 
</span><a name="LN9908"></a>        <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Local'>colinfo</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN274"><span class='Ref_to_Macro'>deparse_columns_fetch</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1454"><span class='Ref_to_Member'>rtindex</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9695"><span class='Ref_To_Local'>dpns</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN9909"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>need_paren_on_right</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN9909"><span class='Ref_To_Local'>need_paren_on_right</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <span class='Operator'>!</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1450"><span class='Ref_to_Member'>rarg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1415"><span class='Ref_to_Struct'>RangeTblRef</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <span class='Operator'>!</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1450"><span class='Ref_to_Member'>rarg</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a><span class='Parentheses'>)</span> <span class='Operator'>&&</span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN1444"><span class='Ref_to_Struct'>JoinExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1450"><span class='Ref_to_Member'>rarg</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>alias <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1453"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN438"><span class='Ref_to_Proto'>get_from_clause_item</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1449"><span class='Ref_to_Member'>larg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1447"><span class='Ref_to_Member'>jointype</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN677"><span class='Ref_to_EnumConst'>JOIN_INNER</span></a><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1452"><span class='Ref_to_Member'>quals</span></a><span class='Parentheses'>) 
</span>                    <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" JOIN "</span><span class='Delimiter'>, 
</span>                                         <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                         <a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                         <a href="ruleutils.c.html#LN82"><span class='Ref_to_Const'>PRETTYINDENT_JOIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" CROSS JOIN "</span><span class='Delimiter'>, 
</span>                                         <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                         <a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                         <a href="ruleutils.c.html#LN82"><span class='Ref_to_Const'>PRETTYINDENT_JOIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN678"><span class='Ref_to_EnumConst'>JOIN_LEFT</span></a><span class='Operator'>: 
</span>                <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" LEFT JOIN "</span><span class='Delimiter'>, 
</span>                                     <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                     <a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                     <a href="ruleutils.c.html#LN82"><span class='Ref_to_Const'>PRETTYINDENT_JOIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN679"><span class='Ref_to_EnumConst'>JOIN_FULL</span></a><span class='Operator'>: 
</span>                <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" FULL JOIN "</span><span class='Delimiter'>, 
</span>                                     <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                     <a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                     <a href="ruleutils.c.html#LN82"><span class='Ref_to_Const'>PRETTYINDENT_JOIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/nodes/nodes.h.html#LN680"><span class='Ref_to_EnumConst'>JOIN_RIGHT</span></a><span class='Operator'>: 
</span>                <a href="ruleutils.c.html#LN411"><span class='Ref_to_Proto'>appendContextKeyword</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='String'>" RIGHT JOIN "</span><span class='Delimiter'>, 
</span>                                     <span class='Operator'>-</span><a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                     <a href="ruleutils.c.html#LN81"><span class='Ref_to_Const'>PRETTYINDENT_STD</span></a><span class='Delimiter'>, 
</span>                                     <a href="ruleutils.c.html#LN82"><span class='Ref_to_Const'>PRETTYINDENT_JOIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized join type: %d"</span><span class='Delimiter'>, 
</span>                     <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1447"><span class='Ref_to_Member'>jointype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch j-&GT;jointype &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9909"><span class='Ref_To_Local'>need_paren_on_right</span></a><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN438"><span class='Ref_to_Proto'>get_from_clause_item</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1450"><span class='Ref_to_Member'>rarg</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>query</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9909"><span class='Ref_To_Local'>need_paren_on_right</span></a><span class='Parentheses'>) 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1451"><span class='Ref_to_Member'>usingClause</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN9965"></a>            <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lc</span><span class='Delimiter'>; 
</span><a name="LN9966"></a>            <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" USING ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Use the assigned names, not what's in usingClause */ 
</span>            <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9965"><span class='Ref_To_Local'>lc</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9908"><span class='Ref_To_Local'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN270"><span class='Ref_to_Member'>usingNames</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN9972"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>colname</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9965"><span class='Ref_To_Local'>lc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9966"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>                    <a href="ruleutils.c.html#LN9966"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9972"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1452"><span class='Ref_to_Member'>quals</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" ON "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1452"><span class='Ref_to_Member'>quals</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>))</span> 
                <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN95"><span class='Ref_to_Macro'>PRETTY_PAREN</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1453"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Yes, it's correct to put alias after the right paren ... */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1453"><span class='Ref_to_Member'>alias</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9694"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s"</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9907"><span class='Ref_To_Local'>j</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN1453"><span class='Ref_to_Member'>alias</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN41"><span class='Ref_to_Member'>aliasname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN440"><span class='Ref_to_Proto'>get_column_alias_list</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9908"><span class='Ref_To_Local'>colinfo</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(jtnode,JoinExpr) &raquo; </span> 
    <span class='Control'>else</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized node type: %d"</span><span class='Delimiter'>, 
</span>             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/nodes/nodes.h.html#LN513"><span class='Ref_to_Macro'>nodeTag</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN9692"><span class='Ref_to_Parameter'>jtnode</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_from_clause_item &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_column_alias_list - print column alias list for an RTE 
 * 
 * Caller must already have printed the relation's alias name. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN10014"></a><span class='Declare_Function'>get_column_alias_list</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10016"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10014"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN10017"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN10018"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Don't print aliases if not needed */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN10014"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN245"><span class='Ref_to_Member'>printaliases</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10017"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN10017"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN10014"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN240"><span class='Ref_to_Member'>num_new_cols</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN10017"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN10026"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>colname</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10014"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN241"><span class='Ref_to_Member'>new_colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN10017"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10018"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10016"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN10018"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10016"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10016"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10026"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN10018"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10016"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_column_alias_list &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_from_clause_coldeflist - reproduce FROM clause coldeflist 
 * 
 * When printing a top-level coldeflist (which is syntactically also the 
 * relation's column alias list), use column names from colinfo.  But when 
 * printing a coldeflist embedded inside ROWS FROM(), we prefer to use the 
 * original coldeflist's names, which are available in rtfunc-&GT;funccolnames. 
 * Pass NULL for colinfo to select the latter behavior. 
 * 
 * The coldeflist is appended immediately (no space) to buf.  Caller is 
 * responsible for ensuring that an alias or AS is present before it. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN10054"></a><span class='Declare_Function'>get_from_clause_coldeflist</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1051"><span class='Ref_to_Struct'>RangeTblFunction</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rtfunc</span><span class='Delimiter'>, 
</span><a name="LN10055"></a>                           <a href="ruleutils.c.html#LN206"><span class='Ref_to_Typedef'>deparse_columns</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>colinfo</span><span class='Delimiter'>, 
</span><a name="LN10056"></a>                           <a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10058"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10056"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN10059"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l1</span><span class='Delimiter'>; 
</span><a name="LN10060"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l2</span><span class='Delimiter'>; 
</span><a name="LN10061"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l3</span><span class='Delimiter'>; 
</span><a name="LN10062"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l4</span><span class='Delimiter'>; 
</span><a name="LN10063"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10058"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* there's no forfour(), so must chase one list the hard way */ 
</span>    <a href="ruleutils.c.html#LN10063"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10062"><span class='Ref_To_Local'>l4</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10054"><span class='Ref_to_Parameter'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1058"><span class='Ref_to_Member'>funccolnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN202"><span class='Ref_to_Macro'>forthree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10059"><span class='Ref_To_Local'>l1</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10054"><span class='Ref_to_Parameter'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1059"><span class='Ref_to_Member'>funccoltypes</span></a><span class='Delimiter'>, 
</span>             <a href="ruleutils.c.html#LN10060"><span class='Ref_To_Local'>l2</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10054"><span class='Ref_to_Parameter'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1060"><span class='Ref_to_Member'>funccoltypmods</span></a><span class='Delimiter'>, 
</span>             <a href="ruleutils.c.html#LN10061"><span class='Ref_To_Local'>l3</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10054"><span class='Ref_to_Parameter'>rtfunc</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1061"><span class='Ref_to_Member'>funccolcollations</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN10074"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>atttypid</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN107"><span class='Ref_to_Macro'>lfirst_oid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10059"><span class='Ref_To_Local'>l1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN10075"></a>        <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>atttypmod</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN106"><span class='Ref_to_Macro'>lfirst_int</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10060"><span class='Ref_To_Local'>l2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN10076"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>attcollation</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN107"><span class='Ref_to_Macro'>lfirst_oid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10061"><span class='Ref_To_Local'>l3</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN10077"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attname</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10055"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN10077"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10055"><span class='Ref_to_Parameter'>colinfo</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN224"><span class='Ref_to_Member'>colnames</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN10063"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>else</span> 
            <a href="ruleutils.c.html#LN10077"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10062"><span class='Ref_To_Local'>l4</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10077"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* shouldn't be any dropped columns here */ 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10063"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10058"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10058"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s %s"</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10077"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="format_type.c.html#LN111"><span class='Ref_to_Func'>format_type_with_typemod</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10074"><span class='Ref_To_Local'>atttypid</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10075"><span class='Ref_To_Local'>atttypmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10076"><span class='Ref_To_Local'>attcollation</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="ruleutils.c.html#LN10076"><span class='Ref_To_Local'>attcollation</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/lsyscache.h.html#LN166"><span class='Ref_to_Proto'>get_typcollation</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10074"><span class='Ref_To_Local'>atttypid</span></a><span class='Parentheses'>))</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10058"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" COLLATE %s"</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/ruleutils.h.html#LN34"><span class='Ref_to_Proto'>generate_collation_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10076"><span class='Ref_To_Local'>attcollation</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="ruleutils.c.html#LN10062"><span class='Ref_To_Local'>l4</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10062"><span class='Ref_To_Local'>l4</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN10063"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10058"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_from_clause_coldeflist &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_tablesample_def          - print a TableSampleClause 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN10107"></a><span class='Declare_Function'>get_tablesample_def</span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1071"><span class='Ref_to_Struct'>TableSampleClause</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tablesample</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10109"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10107"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN10110"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>argtypes</span><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN10111"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nargs</span><span class='Delimiter'>; 
</span><a name="LN10112"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We should qualify the handler's function name if it wouldn't be 
     * resolved by lookup in the current search path. 
     */ 
</span>    <a href="ruleutils.c.html#LN10110"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/catalog/pg_type.h.html#LN697"><span class='Ref_to_Const'>INTERNALOID</span></a><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10109"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" TABLESAMPLE %s ("</span><span class='Delimiter'>, 
</span>                     <a href="ruleutils.c.html#LN454"><span class='Ref_to_Proto'>generate_function_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10107"><span class='Ref_to_Parameter'>tablesample</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1074"><span class='Ref_to_Member'>tsmhandler</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                            <a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10110"><span class='Ref_To_Local'>argtypes</span></a><span class='Delimiter'>, 
</span>                                            <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="../../../include/parser/parse_node.h.html#LN34"><span class='Ref_to_EnumConst'>EXPR_KIND_NONE</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10111"><span class='Ref_To_Local'>nargs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10112"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10107"><span class='Ref_to_Parameter'>tablesample</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1075"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10111"><span class='Ref_To_Local'>nargs</span></a><span class='Operator'>++ &GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10109"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10112"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10107"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10109"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10107"><span class='Ref_to_Parameter'>tablesample</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1076"><span class='Ref_to_Member'>repeatable</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10109"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" REPEATABLE ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN10107"><span class='Ref_to_Parameter'>tablesample</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1076"><span class='Ref_to_Member'>repeatable</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10107"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10109"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end get_tablesample_def &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_opclass_name         - fetch name of an index operator class 
 * 
 * The opclass name is appended (after a space) to buf. 
 * 
 * Output is suppressed if the opclass is the default for the given 
 * actual_datatype.  (If you don't want this behavior, just pass 
 * InvalidOid for actual_datatype.) 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN10151"></a><span class='Declare_Function'>get_opclass_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opclass</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>actual_datatype</span><span class='Delimiter'>, 
</span><a name="LN10152"></a>                 <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10154"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>ht_opc</span><span class='Delimiter'>; 
</span><a name="LN10155"></a>    <a href="../../../include/catalog/pg_opclass.h.html#LN67"><span class='Ref_to_Typedef'>Form_pg_opclass</span></a> <span class='Declare_Local'>opcrec</span><span class='Delimiter'>; 
</span><a name="LN10156"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opcname</span><span class='Delimiter'>; 
</span><a name="LN10157"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nspname</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10154"><span class='Ref_To_Local'>ht_opc</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN47"><span class='Ref_to_EnumConst'>CLAOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10151"><span class='Ref_to_Parameter'>opclass</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10154"><span class='Ref_To_Local'>ht_opc</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for opclass %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10151"><span class='Ref_to_Parameter'>opclass</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10155"><span class='Ref_To_Local'>opcrec</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_opclass.h.html#LN67"><span class='Ref_to_Typedef'>Form_pg_opclass</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10154"><span class='Ref_To_Local'>ht_opc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10151"><span class='Ref_to_Parameter'>actual_datatype</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>        <a href="../../../include/commands/defrem.h.html#LN44"><span class='Ref_to_Proto'>GetDefaultOpClass</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10151"><span class='Ref_to_Parameter'>actual_datatype</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10155"><span class='Ref_To_Local'>opcrec</span></a><span class='Operator'>-&GT;</span>opcmethod<span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="ruleutils.c.html#LN10151"><span class='Ref_to_Parameter'>opclass</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Okay, we need the opclass name.  Do we need to qualify it? */ 
</span>        <a href="ruleutils.c.html#LN10156"><span class='Ref_To_Local'>opcname</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10155"><span class='Ref_To_Local'>opcrec</span></a><span class='Operator'>-&GT;</span>opcname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/namespace.h.html#LN83"><span class='Ref_to_Proto'>OpclassIsVisible</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10151"><span class='Ref_to_Parameter'>opclass</span></a><span class='Parentheses'>))</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10152"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s"</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10156"><span class='Ref_To_Local'>opcname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN10157"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10155"><span class='Ref_To_Local'>opcrec</span></a><span class='Operator'>-&GT;</span>opcnamespace<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10152"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><span class='String'>" %s.%s"</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10157"><span class='Ref_To_Local'>nspname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10156"><span class='Ref_To_Local'>opcname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10154"><span class='Ref_To_Local'>ht_opc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_opclass_name &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * processIndirection - take care of array and subfield assignment 
 * 
 * We strip any top-level FieldStore or assignment ArrayRef nodes that 
 * appear in the input, printing them as decoration for the base column 
 * name (which we assume the caller just printed).  Return the subexpression 
 * that's to be assigned. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>* 
</span><a name="LN10191"></a><span class='Declare_Function'>processIndirection</span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>node</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10193"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10191"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10191"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10191"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN10201"></a>            <a href="../../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fstore</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN763"><span class='Ref_to_Struct'>FieldStore</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN10191"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span><a name="LN10202"></a>            <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typrelid</span><span class='Delimiter'>; 
</span><a name="LN10203"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>fieldname</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* lookup tuple type */ 
</span>            <a href="ruleutils.c.html#LN10202"><span class='Ref_To_Local'>typrelid</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN156"><span class='Ref_to_Proto'>get_typ_typrelid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10201"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN769"><span class='Ref_to_Member'>resulttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10202"><span class='Ref_To_Local'>typrelid</span></a><span class='Parentheses'>))</span> 
                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"argument type %s of FieldStore is not a tuple type"</span><span class='Delimiter'>, 
</span>                     <a href="format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10201"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN769"><span class='Ref_to_Member'>resulttype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Print the field name.  There should only be one target field in 
             * stored rules.  There could be more than that in executable 
             * target lists, but this function cannot be used for that case. 
             */ 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10201"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN768"><span class='Ref_to_Member'>fieldnums</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN10203"><span class='Ref_To_Local'>fieldname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN86"><span class='Ref_to_Proto'>get_relid_attribute_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10202"><span class='Ref_To_Local'>typrelid</span></a><span class='Delimiter'>, 
</span>                                            <a href="../../../include/nodes/pg_list.h.html#LN111"><span class='Ref_to_Macro'>linitial_int</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10201"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN768"><span class='Ref_to_Member'>fieldnums</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10193"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>".%s"</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10203"><span class='Ref_To_Local'>fieldname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * We ignore arg since it should be an uninteresting reference to 
             * the target column or subcolumn. 
             */ 
</span>            <a href="ruleutils.c.html#LN10191"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10201"><span class='Ref_To_Local'>fstore</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN767"><span class='Ref_to_Member'>newvals</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsA(node,FieldStore) &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10191"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN10229"></a>            <a href="../../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>aref</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN10191"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10229"><span class='Ref_To_Local'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN408"><span class='Ref_to_Member'>refassgnexpr</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN450"><span class='Ref_to_Proto'>printSubscripts</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10229"><span class='Ref_To_Local'>aref</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10191"><span class='Ref_to_Parameter'>context</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * We ignore refexpr since it should be an uninteresting reference 
             * to the target column or subcolumn. 
             */ 
</span>            <a href="ruleutils.c.html#LN10191"><span class='Ref_to_Parameter'>node</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="ruleutils.c.html#LN10229"><span class='Ref_To_Local'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN408"><span class='Ref_to_Member'>refassgnexpr</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;; &raquo; </span> 
 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN10191"><span class='Ref_to_Parameter'>node</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end processIndirection &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN10249"></a><span class='Declare_Function'>printSubscripts</span><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN395"><span class='Ref_to_Struct'>ArrayRef</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>aref</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN105"><span class='Ref_to_Typedef'>deparse_context</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>context</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10251"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10249"><span class='Ref_to_Parameter'>context</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN107"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span><a name="LN10252"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lowlist_item</span><span class='Delimiter'>; 
</span><a name="LN10253"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>uplist_item</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10252"><span class='Ref_To_Local'>lowlist_item</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN75"><span class='Ref_to_Func'>list_head</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10249"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN404"><span class='Ref_to_Member'>reflowerindexpr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* could be NULL */ 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10253"><span class='Ref_To_Local'>uplist_item</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10249"><span class='Ref_to_Parameter'>aref</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN402"><span class='Ref_to_Member'>refupperindexpr</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10251"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'['</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10252"><span class='Ref_To_Local'>lowlist_item</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* If subexpression is NULL, get_rule_expr prints nothing */ 
</span>            <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10252"><span class='Ref_To_Local'>lowlist_item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10249"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10251"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>':'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN10252"><span class='Ref_To_Local'>lowlist_item</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN104"><span class='Ref_to_Macro'>lnext</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10252"><span class='Ref_To_Local'>lowlist_item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Comment_Multi_Line'>/* If subexpression is NULL, get_rule_expr prints nothing */ 
</span>        <a href="ruleutils.c.html#LN414"><span class='Ref_to_Proto'>get_rule_expr</span></a><span class='Parentheses'>((</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10253"><span class='Ref_To_Local'>uplist_item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10249"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10251"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>']'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end printSubscripts &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * quote_identifier         - Quote an identifier only if needed 
 * 
 * When quotes are needed, we palloc the required space; slightly 
 * space-wasteful but well worth it for notational simplicity. 
 */ 
</span><span class='Keyword'>const char </span><span class='Operator'>* 
</span><a name="LN10279"></a><span class='Declare_Function'>quote_identifier</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>ident</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * Can avoid quoting if ident starts with a lowercase letter or underscore 
     * and contains only lowercase letters, digits, and underscores, *and* is 
     * not any SQL keyword.  Otherwise, supply quotes. 
     */ 
</span><a name="LN10286"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nquotes</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN10287"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>safe</span><span class='Delimiter'>; 
</span><a name="LN10288"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span><a name="LN10289"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN10290"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>optr</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * would like to use &LT;ctype.h&GT; macros here, but they might yield unwanted 
     * locale-specific results... 
     */ 
</span>    <a href="ruleutils.c.html#LN10287"><span class='Ref_To_Local'>safe</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="ruleutils.c.html#LN10279"><span class='Ref_to_Parameter'>ident</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>&GT;= </span><span class='String'>'a'</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN10279"><span class='Ref_to_Parameter'>ident</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>&LT;= </span><span class='String'>'z'</span><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="ruleutils.c.html#LN10279"><span class='Ref_to_Parameter'>ident</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'_'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10288"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10279"><span class='Ref_to_Parameter'>ident</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="ruleutils.c.html#LN10288"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN10288"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN10300"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>ch</span> <span class='Operator'>= *</span><a href="ruleutils.c.html#LN10288"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="ruleutils.c.html#LN10300"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>&GT;= </span><span class='String'>'a'</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN10300"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>&LT;= </span><span class='String'>'z'</span><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>            <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10300"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>&GT;= </span><span class='String'>'0'</span> <span class='Operator'>&& </span><a href="ruleutils.c.html#LN10300"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>&LT;= </span><span class='String'>'9'</span><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>            <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10300"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'_'</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* okay */ 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="ruleutils.c.html#LN10287"><span class='Ref_To_Local'>safe</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10300"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>                <a href="ruleutils.c.html#LN10286"><span class='Ref_To_Local'>nquotes</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../fe_utils/string_utils.c.html#LN27"><span class='Ref_to_Global_Var'>quote_all_identifiers</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN10287"><span class='Ref_To_Local'>safe</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10287"><span class='Ref_To_Local'>safe</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Check for keyword.  We quote keywords except for unreserved ones. 
         * (In some cases we could avoid quoting a col_name or type_func_name 
         * keyword, but it seems much harder than it's worth to tell that.) 
         * 
         * Note: ScanKeywordLookup() does case-insensitive comparison, but 
         * that's fine, since we already know we have all-lower-case. 
         */ 
</span><a name="LN10329"></a>        <span class='Keyword'>const </span><a href="../../../include/common/keywords.h.html#LN23"><span class='Ref_to_Struct'>ScanKeyword</span></a> <span class='Operator'>*</span><span class='Declare_Local'>keyword</span> <span class='Operator'>= </span><a href="../../../include/common/keywords.h.html#LN39"><span class='Ref_to_Proto'>ScanKeywordLookup</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10279"><span class='Ref_to_Parameter'>ident</span></a><span class='Delimiter'>, 
</span>                                                       <a href="../../../common/keywords.c.html#LN40"><span class='Ref_to_Global_Var'>ScanKeywords</span></a><span class='Delimiter'>, 
</span>                                                       <a href="../../../common/keywords.c.html#LN44"><span class='Ref_to_Global_Var'>NumScanKeywords</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10329"><span class='Ref_To_Local'>keyword</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="ruleutils.c.html#LN10329"><span class='Ref_To_Local'>keyword</span></a><span class='Operator'>-&GT;</span><a href="../../../include/common/keywords.h.html#LN27"><span class='Ref_to_Member'>category</span></a> <span class='Operator'>!= </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>            <a href="ruleutils.c.html#LN10287"><span class='Ref_To_Local'>safe</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10287"><span class='Ref_To_Local'>safe</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="ruleutils.c.html#LN10279"><span class='Ref_to_Parameter'>ident</span></a><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* no change needed */ 
</span> 
    <a href="ruleutils.c.html#LN10289"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10279"><span class='Ref_to_Parameter'>ident</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><a href="ruleutils.c.html#LN10286"><span class='Ref_To_Local'>nquotes</span></a> <span class='Operator'>+ </span><span class='Number'>2</span> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10290"><span class='Ref_To_Local'>optr</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10289"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="ruleutils.c.html#LN10290"><span class='Ref_To_Local'>optr</span></a><span class='Operator'>++ = </span><span class='String'>'"'</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10288"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10279"><span class='Ref_to_Parameter'>ident</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="ruleutils.c.html#LN10288"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN10288"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN10346"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>ch</span> <span class='Operator'>= *</span><a href="ruleutils.c.html#LN10288"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10346"><span class='Ref_To_Local'>ch</span></a> <span class='Operator'>== </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>            <span class='Operator'>*</span><a href="ruleutils.c.html#LN10290"><span class='Ref_To_Local'>optr</span></a><span class='Operator'>++ = </span><span class='String'>'"'</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="ruleutils.c.html#LN10290"><span class='Ref_To_Local'>optr</span></a><span class='Operator'>++ = </span><a href="ruleutils.c.html#LN10346"><span class='Ref_To_Local'>ch</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Operator'>*</span><a href="ruleutils.c.html#LN10290"><span class='Ref_To_Local'>optr</span></a><span class='Operator'>++ = </span><span class='String'>'"'</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="ruleutils.c.html#LN10290"><span class='Ref_To_Local'>optr</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN10289"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end quote_identifier &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * quote_qualified_identifier   - Quote a possibly-qualified identifier 
 * 
 * Return a name of the form qualifier.ident, or just ident if qualifier 
 * is NULL, quoting each component if necessary.  The result is palloc'd. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN10365"></a><span class='Declare_Function'>quote_qualified_identifier</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>qualifier</span><span class='Delimiter'>, 
</span><a name="LN10366"></a>                           <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>ident</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10368"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10368"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10365"><span class='Ref_to_Parameter'>qualifier</span></a><span class='Parentheses'>) 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10368"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10365"><span class='Ref_to_Parameter'>qualifier</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10368"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10366"><span class='Ref_to_Parameter'>ident</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="ruleutils.c.html#LN10368"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_relation_name 
 *      Get the unqualified name of a relation specified by OID 
 * 
 * This differs from the underlying get_rel_name() function in that it will 
 * throw error instead of silently returning NULL if the OID is bad. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN10385"></a><span class='Declare_Function'>get_relation_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10387"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>relname</span> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN124"><span class='Ref_to_Proto'>get_rel_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10385"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN10387"><span class='Ref_To_Local'>relname</span></a><span class='Parentheses'>) 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for relation %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10385"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="ruleutils.c.html#LN10387"><span class='Ref_To_Local'>relname</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * generate_relation_name 
 *      Compute the name to display for a relation specified by OID 
 * 
 * The result includes all necessary quoting and schema-prefixing. 
 * 
 * If namespaces isn't NIL, it must be a list of deparse_namespace nodes. 
 * We will forcibly qualify the relation name if it equals any CTE name 
 * visible in the namespace list. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN10405"></a><span class='Declare_Function'>generate_relation_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>namespaces</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10407"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN10408"></a>    <a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a> <span class='Declare_Local'>reltup</span><span class='Delimiter'>; 
</span><a name="LN10409"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>need_qual</span><span class='Delimiter'>; 
</span><a name="LN10410"></a>    <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>nslist</span><span class='Delimiter'>; 
</span><a name="LN10411"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>relname</span><span class='Delimiter'>; 
</span><a name="LN10412"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nspname</span><span class='Delimiter'>; 
</span><a name="LN10413"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10407"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10405"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10407"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for relation %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10405"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10408"><span class='Ref_To_Local'>reltup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10407"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10411"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10408"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>relname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check for conflicting CTE name */ 
</span>    <a href="ruleutils.c.html#LN10409"><span class='Ref_To_Local'>need_qual</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10410"><span class='Ref_To_Local'>nslist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10405"><span class='Ref_to_Parameter'>namespaces</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN10425"></a>        <a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dpns</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN146"><span class='Ref_to_Typedef'>deparse_namespace</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10410"><span class='Ref_To_Local'>nslist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN10426"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ctlist</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10426"><span class='Ref_To_Local'>ctlist</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10425"><span class='Ref_To_Local'>dpns</span></a><span class='Operator'>-&GT;</span><a href="ruleutils.c.html#LN151"><span class='Ref_to_Member'>ctes</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN10430"></a>            <a href="../../../include/nodes/parsenodes.h.html#LN1339"><span class='Ref_to_Struct'>CommonTableExpr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cte</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/parsenodes.h.html#LN1339"><span class='Ref_to_Struct'>CommonTableExpr</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10426"><span class='Ref_To_Local'>ctlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10430"><span class='Ref_To_Local'>cte</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/parsenodes.h.html#LN1342"><span class='Ref_to_Member'>ctename</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10411"><span class='Ref_To_Local'>relname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="ruleutils.c.html#LN10409"><span class='Ref_To_Local'>need_qual</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10409"><span class='Ref_To_Local'>need_qual</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Otherwise, qualify the name if not visible in search path */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN10409"><span class='Ref_To_Local'>need_qual</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN10409"><span class='Ref_To_Local'>need_qual</span></a> <span class='Operator'>= !</span><a href="../../../include/catalog/namespace.h.html#LN65"><span class='Ref_to_Proto'>RelationIsVisible</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10405"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10409"><span class='Ref_To_Local'>need_qual</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN10412"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10408"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>relnamespace<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN10412"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10413"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN78"><span class='Ref_to_Proto'>quote_qualified_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10412"><span class='Ref_To_Local'>nspname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10411"><span class='Ref_To_Local'>relname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10407"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN10413"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end generate_relation_name &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * generate_qualified_relation_name 
 *      Compute the name to display for a relation specified by OID 
 * 
 * As above, but unconditionally schema-qualify the name. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN10465"></a><span class='Declare_Function'>generate_qualified_relation_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10467"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN10468"></a>    <a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a> <span class='Declare_Local'>reltup</span><span class='Delimiter'>; 
</span><a name="LN10469"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>relname</span><span class='Delimiter'>; 
</span><a name="LN10470"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nspname</span><span class='Delimiter'>; 
</span><a name="LN10471"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10467"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10465"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10467"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for relation %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10465"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10468"><span class='Ref_To_Local'>reltup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10467"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10469"><span class='Ref_To_Local'>relname</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10468"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>relname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10470"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10468"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>relnamespace<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN10470"><span class='Ref_To_Local'>nspname</span></a><span class='Parentheses'>) 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for namespace %u"</span><span class='Delimiter'>, 
</span>             <a href="ruleutils.c.html#LN10468"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>relnamespace<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10471"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN78"><span class='Ref_to_Proto'>quote_qualified_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10470"><span class='Ref_To_Local'>nspname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10469"><span class='Ref_To_Local'>relname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10467"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN10471"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end generate_qualified_relation_name &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * generate_function_name 
 *      Compute the name to display for a function specified by OID, 
 *      given that it is being called with the specified actual arg names and 
 *      types.  (Those matter because of ambiguous-function resolution rules.) 
 * 
 * If we're dealing with a potentially variadic function (in practice, this 
 * means a FuncExpr or Aggref, not some other way of calling a function), then 
 * has_variadic must specify whether variadic arguments have been merged, 
 * and *use_variadic_p will be set to indicate whether to print VARIADIC in 
 * the output.  For non-FuncExpr cases, has_variadic should be FALSE and 
 * use_variadic_p can be NULL. 
 * 
 * The result includes all necessary quoting and schema-prefixing. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN10507"></a><span class='Declare_Function'>generate_function_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nargs</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>argnames</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>argtypes</span><span class='Delimiter'>, 
</span><a name="LN10508"></a>                       <span class='Keyword'>bool </span><span class='Declare_Parameter'>has_variadic</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>use_variadic_p</span><span class='Delimiter'>, 
</span><a name="LN10509"></a>                       <a href="../../../include/parser/parse_node.h.html#LN32"><span class='Ref_to_Enum'>ParseExprKind</span></a> <span class='Declare_Parameter'>special_exprkind</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10511"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN10512"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>proctup</span><span class='Delimiter'>; 
</span><a name="LN10513"></a>    <a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a> <span class='Declare_Local'>procform</span><span class='Delimiter'>; 
</span><a name="LN10514"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>proname</span><span class='Delimiter'>; 
</span><a name="LN10515"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>use_variadic</span><span class='Delimiter'>; 
</span><a name="LN10516"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nspname</span><span class='Delimiter'>; 
</span><a name="LN10517"></a>    <a href="../../../include/parser/parse_func.h.html#LN21"><span class='Ref_to_Typedef'>FuncDetailCode</span></a> <span class='Declare_Local'>p_result</span><span class='Delimiter'>; 
</span><a name="LN10518"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>p_funcid</span><span class='Delimiter'>; 
</span><a name="LN10519"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>p_rettype</span><span class='Delimiter'>; 
</span><a name="LN10520"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>p_retset</span><span class='Delimiter'>; 
</span><a name="LN10521"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>p_nvargs</span><span class='Delimiter'>; 
</span><a name="LN10522"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>p_vatype</span><span class='Delimiter'>; 
</span><a name="LN10523"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>p_true_typeids</span><span class='Delimiter'>; 
</span><a name="LN10524"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>force_qualify</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10512"><span class='Ref_To_Local'>proctup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10507"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10512"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10507"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10513"><span class='Ref_To_Local'>procform</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10512"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10514"><span class='Ref_To_Local'>proname</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10513"><span class='Ref_To_Local'>procform</span></a><span class='Operator'>-&GT;</span>proname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Due to parser hacks to avoid needing to reserve CUBE, we need to force 
     * qualification in some special cases. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10509"><span class='Ref_to_Parameter'>special_exprkind</span></a> <span class='Operator'>== </span><a href="../../../include/parser/parse_node.h.html#LN51"><span class='Ref_to_EnumConst'>EXPR_KIND_GROUP_BY</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10514"><span class='Ref_To_Local'>proname</span></a><span class='Delimiter'>, </span><span class='String'>"cube"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span>strcmp<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10514"><span class='Ref_To_Local'>proname</span></a><span class='Delimiter'>, </span><span class='String'>"rollup"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="ruleutils.c.html#LN10524"><span class='Ref_To_Local'>force_qualify</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Determine whether VARIADIC should be printed.  We must do this first 
     * since it affects the lookup rules in func_get_detail(). 
     * 
     * Currently, we always print VARIADIC if the function has a merged 
     * variadic-array argument.  Note that this is always the case for 
     * functions taking a VARIADIC argument type other than VARIADIC ANY. 
     * 
     * In principle, if VARIADIC wasn't originally specified and the array 
     * actual argument is deconstructable, we could print the array elements 
     * separately and not print VARIADIC, thus more nearly reproducing the 
     * original input.  For the moment that seems like too much complication 
     * for the benefit, and anyway we do not know whether VARIADIC was 
     * originally specified if it's a non-ANY type. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10508"><span class='Ref_to_Parameter'>use_variadic_p</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Parser should not have set funcvariadic unless fn is variadic */ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN10508"><span class='Ref_to_Parameter'>has_variadic</span></a> <span class='Operator'>|| </span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10513"><span class='Ref_To_Local'>procform</span></a><span class='Operator'>-&GT;</span>provariadic<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN10515"><span class='Ref_To_Local'>use_variadic</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10508"><span class='Ref_to_Parameter'>has_variadic</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="ruleutils.c.html#LN10508"><span class='Ref_to_Parameter'>use_variadic_p</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10515"><span class='Ref_To_Local'>use_variadic</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN10508"><span class='Ref_to_Parameter'>has_variadic</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN10515"><span class='Ref_To_Local'>use_variadic</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * The idea here is to schema-qualify only if the parser would fail to 
     * resolve the correct function given the unqualified func name with the 
     * specified argtypes and VARIADIC flag.  But if we already decided to 
     * force qualification, then we can skip the lookup and pretend we didn't 
     * find it. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN10524"><span class='Ref_To_Local'>force_qualify</span></a><span class='Parentheses'>) 
</span>        <a href="ruleutils.c.html#LN10517"><span class='Ref_To_Local'>p_result</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parse_func.h.html#LN35"><span class='Ref_to_Proto'>func_get_detail</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="../../nodes/value.c.html#LN51"><span class='Ref_to_Func'>makeString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10514"><span class='Ref_To_Local'>proname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                   <a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10507"><span class='Ref_to_Parameter'>argnames</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10507"><span class='Ref_to_Parameter'>nargs</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10507"><span class='Ref_to_Parameter'>argtypes</span></a><span class='Delimiter'>, 
</span>                                   <span class='Operator'>!</span><a href="ruleutils.c.html#LN10515"><span class='Ref_To_Local'>use_variadic</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                   <span class='Operator'>&</span><a href="ruleutils.c.html#LN10518"><span class='Ref_To_Local'>p_funcid</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10519"><span class='Ref_To_Local'>p_rettype</span></a><span class='Delimiter'>, 
</span>                                   <span class='Operator'>&</span><a href="ruleutils.c.html#LN10520"><span class='Ref_To_Local'>p_retset</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10521"><span class='Ref_To_Local'>p_nvargs</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10522"><span class='Ref_To_Local'>p_vatype</span></a><span class='Delimiter'>, 
</span>                                   <span class='Operator'>&</span><a href="ruleutils.c.html#LN10523"><span class='Ref_To_Local'>p_true_typeids</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN10517"><span class='Ref_To_Local'>p_result</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parse_func.h.html#LN23"><span class='Ref_to_EnumConst'>FUNCDETAIL_NOTFOUND</span></a><span class='Delimiter'>; 
</span>        <a href="ruleutils.c.html#LN10518"><span class='Ref_To_Local'>p_funcid</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="ruleutils.c.html#LN10517"><span class='Ref_To_Local'>p_result</span></a> <span class='Operator'>== </span><a href="../../../include/parser/parse_func.h.html#LN25"><span class='Ref_to_EnumConst'>FUNCDETAIL_NORMAL</span></a> <span class='Operator'>|| 
</span>         <a href="ruleutils.c.html#LN10517"><span class='Ref_To_Local'>p_result</span></a> <span class='Operator'>== </span><a href="../../../include/parser/parse_func.h.html#LN26"><span class='Ref_to_EnumConst'>FUNCDETAIL_AGGREGATE</span></a> <span class='Operator'>|| 
</span>         <a href="ruleutils.c.html#LN10517"><span class='Ref_To_Local'>p_result</span></a> <span class='Operator'>== </span><a href="../../../include/parser/parse_func.h.html#LN27"><span class='Ref_to_EnumConst'>FUNCDETAIL_WINDOWFUNC</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>        <a href="ruleutils.c.html#LN10518"><span class='Ref_To_Local'>p_funcid</span></a> <span class='Operator'>== </span><a href="ruleutils.c.html#LN10507"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span> 
        <a href="ruleutils.c.html#LN10516"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN10516"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10513"><span class='Ref_To_Local'>procform</span></a><span class='Operator'>-&GT;</span>pronamespace<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10511"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN78"><span class='Ref_to_Proto'>quote_qualified_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10516"><span class='Ref_To_Local'>nspname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10514"><span class='Ref_To_Local'>proname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10512"><span class='Ref_To_Local'>proctup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN10511"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end generate_function_name &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * generate_operator_name 
 *      Compute the name to display for an operator specified by OID, 
 *      given that it is being called with the specified actual arg types. 
 *      (Arg types matter because of ambiguous-operator resolution rules. 
 *      Pass InvalidOid for unused arg of a unary operator.) 
 * 
 * The result includes all necessary quoting and schema-prefixing, 
 * plus the OPERATOR() decoration needed to use a qualified operator name 
 * in an expression. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN10617"></a><span class='Declare_Function'>generate_operator_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>operid</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>arg1</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>arg2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10619"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN10620"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>opertup</span><span class='Delimiter'>; 
</span><a name="LN10621"></a>    <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>operform</span><span class='Delimiter'>; 
</span><a name="LN10622"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprname</span><span class='Delimiter'>; 
</span><a name="LN10623"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nspname</span><span class='Delimiter'>; 
</span><a name="LN10624"></a>    <a href="../../../include/parser/parse_oper.h.html#LN21"><span class='Ref_to_Typedef'>Operator</span></a>    <span class='Declare_Local'>p_result</span><span class='Delimiter'>; 
</span> 
    <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10619"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10620"><span class='Ref_To_Local'>opertup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10617"><span class='Ref_to_Parameter'>operid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10620"><span class='Ref_To_Local'>opertup</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for operator %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10617"><span class='Ref_to_Parameter'>operid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10621"><span class='Ref_To_Local'>operform</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10620"><span class='Ref_To_Local'>opertup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10622"><span class='Ref_To_Local'>oprname</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10621"><span class='Ref_To_Local'>operform</span></a><span class='Operator'>-&GT;</span>oprname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * The idea here is to schema-qualify only if the parser would fail to 
     * resolve the correct operator given the unqualified op name with the 
     * specified argtypes. 
     */ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10621"><span class='Ref_To_Local'>operform</span></a><span class='Operator'>-&GT;</span>oprkind<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <span class='String'>'b'</span><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN10624"><span class='Ref_To_Local'>p_result</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parse_oper.h.html#LN31"><span class='Ref_to_Proto'>oper</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="../../nodes/value.c.html#LN51"><span class='Ref_to_Func'>makeString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10622"><span class='Ref_To_Local'>oprname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10617"><span class='Ref_to_Parameter'>arg1</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10617"><span class='Ref_to_Parameter'>arg2</span></a><span class='Delimiter'>, 
</span>                            <span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'l'</span><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN10624"><span class='Ref_To_Local'>p_result</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parse_oper.h.html#LN35"><span class='Ref_to_Proto'>left_oper</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="../../nodes/value.c.html#LN51"><span class='Ref_to_Func'>makeString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10622"><span class='Ref_To_Local'>oprname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10617"><span class='Ref_to_Parameter'>arg2</span></a><span class='Delimiter'>, 
</span>                                 <span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <span class='String'>'r'</span><span class='Operator'>: 
</span>            <a href="ruleutils.c.html#LN10624"><span class='Ref_To_Local'>p_result</span></a> <span class='Operator'>= </span><a href="../../../include/parser/parse_oper.h.html#LN33"><span class='Ref_to_Proto'>right_oper</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="../../nodes/value.c.html#LN51"><span class='Ref_to_Func'>makeString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10622"><span class='Ref_To_Local'>oprname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10617"><span class='Ref_to_Parameter'>arg1</span></a><span class='Delimiter'>, 
</span>                                  <span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized oprkind: %d"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10621"><span class='Ref_To_Local'>operform</span></a><span class='Operator'>-&GT;</span>oprkind<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN10624"><span class='Ref_To_Local'>p_result</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10624"><span class='Ref_To_Local'>p_result</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="../../../include/parser/parse_oper.h.html#LN56"><span class='Ref_to_Proto'>oprid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10624"><span class='Ref_To_Local'>p_result</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="ruleutils.c.html#LN10617"><span class='Ref_to_Parameter'>operid</span></a><span class='Parentheses'>)</span> 
        <a href="ruleutils.c.html#LN10623"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="ruleutils.c.html#LN10623"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10621"><span class='Ref_To_Local'>operform</span></a><span class='Operator'>-&GT;</span>oprnamespace<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10619"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"OPERATOR(%s."</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10623"><span class='Ref_To_Local'>nspname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10619"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10622"><span class='Ref_To_Local'>oprname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10623"><span class='Ref_To_Local'>nspname</span></a><span class='Parentheses'>) 
</span>        <a href="../../replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10619"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10624"><span class='Ref_To_Local'>p_result</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10624"><span class='Ref_To_Local'>p_result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10620"><span class='Ref_To_Local'>opertup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN10619"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end generate_operator_name &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * generate_collation_name 
 *      Compute the name to display for a collation specified by OID 
 * 
 * The result includes all necessary quoting and schema-prefixing. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN10687"></a><span class='Declare_Function'>generate_collation_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>collid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10689"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN10690"></a>    <a href="../../../include/catalog/pg_collation.h.html#LN51"><span class='Ref_to_Typedef'>Form_pg_collation</span></a> <span class='Declare_Local'>colltup</span><span class='Delimiter'>; 
</span><a name="LN10691"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>collname</span><span class='Delimiter'>; 
</span><a name="LN10692"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nspname</span><span class='Delimiter'>; 
</span><a name="LN10693"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10689"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN49"><span class='Ref_to_EnumConst'>COLLOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10687"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10689"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for collation %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10687"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10690"><span class='Ref_To_Local'>colltup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_collation.h.html#LN51"><span class='Ref_to_Typedef'>Form_pg_collation</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10689"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="ruleutils.c.html#LN10691"><span class='Ref_To_Local'>collname</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10690"><span class='Ref_To_Local'>colltup</span></a><span class='Operator'>-&GT;</span>collname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/catalog/namespace.h.html#LN89"><span class='Ref_to_Proto'>CollationIsVisible</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10687"><span class='Ref_to_Parameter'>collid</span></a><span class='Parentheses'>))</span> 
        <a href="ruleutils.c.html#LN10692"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10690"><span class='Ref_To_Local'>colltup</span></a><span class='Operator'>-&GT;</span>collnamespace<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="ruleutils.c.html#LN10692"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10693"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN78"><span class='Ref_to_Proto'>quote_qualified_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10692"><span class='Ref_To_Local'>nspname</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10691"><span class='Ref_To_Local'>collname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10689"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN10693"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end generate_collation_name &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Given a C string, produce a TEXT datum. 
 * 
 * We assume that the input was palloc'd and may be freed. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a> <span class='Operator'>* 
</span><a name="LN10719"></a><span class='Declare_Function'>string_to_text</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10721"></a>    <a href="../../../../contrib/seg/segparse.y.html#LN46"><span class='Ref_to_Global_Var'>text</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10721"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN85"><span class='Ref_to_Proto'>cstring_to_text</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10719"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10719"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="ruleutils.c.html#LN10721"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Generate a C string representing a relation's reloptions, or NULL if none. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN10732"></a><span class='Declare_Function'>flatten_reloptions</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10734"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN10735"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span><span class='Delimiter'>; 
</span><a name="LN10736"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>reloptions</span><span class='Delimiter'>; 
</span><a name="LN10737"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10735"><span class='Ref_To_Local'>tuple</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10732"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10735"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for relation %u"</span><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10732"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="ruleutils.c.html#LN10736"><span class='Ref_To_Local'>reloptions</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="ruleutils.c.html#LN10735"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, 
</span>                                 <a href="../../../include/catalog/pg_class.h.html#LN133"><span class='Ref_to_Const'>Anum_pg_class_reloptions</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10737"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="ruleutils.c.html#LN10737"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN10747"></a>        <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN10748"></a>        <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>options</span><span class='Delimiter'>; 
</span><a name="LN10749"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>noptions</span><span class='Delimiter'>; 
</span><a name="LN10750"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <a href="../../lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10747"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/utils/array.h.html#LN382"><span class='Ref_to_Proto'>deconstruct_array</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/array.h.html#LN241"><span class='Ref_to_Macro'>DatumGetArrayTypeP</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10736"><span class='Ref_To_Local'>reloptions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN26"><span class='Ref_to_Const'>TEXTOID</span></a><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>'i'</span><span class='Delimiter'>, 
</span>                          <span class='Operator'>&</span><a href="ruleutils.c.html#LN10748"><span class='Ref_To_Local'>options</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10749"><span class='Ref_To_Local'>noptions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10750"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN10750"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="ruleutils.c.html#LN10749"><span class='Ref_To_Local'>noptions</span></a><span class='Delimiter'>; </span><a href="ruleutils.c.html#LN10750"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN10760"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>option</span> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10748"><span class='Ref_To_Local'>options</span></a><span class='Delimiter'>[</span><a href="ruleutils.c.html#LN10750"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN10761"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>name</span><span class='Delimiter'>; 
</span><a name="LN10762"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>separator</span><span class='Delimiter'>; 
</span><a name="LN10763"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>value</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Each array element should have the form name=value.  If the "=" 
             * is missing for some reason, treat it like an empty value. 
             */ 
</span>            <a href="ruleutils.c.html#LN10761"><span class='Ref_To_Local'>name</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10760"><span class='Ref_To_Local'>option</span></a><span class='Delimiter'>; 
</span>            <a href="ruleutils.c.html#LN10762"><span class='Ref_To_Local'>separator</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10760"><span class='Ref_To_Local'>option</span></a><span class='Delimiter'>, </span><span class='String'>'='</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10762"><span class='Ref_To_Local'>separator</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="ruleutils.c.html#LN10762"><span class='Ref_To_Local'>separator</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>                <span class='Keyword'>value </span><span class='Operator'>= </span><a href="ruleutils.c.html#LN10762"><span class='Ref_To_Local'>separator</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
                <span class='Keyword'>value </span><span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10750"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s="</span><span class='Delimiter'>, </span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10761"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * In general we need to quote the value; but to avoid unnecessary 
             * clutter, do not quote if it is an identifier that would not 
             * need quoting.  (We could also allow numbers, but that is a bit 
             * trickier than it looks --- for example, are leading zeroes 
             * significant?  We don't want to assume very much here about what 
             * custom reloptions might mean.) 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Keyword'>value</span><span class='Parentheses'>)</span> 
                <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="ruleutils.c.html#LN432"><span class='Ref_to_Proto'>simple_quote_literal</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="ruleutils.c.html#LN10747"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10760"><span class='Ref_To_Local'>option</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;noptions;i++ &raquo; </span> 
 
        <a href="ruleutils.c.html#LN10734"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="ruleutils.c.html#LN10747"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !isnull &raquo; </span> 
 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="ruleutils.c.html#LN10735"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="ruleutils.c.html#LN10734"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end flatten_reloptions &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>