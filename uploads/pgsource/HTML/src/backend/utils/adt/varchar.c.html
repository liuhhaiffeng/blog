<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\utils\adt\varchar.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\utils\adt\varchar.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:55 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * varchar.c 
 *    Functions for the built-in types char(n) and varchar(n). 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/backend/utils/adt/varchar.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
 
<span class='Keyword'>#include </span><span class='String'>"access/hash.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/tuptoaster.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_collation.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"libpq/pqformat.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/nodeFuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/array.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/varlena.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"mb/pg_wchar.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* common code for bpchartypmodin and varchartypmodin */ 
</span><span class='Keyword'>static </span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> 
<a name="LN30"></a><span class='Declare_Function'>anychar_typmodin</span><span class='Parentheses'>(</span><a href="../../../include/utils/array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ta</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>typename</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN32"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>typmod</span><span class='Delimiter'>; 
</span><a name="LN33"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>      <span class='Operator'>*</span><span class='Declare_Local'>tl</span><span class='Delimiter'>; 
</span><a name="LN34"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>n</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN33"><span class='Ref_To_Local'>tl</span></a> <span class='Operator'>= </span><a href="arrayutils.c.html#LN198"><span class='Ref_to_Func'>ArrayGetIntegerTypmods</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN30"><span class='Ref_to_Parameter'>ta</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="varchar.c.html#LN34"><span class='Ref_To_Local'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * we're not too tense about good error message here because grammar 
     * shouldn't allow wrong number of modifiers for CHAR 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN34"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"invalid type modifier"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="varchar.c.html#LN33"><span class='Ref_To_Local'>tl</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"length for type %s must be at least 1"</span><span class='Delimiter'>, </span><span class='Keyword'>typename</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="varchar.c.html#LN33"><span class='Ref_To_Local'>tl</span></a> <span class='Operator'>&GT; </span><a href="../../../include/access/htup_details.h.html#LN585"><span class='Ref_to_Const'>MaxAttrSize</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_INVALID_PARAMETER_VALUE<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"length for type %s cannot exceed %d"</span><span class='Delimiter'>, 
</span>                        <span class='Keyword'>typename</span><span class='Delimiter'>, </span><a href="../../../include/access/htup_details.h.html#LN585"><span class='Ref_to_Const'>MaxAttrSize</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For largely historical reasons, the typmod is VARHDRSZ plus the number 
     * of characters; there is enough client-side code that knows about that 
     * that we'd better not change it. 
     */ 
</span>    <a href="varchar.c.html#LN32"><span class='Ref_To_Local'>typmod</span></a> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a> <span class='Operator'>+ *</span><a href="varchar.c.html#LN33"><span class='Ref_To_Local'>tl</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="varchar.c.html#LN32"><span class='Ref_To_Local'>typmod</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end anychar_typmodin &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* common code for bpchartypmodout and varchartypmodout */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN69"></a><span class='Declare_Function'>anychar_typmodout</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>typmod</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN71"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>res</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Number'>64</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN69"><span class='Ref_to_Parameter'>typmod</span></a> <span class='Operator'>&GT; </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>) 
</span>        <a href="../../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN71"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>64</span><span class='Delimiter'>, </span><span class='String'>"(%d)"</span><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) (</span><a href="varchar.c.html#LN69"><span class='Ref_to_Parameter'>typmod</span></a> <span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Operator'>*</span><a href="varchar.c.html#LN71"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="varchar.c.html#LN71"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * CHAR() and VARCHAR() types are part of the SQL standard. CHAR() 
 * is for blank-padded string whose length is specified in CREATE TABLE. 
 * VARCHAR is for storing string whose length is at most the length specified 
 * at CREATE TABLE time. 
 * 
 * It's hard to implement these types because we cannot figure out 
 * the length of the type from the type itself. I changed (hopefully all) the 
 * fmgr calls that invoke input functions of a data type to supply the 
 * length also. (eg. in INSERTs, we have the tupleDescriptor which contains 
 * the length of the attributes and hence the exact length of the char() or 
 * varchar(). We pass this to bpcharin() or varcharin().) In the case where 
 * we cannot determine the length, we pass in -1 instead and the input 
 * converter does not enforce any length check. 
 * 
 * We actually implement this as a varlena so that we don't have to pass in 
 * the length for the comparison functions. (The difference between these 
 * types and "text" is that we truncate and possibly blank-pad the string 
 * at insertion time.) 
 * 
 *                                                            - ay 6/95 
 */ 
</span> 
 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 *   bpchar - char()                                                         * 
 *****************************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * bpchar_input -- common guts of bpcharin and bpcharrecv 
 * 
 * s is the input text of length len (may not be null-terminated) 
 * atttypmod is the typmod value to apply 
 * 
 * Note that atttypmod is measured in characters, which 
 * is not necessarily the same as the number of bytes. 
 * 
 * If the input string is too long, raise an error, unless the extra 
 * characters are spaces, in which case they're truncated.  (per SQL) 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a> <span class='Operator'>* 
</span><a name="LN123"></a><span class='Declare_Function'>bpchar_input</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>len</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>atttypmod</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN125"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN126"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>r</span><span class='Delimiter'>; 
</span><a name="LN127"></a>    size_t      <span class='Declare_Local'>maxlen</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If typmod is -1 (or invalid), use the actual string length */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>atttypmod</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>) </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span> 
        <a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>len</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN134"></a>        size_t      <span class='Declare_Local'>charlen</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* number of CHARACTERS in the input */ 
</span> 
        <a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>atttypmod</span></a> <span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Delimiter'>; 
</span>        <a href="varchar.c.html#LN134"><span class='Ref_To_Local'>charlen</span></a> <span class='Operator'>= </span><a href="../../../include/mb/pg_wchar.h.html#LN529"><span class='Ref_to_Proto'>pg_mbstrlen_with_len</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN134"><span class='Ref_To_Local'>charlen</span></a> <span class='Operator'>&GT; </span><a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Verify that extra characters are spaces, and clip them off */ 
</span><a name="LN141"></a>            size_t      <span class='Declare_Local'>mbmaxlen</span> <span class='Operator'>= </span><a href="../../../include/mb/pg_wchar.h.html#LN533"><span class='Ref_to_Proto'>pg_mbcharcliplen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>len</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN142"></a>            size_t      <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * at this point, len is the actual BYTE length of the input 
             * string, maxlen is the max number of CHARACTERS allowed for this 
             * bpchar type, mbmaxlen is the length in BYTES of those chars. 
             */ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN142"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN141"><span class='Ref_To_Local'>mbmaxlen</span></a><span class='Delimiter'>; </span><a href="varchar.c.html#LN142"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>len</span></a><span class='Delimiter'>; </span><a href="varchar.c.html#LN142"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="varchar.c.html#LN142"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>' '</span><span class='Parentheses'>) 
</span>                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_STRING_DATA_RIGHT_TRUNCATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"value too long for type character(%d)"</span><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Now we set maxlen to the necessary byte length, not the number 
             * of CHARACTERS! 
             */ 
</span>            <a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN141"><span class='Ref_To_Local'>mbmaxlen</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if charlen&GT;maxlen &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Now we set maxlen to the necessary byte length, not the number 
             * of CHARACTERS! 
             */ 
</span>            <a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>- </span><a href="varchar.c.html#LN134"><span class='Ref_To_Local'>charlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="varchar.c.html#LN125"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>+ </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN125"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>+ </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN126"><span class='Ref_To_Local'>r</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN302"><span class='Ref_to_Macro'>VARDATA</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN125"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    memcpy<span class='Parentheses'>(</span><a href="varchar.c.html#LN126"><span class='Ref_To_Local'>r</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* blank pad the string if necessary */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>&GT; </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>len</span></a><span class='Parentheses'>) 
</span>        memset<span class='Parentheses'>(</span><a href="varchar.c.html#LN126"><span class='Ref_To_Local'>r</span></a> <span class='Operator'>+ </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>len</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN127"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>- </span><a href="varchar.c.html#LN123"><span class='Ref_to_Parameter'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="varchar.c.html#LN125"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end bpchar_input &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert a C string to CHARACTER internal representation.  atttypmod 
 * is the declared length of the type plus VARHDRSZ. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN191"></a><span class='Declare_Function'>bpcharin</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN193"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> NOT_USED 
<a name="LN196"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typelem</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
<a name="LN198"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>atttypmod</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN199"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN199"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN122"><span class='Ref_to_Func'>bpchar_input</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN193"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span>strlen<span class='Parentheses'>(</span><a href="varchar.c.html#LN193"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN198"><span class='Ref_To_Local'>atttypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN330"><span class='Ref_to_Macro'>PG_RETURN_BPCHAR_P</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN199"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert a CHARACTER value to a C string. 
 * 
 * Uses the text conversion functions, which is only appropriate if BpChar 
 * and text are equivalent types. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN213"></a><span class='Declare_Function'>bpcharout</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN215"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>txt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN215"><span class='Ref_To_Local'>txt</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      bpcharrecv          - converts external binary format to bpchar 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN224"></a><span class='Declare_Function'>bpcharrecv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN226"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> NOT_USED 
<a name="LN229"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typelem</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
<a name="LN231"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>atttypmod</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN232"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN233"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span><span class='Delimiter'>; 
</span><a name="LN234"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nbytes</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN233"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN44"><span class='Ref_to_Proto'>pq_getmsgtext</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN226"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN226"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>- </span><a href="varchar.c.html#LN226"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN39"><span class='Ref_to_Member'>cursor</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="varchar.c.html#LN234"><span class='Ref_To_Local'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN232"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN122"><span class='Ref_to_Func'>bpchar_input</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN233"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN234"><span class='Ref_To_Local'>nbytes</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN231"><span class='Ref_To_Local'>atttypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN233"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN330"><span class='Ref_to_Macro'>PG_RETURN_BPCHAR_P</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN232"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      bpcharsend          - converts bpchar to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN246"></a><span class='Declare_Function'>bpcharsend</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Exactly the same as textsend, so share code */ 
</span>    <span class='Control'>return</span> <a href="varlena.c.html#LN546"><span class='Ref_to_Func'>textsend</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Converts a CHARACTER type to the specified size. 
 * 
 * maxlen is the typmod, ie, declared length plus VARHDRSZ bytes. 
 * isExplicit is true if this is for an explicit cast to char(N). 
 * 
 * Truncation rules: for an explicit cast, silently truncate to the given 
 * length; for an implicit cast, raise error unless extra characters are 
 * all spaces.  (This is sort-of per SQL: the spec would actually have us 
 * raise a "completion condition" for the explicit cast case, but Postgres 
 * hasn't got such a concept.) 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN266"></a><span class='Declare_Function'>bpchar</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN268"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>source</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN269"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>maxlen</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN270"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isExplicit</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN238"><span class='Ref_to_Macro'>PG_GETARG_BOOL</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN271"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN272"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>len</span><span class='Delimiter'>; 
</span><a name="LN273"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>r</span><span class='Delimiter'>; 
</span><a name="LN274"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span><a name="LN275"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN276"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>charlen</span><span class='Delimiter'>;</span>        <span class='Comment_Multi_Line'>/* number of characters in the input string + 
                                 * VARHDRSZ */ 
</span> 
    <span class='Comment_Multi_Line'>/* No work if typmod is invalid */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>) </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span> 
        <a href="../../../include/fmgr.h.html#LN330"><span class='Ref_to_Macro'>PG_RETURN_BPCHAR_P</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN268"><span class='Ref_To_Local'>source</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>-= </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN339"><span class='Ref_to_Macro'>VARSIZE_ANY_EXHDR</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN268"><span class='Ref_To_Local'>source</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN274"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN268"><span class='Ref_To_Local'>source</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN276"><span class='Ref_To_Local'>charlen</span></a> <span class='Operator'>= </span><a href="../../../include/mb/pg_wchar.h.html#LN529"><span class='Ref_to_Proto'>pg_mbstrlen_with_len</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN274"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* No work if supplied data matches typmod already */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN276"><span class='Ref_To_Local'>charlen</span></a> <span class='Operator'>== </span><a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN330"><span class='Ref_to_Macro'>PG_RETURN_BPCHAR_P</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN268"><span class='Ref_To_Local'>source</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN276"><span class='Ref_To_Local'>charlen</span></a> <span class='Operator'>&GT; </span><a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Verify that extra characters are spaces, and clip them off */ 
</span><a name="LN297"></a>        size_t      <span class='Declare_Local'>maxmblen</span><span class='Delimiter'>; 
</span> 
        <a href="varchar.c.html#LN297"><span class='Ref_To_Local'>maxmblen</span></a> <span class='Operator'>= </span><a href="../../../include/mb/pg_wchar.h.html#LN533"><span class='Ref_to_Proto'>pg_mbcharcliplen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN274"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="varchar.c.html#LN270"><span class='Ref_To_Local'>isExplicit</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN275"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN297"><span class='Ref_To_Local'>maxmblen</span></a><span class='Delimiter'>; </span><a href="varchar.c.html#LN275"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; </span><a href="varchar.c.html#LN275"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN274"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>[</span><a href="varchar.c.html#LN275"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>' '</span><span class='Parentheses'>) 
</span>                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_STRING_DATA_RIGHT_TRUNCATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"value too long for type character(%d)"</span><span class='Delimiter'>, 
</span>                                    <a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN297"><span class='Ref_To_Local'>maxmblen</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * At this point, maxlen is the necessary byte length, not the number 
         * of CHARACTERS! 
         */ 
</span>        <a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if charlen&GT;maxlen &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * At this point, maxlen is the necessary byte length, not the number 
         * of CHARACTERS! 
         */ 
</span>        <a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>- </span><a href="varchar.c.html#LN276"><span class='Ref_To_Local'>charlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>&GT;= </span><a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN271"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>+ </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN271"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>+ </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN273"><span class='Ref_To_Local'>r</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN302"><span class='Ref_to_Macro'>VARDATA</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN271"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    memcpy<span class='Parentheses'>(</span><a href="varchar.c.html#LN273"><span class='Ref_To_Local'>r</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN274"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* blank pad the string if necessary */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>&GT; </span><a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>) 
</span>        memset<span class='Parentheses'>(</span><a href="varchar.c.html#LN273"><span class='Ref_To_Local'>r</span></a> <span class='Operator'>+ </span><a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><span class='String'>' '</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN269"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>- </span><a href="varchar.c.html#LN272"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN330"><span class='Ref_to_Macro'>PG_RETURN_BPCHAR_P</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN271"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end bpchar &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* char_bpchar() 
 * Convert char to bpchar(1). 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN348"></a><span class='Declare_Function'>char_bpchar</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN350"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>c</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN237"><span class='Ref_to_Macro'>PG_GETARG_CHAR</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN351"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN351"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/postgres.h.html#LN327"><span class='Ref_to_Macro'>SET_VARSIZE</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN351"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN302"><span class='Ref_to_Macro'>VARDATA</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN351"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>))</span> <span class='Operator'>= </span><a href="varchar.c.html#LN350"><span class='Ref_To_Local'>c</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN330"><span class='Ref_to_Macro'>PG_RETURN_BPCHAR_P</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN351"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* bpchar_name() 
 * Converts a bpchar() type to a NameData type. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN366"></a><span class='Declare_Function'>bpchar_name</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN368"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>s</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN369"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s_data</span><span class='Delimiter'>; 
</span><a name="LN370"></a>    <a href="../../../include/c.h.html#LN496"><span class='Ref_to_Typedef'>Name</span></a>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN371"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN371"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN339"><span class='Ref_to_Macro'>VARSIZE_ANY_EXHDR</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN368"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN369"><span class='Ref_To_Local'>s_data</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN368"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Truncate oversize input */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN371"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>&GT;= </span><a href="../../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Parentheses'>) 
</span>        <a href="varchar.c.html#LN371"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="../../../include/mb/pg_wchar.h.html#LN530"><span class='Ref_to_Proto'>pg_mbcliplen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN369"><span class='Ref_To_Local'>s_data</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN371"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Remove trailing blanks */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN371"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN369"><span class='Ref_To_Local'>s_data</span></a><span class='Delimiter'>[</span><a href="varchar.c.html#LN371"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>' '</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="varchar.c.html#LN371"><span class='Ref_To_Local'>len</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* We use palloc0 here to ensure result is zero-padded */ 
</span>    <a href="varchar.c.html#LN370"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN496"><span class='Ref_to_Typedef'>Name</span></a><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    memcpy<span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="varchar.c.html#LN370"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN369"><span class='Ref_To_Local'>s_data</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN371"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN322"><span class='Ref_to_Macro'>PG_RETURN_NAME</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN370"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end bpchar_name &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* name_bpchar() 
 * Converts a NameData type to a bpchar type. 
 * 
 * Uses the text conversion functions, which is only appropriate if BpChar 
 * and text are equivalent types. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN402"></a><span class='Declare_Function'>name_bpchar</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN404"></a>    <a href="../../../include/c.h.html#LN496"><span class='Ref_to_Typedef'>Name</span></a>        <span class='Declare_Local'>s</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN242"><span class='Ref_to_Macro'>PG_GETARG_NAME</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN405"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN405"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/utils/builtins.h.html#LN85"><span class='Ref_to_Proto'>cstring_to_text</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="varchar.c.html#LN404"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN330"><span class='Ref_to_Macro'>PG_RETURN_BPCHAR_P</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN405"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN412"></a><span class='Declare_Function'>bpchartypmodin</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN414"></a>    <a href="../../../include/utils/array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>ta</span> <span class='Operator'>= </span><a href="../../../include/utils/array.h.html#LN243"><span class='Ref_to_Macro'>PG_GETARG_ARRAYTYPE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN29"><span class='Ref_to_Func'>anychar_typmodin</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN414"><span class='Ref_To_Local'>ta</span></a><span class='Delimiter'>, </span><span class='String'>"char"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN420"></a><span class='Declare_Function'>bpchartypmodout</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN422"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>typmod</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN68"><span class='Ref_to_Func'>anychar_typmodout</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN422"><span class='Ref_To_Local'>typmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 *   varchar - varchar(n) 
 * 
 * Note: varchar piggybacks on type text for most operations, and so has no 
 * C-coded functions except for I/O and typmod checking. 
 *****************************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * varchar_input -- common guts of varcharin and varcharrecv 
 * 
 * s is the input text of length len (may not be null-terminated) 
 * atttypmod is the typmod value to apply 
 * 
 * Note that atttypmod is measured in characters, which 
 * is not necessarily the same as the number of bytes. 
 * 
 * If the input string is too long, raise an error, unless the extra 
 * characters are spaces, in which case they're truncated.  (per SQL) 
 * 
 * Uses the C string to text conversion function, which is only appropriate 
 * if VarChar and text are equivalent types. 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/c.h.html#LN454"><span class='Ref_to_Typedef'>VarChar</span></a> <span class='Operator'>* 
</span><a name="LN451"></a><span class='Declare_Function'>varchar_input</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>len</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>atttypmod</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN453"></a>    <a href="../../../include/c.h.html#LN454"><span class='Ref_to_Typedef'>VarChar</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN454"></a>    size_t      <span class='Declare_Local'>maxlen</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN454"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN451"><span class='Ref_to_Parameter'>atttypmod</span></a> <span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN451"><span class='Ref_to_Parameter'>atttypmod</span></a> <span class='Operator'>&GT;= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>) </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a> <span class='Operator'>&& </span><a href="varchar.c.html#LN451"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>&GT; </span><a href="varchar.c.html#LN454"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Verify that extra characters are spaces, and clip them off */ 
</span><a name="LN461"></a>        size_t      <span class='Declare_Local'>mbmaxlen</span> <span class='Operator'>= </span><a href="../../../include/mb/pg_wchar.h.html#LN533"><span class='Ref_to_Proto'>pg_mbcharcliplen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN451"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN451"><span class='Ref_to_Parameter'>len</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN454"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN462"></a>        size_t      <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN462"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN461"><span class='Ref_To_Local'>mbmaxlen</span></a><span class='Delimiter'>; </span><a href="varchar.c.html#LN462"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="varchar.c.html#LN451"><span class='Ref_to_Parameter'>len</span></a><span class='Delimiter'>; </span><a href="varchar.c.html#LN462"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN451"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="varchar.c.html#LN462"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>' '</span><span class='Parentheses'>) 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_STRING_DATA_RIGHT_TRUNCATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"value too long for type character varying(%d)"</span><span class='Delimiter'>, 
</span>                             <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="varchar.c.html#LN454"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="varchar.c.html#LN451"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN461"><span class='Ref_To_Local'>mbmaxlen</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="varchar.c.html#LN453"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN454"><span class='Ref_to_Typedef'>VarChar</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/utils/builtins.h.html#LN86"><span class='Ref_to_Proto'>cstring_to_text_with_len</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN451"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN451"><span class='Ref_to_Parameter'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="varchar.c.html#LN453"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end varchar_input &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert a C string to VARCHAR internal representation.  atttypmod 
 * is the declared length of the type plus VARHDRSZ. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN485"></a><span class='Declare_Function'>varcharin</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN487"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN241"><span class='Ref_to_Macro'>PG_GETARG_CSTRING</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> NOT_USED 
<a name="LN490"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typelem</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
<a name="LN492"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>atttypmod</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN493"></a>    <a href="../../../include/c.h.html#LN454"><span class='Ref_to_Typedef'>VarChar</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN493"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN450"><span class='Ref_to_Func'>varchar_input</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN487"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span>strlen<span class='Parentheses'>(</span><a href="varchar.c.html#LN487"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN492"><span class='Ref_To_Local'>atttypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN331"><span class='Ref_to_Macro'>PG_RETURN_VARCHAR_P</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN493"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert a VARCHAR value to a C string. 
 * 
 * Uses the text to C string conversion function, which is only appropriate 
 * if VarChar and text are equivalent types. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN507"></a><span class='Declare_Function'>varcharout</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN509"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>txt</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN509"><span class='Ref_To_Local'>txt</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      varcharrecv         - converts external binary format to varchar 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN518"></a><span class='Declare_Function'>varcharrecv</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN520"></a>    <a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a>  <span class='Declare_Local'>buf</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> NOT_USED 
<a name="LN523"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typelem</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN239"><span class='Ref_to_Macro'>PG_GETARG_OID</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
<a name="LN525"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>atttypmod</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN526"></a>    <a href="../../../include/c.h.html#LN454"><span class='Ref_to_Typedef'>VarChar</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN527"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span><span class='Delimiter'>; 
</span><a name="LN528"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nbytes</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN527"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><a href="../../../include/libpq/pqformat.h.html#LN44"><span class='Ref_to_Proto'>pq_getmsgtext</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN520"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN520"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>- </span><a href="varchar.c.html#LN520"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/lib/stringinfo.h.html#LN39"><span class='Ref_to_Member'>cursor</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="varchar.c.html#LN528"><span class='Ref_To_Local'>nbytes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN526"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN450"><span class='Ref_to_Func'>varchar_input</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN527"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN528"><span class='Ref_To_Local'>nbytes</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN525"><span class='Ref_To_Local'>atttypmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN527"><span class='Ref_To_Local'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN331"><span class='Ref_to_Macro'>PG_RETURN_VARCHAR_P</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN526"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *      varcharsend         - converts varchar to binary format 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN540"></a><span class='Declare_Function'>varcharsend</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Exactly the same as textsend, so share code */ 
</span>    <span class='Control'>return</span> <a href="varlena.c.html#LN546"><span class='Ref_to_Func'>textsend</span></a><span class='Parentheses'>(</span>fcinfo<span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * varchar_transform() 
 * Flatten calls to varchar's length coercion function that set the new maximum 
 * length &GT;= the previous maximum length.  We can ignore the isExplicit 
 * argument, since that only affects truncation cases. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN554"></a><span class='Declare_Function'>varchar_transform</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN556"></a>    <a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>expr</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodes.h.html#LN575"><span class='Ref_to_Macro'>castNode</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/primnodes.h.html#LN444"><span class='Ref_to_Struct'>FuncExpr</span></a><span class='Delimiter'>, </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN557"></a>    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>ret</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN558"></a>    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>typmod</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN556"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN558"><span class='Ref_To_Local'>typmod</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN556"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN559"><span class='Ref_to_Macro'>IsA</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN558"><span class='Ref_To_Local'>typmod</span></a><span class='Delimiter'>, </span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a><span class='Parentheses'>)</span> <span class='Operator'>&&!</span><span class='Parentheses'>((</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="varchar.c.html#LN558"><span class='Ref_To_Local'>typmod</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>constisnull<span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN566"></a>        <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>source</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN556"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="../../../include/nodes/primnodes.h.html#LN455"><span class='Ref_to_Member'>args</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN567"></a>        <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>old_typmod</span> <span class='Operator'>= </span><a href="../../../include/nodes/nodeFuncs.h.html#LN32"><span class='Ref_to_Proto'>exprTypmod</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN566"><span class='Ref_To_Local'>source</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN568"></a>        <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>new_typmod</span> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN477"><span class='Ref_to_Macro'>DatumGetInt32</span></a><span class='Parentheses'>(((</span><a href="../../../include/nodes/primnodes.h.html#LN188"><span class='Ref_to_Struct'>Const</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="varchar.c.html#LN558"><span class='Ref_To_Local'>typmod</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>constvalue<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN569"></a>        <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>old_max</span> <span class='Operator'>= </span><a href="varchar.c.html#LN567"><span class='Ref_To_Local'>old_typmod</span></a> <span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Delimiter'>; 
</span><a name="LN570"></a>        <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>new_max</span> <span class='Operator'>= </span><a href="varchar.c.html#LN568"><span class='Ref_To_Local'>new_typmod</span></a> <span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN568"><span class='Ref_To_Local'>new_typmod</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="varchar.c.html#LN567"><span class='Ref_To_Local'>old_typmod</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="varchar.c.html#LN569"><span class='Ref_To_Local'>old_max</span></a> <span class='Operator'>&LT;= </span><a href="varchar.c.html#LN570"><span class='Ref_To_Local'>new_max</span></a><span class='Parentheses'>))</span> 
            <a href="varchar.c.html#LN557"><span class='Ref_To_Local'>ret</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/nodeFuncs.h.html#LN34"><span class='Ref_to_Proto'>relabel_to_typmod</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN566"><span class='Ref_To_Local'>source</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN568"><span class='Ref_To_Local'>new_typmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/fmgr.h.html#LN320"><span class='Ref_to_Macro'>PG_RETURN_POINTER</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN557"><span class='Ref_To_Local'>ret</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end varchar_transform &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Converts a VARCHAR type to the specified size. 
 * 
 * maxlen is the typmod, ie, declared length plus VARHDRSZ bytes. 
 * isExplicit is true if this is for an explicit cast to varchar(N). 
 * 
 * Truncation rules: for an explicit cast, silently truncate to the given 
 * length; for an implicit cast, raise error unless extra characters are 
 * all spaces.  (This is sort-of per SQL: the spec would actually have us 
 * raise a "completion condition" for the explicit cast case, but Postgres 
 * hasn't got such a concept.) 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN592"></a><span class='Declare_Function'>varchar</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN594"></a>    <a href="../../../include/c.h.html#LN454"><span class='Ref_to_Typedef'>VarChar</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>source</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN274"><span class='Ref_to_Macro'>PG_GETARG_VARCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN595"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>typmod</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN596"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isExplicit</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN238"><span class='Ref_to_Macro'>PG_GETARG_BOOL</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN597"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>len</span><span class='Delimiter'>, 
</span><a name="LN598"></a>                <span class='Declare_Local'>maxlen</span><span class='Delimiter'>; 
</span><a name="LN599"></a>    size_t      <span class='Declare_Local'>maxmblen</span><span class='Delimiter'>; 
</span><a name="LN600"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN601"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s_data</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN597"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN339"><span class='Ref_to_Macro'>VARSIZE_ANY_EXHDR</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN594"><span class='Ref_To_Local'>source</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN601"><span class='Ref_To_Local'>s_data</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN594"><span class='Ref_To_Local'>source</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN598"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN595"><span class='Ref_To_Local'>typmod</span></a> <span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* No work if typmod is invalid or supplied data fits it already */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN598"><span class='Ref_To_Local'>maxlen</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="varchar.c.html#LN597"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>&LT;= </span><a href="varchar.c.html#LN598"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/fmgr.h.html#LN331"><span class='Ref_to_Macro'>PG_RETURN_VARCHAR_P</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN594"><span class='Ref_To_Local'>source</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* only reach here if string is too long... */ 
</span> 
    <span class='Comment_Multi_Line'>/* truncate multibyte string preserving multibyte boundary */ 
</span>    <a href="varchar.c.html#LN599"><span class='Ref_To_Local'>maxmblen</span></a> <span class='Operator'>= </span><a href="../../../include/mb/pg_wchar.h.html#LN533"><span class='Ref_to_Proto'>pg_mbcharcliplen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN601"><span class='Ref_To_Local'>s_data</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN597"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN598"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="varchar.c.html#LN596"><span class='Ref_To_Local'>isExplicit</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN600"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN599"><span class='Ref_To_Local'>maxmblen</span></a><span class='Delimiter'>; </span><a href="varchar.c.html#LN600"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="varchar.c.html#LN597"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; </span><a href="varchar.c.html#LN600"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN601"><span class='Ref_To_Local'>s_data</span></a><span class='Delimiter'>[</span><a href="varchar.c.html#LN600"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>' '</span><span class='Parentheses'>) 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_STRING_DATA_RIGHT_TRUNCATION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"value too long for type character varying(%d)"</span><span class='Delimiter'>, 
</span>                             <a href="varchar.c.html#LN598"><span class='Ref_To_Local'>maxlen</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/fmgr.h.html#LN331"><span class='Ref_to_Macro'>PG_RETURN_VARCHAR_P</span></a><span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN454"><span class='Ref_to_Typedef'>VarChar</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/utils/builtins.h.html#LN86"><span class='Ref_to_Proto'>cstring_to_text_with_len</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN601"><span class='Ref_To_Local'>s_data</span></a><span class='Delimiter'>, 
</span>                                                             <a href="varchar.c.html#LN599"><span class='Ref_To_Local'>maxmblen</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end varchar &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN631"></a><span class='Declare_Function'>varchartypmodin</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN633"></a>    <a href="../../../include/utils/array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>ta</span> <span class='Operator'>= </span><a href="../../../include/utils/array.h.html#LN243"><span class='Ref_to_Macro'>PG_GETARG_ARRAYTYPE_P</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN29"><span class='Ref_to_Func'>anychar_typmodin</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN633"><span class='Ref_To_Local'>ta</span></a><span class='Delimiter'>, </span><span class='String'>"varchar"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN639"></a><span class='Declare_Function'>varchartypmodout</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN641"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>typmod</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN233"><span class='Ref_to_Macro'>PG_GETARG_INT32</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN321"><span class='Ref_to_Macro'>PG_RETURN_CSTRING</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN68"><span class='Ref_to_Func'>anychar_typmodout</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN641"><span class='Ref_To_Local'>typmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 * Exported functions 
 *****************************************************************************/ 
</span> 
<span class='Comment_Multi_Line'>/* "True" length (not counting trailing blanks) of a BpChar */ 
</span><span class='Keyword'>static inline int 
</span><a name="LN653"></a><span class='Declare_Function'>bcTruelen</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>arg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/utils/builtins.h.html#LN82"><span class='Ref_to_Proto'>bpchartruelen</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN653"><span class='Ref_to_Parameter'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN339"><span class='Ref_to_Macro'>VARSIZE_ANY_EXHDR</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN653"><span class='Ref_to_Parameter'>arg</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>int 
</span><a name="LN659"></a><span class='Declare_Function'>bpchartruelen</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>len</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN661"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Note that we rely on the assumption that ' ' is a singleton unit on 
     * every supported multibyte server encoding. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN661"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN659"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="varchar.c.html#LN661"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="varchar.c.html#LN661"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN659"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="varchar.c.html#LN661"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>' '</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="varchar.c.html#LN661"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN676"></a><span class='Declare_Function'>bpcharlen</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN678"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN679"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* get number of bytes, ignoring trailing spaces */ 
</span>    <a href="varchar.c.html#LN679"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN678"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* in multibyte encoding, convert to number of characters */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/mb/pg_wchar.h.html#LN535"><span class='Ref_to_Proto'>pg_database_encoding_max_length</span></a><span class='Parentheses'>() </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <a href="varchar.c.html#LN679"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="../../../include/mb/pg_wchar.h.html#LN529"><span class='Ref_to_Proto'>pg_mbstrlen_with_len</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN678"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN679"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN679"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN692"></a><span class='Declare_Function'>bpcharoctetlen</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN694"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>arg</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* We need not detoast the input at all */ 
</span>    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="../../../include/access/tuptoaster.h.html#LN220"><span class='Ref_to_Proto'>toast_raw_datum_size</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN694"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><a href="../../../include/c.h.html#LN444"><span class='Ref_to_Const'>VARHDRSZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/***************************************************************************** 
 *  Comparison Functions used for bpchar 
 * 
 * Note: btree indexes need these routines not to leak memory; therefore, 
 * be careful to free working copies of toasted datums.  Most places don't 
 * need to be so careful. 
 *****************************************************************************/ 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN710"></a><span class='Declare_Function'>bpchareq</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN712"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN713"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN714"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN715"></a>                <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span><a name="LN716"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN714"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN712"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN715"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN713"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Since we only care about equality or not-equality, we can avoid all the 
     * expense of strcoll() here, and just do bitwise comparison. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN714"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>!= </span><a href="varchar.c.html#LN715"><span class='Ref_To_Local'>len2</span></a><span class='Parentheses'>) 
</span>        <a href="varchar.c.html#LN716"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="varchar.c.html#LN716"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>memcmp<span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN712"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN713"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN714"><span class='Ref_To_Local'>len1</span></a><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN712"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN713"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN716"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end bpchareq &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN737"></a><span class='Declare_Function'>bpcharne</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN739"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN740"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN741"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN742"></a>                <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span><a name="LN743"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN741"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN739"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN742"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN740"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Since we only care about equality or not-equality, we can avoid all the 
     * expense of strcoll() here, and just do bitwise comparison. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN741"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>!= </span><a href="varchar.c.html#LN742"><span class='Ref_To_Local'>len2</span></a><span class='Parentheses'>) 
</span>        <a href="varchar.c.html#LN743"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="varchar.c.html#LN743"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>memcmp<span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN739"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN740"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN741"><span class='Ref_To_Local'>len1</span></a><span class='Parentheses'>)</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN739"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN740"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN743"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end bpcharne &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN764"></a><span class='Declare_Function'>bpcharlt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN766"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN767"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN768"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN769"></a>                <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span><a name="LN770"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN768"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN766"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN769"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN767"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN770"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/varlena.h.html#LN18"><span class='Ref_to_Proto'>varstr_cmp</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN766"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN768"><span class='Ref_To_Local'>len1</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN767"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN769"><span class='Ref_To_Local'>len2</span></a><span class='Delimiter'>, 
</span>                     <a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN766"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN767"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN770"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end bpcharlt &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN785"></a><span class='Declare_Function'>bpcharle</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN787"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN788"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN789"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN790"></a>                <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span><a name="LN791"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN789"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN787"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN790"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN788"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN791"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/varlena.h.html#LN18"><span class='Ref_to_Proto'>varstr_cmp</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN787"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN789"><span class='Ref_To_Local'>len1</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN788"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN790"><span class='Ref_To_Local'>len2</span></a><span class='Delimiter'>, 
</span>                     <a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN787"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN788"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN791"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end bpcharle &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN806"></a><span class='Declare_Function'>bpchargt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN808"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN809"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN810"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN811"></a>                <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span><a name="LN812"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN810"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN808"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN811"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN809"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN812"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/varlena.h.html#LN18"><span class='Ref_to_Proto'>varstr_cmp</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN808"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN810"><span class='Ref_To_Local'>len1</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN809"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN811"><span class='Ref_To_Local'>len2</span></a><span class='Delimiter'>, 
</span>                     <a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN808"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN809"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN812"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end bpchargt &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN827"></a><span class='Declare_Function'>bpcharge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN829"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN830"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN831"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN832"></a>                <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span><a name="LN833"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN831"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN829"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN832"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN830"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN833"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/varlena.h.html#LN18"><span class='Ref_to_Proto'>varstr_cmp</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN829"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN831"><span class='Ref_To_Local'>len1</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN830"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN832"><span class='Ref_To_Local'>len2</span></a><span class='Delimiter'>, 
</span>                     <a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN829"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN830"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN833"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end bpcharge &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN848"></a><span class='Declare_Function'>bpcharcmp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN850"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN851"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN852"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN853"></a>                <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span><a name="LN854"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN852"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN850"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN853"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN851"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN854"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/varlena.h.html#LN18"><span class='Ref_to_Proto'>varstr_cmp</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN850"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN852"><span class='Ref_To_Local'>len1</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN851"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN853"><span class='Ref_To_Local'>len2</span></a><span class='Delimiter'>, 
</span>                     <a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN850"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN851"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN854"><span class='Ref_To_Local'>cmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end bpcharcmp &raquo; </span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN869"></a><span class='Declare_Function'>bpchar_sortsupport</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN871"></a>    <a href="../../../include/utils/sortsupport.h.html#LN57"><span class='Ref_to_Typedef'>SortSupport</span></a> <span class='Declare_Local'>ssup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/sortsupport.h.html#LN57"><span class='Ref_to_Typedef'>SortSupport</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN872"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>collid</span> <span class='Operator'>= </span><a href="varchar.c.html#LN871"><span class='Ref_To_Local'>ssup</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/sortsupport.h.html#LN66"><span class='Ref_to_Member'>ssup_collation</span></a><span class='Delimiter'>; 
</span><a name="LN873"></a>    <a href="../../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldcontext</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN873"><span class='Ref_To_Local'>oldcontext</span></a> <span class='Operator'>= </span><a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN871"><span class='Ref_To_Local'>ssup</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/sortsupport.h.html#LN65"><span class='Ref_to_Member'>ssup_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Use generic string SortSupport */ 
</span>    <a href="../../../include/utils/varlena.h.html#LN19"><span class='Ref_to_Proto'>varstr_sortsupport</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN871"><span class='Ref_To_Local'>ssup</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN872"><span class='Ref_To_Local'>collid</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN873"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN308"><span class='Ref_to_Macro'>PG_RETURN_VOID</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN886"></a><span class='Declare_Function'>bpchar_larger</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN888"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN889"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN890"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN891"></a>                <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span><a name="LN892"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN890"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN888"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN891"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN889"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN892"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/varlena.h.html#LN18"><span class='Ref_to_Proto'>varstr_cmp</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN888"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN890"><span class='Ref_To_Local'>len1</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN889"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN891"><span class='Ref_To_Local'>len2</span></a><span class='Delimiter'>, 
</span>                     <a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN330"><span class='Ref_to_Macro'>PG_RETURN_BPCHAR_P</span></a><span class='Parentheses'>((</span><a href="varchar.c.html#LN892"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="varchar.c.html#LN888"><span class='Ref_To_Local'>arg1</span></a> <span class='Operator'>: </span><a href="varchar.c.html#LN889"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN904"></a><span class='Declare_Function'>bpchar_smaller</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN906"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN907"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN908"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN909"></a>                <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span><a name="LN910"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cmp</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN908"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN906"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN909"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN907"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN910"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/varlena.h.html#LN18"><span class='Ref_to_Proto'>varstr_cmp</span></a><span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN906"><span class='Ref_To_Local'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN908"><span class='Ref_To_Local'>len1</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN907"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="varchar.c.html#LN909"><span class='Ref_To_Local'>len2</span></a><span class='Delimiter'>, 
</span>                     <a href="../../../include/fmgr.h.html#LN162"><span class='Ref_to_Macro'>PG_GET_COLLATION</span></a><span class='Parentheses'>())</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN330"><span class='Ref_to_Macro'>PG_RETURN_BPCHAR_P</span></a><span class='Parentheses'>((</span><a href="varchar.c.html#LN910"><span class='Ref_To_Local'>cmp</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="varchar.c.html#LN906"><span class='Ref_To_Local'>arg1</span></a> <span class='Operator'>: </span><a href="varchar.c.html#LN907"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * bpchar needs a specialized hash function because we want to ignore 
 * trailing blanks in comparisons. 
 * 
 * Note: currently there is no need for locale-specific behavior here, 
 * but if we ever change the semantics of bpchar comparison to trust 
 * strcoll() completely, we'd need to do something different in non-C locales. 
 */ 
</span><a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN931"></a><span class='Declare_Function'>hashbpchar</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN933"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>key</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN934"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>keydata</span><span class='Delimiter'>; 
</span><a name="LN935"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>keylen</span><span class='Delimiter'>; 
</span><a name="LN936"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN934"><span class='Ref_To_Local'>keydata</span></a> <span class='Operator'>= </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN933"><span class='Ref_To_Local'>key</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN935"><span class='Ref_To_Local'>keylen</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN933"><span class='Ref_To_Local'>key</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN936"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../access/hash/hashfunc.c.html#LN305"><span class='Ref_to_Func'>hash_any</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="varchar.c.html#LN934"><span class='Ref_To_Local'>keydata</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN935"><span class='Ref_To_Local'>keylen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Avoid leaking memory for toasted inputs */ 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN933"><span class='Ref_To_Local'>key</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="varchar.c.html#LN936"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * The following operators support character-by-character comparison 
 * of bpchar datums, to allow building indexes suitable for LIKE clauses. 
 * Note that the regular bpchareq/bpcharne comparison operators, and 
 * regular support functions 1 and 2 with "C" collation are assumed to be 
 * compatible with these! 
 */ 
</span> 
<span class='Keyword'>static int 
</span><a name="LN959"></a><span class='Declare_Function'>internal_bpchar_pattern_compare</span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>arg1</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>arg2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN961"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN962"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len1</span><span class='Delimiter'>, 
</span><a name="LN963"></a>                <span class='Declare_Local'>len2</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN962"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN959"><span class='Ref_to_Parameter'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="varchar.c.html#LN963"><span class='Ref_To_Local'>len2</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN652"><span class='Ref_to_Func'>bcTruelen</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN959"><span class='Ref_to_Parameter'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN961"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span>memcmp<span class='Parentheses'>(</span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN959"><span class='Ref_to_Parameter'>arg1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN346"><span class='Ref_to_Macro'>VARDATA_ANY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN959"><span class='Ref_to_Parameter'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../../interfaces/ecpg/pgtypeslib/numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN962"><span class='Ref_To_Local'>len1</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN963"><span class='Ref_To_Local'>len2</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN961"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="varchar.c.html#LN961"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN962"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>&LT; </span><a href="varchar.c.html#LN963"><span class='Ref_To_Local'>len2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="varchar.c.html#LN962"><span class='Ref_To_Local'>len1</span></a> <span class='Operator'>&GT; </span><a href="varchar.c.html#LN963"><span class='Ref_To_Local'>len2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end internal_bpchar_pattern_compare &raquo; </span> 
 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN981"></a><span class='Declare_Function'>bpchar_pattern_lt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN983"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN984"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN985"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN985"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN958"><span class='Ref_to_Func'>internal_bpchar_pattern_compare</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN983"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN984"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN983"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN984"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN985"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN997"></a><span class='Declare_Function'>bpchar_pattern_le</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN999"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1000"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1001"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN1001"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN958"><span class='Ref_to_Func'>internal_bpchar_pattern_compare</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN999"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN1000"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN999"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1000"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1001"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1013"></a><span class='Declare_Function'>bpchar_pattern_ge</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1015"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1016"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1017"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN1017"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN958"><span class='Ref_to_Func'>internal_bpchar_pattern_compare</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1015"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN1016"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1015"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1016"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1017"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1029"></a><span class='Declare_Function'>bpchar_pattern_gt</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1031"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1032"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1033"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN1033"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN958"><span class='Ref_to_Func'>internal_bpchar_pattern_compare</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1031"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN1032"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1031"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1032"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN318"><span class='Ref_to_Macro'>PG_RETURN_BOOL</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1033"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1045"></a><span class='Declare_Function'>btbpchar_pattern_cmp</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1047"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg1</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1048"></a>    <a href="../../../include/c.h.html#LN453"><span class='Ref_to_Typedef'>BpChar</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>arg2</span> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN273"><span class='Ref_to_Macro'>PG_GETARG_BPCHAR_PP</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1049"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN1049"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="varchar.c.html#LN958"><span class='Ref_to_Func'>internal_bpchar_pattern_compare</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1047"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><a href="varchar.c.html#LN1048"><span class='Ref_To_Local'>arg2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1047"><span class='Ref_To_Local'>arg1</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/fmgr.h.html#LN224"><span class='Ref_to_Macro'>PG_FREE_IF_COPY</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1048"><span class='Ref_To_Local'>arg2</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN313"><span class='Ref_to_Macro'>PG_RETURN_INT32</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1049"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> 
<a name="LN1061"></a><span class='Declare_Function'>btbpchar_pattern_sortsupport</span><span class='Parentheses'>(</span><a href="../../../include/fmgr.h.html#LN157"><span class='Ref_to_Const'>PG_FUNCTION_ARGS</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1063"></a>    <a href="../../../include/utils/sortsupport.h.html#LN57"><span class='Ref_to_Typedef'>SortSupport</span></a> <span class='Declare_Local'>ssup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/sortsupport.h.html#LN57"><span class='Ref_to_Typedef'>SortSupport</span></a><span class='Parentheses'>) </span><a href="../../../include/fmgr.h.html#LN240"><span class='Ref_to_Macro'>PG_GETARG_POINTER</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1064"></a>    <a href="../../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldcontext</span><span class='Delimiter'>; 
</span> 
    <a href="varchar.c.html#LN1064"><span class='Ref_To_Local'>oldcontext</span></a> <span class='Operator'>= </span><a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1063"><span class='Ref_To_Local'>ssup</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/sortsupport.h.html#LN65"><span class='Ref_to_Member'>ssup_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Use generic string SortSupport, forcing "C" collation */ 
</span>    <a href="../../../include/utils/varlena.h.html#LN19"><span class='Ref_to_Proto'>varstr_sortsupport</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1063"><span class='Ref_To_Local'>ssup</span></a><span class='Delimiter'>, </span><a href="../../../include/catalog/pg_collation.h.html#LN77"><span class='Ref_to_Const'>C_COLLATION_OID</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="varchar.c.html#LN1064"><span class='Ref_To_Local'>oldcontext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/fmgr.h.html#LN308"><span class='Ref_to_Macro'>PG_RETURN_VOID</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
} 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>