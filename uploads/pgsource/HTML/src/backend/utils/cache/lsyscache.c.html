<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\utils\cache\lsyscache.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\utils\cache\lsyscache.c</b></p></td>
<td align='right'>
Wed Jun 14 08:25:55 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * lsyscache.c 
 *    Convenience routines for common queries in the system catalog cache. 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * IDENTIFICATION 
 *    src/backend/utils/cache/lsyscache.c 
 * 
 * NOTES 
 *    Eventually, the index information should go through here, too. 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/hash.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/htup_details.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/nbtree.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"bootstrap/bootstrap.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/namespace.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_am.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_amop.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_amproc.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_collation.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_constraint.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_language.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_namespace.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_opclass.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_operator.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_proc.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_range.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_statistic.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_transform.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"miscadmin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/makefuncs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/array.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/catcache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/datum.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/fmgroids.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/lsyscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/rel.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/syscache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/typcache.h"</span> 
 
<span class='Comment_Multi_Line'>/* Hook for plugins to get control in get_attavgwidth() */ 
</span><a name="LN49"></a><a href="../../../include/utils/lsyscache.h.html#LN60"><span class='Ref_to_Typedef'>get_attavgwidth_hook_type</span></a> <span class='Declare_Var'>get_attavgwidth_hook</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/*              ---------- AMOP CACHES ----------                        */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * op_in_opfamily 
 * 
 *      Return t iff operator 'opno' is in operator family 'opfamily'. 
 * 
 * This function only considers search operators, not ordering operators. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN62"></a><span class='Declare_Function'>op_in_opfamily</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opfamily</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/utils/syscache.h.html#LN177"><span class='Ref_to_Macro'>SearchSysCacheExists3</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, 
</span>                                 <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN62"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="../../../include/postgres.h.html#LN421"><span class='Ref_to_Macro'>CharGetDatum</span></a><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN68"><span class='Ref_to_Const'>AMOP_SEARCH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN62"><span class='Ref_to_Parameter'>opfamily</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_op_opfamily_strategy 
 * 
 *      Get the operator's strategy number within the specified opfamily, 
 *      or 0 if it's not a member of the opfamily. 
 * 
 * This function only considers search operators, not ordering operators. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN79"></a><span class='Declare_Function'>get_op_opfamily_strategy</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opfamily</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN81"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN82"></a>    <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>amop_tup</span><span class='Delimiter'>; 
</span><a name="LN83"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN81"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN159"><span class='Ref_to_Macro'>SearchSysCache3</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN79"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN421"><span class='Ref_to_Macro'>CharGetDatum</span></a><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN68"><span class='Ref_to_Const'>AMOP_SEARCH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN79"><span class='Ref_to_Parameter'>opfamily</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN81"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN82"><span class='Ref_To_Local'>amop_tup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN81"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN83"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN82"><span class='Ref_To_Local'>amop_tup</span></a><span class='Operator'>-&GT;</span>amopstrategy<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN81"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN83"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_op_opfamily_sortfamily 
 * 
 *      If the operator is an ordering operator within the specified opfamily, 
 *      return its amopsortfamily OID; else return InvalidOid. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN104"></a><span class='Declare_Function'>get_op_opfamily_sortfamily</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opfamily</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN106"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN107"></a>    <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>amop_tup</span><span class='Delimiter'>; 
</span><a name="LN108"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN106"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN159"><span class='Ref_to_Macro'>SearchSysCache3</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN104"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN421"><span class='Ref_to_Macro'>CharGetDatum</span></a><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN69"><span class='Ref_to_Const'>AMOP_ORDER</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN104"><span class='Ref_to_Parameter'>opfamily</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN106"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN107"><span class='Ref_To_Local'>amop_tup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN106"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN108"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN107"><span class='Ref_To_Local'>amop_tup</span></a><span class='Operator'>-&GT;</span>amopsortfamily<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN106"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN108"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_op_opfamily_properties 
 * 
 *      Get the operator's strategy number and declared input data types 
 *      within the specified opfamily. 
 * 
 * Caller should already have verified that opno is a member of opfamily, 
 * therefore we raise an error if the tuple is not found. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN132"></a><span class='Declare_Function'>get_op_opfamily_properties</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opfamily</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>ordering_op</span><span class='Delimiter'>, 
</span><a name="LN133"></a>                           <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>strategy</span><span class='Delimiter'>, 
</span><a name="LN134"></a>                           <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lefttype</span><span class='Delimiter'>, 
</span><a name="LN135"></a>                           <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>righttype</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN137"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN138"></a>    <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>amop_tup</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN137"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN159"><span class='Ref_to_Macro'>SearchSysCache3</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN132"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN421"><span class='Ref_to_Macro'>CharGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN132"><span class='Ref_to_Parameter'>ordering_op</span></a> <span class='Operator'>? </span><a href="../../../include/catalog/pg_amop.h.html#LN69"><span class='Ref_to_Const'>AMOP_ORDER</span></a> <span class='Operator'>: </span><a href="../../../include/catalog/pg_amop.h.html#LN68"><span class='Ref_to_Const'>AMOP_SEARCH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN132"><span class='Ref_to_Parameter'>opfamily</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN137"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"operator %u is not a member of opfamily %u"</span><span class='Delimiter'>, 
</span>             <a href="lsyscache.c.html#LN132"><span class='Ref_to_Parameter'>opno</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN132"><span class='Ref_to_Parameter'>opfamily</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN138"><span class='Ref_To_Local'>amop_tup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN137"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN133"><span class='Ref_to_Parameter'>strategy</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN138"><span class='Ref_To_Local'>amop_tup</span></a><span class='Operator'>-&GT;</span>amopstrategy<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN134"><span class='Ref_to_Parameter'>lefttype</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN138"><span class='Ref_To_Local'>amop_tup</span></a><span class='Operator'>-&GT;</span>amoplefttype<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN135"><span class='Ref_to_Parameter'>righttype</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN138"><span class='Ref_To_Local'>amop_tup</span></a><span class='Operator'>-&GT;</span>amoprighttype<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN137"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_op_opfamily_properties &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_opfamily_member 
 *      Get the OID of the operator that implements the specified strategy 
 *      with the specified datatypes for the specified opfamily. 
 * 
 * Returns InvalidOid if there is no pg_amop entry for the given keys. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN162"></a><span class='Declare_Function'>get_opfamily_member</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opfamily</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>lefttype</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>righttype</span><span class='Delimiter'>, 
</span><a name="LN163"></a>                    <a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> <span class='Declare_Parameter'>strategy</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN165"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN166"></a>    <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>amop_tup</span><span class='Delimiter'>; 
</span><a name="LN167"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN165"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN161"><span class='Ref_to_Macro'>SearchSysCache4</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN37"><span class='Ref_to_EnumConst'>AMOPSTRATEGY</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN162"><span class='Ref_to_Parameter'>opfamily</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN162"><span class='Ref_to_Parameter'>lefttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN162"><span class='Ref_to_Parameter'>righttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN456"><span class='Ref_to_Macro'>Int16GetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN163"><span class='Ref_to_Parameter'>strategy</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN165"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN166"><span class='Ref_To_Local'>amop_tup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN165"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN167"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN166"><span class='Ref_To_Local'>amop_tup</span></a><span class='Operator'>-&GT;</span>amopopr<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN165"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN167"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_opfamily_member &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_ordering_op_properties 
 *      Given the OID of an ordering operator (a btree "&LT;" or "&GT;" operator), 
 *      determine its opfamily, its declared input datatype, and its 
 *      strategy number (BTLessStrategyNumber or BTGreaterStrategyNumber). 
 * 
 * Returns TRUE if successful, FALSE if no matching pg_amop entry exists. 
 * (This indicates that the operator is not a valid ordering operator.) 
 * 
 * Note: the operator could be registered in multiple families, for example 
 * if someone were to build a "reverse sort" opfamily.  This would result in 
 * uncertainty as to whether "ORDER BY USING op" would default to NULLS FIRST 
 * or NULLS LAST, as well as inefficient planning due to failure to match up 
 * pathkeys that should be the same.  So we want a determinate result here. 
 * Because of the way the syscache search works, we'll use the interpretation 
 * associated with the opfamily with smallest OID, which is probably 
 * determinate enough.  Since there is no longer any particularly good reason 
 * to build reverse-sort opfamilies, it doesn't seem worth expending any 
 * additional effort on ensuring consistency. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN203"></a><span class='Declare_Function'>get_ordering_op_properties</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, 
</span><a name="LN204"></a>                           <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>opfamily</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>opcintype</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>strategy</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN206"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN207"></a>    <a href="../../../include/utils/catcache.h.html#LN119"><span class='Ref_to_Typedef'>CatCList</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>catlist</span><span class='Delimiter'>; 
</span><a name="LN208"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* ensure outputs are initialized on failure */ 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN204"><span class='Ref_to_Parameter'>opfamily</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN204"><span class='Ref_to_Parameter'>opcintype</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN204"><span class='Ref_to_Parameter'>strategy</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Search pg_amop to see if the target operator is registered as the "&LT;" 
     * or "&GT;" operator of any btree opfamily. 
     */ 
</span>    <a href="lsyscache.c.html#LN207"><span class='Ref_To_Local'>catlist</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN200"><span class='Ref_to_Macro'>SearchSysCacheList1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN203"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN208"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN208"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="lsyscache.c.html#LN207"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN153"><span class='Ref_to_Member'>n_members</span></a><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN208"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN223"></a>        <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span> <span class='Operator'>= &</span><a href="lsyscache.c.html#LN207"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN154"><span class='Ref_to_Member'>members</span></a><span class='Delimiter'>[</span><a href="lsyscache.c.html#LN208"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN115"><span class='Ref_to_Member'>tuple</span></a><span class='Delimiter'>; 
</span><a name="LN224"></a>        <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>aform</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN223"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* must be btree */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN224"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopmethod <span class='Operator'>!= </span><a href="../../../include/catalog/pg_am.h.html#LN69"><span class='Ref_to_Const'>BTREE_AM_OID</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN224"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopstrategy <span class='Operator'>== </span><a href="../../../include/access/stratnum.h.html#LN28"><span class='Ref_to_Const'>BTLessStrategyNumber</span></a> <span class='Operator'>|| 
</span>            <a href="lsyscache.c.html#LN224"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopstrategy <span class='Operator'>== </span><a href="../../../include/access/stratnum.h.html#LN32"><span class='Ref_to_Const'>BTGreaterStrategyNumber</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Found it ... should have consistent input types */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN224"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoplefttype <span class='Operator'>== </span><a href="lsyscache.c.html#LN224"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoprighttype<span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Found a suitable opfamily, return info */ 
</span>                <span class='Operator'>*</span><a href="lsyscache.c.html#LN204"><span class='Ref_to_Parameter'>opfamily</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN224"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopfamily<span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="lsyscache.c.html#LN204"><span class='Ref_to_Parameter'>opcintype</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN224"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoplefttype<span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="lsyscache.c.html#LN204"><span class='Ref_to_Parameter'>strategy</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN224"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopstrategy<span class='Delimiter'>; 
</span>                <a href="lsyscache.c.html#LN206"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;catlist-&GT;n_memb... &raquo; </span> 
 
    <a href="../../../include/utils/syscache.h.html#LN209"><span class='Ref_to_Macro'>ReleaseSysCacheList</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN207"><span class='Ref_To_Local'>catlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="lsyscache.c.html#LN206"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_ordering_op_properties &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_equality_op_for_ordering_op 
 *      Get the OID of the datatype-specific btree equality operator 
 *      associated with an ordering operator (a "&LT;" or "&GT;" operator). 
 * 
 * If "reverse" isn't NULL, also set *reverse to FALSE if the operator is "&LT;", 
 * TRUE if it's "&GT;" 
 * 
 * Returns InvalidOid if no matching equality operator can be found. 
 * (This indicates that the operator is not a valid ordering operator.) 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN263"></a><span class='Declare_Function'>get_equality_op_for_ordering_op</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>reverse</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN265"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span><a name="LN266"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>opfamily</span><span class='Delimiter'>; 
</span><a name="LN267"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>opcintype</span><span class='Delimiter'>; 
</span><a name="LN268"></a>    <a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Local'>strategy</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Find the operator in pg_amop */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN72"><span class='Ref_to_Proto'>get_ordering_op_properties</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN263"><span class='Ref_to_Parameter'>opno</span></a><span class='Delimiter'>, 
</span>                                   <span class='Operator'>&</span><a href="lsyscache.c.html#LN266"><span class='Ref_To_Local'>opfamily</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="lsyscache.c.html#LN267"><span class='Ref_To_Local'>opcintype</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="lsyscache.c.html#LN268"><span class='Ref_To_Local'>strategy</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Found a suitable opfamily, get matching equality operator */ 
</span>        <a href="lsyscache.c.html#LN265"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN70"><span class='Ref_to_Proto'>get_opfamily_member</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN266"><span class='Ref_To_Local'>opfamily</span></a><span class='Delimiter'>, 
</span>                                     <a href="lsyscache.c.html#LN267"><span class='Ref_To_Local'>opcintype</span></a><span class='Delimiter'>, 
</span>                                     <a href="lsyscache.c.html#LN267"><span class='Ref_To_Local'>opcintype</span></a><span class='Delimiter'>, 
</span>                                     <a href="../../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN263"><span class='Ref_to_Parameter'>reverse</span></a><span class='Parentheses'>) 
</span>            <span class='Operator'>*</span><a href="lsyscache.c.html#LN263"><span class='Ref_to_Parameter'>reverse</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN268"><span class='Ref_To_Local'>strategy</span></a> <span class='Operator'>== </span><a href="../../../include/access/stratnum.h.html#LN32"><span class='Ref_to_Const'>BTGreaterStrategyNumber</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="lsyscache.c.html#LN265"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_equality_op_for_ordering_op &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_ordering_op_for_equality_op 
 *      Get the OID of a datatype-specific btree ordering operator 
 *      associated with an equality operator.  (If there are multiple 
 *      possibilities, assume any one will do.) 
 * 
 * This function is used when we have to sort data before unique-ifying, 
 * and don't much care which sorting op is used as long as it's compatible 
 * with the intended equality operator.  Since we need a sorting operator, 
 * it should be single-data-type even if the given operator is cross-type. 
 * The caller specifies whether to find an op for the LHS or RHS data type. 
 * 
 * Returns InvalidOid if no matching ordering operator can be found. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN301"></a><span class='Declare_Function'>get_ordering_op_for_equality_op</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>use_lhs_type</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN303"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span><a name="LN304"></a>    <a href="../../../include/utils/catcache.h.html#LN119"><span class='Ref_to_Typedef'>CatCList</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>catlist</span><span class='Delimiter'>; 
</span><a name="LN305"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Search pg_amop to see if the target operator is registered as the "=" 
     * operator of any btree opfamily. 
     */ 
</span>    <a href="lsyscache.c.html#LN304"><span class='Ref_To_Local'>catlist</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN200"><span class='Ref_to_Macro'>SearchSysCacheList1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN301"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN305"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN305"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="lsyscache.c.html#LN304"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN153"><span class='Ref_to_Member'>n_members</span></a><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN305"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN315"></a>        <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span> <span class='Operator'>= &</span><a href="lsyscache.c.html#LN304"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN154"><span class='Ref_to_Member'>members</span></a><span class='Delimiter'>[</span><a href="lsyscache.c.html#LN305"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN115"><span class='Ref_to_Member'>tuple</span></a><span class='Delimiter'>; 
</span><a name="LN316"></a>        <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>aform</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN315"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* must be btree */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN316"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopmethod <span class='Operator'>!= </span><a href="../../../include/catalog/pg_am.h.html#LN69"><span class='Ref_to_Const'>BTREE_AM_OID</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN316"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopstrategy <span class='Operator'>== </span><a href="../../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Found a suitable opfamily, get matching ordering operator */ 
</span><a name="LN325"></a>            <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typid</span><span class='Delimiter'>; 
</span> 
            <a href="lsyscache.c.html#LN325"><span class='Ref_To_Local'>typid</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN301"><span class='Ref_to_Parameter'>use_lhs_type</span></a> <span class='Operator'>? </span><a href="lsyscache.c.html#LN316"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoplefttype <span class='Operator'>: </span><a href="lsyscache.c.html#LN316"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoprighttype<span class='Delimiter'>; 
</span>            <a href="lsyscache.c.html#LN303"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN70"><span class='Ref_to_Proto'>get_opfamily_member</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN316"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopfamily<span class='Delimiter'>, 
</span>                                         <a href="lsyscache.c.html#LN325"><span class='Ref_To_Local'>typid</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN325"><span class='Ref_To_Local'>typid</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/access/stratnum.h.html#LN28"><span class='Ref_to_Const'>BTLessStrategyNumber</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN303"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>))</span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* failure probably shouldn't happen, but keep looking if so */ 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;catlist-&GT;n_memb... &raquo; </span> 
 
    <a href="../../../include/utils/syscache.h.html#LN209"><span class='Ref_to_Macro'>ReleaseSysCacheList</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN304"><span class='Ref_To_Local'>catlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="lsyscache.c.html#LN303"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_ordering_op_for_equality_op &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_mergejoin_opfamilies 
 *      Given a putatively mergejoinable operator, return a list of the OIDs 
 *      of the btree opfamilies in which it represents equality. 
 * 
 * It is possible (though at present unusual) for an operator to be equality 
 * in more than one opfamily, hence the result is a list.  This also lets us 
 * return NIL if the operator is not found in any opfamilies. 
 * 
 * The planner currently uses simple equal() tests to compare the lists 
 * returned by this function, which makes the list order relevant, though 
 * strictly speaking it should not be.  Because of the way syscache list 
 * searches are handled, in normal operation the result will be sorted by OID 
 * so everything works fine.  If running with system index usage disabled, 
 * the result ordering is unspecified and hence the planner might fail to 
 * recognize optimization opportunities ... but that's hardly a scenario in 
 * which performance is good anyway, so there's no point in expending code 
 * or cycles here to guarantee the ordering in that case. 
 */ 
</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN362"></a><span class='Declare_Function'>get_mergejoin_opfamilies</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN364"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN365"></a>    <a href="../../../include/utils/catcache.h.html#LN119"><span class='Ref_to_Typedef'>CatCList</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>catlist</span><span class='Delimiter'>; 
</span><a name="LN366"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Search pg_amop to see if the target operator is registered as the "=" 
     * operator of any btree opfamily. 
     */ 
</span>    <a href="lsyscache.c.html#LN365"><span class='Ref_To_Local'>catlist</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN200"><span class='Ref_to_Macro'>SearchSysCacheList1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN362"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN366"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN366"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="lsyscache.c.html#LN365"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN153"><span class='Ref_to_Member'>n_members</span></a><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN366"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN376"></a>        <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span> <span class='Operator'>= &</span><a href="lsyscache.c.html#LN365"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN154"><span class='Ref_to_Member'>members</span></a><span class='Delimiter'>[</span><a href="lsyscache.c.html#LN366"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN115"><span class='Ref_to_Member'>tuple</span></a><span class='Delimiter'>; 
</span><a name="LN377"></a>        <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>aform</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN376"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* must be btree equality */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN377"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopmethod <span class='Operator'>== </span><a href="../../../include/catalog/pg_am.h.html#LN69"><span class='Ref_to_Const'>BTREE_AM_OID</span></a> <span class='Operator'>&& 
</span>            <a href="lsyscache.c.html#LN377"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopstrategy <span class='Operator'>== </span><a href="../../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Parentheses'>) 
</span>            <a href="lsyscache.c.html#LN364"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN162"><span class='Ref_to_Func'>lappend_oid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN364"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN377"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopfamily<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN209"><span class='Ref_to_Macro'>ReleaseSysCacheList</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN365"><span class='Ref_To_Local'>catlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="lsyscache.c.html#LN364"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_mergejoin_opfamilies &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_compatible_hash_operators 
 *      Get the OID(s) of hash equality operator(s) compatible with the given 
 *      operator, but operating on its LHS and/or RHS datatype. 
 * 
 * An operator for the LHS type is sought and returned into *lhs_opno if 
 * lhs_opno isn't NULL.  Similarly, an operator for the RHS type is sought 
 * and returned into *rhs_opno if rhs_opno isn't NULL. 
 * 
 * If the given operator is not cross-type, the results should be the same 
 * operator, but in cross-type situations they will be different. 
 * 
 * Returns true if able to find the requested operator(s), false if not. 
 * (This indicates that the operator should not have been marked oprcanhash.) 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN406"></a><span class='Declare_Function'>get_compatible_hash_operators</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, 
</span><a name="LN407"></a>                              <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lhs_opno</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rhs_opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN409"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN410"></a>    <a href="../../../include/utils/catcache.h.html#LN119"><span class='Ref_to_Typedef'>CatCList</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>catlist</span><span class='Delimiter'>; 
</span><a name="LN411"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Ensure output args are initialized on failure */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>lhs_opno</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>lhs_opno</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>rhs_opno</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>rhs_opno</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Search pg_amop to see if the target operator is registered as the "=" 
     * operator of any hash opfamily.  If the operator is registered in 
     * multiple opfamilies, assume we can use any one. 
     */ 
</span>    <a href="lsyscache.c.html#LN410"><span class='Ref_To_Local'>catlist</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN200"><span class='Ref_to_Macro'>SearchSysCacheList1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN406"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN411"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN411"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="lsyscache.c.html#LN410"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN153"><span class='Ref_to_Member'>n_members</span></a><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN411"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN428"></a>        <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span> <span class='Operator'>= &</span><a href="lsyscache.c.html#LN410"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN154"><span class='Ref_to_Member'>members</span></a><span class='Delimiter'>[</span><a href="lsyscache.c.html#LN411"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN115"><span class='Ref_to_Member'>tuple</span></a><span class='Delimiter'>; 
</span><a name="LN429"></a>        <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>aform</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN428"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN429"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopmethod <span class='Operator'>== </span><a href="../../../include/catalog/pg_am.h.html#LN72"><span class='Ref_to_Const'>HASH_AM_OID</span></a> <span class='Operator'>&& 
</span>            <a href="lsyscache.c.html#LN429"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopstrategy <span class='Operator'>== </span><a href="../../../include/access/hash.h.html#LN289"><span class='Ref_to_Const'>HTEqualStrategyNumber</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* No extra lookup needed if given operator is single-type */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN429"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoplefttype <span class='Operator'>== </span><a href="lsyscache.c.html#LN429"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoprighttype<span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>lhs_opno</span></a><span class='Parentheses'>) 
</span>                    <span class='Operator'>*</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>lhs_opno</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN406"><span class='Ref_to_Parameter'>opno</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>rhs_opno</span></a><span class='Parentheses'>) 
</span>                    <span class='Operator'>*</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>rhs_opno</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN406"><span class='Ref_to_Parameter'>opno</span></a><span class='Delimiter'>; 
</span>                <a href="lsyscache.c.html#LN409"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Get the matching single-type operator(s).  Failure probably 
             * shouldn't happen --- it implies a bogus opfamily --- but 
             * continue looking if so. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>lhs_opno</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>lhs_opno</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN70"><span class='Ref_to_Proto'>get_opfamily_member</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN429"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopfamily<span class='Delimiter'>, 
</span>                                                <a href="lsyscache.c.html#LN429"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoplefttype<span class='Delimiter'>, 
</span>                                                <a href="lsyscache.c.html#LN429"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoplefttype<span class='Delimiter'>, 
</span>                                                <a href="../../../include/access/hash.h.html#LN289"><span class='Ref_to_Const'>HTEqualStrategyNumber</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>lhs_opno</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* Matching LHS found, done if caller doesn't want RHS */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>rhs_opno</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="lsyscache.c.html#LN409"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>rhs_opno</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>rhs_opno</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN70"><span class='Ref_to_Proto'>get_opfamily_member</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN429"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopfamily<span class='Delimiter'>, 
</span>                                                <a href="lsyscache.c.html#LN429"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoprighttype<span class='Delimiter'>, 
</span>                                                <a href="lsyscache.c.html#LN429"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoprighttype<span class='Delimiter'>, 
</span>                                                <a href="../../../include/access/hash.h.html#LN289"><span class='Ref_to_Const'>HTEqualStrategyNumber</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>rhs_opno</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* Forget any LHS operator from this opfamily */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>lhs_opno</span></a><span class='Parentheses'>) 
</span>                        <span class='Operator'>*</span><a href="lsyscache.c.html#LN407"><span class='Ref_to_Parameter'>lhs_opno</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Comment_Multi_Line'>/* Matching RHS found, so done */ 
</span>                <a href="lsyscache.c.html#LN409"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if aform-&GT;amopmethod==HA... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;catlist-&GT;n_memb... &raquo; </span> 
 
    <a href="../../../include/utils/syscache.h.html#LN209"><span class='Ref_to_Macro'>ReleaseSysCacheList</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN410"><span class='Ref_To_Local'>catlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="lsyscache.c.html#LN409"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_compatible_hash_operators &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_op_hash_functions 
 *      Get the OID(s) of hash support function(s) compatible with the given 
 *      operator, operating on its LHS and/or RHS datatype as required. 
 * 
 * A function for the LHS type is sought and returned into *lhs_procno if 
 * lhs_procno isn't NULL.  Similarly, a function for the RHS type is sought 
 * and returned into *rhs_procno if rhs_procno isn't NULL. 
 * 
 * If the given operator is not cross-type, the results should be the same 
 * function, but in cross-type situations they will be different. 
 * 
 * Returns true if able to find the requested function(s), false if not. 
 * (This indicates that the operator should not have been marked oprcanhash.) 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN506"></a><span class='Declare_Function'>get_op_hash_functions</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, 
</span><a name="LN507"></a>                      <a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lhs_procno</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rhs_procno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN509"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN510"></a>    <a href="../../../include/utils/catcache.h.html#LN119"><span class='Ref_to_Typedef'>CatCList</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>catlist</span><span class='Delimiter'>; 
</span><a name="LN511"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Ensure output args are initialized on failure */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>lhs_procno</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>lhs_procno</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>rhs_procno</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>rhs_procno</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Search pg_amop to see if the target operator is registered as the "=" 
     * operator of any hash opfamily.  If the operator is registered in 
     * multiple opfamilies, assume we can use any one. 
     */ 
</span>    <a href="lsyscache.c.html#LN510"><span class='Ref_To_Local'>catlist</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN200"><span class='Ref_to_Macro'>SearchSysCacheList1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN506"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN511"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN511"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="lsyscache.c.html#LN510"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN153"><span class='Ref_to_Member'>n_members</span></a><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN511"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN528"></a>        <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tuple</span> <span class='Operator'>= &</span><a href="lsyscache.c.html#LN510"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN154"><span class='Ref_to_Member'>members</span></a><span class='Delimiter'>[</span><a href="lsyscache.c.html#LN511"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN115"><span class='Ref_to_Member'>tuple</span></a><span class='Delimiter'>; 
</span><a name="LN529"></a>        <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>aform</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN528"><span class='Ref_To_Local'>tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN529"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopmethod <span class='Operator'>== </span><a href="../../../include/catalog/pg_am.h.html#LN72"><span class='Ref_to_Const'>HASH_AM_OID</span></a> <span class='Operator'>&& 
</span>            <a href="lsyscache.c.html#LN529"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopstrategy <span class='Operator'>== </span><a href="../../../include/access/hash.h.html#LN289"><span class='Ref_to_Const'>HTEqualStrategyNumber</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Get the matching support function(s).  Failure probably 
             * shouldn't happen --- it implies a bogus opfamily --- but 
             * continue looking if so. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>lhs_procno</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>lhs_procno</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN83"><span class='Ref_to_Proto'>get_opfamily_proc</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN529"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopfamily<span class='Delimiter'>, 
</span>                                                <a href="lsyscache.c.html#LN529"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoplefttype<span class='Delimiter'>, 
</span>                                                <a href="lsyscache.c.html#LN529"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoplefttype<span class='Delimiter'>, 
</span>                                                <a href="../../../include/access/hash.h.html#LN297"><span class='Ref_to_Const'>HASHPROC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>lhs_procno</span></a><span class='Parentheses'>))</span> 
                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* Matching LHS found, done if caller doesn't want RHS */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>rhs_procno</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="lsyscache.c.html#LN509"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Comment_Multi_Line'>/* Only one lookup needed if given operator is single-type */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN529"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoplefttype <span class='Operator'>== </span><a href="lsyscache.c.html#LN529"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoprighttype<span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Operator'>*</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>rhs_procno</span></a> <span class='Operator'>= *</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>lhs_procno</span></a><span class='Delimiter'>; 
</span>                    <a href="lsyscache.c.html#LN509"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if lhs_procno &raquo; </span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>rhs_procno</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>rhs_procno</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN83"><span class='Ref_to_Proto'>get_opfamily_proc</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN529"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amopfamily<span class='Delimiter'>, 
</span>                                                <a href="lsyscache.c.html#LN529"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoprighttype<span class='Delimiter'>, 
</span>                                                <a href="lsyscache.c.html#LN529"><span class='Ref_To_Local'>aform</span></a><span class='Operator'>-&GT;</span>amoprighttype<span class='Delimiter'>, 
</span>                                                <a href="../../../include/access/hash.h.html#LN297"><span class='Ref_to_Const'>HASHPROC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>rhs_procno</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* Forget any LHS function from this opfamily */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>lhs_procno</span></a><span class='Parentheses'>) 
</span>                        <span class='Operator'>*</span><a href="lsyscache.c.html#LN507"><span class='Ref_to_Parameter'>lhs_procno</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Comment_Multi_Line'>/* Matching RHS found, so done */ 
</span>                <a href="lsyscache.c.html#LN509"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if aform-&GT;amopmethod==HA... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;catlist-&GT;n_memb... &raquo; </span> 
 
    <a href="../../../include/utils/syscache.h.html#LN209"><span class='Ref_to_Macro'>ReleaseSysCacheList</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN510"><span class='Ref_To_Local'>catlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="lsyscache.c.html#LN509"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_op_hash_functions &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_op_btree_interpretation 
 *      Given an operator's OID, find out which btree opfamilies it belongs to, 
 *      and what properties it has within each one.  The results are returned 
 *      as a palloc'd list of OpBtreeInterpretation structs. 
 * 
 * In addition to the normal btree operators, we consider a &LT;&GT; operator to be 
 * a "member" of an opfamily if its negator is an equality operator of the 
 * opfamily.  ROWCOMPARE_NE is returned as the strategy number for this case. 
 */ 
</span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN597"></a><span class='Declare_Function'>get_op_btree_interpretation</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN599"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span><a name="LN600"></a>    <a href="../../../include/utils/lsyscache.h.html#LN20"><span class='Ref_to_Struct'>OpBtreeInterpretation</span></a> <span class='Operator'>*</span><span class='Declare_Local'>thisresult</span><span class='Delimiter'>; 
</span><a name="LN601"></a>    <a href="../../../include/utils/catcache.h.html#LN119"><span class='Ref_to_Typedef'>CatCList</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>catlist</span><span class='Delimiter'>; 
</span><a name="LN602"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Find all the pg_amop entries containing the operator. 
     */ 
</span>    <a href="lsyscache.c.html#LN601"><span class='Ref_To_Local'>catlist</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN200"><span class='Ref_to_Macro'>SearchSysCacheList1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN597"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN602"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN602"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="lsyscache.c.html#LN601"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN153"><span class='Ref_to_Member'>n_members</span></a><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN602"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN611"></a>        <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>op_tuple</span> <span class='Operator'>= &</span><a href="lsyscache.c.html#LN601"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN154"><span class='Ref_to_Member'>members</span></a><span class='Delimiter'>[</span><a href="lsyscache.c.html#LN602"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN115"><span class='Ref_to_Member'>tuple</span></a><span class='Delimiter'>; 
</span><a name="LN612"></a>        <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>op_form</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN611"><span class='Ref_To_Local'>op_tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN613"></a>        <a href="../../../include/access/stratnum.h.html#LN21"><span class='Ref_to_Typedef'>StrategyNumber</span></a> <span class='Declare_Local'>op_strategy</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* must be btree */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN612"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amopmethod <span class='Operator'>!= </span><a href="../../../include/catalog/pg_am.h.html#LN69"><span class='Ref_to_Const'>BTREE_AM_OID</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Get the operator's btree strategy number */ 
</span>        <a href="lsyscache.c.html#LN613"><span class='Ref_To_Local'>op_strategy</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/access/stratnum.h.html#LN21"><span class='Ref_to_Typedef'>StrategyNumber</span></a><span class='Parentheses'>) </span><a href="lsyscache.c.html#LN612"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amopstrategy<span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN613"><span class='Ref_To_Local'>op_strategy</span></a> <span class='Operator'>&GT;= </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="lsyscache.c.html#LN613"><span class='Ref_To_Local'>op_strategy</span></a> <span class='Operator'>&LT;= </span><span class='Number'>5</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN20"><span class='Ref_to_Struct'>OpBtreeInterpretation</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN20"><span class='Ref_to_Struct'>OpBtreeInterpretation</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN22"><span class='Ref_to_Member'>opfamily_id</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN612"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amopfamily<span class='Delimiter'>; 
</span>        <a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN23"><span class='Ref_to_Member'>strategy</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN613"><span class='Ref_To_Local'>op_strategy</span></a><span class='Delimiter'>; 
</span>        <a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN24"><span class='Ref_to_Member'>oplefttype</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN612"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amoplefttype<span class='Delimiter'>; 
</span>        <a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN25"><span class='Ref_to_Member'>oprighttype</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN612"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amoprighttype<span class='Delimiter'>; 
</span>        <a href="lsyscache.c.html#LN599"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN599"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;catlist-&GT;n_memb... &raquo; </span> 
 
    <a href="../../../include/utils/syscache.h.html#LN209"><span class='Ref_to_Macro'>ReleaseSysCacheList</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN601"><span class='Ref_To_Local'>catlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If we didn't find any btree opfamily containing the operator, perhaps 
     * it is a &LT;&GT; operator.  See if it has a negator that is in an opfamily. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN599"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>== </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN640"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>op_negator</span> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN107"><span class='Ref_to_Proto'>get_negator</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN597"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN640"><span class='Ref_To_Local'>op_negator</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="lsyscache.c.html#LN601"><span class='Ref_To_Local'>catlist</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN200"><span class='Ref_to_Macro'>SearchSysCacheList1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, 
</span>                                          <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN640"><span class='Ref_To_Local'>op_negator</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN602"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN602"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="lsyscache.c.html#LN601"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN153"><span class='Ref_to_Member'>n_members</span></a><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN602"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN649"></a>                <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>op_tuple</span> <span class='Operator'>= &</span><a href="lsyscache.c.html#LN601"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN154"><span class='Ref_to_Member'>members</span></a><span class='Delimiter'>[</span><a href="lsyscache.c.html#LN602"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN115"><span class='Ref_to_Member'>tuple</span></a><span class='Delimiter'>; 
</span><a name="LN650"></a>                <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>op_form</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN649"><span class='Ref_To_Local'>op_tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN651"></a>                <a href="../../../include/access/stratnum.h.html#LN21"><span class='Ref_to_Typedef'>StrategyNumber</span></a> <span class='Declare_Local'>op_strategy</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* must be btree */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN650"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amopmethod <span class='Operator'>!= </span><a href="../../../include/catalog/pg_am.h.html#LN69"><span class='Ref_to_Const'>BTREE_AM_OID</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Get the operator's btree strategy number */ 
</span>                <a href="lsyscache.c.html#LN651"><span class='Ref_To_Local'>op_strategy</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/access/stratnum.h.html#LN21"><span class='Ref_to_Typedef'>StrategyNumber</span></a><span class='Parentheses'>) </span><a href="lsyscache.c.html#LN650"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amopstrategy<span class='Delimiter'>; 
</span>                <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN651"><span class='Ref_To_Local'>op_strategy</span></a> <span class='Operator'>&GT;= </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="lsyscache.c.html#LN651"><span class='Ref_To_Local'>op_strategy</span></a> <span class='Operator'>&LT;= </span><span class='Number'>5</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* Only consider negators that are = */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN651"><span class='Ref_To_Local'>op_strategy</span></a> <span class='Operator'>!= </span><a href="../../../include/access/stratnum.h.html#LN30"><span class='Ref_to_Const'>BTEqualStrategyNumber</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* OK, report it with "strategy" ROWCOMPARE_NE */ 
</span>                <a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN20"><span class='Ref_to_Struct'>OpBtreeInterpretation</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>                    <a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN20"><span class='Ref_to_Struct'>OpBtreeInterpretation</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN22"><span class='Ref_to_Member'>opfamily_id</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN650"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amopfamily<span class='Delimiter'>; 
</span>                <a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN23"><span class='Ref_to_Member'>strategy</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/primnodes.h.html#LN1023"><span class='Ref_to_EnumConst'>ROWCOMPARE_NE</span></a><span class='Delimiter'>; 
</span>                <a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN24"><span class='Ref_to_Member'>oplefttype</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN650"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amoplefttype<span class='Delimiter'>; 
</span>                <a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN25"><span class='Ref_to_Member'>oprighttype</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN650"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amoprighttype<span class='Delimiter'>; 
</span>                <a href="lsyscache.c.html#LN599"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN599"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN600"><span class='Ref_To_Local'>thisresult</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;catlist-&GT;n_memb... &raquo; </span> 
 
            <a href="../../../include/utils/syscache.h.html#LN209"><span class='Ref_to_Macro'>ReleaseSysCacheList</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN601"><span class='Ref_To_Local'>catlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if OidIsValid(op_negator... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if result==NIL &raquo; </span> 
 
    <span class='Control'>return</span> <a href="lsyscache.c.html#LN599"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_op_btree_interpretation &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * equality_ops_are_compatible 
 *      Return TRUE if the two given equality operators have compatible 
 *      semantics. 
 * 
 * This is trivially true if they are the same operator.  Otherwise, 
 * we look to see if they can be found in the same btree or hash opfamily. 
 * Either finding allows us to assume that they have compatible notions 
 * of equality.  (The reason we need to do these pushups is that one might 
 * be a cross-type operator; for instance int24eq vs int4eq.) 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN694"></a><span class='Declare_Function'>equality_ops_are_compatible</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno1</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN696"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN697"></a>    <a href="../../../include/utils/catcache.h.html#LN119"><span class='Ref_to_Typedef'>CatCList</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>catlist</span><span class='Delimiter'>; 
</span><a name="LN698"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Easy if they're the same operator */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN694"><span class='Ref_to_Parameter'>opno1</span></a> <span class='Operator'>== </span><a href="lsyscache.c.html#LN694"><span class='Ref_to_Parameter'>opno2</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We search through all the pg_amop entries for opno1. 
     */ 
</span>    <a href="lsyscache.c.html#LN697"><span class='Ref_To_Local'>catlist</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN200"><span class='Ref_to_Macro'>SearchSysCacheList1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN36"><span class='Ref_to_EnumConst'>AMOPOPID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN694"><span class='Ref_to_Parameter'>opno1</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN696"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN698"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN698"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="lsyscache.c.html#LN697"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN153"><span class='Ref_to_Member'>n_members</span></a><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN698"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN712"></a>        <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>op_tuple</span> <span class='Operator'>= &</span><a href="lsyscache.c.html#LN697"><span class='Ref_To_Local'>catlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN154"><span class='Ref_to_Member'>members</span></a><span class='Delimiter'>[</span><a href="lsyscache.c.html#LN698"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="../../../include/utils/catcache.h.html#LN115"><span class='Ref_to_Member'>tuple</span></a><span class='Delimiter'>; 
</span><a name="LN713"></a>        <a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a> <span class='Declare_Local'>op_form</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amop.h.html#LN76"><span class='Ref_to_Typedef'>Form_pg_amop</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN712"><span class='Ref_To_Local'>op_tuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* must be btree or hash */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN713"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amopmethod <span class='Operator'>== </span><a href="../../../include/catalog/pg_am.h.html#LN69"><span class='Ref_to_Const'>BTREE_AM_OID</span></a> <span class='Operator'>|| 
</span>            <a href="lsyscache.c.html#LN713"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amopmethod <span class='Operator'>== </span><a href="../../../include/catalog/pg_am.h.html#LN72"><span class='Ref_to_Const'>HASH_AM_OID</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN61"><span class='Ref_to_Func'>op_in_opfamily</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN694"><span class='Ref_to_Parameter'>opno2</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN713"><span class='Ref_To_Local'>op_form</span></a><span class='Operator'>-&GT;</span>amopfamily<span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="lsyscache.c.html#LN696"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN209"><span class='Ref_to_Macro'>ReleaseSysCacheList</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN697"><span class='Ref_To_Local'>catlist</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="lsyscache.c.html#LN696"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end equality_ops_are_compatible &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*              ---------- AMPROC CACHES ----------                      */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_opfamily_proc 
 *      Get the OID of the specified support function 
 *      for the specified opfamily and datatypes. 
 * 
 * Returns InvalidOid if there is no pg_amproc entry for the given keys. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN743"></a><span class='Declare_Function'>get_opfamily_proc</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opfamily</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>lefttype</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>righttype</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> <span class='Declare_Parameter'>procnum</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN745"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN746"></a>    <a href="../../../include/catalog/pg_amproc.h.html#LN58"><span class='Ref_to_Typedef'>Form_pg_amproc</span></a> <span class='Declare_Local'>amproc_tup</span><span class='Delimiter'>; 
</span><a name="LN747"></a>    <a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN745"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN161"><span class='Ref_to_Macro'>SearchSysCache4</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN38"><span class='Ref_to_EnumConst'>AMPROCNUM</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN743"><span class='Ref_to_Parameter'>opfamily</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN743"><span class='Ref_to_Parameter'>lefttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN743"><span class='Ref_to_Parameter'>righttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN456"><span class='Ref_to_Macro'>Int16GetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN743"><span class='Ref_to_Parameter'>procnum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN745"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN746"><span class='Ref_To_Local'>amproc_tup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_amproc.h.html#LN58"><span class='Ref_to_Typedef'>Form_pg_amproc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN745"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN747"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN746"><span class='Ref_To_Local'>amproc_tup</span></a><span class='Operator'>-&GT;</span>amproc<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN745"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN747"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*              ---------- ATTRIBUTE CACHES ----------                   */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_attname 
 *      Given the relation id and the attribute number, 
 *      return the "attname" field from the attribute relation. 
 * 
 * Note: returns a palloc'd copy of the string, or NULL if no such attribute. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN773"></a><span class='Declare_Function'>get_attname</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a> <span class='Declare_Parameter'>attnum</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN775"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN775"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN157"><span class='Ref_to_Macro'>SearchSysCache2</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN40"><span class='Ref_to_EnumConst'>ATTNUM</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN773"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN456"><span class='Ref_to_Macro'>Int16GetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN773"><span class='Ref_to_Parameter'>attnum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN775"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN782"></a>        <a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Local'>att_tup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN775"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN783"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN783"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN782"><span class='Ref_To_Local'>att_tup</span></a><span class='Operator'>-&GT;</span>attname<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN775"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN783"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_attname &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_relid_attribute_name 
 * 
 * Same as above routine get_attname(), except that error 
 * is handled by elog() instead of returning NULL. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN800"></a><span class='Declare_Function'>get_relid_attribute_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a> <span class='Declare_Parameter'>attnum</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN802"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attname</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN802"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN85"><span class='Ref_to_Proto'>get_attname</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN800"><span class='Ref_to_Parameter'>relid</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN800"><span class='Ref_to_Parameter'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN802"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for attribute %d of relation %u"</span><span class='Delimiter'>, 
</span>             <a href="lsyscache.c.html#LN800"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN800"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN802"><span class='Ref_To_Local'>attname</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_attnum 
 * 
 *      Given the relation id and the attribute name, 
 *      return the "attnum" field from the attribute relation. 
 * 
 *      Returns InvalidAttrNumber if the attr doesn't exist (or is dropped). 
 */ 
</span><a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a> 
<a name="LN820"></a><span class='Declare_Function'>get_attnum</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>attname</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN822"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN822"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN129"><span class='Ref_to_Proto'>SearchSysCacheAttName</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN820"><span class='Ref_to_Parameter'>relid</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN820"><span class='Ref_to_Parameter'>attname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN822"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN827"></a>        <a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Local'>att_tup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN822"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN828"></a>        <a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN828"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN827"><span class='Ref_To_Local'>att_tup</span></a><span class='Operator'>-&GT;</span>attnum<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN822"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN828"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_attidentity 
 * 
 *      Given the relation id and the attribute name, 
 *      return the "attidentity" field from the attribute relation. 
 * 
 *      Returns '\0' if not found. 
 * 
 *      Since no identity is represented by '\0', this can also be used as a 
 *      Boolean test. 
 */ 
</span><span class='Keyword'>char 
</span><a name="LN850"></a><span class='Declare_Function'>get_attidentity</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a> <span class='Declare_Parameter'>attnum</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN852"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN852"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN157"><span class='Ref_to_Macro'>SearchSysCache2</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN40"><span class='Ref_to_EnumConst'>ATTNUM</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN850"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN456"><span class='Ref_to_Macro'>Int16GetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN850"><span class='Ref_to_Parameter'>attnum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN852"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN859"></a>        <a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Local'>att_tup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN852"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN860"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN860"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN859"><span class='Ref_To_Local'>att_tup</span></a><span class='Operator'>-&GT;</span>attidentity<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN852"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN860"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='String'>'\0'</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_attidentity &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_atttype 
 * 
 *      Given the relation OID and the attribute number with the relation, 
 *      return the attribute type OID. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN877"></a><span class='Declare_Function'>get_atttype</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a> <span class='Declare_Parameter'>attnum</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN879"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN879"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN157"><span class='Ref_to_Macro'>SearchSysCache2</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN40"><span class='Ref_to_EnumConst'>ATTNUM</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN877"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN456"><span class='Ref_to_Macro'>Int16GetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN877"><span class='Ref_to_Parameter'>attnum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN879"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN886"></a>        <a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Local'>att_tup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN879"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN887"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN887"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN886"><span class='Ref_To_Local'>att_tup</span></a><span class='Operator'>-&GT;</span>atttypid<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN879"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN887"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_atttype &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_atttypmod 
 * 
 *      Given the relation id and the attribute number, 
 *      return the "atttypmod" field from the attribute relation. 
 */ 
</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> 
<a name="LN904"></a><span class='Declare_Function'>get_atttypmod</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a> <span class='Declare_Parameter'>attnum</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN906"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN906"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN157"><span class='Ref_to_Macro'>SearchSysCache2</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN40"><span class='Ref_to_EnumConst'>ATTNUM</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN904"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN456"><span class='Ref_to_Macro'>Int16GetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN904"><span class='Ref_to_Parameter'>attnum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN906"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN913"></a>        <a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Local'>att_tup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN906"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN914"></a>        <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN914"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN913"><span class='Ref_To_Local'>att_tup</span></a><span class='Operator'>-&GT;</span>atttypmod<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN906"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN914"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_atttypmod &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_atttypetypmodcoll 
 * 
 *      A three-fer: given the relation id and the attribute number, 
 *      fetch atttypid, atttypmod, and attcollation in a single cache lookup. 
 * 
 * Unlike the otherwise-similar get_atttype/get_atttypmod, this routine 
 * raises an error if it can't obtain the information. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN934"></a><span class='Declare_Function'>get_atttypetypmodcoll</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a> <span class='Declare_Parameter'>attnum</span><span class='Delimiter'>, 
</span><a name="LN935"></a>                      <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typid</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typmod</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>collid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN937"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN938"></a>    <a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a> <span class='Declare_Local'>att_tup</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN937"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN157"><span class='Ref_to_Macro'>SearchSysCache2</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN40"><span class='Ref_to_EnumConst'>ATTNUM</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN934"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN456"><span class='Ref_to_Macro'>Int16GetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN934"><span class='Ref_to_Parameter'>attnum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN937"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for attribute %d of relation %u"</span><span class='Delimiter'>, 
</span>             <a href="lsyscache.c.html#LN934"><span class='Ref_to_Parameter'>attnum</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN934"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN938"><span class='Ref_To_Local'>att_tup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_attribute.h.html#LN186"><span class='Ref_to_Typedef'>Form_pg_attribute</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN937"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="lsyscache.c.html#LN935"><span class='Ref_to_Parameter'>typid</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN938"><span class='Ref_To_Local'>att_tup</span></a><span class='Operator'>-&GT;</span>atttypid<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN935"><span class='Ref_to_Parameter'>typmod</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN938"><span class='Ref_To_Local'>att_tup</span></a><span class='Operator'>-&GT;</span>atttypmod<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN935"><span class='Ref_to_Parameter'>collid</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN938"><span class='Ref_To_Local'>att_tup</span></a><span class='Operator'>-&GT;</span>attcollation<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN937"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_atttypetypmodcoll &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*              ---------- COLLATION CACHE ----------                    */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_collation_name 
 *      Returns the name of a given pg_collation entry. 
 * 
 * Returns a palloc'd copy of the string, or NULL if no such constraint. 
 * 
 * NOTE: since collation name is not unique, be wary of code that uses this 
 * for anything except preparing error messages. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN966"></a><span class='Declare_Function'>get_collation_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>colloid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN968"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN968"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN49"><span class='Ref_to_EnumConst'>COLLOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN966"><span class='Ref_to_Parameter'>colloid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN968"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN973"></a>        <a href="../../../include/catalog/pg_collation.h.html#LN51"><span class='Ref_to_Typedef'>Form_pg_collation</span></a> <span class='Declare_Local'>colltup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_collation.h.html#LN51"><span class='Ref_to_Typedef'>Form_pg_collation</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN968"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN974"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN974"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN973"><span class='Ref_To_Local'>colltup</span></a><span class='Operator'>-&GT;</span>collname<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN968"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN974"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*              ---------- CONSTRAINT CACHE ----------                   */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_constraint_name 
 *      Returns the name of a given pg_constraint entry. 
 * 
 * Returns a palloc'd copy of the string, or NULL if no such constraint. 
 * 
 * NOTE: since constraint name is not unique, be wary of code that uses this 
 * for anything except preparing error messages. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN996"></a><span class='Declare_Function'>get_constraint_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>conoid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN998"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN998"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN52"><span class='Ref_to_EnumConst'>CONSTROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN996"><span class='Ref_to_Parameter'>conoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN998"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1003"></a>        <a href="../../../include/catalog/pg_constraint.h.html#LN146"><span class='Ref_to_Typedef'>Form_pg_constraint</span></a> <span class='Declare_Local'>contup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_constraint.h.html#LN146"><span class='Ref_to_Typedef'>Form_pg_constraint</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN998"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1004"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1004"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1003"><span class='Ref_To_Local'>contup</span></a><span class='Operator'>-&GT;</span>conname<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN998"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1004"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*              ---------- LANGUAGE CACHE ----------                     */ 
</span> 
<span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1017"></a><span class='Declare_Function'>get_language_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>langoid</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>missing_ok</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1019"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1019"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN67"><span class='Ref_to_EnumConst'>LANGOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1017"><span class='Ref_to_Parameter'>langoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1019"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1024"></a>        <a href="../../../include/catalog/pg_language.h.html#LN50"><span class='Ref_to_Typedef'>Form_pg_language</span></a> <span class='Declare_Local'>lantup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_language.h.html#LN50"><span class='Ref_to_Typedef'>Form_pg_language</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1019"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1025"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1025"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1024"><span class='Ref_To_Local'>lantup</span></a><span class='Operator'>-&GT;</span>lanname<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1019"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1025"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN1017"><span class='Ref_to_Parameter'>missing_ok</span></a><span class='Parentheses'>) 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for language %u"</span><span class='Delimiter'>, 
</span>             <a href="lsyscache.c.html#LN1017"><span class='Ref_to_Parameter'>langoid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_language_name &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*              ---------- OPCLASS CACHE ----------                      */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_opclass_family 
 * 
 *      Returns the OID of the operator family the opclass belongs to. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1046"></a><span class='Declare_Function'>get_opclass_family</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opclass</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1048"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1049"></a>    <a href="../../../include/catalog/pg_opclass.h.html#LN67"><span class='Ref_to_Typedef'>Form_pg_opclass</span></a> <span class='Declare_Local'>cla_tup</span><span class='Delimiter'>; 
</span><a name="LN1050"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1048"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN47"><span class='Ref_to_EnumConst'>CLAOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1046"><span class='Ref_to_Parameter'>opclass</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1048"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for opclass %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1046"><span class='Ref_to_Parameter'>opclass</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN1049"><span class='Ref_To_Local'>cla_tup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_opclass.h.html#LN67"><span class='Ref_to_Typedef'>Form_pg_opclass</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1048"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1050"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1049"><span class='Ref_To_Local'>cla_tup</span></a><span class='Operator'>-&GT;</span>opcfamily<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1048"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1050"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_opclass_input_type 
 * 
 *      Returns the OID of the datatype the opclass indexes. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1068"></a><span class='Declare_Function'>get_opclass_input_type</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opclass</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1070"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1071"></a>    <a href="../../../include/catalog/pg_opclass.h.html#LN67"><span class='Ref_to_Typedef'>Form_pg_opclass</span></a> <span class='Declare_Local'>cla_tup</span><span class='Delimiter'>; 
</span><a name="LN1072"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1070"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN47"><span class='Ref_to_EnumConst'>CLAOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1068"><span class='Ref_to_Parameter'>opclass</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1070"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for opclass %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1068"><span class='Ref_to_Parameter'>opclass</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN1071"><span class='Ref_To_Local'>cla_tup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_opclass.h.html#LN67"><span class='Ref_to_Typedef'>Form_pg_opclass</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1070"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1072"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1071"><span class='Ref_To_Local'>cla_tup</span></a><span class='Operator'>-&GT;</span>opcintype<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1070"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1072"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*              ---------- OPERATOR CACHE ----------                     */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_opcode 
 * 
 *      Returns the regproc id of the routine used to implement an 
 *      operator given the operator oid. 
 */ 
</span><a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> 
<a name="LN1093"></a><span class='Declare_Function'>get_opcode</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1095"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1095"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1093"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1095"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1100"></a>        <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>optup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1095"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1101"></a>        <a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1101"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1100"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprcode<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1095"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1101"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a><span class='Parentheses'>) </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_opname 
 *    returns the name of the operator with the given opno 
 * 
 * Note: returns a palloc'd copy of the string, or NULL if no such operator. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1118"></a><span class='Declare_Function'>get_opname</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1120"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1120"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1118"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1120"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1125"></a>        <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>optup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1120"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1126"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1126"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1125"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprname<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1120"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1126"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_op_rettype 
 *      Given operator oid, return the operator's result type. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1141"></a><span class='Declare_Function'>get_op_rettype</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1143"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1143"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1141"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1143"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1148"></a>        <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>optup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1143"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1149"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1149"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1148"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprresult<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1143"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1149"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * op_input_types 
 * 
 *      Returns the left and right input datatypes for an operator 
 *      (InvalidOid if not relevant). 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1166"></a><span class='Declare_Function'>op_input_types</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lefttype</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>righttype</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1168"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1169"></a>    <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>optup</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1168"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1166"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1168"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span>  <span class='Comment_Single_Line'>/* shouldn't happen */ 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for operator %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1166"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN1169"><span class='Ref_To_Local'>optup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1168"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN1166"><span class='Ref_to_Parameter'>lefttype</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1169"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprleft<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN1166"><span class='Ref_to_Parameter'>righttype</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1169"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprright<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1168"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * op_mergejoinable 
 * 
 * Returns true if the operator is potentially mergejoinable.  (The planner 
 * will fail to find any mergejoin plans unless there are suitable btree 
 * opfamily entries for this operator and associated sortops.  The pg_operator 
 * flag is just a hint to tell the planner whether to bother looking.) 
 * 
 * In some cases (currently only array_eq and record_eq), mergejoinability 
 * depends on the specific input data type the operator is invoked for, so 
 * that must be passed as well. We currently assume that only one input's type 
 * is needed to check this --- by convention, pass the left input's data type. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN1194"></a><span class='Declare_Function'>op_mergejoinable</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>inputtype</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1196"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN1197"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1198"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typentry</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For array_eq or record_eq, we can sort if the element or field types 
     * are all sortable.  We could implement all the checks for that here, but 
     * the typcache already does that and caches the results too, so let's 
     * rely on the typcache. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1194"><span class='Ref_to_Parameter'>opno</span></a> <span class='Operator'>== </span><a href="../../../include/catalog/pg_operator.h.html#LN775"><span class='Ref_to_Const'>ARRAY_EQ_OP</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="lsyscache.c.html#LN1198"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1194"><span class='Ref_to_Parameter'>inputtype</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/typcache.h.html#LN112"><span class='Ref_to_Const'>TYPECACHE_CMP_PROC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1198"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN56"><span class='Ref_to_Member'>cmp_proc</span></a> <span class='Operator'>== </span>F_BTARRAYCMP<span class='Parentheses'>) 
</span>            <a href="lsyscache.c.html#LN1196"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1194"><span class='Ref_to_Parameter'>opno</span></a> <span class='Operator'>== </span><a href="../../../include/catalog/pg_operator.h.html#LN1719"><span class='Ref_to_Const'>RECORD_EQ_OP</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="lsyscache.c.html#LN1198"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1194"><span class='Ref_to_Parameter'>inputtype</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/typcache.h.html#LN112"><span class='Ref_to_Const'>TYPECACHE_CMP_PROC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1198"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN56"><span class='Ref_to_Member'>cmp_proc</span></a> <span class='Operator'>== </span>F_BTRECORDCMP<span class='Parentheses'>) 
</span>            <a href="lsyscache.c.html#LN1196"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* For all other operators, rely on pg_operator.oprcanmerge */ 
</span>        <a href="lsyscache.c.html#LN1197"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1194"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1197"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN1224"></a>            <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>optup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1197"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="lsyscache.c.html#LN1196"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1224"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprcanmerge<span class='Delimiter'>; 
</span>            <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1197"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1196"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end op_mergejoinable &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * op_hashjoinable 
 * 
 * Returns true if the operator is hashjoinable.  (There must be a suitable 
 * hash opfamily entry for this operator if it is so marked.) 
 * 
 * In some cases (currently only array_eq), hashjoinability depends on the 
 * specific input data type the operator is invoked for, so that must be 
 * passed as well.  We currently assume that only one input's type is needed 
 * to check this --- by convention, pass the left input's data type. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN1245"></a><span class='Declare_Function'>op_hashjoinable</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>inputtype</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1247"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN1248"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1249"></a>    <a href="../../../include/utils/typcache.h.html#LN28"><span class='Ref_to_Struct'>TypeCacheEntry</span></a> <span class='Operator'>*</span><span class='Declare_Local'>typentry</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* As in op_mergejoinable, let the typcache handle the hard cases */ 
</span>    <span class='Comment_Multi_Line'>/* Eventually we'll need a similar case for record_eq ... */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1245"><span class='Ref_to_Parameter'>opno</span></a> <span class='Operator'>== </span><a href="../../../include/catalog/pg_operator.h.html#LN775"><span class='Ref_to_Const'>ARRAY_EQ_OP</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="lsyscache.c.html#LN1249"><span class='Ref_To_Local'>typentry</span></a> <span class='Operator'>= </span><a href="../../../include/utils/typcache.h.html#LN142"><span class='Ref_to_Proto'>lookup_type_cache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1245"><span class='Ref_to_Parameter'>inputtype</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/typcache.h.html#LN113"><span class='Ref_to_Const'>TYPECACHE_HASH_PROC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1249"><span class='Ref_To_Local'>typentry</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/typcache.h.html#LN57"><span class='Ref_to_Member'>hash_proc</span></a> <span class='Operator'>== </span>F_HASH_ARRAY<span class='Parentheses'>) 
</span>            <a href="lsyscache.c.html#LN1247"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* For all other operators, rely on pg_operator.oprcanhash */ 
</span>        <a href="lsyscache.c.html#LN1248"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1245"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1248"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN1265"></a>            <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>optup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1248"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="lsyscache.c.html#LN1247"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1265"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprcanhash<span class='Delimiter'>; 
</span>            <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1248"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1247"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end op_hashjoinable &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * op_strict 
 * 
 * Get the proisstrict flag for the operator's underlying function. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN1280"></a><span class='Declare_Function'>op_strict</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1282"></a>    <a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> <span class='Declare_Local'>funcid</span> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN98"><span class='Ref_to_Proto'>get_opcode</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1280"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1282"><span class='Ref_To_Local'>funcid</span></a> <span class='Operator'>== </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a><span class='Parentheses'>) </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>)</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"operator %u does not exist"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1280"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="../../../include/utils/lsyscache.h.html#LN117"><span class='Ref_to_Proto'>func_strict</span></a><span class='Parentheses'>((</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>) </span><a href="lsyscache.c.html#LN1282"><span class='Ref_To_Local'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * op_volatile 
 * 
 * Get the provolatile flag for the operator's underlying function. 
 */ 
</span><span class='Keyword'>char 
</span><a name="LN1296"></a><span class='Declare_Function'>op_volatile</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1298"></a>    <a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> <span class='Declare_Local'>funcid</span> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN98"><span class='Ref_to_Proto'>get_opcode</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1296"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1298"><span class='Ref_To_Local'>funcid</span></a> <span class='Operator'>== </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a><span class='Parentheses'>) </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>)</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"operator %u does not exist"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1296"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="../../../include/utils/lsyscache.h.html#LN118"><span class='Ref_to_Proto'>func_volatile</span></a><span class='Parentheses'>((</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>) </span><a href="lsyscache.c.html#LN1298"><span class='Ref_To_Local'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_commutator 
 * 
 *      Returns the corresponding commutator of an operator. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1312"></a><span class='Declare_Function'>get_commutator</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1314"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1314"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1312"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1314"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1319"></a>        <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>optup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1314"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1320"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1320"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1319"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprcom<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1314"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1320"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_negator 
 * 
 *      Returns the corresponding negator of an operator. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1336"></a><span class='Declare_Function'>get_negator</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1338"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1338"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1336"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1338"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1343"></a>        <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>optup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1338"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1344"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1344"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1343"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprnegate<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1338"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1344"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_oprrest 
 * 
 *      Returns procedure id for computing selectivity of an operator. 
 */ 
</span><a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> 
<a name="LN1360"></a><span class='Declare_Function'>get_oprrest</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1362"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1362"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1360"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1362"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1367"></a>        <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>optup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1362"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1368"></a>        <a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1368"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1367"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprrest<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1362"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1368"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a><span class='Parentheses'>) </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_oprjoin 
 * 
 *      Returns procedure id for computing selectivity of a join. 
 */ 
</span><a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> 
<a name="LN1384"></a><span class='Declare_Function'>get_oprjoin</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1386"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1386"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN71"><span class='Ref_to_EnumConst'>OPEROID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1384"><span class='Ref_to_Parameter'>opno</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1386"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1391"></a>        <a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a> <span class='Declare_Local'>optup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_operator.h.html#LN56"><span class='Ref_to_Typedef'>Form_pg_operator</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1386"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1392"></a>        <a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1392"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1391"><span class='Ref_To_Local'>optup</span></a><span class='Operator'>-&GT;</span>oprjoin<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1386"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1392"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a><span class='Parentheses'>) </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*              ---------- FUNCTION CACHE ----------                     */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_func_name 
 *    returns the name of the function with the given funcid 
 * 
 * Note: returns a palloc'd copy of the string, or NULL if no such function. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1411"></a><span class='Declare_Function'>get_func_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1413"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1413"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1411"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1413"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1418"></a>        <a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a> <span class='Declare_Local'>functup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1413"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1419"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1419"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1418"><span class='Ref_To_Local'>functup</span></a><span class='Operator'>-&GT;</span>proname<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1413"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1419"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_func_namespace 
 * 
 *      Returns the pg_namespace OID associated with a given function. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1435"></a><span class='Declare_Function'>get_func_namespace</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1437"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1437"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1435"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1437"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1442"></a>        <a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a> <span class='Declare_Local'>functup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1437"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1443"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1443"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1442"><span class='Ref_To_Local'>functup</span></a><span class='Operator'>-&GT;</span>pronamespace<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1437"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1443"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_func_rettype 
 *      Given procedure id, return the function's result type. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1458"></a><span class='Declare_Function'>get_func_rettype</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1460"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1461"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1460"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1458"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1460"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1458"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1461"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1460"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>prorettype<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1460"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1461"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_func_nargs 
 *      Given procedure id, return the number of arguments. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN1477"></a><span class='Declare_Function'>get_func_nargs</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1479"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1480"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1479"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1477"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1479"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1477"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1480"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1479"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>pronargs<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1479"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1480"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_func_signature 
 *      Given procedure id, return the function's argument and result types. 
 *      (The return value is the result type.) 
 * 
 * The arguments are returned as a palloc'd array. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1499"></a><span class='Declare_Function'>get_func_signature</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>argtypes</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>nargs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1501"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1502"></a>    <a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a> <span class='Declare_Local'>procstruct</span><span class='Delimiter'>; 
</span><a name="LN1503"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1501"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1499"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1501"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1499"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1502"><span class='Ref_To_Local'>procstruct</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1501"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1503"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1502"><span class='Ref_To_Local'>procstruct</span></a><span class='Operator'>-&GT;</span>prorettype<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN1499"><span class='Ref_to_Parameter'>nargs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="lsyscache.c.html#LN1502"><span class='Ref_To_Local'>procstruct</span></a><span class='Operator'>-&GT;</span>pronargs<span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="lsyscache.c.html#LN1499"><span class='Ref_to_Parameter'>nargs</span></a> <span class='Operator'>== </span><a href="lsyscache.c.html#LN1502"><span class='Ref_To_Local'>procstruct</span></a><span class='Operator'>-&GT;</span>proargtypes<span class='Operator'>.</span>dim1<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN1499"><span class='Ref_to_Parameter'>argtypes</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="lsyscache.c.html#LN1499"><span class='Ref_to_Parameter'>nargs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    memcpy<span class='Parentheses'>(</span><span class='Operator'>*</span><a href="lsyscache.c.html#LN1499"><span class='Ref_to_Parameter'>argtypes</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1502"><span class='Ref_To_Local'>procstruct</span></a><span class='Operator'>-&GT;</span>proargtypes<span class='Operator'>.</span>values<span class='Delimiter'>, </span><span class='Operator'>*</span><a href="lsyscache.c.html#LN1499"><span class='Ref_to_Parameter'>nargs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1501"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1503"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_func_signature &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_func_variadictype 
 *      Given procedure id, return the function's provariadic field. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1526"></a><span class='Declare_Function'>get_func_variadictype</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1528"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1529"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1528"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1526"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1528"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1526"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1529"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1528"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>provariadic<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1528"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1529"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_func_retset 
 *      Given procedure id, return the function's proretset flag. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN1545"></a><span class='Declare_Function'>get_func_retset</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1547"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1548"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1547"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1545"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1547"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1545"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1548"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1547"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>proretset<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1547"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1548"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * func_strict 
 *      Given procedure id, return the function's proisstrict flag. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN1564"></a><span class='Declare_Function'>func_strict</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1566"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1567"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1566"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1564"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1566"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1564"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1567"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1566"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>proisstrict<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1566"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1567"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * func_volatile 
 *      Given procedure id, return the function's provolatile flag. 
 */ 
</span><span class='Keyword'>char 
</span><a name="LN1583"></a><span class='Declare_Function'>func_volatile</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1585"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1586"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1585"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1583"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1585"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1583"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1586"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1585"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>provolatile<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1585"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1586"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * func_parallel 
 *      Given procedure id, return the function's proparallel flag. 
 */ 
</span><span class='Keyword'>char 
</span><a name="LN1602"></a><span class='Declare_Function'>func_parallel</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1604"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1605"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1604"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1602"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1604"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1602"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1605"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1604"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>proparallel<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1604"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1605"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_func_leakproof 
 *     Given procedure id, return the function's leakproof field. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN1621"></a><span class='Declare_Function'>get_func_leakproof</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1623"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1624"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1623"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1621"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1623"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1621"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1624"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1623"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>proleakproof<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1623"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1624"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_func_cost 
 *      Given procedure id, return the function's procost field. 
 */ 
</span><a href="../../../include/c.h.html#LN379"><span class='Ref_to_Typedef'>float4</span></a> 
<a name="LN1640"></a><span class='Declare_Function'>get_func_cost</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1642"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1643"></a>    <a href="../../../include/c.h.html#LN379"><span class='Ref_to_Typedef'>float4</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1642"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1640"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1642"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1640"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1643"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1642"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>procost<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1642"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1643"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_func_rows 
 *      Given procedure id, return the function's prorows field. 
 */ 
</span><a href="../../../include/c.h.html#LN379"><span class='Ref_to_Typedef'>float4</span></a> 
<a name="LN1659"></a><span class='Declare_Function'>get_func_rows</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1661"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1662"></a>    <a href="../../../include/c.h.html#LN379"><span class='Ref_to_Typedef'>float4</span></a>      <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1661"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN76"><span class='Ref_to_EnumConst'>PROCOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1659"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1661"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for function %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1659"><span class='Ref_to_Parameter'>funcid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1662"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_proc.h.html#LN82"><span class='Ref_to_Typedef'>Form_pg_proc</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1661"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>prorows<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1661"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1662"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*              ---------- RELATION CACHE ----------                     */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_relname_relid 
 *      Given name and namespace of a relation, look up the OID. 
 * 
 * Returns InvalidOid if there is no such relation. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1682"></a><span class='Declare_Function'>get_relname_relid</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>relname</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relnamespace</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/utils/syscache.h.html#LN184"><span class='Ref_to_Macro'>GetSysCacheOid2</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN82"><span class='Ref_to_EnumConst'>RELNAMENSP</span></a><span class='Delimiter'>, 
</span>                           <a href="../../../include/postgres.h.html#LN561"><span class='Ref_to_Macro'>PointerGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1682"><span class='Ref_to_Parameter'>relname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                           <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1682"><span class='Ref_to_Parameter'>relnamespace</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Directive'>#ifdef</span> NOT_USED 
<span class='Comment_Multi_Line'>/* 
 * get_relnatts 
 * 
 *      Returns the number of attributes for a given relation. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN1696"></a><span class='Declare_Function'>get_relnatts</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1698"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1698"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1696"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1698"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1703"></a>        <a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a> <span class='Declare_Local'>reltup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1698"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1704"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1704"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1703"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>relnatts<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1698"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1704"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Delimiter'>; 
} 
</span><span class='Directive'>#endif</span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_rel_name 
 *      Returns the name of a given relation. 
 * 
 * Returns a palloc'd copy of the string, or NULL if no such relation. 
 * 
 * NOTE: since relation name is not unique, be wary of code that uses this 
 * for anything except preparing error messages. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1725"></a><span class='Declare_Function'>get_rel_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1727"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1727"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1725"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1727"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1732"></a>        <a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a> <span class='Declare_Local'>reltup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1727"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1733"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1733"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1732"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>relname<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1727"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1733"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_rel_namespace 
 * 
 *      Returns the pg_namespace OID associated with a given relation. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1749"></a><span class='Declare_Function'>get_rel_namespace</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1751"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1751"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1749"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1751"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1756"></a>        <a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a> <span class='Declare_Local'>reltup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1751"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1757"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1757"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1756"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>relnamespace<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1751"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1757"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_rel_type_id 
 * 
 *      Returns the pg_type OID associated with a given relation. 
 * 
 * Note: not all pg_class entries have associated pg_type OIDs; so be 
 * careful to check for InvalidOid result. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1776"></a><span class='Declare_Function'>get_rel_type_id</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1778"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1778"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1776"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1778"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1783"></a>        <a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a> <span class='Declare_Local'>reltup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1778"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1784"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1784"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1783"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>reltype<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1778"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1784"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_rel_relkind 
 * 
 *      Returns the relkind associated with a given relation. 
 */ 
</span><span class='Keyword'>char 
</span><a name="LN1800"></a><span class='Declare_Function'>get_rel_relkind</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1802"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1802"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1800"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1802"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1807"></a>        <a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a> <span class='Declare_Local'>reltup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1802"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1808"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1808"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1807"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>relkind<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1802"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1808"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='String'>'\0'</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_rel_tablespace 
 * 
 *      Returns the pg_tablespace OID associated with a given relation. 
 * 
 * Note: InvalidOid might mean either that we couldn't find the relation, 
 * or that it is in the database's default tablespace. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1827"></a><span class='Declare_Function'>get_rel_tablespace</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1829"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1829"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1827"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1829"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1834"></a>        <a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a> <span class='Declare_Local'>reltup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1829"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1835"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1835"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1834"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>reltablespace<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1829"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1835"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_rel_persistence 
 * 
 *      Returns the relpersistence associated with a given relation. 
 */ 
</span><span class='Keyword'>char 
</span><a name="LN1851"></a><span class='Declare_Function'>get_rel_persistence</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1853"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN1854"></a>    <a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a> <span class='Declare_Local'>reltup</span><span class='Delimiter'>; 
</span><a name="LN1855"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1853"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN83"><span class='Ref_to_EnumConst'>RELOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1851"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1853"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for relation %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1851"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN1854"><span class='Ref_To_Local'>reltup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1853"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN1855"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1854"><span class='Ref_To_Local'>reltup</span></a><span class='Operator'>-&GT;</span>relpersistence<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1853"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="lsyscache.c.html#LN1855"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*              ---------- TRANSFORM CACHE ----------                        */ 
</span> 
<a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1871"></a><span class='Declare_Function'>get_transform_fromsql</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>langid</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>trftypes</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1873"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tup</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/pg_list.h.html#LN231"><span class='Ref_to_Proto'>list_member_oid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1871"><span class='Ref_to_Parameter'>trftypes</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1871"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1873"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN157"><span class='Ref_to_Macro'>SearchSysCache2</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN96"><span class='Ref_to_EnumConst'>TRFTYPELANG</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1871"><span class='Ref_to_Parameter'>typid</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1871"><span class='Ref_to_Parameter'>langid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1873"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1881"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>funcid</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1881"><span class='Ref_To_Local'>funcid</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_transform.h.html#LN34"><span class='Ref_to_Typedef'>Form_pg_transform</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1873"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>trffromsql<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1873"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1881"><span class='Ref_To_Local'>funcid</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_transform_fromsql &raquo; </span> 
 
<a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN1892"></a><span class='Declare_Function'>get_transform_tosql</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>langid</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>trftypes</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1894"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tup</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/nodes/pg_list.h.html#LN231"><span class='Ref_to_Proto'>list_member_oid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1892"><span class='Ref_to_Parameter'>trftypes</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1892"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1894"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN157"><span class='Ref_to_Macro'>SearchSysCache2</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN96"><span class='Ref_to_EnumConst'>TRFTYPELANG</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1892"><span class='Ref_to_Parameter'>typid</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN1892"><span class='Ref_to_Parameter'>langid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1894"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1902"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>funcid</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1902"><span class='Ref_To_Local'>funcid</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_transform.h.html#LN34"><span class='Ref_to_Typedef'>Form_pg_transform</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1894"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>trftosql<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1894"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1902"><span class='Ref_To_Local'>funcid</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_transform_tosql &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/*              ---------- TYPE CACHE ----------                         */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_typisdefined 
 * 
 *      Given the type OID, determine whether the type is defined 
 *      (if not, it's only a shell). 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN1922"></a><span class='Declare_Function'>get_typisdefined</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1924"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1924"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1922"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1924"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1929"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1924"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1930"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1930"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1929"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typisdefined<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1924"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1930"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_typlen 
 * 
 *      Given the type OID, return the length of the type. 
 */ 
</span><a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> 
<a name="LN1946"></a><span class='Declare_Function'>get_typlen</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1948"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1948"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1946"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1948"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1953"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1948"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1954"></a>        <a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1954"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1953"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typlen<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1948"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1954"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_typbyval 
 * 
 *      Given the type OID, determine whether the type is returned by value or 
 *      not.  Returns true if by value, false if by reference. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN1971"></a><span class='Declare_Function'>get_typbyval</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1973"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN1973"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1971"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1973"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1978"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1973"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1979"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN1979"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN1978"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typbyval<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN1973"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN1979"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_typlenbyval 
 * 
 *      A two-fer: given the type OID, return both typlen and typbyval. 
 * 
 *      Since both pieces of info are needed to know how to copy a Datum, 
 *      many places need both.  Might as well get them with one cache lookup 
 *      instead of two.  Also, this routine raises an error instead of 
 *      returning a bogus value when given a bad type OID. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2000"></a><span class='Declare_Function'>get_typlenbyval</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typlen</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>typbyval</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2002"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN2003"></a>    <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2002"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2000"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2002"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for type %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2000"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN2003"><span class='Ref_To_Local'>typtup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2002"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2000"><span class='Ref_to_Parameter'>typlen</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2003"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typlen<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2000"><span class='Ref_to_Parameter'>typbyval</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2003"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typbyval<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2002"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_typlenbyvalalign 
 * 
 *      A three-fer: given the type OID, return typlen, typbyval, typalign. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2020"></a><span class='Declare_Function'>get_typlenbyvalalign</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typlen</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>typbyval</span><span class='Delimiter'>, 
</span><a name="LN2021"></a>                     <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>typalign</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2023"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN2024"></a>    <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2023"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2020"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2023"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for type %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2020"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN2024"><span class='Ref_To_Local'>typtup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2023"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2020"><span class='Ref_to_Parameter'>typlen</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2024"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typlen<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2020"><span class='Ref_to_Parameter'>typbyval</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2024"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typbyval<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2021"><span class='Ref_to_Parameter'>typalign</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2024"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typalign<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2023"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * getTypeIOParam 
 *      Given a pg_type row, select the type OID to pass to I/O functions 
 * 
 * Formerly, all I/O functions were passed pg_type.typelem as their second 
 * parameter, but we now have a more complex rule about what to pass. 
 * This knowledge is intended to be centralized here --- direct references 
 * to typelem elsewhere in the code are wrong, if they are associated with 
 * I/O calls and not with actual subscripting operations!  (But see 
 * bootstrap.c's boot_get_type_io_data() if you need to change this.) 
 * 
 * As of PostgreSQL 8.1, output functions receive only the value itself 
 * and not any auxiliary parameters, so the name of this routine is now 
 * a bit of a misnomer ... it should be getTypeInputParam. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN2052"></a><span class='Declare_Function'>getTypeIOParam</span><span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>typeTuple</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2054"></a>    <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typeStruct</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2052"><span class='Ref_to_Parameter'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Array types get their typelem as parameter; everybody else gets their 
     * own type OID as parameter. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2054"><span class='Ref_To_Local'>typeStruct</span></a><span class='Operator'>-&GT;</span>typelem<span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2054"><span class='Ref_To_Local'>typeStruct</span></a><span class='Operator'>-&GT;</span>typelem<span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/access/htup_details.h.html#LN694"><span class='Ref_to_Macro'>HeapTupleGetOid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2052"><span class='Ref_to_Parameter'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_type_io_data 
 * 
 *      A six-fer:  given the type OID, return typlen, typbyval, typalign, 
 *                  typdelim, typioparam, and IO function OID. The IO function 
 *                  returned is controlled by IOFuncSelector 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2074"></a><span class='Declare_Function'>get_type_io_data</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Delimiter'>, 
</span><a name="LN2075"></a>                 <a href="../../../include/utils/lsyscache.h.html#LN29"><span class='Ref_to_Enum'>IOFuncSelector</span></a> <span class='Declare_Parameter'>which_func</span><span class='Delimiter'>, 
</span><a name="LN2076"></a>                 <a href="../../../include/c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typlen</span><span class='Delimiter'>, 
</span><a name="LN2077"></a>                 <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>typbyval</span><span class='Delimiter'>, 
</span><a name="LN2078"></a>                 <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>typalign</span><span class='Delimiter'>, 
</span><a name="LN2079"></a>                 <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>typdelim</span><span class='Delimiter'>, 
</span><a name="LN2080"></a>                 <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typioparam</span><span class='Delimiter'>, 
</span><a name="LN2081"></a>                 <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>func</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2083"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>typeTuple</span><span class='Delimiter'>; 
</span><a name="LN2084"></a>    <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typeStruct</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * In bootstrap mode, pass it off to bootstrap.c.  This hack allows us to 
     * use array_in and array_out during bootstrap. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/miscadmin.h.html#LN369"><span class='Ref_to_Macro'>IsBootstrapProcessingMode</span></a><span class='Parentheses'>())</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2092"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typinput</span><span class='Delimiter'>; 
</span><a name="LN2093"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typoutput</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/bootstrap/bootstrap.h.html#LN51"><span class='Ref_to_Proto'>boot_get_type_io_data</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2074"><span class='Ref_to_Parameter'>typid</span></a><span class='Delimiter'>, 
</span>                              <a href="lsyscache.c.html#LN2076"><span class='Ref_to_Parameter'>typlen</span></a><span class='Delimiter'>, 
</span>                              <a href="lsyscache.c.html#LN2077"><span class='Ref_to_Parameter'>typbyval</span></a><span class='Delimiter'>, 
</span>                              <a href="lsyscache.c.html#LN2078"><span class='Ref_to_Parameter'>typalign</span></a><span class='Delimiter'>, 
</span>                              <a href="lsyscache.c.html#LN2079"><span class='Ref_to_Parameter'>typdelim</span></a><span class='Delimiter'>, 
</span>                              <a href="lsyscache.c.html#LN2080"><span class='Ref_to_Parameter'>typioparam</span></a><span class='Delimiter'>, 
</span>                              <span class='Operator'>&</span><a href="lsyscache.c.html#LN2092"><span class='Ref_To_Local'>typinput</span></a><span class='Delimiter'>, 
</span>                              <span class='Operator'>&</span><a href="lsyscache.c.html#LN2093"><span class='Ref_To_Local'>typoutput</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2075"><span class='Ref_to_Parameter'>which_func</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../../include/utils/lsyscache.h.html#LN31"><span class='Ref_to_EnumConst'>IOFunc_input</span></a><span class='Operator'>: 
</span>                <span class='Operator'>*</span><a href="lsyscache.c.html#LN2081"><span class='Ref_to_Parameter'>func</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2092"><span class='Ref_To_Local'>typinput</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="../../../include/utils/lsyscache.h.html#LN32"><span class='Ref_to_EnumConst'>IOFunc_output</span></a><span class='Operator'>: 
</span>                <span class='Operator'>*</span><a href="lsyscache.c.html#LN2081"><span class='Ref_to_Parameter'>func</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2093"><span class='Ref_To_Local'>typoutput</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"binary I/O not supported during bootstrap"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IsBootstrapProcessing... &raquo; </span> 
 
    <a href="lsyscache.c.html#LN2083"><span class='Ref_To_Local'>typeTuple</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2074"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2083"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for type %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2074"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN2084"><span class='Ref_To_Local'>typeStruct</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2083"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2076"><span class='Ref_to_Parameter'>typlen</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2084"><span class='Ref_To_Local'>typeStruct</span></a><span class='Operator'>-&GT;</span>typlen<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2077"><span class='Ref_to_Parameter'>typbyval</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2084"><span class='Ref_To_Local'>typeStruct</span></a><span class='Operator'>-&GT;</span>typbyval<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2078"><span class='Ref_to_Parameter'>typalign</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2084"><span class='Ref_To_Local'>typeStruct</span></a><span class='Operator'>-&GT;</span>typalign<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2079"><span class='Ref_to_Parameter'>typdelim</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2084"><span class='Ref_To_Local'>typeStruct</span></a><span class='Operator'>-&GT;</span>typdelim<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2080"><span class='Ref_to_Parameter'>typioparam</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN138"><span class='Ref_to_Proto'>getTypeIOParam</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2083"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2075"><span class='Ref_to_Parameter'>which_func</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../../include/utils/lsyscache.h.html#LN31"><span class='Ref_to_EnumConst'>IOFunc_input</span></a><span class='Operator'>: 
</span>            <span class='Operator'>*</span><a href="lsyscache.c.html#LN2081"><span class='Ref_to_Parameter'>func</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2084"><span class='Ref_To_Local'>typeStruct</span></a><span class='Operator'>-&GT;</span>typinput<span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/utils/lsyscache.h.html#LN32"><span class='Ref_to_EnumConst'>IOFunc_output</span></a><span class='Operator'>: 
</span>            <span class='Operator'>*</span><a href="lsyscache.c.html#LN2081"><span class='Ref_to_Parameter'>func</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2084"><span class='Ref_To_Local'>typeStruct</span></a><span class='Operator'>-&GT;</span>typoutput<span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/utils/lsyscache.h.html#LN33"><span class='Ref_to_EnumConst'>IOFunc_receive</span></a><span class='Operator'>: 
</span>            <span class='Operator'>*</span><a href="lsyscache.c.html#LN2081"><span class='Ref_to_Parameter'>func</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2084"><span class='Ref_To_Local'>typeStruct</span></a><span class='Operator'>-&GT;</span>typreceive<span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../../include/utils/lsyscache.h.html#LN34"><span class='Ref_to_EnumConst'>IOFunc_send</span></a><span class='Operator'>: 
</span>            <span class='Operator'>*</span><a href="lsyscache.c.html#LN2081"><span class='Ref_to_Parameter'>func</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2084"><span class='Ref_To_Local'>typeStruct</span></a><span class='Operator'>-&GT;</span>typsend<span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2083"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_type_io_data &raquo; </span> 
 
<span class='Directive'>#ifdef</span> NOT_USED 
<span class='Keyword'>char 
</span><a name="LN2148"></a><span class='Declare_Function'>get_typalign</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2150"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2150"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2148"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2150"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2155"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2150"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2156"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN2156"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2155"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typalign<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2150"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2156"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='String'>'i'</span><span class='Delimiter'>; 
} 
</span><span class='Directive'>#endif</span> 
 
<span class='Keyword'>char 
</span><a name="LN2168"></a><span class='Declare_Function'>get_typstorage</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2170"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2170"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2168"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2170"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2175"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2170"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2176"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN2176"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2175"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typstorage<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2170"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2176"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='String'>'p'</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_typdefault 
 *    Given a type OID, return the type's default value, if any. 
 * 
 *    The result is a palloc'd expression node tree, or NULL if there 
 *    is no defined default for the datatype. 
 * 
 * NB: caller should be prepared to coerce result to correct datatype; 
 * the returned expression tree might produce something of the wrong type. 
 */ 
</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>* 
</span><a name="LN2197"></a><span class='Declare_Function'>get_typdefault</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2199"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>typeTuple</span><span class='Delimiter'>; 
</span><a name="LN2200"></a>    <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>type</span><span class='Delimiter'>; 
</span><a name="LN2201"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>datum</span><span class='Delimiter'>; 
</span><a name="LN2202"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isNull</span><span class='Delimiter'>; 
</span><a name="LN2203"></a>    <a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2199"><span class='Ref_To_Local'>typeTuple</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2197"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2199"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for type %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2197"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN2200"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2199"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * typdefault and typdefaultbin are potentially null, so don't try to 
     * access 'em as struct fields. Must do it the hard way with 
     * SysCacheGetAttr. 
     */ 
</span>    <a href="lsyscache.c.html#LN2201"><span class='Ref_To_Local'>datum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, 
</span>                            <a href="lsyscache.c.html#LN2199"><span class='Ref_To_Local'>typeTuple</span></a><span class='Delimiter'>, 
</span>                            <a href="../../../include/catalog/pg_type.h.html#LN266"><span class='Ref_to_Const'>Anum_pg_type_typdefaultbin</span></a><span class='Delimiter'>, 
</span>                            <span class='Operator'>&</span><a href="lsyscache.c.html#LN2202"><span class='Ref_To_Local'>isNull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN2202"><span class='Ref_To_Local'>isNull</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* We have an expression default */ 
</span>        <a href="lsyscache.c.html#LN2203"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="../../nodes/read.c.html#LN36"><span class='Ref_to_Func'>stringToNode</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2201"><span class='Ref_To_Local'>datum</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Perhaps we have a plain literal default */ 
</span>        <a href="lsyscache.c.html#LN2201"><span class='Ref_To_Local'>datum</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, 
</span>                                <a href="lsyscache.c.html#LN2199"><span class='Ref_To_Local'>typeTuple</span></a><span class='Delimiter'>, 
</span>                                <a href="../../../include/catalog/pg_type.h.html#LN267"><span class='Ref_to_Const'>Anum_pg_type_typdefault</span></a><span class='Delimiter'>, 
</span>                                <span class='Operator'>&</span><a href="lsyscache.c.html#LN2202"><span class='Ref_To_Local'>isNull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN2202"><span class='Ref_To_Local'>isNull</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2235"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>strDefaultVal</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Convert text datum to C string */ 
</span>            <a href="lsyscache.c.html#LN2235"><span class='Ref_To_Local'>strDefaultVal</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN91"><span class='Ref_to_Macro'>TextDatumGetCString</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2201"><span class='Ref_To_Local'>datum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Convert C string to a value of the given type */ 
</span>            <a href="lsyscache.c.html#LN2201"><span class='Ref_To_Local'>datum</span></a> <span class='Operator'>= </span><a href="../../../include/fmgr.h.html#LN644"><span class='Ref_to_Proto'>OidInputFunctionCall</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2200"><span class='Ref_To_Local'>type</span></a><span class='Operator'>-&GT;</span>typinput<span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2235"><span class='Ref_To_Local'>strDefaultVal</span></a><span class='Delimiter'>, 
</span>                                         <a href="../../../include/utils/lsyscache.h.html#LN138"><span class='Ref_to_Proto'>getTypeIOParam</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2199"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>-</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Build a Const node containing the value */ 
</span>            <a href="lsyscache.c.html#LN2203"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/nodes/nodes.h.html#LN508"><span class='Ref_to_Struct'>Node</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/makefuncs.h.html#LN49"><span class='Ref_to_Proto'>makeConst</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2197"><span class='Ref_to_Parameter'>typid</span></a><span class='Delimiter'>, 
</span>                                      <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                      <a href="lsyscache.c.html#LN2200"><span class='Ref_To_Local'>type</span></a><span class='Operator'>-&GT;</span>typcollation<span class='Delimiter'>, 
</span>                                      <a href="lsyscache.c.html#LN2200"><span class='Ref_To_Local'>type</span></a><span class='Operator'>-&GT;</span>typlen<span class='Delimiter'>, 
</span>                                      <a href="lsyscache.c.html#LN2201"><span class='Ref_To_Local'>datum</span></a><span class='Delimiter'>, 
</span>                                      <span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                      <a href="lsyscache.c.html#LN2200"><span class='Ref_To_Local'>type</span></a><span class='Operator'>-&GT;</span>typbyval<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2235"><span class='Ref_To_Local'>strDefaultVal</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* No default */ 
</span>            <a href="lsyscache.c.html#LN2203"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2199"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="lsyscache.c.html#LN2203"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_typdefault &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getBaseType 
 *      If the given type is a domain, return its base type; 
 *      otherwise return the type's own OID. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN2270"></a><span class='Declare_Function'>getBaseType</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2272"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>typmod</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="../../../include/utils/lsyscache.h.html#LN169"><span class='Ref_to_Proto'>getBaseTypeAndTypmod</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2270"><span class='Ref_to_Parameter'>typid</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="lsyscache.c.html#LN2272"><span class='Ref_To_Local'>typmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * getBaseTypeAndTypmod 
 *      If the given type is a domain, return its base type and typmod; 
 *      otherwise return the type's own OID, and leave *typmod unchanged. 
 * 
 * Note that the "applied typmod" should be -1 for every domain level 
 * above the bottommost; therefore, if the passed-in typid is indeed 
 * a domain, *typmod should be -1. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN2287"></a><span class='Declare_Function'>getBaseTypeAndTypmod</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typmod</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * We loop to find the bottom base type in a stack of domains. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2294"></a>        <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tup</span><span class='Delimiter'>; 
</span><a name="LN2295"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typTup</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN2294"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2287"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2294"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>))</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for type %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2287"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="lsyscache.c.html#LN2295"><span class='Ref_To_Local'>typTup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2294"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2295"><span class='Ref_To_Local'>typTup</span></a><span class='Operator'>-&GT;</span>typtype <span class='Operator'>!= </span><a href="../../../include/catalog/pg_type.h.html#LN721"><span class='Ref_to_Const'>TYPTYPE_DOMAIN</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Not a domain, so done */ 
</span>            <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2294"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="lsyscache.c.html#LN2287"><span class='Ref_to_Parameter'>typmod</span></a> <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="lsyscache.c.html#LN2287"><span class='Ref_to_Parameter'>typid</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2295"><span class='Ref_To_Local'>typTup</span></a><span class='Operator'>-&GT;</span>typbasetype<span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="lsyscache.c.html#LN2287"><span class='Ref_to_Parameter'>typmod</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2295"><span class='Ref_To_Local'>typTup</span></a><span class='Operator'>-&GT;</span>typtypmod<span class='Delimiter'>; 
</span> 
        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2294"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;; &raquo; </span> 
 
    <span class='Control'>return</span> <a href="lsyscache.c.html#LN2287"><span class='Ref_to_Parameter'>typid</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getBaseTypeAndTypmod &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_typavgwidth 
 * 
 *    Given a type OID and a typmod value (pass -1 if typmod is unknown), 
 *    estimate the average width of values of the type.  This is used by 
 *    the planner, which doesn't require absolutely correct results; 
 *    it's OK (and expected) to guess if we don't know for sure. 
 */ 
</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> 
<a name="LN2327"></a><span class='Declare_Function'>get_typavgwidth</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Delimiter'>, </span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Parameter'>typmod</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2329"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>typlen</span> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN133"><span class='Ref_to_Proto'>get_typlen</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2327"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2330"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>maxwidth</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Easy if it's a fixed-width type 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2329"><span class='Ref_To_Local'>typlen</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2329"><span class='Ref_To_Local'>typlen</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * type_maximum_size knows the encoding of typmod for some datatypes; 
     * don't duplicate that knowledge here. 
     */ 
</span>    <a href="lsyscache.c.html#LN2330"><span class='Ref_To_Local'>maxwidth</span></a> <span class='Operator'>= </span><a href="../../../include/utils/builtins.h.html#LN118"><span class='Ref_to_Proto'>type_maximum_size</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2327"><span class='Ref_to_Parameter'>typid</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2327"><span class='Ref_to_Parameter'>typmod</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2330"><span class='Ref_To_Local'>maxwidth</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * For BPCHAR, the max width is also the only width.  Otherwise we 
         * need to guess about the typical data width given the max. A sliding 
         * scale for percentage of max width seems reasonable. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2327"><span class='Ref_to_Parameter'>typid</span></a> <span class='Operator'>== </span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN48"><span class='Ref_to_Const'>BPCHAROID</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="lsyscache.c.html#LN2330"><span class='Ref_To_Local'>maxwidth</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2330"><span class='Ref_To_Local'>maxwidth</span></a> <span class='Operator'>&LT;= </span><span class='Number'>32</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="lsyscache.c.html#LN2330"><span class='Ref_To_Local'>maxwidth</span></a><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* assume full width */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2330"><span class='Ref_To_Local'>maxwidth</span></a> <span class='Operator'>&LT; </span><span class='Number'>1000</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>32</span> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2330"><span class='Ref_To_Local'>maxwidth</span></a> <span class='Operator'>- </span><span class='Number'>32</span><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* assume 50% */ 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Beyond 1000, assume we're looking at something like 
         * "varchar(10000)" where the limit isn't actually reached often, and 
         * use a fixed estimate. 
         */ 
</span>        <span class='Control'>return</span> <span class='Number'>32</span> <span class='Operator'>+ </span><span class='Parentheses'>(</span><span class='Number'>1000</span> <span class='Operator'>- </span><span class='Number'>32</span><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if maxwidth&GT;0 &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Oops, we have no idea ... wild guess time. 
     */ 
</span>    <span class='Control'>return</span> <span class='Number'>32</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_typavgwidth &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_typtype 
 * 
 *      Given the type OID, find if it is a basic type, a complex type, etc. 
 *      It returns the null char if the cache lookup fails... 
 */ 
</span><span class='Keyword'>char 
</span><a name="LN2378"></a><span class='Declare_Function'>get_typtype</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2380"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2380"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2378"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2380"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2385"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2380"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2386"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN2386"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2385"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typtype<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2380"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2386"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='String'>'\0'</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * type_is_rowtype 
 * 
 *      Convenience function to determine whether a type OID represents 
 *      a "rowtype" type --- either RECORD or a named composite type. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN2403"></a><span class='Declare_Function'>type_is_rowtype</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2403"><span class='Ref_to_Parameter'>typid</span></a> <span class='Operator'>== </span><a href="../../../include/catalog/pg_type.h.html#LN679"><span class='Ref_to_Const'>RECORDOID</span></a> <span class='Operator'>|| </span><a href="../../../include/utils/lsyscache.h.html#LN149"><span class='Ref_to_Proto'>get_typtype</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2403"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/catalog/pg_type.h.html#LN720"><span class='Ref_to_Const'>TYPTYPE_COMPOSITE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * type_is_enum 
 *    Returns true if the given type is an enum type. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN2413"></a><span class='Declare_Function'>type_is_enum</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN149"><span class='Ref_to_Proto'>get_typtype</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2413"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/catalog/pg_type.h.html#LN722"><span class='Ref_to_Const'>TYPTYPE_ENUM</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * type_is_range 
 *    Returns true if the given type is a range type. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN2423"></a><span class='Declare_Function'>type_is_range</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN149"><span class='Ref_to_Proto'>get_typtype</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2423"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../../include/catalog/pg_type.h.html#LN724"><span class='Ref_to_Const'>TYPTYPE_RANGE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_type_category_preferred 
 * 
 *      Given the type OID, fetch its category and preferred-type status. 
 *      Throws error on failure. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2435"></a><span class='Declare_Function'>get_type_category_preferred</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>typcategory</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>typispreferred</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2437"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN2438"></a>    <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2437"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2435"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2437"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for type %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2435"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN2438"><span class='Ref_To_Local'>typtup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2437"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2435"><span class='Ref_to_Parameter'>typcategory</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2438"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typcategory<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2435"><span class='Ref_to_Parameter'>typispreferred</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2438"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typispreferred<span class='Delimiter'>; 
</span>    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2437"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_typ_typrelid 
 * 
 *      Given the type OID, get the typrelid (InvalidOid if not a complex 
 *      type). 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN2456"></a><span class='Declare_Function'>get_typ_typrelid</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2458"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2458"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2456"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2458"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2463"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2458"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2464"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN2464"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2463"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typrelid<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2458"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2464"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_element_type 
 * 
 *      Given the type OID, get the typelem (InvalidOid if not an array type). 
 * 
 * NB: this only considers varlena arrays to be true arrays; InvalidOid is 
 * returned if the input is a fixed-length array type. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN2483"></a><span class='Declare_Function'>get_element_type</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2485"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2485"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2483"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2485"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2490"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2485"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2491"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2490"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typlen <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <a href="lsyscache.c.html#LN2491"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2490"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typelem<span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="lsyscache.c.html#LN2491"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2485"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2491"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_element_type &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_array_type 
 * 
 *      Given the type OID, get the corresponding "true" array type. 
 *      Returns InvalidOid if no array type can be found. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN2511"></a><span class='Declare_Function'>get_array_type</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2513"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN2514"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2513"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2511"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2513"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="lsyscache.c.html#LN2514"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2513"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>typarray<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2513"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="lsyscache.c.html#LN2514"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_promoted_array_type 
 * 
 *      The "promoted" type is what you'd get from an ARRAY(SELECT ...) 
 *      construct, that is, either the corresponding "true" array type 
 *      if the input is a scalar type that has such an array type, 
 *      or the same type if the input is already a "true" array type. 
 *      Returns InvalidOid if neither rule is satisfied. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN2535"></a><span class='Declare_Function'>get_promoted_array_type</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2537"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>array_type</span> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN158"><span class='Ref_to_Proto'>get_array_type</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2535"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2537"><span class='Ref_To_Local'>array_type</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2537"><span class='Ref_To_Local'>array_type</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN157"><span class='Ref_to_Proto'>get_element_type</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2535"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>)))</span> 
        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2535"><span class='Ref_to_Parameter'>typid</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_base_element_type 
 *      Given the type OID, get the typelem, looking "through" any domain 
 *      to its underlying array type. 
 * 
 * This is equivalent to get_element_type(getBaseType(typid)), but avoids 
 * an extra cache lookup.  Note that it fails to provide any information 
 * about the typmod of the array. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN2556"></a><span class='Declare_Function'>get_base_element_type</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * We loop to find the bottom base type in a stack of domains. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2563"></a>        <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tup</span><span class='Delimiter'>; 
</span><a name="LN2564"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typTup</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN2563"><span class='Ref_To_Local'>tup</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2556"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2563"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="lsyscache.c.html#LN2564"><span class='Ref_To_Local'>typTup</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2563"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2564"><span class='Ref_To_Local'>typTup</span></a><span class='Operator'>-&GT;</span>typtype <span class='Operator'>!= </span><a href="../../../include/catalog/pg_type.h.html#LN721"><span class='Ref_to_Const'>TYPTYPE_DOMAIN</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Not a domain, so stop descending */ 
</span><a name="LN2573"></a>            <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* This test must match get_element_type */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2564"><span class='Ref_To_Local'>typTup</span></a><span class='Operator'>-&GT;</span>typlen <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                <a href="lsyscache.c.html#LN2573"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2564"><span class='Ref_To_Local'>typTup</span></a><span class='Operator'>-&GT;</span>typelem<span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="lsyscache.c.html#LN2573"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>            <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2563"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <a href="lsyscache.c.html#LN2573"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="lsyscache.c.html#LN2556"><span class='Ref_to_Parameter'>typid</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2564"><span class='Ref_To_Local'>typTup</span></a><span class='Operator'>-&GT;</span>typbasetype<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2563"><span class='Ref_To_Local'>tup</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;; &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Like get_element_type, silently return InvalidOid for bogus input */ 
</span>    <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_base_element_type &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTypeInputInfo 
 * 
 *      Get info needed for converting values of a type to internal form 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2598"></a><span class='Declare_Function'>getTypeInputInfo</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typInput</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typIOParam</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2600"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>typeTuple</span><span class='Delimiter'>; 
</span><a name="LN2601"></a>    <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>pt</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2600"><span class='Ref_To_Local'>typeTuple</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2598"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2600"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for type %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2598"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN2601"><span class='Ref_To_Local'>pt</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2600"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN2601"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typisdefined<span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_OBJECT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"type %s is only a shell"</span><span class='Delimiter'>, 
</span>                        <a href="../adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2598"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2601"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typinput<span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_FUNCTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"no input function available for type %s"</span><span class='Delimiter'>, 
</span>                        <a href="../adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2598"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2598"><span class='Ref_to_Parameter'>typInput</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2601"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typinput<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2598"><span class='Ref_to_Parameter'>typIOParam</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN138"><span class='Ref_to_Proto'>getTypeIOParam</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2600"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2600"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTypeInputInfo &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTypeOutputInfo 
 * 
 *      Get info needed for printing values of a type 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2631"></a><span class='Declare_Function'>getTypeOutputInfo</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typOutput</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>typIsVarlena</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2633"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>typeTuple</span><span class='Delimiter'>; 
</span><a name="LN2634"></a>    <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>pt</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2633"><span class='Ref_To_Local'>typeTuple</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2631"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2633"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for type %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2631"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN2634"><span class='Ref_To_Local'>pt</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2633"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN2634"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typisdefined<span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_OBJECT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"type %s is only a shell"</span><span class='Delimiter'>, 
</span>                        <a href="../adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2631"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2634"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typoutput<span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_FUNCTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"no output function available for type %s"</span><span class='Delimiter'>, 
</span>                        <a href="../adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2631"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2631"><span class='Ref_to_Parameter'>typOutput</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2634"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typoutput<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2631"><span class='Ref_to_Parameter'>typIsVarlena</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN2634"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typbyval<span class='Parentheses'>) </span><span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2634"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typlen <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2633"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTypeOutputInfo &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTypeBinaryInputInfo 
 * 
 *      Get info needed for binary input of values of a type 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2664"></a><span class='Declare_Function'>getTypeBinaryInputInfo</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typReceive</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typIOParam</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2666"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>typeTuple</span><span class='Delimiter'>; 
</span><a name="LN2667"></a>    <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>pt</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2666"><span class='Ref_To_Local'>typeTuple</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2664"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2666"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for type %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2664"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN2667"><span class='Ref_To_Local'>pt</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2666"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN2667"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typisdefined<span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_OBJECT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"type %s is only a shell"</span><span class='Delimiter'>, 
</span>                        <a href="../adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2664"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2667"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typreceive<span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_FUNCTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"no binary input function available for type %s"</span><span class='Delimiter'>, 
</span>                        <a href="../adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2664"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2664"><span class='Ref_to_Parameter'>typReceive</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2667"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typreceive<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2664"><span class='Ref_to_Parameter'>typIOParam</span></a> <span class='Operator'>= </span><a href="../../../include/utils/lsyscache.h.html#LN138"><span class='Ref_to_Proto'>getTypeIOParam</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2666"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2666"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTypeBinaryInputInfo &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTypeBinaryOutputInfo 
 * 
 *      Get info needed for binary output of values of a type 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN2697"></a><span class='Declare_Function'>getTypeBinaryOutputInfo</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>typSend</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>typIsVarlena</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2699"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>typeTuple</span><span class='Delimiter'>; 
</span><a name="LN2700"></a>    <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>pt</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2699"><span class='Ref_To_Local'>typeTuple</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2697"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2699"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>))</span> 
        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for type %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2697"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="lsyscache.c.html#LN2700"><span class='Ref_To_Local'>pt</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2699"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN2700"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typisdefined<span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_OBJECT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"type %s is only a shell"</span><span class='Delimiter'>, 
</span>                        <a href="../adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2697"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2700"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typsend<span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_FUNCTION<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"no binary output function available for type %s"</span><span class='Delimiter'>, 
</span>                        <a href="../adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2697"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>))))</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2697"><span class='Ref_to_Parameter'>typSend</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2700"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typsend<span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="lsyscache.c.html#LN2697"><span class='Ref_to_Parameter'>typIsVarlena</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN2700"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typbyval<span class='Parentheses'>) </span><span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2700"><span class='Ref_To_Local'>pt</span></a><span class='Operator'>-&GT;</span>typlen <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2699"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTypeBinaryOutputInfo &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_typmodin 
 * 
 *      Given the type OID, return the type's typmodin procedure, if any. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN2730"></a><span class='Declare_Function'>get_typmodin</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2732"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2732"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2730"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2732"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2737"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2732"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2738"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN2738"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2737"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typmodin<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2732"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2738"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Directive'>#ifdef</span> NOT_USED 
<span class='Comment_Multi_Line'>/* 
 * get_typmodout 
 * 
 *      Given the type OID, return the type's typmodout procedure, if any. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN2755"></a><span class='Declare_Function'>get_typmodout</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2757"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2757"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2755"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2757"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2762"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2757"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2763"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN2763"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2762"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typmodout<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2757"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2763"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span><span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* NOT_USED */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_typcollation 
 * 
 *      Given the type OID, return the type's typcollation attribute. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN2780"></a><span class='Declare_Function'>get_typcollation</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2782"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN2782"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2780"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2782"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2787"></a>        <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2782"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2788"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN2788"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2787"><span class='Ref_To_Local'>typtup</span></a><span class='Operator'>-&GT;</span>typcollation<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2782"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN2788"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * type_is_collatable 
 * 
 *      Return whether the type cares about collations 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN2805"></a><span class='Declare_Function'>type_is_collatable</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>typid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN166"><span class='Ref_to_Proto'>get_typcollation</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2805"><span class='Ref_to_Parameter'>typid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/*              ---------- STATISTICS CACHE ----------                   */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_attavgwidth 
 * 
 *    Given the table and attribute number of a column, get the average 
 *    width of entries in the column.  Return zero if no data available. 
 * 
 * Currently this is only consulted for individual tables, not for inheritance 
 * trees, so we don't need an "inh" parameter. 
 * 
 * Calling a hook at this point looks somewhat strange, but is required 
 * because the optimizer calls this function without any other way for 
 * plug-ins to control the result. 
 */ 
</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> 
<a name="LN2827"></a><span class='Declare_Function'>get_attavgwidth</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>relid</span><span class='Delimiter'>, </span><a href="../../../include/access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a> <span class='Declare_Parameter'>attnum</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2829"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span><a name="LN2830"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>stawidth</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN49"><span class='Ref_to_Global_Var'>get_attavgwidth_hook</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="lsyscache.c.html#LN2830"><span class='Ref_To_Local'>stawidth</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="lsyscache.c.html#LN49"><span class='Ref_to_Global_Var'>get_attavgwidth_hook</span></a><span class='Parentheses'>) (</span><a href="lsyscache.c.html#LN2827"><span class='Ref_to_Parameter'>relid</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2827"><span class='Ref_to_Parameter'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2830"><span class='Ref_To_Local'>stawidth</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="lsyscache.c.html#LN2830"><span class='Ref_To_Local'>stawidth</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="lsyscache.c.html#LN2829"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN159"><span class='Ref_to_Macro'>SearchSysCache3</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN90"><span class='Ref_to_EnumConst'>STATRELATTINH</span></a><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2827"><span class='Ref_to_Parameter'>relid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN456"><span class='Ref_to_Macro'>Int16GetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2827"><span class='Ref_to_Parameter'>attnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../include/postgres.h.html#LN407"><span class='Ref_to_Macro'>BoolGetDatum</span></a><span class='Parentheses'>(</span><span class='Boolean'>false</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2829"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="lsyscache.c.html#LN2830"><span class='Ref_To_Local'>stawidth</span></a> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="../../../include/catalog/pg_statistic.h.html#LN128"><span class='Ref_to_Typedef'>Form_pg_statistic</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2829"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span><span class='Operator'>-&GT;</span>stawidth<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2829"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2830"><span class='Ref_To_Local'>stawidth</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="lsyscache.c.html#LN2830"><span class='Ref_To_Local'>stawidth</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_attavgwidth &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * get_attstatsslot 
 * 
 *      Extract the contents of a "slot" of a pg_statistic tuple. 
 *      Returns TRUE if requested slot type was found, else FALSE. 
 * 
 * Unlike other routines in this file, this takes a pointer to an 
 * already-looked-up tuple in the pg_statistic cache.  We do this since 
 * most callers will want to extract more than one value from the cache 
 * entry, and we don't want to repeat the cache lookup unnecessarily. 
 * Also, this API allows this routine to be used with statistics tuples 
 * that have been provided by a stats hook and didn't really come from 
 * pg_statistic. 
 * 
 * sslot: pointer to output area (typically, a local variable in the caller). 
 * statstuple: pg_statistic tuple to be examined. 
 * reqkind: STAKIND code for desired statistics slot kind. 
 * reqop: STAOP value wanted, or InvalidOid if don't care. 
 * flags: bitmask of ATTSTATSSLOT_VALUES and/or ATTSTATSSLOT_NUMBERS. 
 * 
 * If a matching slot is found, TRUE is returned, and *sslot is filled thus: 
 * staop: receives the actual STAOP value. 
 * valuetype: receives actual datatype of the elements of stavalues. 
 * values: receives pointer to an array of the slot's stavalues. 
 * nvalues: receives number of stavalues. 
 * numbers: receives pointer to an array of the slot's stanumbers (as float4). 
 * nnumbers: receives number of stanumbers. 
 * 
 * valuetype/values/nvalues are InvalidOid/NULL/0 if ATTSTATSSLOT_VALUES 
 * wasn't specified.  Likewise, numbers/nnumbers are NULL/0 if 
 * ATTSTATSSLOT_NUMBERS wasn't specified. 
 * 
 * If no matching slot is found, FALSE is returned, and *sslot is zeroed. 
 * 
 * The data referred to by the fields of sslot is locally palloc'd and 
 * is independent of the original pg_statistic tuple.  When the caller 
 * is done with it, call free_attstatsslot to release the palloc'd data. 
 * 
 * If it's desirable to call free_attstatsslot when get_attstatsslot might 
 * not have been called, memset'ing sslot to zeroes will allow that. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN2894"></a><span class='Declare_Function'>get_attstatsslot</span><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN42"><span class='Ref_to_Struct'>AttStatsSlot</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>sslot</span><span class='Delimiter'>, </span><a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a> <span class='Declare_Parameter'>statstuple</span><span class='Delimiter'>, 
</span><a name="LN2895"></a>                 <span class='Keyword'>int </span><span class='Declare_Parameter'>reqkind</span><span class='Delimiter'>, </span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>reqop</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2897"></a>    <a href="../../../include/catalog/pg_statistic.h.html#LN128"><span class='Ref_to_Typedef'>Form_pg_statistic</span></a> <span class='Declare_Local'>stats</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_statistic.h.html#LN128"><span class='Ref_to_Typedef'>Form_pg_statistic</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>statstuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2898"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN2899"></a>    <a href="../../../include/postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>       <span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span><a name="LN2900"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>isnull</span><span class='Delimiter'>; 
</span><a name="LN2901"></a>    <a href="../../../include/utils/array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>statarray</span><span class='Delimiter'>; 
</span><a name="LN2902"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>arrayelemtype</span><span class='Delimiter'>; 
</span><a name="LN2903"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>narrayelem</span><span class='Delimiter'>; 
</span><a name="LN2904"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>typeTuple</span><span class='Delimiter'>; 
</span><a name="LN2905"></a>    <a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a> <span class='Declare_Local'>typeForm</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* initialize *sslot properly */ 
</span>    memset<span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>sslot</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN42"><span class='Ref_to_Struct'>AttStatsSlot</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2898"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN2898"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="../../../include/catalog/pg_statistic.h.html#LN120"><span class='Ref_to_Const'>STATISTIC_NUM_SLOTS</span></a><span class='Delimiter'>; </span><a href="lsyscache.c.html#LN2898"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>&</span><a href="lsyscache.c.html#LN2897"><span class='Ref_To_Local'>stats</span></a><span class='Operator'>-&GT;</span>stakind1<span class='Parentheses'>)</span><span class='Delimiter'>[</span><a href="lsyscache.c.html#LN2898"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="lsyscache.c.html#LN2895"><span class='Ref_to_Parameter'>reqkind</span></a> <span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2895"><span class='Ref_to_Parameter'>reqop</span></a> <span class='Operator'>== </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a> <span class='Operator'>|| </span><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="lsyscache.c.html#LN2897"><span class='Ref_To_Local'>stats</span></a><span class='Operator'>-&GT;</span>staop1<span class='Parentheses'>)</span><span class='Delimiter'>[</span><a href="lsyscache.c.html#LN2898"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="lsyscache.c.html#LN2895"><span class='Ref_to_Parameter'>reqop</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2898"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/catalog/pg_statistic.h.html#LN120"><span class='Ref_to_Const'>STATISTIC_NUM_SLOTS</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* not there */ 
</span> 
    <a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN45"><span class='Ref_to_Member'>staop</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="lsyscache.c.html#LN2897"><span class='Ref_To_Local'>stats</span></a><span class='Operator'>-&GT;</span>staop1<span class='Parentheses'>)</span><span class='Delimiter'>[</span><a href="lsyscache.c.html#LN2898"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2895"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/lsyscache.h.html#LN38"><span class='Ref_to_Const'>ATTSTATSSLOT_VALUES</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="lsyscache.c.html#LN2899"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN90"><span class='Ref_to_EnumConst'>STATRELATTINH</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>statstuple</span></a><span class='Delimiter'>, 
</span>                              <a href="../../../include/catalog/pg_statistic.h.html#LN156"><span class='Ref_to_Const'>Anum_pg_statistic_stavalues1</span></a> <span class='Operator'>+ </span><a href="lsyscache.c.html#LN2898"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, 
</span>                              <span class='Operator'>&</span><a href="lsyscache.c.html#LN2900"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2900"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"stavalues is null"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Detoast the array if needed, and in any case make a copy that's 
         * under control of this AttStatsSlot. 
         */ 
</span>        <a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a> <span class='Operator'>= </span><a href="../../../include/utils/array.h.html#LN242"><span class='Ref_to_Macro'>DatumGetArrayTypePCopy</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2899"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Extract the actual array element type, and pass it back in case the 
         * caller needs it. 
         */ 
</span>        <a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN47"><span class='Ref_to_Member'>valuetype</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2902"><span class='Ref_To_Local'>arrayelemtype</span></a> <span class='Operator'>= </span><a href="../../../include/utils/array.h.html#LN272"><span class='Ref_to_Macro'>ARR_ELEMTYPE</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Need info about element type */ 
</span>        <a href="lsyscache.c.html#LN2904"><span class='Ref_To_Local'>typeTuple</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN107"><span class='Ref_to_EnumConst'>TYPEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2902"><span class='Ref_To_Local'>arrayelemtype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2904"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>))</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"cache lookup failed for type %u"</span><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2902"><span class='Ref_To_Local'>arrayelemtype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="lsyscache.c.html#LN2905"><span class='Ref_To_Local'>typeForm</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_type.h.html#LN232"><span class='Ref_to_Typedef'>Form_pg_type</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2904"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Deconstruct array into Datum elements; NULLs not expected */ 
</span>        <a href="../../../include/utils/array.h.html#LN382"><span class='Ref_to_Proto'>deconstruct_array</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a><span class='Delimiter'>, 
</span>                          <a href="lsyscache.c.html#LN2902"><span class='Ref_To_Local'>arrayelemtype</span></a><span class='Delimiter'>, 
</span>                          <a href="lsyscache.c.html#LN2905"><span class='Ref_To_Local'>typeForm</span></a><span class='Operator'>-&GT;</span>typlen<span class='Delimiter'>, 
</span>                          <a href="lsyscache.c.html#LN2905"><span class='Ref_To_Local'>typeForm</span></a><span class='Operator'>-&GT;</span>typbyval<span class='Delimiter'>, 
</span>                          <a href="lsyscache.c.html#LN2905"><span class='Ref_To_Local'>typeForm</span></a><span class='Operator'>-&GT;</span>typalign<span class='Delimiter'>, 
</span>                          <span class='Operator'>&</span><a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN48"><span class='Ref_to_Member'>values</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN49"><span class='Ref_to_Member'>nvalues</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If the element type is pass-by-reference, we now have a bunch of 
         * Datums that are pointers into the statarray, so we need to keep 
         * that until free_attstatsslot.  Otherwise, all the useful info is in 
         * sslot-&GT;values[], so we can free the array object immediately. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="lsyscache.c.html#LN2905"><span class='Ref_To_Local'>typeForm</span></a><span class='Operator'>-&GT;</span>typbyval<span class='Parentheses'>) 
</span>            <a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN55"><span class='Ref_to_Member'>values_arr</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2904"><span class='Ref_To_Local'>typeTuple</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if flags&ATTSTATSSLOT_VA... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2895"><span class='Ref_to_Parameter'>flags</span></a> <span class='Operator'>& </span><a href="../../../include/utils/lsyscache.h.html#LN39"><span class='Ref_to_Const'>ATTSTATSSLOT_NUMBERS</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="lsyscache.c.html#LN2899"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN133"><span class='Ref_to_Proto'>SysCacheGetAttr</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN90"><span class='Ref_to_EnumConst'>STATRELATTINH</span></a><span class='Delimiter'>, </span><a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>statstuple</span></a><span class='Delimiter'>, 
</span>                              <a href="../../../include/catalog/pg_statistic.h.html#LN151"><span class='Ref_to_Const'>Anum_pg_statistic_stanumbers1</span></a> <span class='Operator'>+ </span><a href="lsyscache.c.html#LN2898"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, 
</span>                              <span class='Operator'>&</span><a href="lsyscache.c.html#LN2900"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2900"><span class='Ref_To_Local'>isnull</span></a><span class='Parentheses'>) 
</span>            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"stanumbers is null"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Detoast the array if needed, and in any case make a copy that's 
         * under control of this AttStatsSlot. 
         */ 
</span>        <a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a> <span class='Operator'>= </span><a href="../../../include/utils/array.h.html#LN242"><span class='Ref_to_Macro'>DatumGetArrayTypePCopy</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2899"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We expect the array to be a 1-D float4 array; verify that. We don't 
         * need to use deconstruct_array() since the array data is just going 
         * to look like a C array of float4 values. 
         */ 
</span>        <a href="lsyscache.c.html#LN2903"><span class='Ref_To_Local'>narrayelem</span></a> <span class='Operator'>= </span><a href="../../../include/utils/array.h.html#LN274"><span class='Ref_to_Macro'>ARR_DIMS</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/array.h.html#LN270"><span class='Ref_to_Macro'>ARR_NDIM</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span> <span class='Operator'>|| </span><a href="lsyscache.c.html#LN2903"><span class='Ref_To_Local'>narrayelem</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>            <a href="../../../include/utils/array.h.html#LN271"><span class='Ref_to_Macro'>ARR_HASNULL</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>            <a href="../../../include/utils/array.h.html#LN272"><span class='Ref_to_Macro'>ARR_ELEMTYPE</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN38"><span class='Ref_to_Const'>FLOAT4OID</span></a><span class='Parentheses'>)</span> 
            <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"stanumbers is not a 1-D float4 array"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Give caller a pointer directly into the statarray */ 
</span>        <a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN51"><span class='Ref_to_Member'>numbers</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN379"><span class='Ref_to_Typedef'>float4</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/utils/array.h.html#LN302"><span class='Ref_to_Macro'>ARR_DATA_PTR</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN52"><span class='Ref_to_Member'>nnumbers</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2903"><span class='Ref_To_Local'>narrayelem</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* We'll free the statarray in free_attstatsslot */ 
</span>        <a href="lsyscache.c.html#LN2894"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN56"><span class='Ref_to_Member'>numbers_arr</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN2901"><span class='Ref_To_Local'>statarray</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if flags&ATTSTATSSLOT_NU... &raquo; </span> 
 
    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_attstatsslot &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * free_attstatsslot 
 *      Free data allocated by get_attstatsslot 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN3010"></a><span class='Declare_Function'>free_attstatsslot</span><span class='Parentheses'>(</span><a href="../../../include/utils/lsyscache.h.html#LN42"><span class='Ref_to_Struct'>AttStatsSlot</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>sslot</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* The values[] array was separately palloc'd by deconstruct_array */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3010"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN48"><span class='Ref_to_Member'>values</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3010"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN48"><span class='Ref_to_Member'>values</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* The numbers[] array points into numbers_arr, do not pfree it */ 
</span>    <span class='Comment_Multi_Line'>/* Free the detoasted array objects, if any */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3010"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN55"><span class='Ref_to_Member'>values_arr</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3010"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN55"><span class='Ref_to_Member'>values_arr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3010"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN56"><span class='Ref_to_Member'>numbers_arr</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3010"><span class='Ref_to_Parameter'>sslot</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/lsyscache.h.html#LN56"><span class='Ref_to_Member'>numbers_arr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*              ---------- PG_NAMESPACE CACHE ----------                 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_namespace_name 
 *      Returns the name of a given namespace 
 * 
 * Returns a palloc'd copy of the string, or NULL if no such namespace. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN3032"></a><span class='Declare_Function'>get_namespace_name</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>nspid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3034"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN3034"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN69"><span class='Ref_to_EnumConst'>NAMESPACEOID</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3032"><span class='Ref_to_Parameter'>nspid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3034"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN3039"></a>        <a href="../../../include/catalog/pg_namespace.h.html#LN50"><span class='Ref_to_Typedef'>Form_pg_namespace</span></a> <span class='Declare_Local'>nsptup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_namespace.h.html#LN50"><span class='Ref_to_Typedef'>Form_pg_namespace</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3034"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3040"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN3040"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3039"><span class='Ref_To_Local'>nsptup</span></a><span class='Operator'>-&GT;</span>nspname<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3034"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN3040"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_namespace_name_or_temp 
 *      As above, but if it is this backend's temporary namespace, return 
 *      "pg_temp" instead. 
 */ 
</span><span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN3056"></a><span class='Declare_Function'>get_namespace_name_or_temp</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>nspid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/catalog/namespace.h.html#LN123"><span class='Ref_to_Proto'>isTempNamespace</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3056"><span class='Ref_to_Parameter'>nspid</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <span class='String'>"pg_temp"</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/utils/lsyscache.h.html#LN175"><span class='Ref_to_Proto'>get_namespace_name</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3056"><span class='Ref_to_Parameter'>nspid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/*              ---------- PG_RANGE CACHE ----------                 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * get_range_subtype 
 *      Returns the subtype of a given range type 
 * 
 * Returns InvalidOid if the type is not a range type. 
 */ 
</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN3073"></a><span class='Declare_Function'>get_range_subtype</span><span class='Parentheses'>(</span><a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>rangeOid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3075"></a>    <a href="../../../include/access/htup.h.html#LN69"><span class='Ref_to_Typedef'>HeapTuple</span></a>   <span class='Declare_Local'>tp</span><span class='Delimiter'>; 
</span> 
    <a href="lsyscache.c.html#LN3075"><span class='Ref_To_Local'>tp</span></a> <span class='Operator'>= </span><a href="../../../include/utils/syscache.h.html#LN155"><span class='Ref_to_Macro'>SearchSysCache1</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/syscache.h.html#LN81"><span class='Ref_to_EnumConst'>RANGETYPE</span></a><span class='Delimiter'>, </span><a href="../../../include/postgres.h.html#LN512"><span class='Ref_to_Macro'>ObjectIdGetDatum</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3073"><span class='Ref_to_Parameter'>rangeOid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/access/htup.h.html#LN76"><span class='Ref_to_Macro'>HeapTupleIsValid</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3075"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN3080"></a>        <a href="../../../include/catalog/pg_range.h.html#LN48"><span class='Ref_to_Typedef'>Form_pg_range</span></a> <span class='Declare_Local'>rngtup</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../../include/catalog/pg_range.h.html#LN48"><span class='Ref_to_Typedef'>Form_pg_range</span></a><span class='Parentheses'>) </span><a href="../../../include/access/htup_details.h.html#LN655"><span class='Ref_to_Macro'>GETSTRUCT</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3075"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3081"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="lsyscache.c.html#LN3081"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="lsyscache.c.html#LN3080"><span class='Ref_To_Local'>rngtup</span></a><span class='Operator'>-&GT;</span>rngsubtype<span class='Delimiter'>; 
</span>        <a href="../../../include/utils/syscache.h.html#LN119"><span class='Ref_to_Proto'>ReleaseSysCache</span></a><span class='Parentheses'>(</span><a href="lsyscache.c.html#LN3075"><span class='Ref_To_Local'>tp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="lsyscache.c.html#LN3081"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Control'>return</span> <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
} 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>