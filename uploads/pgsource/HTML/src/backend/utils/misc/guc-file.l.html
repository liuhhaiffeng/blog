<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\backend\utils\misc\guc-file.l</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\backend\utils\misc\guc-file.l</b></p></td>
<td align='right'>
Wed Jun 14 08:25:58 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/* -*-pgsql-c-*- */ 
/* 
 * Scanner for the configuration file 
 * 
 * Copyright (c) 2000-2017, PostgreSQL Global Development Group 
 * 
 * src/backend/utils/misc/guc-file.l 
 */ 
</span> 
<span class='Operator'>%</span><span class='Delimiter'>{ 
</span> 
<span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;ctype.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;unistd.h&GT;</span> 
 
<span class='Keyword'>#include </span><span class='String'>"mb/pg_wchar.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"miscadmin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/fd.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/guc.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * flex emits a yy_fatal_error() function that it calls in response to 
 * critical errors like malloc failure, file I/O errors, and detection of 
 * internal inconsistency.  That function prints a message and calls exit(). 
 * Mutate it to instead call our handler, which jumps out of the parser. 
 */ 
</span><span class='Keyword'>#undef </span><a href="../../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a> 
<a name="LN29"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>fprintf</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>file</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>fmt</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>msg</span><span class='Parentheses'>) </span><a href="guc-file.l.html#LN56"><span class='Ref_to_Proto'>GUC_flex_fatal</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN29"><span class='Ref_to_Parameter'>msg</span></a><span class='Parentheses'>) 
</span> 
<span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN33"></a>    <span class='Declare_Enum_Const'>GUC_ID</span> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>, 
</span><a name="LN34"></a>    <span class='Declare_Enum_Const'>GUC_STRING</span> <span class='Operator'>= </span><span class='Number'>2</span><span class='Delimiter'>, 
</span><a name="LN35"></a>    <span class='Declare_Enum_Const'>GUC_INTEGER</span> <span class='Operator'>= </span><span class='Number'>3</span><span class='Delimiter'>, 
</span><a name="LN36"></a>    <span class='Declare_Enum_Const'>GUC_REAL</span> <span class='Operator'>= </span><span class='Number'>4</span><span class='Delimiter'>, 
</span><a name="LN37"></a>    <span class='Declare_Enum_Const'>GUC_EQUALS</span> <span class='Operator'>= </span><span class='Number'>5</span><span class='Delimiter'>, 
</span><a name="LN38"></a>    <span class='Declare_Enum_Const'>GUC_UNQUOTED_STRING</span> <span class='Operator'>= </span><span class='Number'>6</span><span class='Delimiter'>, 
</span><a name="LN39"></a>    <span class='Declare_Enum_Const'>GUC_QUALIFIED_ID</span> <span class='Operator'>= </span><span class='Number'>7</span><span class='Delimiter'>, 
</span><a name="LN40"></a>    <span class='Declare_Enum_Const'>GUC_EOL</span> <span class='Operator'>= </span><span class='Number'>99</span><span class='Delimiter'>, 
</span><a name="LN41"></a>    <span class='Declare_Enum_Const'>GUC_ERROR</span> <span class='Operator'>= </span><span class='Number'>100</span> 
<span class='Delimiter'>}; 
</span> 
<a name="LN44"></a><span class='Keyword'>static unsigned int </span><span class='Declare_Var'>ConfigFileLineno</span><span class='Delimiter'>; 
</span><a name="LN45"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>GUC_flex_fatal_errmsg</span><span class='Delimiter'>; 
</span><a name="LN46"></a><span class='Keyword'>static </span><a href="../../../include/c.h.html#LN1087"><span class='Ref_to_Const'>sigjmp_buf</span></a> <span class='Operator'>*</span><span class='Declare_Var'>GUC_flex_fatal_jmp</span><span class='Delimiter'>; 
</span> 
<a name="LN48"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>FreeConfigVariable</span><span class='Parentheses'>(</span><a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>item</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN50"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>record_config_file_error</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>errmsg</span><span class='Delimiter'>, 
</span><a name="LN51"></a>                         <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>config_file</span><span class='Delimiter'>, 
</span><a name="LN52"></a>                         <span class='Keyword'>int </span><span class='Declare_Parameter'>lineno</span><span class='Delimiter'>, 
</span><a name="LN53"></a>                         <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>head_p</span><span class='Delimiter'>, 
</span><a name="LN54"></a>                         <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>tail_p</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN56"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>GUC_flex_fatal</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>msg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN57"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>GUC_scanstr</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Operator'>%</span><span class='Delimiter'>} 
</span> 
<span class='Operator'>%</span><a href="../../../include/getopt_long.h.html#LN15"><span class='Ref_to_Struct'>option</span></a> <span class='Number'>8bit</span> 
<span class='Operator'>%</span><a href="../../../include/getopt_long.h.html#LN15"><span class='Ref_to_Struct'>option</span></a> never<span class='Operator'>-</span>interactive 
<span class='Operator'>%</span><a href="../../../include/getopt_long.h.html#LN15"><span class='Ref_to_Struct'>option</span></a> nodefault 
<span class='Operator'>%</span><a href="../../../include/getopt_long.h.html#LN15"><span class='Ref_to_Struct'>option</span></a> noinput 
<span class='Operator'>%</span><a href="../../../include/getopt_long.h.html#LN15"><span class='Ref_to_Struct'>option</span></a> nounput 
<span class='Operator'>%</span><a href="../../../include/getopt_long.h.html#LN15"><span class='Ref_to_Struct'>option</span></a> noyywrap 
<span class='Operator'>%</span><a href="../../../include/getopt_long.h.html#LN15"><span class='Ref_to_Struct'>option</span></a> <a href="../../../interfaces/ecpg/test/expected/preproc-whenever.c.html#LN38"><span class='Ref_to_Func'>warn</span></a> 
<span class='Operator'>%</span><a href="../../../include/getopt_long.h.html#LN15"><span class='Ref_to_Struct'>option</span></a> prefix<span class='Operator'>=</span><span class='String'>"GUC_yy"</span> 
 
 
<a name="LN71"></a><span class='Declare_Function'>SIGN            </span><span class='Parentheses'>(</span><span class='String'>"-"</span><span class='Operator'>|</span><span class='String'>"+"</span><span class='Parentheses'>) 
</span><a href="../../regex/regcomp.c.html#LN276"><span class='Ref_to_Const'>DIGIT</span></a>           <span class='Delimiter'>[</span><span class='Number'>0</span><span class='Operator'>-</span><span class='Number'>9</span><span class='Delimiter'>] 
</span>HEXDIGIT        <span class='Delimiter'>[</span><span class='Number'>0</span><span class='Operator'>-</span><span class='Number'>9a</span><span class='Operator'>-</span>fA<span class='Operator'>-</span><a href="../../../../contrib/pgcrypto/md5.c.html#LN41"><span class='Ref_to_Macro'>F</span></a><span class='Delimiter'>] 
</span> 
UNIT_LETTER     <span class='Delimiter'>[</span>a<span class='Operator'>-</span>zA<span class='Operator'>-</span>Z<span class='Delimiter'>] 
</span> 
INTEGER         <span class='Delimiter'>{</span><a href="guc-file.l.html#LN71"><span class='Ref_to_Func'>SIGN</span></a><span class='Delimiter'>}</span><span class='Operator'>?</span><span class='Parentheses'>(</span><span class='Delimiter'>{</span><a href="../../regex/regcomp.c.html#LN276"><span class='Ref_to_Const'>DIGIT</span></a><span class='Delimiter'>}</span><span class='Operator'>+|</span><span class='Number'>0x</span><span class='Delimiter'>{</span>HEXDIGIT<span class='Delimiter'>}</span><span class='Operator'>+</span><span class='Parentheses'>)</span><span class='Delimiter'>{</span>UNIT_LETTER<span class='Delimiter'>}</span><span class='Operator'>* 
</span> 
EXPONENT        <span class='Delimiter'>[</span>Ee<span class='Delimiter'>]{</span><a href="guc-file.l.html#LN71"><span class='Ref_to_Func'>SIGN</span></a><span class='Delimiter'>}</span><span class='Operator'>?</span><span class='Delimiter'>{</span><a href="../../regex/regcomp.c.html#LN276"><span class='Ref_to_Const'>DIGIT</span></a><span class='Delimiter'>}</span><span class='Operator'>+ 
</span>REAL            <span class='Delimiter'>{</span><a href="guc-file.l.html#LN71"><span class='Ref_to_Func'>SIGN</span></a><span class='Delimiter'>}</span><span class='Operator'>?</span><span class='Delimiter'>{</span><a href="../../regex/regcomp.c.html#LN276"><span class='Ref_to_Const'>DIGIT</span></a><span class='Delimiter'>}</span><span class='Operator'>*</span><span class='String'>"."</span><span class='Delimiter'>{</span><a href="../../regex/regcomp.c.html#LN276"><span class='Ref_to_Const'>DIGIT</span></a><span class='Delimiter'>}</span><span class='Operator'>*</span><span class='Delimiter'>{</span>EXPONENT<span class='Delimiter'>}</span><span class='Operator'>? 
</span> 
LETTER          <span class='Delimiter'>[</span>A<span class='Operator'>-</span>Za<span class='Operator'>-</span>z_<span class='Operator'>\</span><span class='Number'>200</span><span class='Operator'>-\</span><span class='Number'>377</span><span class='Delimiter'>] 
</span>LETTER_OR_DIGIT <span class='Delimiter'>[</span>A<span class='Operator'>-</span>Za<span class='Operator'>-</span>z_0<span class='Operator'>-</span><span class='Number'>9</span><span class='Operator'>\</span><span class='Number'>200</span><span class='Operator'>-\</span><span class='Number'>377</span><span class='Delimiter'>] 
</span> 
<a name="LN85"></a><span class='Declare_Var'>ID</span>              <span class='Delimiter'>{</span>LETTER<span class='Delimiter'>}{</span>LETTER_OR_DIGIT<span class='Delimiter'>}</span><span class='Operator'>* 
</span>QUALIFIED_ID    <span class='Delimiter'>{</span><a href="guc-file.l.html#LN85"><span class='Ref_to_Global_Var'>ID</span></a><span class='Delimiter'>}</span><span class='String'>"."</span><span class='Delimiter'>{</span><a href="guc-file.l.html#LN85"><span class='Ref_to_Global_Var'>ID</span></a><span class='Delimiter'>} 
</span> 
UNQUOTED_STRING <span class='Delimiter'>{</span>LETTER<span class='Delimiter'>}</span><span class='Parentheses'>(</span><span class='Delimiter'>{</span>LETTER_OR_DIGIT<span class='Delimiter'>}</span><span class='Operator'>|</span><span class='Delimiter'>[</span><span class='Operator'>-.</span>_<span class='Operator'>:/</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Operator'>* 
</span>STRING          <span class='Operator'>\</span><span class='String'>'([^'</span><span class='Operator'>\\\</span>n<span class='Delimiter'>]</span><span class='Operator'>|\\.|\</span><span class='String'>'\')*\' 
 
%% 
 
\n              ConfigFileLineno++; return GUC_EOL; 
[ \t\r]+        /* eat whitespace */ 
#.*             /* eat comment (.* matches anything until newline) */ 
 
{ID}            return GUC_ID; 
{QUALIFIED_ID}  return GUC_QUALIFIED_ID; 
{STRING}        return GUC_STRING; 
{UNQUOTED_STRING} return GUC_UNQUOTED_STRING; 
{INTEGER}       return GUC_INTEGER; 
{REAL}          return GUC_REAL; 
=               return GUC_EQUALS; 
 
.               return GUC_ERROR; 
 
%% 
 
 
 
/* 
 * Exported function to read and process the configuration file. The 
 * parameter indicates in what context the file is being read --- either 
 * postmaster startup (including standalone-backend startup) or SIGHUP. 
 * All options mentioned in the configuration file are set to new values. 
 * If a hard error occurs, no values will be changed.  (There can also be 
 * errors that prevent just one value from being changed.) 
 */ 
void 
</span><a name="LN120"></a><span class='String'>ProcessConfigFile(GucContext context) 
{ 
</span><a name="LN122"></a><span class='String'>    int         elevel; 
</span><a name="LN123"></a><span class='String'>    MemoryContext config_cxt; 
</span><a name="LN124"></a><span class='String'>    MemoryContext caller_cxt; 
 
    /* 
     * Config files are processed on startup (by the postmaster only) and on 
     * SIGHUP (by the postmaster and its children) 
     */ 
    Assert((context == PGC_POSTMASTER && !IsUnderPostmaster) || 
           context == PGC_SIGHUP); 
 
    /* 
     * To avoid cluttering the log, only the postmaster bleats loudly about 
     * problems with the config file. 
     */ 
    elevel = IsUnderPostmaster ? DEBUG2 : LOG; 
 
    /* 
     * This function is usually called within a process-lifespan memory 
     * context.  To ensure that any memory leaked during GUC processing does 
     * not accumulate across repeated SIGHUP cycles, do the work in a private 
     * context that we can free at exit. 
     */ 
    config_cxt = AllocSetContextCreate(CurrentMemoryContext, 
                                       "config file processing", 
                                       ALLOCSET_DEFAULT_SIZES); 
    caller_cxt = MemoryContextSwitchTo(config_cxt); 
 
    /* 
     * Read and apply the config file.  We don'</span>t need to examine the <a href="../../../bin/pgbench/exprparse.y.html#LN62"><span class='Ref_to_Label'>result</span></a><span class='Operator'>. 
</span>     <span class='Operator'>*/ 
</span>    <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="guc-file.l.html#LN167"><span class='Ref_to_Func'>ProcessConfigFileInternal</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN120"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><a href="guc-file.l.html#LN122"><span class='Ref_To_Local'>elevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Clean up */ 
</span>    <a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN124"><span class='Ref_To_Local'>caller_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/memutils.h.html#LN74"><span class='Ref_to_Proto'>MemoryContextDelete</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN123"><span class='Ref_To_Local'>config_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ProcessConfigFile &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * This function handles both actual config file (re)loads and execution of 
 * show_all_file_settings() (i.e., the pg_file_settings view).  In the latter 
 * case we don't apply any of the settings, but we make all the usual validity 
 * checks, and we return the ConfigVariable list so that it can be printed out 
 * by show_all_file_settings(). 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>* 
</span><a name="LN168"></a><span class='Declare_Function'>ProcessConfigFileInternal</span><span class='Parentheses'>(</span><a href="../../../include/utils/guc.h.html#LN67"><span class='Ref_to_Typedef'>GucContext</span></a> <span class='Declare_Parameter'>context</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>applySettings</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>elevel</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN170"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>error</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN171"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>applying</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN172"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>ConfFileWithError</span><span class='Delimiter'>; 
</span><a name="LN173"></a>    <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>*</span><span class='Declare_Local'>item</span><span class='Delimiter'>, 
</span><a name="LN174"></a>               <span class='Operator'>*</span><span class='Declare_Local'>head</span><span class='Delimiter'>, 
</span><a name="LN175"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tail</span><span class='Delimiter'>; 
</span><a name="LN176"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Parse the main config file into a list of option names and values */ 
</span>    <a href="guc-file.l.html#LN172"><span class='Ref_To_Local'>ConfFileWithError</span></a> <span class='Operator'>= </span><a href="guc.c.html#LN461"><span class='Ref_to_Global_Var'>ConfigFileName</span></a><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN174"><span class='Ref_To_Local'>head</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN175"><span class='Ref_To_Local'>tail</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/guc.h.html#LN144"><span class='Ref_to_Proto'>ParseConfigFile</span></a><span class='Parentheses'>(</span><a href="guc.c.html#LN461"><span class='Ref_to_Global_Var'>ConfigFileName</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="guc-file.l.html#LN174"><span class='Ref_To_Local'>head</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="guc-file.l.html#LN175"><span class='Ref_To_Local'>tail</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Syntax error(s) detected in the file, so bail out */ 
</span>        <a href="guc-file.l.html#LN170"><span class='Ref_To_Local'>error</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN486"><span class='Ref_to_Label'>bail_out</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Parse the PG_AUTOCONF_FILENAME file, if present, after the main file to 
     * replace any parameters set by ALTER SYSTEM command.  Because this file 
     * is in the data directory, we can't read it until the DataDir has been 
     * set. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../init/globals.c.html#LN59"><span class='Ref_to_Global_Var'>DataDir</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/guc.h.html#LN144"><span class='Ref_to_Proto'>ParseConfigFile</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/guc.h.html#LN33"><span class='Ref_to_Const'>PG_AUTOCONF_FILENAME</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                             <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                             <span class='Operator'>&</span><a href="guc-file.l.html#LN174"><span class='Ref_To_Local'>head</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="guc-file.l.html#LN175"><span class='Ref_To_Local'>tail</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Syntax error(s) detected in the file, so bail out */ 
</span>            <a href="guc-file.l.html#LN170"><span class='Ref_To_Local'>error</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN172"><span class='Ref_To_Local'>ConfFileWithError</span></a> <span class='Operator'>= </span><a href="../../../include/utils/guc.h.html#LN33"><span class='Ref_to_Const'>PG_AUTOCONF_FILENAME</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN486"><span class='Ref_to_Label'>bail_out</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * If DataDir is not set, the PG_AUTOCONF_FILENAME file cannot be 
         * read.  In this case, we don't want to accept any settings but 
         * data_directory from postgresql.conf, because they might be 
         * overwritten with settings in the PG_AUTOCONF_FILENAME file which 
         * will be read later. OTOH, since data_directory isn't allowed in the 
         * PG_AUTOCONF_FILENAME file, it will never be overwritten later. 
         */ 
</span><a name="LN219"></a>        <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>*</span><span class='Declare_Local'>newlist</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Prune all items except the last "data_directory" from the list. 
         */ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN174"><span class='Ref_To_Local'>head</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN141"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN139"><span class='Ref_to_Member'>ignore</span></a> <span class='Operator'>&& 
</span>                strcmp<span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='String'>"data_directory"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="guc-file.l.html#LN219"><span class='Ref_To_Local'>newlist</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN219"><span class='Ref_To_Local'>newlist</span></a><span class='Parentheses'>) 
</span>            <a href="guc-file.l.html#LN219"><span class='Ref_To_Local'>newlist</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN141"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="guc-file.l.html#LN174"><span class='Ref_To_Local'>head</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN175"><span class='Ref_To_Local'>tail</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN219"><span class='Ref_To_Local'>newlist</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Quick exit if data_directory is not present in file. 
         * 
         * We need not do any further processing, in particular we don't set 
         * PgReloadTime; that will be set soon by subsequent full loading of 
         * the config file. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN174"><span class='Ref_To_Local'>head</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN486"><span class='Ref_to_Label'>bail_out</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Mark all extant GUC variables as not present in the config file. We 
     * need this so that we can tell below which ones have been removed from 
     * the file since we last processed it. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN176"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="guc-file.l.html#LN176"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="guc.c.html#LN3937"><span class='Ref_to_Global_Var'>num_guc_variables</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN176"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN253"></a>        <span class='Control'>struct</span> <a href="../../../include/utils/guc_tables.h.html#LN142"><span class='Ref_to_Struct'>config_generic</span></a> <span class='Operator'>*</span><span class='Declare_Local'>gconf</span> <span class='Operator'>= </span><a href="guc.c.html#LN3934"><span class='Ref_to_Global_Var'>guc_variables</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN176"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <a href="guc-file.l.html#LN253"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN153"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>&= ~</span><a href="../../../include/utils/guc_tables.h.html#LN166"><span class='Ref_to_Const'>GUC_IS_IN_FILE</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Check if all the supplied option names are valid, as an additional 
     * quasi-syntactic check on the validity of the config file.  It is 
     * important that the postmaster and all backends agree on the results of 
     * this phase, else we will have strange inconsistencies about which 
     * processes accept a config file update and which don't.  Hence, unknown 
     * custom variable names have to be accepted without complaint.  For the 
     * same reason, we don't attempt to validate the options' values here. 
     * 
     * In addition, the GUC_IS_IN_FILE flag is set on each existing GUC 
     * variable mentioned in the file; and we detect duplicate entries in the 
     * file and mark the earlier occurrences as ignorable. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN174"><span class='Ref_To_Local'>head</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN141"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN273"></a>        <span class='Control'>struct</span> <a href="../../../include/utils/guc_tables.h.html#LN142"><span class='Ref_to_Struct'>config_generic</span></a> <span class='Operator'>*</span><span class='Declare_Local'>record</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore anything already marked as ignorable */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN139"><span class='Ref_to_Member'>ignore</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Try to find the variable; but do not create a custom placeholder if 
         * it's not there already. 
         */ 
</span>        <a href="guc-file.l.html#LN273"><span class='Ref_To_Local'>record</span></a> <span class='Operator'>= </span><a href="guc.c.html#LN4370"><span class='Ref_to_Func'>find_option</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>elevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN273"><span class='Ref_To_Local'>record</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* If it's already marked, then this is a duplicate entry */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN273"><span class='Ref_To_Local'>record</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN153"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>& </span><a href="../../../include/utils/guc_tables.h.html#LN166"><span class='Ref_to_Const'>GUC_IS_IN_FILE</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * Mark the earlier occurrence(s) as dead/ignorable.  We could 
                 * avoid the O(N^2) behavior here with some additional state, 
                 * but it seems unlikely to be worth the trouble. 
                 */ 
</span><a name="LN295"></a>                <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pitem</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN295"><span class='Ref_To_Local'>pitem</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN174"><span class='Ref_To_Local'>head</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN295"><span class='Ref_To_Local'>pitem</span></a> <span class='Operator'>!= </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN295"><span class='Ref_To_Local'>pitem</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN295"><span class='Ref_To_Local'>pitem</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN141"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="guc-file.l.html#LN295"><span class='Ref_To_Local'>pitem</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN139"><span class='Ref_to_Member'>ignore</span></a> <span class='Operator'>&& 
</span>                        strcmp<span class='Parentheses'>(</span><a href="guc-file.l.html#LN295"><span class='Ref_To_Local'>pitem</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                        <a href="guc-file.l.html#LN295"><span class='Ref_To_Local'>pitem</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN139"><span class='Ref_to_Member'>ignore</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Comment_Multi_Line'>/* Now mark it as present in file */ 
</span>            <a href="guc-file.l.html#LN273"><span class='Ref_To_Local'>record</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN153"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>|= </span><a href="../../../include/utils/guc_tables.h.html#LN166"><span class='Ref_to_Const'>GUC_IS_IN_FILE</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if record &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strchr<span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/guc.h.html#LN198"><span class='Ref_to_Const'>GUC_QUALIFIER_SEPARATOR</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Invalid non-custom variable, so complain */ 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_OBJECT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"unrecognized configuration parameter \"%s\" in file \"%s\" line %u"</span><span class='Delimiter'>, 
</span>                            <a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                            <a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN137"><span class='Ref_to_Member'>filename</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN138"><span class='Ref_to_Member'>sourceline</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN136"><span class='Ref_to_Member'>errmsg</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><span class='String'>"unrecognized configuration parameter"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN170"><span class='Ref_To_Local'>error</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN172"><span class='Ref_To_Local'>ConfFileWithError</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN137"><span class='Ref_to_Member'>filename</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for item=head;item;item=i... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * If we've detected any errors so far, we don't want to risk applying any 
     * changes. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN170"><span class='Ref_To_Local'>error</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN486"><span class='Ref_to_Label'>bail_out</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Otherwise, set flag that we're beginning to apply changes */ 
</span>    <a href="guc-file.l.html#LN171"><span class='Ref_To_Local'>applying</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Check for variables having been removed from the config file, and 
     * revert their reset values (and perhaps also effective values) to the 
     * boot-time defaults.  If such a variable can't be changed after startup, 
     * report that and continue. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN176"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="guc-file.l.html#LN176"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="guc.c.html#LN3937"><span class='Ref_to_Global_Var'>num_guc_variables</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN176"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN339"></a>        <span class='Control'>struct</span> <a href="../../../include/utils/guc_tables.h.html#LN142"><span class='Ref_to_Struct'>config_generic</span></a> <span class='Operator'>*</span><span class='Declare_Local'>gconf</span> <span class='Operator'>= </span><a href="guc.c.html#LN3934"><span class='Ref_to_Global_Var'>guc_variables</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN176"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN340"></a>        <a href="../../../include/utils/guc_tables.h.html#LN117"><span class='Ref_to_Typedef'>GucStack</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>stack</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN155"><span class='Ref_to_Member'>reset_source</span></a> <span class='Operator'>!= </span><a href="../../../include/utils/guc.h.html#LN109"><span class='Ref_to_EnumConst'>PGC_S_FILE</span></a> <span class='Operator'>|| 
</span>            <span class='Parentheses'>(</span><a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN153"><span class='Ref_to_Member'>status</span></a> <span class='Operator'>& </span><a href="../../../include/utils/guc_tables.h.html#LN166"><span class='Ref_to_Const'>GUC_IS_IN_FILE</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN146"><span class='Ref_to_Member'>context</span></a> <span class='Operator'>&LT; </span><a href="../../../include/utils/guc.h.html#LN71"><span class='Ref_to_EnumConst'>PGC_SIGHUP</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CANT_CHANGE_RUNTIME_PARAM<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"parameter \"%s\" cannot be changed without restarting the server"</span><span class='Delimiter'>, 
</span>                            <a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN145"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN50"><span class='Ref_to_Proto'>record_config_file_error</span></a><span class='Parentheses'>(</span><a href="../../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"parameter \"%s\" cannot be changed without restarting the server"</span><span class='Delimiter'>, 
</span>                                              <a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN145"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                     <span class='Operator'>&</span><a href="guc-file.l.html#LN174"><span class='Ref_To_Local'>head</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="guc-file.l.html#LN175"><span class='Ref_To_Local'>tail</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN170"><span class='Ref_To_Local'>error</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* No more to do if we're just doing show_all_file_settings() */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>applySettings</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Reset any "file" sources to "default", else set_config_option will 
         * not override those settings. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN155"><span class='Ref_to_Member'>reset_source</span></a> <span class='Operator'>== </span><a href="../../../include/utils/guc.h.html#LN109"><span class='Ref_to_EnumConst'>PGC_S_FILE</span></a><span class='Parentheses'>) 
</span>            <a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN155"><span class='Ref_to_Member'>reset_source</span></a> <span class='Operator'>= </span><a href="../../../include/utils/guc.h.html#LN106"><span class='Ref_to_EnumConst'>PGC_S_DEFAULT</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN154"><span class='Ref_to_Member'>source</span></a> <span class='Operator'>== </span><a href="../../../include/utils/guc.h.html#LN109"><span class='Ref_to_EnumConst'>PGC_S_FILE</span></a><span class='Parentheses'>) 
</span>            <a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN154"><span class='Ref_to_Member'>source</span></a> <span class='Operator'>= </span><a href="../../../include/utils/guc.h.html#LN106"><span class='Ref_to_EnumConst'>PGC_S_DEFAULT</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN340"><span class='Ref_To_Local'>stack</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN158"><span class='Ref_to_Member'>stack</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN340"><span class='Ref_To_Local'>stack</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN340"><span class='Ref_To_Local'>stack</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN340"><span class='Ref_To_Local'>stack</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN119"><span class='Ref_to_Member'>prev</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN340"><span class='Ref_To_Local'>stack</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN122"><span class='Ref_to_Member'>source</span></a> <span class='Operator'>== </span><a href="../../../include/utils/guc.h.html#LN109"><span class='Ref_to_EnumConst'>PGC_S_FILE</span></a><span class='Parentheses'>) 
</span>                <a href="guc-file.l.html#LN340"><span class='Ref_To_Local'>stack</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN122"><span class='Ref_to_Member'>source</span></a> <span class='Operator'>= </span><a href="../../../include/utils/guc.h.html#LN106"><span class='Ref_to_EnumConst'>PGC_S_DEFAULT</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Now we can re-apply the wired-in default (i.e., the boot_val) */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/guc.h.html#LN361"><span class='Ref_to_Proto'>set_config_option</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN145"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                              <a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/guc.h.html#LN106"><span class='Ref_to_EnumConst'>PGC_S_DEFAULT</span></a><span class='Delimiter'>, 
</span>                              <a href="../../../include/utils/guc.h.html#LN193"><span class='Ref_to_EnumConst'>GUC_ACTION_SET</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Log the change if appropriate */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>context</span></a> <span class='Operator'>== </span><a href="../../../include/utils/guc.h.html#LN71"><span class='Ref_to_EnumConst'>PGC_SIGHUP</span></a><span class='Parentheses'>) 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"parameter \"%s\" removed from configuration file, reset to default"</span><span class='Delimiter'>, 
</span>                                <a href="guc-file.l.html#LN339"><span class='Ref_To_Local'>gconf</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc_tables.h.html#LN145"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;num_guc_variabl... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Restore any variables determined by environment variables or 
     * dynamically-computed defaults.  This is a no-op except in the case 
     * where one of these had been in the config file and is now removed. 
     * 
     * In particular, we *must not* do this during the postmaster's initial 
     * loading of the file, since the timezone functions in particular should 
     * be run only after initialization is complete. 
     * 
     * XXX this is an unmaintainable crock, because we have to know how to set 
     * (or at least what to call to set) every variable that could potentially 
     * have PGC_S_DYNAMIC_DEFAULT or PGC_S_ENV_VAR source. However, there's no 
     * time to redesign it for 9.1. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>context</span></a> <span class='Operator'>== </span><a href="../../../include/utils/guc.h.html#LN71"><span class='Ref_to_EnumConst'>PGC_SIGHUP</span></a> <span class='Operator'>&& </span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>applySettings</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="guc.c.html#LN3952"><span class='Ref_to_Proto'>InitializeGUCOptionsFromEnvironment</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <a href="guc.c.html#LN173"><span class='Ref_to_Proto'>pg_timezone_abbrev_initialize</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* this selects SQL_ASCII in processes not connected to a database */ 
</span>        <a href="../../../include/utils/guc.h.html#LN276"><span class='Ref_to_Proto'>SetConfigOption</span></a><span class='Parentheses'>(</span><span class='String'>"client_encoding"</span><span class='Delimiter'>, </span><a href="../../../include/mb/pg_wchar.h.html#LN546"><span class='Ref_to_Proto'>GetDatabaseEncodingName</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                        <a href="../../../include/utils/guc.h.html#LN73"><span class='Ref_to_EnumConst'>PGC_BACKEND</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/guc.h.html#LN107"><span class='Ref_to_EnumConst'>PGC_S_DYNAMIC_DEFAULT</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now apply the values from the config file. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN174"><span class='Ref_To_Local'>head</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN141"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN418"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>pre_value</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN419"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>scres</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore anything marked as ignorable */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN139"><span class='Ref_to_Member'>ignore</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* In SIGHUP cases in the postmaster, we want to report changes */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>context</span></a> <span class='Operator'>== </span><a href="../../../include/utils/guc.h.html#LN71"><span class='Ref_to_EnumConst'>PGC_SIGHUP</span></a> <span class='Operator'>&& </span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>applySettings</span></a> <span class='Operator'>&& !</span><a href="../init/globals.c.html#LN100"><span class='Ref_to_Global_Var'>IsUnderPostmaster</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN428"></a>            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>preval</span> <span class='Operator'>= </span><a href="../../../include/utils/guc.h.html#LN346"><span class='Ref_to_Proto'>GetConfigOption</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* If option doesn't exist yet or is NULL, treat as empty string */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="guc-file.l.html#LN428"><span class='Ref_To_Local'>preval</span></a><span class='Parentheses'>) 
</span>                <a href="guc-file.l.html#LN428"><span class='Ref_To_Local'>preval</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* must dup, else might have dangling pointer below */ 
</span>            <a href="guc-file.l.html#LN418"><span class='Ref_To_Local'>pre_value</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN428"><span class='Ref_To_Local'>preval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="guc-file.l.html#LN419"><span class='Ref_To_Local'>scres</span></a> <span class='Operator'>= </span><a href="../../../include/utils/guc.h.html#LN361"><span class='Ref_to_Proto'>set_config_option</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value</span><span class='Delimiter'>, 
</span>                                  <a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>context</span></a><span class='Delimiter'>, </span><a href="../../../include/utils/guc.h.html#LN109"><span class='Ref_to_EnumConst'>PGC_S_FILE</span></a><span class='Delimiter'>, 
</span>                                  <a href="../../../include/utils/guc.h.html#LN193"><span class='Ref_to_EnumConst'>GUC_ACTION_SET</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>applySettings</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN419"><span class='Ref_To_Local'>scres</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* variable was updated, so log the change if appropriate */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN418"><span class='Ref_To_Local'>pre_value</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN445"></a>                <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>post_value</span> <span class='Operator'>= </span><a href="../../../include/utils/guc.h.html#LN346"><span class='Ref_to_Proto'>GetConfigOption</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="guc-file.l.html#LN445"><span class='Ref_To_Local'>post_value</span></a><span class='Parentheses'>) 
</span>                    <a href="guc-file.l.html#LN445"><span class='Ref_To_Local'>post_value</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="guc-file.l.html#LN418"><span class='Ref_To_Local'>pre_value</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN445"><span class='Ref_To_Local'>post_value</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"parameter \"%s\" changed to \"%s\""</span><span class='Delimiter'>, 
</span>                                    <a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN140"><span class='Ref_to_Member'>applied</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN419"><span class='Ref_To_Local'>scres</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="guc-file.l.html#LN170"><span class='Ref_To_Local'>error</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN136"><span class='Ref_to_Member'>errmsg</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><span class='String'>"setting could not be applied"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN172"><span class='Ref_To_Local'>ConfFileWithError</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN137"><span class='Ref_to_Member'>filename</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* no error, but variable's active value was not changed */ 
</span>            <a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN140"><span class='Ref_to_Member'>applied</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We should update source location unless there was an error, since 
         * even if the active value didn't change, the reset value might have. 
         * (In the postmaster, there won't be a difference, but it does matter 
         * in backends.) 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN419"><span class='Ref_To_Local'>scres</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>applySettings</span></a><span class='Parentheses'>) 
</span>            <a href="guc.c.html#LN136"><span class='Ref_to_Proto'>set_config_sourcefile</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN137"><span class='Ref_to_Member'>filename</span></a><span class='Delimiter'>, 
</span>                                  <a href="guc-file.l.html#LN173"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN138"><span class='Ref_to_Member'>sourceline</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN418"><span class='Ref_To_Local'>pre_value</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN418"><span class='Ref_To_Local'>pre_value</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for item=head;item;item=i... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Remember when we last successfully loaded the config file. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>applySettings</span></a><span class='Parentheses'>) 
</span>        <a href="../adt/timestamp.c.html#LN51"><span class='Ref_to_Global_Var'>PgReloadTime</span></a> <span class='Operator'>= </span><a href="../../../include/utils/timestamp.h.html#LN69"><span class='Ref_to_Proto'>GetCurrentTimestamp</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
<a name="LN486"></a><span class='Label'>bail_out</span><span class='Operator'>: 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN170"><span class='Ref_To_Local'>error</span></a> <span class='Operator'>&& </span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>applySettings</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* During postmaster startup, any error is fatal */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>context</span></a> <span class='Operator'>== </span><a href="../../../include/utils/guc.h.html#LN70"><span class='Ref_to_EnumConst'>PGC_POSTMASTER</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"configuration file \"%s\" contains errors"</span><span class='Delimiter'>, 
</span>                            <a href="guc-file.l.html#LN172"><span class='Ref_To_Local'>ConfFileWithError</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN171"><span class='Ref_To_Local'>applying</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"configuration file \"%s\" contains errors; unaffected changes were applied"</span><span class='Delimiter'>, 
</span>                            <a href="guc-file.l.html#LN172"><span class='Ref_To_Local'>ConfFileWithError</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN168"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_CONFIG_FILE_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"configuration file \"%s\" contains errors; no changes were applied"</span><span class='Delimiter'>, 
</span>                            <a href="guc-file.l.html#LN172"><span class='Ref_To_Local'>ConfFileWithError</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Successful or otherwise, return the collected data list */ 
</span>    <span class='Control'>return</span> <a href="guc-file.l.html#LN174"><span class='Ref_To_Local'>head</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ProcessConfigFileInternal &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Given a configuration file or directory location that may be a relative 
 * path, return an absolute one.  We consider the location to be relative to 
 * the directory holding the calling file, or to DataDir if no calling file. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN517"></a><span class='Declare_Function'>AbsoluteConfigLocation</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>location</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>calling_file</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN519"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>abs_path</span><span class='Delimiter'>[</span><a href="../../../include/pg_config_manual.h.html#LN88"><span class='Ref_to_Const'>MAXPGPATH</span></a><span class='Delimiter'>]; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/port.h.html#LN76"><span class='Ref_to_Macro'>is_absolute_path</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN517"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN517"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN517"><span class='Ref_to_Parameter'>calling_file</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../port/strlcpy.c.html#LN43"><span class='Ref_to_Func'>strlcpy</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN519"><span class='Ref_To_Local'>abs_path</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN517"><span class='Ref_to_Parameter'>calling_file</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="guc-file.l.html#LN519"><span class='Ref_To_Local'>abs_path</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../../include/port.h.html#LN62"><span class='Ref_to_Proto'>get_parent_directory</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN519"><span class='Ref_To_Local'>abs_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/port.h.html#LN40"><span class='Ref_to_Proto'>join_path_components</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN519"><span class='Ref_To_Local'>abs_path</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN519"><span class='Ref_To_Local'>abs_path</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN517"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/port.h.html#LN42"><span class='Ref_to_Proto'>canonicalize_path</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN519"><span class='Ref_To_Local'>abs_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../../include/c.h.html#LN677"><span class='Ref_to_Macro'>AssertState</span></a><span class='Parentheses'>(</span><a href="../init/globals.c.html#LN59"><span class='Ref_to_Global_Var'>DataDir</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/port.h.html#LN40"><span class='Ref_to_Proto'>join_path_components</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN519"><span class='Ref_To_Local'>abs_path</span></a><span class='Delimiter'>, </span><a href="../init/globals.c.html#LN59"><span class='Ref_to_Global_Var'>DataDir</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN517"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/port.h.html#LN42"><span class='Ref_to_Proto'>canonicalize_path</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN519"><span class='Ref_To_Local'>abs_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>return</span> <a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN519"><span class='Ref_To_Local'>abs_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end AbsoluteConfigLocation &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Read and parse a single configuration file.  This function recurses 
 * to handle "include" directives. 
 * 
 * If "strict" is true, treat failure to open the config file as an error, 
 * otherwise just skip the file. 
 * 
 * calling_file/calling_lineno identify the source of the request. 
 * Pass NULL/0 if not recursing from an inclusion request. 
 * 
 * See ParseConfigFp for further details.  This one merely adds opening the 
 * config file rather than working from a caller-supplied file descriptor, 
 * and absolute-ifying the path name if necessary. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN557"></a><span class='Declare_Function'>ParseConfigFile</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>config_file</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>strict</span><span class='Delimiter'>, 
</span><a name="LN558"></a>                <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>calling_file</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>calling_lineno</span><span class='Delimiter'>, 
</span><a name="LN559"></a>                <span class='Keyword'>int </span><span class='Declare_Parameter'>depth</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>elevel</span><span class='Delimiter'>, 
</span><a name="LN560"></a>                <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>head_p</span><span class='Delimiter'>, 
</span><a name="LN561"></a>                <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>tail_p</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN563"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>abs_path</span><span class='Delimiter'>; 
</span><a name="LN564"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>OK</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN565"></a>    FILE       <span class='Operator'>*</span><span class='Declare_Local'>fp</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Reject too-deep include nesting depth.  This is just a safety check to 
     * avoid dumping core due to stack overflow if an include file loops back 
     * to itself.  The maximum nesting depth is pretty arbitrary. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN559"><span class='Ref_to_Parameter'>depth</span></a> <span class='Operator'>&GT; </span><span class='Number'>10</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN559"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_PROGRAM_LIMIT_EXCEEDED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not open configuration file \"%s\": maximum nesting depth exceeded"</span><span class='Delimiter'>, 
</span>                        <a href="guc-file.l.html#LN557"><span class='Ref_to_Parameter'>config_file</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="guc-file.l.html#LN50"><span class='Ref_to_Proto'>record_config_file_error</span></a><span class='Parentheses'>(</span><span class='String'>"nesting depth exceeded"</span><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN558"><span class='Ref_to_Parameter'>calling_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN558"><span class='Ref_to_Parameter'>calling_lineno</span></a><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN560"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN561"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="guc-file.l.html#LN563"><span class='Ref_To_Local'>abs_path</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN516"><span class='Ref_to_Func'>AbsoluteConfigLocation</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN557"><span class='Ref_to_Parameter'>config_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN558"><span class='Ref_to_Parameter'>calling_file</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN565"><span class='Ref_To_Local'>fp</span></a> <span class='Operator'>= </span><a href="../../../include/storage/fd.h.html#LN83"><span class='Ref_to_Proto'>AllocateFile</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN563"><span class='Ref_To_Local'>abs_path</span></a><span class='Delimiter'>, </span><span class='String'>"r"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="guc-file.l.html#LN565"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN557"><span class='Ref_to_Parameter'>strict</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN559"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN132"><span class='Ref_to_Proto'>errcode_for_file_access</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not open configuration file \"%s\": %m"</span><span class='Delimiter'>, 
</span>                            <a href="guc-file.l.html#LN563"><span class='Ref_To_Local'>abs_path</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN50"><span class='Ref_to_Proto'>record_config_file_error</span></a><span class='Parentheses'>(</span><a href="../../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"could not open file \"%s\""</span><span class='Delimiter'>, 
</span>                                              <a href="guc-file.l.html#LN563"><span class='Ref_To_Local'>abs_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="guc-file.l.html#LN558"><span class='Ref_to_Parameter'>calling_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN558"><span class='Ref_to_Parameter'>calling_lineno</span></a><span class='Delimiter'>, 
</span>                                     <a href="guc-file.l.html#LN560"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN561"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN564"><span class='Ref_To_Local'>OK</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN25"><span class='Ref_to_Const'>LOG</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"skipping missing configuration file \"%s\""</span><span class='Delimiter'>, 
</span>                            <a href="guc-file.l.html#LN563"><span class='Ref_To_Local'>abs_path</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN611"><span class='Ref_to_Label'>cleanup</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !fp &raquo; </span> 
 
    <a href="guc-file.l.html#LN564"><span class='Ref_To_Local'>OK</span></a> <span class='Operator'>= </span><a href="../../../include/utils/guc.h.html#LN148"><span class='Ref_to_Proto'>ParseConfigFp</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN565"><span class='Ref_To_Local'>fp</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN563"><span class='Ref_To_Local'>abs_path</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN559"><span class='Ref_to_Parameter'>depth</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN559"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN560"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN561"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN611"></a><span class='Label'>cleanup</span><span class='Operator'>: 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN565"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/storage/fd.h.html#LN84"><span class='Ref_to_Proto'>FreeFile</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN565"><span class='Ref_To_Local'>fp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN563"><span class='Ref_To_Local'>abs_path</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="guc-file.l.html#LN564"><span class='Ref_To_Local'>OK</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ParseConfigFile &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Capture an error message in the ConfigVariable list returned by 
 * config file parsing. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN624"></a><span class='Declare_Function'>record_config_file_error</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>errmsg</span><span class='Delimiter'>, 
</span><a name="LN625"></a>                         <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>config_file</span><span class='Delimiter'>, 
</span><a name="LN626"></a>                         <span class='Keyword'>int </span><span class='Declare_Parameter'>lineno</span><span class='Delimiter'>, 
</span><a name="LN627"></a>                         <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>head_p</span><span class='Delimiter'>, 
</span><a name="LN628"></a>                         <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>tail_p</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN630"></a>    <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>*</span><span class='Declare_Local'>item</span><span class='Delimiter'>; 
</span> 
    <a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof </span><span class='Operator'>*</span><a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value </span><span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN136"><span class='Ref_to_Member'>errmsg</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN624"><span class='Ref_to_Parameter'>errmsg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN137"><span class='Ref_to_Member'>filename</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN625"><span class='Ref_to_Parameter'>config_file</span></a> <span class='Operator'>? </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN625"><span class='Ref_to_Parameter'>config_file</span></a><span class='Parentheses'>) </span><span class='Operator'>: </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN138"><span class='Ref_to_Member'>sourceline</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN626"><span class='Ref_to_Parameter'>lineno</span></a><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN139"><span class='Ref_to_Member'>ignore</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN140"><span class='Ref_to_Member'>applied</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN141"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="guc-file.l.html#LN627"><span class='Ref_to_Parameter'>head_p</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="guc-file.l.html#LN627"><span class='Ref_to_Parameter'>head_p</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="guc-file.l.html#LN628"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN141"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="guc-file.l.html#LN628"><span class='Ref_to_Parameter'>tail_p</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN630"><span class='Ref_To_Local'>item</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end record_config_file_error &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Flex fatal errors bring us here.  Stash the error message and jump back to 
 * ParseConfigFp().  Assume all msg arguments point to string constants; this 
 * holds for flex 2.5.31 (earliest we support) and flex 2.5.35 (latest as of 
 * this writing).  Otherwise, we would need to copy the message. 
 * 
 * We return "int" since this takes the place of calls to fprintf(). 
*/ 
</span><span class='Keyword'>static int 
</span><a name="LN657"></a><span class='Declare_Function'>GUC_flex_fatal</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>msg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="guc-file.l.html#LN45"><span class='Ref_to_Global_Var'>GUC_flex_fatal_errmsg</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN657"><span class='Ref_to_Parameter'>msg</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/c.h.html#LN1089"><span class='Ref_to_Const'>siglongjmp</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="guc-file.l.html#LN46"><span class='Ref_to_Global_Var'>GUC_flex_fatal_jmp</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>;</span>                   <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span><span class='Delimiter'>} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Read and parse a single configuration file.  This function recurses 
 * to handle "include" directives. 
 * 
 * Input parameters: 
 *  fp: file pointer from AllocateFile for the configuration file to parse 
 *  config_file: absolute or relative path name of the configuration file 
 *  depth: recursion depth (should be 0 in the outermost call) 
 *  elevel: error logging level to use 
 * Input/Output parameters: 
 *  head_p, tail_p: head and tail of linked list of name/value pairs 
 * 
 * *head_p and *tail_p must be initialized, either to NULL or valid pointers 
 * to a ConfigVariable list, before calling the outer recursion level.  Any 
 * name-value pairs read from the input file(s) will be appended to the list. 
 * Error reports will also be appended to the list, if elevel &LT; ERROR. 
 * 
 * Returns TRUE if successful, FALSE if an error occurred.  The error has 
 * already been ereport'd, it is only necessary for the caller to clean up 
 * its own state and release the ConfigVariable list. 
 * 
 * Note: if elevel &GT;= ERROR then an error will not return control to the 
 * caller, so there is no need to check the return value in that case. 
 * 
 * Note: this function is used to parse not only postgresql.conf, but 
 * various other configuration files that use the same "name = value" 
 * syntax.  Hence, do not do anything here or in the subsidiary routines 
 * ParseConfigFile/ParseConfigDirectory that assumes we are processing 
 * GUCs specifically. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN695"></a><span class='Declare_Function'>ParseConfigFp</span><span class='Parentheses'>(</span>FILE <span class='Operator'>*</span><span class='Declare_Parameter'>fp</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>config_file</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>depth</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>elevel</span><span class='Delimiter'>, 
</span><a name="LN696"></a>              <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>head_p</span><span class='Delimiter'>, </span><a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>tail_p</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN698"></a>    <span class='Keyword'>volatile bool </span><span class='Declare_Local'>OK</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN699"></a>    <span class='Keyword'>unsigned int </span><span class='Declare_Local'>save_ConfigFileLineno</span> <span class='Operator'>= </span><a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a><span class='Delimiter'>; 
</span><a name="LN700"></a>    <a href="../../../include/c.h.html#LN1087"><span class='Ref_to_Const'>sigjmp_buf</span></a> <span class='Operator'>*</span><span class='Declare_Local'>save_GUC_flex_fatal_jmp</span> <span class='Operator'>= </span><a href="guc-file.l.html#LN46"><span class='Ref_to_Global_Var'>GUC_flex_fatal_jmp</span></a><span class='Delimiter'>; 
</span><a name="LN701"></a>    <a href="../../../include/c.h.html#LN1087"><span class='Ref_to_Const'>sigjmp_buf</span></a>  <span class='Declare_Local'>flex_fatal_jmp</span><span class='Delimiter'>; 
</span><a name="LN702"></a>    <span class='Keyword'>volatile </span><a href="../../../include/fe_utils/psqlscan_int.h.html#LN55"><span class='Ref_to_Typedef'>YY_BUFFER_STATE</span></a> <span class='Declare_Local'>lex_buffer</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN703"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>errorcount</span><span class='Delimiter'>; 
</span><a name="LN704"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>token</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN1088"><span class='Ref_to_Macro'>sigsetjmp</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN701"><span class='Ref_To_Local'>flex_fatal_jmp</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="guc-file.l.html#LN46"><span class='Ref_to_Global_Var'>GUC_flex_fatal_jmp</span></a> <span class='Operator'>= &</span><a href="guc-file.l.html#LN701"><span class='Ref_To_Local'>flex_fatal_jmp</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Regain control after a fatal, internal flex error.  It may have 
         * corrupted parser state.  Consequently, abandon the file, but trust 
         * that the state remains sane enough for yy_delete_buffer(). 
         */ 
</span>        <a href="../../bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, </span><span class='String'>"%s at file \"%s\" line %u"</span><span class='Delimiter'>, 
</span>             <a href="guc-file.l.html#LN45"><span class='Ref_to_Global_Var'>GUC_flex_fatal_errmsg</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>config_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="guc-file.l.html#LN50"><span class='Ref_to_Proto'>record_config_file_error</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN45"><span class='Ref_to_Global_Var'>GUC_flex_fatal_errmsg</span></a><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>config_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="guc-file.l.html#LN698"><span class='Ref_To_Local'>OK</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN900"><span class='Ref_to_Label'>cleanup</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Parse 
     */ 
</span>    <a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN703"><span class='Ref_To_Local'>errorcount</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="guc-file.l.html#LN702"><span class='Ref_To_Local'>lex_buffer</span></a> <span class='Operator'>= </span>yy_create_buffer<span class='Parentheses'>(</span><a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>fp</span></a><span class='Delimiter'>, </span>YY_BUF_SIZE<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    yy_switch_to_buffer<span class='Parentheses'>(</span><a href="guc-file.l.html#LN702"><span class='Ref_To_Local'>lex_buffer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* This loop iterates once per logical line */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN736"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opt_name</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN737"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opt_value</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN738"></a>        <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>*</span><span class='Declare_Local'>item</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>== </span><a href="guc-file.l.html#LN40"><span class='Ref_to_EnumConst'>GUC_EOL</span></a><span class='Parentheses'>)</span>   <span class='Comment_Single_Line'>/* empty or comment line */ 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* first token on line is option name */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>!= </span><a href="guc-file.l.html#LN33"><span class='Ref_to_EnumConst'>GUC_ID</span></a> <span class='Operator'>&& </span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>!= </span><a href="guc-file.l.html#LN39"><span class='Ref_to_EnumConst'>GUC_QUALIFIED_ID</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN845"><span class='Ref_to_Label'>parse_error</span></a><span class='Delimiter'>; 
</span>        <a href="guc-file.l.html#LN736"><span class='Ref_To_Local'>opt_name</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span>yytext<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* next we have an optional equal sign; discard if present */ 
</span>        <a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>== </span><a href="guc-file.l.html#LN37"><span class='Ref_to_EnumConst'>GUC_EQUALS</span></a><span class='Parentheses'>) 
</span>            <a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* now we must have the option value */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>!= </span><a href="guc-file.l.html#LN33"><span class='Ref_to_EnumConst'>GUC_ID</span></a> <span class='Operator'>&& 
</span>            <a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>!= </span><a href="guc-file.l.html#LN34"><span class='Ref_to_EnumConst'>GUC_STRING</span></a> <span class='Operator'>&& 
</span>            <a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>!= </span><a href="guc-file.l.html#LN35"><span class='Ref_to_EnumConst'>GUC_INTEGER</span></a> <span class='Operator'>&& 
</span>            <a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>!= </span><a href="guc-file.l.html#LN36"><span class='Ref_to_EnumConst'>GUC_REAL</span></a> <span class='Operator'>&& 
</span>            <a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>!= </span><a href="guc-file.l.html#LN38"><span class='Ref_to_EnumConst'>GUC_UNQUOTED_STRING</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN845"><span class='Ref_to_Label'>parse_error</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>== </span><a href="guc-file.l.html#LN34"><span class='Ref_to_EnumConst'>GUC_STRING</span></a><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* strip quotes and escapes */ 
</span>            <a href="guc-file.l.html#LN737"><span class='Ref_To_Local'>opt_value</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN57"><span class='Ref_to_Proto'>GUC_scanstr</span></a><span class='Parentheses'>(</span>yytext<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="guc-file.l.html#LN737"><span class='Ref_To_Local'>opt_value</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span>yytext<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* now we'd like an end of line, or possibly EOF */ 
</span>        <a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>!= </span><a href="guc-file.l.html#LN40"><span class='Ref_to_EnumConst'>GUC_EOL</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN845"><span class='Ref_to_Label'>parse_error</span></a><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* treat EOF like \n for line numbering purposes, cf bug 4752 */ 
</span>            <a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* OK, process the option name and value */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc.c.html#LN3951"><span class='Ref_to_Proto'>guc_name_compare</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN736"><span class='Ref_To_Local'>opt_name</span></a><span class='Delimiter'>, </span><span class='String'>"include_dir"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * An include_dir directive isn't a variable and should be 
             * processed immediately. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/guc.h.html#LN151"><span class='Ref_to_Proto'>ParseConfigDirectory</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN737"><span class='Ref_To_Local'>opt_value</span></a><span class='Delimiter'>, 
</span>                                      <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>config_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                      <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>depth</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                                      <a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>))</span> 
                <a href="guc-file.l.html#LN698"><span class='Ref_To_Local'>OK</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            yy_switch_to_buffer<span class='Parentheses'>(</span><a href="guc-file.l.html#LN702"><span class='Ref_To_Local'>lex_buffer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN736"><span class='Ref_To_Local'>opt_name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN737"><span class='Ref_To_Local'>opt_value</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc.c.html#LN3951"><span class='Ref_to_Proto'>guc_name_compare</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN736"><span class='Ref_To_Local'>opt_name</span></a><span class='Delimiter'>, </span><span class='String'>"include_if_exists"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * An include_if_exists directive isn't a variable and should be 
             * processed immediately. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/guc.h.html#LN144"><span class='Ref_to_Proto'>ParseConfigFile</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN737"><span class='Ref_To_Local'>opt_value</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>config_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>depth</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>))</span> 
                <a href="guc-file.l.html#LN698"><span class='Ref_To_Local'>OK</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            yy_switch_to_buffer<span class='Parentheses'>(</span><a href="guc-file.l.html#LN702"><span class='Ref_To_Local'>lex_buffer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN736"><span class='Ref_To_Local'>opt_name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN737"><span class='Ref_To_Local'>opt_value</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc.c.html#LN3951"><span class='Ref_to_Proto'>guc_name_compare</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN736"><span class='Ref_To_Local'>opt_name</span></a><span class='Delimiter'>, </span><span class='String'>"include"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * An include directive isn't a variable and should be processed 
             * immediately. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/guc.h.html#LN144"><span class='Ref_to_Proto'>ParseConfigFile</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN737"><span class='Ref_To_Local'>opt_value</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>config_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>depth</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>))</span> 
                <a href="guc-file.l.html#LN698"><span class='Ref_To_Local'>OK</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            yy_switch_to_buffer<span class='Parentheses'>(</span><a href="guc-file.l.html#LN702"><span class='Ref_To_Local'>lex_buffer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN736"><span class='Ref_To_Local'>opt_name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN737"><span class='Ref_To_Local'>opt_value</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* ordinary variable, append to list */ 
</span>            <a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof </span><span class='Operator'>*</span><a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN736"><span class='Ref_To_Local'>opt_name</span></a><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value </span><span class='Operator'>= </span><a href="guc-file.l.html#LN737"><span class='Ref_To_Local'>opt_value</span></a><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN136"><span class='Ref_to_Member'>errmsg</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN137"><span class='Ref_to_Member'>filename</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>config_file</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN138"><span class='Ref_to_Member'>sourceline</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN139"><span class='Ref_to_Member'>ignore</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN140"><span class='Ref_to_Member'>applied</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN141"><span class='Ref_to_Member'>next</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>head_p</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Operator'>*</span><a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>head_p</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>next <span class='Operator'>= </span><a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Delimiter'>; 
</span>            <span class='Operator'>*</span><a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>tail_p</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN738"><span class='Ref_To_Local'>item</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* break out of loop if read EOF, else loop for next line */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
<a name="LN845"></a><span class='Label'>parse_error</span><span class='Operator'>: 
</span>        <span class='Comment_Multi_Line'>/* release storage if we allocated any on this line */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN736"><span class='Ref_To_Local'>opt_name</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN736"><span class='Ref_To_Local'>opt_name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN737"><span class='Ref_To_Local'>opt_value</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN737"><span class='Ref_To_Local'>opt_value</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* report the error */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>== </span><a href="guc-file.l.html#LN40"><span class='Ref_to_EnumConst'>GUC_EOL</span></a> <span class='Operator'>|| </span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>              <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error in file \"%s\" line %u, near end of line"</span><span class='Delimiter'>, 
</span>                     <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>config_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN50"><span class='Ref_to_Proto'>record_config_file_error</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Delimiter'>, 
</span>                                     <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>config_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                     <a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error in file \"%s\" line %u, near token \"%s\""</span><span class='Delimiter'>, 
</span>                    <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>config_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a><span class='Delimiter'>, </span>yytext<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN50"><span class='Ref_to_Proto'>record_config_file_error</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Delimiter'>, 
</span>                                     <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>config_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a><span class='Delimiter'>, 
</span>                                     <a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN696"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="guc-file.l.html#LN698"><span class='Ref_To_Local'>OK</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="guc-file.l.html#LN703"><span class='Ref_To_Local'>errorcount</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * To avoid producing too much noise when fed a totally bogus file, 
         * give up after 100 syntax errors per file (an arbitrary number). 
         * Also, if we're only logging the errors at DEBUG level anyway, might 
         * as well give up immediately.  (This prevents postmaster children 
         * from bloating the logs with duplicate complaints.) 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN703"><span class='Ref_To_Local'>errorcount</span></a> <span class='Operator'>&GT;= </span><span class='Number'>100</span> <span class='Operator'>|| </span><a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>elevel</span></a> <span class='Operator'>&LT;= </span><a href="../../../include/utils/elog.h.html#LN24"><span class='Ref_to_Const'>DEBUG1</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_PROGRAM_LIMIT_EXCEEDED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>               <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too many syntax errors found, abandoning file \"%s\""</span><span class='Delimiter'>, 
</span>                      <a href="guc-file.l.html#LN695"><span class='Ref_to_Parameter'>config_file</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* resync to next end-of-line or EOF */ 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>!= </span><a href="guc-file.l.html#LN40"><span class='Ref_to_EnumConst'>GUC_EOL</span></a> <span class='Operator'>&& </span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* break out of loop on EOF */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN704"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while (token=yylex()) &raquo; </span> 
 
<a name="LN900"></a><span class='Label'>cleanup</span><span class='Operator'>: 
</span>    yy_delete_buffer<span class='Parentheses'>(</span><a href="guc-file.l.html#LN702"><span class='Ref_To_Local'>lex_buffer</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Each recursion level must save and restore these static variables. */ 
</span>    <a href="guc-file.l.html#LN44"><span class='Ref_to_Global_Var'>ConfigFileLineno</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN699"><span class='Ref_To_Local'>save_ConfigFileLineno</span></a><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN46"><span class='Ref_to_Global_Var'>GUC_flex_fatal_jmp</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN700"><span class='Ref_To_Local'>save_GUC_flex_fatal_jmp</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="guc-file.l.html#LN698"><span class='Ref_To_Local'>OK</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ParseConfigFp &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Read and parse all config files in a subdirectory in alphabetical order 
 * 
 * includedir is the absolute or relative path to the subdirectory to scan. 
 * 
 * calling_file/calling_lineno identify the source of the request. 
 * Pass NULL/0 if not recursing from an inclusion request. 
 * 
 * See ParseConfigFp for further details. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN919"></a><span class='Declare_Function'>ParseConfigDirectory</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>includedir</span><span class='Delimiter'>, 
</span><a name="LN920"></a>                     <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>calling_file</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>calling_lineno</span><span class='Delimiter'>, 
</span><a name="LN921"></a>                     <span class='Keyword'>int </span><span class='Declare_Parameter'>depth</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>elevel</span><span class='Delimiter'>, 
</span><a name="LN922"></a>                     <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>head_p</span><span class='Delimiter'>, 
</span><a name="LN923"></a>                     <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>tail_p</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN925"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>directory</span><span class='Delimiter'>; 
</span><a name="LN926"></a>    <a href="../../../port/dirent.c.html#LN24"><span class='Ref_to_Struct'>DIR</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>d</span><span class='Delimiter'>; 
</span><a name="LN927"></a>    <span class='Control'>struct</span> <a href="../../../include/port/win32_msvc/dirent.h.html#LN8"><span class='Ref_to_Struct'>dirent</span></a> <span class='Operator'>*</span><span class='Declare_Local'>de</span><span class='Delimiter'>; 
</span><a name="LN928"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>filenames</span><span class='Delimiter'>; 
</span><a name="LN929"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>num_filenames</span><span class='Delimiter'>; 
</span><a name="LN930"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>size_filenames</span><span class='Delimiter'>; 
</span><a name="LN931"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>status</span><span class='Delimiter'>; 
</span> 
    <a href="guc-file.l.html#LN925"><span class='Ref_To_Local'>directory</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN516"><span class='Ref_to_Func'>AbsoluteConfigLocation</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN919"><span class='Ref_to_Parameter'>includedir</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN920"><span class='Ref_to_Parameter'>calling_file</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN926"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><a href="../../../include/storage/fd.h.html#LN91"><span class='Ref_to_Proto'>AllocateDir</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN925"><span class='Ref_To_Local'>directory</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN926"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN921"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN132"><span class='Ref_to_Proto'>errcode_for_file_access</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                 <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not open configuration directory \"%s\": %m"</span><span class='Delimiter'>, 
</span>                        <a href="guc-file.l.html#LN925"><span class='Ref_To_Local'>directory</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="guc-file.l.html#LN50"><span class='Ref_to_Proto'>record_config_file_error</span></a><span class='Parentheses'>(</span><a href="../../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"could not open directory \"%s\""</span><span class='Delimiter'>, 
</span>                                          <a href="guc-file.l.html#LN925"><span class='Ref_To_Local'>directory</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN920"><span class='Ref_to_Parameter'>calling_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN920"><span class='Ref_to_Parameter'>calling_lineno</span></a><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN922"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN923"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="guc-file.l.html#LN931"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN1030"><span class='Ref_to_Label'>cleanup</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Read the directory and put the filenames in an array, so we can sort 
     * them prior to processing the contents. 
     */ 
</span>    <a href="guc-file.l.html#LN930"><span class='Ref_To_Local'>size_filenames</span></a> <span class='Operator'>= </span><span class='Number'>32</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN928"><span class='Ref_To_Local'>filenames</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN930"><span class='Ref_To_Local'>size_filenames</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN929"><span class='Ref_To_Local'>num_filenames</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="guc-file.l.html#LN927"><span class='Ref_To_Local'>de</span></a> <span class='Operator'>= </span><a href="../../../include/storage/fd.h.html#LN92"><span class='Ref_to_Proto'>ReadDir</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN926"><span class='Ref_To_Local'>d</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN925"><span class='Ref_To_Local'>directory</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN959"></a>        <span class='Control'>struct</span> <a href="../../../include/port.h.html#LN275"><span class='Ref_to_Macro'>stat</span></a> <span class='Declare_Local'>st</span><span class='Delimiter'>; 
</span><a name="LN960"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>filename</span><span class='Delimiter'>[</span><a href="../../../include/pg_config_manual.h.html#LN88"><span class='Ref_to_Const'>MAXPGPATH</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Only parse files with names ending in ".conf".  Explicitly reject 
         * files starting with ".".  This excludes things like "." and "..", 
         * as well as typical hidden files, backup files, and editor debris. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="guc-file.l.html#LN927"><span class='Ref_To_Local'>de</span></a><span class='Operator'>-&GT;</span><a href="../../../include/port/win32_msvc/dirent.h.html#LN13"><span class='Ref_to_Member'>d_name</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>6</span><span class='Parentheses'>)</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN927"><span class='Ref_To_Local'>de</span></a><span class='Operator'>-&GT;</span><a href="../../../include/port/win32_msvc/dirent.h.html#LN13"><span class='Ref_to_Member'>d_name</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="guc-file.l.html#LN927"><span class='Ref_To_Local'>de</span></a><span class='Operator'>-&GT;</span><a href="../../../include/port/win32_msvc/dirent.h.html#LN13"><span class='Ref_to_Member'>d_name</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><a href="guc-file.l.html#LN927"><span class='Ref_To_Local'>de</span></a><span class='Operator'>-&GT;</span><a href="../../../include/port/win32_msvc/dirent.h.html#LN13"><span class='Ref_to_Member'>d_name</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>5</span><span class='Delimiter'>, </span><span class='String'>".conf"</span><span class='Parentheses'>)</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/port.h.html#LN40"><span class='Ref_to_Proto'>join_path_components</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN960"><span class='Ref_To_Local'>filename</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN925"><span class='Ref_To_Local'>directory</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN927"><span class='Ref_To_Local'>de</span></a><span class='Operator'>-&GT;</span><a href="../../../include/port/win32_msvc/dirent.h.html#LN13"><span class='Ref_to_Member'>d_name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/port.h.html#LN42"><span class='Ref_to_Proto'>canonicalize_path</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN960"><span class='Ref_To_Local'>filename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/port.h.html#LN275"><span class='Ref_to_Macro'>stat</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN960"><span class='Ref_To_Local'>filename</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="guc-file.l.html#LN959"><span class='Ref_To_Local'>st</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/port/win32.h.html#LN429"><span class='Ref_to_Macro'>S_ISDIR</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN959"><span class='Ref_To_Local'>st</span></a><span class='Operator'>.</span>st_mode<span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Add file to array, increasing its size in blocks of 32 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN929"><span class='Ref_To_Local'>num_filenames</span></a> <span class='Operator'>&GT;= </span><a href="guc-file.l.html#LN930"><span class='Ref_To_Local'>size_filenames</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="guc-file.l.html#LN930"><span class='Ref_To_Local'>size_filenames</span></a> <span class='Operator'>+= </span><span class='Number'>32</span><span class='Delimiter'>; 
</span>                    <a href="guc-file.l.html#LN928"><span class='Ref_To_Local'>filenames</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN36"><span class='Ref_to_Proto'>repalloc</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN928"><span class='Ref_To_Local'>filenames</span></a><span class='Delimiter'>, 
</span>                                            <a href="guc-file.l.html#LN930"><span class='Ref_To_Local'>size_filenames</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="guc-file.l.html#LN928"><span class='Ref_To_Local'>filenames</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN929"><span class='Ref_To_Local'>num_filenames</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN960"><span class='Ref_To_Local'>filename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="guc-file.l.html#LN929"><span class='Ref_To_Local'>num_filenames</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * stat does not care about permissions, so the most likely reason 
             * a file can't be accessed now is if it was removed between the 
             * directory listing and now. 
             */ 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN921"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN132"><span class='Ref_to_Proto'>errcode_for_file_access</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                     <a href="../error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"could not stat file \"%s\": %m"</span><span class='Delimiter'>, 
</span>                            <a href="guc-file.l.html#LN960"><span class='Ref_To_Local'>filename</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN50"><span class='Ref_to_Proto'>record_config_file_error</span></a><span class='Parentheses'>(</span><a href="../../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"could not stat file \"%s\""</span><span class='Delimiter'>, 
</span>                                              <a href="guc-file.l.html#LN960"><span class='Ref_To_Local'>filename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="guc-file.l.html#LN920"><span class='Ref_to_Parameter'>calling_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN920"><span class='Ref_to_Parameter'>calling_lineno</span></a><span class='Delimiter'>, 
</span>                                     <a href="guc-file.l.html#LN922"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN923"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="guc-file.l.html#LN931"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN1030"><span class='Ref_to_Label'>cleanup</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while (de=ReadDir(d,directo... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN929"><span class='Ref_To_Local'>num_filenames</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1013"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/port.h.html#LN439"><span class='Ref_to_Macro'>qsort</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN928"><span class='Ref_To_Local'>filenames</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN929"><span class='Ref_To_Local'>num_filenames</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../../port/qsort.c.html#LN230"><span class='Ref_to_Func'>pg_qsort_strcmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN1013"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="guc-file.l.html#LN1013"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="guc-file.l.html#LN929"><span class='Ref_To_Local'>num_filenames</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN1013"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/utils/guc.h.html#LN144"><span class='Ref_to_Proto'>ParseConfigFile</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN928"><span class='Ref_To_Local'>filenames</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1013"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN920"><span class='Ref_to_Parameter'>calling_file</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN920"><span class='Ref_to_Parameter'>calling_lineno</span></a><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN921"><span class='Ref_to_Parameter'>depth</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN921"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, 
</span>                                 <a href="guc-file.l.html#LN922"><span class='Ref_to_Parameter'>head_p</span></a><span class='Delimiter'>, </span><a href="guc-file.l.html#LN923"><span class='Ref_to_Parameter'>tail_p</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="guc-file.l.html#LN931"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="guc-file.l.html#LN1030"><span class='Ref_to_Label'>cleanup</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <a href="guc-file.l.html#LN931"><span class='Ref_To_Local'>status</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
<a name="LN1030"></a><span class='Label'>cleanup</span><span class='Operator'>: 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN926"><span class='Ref_To_Local'>d</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/storage/fd.h.html#LN93"><span class='Ref_to_Proto'>FreeDir</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN926"><span class='Ref_To_Local'>d</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN925"><span class='Ref_To_Local'>directory</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="guc-file.l.html#LN931"><span class='Ref_To_Local'>status</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ParseConfigDirectory &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Free a list of ConfigVariables, including the names and the values 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN1041"></a><span class='Declare_Function'>FreeConfigVariables</span><span class='Parentheses'>(</span><a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>list</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1043"></a>    <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>*</span><span class='Declare_Local'>item</span><span class='Delimiter'>; 
</span> 
    <a href="guc-file.l.html#LN1043"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN1041"><span class='Ref_to_Parameter'>list</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN1043"><span class='Ref_To_Local'>item</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1048"></a>        <a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>*</span><span class='Declare_Local'>next</span> <span class='Operator'>= </span><a href="guc-file.l.html#LN1043"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN141"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; 
</span> 
        <a href="guc-file.l.html#LN48"><span class='Ref_to_Proto'>FreeConfigVariable</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1043"><span class='Ref_To_Local'>item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="guc-file.l.html#LN1043"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="guc-file.l.html#LN1048"><span class='Ref_To_Local'>next</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Free a single ConfigVariable 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1059"></a><span class='Declare_Function'>FreeConfigVariable</span><span class='Parentheses'>(</span><a href="../../../include/utils/guc.h.html#LN132"><span class='Ref_to_Struct'>ConfigVariable</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>item</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN1059"><span class='Ref_to_Parameter'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1059"><span class='Ref_to_Parameter'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN134"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN1059"><span class='Ref_to_Parameter'>item</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value</span><span class='Parentheses'>) 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1059"><span class='Ref_to_Parameter'>item</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN1059"><span class='Ref_to_Parameter'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN136"><span class='Ref_to_Member'>errmsg</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1059"><span class='Ref_to_Parameter'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN136"><span class='Ref_to_Member'>errmsg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN1059"><span class='Ref_to_Parameter'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN137"><span class='Ref_to_Member'>filename</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1059"><span class='Ref_to_Parameter'>item</span></a><span class='Operator'>-&GT;</span><a href="../../../include/utils/guc.h.html#LN137"><span class='Ref_to_Member'>filename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1059"><span class='Ref_to_Parameter'>item</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *      scanstr 
 * 
 * Strip the quotes surrounding the given string, and collapse any embedded 
 * '' sequences and backslash escapes. 
 * 
 * the string returned is palloc'd and should eventually be pfree'd by the 
 * caller. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN1083"></a><span class='Declare_Function'>GUC_scanstr</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1085"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>newStr</span><span class='Delimiter'>; 
</span><a name="LN1086"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span><span class='Delimiter'>, 
</span><a name="LN1087"></a>                <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN1088"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\''</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN1086"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1086"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>&GT;= </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1086"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\''</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip the leading quote; we'll handle the trailing quote below */ 
</span>    <a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Operator'>++</span><span class='Delimiter'>, </span><a href="guc-file.l.html#LN1086"><span class='Ref_To_Local'>len</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Since len still includes trailing quote, this is enough space */ 
</span>    <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1086"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="guc-file.l.html#LN1086"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; </span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\\'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <span class='String'>'b'</span><span class='Operator'>: 
</span>                    <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\b'</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'f'</span><span class='Operator'>: 
</span>                    <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\f'</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'n'</span><span class='Operator'>: 
</span>                    <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\n'</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'r'</span><span class='Operator'>: 
</span>                    <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\r'</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'t'</span><span class='Operator'>: 
</span>                    <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\t'</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'0'</span><span class='Operator'>: 
</span>                <span class='Control'>case</span> <span class='String'>'1'</span><span class='Operator'>: 
</span>                <span class='Control'>case</span> <span class='String'>'2'</span><span class='Operator'>: 
</span>                <span class='Control'>case</span> <span class='String'>'3'</span><span class='Operator'>: 
</span>                <span class='Control'>case</span> <span class='String'>'4'</span><span class='Operator'>: 
</span>                <span class='Control'>case</span> <span class='String'>'5'</span><span class='Operator'>: 
</span>                <span class='Control'>case</span> <span class='String'>'6'</span><span class='Operator'>: 
</span>                <span class='Control'>case</span> <span class='String'>'7'</span><span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span><a name="LN1132"></a>                        <span class='Keyword'>int</span>         <span class='Declare_Local'>k</span><span class='Delimiter'>; 
</span><a name="LN1133"></a>                        <span class='Keyword'>long</span>        <span class='Declare_Local'>octVal</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN1132"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                             <a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><a href="guc-file.l.html#LN1132"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT;= </span><span class='String'>'0'</span> <span class='Operator'>&& </span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><a href="guc-file.l.html#LN1132"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>] </span><span class='Operator'>&LT;= </span><span class='String'>'7'</span> <span class='Operator'>&& </span><a href="guc-file.l.html#LN1132"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>&LT; </span><span class='Number'>3</span><span class='Delimiter'>; 
</span>                             <a href="guc-file.l.html#LN1132"><span class='Ref_To_Local'>k</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                            <a href="guc-file.l.html#LN1133"><span class='Ref_To_Local'>octVal</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1133"><span class='Ref_To_Local'>octVal</span></a> <span class='Operator'>&LT;&LT; </span><span class='Number'>3</span><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><a href="guc-file.l.html#LN1132"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>] </span><span class='Operator'>- </span><span class='String'>'0'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+= </span><a href="guc-file.l.html#LN1132"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                        <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Parentheses'>((</span><span class='Keyword'>char</span><span class='Parentheses'>) </span><a href="guc-file.l.html#LN1133"><span class='Ref_To_Local'>octVal</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch s[i] &raquo; </span>                   <span class='Comment_Single_Line'>/* switch */ 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if s[i]=='\\' &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\''</span> <span class='Operator'>&& </span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\''</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* doubled quote becomes just one quote */ 
</span>            <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><span class='Operator'>++</span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="guc-file.l.html#LN1083"><span class='Ref_to_Parameter'>s</span></a><span class='Delimiter'>[</span><a href="guc-file.l.html#LN1087"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0,j=0;i&LT;len;i++ &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* We copied the ending quote to newStr, so replace with \0 */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT;= </span><a href="guc-file.l.html#LN1086"><span class='Ref_To_Local'>len</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>[</span><span class='Operator'>--</span><a href="guc-file.l.html#LN1088"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="guc-file.l.html#LN1085"><span class='Ref_To_Local'>newStr</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end GUC_scanstr &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>