<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\bin\pg_dump\pg_dump.c</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\bin\pg_dump\pg_dump.c</b></p></td>
<td align='right'>
Wed Jun 14 08:26:00 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * pg_dump.c 
 *    pg_dump is a utility for dumping out a postgres database 
 *    into a script file. 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 *  pg_dump will read the system catalogs in a database and dump out a 
 *  script that reproduces the schema in terms of SQL that is understood 
 *  by PostgreSQL 
 * 
 *  Note that pg_dump runs in a transaction-snapshot mode transaction, 
 *  so it sees a consistent snapshot of the database including system 
 *  catalogs. However, it relies in part on various specialized backend 
 *  functions like pg_get_indexdef(), and those things tend to look at 
 *  the currently committed state.  So it is possible to get 'cache 
 *  lookup failed' error if someone performs DDL changes while a dump is 
 *  happening. The window for this sort of thing is from the acquisition 
 *  of the transaction snapshot to getSchemaData() (when pg_dump acquires 
 *  AccessShareLock on every table it intends to dump). It isn't very large, 
 *  but it can happen. 
 * 
 *  http://archives.postgresql.org/pgsql-bugs/2010-02/msg00187.php 
 * 
 * IDENTIFICATION 
 *    src/bin/pg_dump/pg_dump.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres_fe.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;unistd.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;ctype.h&GT;</span> 
<span class='Directive'>#ifdef</span> HAVE_TERMIOS_H 
<span class='Keyword'>#include </span><span class='String'>&LT;termios.h&GT;</span> 
<span class='Directive'>#endif</span> 
 
<span class='Keyword'>#include </span><span class='String'>"getopt_long.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/attnum.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/sysattr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/transam.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_am.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_attribute.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_cast.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_class.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_default_acl.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_largeobject.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_largeobject_metadata.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_proc.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_trigger.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"libpq/libpq-fs.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"dumputils.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parallel.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"pg_backup_db.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"pg_backup_utils.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"pg_dump.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"fe_utils/string_utils.h"</span> 
 
 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN66"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>descr</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* comment for an object */ 
</span><a name="LN67"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>classoid</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* object class (catalog OID) */ 
</span><a name="LN68"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>objoid</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* object OID */ 
</span><a name="LN69"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>objsubid</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* subobject (table column #) */ 
</span><a name="LN70"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>CommentItem</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN74"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>provider</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* label provider of this security label */ 
</span><a name="LN75"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>label</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* security label for an object */ 
</span><a name="LN76"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>classoid</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* object class (catalog OID) */ 
</span><a name="LN77"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>objoid</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* object OID */ 
</span><a name="LN78"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>objsubid</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* subobject (table column #) */ 
</span><a name="LN79"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>SecLabelItem</span><span class='Delimiter'>; 
</span> 
<a name="LN81"></a><span class='Control'>typedef</span> <span class='Control'>enum</span> <span class='Declare_Enum'>OidOptions</span> 
<span class='Delimiter'>{ 
</span><a name="LN83"></a>    <span class='Declare_Enum_Const'>zeroAsOpaque</span> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>, 
</span><a name="LN84"></a>    <span class='Declare_Enum_Const'>zeroAsAny</span> <span class='Operator'>= </span><span class='Number'>2</span><span class='Delimiter'>, 
</span><a name="LN85"></a>    <span class='Declare_Enum_Const'>zeroAsStar</span> <span class='Operator'>= </span><span class='Number'>4</span><span class='Delimiter'>, 
</span><a name="LN86"></a>    <span class='Declare_Enum_Const'>zeroAsNone</span> <span class='Operator'>= </span><span class='Number'>8</span> 
<a name="LN87"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>OidOptions</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* global decls */ 
</span><a name="LN90"></a><span class='Keyword'>bool</span>        <span class='Declare_Var'>g_verbose</span><span class='Delimiter'>;</span>          <span class='Comment_Multi_Line'>/* User wants verbose narration of our 
                                 * activities. */ 
</span><a name="LN92"></a><span class='Keyword'>static bool </span><span class='Declare_Var'>dosync</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* Issue fsync() to make dump durable on disk. */ 
</span> 
<span class='Comment_Multi_Line'>/* subquery used to convert user ID (eg, datdba) to user name */ 
</span><a name="LN95"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>username_subquery</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * For 8.0 and earlier servers, pulled from pg_database, for 8.1+ we use 
 * FirstNormalObjectId - 1. 
 */ 
</span><a name="LN101"></a><span class='Keyword'>static </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>  <span class='Declare_Var'>g_last_builtin_oid</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* value of the last builtin oid */ 
</span> 
<span class='Comment_Multi_Line'>/* The specified names/patterns should to match at least one entity */ 
</span><a name="LN104"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>strict_names</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Object inclusion/exclusion lists 
 * 
 * The string lists record the patterns given by command-line switches, 
 * which we then convert to lists of OIDs of matching objects. 
 */ 
</span><a name="LN112"></a><span class='Keyword'>static </span><a href="../../include/fe_utils/simple_list.h.html#LN39"><span class='Ref_to_Struct'>SimpleStringList</span></a> <span class='Declare_Var'>schema_include_patterns</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN113"></a><span class='Keyword'>static </span><a href="../../include/fe_utils/simple_list.h.html#LN25"><span class='Ref_to_Struct'>SimpleOidList</span></a> <span class='Declare_Var'>schema_include_oids</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN114"></a><span class='Keyword'>static </span><a href="../../include/fe_utils/simple_list.h.html#LN39"><span class='Ref_to_Struct'>SimpleStringList</span></a> <span class='Declare_Var'>schema_exclude_patterns</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN115"></a><span class='Keyword'>static </span><a href="../../include/fe_utils/simple_list.h.html#LN25"><span class='Ref_to_Struct'>SimpleOidList</span></a> <span class='Declare_Var'>schema_exclude_oids</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span> 
<a name="LN117"></a><span class='Keyword'>static </span><a href="../../include/fe_utils/simple_list.h.html#LN39"><span class='Ref_to_Struct'>SimpleStringList</span></a> <span class='Declare_Var'>table_include_patterns</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN118"></a><span class='Keyword'>static </span><a href="../../include/fe_utils/simple_list.h.html#LN25"><span class='Ref_to_Struct'>SimpleOidList</span></a> <span class='Declare_Var'>table_include_oids</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN119"></a><span class='Keyword'>static </span><a href="../../include/fe_utils/simple_list.h.html#LN39"><span class='Ref_to_Struct'>SimpleStringList</span></a> <span class='Declare_Var'>table_exclude_patterns</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN120"></a><span class='Keyword'>static </span><a href="../../include/fe_utils/simple_list.h.html#LN25"><span class='Ref_to_Struct'>SimpleOidList</span></a> <span class='Declare_Var'>table_exclude_oids</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN121"></a><span class='Keyword'>static </span><a href="../../include/fe_utils/simple_list.h.html#LN39"><span class='Ref_to_Struct'>SimpleStringList</span></a> <span class='Declare_Var'>tabledata_exclude_patterns</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span><a name="LN122"></a><span class='Keyword'>static </span><a href="../../include/fe_utils/simple_list.h.html#LN25"><span class='Ref_to_Struct'>SimpleOidList</span></a> <span class='Declare_Var'>tabledata_exclude_oids</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>}; 
</span> 
 
<a name="LN125"></a><span class='Keyword'>char</span>        <span class='Declare_Var'>g_opaque_type</span><span class='Delimiter'>[</span><span class='Number'>10</span><span class='Delimiter'>];</span>  <span class='Comment_Single_Line'>/* name for the opaque type */ 
</span> 
<span class='Comment_Multi_Line'>/* placeholders for the delimiters for comments */ 
</span><a name="LN128"></a><span class='Keyword'>char</span>        <span class='Declare_Var'>g_comment_start</span><span class='Delimiter'>[</span><span class='Number'>10</span><span class='Delimiter'>]; 
</span><a name="LN129"></a><span class='Keyword'>char</span>        <span class='Declare_Var'>g_comment_end</span><span class='Delimiter'>[</span><span class='Number'>10</span><span class='Delimiter'>]; 
</span> 
<a name="LN131"></a><span class='Keyword'>static const </span><a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a> <span class='Declare_Var'>nilCatalogId</span> <span class='Operator'>= </span><span class='Delimiter'>{</span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>}; 
</span> 
<a name="LN133"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>help</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>progname</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN134"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>setup_connection</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>AH</span><span class='Delimiter'>, 
</span><a name="LN135"></a>                 <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>dumpencoding</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>dumpsnapshot</span><span class='Delimiter'>, 
</span><a name="LN136"></a>                 <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>use_role</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN137"></a><span class='Keyword'>static </span><a href="pg_backup.h.html#LN36"><span class='Ref_to_Typedef'>ArchiveFormat</span></a> <span class='Declare_Prototype'>parseArchiveFormat</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>format</span><span class='Delimiter'>, </span><a href="../../include/access/xlog.h.html#LN114"><span class='Ref_to_Enum'>ArchiveMode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>mode</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN138"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>expand_schema_name_patterns</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN139"></a>                            <a href="../../include/fe_utils/simple_list.h.html#LN39"><span class='Ref_to_Struct'>SimpleStringList</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>patterns</span><span class='Delimiter'>, 
</span><a name="LN140"></a>                            <a href="../../include/fe_utils/simple_list.h.html#LN25"><span class='Ref_to_Struct'>SimpleOidList</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>oids</span><span class='Delimiter'>, 
</span><a name="LN141"></a>                            <span class='Keyword'>bool </span><span class='Declare_Parameter'>strict_names</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN142"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>expand_table_name_patterns</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN143"></a>                           <a href="../../include/fe_utils/simple_list.h.html#LN39"><span class='Ref_to_Struct'>SimpleStringList</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>patterns</span><span class='Delimiter'>, 
</span><a name="LN144"></a>                           <a href="../../include/fe_utils/simple_list.h.html#LN25"><span class='Ref_to_Struct'>SimpleOidList</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>oids</span><span class='Delimiter'>, 
</span><a name="LN145"></a>                           <span class='Keyword'>bool </span><span class='Declare_Parameter'>strict_names</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN146"></a><span class='Keyword'>static </span><a href="pg_dump.h.html#LN142"><span class='Ref_to_Typedef'>NamespaceInfo</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>findNamespace</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>nsoid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN147"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpTableData</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tdinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN148"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>refreshMatViewData</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tdinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN149"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>guessConstraintInheritance</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN150"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpComment</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, 
</span><a name="LN151"></a>            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>namespace</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>owner</span><span class='Delimiter'>, 
</span><a name="LN152"></a>            <a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a> <span class='Declare_Parameter'>catalogId</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>subid</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Declare_Parameter'>dumpId</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN153"></a><span class='Keyword'>static int </span><span class='Declare_Prototype'>findComments</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>classoid</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>objoid</span><span class='Delimiter'>, 
</span><a name="LN154"></a>             <a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>items</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN155"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>collectComments</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>items</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN156"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpSecLabel</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, 
</span><a name="LN157"></a>             <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>namespace</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>owner</span><span class='Delimiter'>, 
</span><a name="LN158"></a>             <a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a> <span class='Declare_Parameter'>catalogId</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>subid</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Declare_Parameter'>dumpId</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN159"></a><span class='Keyword'>static int </span><span class='Declare_Prototype'>findSecLabels</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>classoid</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>objoid</span><span class='Delimiter'>, 
</span><a name="LN160"></a>              <a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>items</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN161"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>collectSecLabels</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>items</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN162"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpDumpableObject</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dobj</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN163"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpNamespace</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN142"><span class='Ref_to_Typedef'>NamespaceInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>nspinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN164"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpExtension</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>extinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN165"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN166"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpBaseType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN167"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpEnumType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN168"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpRangeType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN169"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpUndefinedType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN170"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpDomain</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN171"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpCompositeType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN172"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpCompositeTypeColComments</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN173"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpShellType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN188"><span class='Ref_to_Typedef'>ShellTypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN174"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpProcLang</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN438"><span class='Ref_to_Typedef'>ProcLangInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>plang</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN175"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpFunc</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>finfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN176"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpCast</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN452"><span class='Ref_to_Typedef'>CastInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cast</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN177"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpTransform</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN462"><span class='Ref_to_Typedef'>TransformInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>transform</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN178"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpOpr</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN216"><span class='Ref_to_Typedef'>OprInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>oprinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN179"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpAccessMethod</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN224"><span class='Ref_to_Typedef'>AccessMethodInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>oprinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN180"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpOpclass</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN231"><span class='Ref_to_Typedef'>OpclassInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>opcinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN181"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpOpfamily</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN237"><span class='Ref_to_Typedef'>OpfamilyInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>opfinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN182"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpCollation</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>collinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN183"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpConversion</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN249"><span class='Ref_to_Typedef'>ConvInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>convinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN184"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpRule</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN375"><span class='Ref_to_Typedef'>RuleInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN185"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpAgg</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN210"><span class='Ref_to_Typedef'>AggInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>agginfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN186"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpTrigger</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN386"><span class='Ref_to_Typedef'>TriggerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tginfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN187"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpEventTrigger</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN404"><span class='Ref_to_Typedef'>EventTriggerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>evtinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN188"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpTable</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN189"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpTableSchema</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN190"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpAttrDef</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN335"><span class='Ref_to_Typedef'>AttrDefInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>adinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN191"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpSequence</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN192"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpSequenceData</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tdinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN193"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpIndex</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN352"><span class='Ref_to_Typedef'>IndxInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indxinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN194"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpStatisticsExt</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN368"><span class='Ref_to_Typedef'>StatsExtInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>statsextinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN195"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpConstraint</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>coninfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN196"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpTableConstraintComment</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>coninfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN197"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpTSParser</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN478"><span class='Ref_to_Typedef'>TSParserInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>prsinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN198"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpTSDictionary</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN488"><span class='Ref_to_Typedef'>TSDictInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dictinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN199"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpTSTemplate</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN496"><span class='Ref_to_Typedef'>TSTemplateInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tmplinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN200"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpTSConfig</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN503"><span class='Ref_to_Typedef'>TSConfigInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cfginfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN201"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpForeignDataWrapper</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN510"><span class='Ref_to_Typedef'>FdwInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fdwinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN202"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpForeignServer</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN523"><span class='Ref_to_Typedef'>ForeignServerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>srvinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN203"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpUserMappings</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN204"></a>                 <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>servername</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>namespace</span><span class='Delimiter'>, 
</span><a name="LN205"></a>                 <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>owner</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a> <span class='Declare_Parameter'>catalogId</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Declare_Parameter'>dumpId</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN206"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpDefaultACL</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN537"><span class='Ref_to_Typedef'>DefaultACLInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>daclinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN208"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpACL</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a> <span class='Declare_Parameter'>objCatId</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Declare_Parameter'>objDumpId</span><span class='Delimiter'>, 
</span><a name="LN209"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>name</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>subname</span><span class='Delimiter'>, 
</span><a name="LN210"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>tag</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>nspname</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>owner</span><span class='Delimiter'>, 
</span><a name="LN211"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>acls</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>racls</span><span class='Delimiter'>, 
</span><a name="LN212"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>initacls</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>initracls</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN214"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>getDependencies</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN215"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>BuildArchiveDependencies</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN216"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>findDumpableDependencies</span><span class='Parentheses'>(</span><a href="pg_backup_archiver.h.html#LN119"><span class='Ref_to_Typedef'>ArchiveHandle</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>AH</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dobj</span><span class='Delimiter'>, 
</span><a name="LN217"></a>                         <a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>dependencies</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>nDeps</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>allocDeps</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN219"></a><span class='Keyword'>static </span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>createBoundaryObjects</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN220"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>addBoundaryDependencies</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>dobjs</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numObjs</span><span class='Delimiter'>, 
</span><a name="LN221"></a>                        <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>boundaryObjs</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN223"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>getDomainConstraints</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN224"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>getTableData</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dopt</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>oids</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>relkind</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN225"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>makeTableDataInfo</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dopt</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>oids</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN226"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>buildMatViewRefreshDependencies</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN227"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>getTableDataFKConstraints</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN228"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>format_function_arguments</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>finfo</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>funcargs</span><span class='Delimiter'>, 
</span><a name="LN229"></a>                          <span class='Keyword'>bool </span><span class='Declare_Parameter'>is_agg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN230"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>format_function_arguments_old</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN231"></a>                              <a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>finfo</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nallargs</span><span class='Delimiter'>, 
</span><a name="LN232"></a>                              <span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>allargtypes</span><span class='Delimiter'>, 
</span><a name="LN233"></a>                              <span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>argmodes</span><span class='Delimiter'>, 
</span><a name="LN234"></a>                              <span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>argnames</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN235"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>format_function_signature</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN236"></a>                          <a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>finfo</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>honor_quotes</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN237"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>convertRegProcReference</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN238"></a>                        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>proc</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN239"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>convertOperatorReference</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>opr</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN240"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>convertTSFunction</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcOid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN241"></a><span class='Keyword'>static </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>  <span class='Declare_Prototype'>findLastBuiltinOid_V71</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>const </span><span class='Declare_Parameter'>char</span> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN242"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>selectSourceSchema</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>schemaName</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN243"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>getFormattedTypeName</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>oid</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN81"><span class='Ref_to_Enum'>OidOptions</span></a> <span class='Declare_Parameter'>opts</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN244"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>getBlobs</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN245"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpBlob</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN548"><span class='Ref_to_Typedef'>BlobInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>binfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN246"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>dumpBlobs</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>arg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN247"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpPolicy</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN564"><span class='Ref_to_Typedef'>PolicyInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>polinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN248"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpPublication</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN579"><span class='Ref_to_Typedef'>PublicationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pubinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN249"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpPublicationTable</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN593"><span class='Ref_to_Typedef'>PublicationRelInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pubrinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN250"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpSubscription</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN603"><span class='Ref_to_Typedef'>SubscriptionInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subinfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN251"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpDatabase</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>AH</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN252"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpEncoding</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>AH</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN253"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>dumpStdStrings</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>AH</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN254"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>binary_upgrade_set_type_oids_by_type_oid</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN255"></a>                                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>upgrade_buffer</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>pg_type_oid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN256"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>binary_upgrade_set_type_oids_by_rel_oid</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN257"></a>                                 <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>upgrade_buffer</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>pg_rel_oid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN258"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>binary_upgrade_set_pg_class_oids</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN259"></a>                                 <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>upgrade_buffer</span><span class='Delimiter'>, 
</span><a name="LN260"></a>                                 <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>pg_class_oid</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>is_index</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN261"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>binary_upgrade_extension_member</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>upgrade_buffer</span><span class='Delimiter'>, 
</span><a name="LN262"></a>                                <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dobj</span><span class='Delimiter'>, 
</span><a name="LN263"></a>                                <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>objlabel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN264"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Prototype'>getAttrName</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>attrnum</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tblInfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN265"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Prototype'>fmtCopyColumnList</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ti</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>buffer</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN266"></a><span class='Keyword'>static bool </span><span class='Declare_Prototype'>nonemptyReloptions</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>reloptions</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN267"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>appendReloptionsArrayAH</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>buffer</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>reloptions</span><span class='Delimiter'>, 
</span><a name="LN268"></a>                        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>prefix</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN269"></a><span class='Keyword'>static char </span><span class='Operator'>*</span><span class='Declare_Prototype'>get_synchronized_snapshot</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN270"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>setupDumpWorker</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>AHX</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Keyword'>int 
</span><a name="LN274"></a><span class='Declare_Function'>main</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>argc</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>argv</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN276"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>c</span><span class='Delimiter'>; 
</span><a name="LN277"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>filename</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN278"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>format</span> <span class='Operator'>= </span><span class='String'>"p"</span><span class='Delimiter'>; 
</span><a name="LN279"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tblinfo</span><span class='Delimiter'>; 
</span><a name="LN280"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numTables</span><span class='Delimiter'>; 
</span><a name="LN281"></a>    <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>**</span><span class='Declare_Local'>dobjs</span><span class='Delimiter'>; 
</span><a name="LN282"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numObjs</span><span class='Delimiter'>; 
</span><a name="LN283"></a>    <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>boundaryObjs</span><span class='Delimiter'>; 
</span><a name="LN284"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN285"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>optindex</span><span class='Delimiter'>; 
</span><a name="LN286"></a>    <a href="pg_backup.h.html#LN60"><span class='Ref_to_Typedef'>RestoreOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ropt</span><span class='Delimiter'>; 
</span><a name="LN287"></a>    <a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>fout</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* the script file */ 
</span><a name="LN288"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>dumpencoding</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN289"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>dumpsnapshot</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN290"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>use_role</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN291"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numWorkers</span> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN292"></a>    <a href="pg_backup.h.html#LN29"><span class='Ref_to_Enum'>trivalue</span></a>    <span class='Declare_Local'>prompt_password</span> <span class='Operator'>= </span><a href="pg_backup.h.html#LN31"><span class='Ref_to_EnumConst'>TRI_DEFAULT</span></a><span class='Delimiter'>; 
</span><a name="LN293"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>compressLevel</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN294"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>plainText</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN295"></a>    <a href="pg_backup.h.html#LN36"><span class='Ref_to_Typedef'>ArchiveFormat</span></a> <span class='Declare_Local'>archiveFormat</span> <span class='Operator'>= </span><a href="pg_backup.h.html#LN38"><span class='Ref_to_EnumConst'>archUnknown</span></a><span class='Delimiter'>; 
</span><a name="LN296"></a>    <a href="../../include/access/xlog.h.html#LN114"><span class='Ref_to_Enum'>ArchiveMode</span></a> <span class='Declare_Local'>archiveMode</span><span class='Delimiter'>; 
</span> 
<a name="LN298"></a>    <span class='Keyword'>static </span><a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Declare_Local'>dopt</span><span class='Delimiter'>; 
</span> 
<a name="LN300"></a>    <span class='Keyword'>static </span><span class='Control'>struct</span> <a href="../../include/getopt_long.h.html#LN15"><span class='Ref_to_Struct'>option</span></a> <span class='Declare_Local'>long_options</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>        <span class='Delimiter'>{</span><span class='String'>"data-only"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'a'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"blobs"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'b'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-blobs"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'B'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"clean"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'c'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"create"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'C'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"dbname"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'d'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"file"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'f'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"format"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'F'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"host"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'h'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"jobs"</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'j'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-reconnect"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'R'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"oids"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'o'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-owner"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'O'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"port"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'p'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"schema"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'n'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"exclude-schema"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'N'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"schema-only"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'s'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"superuser"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'S'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"table"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'t'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"exclude-table"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'T'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-password"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'w'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"password"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'W'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"username"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'U'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"verbose"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'v'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-privileges"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'x'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-acl"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'x'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"compress"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'Z'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"encoding"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'E'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"help"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'?'</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"version"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>'V'</span><span class='Delimiter'>}, 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * the following options don't have an equivalent short option letter 
         */ 
</span>        <span class='Delimiter'>{</span><span class='String'>"attribute-inserts"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN146"><span class='Ref_to_Member'>column_inserts</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"binary-upgrade"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"column-inserts"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN146"><span class='Ref_to_Member'>column_inserts</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"disable-dollar-quoting"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN144"><span class='Ref_to_Member'>disable_dollar_quoting</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"disable-triggers"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN155"><span class='Ref_to_Member'>disable_triggers</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"enable-row-security"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN158"><span class='Ref_to_Member'>enable_row_security</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"exclude-table-data"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"if-exists"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN147"><span class='Ref_to_Member'>if_exists</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"inserts"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN145"><span class='Ref_to_Member'>dump_inserts</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"lock-wait-timeout"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-tablespaces"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN156"><span class='Ref_to_Member'>outputNoTablespaces</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"quote-all-identifiers"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="../../fe_utils/string_utils.c.html#LN27"><span class='Ref_to_Global_Var'>quote_all_identifiers</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"role"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"section"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>5</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"serializable-deferrable"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN153"><span class='Ref_to_Member'>serializable_deferrable</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"snapshot"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN24"><span class='Ref_to_Const'>required_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>6</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"strict-names"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN104"><span class='Ref_to_Global_Var'>strict_names</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"use-set-session-authorization"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN157"><span class='Ref_to_Member'>use_setsessauth</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-publications"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN149"><span class='Ref_to_Member'>no_publications</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-security-labels"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN148"><span class='Ref_to_Member'>no_security_labels</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-synchronized-snapshots"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN151"><span class='Ref_to_Member'>no_synchronized_snapshots</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-unlogged-table-data"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN152"><span class='Ref_to_Member'>no_unlogged_table_data</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-subscriptions"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN150"><span class='Ref_to_Member'>no_subscriptions</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>}, 
</span>        <span class='Delimiter'>{</span><span class='String'>"no-sync"</span><span class='Delimiter'>, </span><a href="../../include/getopt_long.h.html#LN23"><span class='Ref_to_Const'>no_argument</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>7</span><span class='Delimiter'>}, 
</span> 
        <span class='Delimiter'>{</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>} 
</span>    <span class='Delimiter'>}; 
</span> 
    <a href="../../include/port.h.html#LN93"><span class='Ref_to_Proto'>set_pglocale_pgservice</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], </span><a href="../../include/c.h.html#LN1009"><span class='Ref_to_Macro'>PG_TEXTDOMAIN</span></a><span class='Parentheses'>(</span><span class='String'>"pg_dump"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Initialize what we need for parallel execution, especially for thread 
     * support on Windows. 
     */ 
</span>    <a href="parallel.h.html#LN52"><span class='Ref_to_Proto'>init_parallel_dump_utils</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN128"><span class='Ref_to_Global_Var'>g_comment_start</span></a><span class='Delimiter'>, </span><span class='String'>"-- "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN129"><span class='Ref_to_Global_Var'>g_comment_end</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <a href="../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN125"><span class='Ref_to_Global_Var'>g_opaque_type</span></a><span class='Delimiter'>, </span><span class='String'>"opaque"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a> <span class='Operator'>= </span><a href="../../include/port.h.html#LN49"><span class='Ref_to_Proto'>get_progname</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argc</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><span class='String'>"--help"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><span class='String'>"-?"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../scripts/pg_isready.c.html#LN16"><span class='Ref_to_Proto'>help</span></a><span class='Parentheses'>(</span><a href="../pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><span class='String'>"--version"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><span class='String'>"-V"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            puts<span class='Parentheses'>(</span><span class='String'>"pg_dump (PostgreSQL) "</span> PG_VERSION<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_backup_archiver.c.html#LN133"><span class='Ref_to_Func'>InitDumpOptions</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="pg_dump.c.html#LN276"><span class='Ref_To_Local'>c</span></a> <span class='Operator'>= </span><a href="../../include/getopt_long.h.html#LN30"><span class='Ref_to_Proto'>getopt_long</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argc</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>, </span><span class='String'>"abBcCd:E:f:F:h:j:n:N:oOp:RsS:t:T:U:vwWxZ:"</span><span class='Delimiter'>, 
</span>                            <a href="pg_dump.c.html#LN300"><span class='Ref_To_Local'>long_options</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN285"><span class='Ref_To_Local'>optindex</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= -</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN276"><span class='Ref_To_Local'>c</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <span class='String'>'a'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Dump data only */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'b'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Dump blobs */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN165"><span class='Ref_to_Member'>outputBlobs</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'B'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Don't dump blobs */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN166"><span class='Ref_to_Member'>dontOutputBlobs</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'c'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* clean (i.e., drop) schema prior to create */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN163"><span class='Ref_to_Member'>outputClean</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'C'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Create DB */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN164"><span class='Ref_to_Member'>outputCreateDB</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'d'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* database name */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN128"><span class='Ref_to_Member'>dbname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'E'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Dump encoding */ 
</span>                <a href="pg_dump.c.html#LN288"><span class='Ref_To_Local'>dumpencoding</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'f'</span><span class='Operator'>: 
</span>                <a href="pg_dump.c.html#LN277"><span class='Ref_To_Local'>filename</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'F'</span><span class='Operator'>: 
</span>                <a href="pg_dump.c.html#LN278"><span class='Ref_To_Local'>format</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'h'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* server host */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN129"><span class='Ref_to_Member'>pghost</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'j'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* number of dump jobs */ 
</span>                <a href="pg_dump.c.html#LN291"><span class='Ref_To_Local'>numWorkers</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'n'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* include schema(s) */ 
</span>                <a href="../../include/fe_utils/simple_list.h.html#LN49"><span class='Ref_to_Proto'>simple_string_list_append</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN112"><span class='Ref_to_Global_Var'>schema_include_patterns</span></a><span class='Delimiter'>, </span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'N'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* exclude schema(s) */ 
</span>                <a href="../../include/fe_utils/simple_list.h.html#LN49"><span class='Ref_to_Proto'>simple_string_list_append</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN114"><span class='Ref_to_Global_Var'>schema_exclude_patterns</span></a><span class='Delimiter'>, </span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'o'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Dump oids */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN132"><span class='Ref_to_Member'>oids</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'O'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Don't reconnect to match owner */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN167"><span class='Ref_to_Member'>outputNoOwner</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'p'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* server port */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN130"><span class='Ref_to_Member'>pgport</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'R'</span><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* no-op, still accepted for backwards compatibility */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'s'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* dump schema only */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN137"><span class='Ref_to_Member'>schemaOnly</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'S'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Username for superuser in plain text output */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN168"><span class='Ref_to_Member'>outputSuperuser</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'t'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* include table(s) */ 
</span>                <a href="../../include/fe_utils/simple_list.h.html#LN49"><span class='Ref_to_Proto'>simple_string_list_append</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN117"><span class='Ref_to_Global_Var'>table_include_patterns</span></a><span class='Delimiter'>, </span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'T'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* exclude table(s) */ 
</span>                <a href="../../include/fe_utils/simple_list.h.html#LN49"><span class='Ref_to_Proto'>simple_string_list_append</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN119"><span class='Ref_to_Global_Var'>table_exclude_patterns</span></a><span class='Delimiter'>, </span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'U'</span><span class='Operator'>: 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN131"><span class='Ref_to_Member'>username</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'v'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* verbose */ 
</span>                <a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'w'</span><span class='Operator'>: 
</span>                <a href="pg_dump.c.html#LN292"><span class='Ref_To_Local'>prompt_password</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN32"><span class='Ref_to_EnumConst'>TRI_NO</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'W'</span><span class='Operator'>: 
</span>                <a href="pg_dump.c.html#LN292"><span class='Ref_To_Local'>prompt_password</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN33"><span class='Ref_to_EnumConst'>TRI_YES</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'x'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* skip ACL dump */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN140"><span class='Ref_to_Member'>aclsSkip</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='String'>'Z'</span><span class='Operator'>:</span>           <span class='Comment_Single_Line'>/* Compression Level */ 
</span>                <a href="pg_dump.c.html#LN293"><span class='Ref_To_Local'>compressLevel</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN293"><span class='Ref_To_Local'>compressLevel</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN293"><span class='Ref_To_Local'>compressLevel</span></a> <span class='Operator'>&GT; </span><span class='Number'>9</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"compression level must be in range 0..9\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* This covers the long options. */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='Number'>2</span><span class='Operator'>:</span>             <span class='Comment_Single_Line'>/* lock-wait-timeout */ 
</span>                <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN141"><span class='Ref_to_Member'>lockWaitTimeout</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='Number'>3</span><span class='Operator'>:</span>             <span class='Comment_Single_Line'>/* SET ROLE */ 
</span>                <a href="pg_dump.c.html#LN290"><span class='Ref_To_Local'>use_role</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='Number'>4</span><span class='Operator'>:</span>             <span class='Comment_Single_Line'>/* exclude table(s) data */ 
</span>                <a href="../../include/fe_utils/simple_list.h.html#LN49"><span class='Ref_to_Proto'>simple_string_list_append</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN121"><span class='Ref_to_Global_Var'>tabledata_exclude_patterns</span></a><span class='Delimiter'>, </span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='Number'>5</span><span class='Operator'>:</span>             <span class='Comment_Single_Line'>/* section */ 
</span>                <a href="pg_backup_utils.h.html#LN29"><span class='Ref_to_Proto'>set_dump_section</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN139"><span class='Ref_to_Member'>dumpSections</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='Number'>6</span><span class='Operator'>:</span>             <span class='Comment_Single_Line'>/* snapshot */ 
</span>                <a href="pg_dump.c.html#LN289"><span class='Ref_To_Local'>dumpsnapshot</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN52"><span class='Ref_to_Global_Var'>optarg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <span class='Number'>7</span><span class='Operator'>:</span>             <span class='Comment_Single_Line'>/* no-sync */ 
</span>                <a href="pg_dumpall.c.html#LN66"><span class='Ref_to_Global_Var'>dosync</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"Try \"%s --help\" for more information.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch c &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while (c=getopt_long(argc,a... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Non-option argument specifies database name as long as it wasn't 
     * already specified with -d / --dbname 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN50"><span class='Ref_to_Global_Var'>optind</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argc</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN128"><span class='Ref_to_Member'>dbname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN128"><span class='Ref_to_Member'>dbname</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><a href="../../port/getopt.c.html#LN50"><span class='Ref_to_Global_Var'>optind</span></a><span class='Operator'>++</span><span class='Delimiter'>]; 
</span> 
    <span class='Comment_Multi_Line'>/* Complain if any arguments remain */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/getopt.c.html#LN50"><span class='Ref_to_Global_Var'>optind</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argc</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"%s: too many command-line arguments (first is \"%s\")\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN274"><span class='Ref_to_Parameter'>argv</span></a><span class='Delimiter'>[</span><a href="../../port/getopt.c.html#LN50"><span class='Ref_to_Global_Var'>optind</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><span class='String'>"Try \"%s --help\" for more information.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../pg_test_timing/pg_test_timing.c.html#LN11"><span class='Ref_to_Global_Var'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* --column-inserts implies --inserts */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN146"><span class='Ref_to_Member'>column_inserts</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN145"><span class='Ref_to_Member'>dump_inserts</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Binary upgrade mode implies dumping sequence data even in schema-only 
     * mode.  This is not exposed as a separate option, but kept separate 
     * internally for clarity. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN170"><span class='Ref_to_Member'>sequence_data</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN137"><span class='Ref_to_Member'>schemaOnly</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"options -s/--schema-only and -a/--data-only cannot be used together\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN163"><span class='Ref_to_Member'>outputClean</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"options -c/--clean and -a/--data-only cannot be used together\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN145"><span class='Ref_to_Member'>dump_inserts</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN132"><span class='Ref_to_Member'>oids</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"options --inserts/--column-inserts and -o/--oids cannot be used together\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"(The INSERT command cannot set OIDs.)\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN147"><span class='Ref_to_Member'>if_exists</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN163"><span class='Ref_to_Member'>outputClean</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"option --if-exists requires option -c/--clean\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Identify archive format to emit */ 
</span>    <a href="pg_dump.c.html#LN295"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN137"><span class='Ref_to_Proto'>parseArchiveFormat</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN278"><span class='Ref_To_Local'>format</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN296"><span class='Ref_To_Local'>archiveMode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* archiveFormat specific setup */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN295"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>== </span><a href="pg_backup.h.html#LN41"><span class='Ref_to_EnumConst'>archNull</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN294"><span class='Ref_To_Local'>plainText</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Custom and directory formats are compressed by default, others not */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN293"><span class='Ref_To_Local'>compressLevel</span></a> <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> HAVE_LIBZ 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN295"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>== </span><a href="pg_backup.h.html#LN39"><span class='Ref_to_EnumConst'>archCustom</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN295"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>== </span><a href="pg_backup.h.html#LN42"><span class='Ref_to_EnumConst'>archDirectory</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN293"><span class='Ref_To_Local'>compressLevel</span></a> <span class='Operator'>= </span><a href="pg_backup_archiver.h.html#LN52"><span class='Ref_to_Const'>Z_DEFAULT_COMPRESSION</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
<span class='Directive'>#endif</span> 
            <a href="pg_dump.c.html#LN293"><span class='Ref_To_Local'>compressLevel</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
<span class='Directive'>#ifndef</span> HAVE_LIBZ 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN293"><span class='Ref_To_Local'>compressLevel</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: requested compression not available in this "</span> 
                  <span class='String'>"installation -- archive will be uncompressed\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN293"><span class='Ref_To_Local'>compressLevel</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
    <span class='Comment_Multi_Line'>/* 
     * On Windows we can only have at most MAXIMUM_WAIT_OBJECTS (= 64 usually) 
     * parallel jobs because that's the maximum limit for the 
     * WaitForMultipleObjects() call. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN291"><span class='Ref_To_Local'>numWorkers</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> 
<span class='Directive'>#ifdef</span> <a href="../../include/c.h.html#LN61"><span class='Ref_to_Const'>WIN32</span></a> 
        <span class='Operator'>|| </span><a href="pg_dump.c.html#LN291"><span class='Ref_To_Local'>numWorkers</span></a> <span class='Operator'>&GT; </span>MAXIMUM_WAIT_OBJECTS 
<span class='Directive'>#endif</span> 
        <span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"invalid number of parallel jobs\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Parallel backup only in the directory archive format so far */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN295"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>!= </span><a href="pg_backup.h.html#LN42"><span class='Ref_to_EnumConst'>archDirectory</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN291"><span class='Ref_To_Local'>numWorkers</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"parallel backup only supported by the directory format\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Open the output file */ 
</span>    <a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a> <span class='Operator'>= </span><a href="pg_backup_archiver.c.html#LN204"><span class='Ref_to_Func'>CreateArchive</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN277"><span class='Ref_To_Local'>filename</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN295"><span class='Ref_To_Local'>archiveFormat</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN293"><span class='Ref_To_Local'>compressLevel</span></a><span class='Delimiter'>, </span><a href="pg_dumpall.c.html#LN66"><span class='Ref_to_Global_Var'>dosync</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN296"><span class='Ref_To_Local'>archiveMode</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN270"><span class='Ref_to_Proto'>setupDumpWorker</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make dump options accessible right away */ 
</span>    <a href="pg_backup_archiver.c.html#LN247"><span class='Ref_to_Func'>SetArchiveOptions</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Register the cleanup hook */ 
</span>    <a href="parallel.c.html#LN343"><span class='Ref_to_Func'>on_exit_close_archive</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Let the archiver know how noisy to be */ 
</span>    <a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN182"><span class='Ref_to_Member'>verbose</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We allow the server to be back to 8.0, and up to any minor release of 
     * our own major version.  (See also version check in pg_dumpall.c.) 
     */ 
</span>    <a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN187"><span class='Ref_to_Member'>minRemoteVersion</span></a> <span class='Operator'>= </span><span class='Number'>80000</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN188"><span class='Ref_to_Member'>maxRemoteVersion</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>PG_VERSION_NUM <span class='Operator'>/ </span><span class='Number'>100</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Number'>100</span> <span class='Operator'>+ </span><span class='Number'>99</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN190"><span class='Ref_to_Member'>numWorkers</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN291"><span class='Ref_To_Local'>numWorkers</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Open the database using the Archiver, so it knows about it. Errors mean 
     * death. 
     */ 
</span>    <a href="pg_backup.h.html#LN239"><span class='Ref_to_Proto'>ConnectDatabase</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN128"><span class='Ref_to_Member'>dbname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN129"><span class='Ref_to_Member'>pghost</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN130"><span class='Ref_to_Member'>pgport</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN131"><span class='Ref_to_Member'>username</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN292"><span class='Ref_To_Local'>prompt_password</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN134"><span class='Ref_to_Proto'>setup_connection</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN288"><span class='Ref_To_Local'>dumpencoding</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN289"><span class='Ref_To_Local'>dumpsnapshot</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN290"><span class='Ref_To_Local'>use_role</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Disable security label support if server version &LT; v9.1.x (prevents 
     * access to nonexistent pg_seclabel catalog) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN148"><span class='Ref_to_Member'>no_security_labels</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * On hot standby slaves, never try to dump unlogged table data, since it 
     * will just throw an error. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN185"><span class='Ref_to_Member'>isStandby</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN152"><span class='Ref_to_Member'>no_unlogged_table_data</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Select the appropriate subquery to convert user IDs to names */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80100</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a> <span class='Operator'>= </span><span class='String'>"SELECT rolname FROM pg_catalog.pg_roles WHERE oid ="</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a> <span class='Operator'>= </span><span class='String'>"SELECT usename FROM pg_catalog.pg_user WHERE usesysid ="</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* check the version for the synchronized snapshots feature */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN291"><span class='Ref_To_Local'>numWorkers</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90200</span> 
        <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN151"><span class='Ref_to_Member'>no_synchronized_snapshots</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>         <span class='String'>"Synchronized snapshots are not supported by this server version.\n"</span> 
          <span class='String'>"Run with --no-synchronized-snapshots instead if you do not need\n"</span> 
                      <span class='String'>"synchronized snapshots.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* check the version when a snapshot is explicitly specified by user */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN289"><span class='Ref_To_Local'>dumpsnapshot</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90200</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>           <span class='String'>"Exported snapshots are not supported by this server version.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Find the last built-in OID, if needed (prior to 8.1) 
     * 
     * With 8.1 and above, we can just use FirstNormalObjectId - 1. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>80100</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN101"><span class='Ref_to_Global_Var'>g_last_builtin_oid</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN241"><span class='Ref_to_Proto'>findLastBuiltinOid_V71</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, 
</span>                                                  <a href="../../interfaces/libpq/libpq-fe.h.html#LN310"><span class='Ref_to_Proto'>PQdb</span></a><span class='Parentheses'>(</span><a href="../pg_basebackup/streamutil.h.html#LN30"><span class='Ref_to_Proto'>GetConnection</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN101"><span class='Ref_to_Global_Var'>g_last_builtin_oid</span></a> <span class='Operator'>= </span><a href="../../include/access/transam.h.html#LN93"><span class='Ref_to_Const'>FirstNormalObjectId</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"last built-in OID is %u\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN101"><span class='Ref_to_Global_Var'>g_last_builtin_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Expand schema selection patterns into OID lists */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN112"><span class='Ref_to_Global_Var'>schema_include_patterns</span></a><span class='Operator'>.</span><a href="../../include/fe_utils/simple_list.h.html#LN41"><span class='Ref_to_Member'>head</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN138"><span class='Ref_to_Proto'>expand_schema_name_patterns</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN112"><span class='Ref_to_Global_Var'>schema_include_patterns</span></a><span class='Delimiter'>, 
</span>                                    <span class='Operator'>&</span><a href="pg_dump.c.html#LN113"><span class='Ref_to_Global_Var'>schema_include_oids</span></a><span class='Delimiter'>, 
</span>                                    <a href="pg_dump.c.html#LN104"><span class='Ref_to_Global_Var'>strict_names</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN113"><span class='Ref_to_Global_Var'>schema_include_oids</span></a><span class='Operator'>.</span><a href="../../include/fe_utils/simple_list.h.html#LN27"><span class='Ref_to_Member'>head</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"no matching schemas were found\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="pg_dump.c.html#LN138"><span class='Ref_to_Proto'>expand_schema_name_patterns</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN114"><span class='Ref_to_Global_Var'>schema_exclude_patterns</span></a><span class='Delimiter'>, 
</span>                                <span class='Operator'>&</span><a href="pg_dump.c.html#LN115"><span class='Ref_to_Global_Var'>schema_exclude_oids</span></a><span class='Delimiter'>, 
</span>                                <span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* non-matching exclusion patterns aren't an error */ 
</span> 
    <span class='Comment_Multi_Line'>/* Expand table selection patterns into OID lists */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN117"><span class='Ref_to_Global_Var'>table_include_patterns</span></a><span class='Operator'>.</span><a href="../../include/fe_utils/simple_list.h.html#LN41"><span class='Ref_to_Member'>head</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN142"><span class='Ref_to_Proto'>expand_table_name_patterns</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN117"><span class='Ref_to_Global_Var'>table_include_patterns</span></a><span class='Delimiter'>, 
</span>                                   <span class='Operator'>&</span><a href="pg_dump.c.html#LN118"><span class='Ref_to_Global_Var'>table_include_oids</span></a><span class='Delimiter'>, 
</span>                                   <a href="pg_dump.c.html#LN104"><span class='Ref_to_Global_Var'>strict_names</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN118"><span class='Ref_to_Global_Var'>table_include_oids</span></a><span class='Operator'>.</span><a href="../../include/fe_utils/simple_list.h.html#LN27"><span class='Ref_to_Member'>head</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"no matching tables were found\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="pg_dump.c.html#LN142"><span class='Ref_to_Proto'>expand_table_name_patterns</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN119"><span class='Ref_to_Global_Var'>table_exclude_patterns</span></a><span class='Delimiter'>, 
</span>                               <span class='Operator'>&</span><a href="pg_dump.c.html#LN120"><span class='Ref_to_Global_Var'>table_exclude_oids</span></a><span class='Delimiter'>, 
</span>                               <span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN142"><span class='Ref_to_Proto'>expand_table_name_patterns</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN121"><span class='Ref_to_Global_Var'>tabledata_exclude_patterns</span></a><span class='Delimiter'>, 
</span>                               <span class='Operator'>&</span><a href="pg_dump.c.html#LN122"><span class='Ref_to_Global_Var'>tabledata_exclude_oids</span></a><span class='Delimiter'>, 
</span>                               <span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* non-matching exclusion patterns aren't an error */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Dumping blobs is the default for dumps where an inclusion switch is not 
     * used (an "include everything" dump).  -B can be used to exclude blobs 
     * from those dumps.  -b can be used to include blobs even when an 
     * inclusion switch is used. 
     * 
     * -s means "schema only" and blobs are data, not schema, so we never 
     * include blobs when -s is used. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN137"><span class='Ref_to_Member'>schemaOnly</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN166"><span class='Ref_to_Member'>dontOutputBlobs</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN165"><span class='Ref_to_Member'>outputBlobs</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now scan the database and create DumpableObject structs for all the 
     * objects we intend to dump. 
     */ 
</span>    <a href="pg_dump.c.html#LN279"><span class='Ref_To_Local'>tblinfo</span></a> <span class='Operator'>= </span><a href="common.c.html#LN84"><span class='Ref_to_Func'>getSchemaData</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN280"><span class='Ref_To_Local'>numTables</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN149"><span class='Ref_to_Proto'>guessConstraintInheritance</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN279"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN280"><span class='Ref_To_Local'>numTables</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN137"><span class='Ref_to_Member'>schemaOnly</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN224"><span class='Ref_to_Proto'>getTableData</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN279"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN280"><span class='Ref_To_Local'>numTables</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN132"><span class='Ref_to_Member'>oids</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN226"><span class='Ref_to_Proto'>buildMatViewRefreshDependencies</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN227"><span class='Ref_to_Proto'>getTableDataFKConstraints</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN137"><span class='Ref_to_Member'>schemaOnly</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN170"><span class='Ref_to_Member'>sequence_data</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN224"><span class='Ref_to_Proto'>getTableData</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN279"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN280"><span class='Ref_To_Local'>numTables</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN132"><span class='Ref_to_Member'>oids</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * In binary-upgrade mode, we do not have to worry about the actual blob 
     * data or the associated metadata that resides in the pg_largeobject and 
     * pg_largeobject_metadata tables, respectivly. 
     * 
     * However, we do need to collect blob information as there may be 
     * comments or other information on blobs that we do need to dump out. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN165"><span class='Ref_to_Member'>outputBlobs</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN244"><span class='Ref_to_Proto'>getBlobs</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Collect dependency data to assist in ordering the objects. 
     */ 
</span>    <a href="pg_dump.c.html#LN214"><span class='Ref_to_Proto'>getDependencies</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Lastly, create dummy objects to represent the section boundaries */ 
</span>    <a href="pg_dump.c.html#LN283"><span class='Ref_To_Local'>boundaryObjs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN219"><span class='Ref_to_Proto'>createBoundaryObjects</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get pointers to all the known DumpableObjects */ 
</span>    <a href="pg_dump.h.html#LN644"><span class='Ref_to_Proto'>getDumpableObjects</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN281"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN282"><span class='Ref_To_Local'>numObjs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Add dummy dependencies to enforce the dump section ordering. 
     */ 
</span>    <a href="pg_dump.c.html#LN220"><span class='Ref_to_Proto'>addBoundaryDependencies</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN281"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN282"><span class='Ref_To_Local'>numObjs</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN283"><span class='Ref_To_Local'>boundaryObjs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Sort the objects into a safe dump order (no forward references). 
     * 
     * We rely on dependency information to help us determine a safe order, so 
     * the initial sort is mostly for cosmetic purposes: we sort by name to 
     * ensure that logically identical schemas will dump identically. 
     */ 
</span>    <a href="pg_dump_sort.c.html#LN205"><span class='Ref_to_Func'>sortDumpableObjectsByTypeName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN281"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN282"><span class='Ref_To_Local'>numObjs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If we do a parallel dump, we want the largest tables to go first */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN295"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>== </span><a href="pg_backup.h.html#LN42"><span class='Ref_to_EnumConst'>archDirectory</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN291"><span class='Ref_To_Local'>numWorkers</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="pg_dump_sort.c.html#LN143"><span class='Ref_to_Func'>sortDataAndIndexObjectsBySize</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN281"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN282"><span class='Ref_To_Local'>numObjs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump_sort.c.html#LN307"><span class='Ref_to_Func'>sortDumpableObjects</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN281"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN282"><span class='Ref_To_Local'>numObjs</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN283"><span class='Ref_To_Local'>boundaryObjs</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN283"><span class='Ref_To_Local'>boundaryObjs</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Create archive TOC entries for all the objects to be dumped, in a safe 
     * order. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* First the special ENCODING and STDSTRINGS entries. */ 
</span>    <a href="pg_dump.c.html#LN252"><span class='Ref_to_Proto'>dumpEncoding</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN253"><span class='Ref_to_Proto'>dumpStdStrings</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* The database item is always next, unless we don't want it at all */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN251"><span class='Ref_to_Proto'>dumpDatabase</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Now the rearrangeable objects. */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN284"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN284"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN282"><span class='Ref_To_Local'>numObjs</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN284"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN162"><span class='Ref_to_Proto'>dumpDumpableObject</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN281"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN284"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Set up options info to ensure we dump what we want. 
     */ 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN285"><span class='Ref_to_Proto'>NewRestoreOptions</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN81"><span class='Ref_to_Member'>filename</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN277"><span class='Ref_To_Local'>filename</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* if you change this list, see dumpOptionsFromRestoreOptions */ 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN71"><span class='Ref_to_Member'>dropSchema</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN163"><span class='Ref_to_Member'>outputClean</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN82"><span class='Ref_to_Member'>dataOnly</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN83"><span class='Ref_to_Member'>schemaOnly</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN137"><span class='Ref_to_Member'>schemaOnly</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN75"><span class='Ref_to_Member'>if_exists</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN147"><span class='Ref_to_Member'>if_exists</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN74"><span class='Ref_to_Member'>column_inserts</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN146"><span class='Ref_to_Member'>column_inserts</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN84"><span class='Ref_to_Member'>dumpSections</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN139"><span class='Ref_to_Member'>dumpSections</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN86"><span class='Ref_to_Member'>aclsSkip</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN140"><span class='Ref_to_Member'>aclsSkip</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN69"><span class='Ref_to_Member'>superuser</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN168"><span class='Ref_to_Member'>outputSuperuser</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN62"><span class='Ref_to_Member'>createDB</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN164"><span class='Ref_to_Member'>outputCreateDB</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN63"><span class='Ref_to_Member'>noOwner</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN167"><span class='Ref_to_Member'>outputNoOwner</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN64"><span class='Ref_to_Member'>noTablespace</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN156"><span class='Ref_to_Member'>outputNoTablespaces</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN65"><span class='Ref_to_Member'>disable_triggers</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN155"><span class='Ref_to_Member'>disable_triggers</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN67"><span class='Ref_to_Member'>use_setsessauth</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN157"><span class='Ref_to_Member'>use_setsessauth</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN72"><span class='Ref_to_Member'>disable_dollar_quoting</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN144"><span class='Ref_to_Member'>disable_dollar_quoting</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN73"><span class='Ref_to_Member'>dump_inserts</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN145"><span class='Ref_to_Member'>dump_inserts</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN76"><span class='Ref_to_Member'>no_publications</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN149"><span class='Ref_to_Member'>no_publications</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN77"><span class='Ref_to_Member'>no_security_labels</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN148"><span class='Ref_to_Member'>no_security_labels</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN78"><span class='Ref_to_Member'>no_subscriptions</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN150"><span class='Ref_to_Member'>no_subscriptions</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN87"><span class='Ref_to_Member'>lockWaitTimeout</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN141"><span class='Ref_to_Member'>lockWaitTimeout</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN88"><span class='Ref_to_Member'>include_everything</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN121"><span class='Ref_to_Member'>enable_row_security</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN158"><span class='Ref_to_Member'>enable_row_security</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN122"><span class='Ref_to_Member'>sequence_data</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN170"><span class='Ref_to_Member'>sequence_data</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN123"><span class='Ref_to_Member'>binary_upgrade</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN293"><span class='Ref_To_Local'>compressLevel</span></a> <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN115"><span class='Ref_to_Member'>compression</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN115"><span class='Ref_to_Member'>compression</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN293"><span class='Ref_To_Local'>compressLevel</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN116"><span class='Ref_to_Member'>suppressDumpWarnings</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* We've already shown them */ 
</span> 
    <a href="pg_backup_archiver.c.html#LN247"><span class='Ref_to_Func'>SetArchiveOptions</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN298"><span class='Ref_To_Local'>dopt</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN286"><span class='Ref_To_Local'>ropt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Mark which entries should be output */ 
</span>    <a href="pg_backup_archiver.c.html#LN260"><span class='Ref_to_Func'>ProcessArchiveRestoreOptions</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * The archive's TOC entries are now marked as to which ones will actually 
     * be output, so we can set up their dependency lists properly. This isn't 
     * necessary for plain-text output, though. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN294"><span class='Ref_To_Local'>plainText</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN215"><span class='Ref_to_Proto'>BuildArchiveDependencies</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * And finally we can do the actual output. 
     * 
     * Note: for non-plain-text output formats, the output file is written 
     * inside CloseArchive().  This is, um, bizarre; but not worth changing 
     * right now. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN294"><span class='Ref_To_Local'>plainText</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN272"><span class='Ref_to_Proto'>RestoreArchive</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_backup_archiver.c.html#LN227"><span class='Ref_to_Func'>CloseArchive</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN287"><span class='Ref_To_Local'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end main &raquo; </span> 
 
 
<span class='Keyword'>static void 
</span><a name="LN910"></a><span class='Declare_Function'>help</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>progname</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"%s dumps a database as a text file or to other formats.\n\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN910"><span class='Ref_to_Parameter'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"Usage:\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  %s [OPTION]... [DBNAME]\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN910"><span class='Ref_to_Parameter'>progname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"\nGeneral options:\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -f, --file=FILENAME          output file or directory name\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -F, --format=c|d|t|p         output file format (custom, directory, tar,\n"</span> 
             <span class='String'>"                               plain text (default))\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -j, --jobs=NUM               use this many parallel jobs to dump\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -v, --verbose                verbose mode\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -V, --version                output version information, then exit\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -Z, --compress=0-9           compression level for compressed formats\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --lock-wait-timeout=TIMEOUT  fail after waiting TIMEOUT for a table lock\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --no-sync                    do not wait for changes to be written safely to disk\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -?, --help                   show this help, then exit\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"\nOptions controlling the output content:\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -a, --data-only              dump only the data, not the schema\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -b, --blobs                  include large objects in dump\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -B, --no-blobs               exclude large objects in dump\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -c, --clean                  clean (drop) database objects before recreating\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -C, --create                 include commands to create database in dump\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -E, --encoding=ENCODING      dump the data in encoding ENCODING\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -n, --schema=SCHEMA          dump the named schema(s) only\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -N, --exclude-schema=SCHEMA  do NOT dump the named schema(s)\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -o, --oids                   include OIDs in dump\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -O, --no-owner               skip restoration of object ownership in\n"</span> 
             <span class='String'>"                               plain-text format\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -s, --schema-only            dump only the schema, no data\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -S, --superuser=NAME         superuser user name to use in plain-text format\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -t, --table=TABLE            dump the named table(s) only\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -T, --exclude-table=TABLE    do NOT dump the named table(s)\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -x, --no-privileges          do not dump privileges (grant/revoke)\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --binary-upgrade             for use by upgrade utilities only\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --column-inserts             dump data as INSERT commands with column names\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --disable-dollar-quoting     disable dollar quoting, use SQL standard quoting\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --disable-triggers           disable triggers during data-only restore\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --enable-row-security        enable row security (dump only content user has\n"</span> 
             <span class='String'>"                               access to)\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --exclude-table-data=TABLE   do NOT dump data for the named table(s)\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --if-exists                  use IF EXISTS when dropping objects\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --inserts                    dump data as INSERT commands, rather than COPY\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --no-publications            do not dump publications\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --no-security-labels         do not dump security label assignments\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --no-subscriptions           do not dump subscriptions\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --no-synchronized-snapshots  do not use synchronized snapshots in parallel jobs\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --no-tablespaces             do not dump tablespace assignments\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --no-unlogged-table-data     do not dump unlogged table data\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --quote-all-identifiers      quote all identifiers, even if not key words\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --section=SECTION            dump named section (pre-data, data, or post-data)\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --serializable-deferrable    wait until the dump can run without anomalies\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --snapshot=SNAPSHOT          use given snapshot for the dump\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --strict-names               require table and/or schema include patterns to\n"</span> 
         <span class='String'>"                               match at least one entity each\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --use-set-session-authorization\n"</span> 
             <span class='String'>"                               use SET SESSION AUTHORIZATION commands instead of\n"</span> 
             <span class='String'>"                               ALTER OWNER commands to set ownership\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"\nConnection options:\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -d, --dbname=DBNAME      database to dump\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -h, --host=HOSTNAME      database server host or socket directory\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -p, --port=PORT          database server port number\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -U, --username=NAME      connect as specified database user\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -w, --no-password        never prompt for password\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  -W, --password           force password prompt (should happen automatically)\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"  --role=ROLENAME          do SET ROLE before dump\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"\nIf no database name is supplied, then the PGDATABASE environment\n"</span> 
             <span class='String'>"variable value is used.\n\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../include/port.h.html#LN173"><span class='Ref_to_Macro'>printf</span></a><span class='Parentheses'>(</span>_<span class='Parentheses'>(</span><span class='String'>"Report bugs to &LT;pgsql-bugs@postgresql.org&GT;.\n"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end help &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN985"></a><span class='Declare_Function'>setup_connection</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>AH</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>dumpencoding</span><span class='Delimiter'>, 
</span><a name="LN986"></a>                 <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>dumpsnapshot</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>use_role</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN988"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN989"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN139"><span class='Ref_to_Typedef'>PGconn</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>conn</span> <span class='Operator'>= </span><a href="../pg_basebackup/streamutil.h.html#LN30"><span class='Ref_to_Proto'>GetConnection</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN990"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>std_strings</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Set the client encoding if requested. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>dumpencoding</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN329"><span class='Ref_to_Proto'>PQsetClientEncoding</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN989"><span class='Ref_To_Local'>conn</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>dumpencoding</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"invalid client encoding \"%s\" specified\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>dumpencoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Get the active encoding and the standard_conforming_strings setting, so 
     * we know how to escape strings. 
     */ 
</span>    <a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN195"><span class='Ref_to_Member'>encoding</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN328"><span class='Ref_to_Proto'>PQclientEncoding</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN989"><span class='Ref_To_Local'>conn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN990"><span class='Ref_To_Local'>std_strings</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN319"><span class='Ref_to_Proto'>PQparameterStatus</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN989"><span class='Ref_To_Local'>conn</span></a><span class='Delimiter'>, </span><span class='String'>"standard_conforming_strings"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN196"><span class='Ref_to_Member'>std_strings</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN990"><span class='Ref_To_Local'>std_strings</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN990"><span class='Ref_To_Local'>std_strings</span></a><span class='Delimiter'>, </span><span class='String'>"on"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Set the role if requested.  In a parallel dump worker, we'll be passed 
     * use_role == NULL, but AH-&GT;use_role is already set (if user specified it 
     * originally) and we should use that. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN986"><span class='Ref_to_Parameter'>use_role</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN197"><span class='Ref_to_Member'>use_role</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN986"><span class='Ref_to_Parameter'>use_role</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN197"><span class='Ref_to_Member'>use_role</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set the role if requested */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN986"><span class='Ref_to_Parameter'>use_role</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1022"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1022"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SET ROLE %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN986"><span class='Ref_to_Parameter'>use_role</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1022"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1022"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* save it for possible later use by parallel workers */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN197"><span class='Ref_to_Member'>use_role</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN197"><span class='Ref_to_Member'>use_role</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN986"><span class='Ref_to_Parameter'>use_role</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Set the datestyle to ISO to ensure the dump's portability */ 
</span>    <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"SET DATESTYLE = ISO"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Likewise, avoid using sql_standard intervalstyle */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"SET INTERVALSTYLE = POSTGRES"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Set extra_float_digits so that we can dump float data exactly (given 
     * correctly implemented float I/O code, anyway) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90000</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"SET extra_float_digits TO 3"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"SET extra_float_digits TO 2"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If synchronized scanning is supported, disable it, to prevent 
     * unpredictable changes in row ordering across a dump and reload. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"SET synchronize_seqscans TO off"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Disable timeouts if supported. 
     */ 
</span>    <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"SET statement_timeout = 0"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90300</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"SET lock_timeout = 0"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"SET idle_in_transaction_session_timeout = 0"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Quote all identifiers, if requested. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../fe_utils/string_utils.c.html#LN27"><span class='Ref_to_Global_Var'>quote_all_identifiers</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"SET quote_all_identifiers = true"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Adjust row-security mode, if supported. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90500</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN988"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN158"><span class='Ref_to_Member'>enable_row_security</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"SET row_security = on"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"SET row_security = off"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Start transaction-snapshot mode transaction to dump consistent data. 
     */ 
</span>    <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><span class='String'>"BEGIN"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * To support the combination of serializable_deferrable with the jobs 
         * option we use REPEATABLE READ for the worker connections that are 
         * passed a snapshot.  As long as the snapshot is acquired in a 
         * SERIALIZABLE, READ ONLY, DEFERRABLE transaction, its use within a 
         * REPEATABLE READ transaction provides the appropriate integrity 
         * guarantees.  This is a kluge, but safe for back-patching. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN988"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN153"><span class='Ref_to_Member'>serializable_deferrable</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN191"><span class='Ref_to_Member'>sync_snapshot_id</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, 
</span>                                <span class='String'>"SET TRANSACTION ISOLATION LEVEL "</span> 
                                <span class='String'>"SERIALIZABLE, READ ONLY, DEFERRABLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, 
</span>                                <span class='String'>"SET TRANSACTION ISOLATION LEVEL "</span> 
                                <span class='String'>"REPEATABLE READ, READ ONLY"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, 
</span>                            <span class='String'>"SET TRANSACTION ISOLATION LEVEL "</span> 
                            <span class='String'>"SERIALIZABLE, READ ONLY"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If user specified a snapshot to use, select that.  In a parallel dump 
     * worker, we'll be passed dumpsnapshot == NULL, but AH-&GT;sync_snapshot_id 
     * is already set (if the server can handle it) and we should use that. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN986"><span class='Ref_to_Parameter'>dumpsnapshot</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN191"><span class='Ref_to_Member'>sync_snapshot_id</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN986"><span class='Ref_to_Parameter'>dumpsnapshot</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN191"><span class='Ref_to_Member'>sync_snapshot_id</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1122"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1122"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SET TRANSACTION SNAPSHOT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/fe_utils/string_utils.h.html#LN35"><span class='Ref_to_Proto'>appendStringLiteralConn</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1122"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN191"><span class='Ref_to_Member'>sync_snapshot_id</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN989"><span class='Ref_To_Local'>conn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1122"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1122"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN190"><span class='Ref_to_Member'>numWorkers</span></a> <span class='Operator'>&GT; </span><span class='Number'>1</span> <span class='Operator'>&& 
</span>             <a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90200</span> <span class='Operator'>&& 
</span>             <span class='Operator'>!</span><a href="pg_dump.c.html#LN988"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN151"><span class='Ref_to_Member'>no_synchronized_snapshots</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN185"><span class='Ref_to_Member'>isStandby</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>             <span class='String'>"Synchronized snapshots are not supported on standby servers.\n"</span> 
                          <span class='String'>"Run with --no-synchronized-snapshots instead if you do not need\n"</span> 
                          <span class='String'>"synchronized snapshots.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
        <a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN191"><span class='Ref_to_Member'>sync_snapshot_id</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN269"><span class='Ref_to_Proto'>get_synchronized_snapshot</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN985"><span class='Ref_to_Parameter'>AH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end setup_connection &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* Set up connection for a parallel worker process */ 
</span><span class='Keyword'>static void 
</span><a name="LN1146"></a><span class='Declare_Function'>setupDumpWorker</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>AH</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * We want to re-select all the same values the master connection is 
     * using.  We'll have inherited directly-usable values in 
     * AH-&GT;sync_snapshot_id and AH-&GT;use_role, but we need to translate the 
     * inherited encoding value back to a string to pass to setup_connection. 
     */ 
</span>    <a href="pg_dump.c.html#LN134"><span class='Ref_to_Proto'>setup_connection</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1146"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, 
</span>                     <a href="../../include/mb/pg_wchar.h.html#LN502"><span class='Ref_to_Proto'>pg_encoding_to_char</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1146"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN195"><span class='Ref_to_Member'>encoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN1161"></a><span class='Declare_Function'>get_synchronized_snapshot</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1163"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>query</span> <span class='Operator'>= </span><span class='String'>"SELECT pg_catalog.pg_export_snapshot()"</span><span class='Delimiter'>; 
</span><a name="LN1164"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN1165"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN1165"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1161"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1163"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN1164"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1165"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1165"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN1164"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static </span><a href="pg_backup.h.html#LN36"><span class='Ref_to_Typedef'>ArchiveFormat</span></a> 
<a name="LN1175"></a><span class='Declare_Function'>parseArchiveFormat</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>format</span><span class='Delimiter'>, </span><a href="../../include/access/xlog.h.html#LN114"><span class='Ref_to_Enum'>ArchiveMode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>mode</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1177"></a>    <a href="pg_backup.h.html#LN36"><span class='Ref_to_Typedef'>ArchiveFormat</span></a> <span class='Declare_Local'>archiveFormat</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>mode</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN48"><span class='Ref_to_EnumConst'>archModeWrite</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>format</span></a><span class='Delimiter'>, </span><span class='String'>"a"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>format</span></a><span class='Delimiter'>, </span><span class='String'>"append"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* This is used by pg_dumpall, and is not documented */ 
</span>        <a href="pg_dump.c.html#LN1177"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN41"><span class='Ref_to_EnumConst'>archNull</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>mode</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN47"><span class='Ref_to_EnumConst'>archModeAppend</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>format</span></a><span class='Delimiter'>, </span><span class='String'>"c"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN1177"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN39"><span class='Ref_to_EnumConst'>archCustom</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>format</span></a><span class='Delimiter'>, </span><span class='String'>"custom"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN1177"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN39"><span class='Ref_to_EnumConst'>archCustom</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>format</span></a><span class='Delimiter'>, </span><span class='String'>"d"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN1177"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN42"><span class='Ref_to_EnumConst'>archDirectory</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>format</span></a><span class='Delimiter'>, </span><span class='String'>"directory"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN1177"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN42"><span class='Ref_to_EnumConst'>archDirectory</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>format</span></a><span class='Delimiter'>, </span><span class='String'>"p"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN1177"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN41"><span class='Ref_to_EnumConst'>archNull</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>format</span></a><span class='Delimiter'>, </span><span class='String'>"plain"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN1177"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN41"><span class='Ref_to_EnumConst'>archNull</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>format</span></a><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN1177"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN40"><span class='Ref_to_EnumConst'>archTar</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>format</span></a><span class='Delimiter'>, </span><span class='String'>"tar"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN1177"><span class='Ref_To_Local'>archiveFormat</span></a> <span class='Operator'>= </span><a href="pg_backup.h.html#LN40"><span class='Ref_to_EnumConst'>archTar</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"invalid output format \"%s\" specified\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1175"><span class='Ref_to_Parameter'>format</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="pg_dump.c.html#LN1177"><span class='Ref_To_Local'>archiveFormat</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end parseArchiveFormat &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Find the OIDs of all schemas matching the given list of patterns, 
 * and append them to the given OID list. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1213"></a><span class='Declare_Function'>expand_schema_name_patterns</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN1214"></a>                            <a href="../../include/fe_utils/simple_list.h.html#LN39"><span class='Ref_to_Struct'>SimpleStringList</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>patterns</span><span class='Delimiter'>, 
</span><a name="LN1215"></a>                            <a href="../../include/fe_utils/simple_list.h.html#LN25"><span class='Ref_to_Struct'>SimpleOidList</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>oids</span><span class='Delimiter'>, 
</span><a name="LN1216"></a>                            <span class='Keyword'>bool </span><span class='Declare_Parameter'>strict_names</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1218"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN1219"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN1220"></a>    <a href="../../include/fe_utils/simple_list.h.html#LN31"><span class='Ref_to_Struct'>SimpleStringListCell</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cell</span><span class='Delimiter'>; 
</span><a name="LN1221"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1214"><span class='Ref_to_Parameter'>patterns</span></a><span class='Operator'>-&GT;</span><a href="../../include/fe_utils/simple_list.h.html#LN41"><span class='Ref_to_Member'>head</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* nothing to do */ 
</span> 
    <a href="pg_dump.c.html#LN1218"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * The loop below runs multiple SELECTs might sometimes result in 
     * duplicate entries in the OID list, but we don't care. 
     */ 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1220"><span class='Ref_To_Local'>cell</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1214"><span class='Ref_to_Parameter'>patterns</span></a><span class='Operator'>-&GT;</span><a href="../../include/fe_utils/simple_list.h.html#LN41"><span class='Ref_to_Member'>head</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1220"><span class='Ref_To_Local'>cell</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1220"><span class='Ref_To_Local'>cell</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1220"><span class='Ref_To_Local'>cell</span></a><span class='Operator'>-&GT;</span><a href="../../include/fe_utils/simple_list.h.html#LN33"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1218"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT oid FROM pg_catalog.pg_namespace n\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/fe_utils/string_utils.h.html#LN53"><span class='Ref_to_Proto'>processSQLNamePattern</span></a><span class='Parentheses'>(</span><a href="../pg_basebackup/streamutil.h.html#LN30"><span class='Ref_to_Proto'>GetConnection</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1213"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1218"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1220"><span class='Ref_To_Local'>cell</span></a><span class='Operator'>-&GT;</span><a href="../../include/fe_utils/simple_list.h.html#LN36"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                              <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"n.nspname"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN1219"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1213"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1218"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1216"><span class='Ref_to_Parameter'>strict_names</span></a> <span class='Operator'>&& </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1219"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"no matching schemas were found for pattern \"%s\"\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1220"><span class='Ref_To_Local'>cell</span></a><span class='Operator'>-&GT;</span><a href="../../include/fe_utils/simple_list.h.html#LN36"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1221"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1221"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1219"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1221"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../fe_utils/simple_list.c.html#LN24"><span class='Ref_to_Func'>simple_oid_list_append</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1215"><span class='Ref_to_Parameter'>oids</span></a><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1219"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1221"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1219"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1218"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1218"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end expand_schema_name_patterns &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Find the OIDs of all tables matching the given list of patterns, 
 * and append them to the given OID list. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1261"></a><span class='Declare_Function'>expand_table_name_patterns</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN1262"></a>                           <a href="../../include/fe_utils/simple_list.h.html#LN39"><span class='Ref_to_Struct'>SimpleStringList</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>patterns</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/simple_list.h.html#LN25"><span class='Ref_to_Struct'>SimpleOidList</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>oids</span><span class='Delimiter'>, 
</span><a name="LN1263"></a>                           <span class='Keyword'>bool </span><span class='Declare_Parameter'>strict_names</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1265"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN1266"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN1267"></a>    <a href="../../include/fe_utils/simple_list.h.html#LN31"><span class='Ref_to_Struct'>SimpleStringListCell</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cell</span><span class='Delimiter'>; 
</span><a name="LN1268"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1262"><span class='Ref_to_Parameter'>patterns</span></a><span class='Operator'>-&GT;</span><a href="../../include/fe_utils/simple_list.h.html#LN41"><span class='Ref_to_Member'>head</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* nothing to do */ 
</span> 
    <a href="pg_dump.c.html#LN1265"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * this might sometimes result in duplicate entries in the OID list, but 
     * we don't care. 
     */ 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1267"><span class='Ref_To_Local'>cell</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1262"><span class='Ref_to_Parameter'>patterns</span></a><span class='Operator'>-&GT;</span><a href="../../include/fe_utils/simple_list.h.html#LN41"><span class='Ref_to_Member'>head</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1267"><span class='Ref_To_Local'>cell</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1267"><span class='Ref_To_Local'>cell</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1267"><span class='Ref_To_Local'>cell</span></a><span class='Operator'>-&GT;</span><a href="../../include/fe_utils/simple_list.h.html#LN33"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1265"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT c.oid"</span> 
                          <span class='String'>"\nFROM pg_catalog.pg_class c"</span> 
        <span class='String'>"\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace"</span> 
               <span class='String'>"\nWHERE c.relkind in ('%c', '%c', '%c', '%c', '%c', '%c')\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN167"><span class='Ref_to_Const'>RELKIND_PARTITIONED_TABLE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/fe_utils/string_utils.h.html#LN53"><span class='Ref_to_Proto'>processSQLNamePattern</span></a><span class='Parentheses'>(</span><a href="../pg_basebackup/streamutil.h.html#LN30"><span class='Ref_to_Proto'>GetConnection</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1261"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1265"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1267"><span class='Ref_To_Local'>cell</span></a><span class='Operator'>-&GT;</span><a href="../../include/fe_utils/simple_list.h.html#LN36"><span class='Ref_to_Member'>val</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                              <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"n.nspname"</span><span class='Delimiter'>, </span><span class='String'>"c.relname"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                              <span class='String'>"pg_catalog.pg_table_is_visible(c.oid)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN1266"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1261"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1265"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1263"><span class='Ref_to_Parameter'>strict_names</span></a> <span class='Operator'>&& </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1266"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"no matching tables were found for pattern \"%s\"\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1267"><span class='Ref_To_Local'>cell</span></a><span class='Operator'>-&GT;</span><a href="../../include/fe_utils/simple_list.h.html#LN36"><span class='Ref_to_Member'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1268"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1268"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1266"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1268"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../fe_utils/simple_list.c.html#LN24"><span class='Ref_to_Func'>simple_oid_list_append</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1262"><span class='Ref_to_Parameter'>oids</span></a><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1266"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1268"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1266"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1265"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for cell=patterns-&GT;head;c... &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1265"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end expand_table_name_patterns &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * checkExtensionMembership 
 *      Determine whether object is an extension member, and if so, 
 *      record an appropriate dependency and set the object's dump flag. 
 * 
 * It's important to call this for each object that could be an extension 
 * member.  Generally, we integrate this with determining the object's 
 * to-be-dumped-ness, since extension membership overrides other rules for that. 
 * 
 * Returns true if object is an extension member, else false. 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN1322"></a><span class='Declare_Function'>checkExtensionMembership</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dobj</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1324"></a>    <a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ext</span> <span class='Operator'>= </span><a href="pg_dump.h.html#LN658"><span class='Ref_to_Proto'>findOwningExtension</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1322"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1324"><span class='Ref_To_Local'>ext</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN1322"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN136"><span class='Ref_to_Member'>ext_member</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Record dependency so that getDependencies needn't deal with that */ 
</span>    <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1322"><span class='Ref_to_Parameter'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1324"><span class='Ref_To_Local'>ext</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * In 9.6 and above, mark the member object to have any non-initial ACL, 
     * policies, and security labels dumped. 
     * 
     * Note that any initial ACLs (see pg_init_privs) will be removed when we 
     * extract the information about the object.  We don't provide support for 
     * initial policies and security labels and it seems unlikely for those to 
     * ever exist, but we may have to revisit this later. 
     * 
     * Prior to 9.6, we do not include any extension member components. 
     * 
     * In binary upgrades, we still dump all components of the members 
     * individually, since the idea is to exactly reproduce the database 
     * contents rather than replace the extension contents with something 
     * different. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1322"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN1322"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1324"><span class='Ref_To_Local'>ext</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1322"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN1322"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN1322"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1324"><span class='Ref_To_Local'>ext</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a> <span class='Operator'>& </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a> <span class='Operator'>| 
</span>                                                    <a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a> <span class='Operator'>| 
</span>                                                    <a href="pg_dump.h.html#LN96"><span class='Ref_to_Const'>DUMP_COMPONENT_POLICY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end checkExtensionMembership &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * selectDumpableNamespace: policy-setting subroutine 
 *      Mark a namespace as to be dumped or not 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1370"></a><span class='Declare_Function'>selectDumpableNamespace</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN142"><span class='Ref_to_Typedef'>NamespaceInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>nsinfo</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * If specific tables are being dumped, do not dump any complete 
     * namespaces. If specific namespaces are being dumped, dump just those 
     * namespaces. Otherwise, dump all non-system namespaces. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN118"><span class='Ref_to_Global_Var'>table_include_oids</span></a><span class='Operator'>.</span><a href="../../include/fe_utils/simple_list.h.html#LN27"><span class='Ref_to_Member'>head</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN113"><span class='Ref_to_Global_Var'>schema_include_oids</span></a><span class='Operator'>.</span><a href="../../include/fe_utils/simple_list.h.html#LN27"><span class='Ref_to_Member'>head</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= 
</span>            <a href="../../fe_utils/simple_list.c.html#LN43"><span class='Ref_to_Func'>simple_oid_list_member</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN113"><span class='Ref_to_Global_Var'>schema_include_oids</span></a><span class='Delimiter'>, 
</span>                                   <a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>) </span><span class='Operator'>? 
</span>            <a href="pg_dump.h.html#LN98"><span class='Ref_to_Const'>DUMP_COMPONENT_ALL</span></a> <span class='Operator'>: </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span> <span class='Operator'>&& 
</span>             strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * In 9.6 and above, we dump out any ACLs defined in pg_catalog, if 
         * they are interesting (and not the original ACLs which were set at 
         * initdb time, see pg_init_privs). 
         */ 
</span>        <a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strncmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='String'>"pg_"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>             strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='String'>"information_schema"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Other system schemas don't get dumped */ 
</span>        <a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN98"><span class='Ref_to_Const'>DUMP_COMPONENT_ALL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * In any case, a namespace can be excluded by an exclusion switch 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a> <span class='Operator'>&& 
</span>        <a href="../../fe_utils/simple_list.c.html#LN43"><span class='Ref_to_Func'>simple_oid_list_member</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN115"><span class='Ref_to_Global_Var'>schema_exclude_oids</span></a><span class='Delimiter'>, 
</span>                               <a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>))</span> 
        <a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the schema belongs to an extension, allow extension membership to 
     * override the dump decision for the schema itself.  However, this does 
     * not change dump_contains, so this won't change what we do with objects 
     * within the schema.  (If they belong to the extension, they'll get 
     * suppressed by it, otherwise not.) 
     */ 
</span>    <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN1321"><span class='Ref_to_Func'>checkExtensionMembership</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>nsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1370"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end selectDumpableNamespace &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * selectDumpableTable: policy-setting subroutine 
 *      Mark a table as to be dumped or not 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1426"></a><span class='Declare_Function'>selectDumpableTable</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1321"><span class='Ref_to_Func'>checkExtensionMembership</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN1426"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1426"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* extension membership overrides all else */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If specific tables are being dumped, dump just those tables; else, dump 
     * according to the parent namespace's dump flag. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN118"><span class='Ref_to_Global_Var'>table_include_oids</span></a><span class='Operator'>.</span><a href="../../include/fe_utils/simple_list.h.html#LN27"><span class='Ref_to_Member'>head</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN1426"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="../../fe_utils/simple_list.c.html#LN43"><span class='Ref_to_Func'>simple_oid_list_member</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN118"><span class='Ref_to_Global_Var'>table_include_oids</span></a><span class='Delimiter'>, 
</span>                                                   <a href="pg_dump.c.html#LN1426"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>) </span><span class='Operator'>? 
</span>            <a href="pg_dump.h.html#LN98"><span class='Ref_to_Const'>DUMP_COMPONENT_ALL</span></a> <span class='Operator'>: </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN1426"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1426"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * In any case, a table can be excluded by an exclusion switch 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1426"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&& 
</span>        <a href="../../fe_utils/simple_list.c.html#LN43"><span class='Ref_to_Func'>simple_oid_list_member</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN120"><span class='Ref_to_Global_Var'>table_exclude_oids</span></a><span class='Delimiter'>, 
</span>                               <a href="pg_dump.c.html#LN1426"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>))</span> 
        <a href="pg_dump.c.html#LN1426"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end selectDumpableTable &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * selectDumpableType: policy-setting subroutine 
 *      Mark a type as to be dumped or not 
 * 
 * If it's a table's rowtype or an autogenerated array type, we also apply a 
 * special type code to facilitate sorting into the desired order.  (We don't 
 * want to consider those to be ordinary types because that would bring tables 
 * up into the datatype part of the dump order.)  We still set the object's 
 * dump flag; that's not going to cause the dummy type to be dumped, but we 
 * need it so that casts involving such types will be dumped correctly -- see 
 * dumpCast.  This means the flag should be set the same as for the underlying 
 * object (the table or base type). 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1465"></a><span class='Declare_Function'>selectDumpableType</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* skip complex types, except for standalone composite types */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN176"><span class='Ref_to_Member'>typrelid</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>        <a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN177"><span class='Ref_to_Member'>typrelkind</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_class.h.html#LN165"><span class='Ref_to_Const'>RELKIND_COMPOSITE_TYPE</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN1471"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tytable</span> <span class='Operator'>= </span><a href="pg_dump.h.html#LN649"><span class='Ref_to_Proto'>findTableByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN176"><span class='Ref_to_Member'>typrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN67"><span class='Ref_to_EnumConst'>DO_DUMMY_TYPE</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1471"><span class='Ref_To_Local'>tytable</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1471"><span class='Ref_To_Local'>tytable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* skip auto-generated array types */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN179"><span class='Ref_to_Member'>isArray</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN67"><span class='Ref_to_EnumConst'>DO_DUMMY_TYPE</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Fall through to set the dump flag; we assume that the subsequent 
         * rules will do the same thing as they would for the array's base 
         * type.  (We cannot reliably look up the base type here, since 
         * getTypes may not have processed it yet.) 
         */ 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1321"><span class='Ref_to_Func'>checkExtensionMembership</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* extension membership overrides all else */ 
</span> 
    <span class='Comment_Multi_Line'>/* Dump based on if the contents of the namespace are being dumped */ 
</span>    <a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1465"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end selectDumpableType &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * selectDumpableDefaultACL: policy-setting subroutine 
 *      Mark a default ACL as to be dumped or not 
 * 
 * For per-schema default ACLs, dump if the schema is to be dumped. 
 * Otherwise dump if we are dumping "everything".  Note that dataOnly 
 * and aclsSkip are checked separately. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1510"></a><span class='Declare_Function'>selectDumpableDefaultACL</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN537"><span class='Ref_to_Typedef'>DefaultACLInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dinfo</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dopt</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Default ACLs can't be extension members */ 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1510"><span class='Ref_to_Parameter'>dinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Parentheses'>) 
</span>        <span class='Comment_Multi_Line'>/* default ACLs are considered part of the namespace */ 
</span>        <a href="pg_dump.c.html#LN1510"><span class='Ref_to_Parameter'>dinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1510"><span class='Ref_to_Parameter'>dinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN1510"><span class='Ref_to_Parameter'>dinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1510"><span class='Ref_to_Parameter'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a> <span class='Operator'>? 
</span>            <a href="pg_dump.h.html#LN98"><span class='Ref_to_Const'>DUMP_COMPONENT_ALL</span></a> <span class='Operator'>: </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * selectDumpableCast: policy-setting subroutine 
 *      Mark a cast as to be dumped or not 
 * 
 * Casts do not belong to any particular namespace (since they haven't got 
 * names), nor do they have identifiable owners.  To distinguish user-defined 
 * casts from built-in ones, we must resort to checking whether the cast's 
 * OID is in the range reserved for initdb. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1532"></a><span class='Declare_Function'>selectDumpableCast</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN452"><span class='Ref_to_Typedef'>CastInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cast</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1321"><span class='Ref_to_Func'>checkExtensionMembership</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN1532"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1532"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* extension membership overrides all else */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * This would be DUMP_COMPONENT_ACL for from-initdb casts, but they do not 
     * support ACLs currently. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1532"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN101"><span class='Ref_to_Global_Var'>g_last_builtin_oid</span></a><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN1532"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN1532"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1532"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a> <span class='Operator'>? 
</span>            <a href="pg_dump.h.html#LN98"><span class='Ref_to_Const'>DUMP_COMPONENT_ALL</span></a> <span class='Operator'>: </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * selectDumpableProcLang: policy-setting subroutine 
 *      Mark a procedural language as to be dumped or not 
 * 
 * Procedural languages do not belong to any particular namespace.  To 
 * identify built-in languages, we must resort to checking whether the 
 * language's OID is in the range reserved for initdb. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1557"></a><span class='Declare_Function'>selectDumpableProcLang</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN438"><span class='Ref_to_Typedef'>ProcLangInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>plang</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1321"><span class='Ref_to_Func'>checkExtensionMembership</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN1557"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1557"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* extension membership overrides all else */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Only include procedural languages when we are dumping everything. 
     * 
     * For from-initdb procedural languages, only include ACLs, as we do for 
     * the pg_catalog namespace.  We need this because procedural languages do 
     * not live in any namespace. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN1557"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN1557"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1557"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN101"><span class='Ref_to_Global_Var'>g_last_builtin_oid</span></a><span class='Parentheses'>)</span> 
            <a href="pg_dump.c.html#LN1557"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1557"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90600</span> <span class='Operator'>? 
</span>                <a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a> <span class='Operator'>: </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN1557"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN98"><span class='Ref_to_Const'>DUMP_COMPONENT_ALL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end selectDumpableProcLang &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * selectDumpableAccessMethod: policy-setting subroutine 
 *      Mark an access method as to be dumped or not 
 * 
 * Access methods do not belong to any particular namespace.  To identify 
 * built-in access methods, we must resort to checking whether the 
 * method's OID is in the range reserved for initdb. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1590"></a><span class='Declare_Function'>selectDumpableAccessMethod</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN224"><span class='Ref_to_Typedef'>AccessMethodInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>method</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1321"><span class='Ref_to_Func'>checkExtensionMembership</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN1590"><span class='Ref_to_Parameter'>method</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1590"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* extension membership overrides all else */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * This would be DUMP_COMPONENT_ACL for from-initdb access methods, but 
     * they do not support ACLs currently. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1590"><span class='Ref_to_Parameter'>method</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN101"><span class='Ref_to_Global_Var'>g_last_builtin_oid</span></a><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN1590"><span class='Ref_to_Parameter'>method</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN1590"><span class='Ref_to_Parameter'>method</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1590"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a> <span class='Operator'>? 
</span>            <a href="pg_dump.h.html#LN98"><span class='Ref_to_Const'>DUMP_COMPONENT_ALL</span></a> <span class='Operator'>: </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * selectDumpableExtension: policy-setting subroutine 
 *      Mark an extension as to be dumped or not 
 * 
 * Normally, we dump all extensions, or none of them if include_everything 
 * is false (i.e., a --schema or --table switch was given).  However, in 
 * binary-upgrade mode it's necessary to skip built-in extensions, since we 
 * assume those will already be installed in the target database.  We identify 
 * such extensions by their having OIDs in the range reserved for initdb. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1617"></a><span class='Declare_Function'>selectDumpableExtension</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>extinfo</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dopt</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * Use DUMP_COMPONENT_ACL for from-initdb extensions, to allow users to 
     * change permissions on those objects, if they wish to, and have those 
     * changes preserved. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1617"><span class='Ref_to_Parameter'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN1617"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>&LT;= </span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN101"><span class='Ref_to_Global_Var'>g_last_builtin_oid</span></a><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN1617"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1617"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN1617"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1617"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN1617"><span class='Ref_to_Parameter'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a> <span class='Operator'>? </span><a href="pg_dump.h.html#LN98"><span class='Ref_to_Const'>DUMP_COMPONENT_ALL</span></a> <span class='Operator'>: 
</span>            <a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * selectDumpablePublicationTable: policy-setting subroutine 
 *      Mark a publication table as to be dumped or not 
 * 
 * Publication tables have schemas, but those are ignored in decision making, 
 * because publications are only dumped when we are dumping everything. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1640"></a><span class='Declare_Function'>selectDumpablePublicationTable</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dobj</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1321"><span class='Ref_to_Func'>checkExtensionMembership</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1640"><span class='Ref_to_Parameter'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1640"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* extension membership overrides all else */ 
</span> 
    <a href="pg_dump.c.html#LN1640"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1640"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a> <span class='Operator'>? 
</span>        <a href="pg_dump.h.html#LN98"><span class='Ref_to_Const'>DUMP_COMPONENT_ALL</span></a> <span class='Operator'>: </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * selectDumpableObject: policy-setting subroutine 
 *      Mark a generic dumpable object as to be dumped or not 
 * 
 * Use this only for object types without a special-case routine above. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN1656"></a><span class='Declare_Function'>selectDumpableObject</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dobj</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1321"><span class='Ref_to_Func'>checkExtensionMembership</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1656"><span class='Ref_to_Parameter'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1656"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>;</span>                 <span class='Comment_Single_Line'>/* extension membership overrides all else */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Default policy is to dump if parent namespace is dumpable, or for 
     * non-namespace-associated items, dump if we're dumping "everything". 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1656"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><span class='Control'>namespace</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN1656"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1656"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN135"><span class='Ref_to_Member'>dump_contains</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN1656"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1656"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN161"><span class='Ref_to_Member'>include_everything</span></a> <span class='Operator'>? 
</span>            <a href="pg_dump.h.html#LN98"><span class='Ref_to_Const'>DUMP_COMPONENT_ALL</span></a> <span class='Operator'>: </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 *  Dump a table's contents for loading using the COPY command 
 *  - this routine is called by the Archiver when it wants the table 
 *    to be dumped. 
 */ 
</span> 
<span class='Keyword'>static int 
</span><a name="LN1679"></a><span class='Declare_Function'>dumpTableData_copy</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>dcontext</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1681"></a>    <a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tdinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN1679"><span class='Ref_to_Parameter'>dcontext</span></a><span class='Delimiter'>; 
</span><a name="LN1682"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1681"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN347"><span class='Ref_to_Member'>tdtable</span></a><span class='Delimiter'>; 
</span><a name="LN1683"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>classname</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1682"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>; 
</span><a name="LN1684"></a>    <span class='Keyword'>const bool</span>  <span class='Declare_Local'>hasoids</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1682"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN279"><span class='Ref_to_Member'>hasoids</span></a><span class='Delimiter'>; 
</span><a name="LN1685"></a>    <span class='Keyword'>const bool</span>  <span class='Declare_Local'>oids</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1681"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN348"><span class='Ref_to_Member'>oids</span></a><span class='Delimiter'>; 
</span><a name="LN1686"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Note: can't use getThreadLocalPQExpBuffer() here, we're calling fmtId 
     * which uses it already. 
     */ 
</span><a name="LN1692"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>clistBuf</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN1693"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN139"><span class='Ref_to_Typedef'>PGconn</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>conn</span> <span class='Operator'>= </span><a href="../pg_basebackup/streamutil.h.html#LN30"><span class='Ref_to_Proto'>GetConnection</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1679"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1694"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN1695"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ret</span><span class='Delimiter'>; 
</span><a name="LN1696"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>copybuf</span><span class='Delimiter'>; 
</span><a name="LN1697"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>column_list</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"dumping contents of table \"%s.%s\"\n"</span><span class='Delimiter'>, 
</span>                  <a href="pg_dump.c.html#LN1682"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1683"><span class='Ref_To_Local'>classname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Make sure we are in proper schema.  We will qualify the table name 
     * below anyway (in case its name conflicts with a pg_catalog table); but 
     * this ensures reproducible results in case the table contains regproc, 
     * regclass, etc columns. 
     */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1679"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1682"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Specify the column list explicitly so that we have no possibility of 
     * retrieving data in the wrong column order.  (The default column 
     * ordering of COPY will not be what we want in certain corner cases 
     * involving ADD COLUMN and inheritance.) 
     */ 
</span>    <a href="pg_dump.c.html#LN1697"><span class='Ref_To_Local'>column_list</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN265"><span class='Ref_to_Proto'>fmtCopyColumnList</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1682"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1692"><span class='Ref_To_Local'>clistBuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1685"><span class='Ref_To_Local'>oids</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN1684"><span class='Ref_To_Local'>hasoids</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"COPY %s %s WITH OIDS TO stdout;"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN27"><span class='Ref_to_Proto'>fmtQualifiedId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1679"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a><span class='Delimiter'>, 
</span>                                         <a href="pg_dump.c.html#LN1682"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                                         <a href="pg_dump.c.html#LN1683"><span class='Ref_To_Local'>classname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN1697"><span class='Ref_To_Local'>column_list</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1681"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN349"><span class='Ref_to_Member'>filtercond</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Note: this syntax is only supported in 8.2 and up */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"COPY (SELECT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* klugery to get rid of parens in column list */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1697"><span class='Ref_To_Local'>column_list</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>2</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1697"><span class='Ref_To_Local'>column_list</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN46"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"* "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"FROM %s %s) TO stdout;"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN27"><span class='Ref_to_Proto'>fmtQualifiedId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1679"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a><span class='Delimiter'>, 
</span>                                         <a href="pg_dump.c.html#LN1682"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                                         <a href="pg_dump.c.html#LN1683"><span class='Ref_To_Local'>classname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN1681"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN349"><span class='Ref_to_Member'>filtercond</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"COPY %s %s TO stdout;"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN27"><span class='Ref_to_Proto'>fmtQualifiedId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1679"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a><span class='Delimiter'>, 
</span>                                         <a href="pg_dump.c.html#LN1682"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                                         <a href="pg_dump.c.html#LN1683"><span class='Ref_To_Local'>classname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN1697"><span class='Ref_To_Local'>column_list</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="pg_dump.c.html#LN1694"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1679"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN90"><span class='Ref_to_EnumConst'>PGRES_COPY_OUT</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1694"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1692"><span class='Ref_To_Local'>clistBuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN1695"><span class='Ref_To_Local'>ret</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN433"><span class='Ref_to_Proto'>PQgetCopyData</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1693"><span class='Ref_To_Local'>conn</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN1696"><span class='Ref_To_Local'>copybuf</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1695"><span class='Ref_To_Local'>ret</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* done or error */ 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1696"><span class='Ref_To_Local'>copybuf</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_backup.h.html#LN261"><span class='Ref_to_Proto'>WriteData</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1679"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1696"><span class='Ref_To_Local'>copybuf</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1695"><span class='Ref_To_Local'>ret</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN504"><span class='Ref_to_Proto'>PQfreemem</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1696"><span class='Ref_To_Local'>copybuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* ---------- 
         * THROTTLE: 
         * 
         * There was considerable discussion in late July, 2000 regarding 
         * slowing down pg_dump when backing up large tables. Users with both 
         * slow & fast (multi-processor) machines experienced performance 
         * degradation when doing a backup. 
         * 
         * Initial attempts based on sleeping for a number of ms for each ms 
         * of work were deemed too complex, then a simple 'sleep in each loop' 
         * implementation was suggested. The latter failed because the loop 
         * was too tight. Finally, the following was implemented: 
         * 
         * If throttle is non-zero, then 
         *      See how long since the last sleep. 
         *      Work out how long to sleep (based on ratio). 
         *      If sleep is more than 100ms, then 
         *          sleep 
         *          reset timer 
         *      EndIf 
         * EndIf 
         * 
         * where the throttle value was the number of ms to sleep per ms of 
         * work. The calculation was done in each loop. 
         * 
         * Most of the hard work is done in the backend, and this solution 
         * still did not work particularly well: on slow machines, the ratio 
         * was 50:1, and on medium paced machines, 1:1, and on fast 
         * multi-processor machines, it had little or no effect, for reasons 
         * that were unclear. 
         * 
         * Further discussion ensued, and the proposal was dropped. 
         * 
         * For those people who want this feature, it can be implemented using 
         * gettimeofday in each loop, calculating the time since last sleep, 
         * multiplying that by the sleep ratio, then if the result is more 
         * than a preset 'minimum sleep time' (say 100ms), call the 'select' 
         * function to sleep for a subsecond period ie. 
         * 
         * select(0, NULL, NULL, NULL, &tvi); 
         * 
         * This will return after the interval specified in the structure tvi. 
         * Finally, call gettimeofday again to save the 'last sleep time'. 
         * ---------- 
         */ 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;; &raquo; </span> 
    <a href="pg_backup_archiver.c.html#LN1451"><span class='Ref_to_Func'>archprintf</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1679"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"\\.\n\n\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1695"><span class='Ref_To_Local'>ret</span></a> <span class='Operator'>== -</span><span class='Number'>2</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* copy data transfer failed */ 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"Dumping the contents of table \"%s\" failed: PQgetCopyData() failed.\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1683"><span class='Ref_To_Local'>classname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"Error message from server: %s"</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN323"><span class='Ref_to_Proto'>PQerrorMessage</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1693"><span class='Ref_To_Local'>conn</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"The command was: %s\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Check command status and return to normal libpq state */ 
</span>    <a href="pg_dump.c.html#LN1694"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN421"><span class='Ref_to_Proto'>PQgetResult</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1693"><span class='Ref_To_Local'>conn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN466"><span class='Ref_to_Proto'>PQresultStatus</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1694"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN84"><span class='Ref_to_EnumConst'>PGRES_COMMAND_OK</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"Dumping the contents of table \"%s\" failed: PQgetResult() failed.\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1683"><span class='Ref_To_Local'>classname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"Error message from server: %s"</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN323"><span class='Ref_to_Proto'>PQerrorMessage</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1693"><span class='Ref_To_Local'>conn</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"The command was: %s\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1694"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Do this to ensure we've pumped libpq back to idle state */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN421"><span class='Ref_to_Proto'>PQgetResult</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1693"><span class='Ref_To_Local'>conn</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: unexpected extra results during COPY of table \"%s\"\n"</span><span class='Delimiter'>, 
</span>                  <a href="pg_dump.c.html#LN1683"><span class='Ref_To_Local'>classname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1686"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTableData_copy &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Dump table data using INSERT commands. 
 * 
 * Caution: when we restore from an archive file direct to database, the 
 * INSERT commands emitted by this function have to be parsed by 
 * pg_backup_db.c's ExecuteSimpleCommands(), which will not handle comments, 
 * E'' strings, or dollar-quoted strings.  So don't emit anything like that. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN1856"></a><span class='Declare_Function'>dumpTableData_insert</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>dcontext</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1858"></a>    <a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tdinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>dcontext</span></a><span class='Delimiter'>; 
</span><a name="LN1859"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1858"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN347"><span class='Ref_to_Member'>tdtable</span></a><span class='Delimiter'>; 
</span><a name="LN1860"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>classname</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1859"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>; 
</span><a name="LN1861"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN1862"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN1863"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>insertStmt</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1864"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN1865"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tuple</span><span class='Delimiter'>; 
</span><a name="LN1866"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nfields</span><span class='Delimiter'>; 
</span><a name="LN1867"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>field</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Make sure we are in proper schema.  We will qualify the table name 
     * below anyway (in case its name conflicts with a pg_catalog table); but 
     * this ensures reproducible results in case the table contains regproc, 
     * regclass, etc columns. 
     */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1859"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1862"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"DECLARE _pg_dump_cursor CURSOR FOR "</span> 
                      <span class='String'>"SELECT * FROM ONLY %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN27"><span class='Ref_to_Proto'>fmtQualifiedId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a><span class='Delimiter'>, 
</span>                                     <a href="pg_dump.c.html#LN1859"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                                     <a href="pg_dump.c.html#LN1860"><span class='Ref_To_Local'>classname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1858"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN349"><span class='Ref_to_Member'>filtercond</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1862"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1858"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN349"><span class='Ref_to_Member'>filtercond</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1862"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"FETCH 100 FROM _pg_dump_cursor"</span><span class='Delimiter'>, 
</span>                              <a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN1866"><span class='Ref_To_Local'>nfields</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN474"><span class='Ref_to_Proto'>PQnfields</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1865"><span class='Ref_To_Local'>tuple</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1865"><span class='Ref_To_Local'>tuple</span></a> <span class='Operator'>&LT; </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1865"><span class='Ref_To_Local'>tuple</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * First time through, we build as much of the INSERT statement as 
             * possible in "insertStmt", which we can then just print for each 
             * line. If the table happens to have zero columns then this will 
             * be a complete statement, otherwise it will end in "VALUES(" and 
             * be ready to have the row's column values appended. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a><span class='Delimiter'>, </span><span class='String'>"INSERT INTO %s "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1860"><span class='Ref_To_Local'>classname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* corner case for zero-column table */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1866"><span class='Ref_To_Local'>nfields</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a><span class='Delimiter'>, </span><span class='String'>"DEFAULT VALUES;\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* append the list of column names if required */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1861"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN146"><span class='Ref_to_Member'>column_inserts</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN1866"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a><span class='Delimiter'>, 
</span>                                                 <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN476"><span class='Ref_to_Proto'>PQfname</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a><span class='Delimiter'>, </span><span class='String'>") "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1859"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN323"><span class='Ref_to_Member'>needs_override</span></a><span class='Parentheses'>) 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a><span class='Delimiter'>, </span><span class='String'>"OVERRIDING SYSTEM VALUE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a><span class='Delimiter'>, </span><span class='String'>"VALUES ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if insertStmt==NULL &raquo; </span> 
 
            <a href="pg_backup.h.html#LN295"><span class='Ref_to_Proto'>archputs</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* if it is zero-column table then we're done */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1866"><span class='Ref_To_Local'>nfields</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN1866"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="pg_backup.h.html#LN295"><span class='Ref_to_Proto'>archputs</span></a><span class='Parentheses'>(</span><span class='String'>", "</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1865"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="pg_backup.h.html#LN295"><span class='Ref_to_Proto'>archputs</span></a><span class='Parentheses'>(</span><span class='String'>"NULL"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* XXX This code is partially duplicated in ruleutils.c */ 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN481"><span class='Ref_to_Proto'>PQftype</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN22"><span class='Ref_to_Const'>INT2OID</span></a><span class='Operator'>: 
</span>                    <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN24"><span class='Ref_to_Const'>INT4OID</span></a><span class='Operator'>: 
</span>                    <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN21"><span class='Ref_to_Const'>INT8OID</span></a><span class='Operator'>: 
</span>                    <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN27"><span class='Ref_to_Const'>OIDOID</span></a><span class='Operator'>: 
</span>                    <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN38"><span class='Ref_to_Const'>FLOAT4OID</span></a><span class='Operator'>: 
</span>                    <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN39"><span class='Ref_to_Const'>FLOAT8OID</span></a><span class='Operator'>: 
</span>                    <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN58"><span class='Ref_to_Const'>NUMERICOID</span></a><span class='Operator'>: 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Comment_Multi_Line'>/* 
                             * These types are printed without quotes unless 
                             * they contain values that aren't accepted by the 
                             * scanner unquoted (e.g., 'NaN').  Note that 
                             * strtod() and friends might accept NaN, so we 
                             * can't use that to test. 
                             * 
                             * In reality we only need to defend against 
                             * infinity and NaN, so we need not get too crazy 
                             * about pattern matching here. 
                             */ 
</span><a name="LN1973"></a>                            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>s</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1865"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <span class='Control'>if</span> <span class='Parentheses'>(</span>strspn<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1973"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='String'>"0123456789 +-eE."</span><span class='Parentheses'>) </span><span class='Operator'>== </span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1973"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>))</span> 
                                <a href="pg_backup.h.html#LN295"><span class='Ref_to_Proto'>archputs</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1973"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                                <a href="pg_backup_archiver.c.html#LN1451"><span class='Ref_to_Func'>archprintf</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"'%s'"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1973"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="../../include/catalog/pg_type.h.html#LN541"><span class='Ref_to_Const'>BITOID</span></a><span class='Operator'>: 
</span>                    <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN57"><span class='Ref_to_Const'>VARBITOID</span></a><span class='Operator'>: 
</span>                        <a href="pg_backup_archiver.c.html#LN1451"><span class='Ref_to_Func'>archprintf</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"B'%s'"</span><span class='Delimiter'>, 
</span>                                   <a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1865"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="../../interfaces/ecpg/ecpglib/pg_type.h.html#LN17"><span class='Ref_to_Const'>BOOLOID</span></a><span class='Operator'>: 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1865"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                            <a href="pg_backup.h.html#LN295"><span class='Ref_to_Proto'>archputs</span></a><span class='Parentheses'>(</span><span class='String'>"true"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <a href="pg_backup.h.html#LN295"><span class='Ref_to_Proto'>archputs</span></a><span class='Parentheses'>(</span><span class='String'>"false"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <span class='Comment_Multi_Line'>/* All other types are printed as string literals. */ 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1862"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1862"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                              <a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1865"><span class='Ref_To_Local'>tuple</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1867"><span class='Ref_To_Local'>field</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                              <a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="pg_backup.h.html#LN295"><span class='Ref_to_Proto'>archputs</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1862"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch PQftype(res,field) &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for field=0;field&LT;nfields... &raquo; </span> 
            <a href="pg_backup.h.html#LN295"><span class='Ref_to_Proto'>archputs</span></a><span class='Parentheses'>(</span><span class='String'>");\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for tuple=0;tuple&LT;PQntupl... &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1864"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while 1 &raquo; </span> 
 
    <a href="pg_backup.h.html#LN295"><span class='Ref_to_Proto'>archputs</span></a><span class='Parentheses'>(</span><span class='String'>"\n\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1856"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"CLOSE _pg_dump_cursor"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1862"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN1863"><span class='Ref_To_Local'>insertStmt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTableData_insert &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * dumpTableData - 
 *    dump the contents of a single table 
 * 
 * Actually, this just makes an ArchiveEntry for the table contents. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2035"></a><span class='Declare_Function'>dumpTableData</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tdinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2037"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2035"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN2038"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2035"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN347"><span class='Ref_to_Member'>tdtable</span></a><span class='Delimiter'>; 
</span><a name="LN2039"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>copyBuf</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2040"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>clistBuf</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2041"></a>    <a href="pg_backup.h.html#LN231"><span class='Ref_to_Typedef'>DataDumperPtr</span></a> <span class='Declare_Local'>dumpFn</span><span class='Delimiter'>; 
</span><a name="LN2042"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>copyStmt</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN2037"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN145"><span class='Ref_to_Member'>dump_inserts</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Dump/restore using COPY */ 
</span>        <a href="pg_dump.c.html#LN2041"><span class='Ref_To_Local'>dumpFn</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1678"><span class='Ref_to_Func'>dumpTableData_copy</span></a><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* must use 2 steps here 'cause fmtId is nonreentrant */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2039"><span class='Ref_To_Local'>copyBuf</span></a><span class='Delimiter'>, </span><span class='String'>"COPY %s "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2038"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2039"><span class='Ref_To_Local'>copyBuf</span></a><span class='Delimiter'>, </span><span class='String'>"%s %sFROM stdin;\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN265"><span class='Ref_to_Proto'>fmtCopyColumnList</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2038"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2040"><span class='Ref_To_Local'>clistBuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2035"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN348"><span class='Ref_to_Member'>oids</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN2038"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN279"><span class='Ref_to_Member'>hasoids</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"WITH OIDS "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2042"><span class='Ref_To_Local'>copyStmt</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2039"><span class='Ref_To_Local'>copyBuf</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Restore using INSERT */ 
</span>        <a href="pg_dump.c.html#LN2041"><span class='Ref_To_Local'>dumpFn</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN1855"><span class='Ref_to_Func'>dumpTableData_insert</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2042"><span class='Ref_To_Local'>copyStmt</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Note: although the TableDataInfo is a full DumpableObject, we treat its 
     * dependency on its table as "special" and pass it to ArchiveEntry now. 
     * See comments for BuildArchiveDependencies. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2035"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN92"><span class='Ref_to_Const'>DUMP_COMPONENT_DATA</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2035"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2035"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2035"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN2038"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2038"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2038"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"TABLE DATA"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN56"><span class='Ref_to_EnumConst'>SECTION_DATA</span></a><span class='Delimiter'>, 
</span>                     <span class='String'>""</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2042"><span class='Ref_To_Local'>copyStmt</span></a><span class='Delimiter'>, 
</span>                     <span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2038"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN2041"><span class='Ref_To_Local'>dumpFn</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2035"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2039"><span class='Ref_To_Local'>copyBuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2040"><span class='Ref_To_Local'>clistBuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTableData &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * refreshMatViewData - 
 *    load or refresh the contents of a single materialized view 
 * 
 * Actually, this just makes an ArchiveEntry for the REFRESH MATERIALIZED VIEW 
 * statement. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2089"></a><span class='Declare_Function'>refreshMatViewData</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tdinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2091"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2089"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN347"><span class='Ref_to_Member'>tdtable</span></a><span class='Delimiter'>; 
</span><a name="LN2092"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If the materialized view is not flagged as populated, skip this. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN2091"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN268"><span class='Ref_to_Member'>relispopulated</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2092"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2092"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"REFRESH MATERIALIZED VIEW %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2091"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2089"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN92"><span class='Ref_to_Const'>DUMP_COMPONENT_DATA</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2089"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN2089"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>,</span>        <span class='Comment_Single_Line'>/* catalog ID */ 
</span>                     <a href="pg_dump.c.html#LN2089"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* dump ID */ 
</span>                     <a href="pg_dump.c.html#LN2091"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='Comment_Single_Line'>/* Name */ 
</span>                     <a href="pg_dump.c.html#LN2091"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='Comment_Single_Line'>/* Namespace */ 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* Tablespace */ 
</span>                     <a href="pg_dump.c.html#LN2091"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>,</span>   <span class='Comment_Single_Line'>/* Owner */ 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* with oids */ 
</span>                     <span class='String'>"MATERIALIZED VIEW DATA"</span><span class='Delimiter'>,</span>  <span class='Comment_Single_Line'>/* Desc */ 
</span>                     <a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, </span><span class='Comment_Single_Line'>/* Section */ 
</span>                     <a href="pg_dump.c.html#LN2092"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>,</span>   <span class='Comment_Single_Line'>/* Create */ 
</span>                     <span class='String'>""</span><span class='Delimiter'>,</span>        <span class='Comment_Single_Line'>/* Del */ 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* Copy */ 
</span>                     <a href="pg_dump.c.html#LN2089"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN137"><span class='Ref_to_Member'>dependencies</span></a><span class='Delimiter'>, </span><span class='Comment_Single_Line'>/* Deps */ 
</span>                     <a href="pg_dump.c.html#LN2089"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN138"><span class='Ref_to_Member'>nDeps</span></a><span class='Delimiter'>,</span>        <span class='Comment_Single_Line'>/* # Deps */ 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* Dumper */ 
</span>                     <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* Dumper Arg */ 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2092"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end refreshMatViewData &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTableData - 
 *    set up dumpable objects representing the contents of tables 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2130"></a><span class='Declare_Function'>getTableData</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dopt</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>oids</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>relkind</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2132"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2132"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2132"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN2130"><span class='Ref_to_Parameter'>numTables</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2132"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2130"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2132"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN92"><span class='Ref_to_Const'>DUMP_COMPONENT_DATA</span></a> <span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN2130"><span class='Ref_to_Parameter'>relkind</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN2130"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2132"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="pg_dump.c.html#LN2130"><span class='Ref_to_Parameter'>relkind</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN225"><span class='Ref_to_Proto'>makeTableDataInfo</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2130"><span class='Ref_to_Parameter'>dopt</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2130"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2132"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2130"><span class='Ref_to_Parameter'>oids</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Make a dumpable object for the data of this specific table 
 * 
 * Note: we make a TableDataInfo if and only if we are going to dump the 
 * table data; the "dump" flag in such objects isn't used. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2149"></a><span class='Declare_Function'>makeTableDataInfo</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dopt</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>oids</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2151"></a>    <a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tdinfo</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Nothing to do if we already decided to dump the table.  This will 
     * happen for "config" tables. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip VIEWs (no data to dump) */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Skip FOREIGN TABLEs (no data to dump) */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Skip partitioned tables (data in partitions) */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN167"><span class='Ref_to_Const'>RELKIND_PARTITIONED_TABLE</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Don't dump data in unlogged tables, if so requested */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN267"><span class='Ref_to_Member'>relpersistence</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN170"><span class='Ref_to_Const'>RELPERSISTENCE_UNLOGGED</span></a> <span class='Operator'>&& 
</span>        <a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN152"><span class='Ref_to_Member'>no_unlogged_table_data</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Check that the data is not explicitly excluded */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../fe_utils/simple_list.c.html#LN43"><span class='Ref_to_Func'>simple_oid_list_member</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN122"><span class='Ref_to_Global_Var'>tabledata_exclude_oids</span></a><span class='Delimiter'>, 
</span>                               <a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* OK, let's dump it */ 
</span>    <a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN81"><span class='Ref_to_EnumConst'>DO_REFRESH_MATVIEW</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN66"><span class='Ref_to_EnumConst'>DO_SEQUENCE_SET</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN65"><span class='Ref_to_EnumConst'>DO_TABLE_DATA</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Note: use tableoid 0 so that this object won't be mistaken for 
     * something that pg_depend entries apply to. 
     */ 
</span>    <a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>; 
</span>    <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN347"><span class='Ref_to_Member'>tdtable</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN348"><span class='Ref_to_Member'>oids</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>oids</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN349"><span class='Ref_to_Member'>filtercond</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* might get set later */ 
</span>    <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2149"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2151"><span class='Ref_To_Local'>tdinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end makeTableDataInfo &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * The refresh for a materialized view must be dependent on the refresh for 
 * any materialized view that this one is dependent on. 
 * 
 * This must be called after all the objects are created, but before they are 
 * sorted. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2215"></a><span class='Declare_Function'>buildMatViewRefreshDependencies</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2217"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN2218"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN2219"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>, 
</span><a name="LN2220"></a>                <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN2221"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_classid</span><span class='Delimiter'>, 
</span><a name="LN2222"></a>                <span class='Declare_Local'>i_objid</span><span class='Delimiter'>, 
</span><a name="LN2223"></a>                <span class='Declare_Local'>i_refobjid</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* No Mat Views before 9.3. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2215"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90300</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2215"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2217"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2217"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"WITH RECURSIVE w AS "</span> 
                         <span class='String'>"( "</span> 
                    <span class='String'>"SELECT d1.objid, d2.refobjid, c2.relkind AS refrelkind "</span> 
                         <span class='String'>"FROM pg_depend d1 "</span> 
                         <span class='String'>"JOIN pg_class c1 ON c1.oid = d1.objid "</span> 
                         <span class='String'>"AND c1.relkind = "</span> <a href="../../include/c.h.html#LN161"><span class='Ref_to_Macro'>CppAsString2</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>) 
</span>                         <span class='String'>" JOIN pg_rewrite r1 ON r1.ev_class = d1.objid "</span> 
                  <span class='String'>"JOIN pg_depend d2 ON d2.classid = 'pg_rewrite'::regclass "</span> 
                         <span class='String'>"AND d2.objid = r1.oid "</span> 
                         <span class='String'>"AND d2.refobjid &LT;&GT; d1.objid "</span> 
                         <span class='String'>"JOIN pg_class c2 ON c2.oid = d2.refobjid "</span> 
                      <span class='String'>"AND c2.relkind IN ("</span> <a href="../../include/c.h.html#LN161"><span class='Ref_to_Macro'>CppAsString2</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>) </span><span class='String'>","</span> 
                         <a href="../../include/c.h.html#LN161"><span class='Ref_to_Macro'>CppAsString2</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Parentheses'>) </span><span class='String'>") "</span> 
                         <span class='String'>"WHERE d1.classid = 'pg_class'::regclass "</span> 
                         <span class='String'>"UNION "</span> 
                         <span class='String'>"SELECT w.objid, d3.refobjid, c3.relkind "</span> 
                         <span class='String'>"FROM w "</span> 
                         <span class='String'>"JOIN pg_rewrite r3 ON r3.ev_class = w.refobjid "</span> 
                  <span class='String'>"JOIN pg_depend d3 ON d3.classid = 'pg_rewrite'::regclass "</span> 
                         <span class='String'>"AND d3.objid = r3.oid "</span> 
                         <span class='String'>"AND d3.refobjid &LT;&GT; w.refobjid "</span> 
                         <span class='String'>"JOIN pg_class c3 ON c3.oid = d3.refobjid "</span> 
                      <span class='String'>"AND c3.relkind IN ("</span> <a href="../../include/c.h.html#LN161"><span class='Ref_to_Macro'>CppAsString2</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>) </span><span class='String'>","</span> 
                         <a href="../../include/c.h.html#LN161"><span class='Ref_to_Macro'>CppAsString2</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Parentheses'>) </span><span class='String'>") "</span> 
                         <span class='String'>") "</span> 
              <span class='String'>"SELECT 'pg_class'::regclass::oid AS classid, objid, refobjid "</span> 
                         <span class='String'>"FROM w "</span> 
                         <span class='String'>"WHERE refrelkind = "</span> <a href="../../include/c.h.html#LN161"><span class='Ref_to_Macro'>CppAsString2</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2218"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2215"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2217"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2219"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2218"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2221"><span class='Ref_To_Local'>i_classid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2218"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"classid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2222"><span class='Ref_To_Local'>i_objid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2218"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"objid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2223"><span class='Ref_To_Local'>i_refobjid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2218"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"refobjid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2220"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2220"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN2219"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2220"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2273"></a>        <a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a>   <span class='Declare_Local'>objId</span><span class='Delimiter'>; 
</span><a name="LN2274"></a>        <a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a>   <span class='Declare_Local'>refobjId</span><span class='Delimiter'>; 
</span><a name="LN2275"></a>        <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dobj</span><span class='Delimiter'>; 
</span><a name="LN2276"></a>        <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>refdobj</span><span class='Delimiter'>; 
</span><a name="LN2277"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span><span class='Delimiter'>; 
</span><a name="LN2278"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>reftbinfo</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN2273"><span class='Ref_To_Local'>objId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2218"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2220"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2221"><span class='Ref_To_Local'>i_classid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2273"><span class='Ref_To_Local'>objId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2218"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2220"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2222"><span class='Ref_To_Local'>i_objid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2274"><span class='Ref_To_Local'>refobjId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2273"><span class='Ref_To_Local'>objId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2274"><span class='Ref_To_Local'>refobjId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2218"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2220"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2223"><span class='Ref_To_Local'>i_refobjid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN2275"><span class='Ref_To_Local'>dobj</span></a> <span class='Operator'>= </span><a href="common.c.html#LN537"><span class='Ref_to_Func'>findObjectByCatalogId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2273"><span class='Ref_To_Local'>objId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2275"><span class='Ref_To_Local'>dobj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2275"><span class='Ref_To_Local'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>== </span><a href="pg_dump.h.html#LN55"><span class='Ref_to_EnumConst'>DO_TABLE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2277"><span class='Ref_To_Local'>tbinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN2275"><span class='Ref_To_Local'>dobj</span></a><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2277"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2275"><span class='Ref_To_Local'>dobj</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN2277"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2275"><span class='Ref_To_Local'>dobj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2275"><span class='Ref_To_Local'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>== </span><a href="pg_dump.h.html#LN81"><span class='Ref_to_EnumConst'>DO_REFRESH_MATVIEW</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN2276"><span class='Ref_To_Local'>refdobj</span></a> <span class='Operator'>= </span><a href="common.c.html#LN537"><span class='Ref_to_Func'>findObjectByCatalogId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2274"><span class='Ref_To_Local'>refobjId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2276"><span class='Ref_To_Local'>refdobj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2276"><span class='Ref_To_Local'>refdobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>== </span><a href="pg_dump.h.html#LN55"><span class='Ref_to_EnumConst'>DO_TABLE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2278"><span class='Ref_To_Local'>reftbinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN2276"><span class='Ref_To_Local'>refdobj</span></a><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2278"><span class='Ref_To_Local'>reftbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2276"><span class='Ref_To_Local'>refdobj</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN2278"><span class='Ref_To_Local'>reftbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2276"><span class='Ref_To_Local'>refdobj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2276"><span class='Ref_To_Local'>refdobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>== </span><a href="pg_dump.h.html#LN81"><span class='Ref_to_EnumConst'>DO_REFRESH_MATVIEW</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2275"><span class='Ref_To_Local'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2276"><span class='Ref_To_Local'>refdobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN2278"><span class='Ref_To_Local'>reftbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN268"><span class='Ref_to_Member'>relispopulated</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN2277"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN268"><span class='Ref_to_Member'>relispopulated</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2218"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2217"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end buildMatViewRefreshDependencies &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTableDataFKConstraints - 
 *    add dump-order dependencies reflecting foreign key constraints 
 * 
 * This code is executed only in a data-only dump --- in schema+data dumps 
 * we handle foreign key issues by not creating the FK constraints until 
 * after the data is loaded.  In a data-only dump, however, we want to 
 * order the table data objects in such a way that a table's referenced 
 * tables are restored first.  (In the presence of circular references or 
 * self-references this may be impossible; we'll detect and complain about 
 * that during the dependency sorting step.) 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2333"></a><span class='Declare_Function'>getTableDataFKConstraints</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2335"></a>    <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>**</span><span class='Declare_Local'>dobjs</span><span class='Delimiter'>; 
</span><a name="LN2336"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numObjs</span><span class='Delimiter'>; 
</span><a name="LN2337"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Search through all the dumpable objects for FK constraints */ 
</span>    <a href="pg_dump.h.html#LN644"><span class='Ref_to_Proto'>getDumpableObjects</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN2335"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN2336"><span class='Ref_To_Local'>numObjs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2337"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2337"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN2336"><span class='Ref_To_Local'>numObjs</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2337"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2335"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2337"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>== </span><a href="pg_dump.h.html#LN62"><span class='Ref_to_EnumConst'>DO_FK_CONSTRAINT</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2345"></a>            <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cinfo</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN2335"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2337"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN2346"></a>            <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>ftable</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Not interesting unless both tables are to be dumped */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2345"><span class='Ref_To_Local'>cinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN426"><span class='Ref_to_Member'>contable</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>                <a href="pg_dump.c.html#LN2345"><span class='Ref_To_Local'>cinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN426"><span class='Ref_to_Member'>contable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN2346"><span class='Ref_To_Local'>ftable</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN649"><span class='Ref_to_Proto'>findTableByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2345"><span class='Ref_To_Local'>cinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN430"><span class='Ref_to_Member'>confrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2346"><span class='Ref_To_Local'>ftable</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>                <a href="pg_dump.c.html#LN2346"><span class='Ref_To_Local'>ftable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Okay, make referencing table's TABLE_DATA object depend on the 
             * referenced table's TABLE_DATA object. 
             */ 
</span>            <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN2345"><span class='Ref_To_Local'>cinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN426"><span class='Ref_to_Member'>contable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, 
</span>                                <a href="pg_dump.c.html#LN2346"><span class='Ref_To_Local'>ftable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if dobjs[i]-&GT;objType==DO... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numObjs;i++ &raquo; </span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2335"><span class='Ref_To_Local'>dobjs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTableDataFKConstraints &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * guessConstraintInheritance: 
 *  In pre-8.4 databases, we can't tell for certain which constraints 
 *  are inherited.  We assume a CHECK constraint is inherited if its name 
 *  matches the name of any constraint in the parent.  Originally this code 
 *  tried to compare the expression texts, but that can fail for various 
 *  reasons --- for example, if the parent and child tables are in different 
 *  schemas, reverse-listing of function calls may produce different text 
 *  (schema-qualified or not) depending on search path. 
 * 
 *  In 8.4 and up we can rely on the conislocal field to decide which 
 *  constraints must be dumped; much safer. 
 * 
 *  This function assumes all conislocal flags were initialized to TRUE. 
 *  It clears the flag on anything that seems to be inherited. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2386"></a><span class='Declare_Function'>guessConstraintInheritance</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2388"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN2389"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>, 
</span><a name="LN2390"></a>                <span class='Declare_Local'>k</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2388"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2388"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN2386"><span class='Ref_to_Parameter'>numTables</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2388"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2394"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= &</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2386"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2388"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2395"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>numParents</span><span class='Delimiter'>; 
</span><a name="LN2396"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>**</span><span class='Declare_Local'>parents</span><span class='Delimiter'>; 
</span><a name="LN2397"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>parent</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Sequences and views never have parents */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2394"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a> <span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN2394"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Don't bother computing anything for non-target tables, either */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2394"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN2395"><span class='Ref_To_Local'>numParents</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2394"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN328"><span class='Ref_to_Member'>numParents</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2396"><span class='Ref_To_Local'>parents</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2394"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN329"><span class='Ref_to_Member'>parents</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2395"><span class='Ref_To_Local'>numParents</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* nothing to see here, move along */ 
</span> 
        <span class='Comment_Multi_Line'>/* scan for inherited CHECK constraints */ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2389"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2389"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN2394"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN285"><span class='Ref_to_Member'>ncheck</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2389"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN2417"></a>            <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>constr</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN2417"><span class='Ref_To_Local'>constr</span></a> <span class='Operator'>= &</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2394"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN320"><span class='Ref_to_Member'>checkexprs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2389"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2390"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2390"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN2395"><span class='Ref_To_Local'>numParents</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2390"><span class='Ref_To_Local'>k</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN2423"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN2397"><span class='Ref_To_Local'>parent</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2396"><span class='Ref_To_Local'>parents</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2390"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>]; 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2423"><span class='Ref_To_Local'>l</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2423"><span class='Ref_To_Local'>l</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN2397"><span class='Ref_To_Local'>parent</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN285"><span class='Ref_to_Member'>ncheck</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2423"><span class='Ref_To_Local'>l</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN2428"></a>                    <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pconstr</span> <span class='Operator'>= &</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2397"><span class='Ref_To_Local'>parent</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN320"><span class='Ref_to_Member'>checkexprs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2423"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2428"><span class='Ref_To_Local'>pconstr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2417"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="pg_dump.c.html#LN2417"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN434"><span class='Ref_to_Member'>conislocal</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN2417"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN434"><span class='Ref_to_Member'>conislocal</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;tbinfo-&GT;ncheck;... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numTables;i++ &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end guessConstraintInheritance &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * dumpDatabase: 
 *  dump the database definition 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2449"></a><span class='Declare_Function'>dumpDatabase</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2451"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN2452"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>dbQry</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2453"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delQry</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2454"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>creaQry</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2455"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN139"><span class='Ref_to_Typedef'>PGconn</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>conn</span> <span class='Operator'>= </span><a href="../pg_basebackup/streamutil.h.html#LN30"><span class='Ref_to_Proto'>GetConnection</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2456"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN2457"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>, 
</span><a name="LN2458"></a>                <span class='Declare_Local'>i_oid</span><span class='Delimiter'>, 
</span><a name="LN2459"></a>                <span class='Declare_Local'>i_dba</span><span class='Delimiter'>, 
</span><a name="LN2460"></a>                <span class='Declare_Local'>i_encoding</span><span class='Delimiter'>, 
</span><a name="LN2461"></a>                <span class='Declare_Local'>i_collate</span><span class='Delimiter'>, 
</span><a name="LN2462"></a>                <span class='Declare_Local'>i_ctype</span><span class='Delimiter'>, 
</span><a name="LN2463"></a>                <span class='Declare_Local'>i_frozenxid</span><span class='Delimiter'>, 
</span><a name="LN2464"></a>                <span class='Declare_Local'>i_minmxid</span><span class='Delimiter'>, 
</span><a name="LN2465"></a>                <span class='Declare_Local'>i_tablespace</span><span class='Delimiter'>; 
</span><a name="LN2466"></a>    <a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a>   <span class='Declare_Local'>dbCatId</span><span class='Delimiter'>; 
</span><a name="LN2467"></a>    <a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a>      <span class='Declare_Local'>dbDumpId</span><span class='Delimiter'>; 
</span><a name="LN2468"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>datname</span><span class='Delimiter'>, 
</span><a name="LN2469"></a>               <span class='Operator'>*</span><span class='Declare_Local'>dba</span><span class='Delimiter'>, 
</span><a name="LN2470"></a>               <span class='Operator'>*</span><span class='Declare_Local'>encoding</span><span class='Delimiter'>, 
</span><a name="LN2471"></a>               <span class='Operator'>*</span><span class='Declare_Local'>collate</span><span class='Delimiter'>, 
</span><a name="LN2472"></a>               <span class='Operator'>*</span><span class='Declare_Local'>ctype</span><span class='Delimiter'>, 
</span><a name="LN2473"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tablespace</span><span class='Delimiter'>; 
</span><a name="LN2474"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Local'>frozenxid</span><span class='Delimiter'>, 
</span><a name="LN2475"></a>                <span class='Declare_Local'>minmxid</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN310"><span class='Ref_to_Proto'>PQdb</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2455"><span class='Ref_To_Local'>conn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"saving database definition\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get the database owner and parameters from pg_database */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, "</span> 
                          <span class='String'>"(%s datdba) AS dba, "</span> 
                          <span class='String'>"pg_encoding_to_char(encoding) AS encoding, "</span> 
                          <span class='String'>"datcollate, datctype, datfrozenxid, datminmxid, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = dattablespace) AS tablespace, "</span> 
                      <span class='String'>"shobj_description(oid, 'pg_database') AS description "</span> 
 
                          <span class='String'>"FROM pg_database "</span> 
                          <span class='String'>"WHERE datname = "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, "</span> 
                          <span class='String'>"(%s datdba) AS dba, "</span> 
                          <span class='String'>"pg_encoding_to_char(encoding) AS encoding, "</span> 
                      <span class='String'>"datcollate, datctype, datfrozenxid, 0 AS datminmxid, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = dattablespace) AS tablespace, "</span> 
                      <span class='String'>"shobj_description(oid, 'pg_database') AS description "</span> 
 
                          <span class='String'>"FROM pg_database "</span> 
                          <span class='String'>"WHERE datname = "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80200</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, "</span> 
                          <span class='String'>"(%s datdba) AS dba, "</span> 
                          <span class='String'>"pg_encoding_to_char(encoding) AS encoding, "</span> 
                          <span class='String'>"NULL AS datcollate, NULL AS datctype, datfrozenxid, 0 AS datminmxid, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = dattablespace) AS tablespace, "</span> 
                      <span class='String'>"shobj_description(oid, 'pg_database') AS description "</span> 
 
                          <span class='String'>"FROM pg_database "</span> 
                          <span class='String'>"WHERE datname = "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, "</span> 
                          <span class='String'>"(%s datdba) AS dba, "</span> 
                          <span class='String'>"pg_encoding_to_char(encoding) AS encoding, "</span> 
                          <span class='String'>"NULL AS datcollate, NULL AS datctype, datfrozenxid, 0 AS datminmxid, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = dattablespace) AS tablespace "</span> 
                          <span class='String'>"FROM pg_database "</span> 
                          <span class='String'>"WHERE datname = "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2457"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2458"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2459"><span class='Ref_To_Local'>i_dba</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"dba"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2460"><span class='Ref_To_Local'>i_encoding</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"encoding"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2461"><span class='Ref_To_Local'>i_collate</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"datcollate"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2462"><span class='Ref_To_Local'>i_ctype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"datctype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2463"><span class='Ref_To_Local'>i_frozenxid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"datfrozenxid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2464"><span class='Ref_To_Local'>i_minmxid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"datminmxid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2465"><span class='Ref_To_Local'>i_tablespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tablespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2466"><span class='Ref_To_Local'>dbCatId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2457"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2466"><span class='Ref_To_Local'>dbCatId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2458"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2469"><span class='Ref_To_Local'>dba</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2459"><span class='Ref_To_Local'>i_dba</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2470"><span class='Ref_To_Local'>encoding</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2460"><span class='Ref_To_Local'>i_encoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2471"><span class='Ref_To_Local'>collate</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2461"><span class='Ref_To_Local'>i_collate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2472"><span class='Ref_To_Local'>ctype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2462"><span class='Ref_To_Local'>i_ctype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2474"><span class='Ref_To_Local'>frozenxid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2463"><span class='Ref_To_Local'>i_frozenxid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2475"><span class='Ref_To_Local'>minmxid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2464"><span class='Ref_To_Local'>i_minmxid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2473"><span class='Ref_To_Local'>tablespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2465"><span class='Ref_To_Local'>i_tablespace</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE DATABASE %s WITH TEMPLATE = template0"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2470"><span class='Ref_To_Local'>encoding</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><span class='String'>" ENCODING = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2470"><span class='Ref_To_Local'>encoding</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2471"><span class='Ref_To_Local'>collate</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><span class='String'>" LC_COLLATE = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2471"><span class='Ref_To_Local'>collate</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2472"><span class='Ref_To_Local'>ctype</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><span class='String'>" LC_CTYPE = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2472"><span class='Ref_To_Local'>ctype</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2473"><span class='Ref_To_Local'>tablespace</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2473"><span class='Ref_To_Local'>tablespace</span></a><span class='Delimiter'>, </span><span class='String'>"pg_default"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>        <span class='Operator'>!</span><a href="pg_dump.c.html#LN2451"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN156"><span class='Ref_to_Member'>outputNoTablespaces</span></a><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><span class='String'>" TABLESPACE = %s"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2473"><span class='Ref_To_Local'>tablespace</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2451"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, set datfrozenxid and datminmxid.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE pg_catalog.pg_database\n"</span> 
                          <span class='String'>"SET datfrozenxid = '%u', datminmxid = '%u'\n"</span> 
                          <span class='String'>"WHERE datname = "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN2474"><span class='Ref_To_Local'>frozenxid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2475"><span class='Ref_To_Local'>minmxid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2453"><span class='Ref_To_Local'>delQry</span></a><span class='Delimiter'>, </span><span class='String'>"DROP DATABASE %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2467"><span class='Ref_To_Local'>dbDumpId</span></a> <span class='Operator'>= </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN2466"><span class='Ref_To_Local'>dbCatId</span></a><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* catalog ID */ 
</span>                 <a href="pg_dump.c.html#LN2467"><span class='Ref_To_Local'>dbDumpId</span></a><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* dump ID */ 
</span>                 <a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* Name */ 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* Namespace */ 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* Tablespace */ 
</span>                 <a href="pg_dump.c.html#LN2469"><span class='Ref_To_Local'>dba</span></a><span class='Delimiter'>,</span>           <span class='Comment_Single_Line'>/* Owner */ 
</span>                 <span class='Boolean'>false</span><span class='Delimiter'>,</span>         <span class='Comment_Single_Line'>/* with oids */ 
</span>                 <span class='String'>"DATABASE"</span><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'>/* Desc */ 
</span>                 <a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>,</span>      <span class='Comment_Single_Line'>/* Section */ 
</span>                 <a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Comment_Single_Line'>/* Create */ 
</span>                 <a href="pg_dump.c.html#LN2453"><span class='Ref_To_Local'>delQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>,</span>  <span class='Comment_Single_Line'>/* Del */ 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* Copy */ 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* Deps */ 
</span>                 <span class='Number'>0</span><span class='Delimiter'>,</span>             <span class='Comment_Single_Line'>/* # Deps */ 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* Dumper */ 
</span>                 <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* Dumper Arg */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * pg_largeobject and pg_largeobject_metadata come from the old system 
     * intact, so set their relfrozenxids and relminmxids. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2451"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2627"></a>        <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>lo_res</span><span class='Delimiter'>; 
</span><a name="LN2628"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>loFrozenQry</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2629"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>loOutQry</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2630"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relfrozenxid</span><span class='Delimiter'>, 
</span><a name="LN2631"></a>                    <span class='Declare_Local'>i_relminmxid</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * pg_largeobject 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90300</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2628"><span class='Ref_To_Local'>loFrozenQry</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT relfrozenxid, relminmxid\n"</span> 
                              <span class='String'>"FROM pg_catalog.pg_class\n"</span> 
                              <span class='String'>"WHERE oid = %u;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/catalog/pg_largeobject.h.html#LN28"><span class='Ref_to_Const'>LargeObjectRelationId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2628"><span class='Ref_To_Local'>loFrozenQry</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT relfrozenxid, 0 AS relminmxid\n"</span> 
                              <span class='String'>"FROM pg_catalog.pg_class\n"</span> 
                              <span class='String'>"WHERE oid = %u;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/catalog/pg_largeobject.h.html#LN28"><span class='Ref_to_Const'>LargeObjectRelationId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2628"><span class='Ref_To_Local'>loFrozenQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN2630"><span class='Ref_To_Local'>i_relfrozenxid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a><span class='Delimiter'>, </span><span class='String'>"relfrozenxid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2631"><span class='Ref_To_Local'>i_relminmxid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a><span class='Delimiter'>, </span><span class='String'>"relminmxid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2629"><span class='Ref_To_Local'>loOutQry</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, set pg_largeobject relfrozenxid and relminmxid\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2629"><span class='Ref_To_Local'>loOutQry</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE pg_catalog.pg_class\n"</span> 
                          <span class='String'>"SET relfrozenxid = '%u', relminmxid = '%u'\n"</span> 
                          <span class='String'>"WHERE oid = %u;\n"</span><span class='Delimiter'>, 
</span>                          atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2630"><span class='Ref_To_Local'>i_relfrozenxid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                          atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2631"><span class='Ref_To_Local'>i_relminmxid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_largeobject.h.html#LN28"><span class='Ref_to_Const'>LargeObjectRelationId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                     <span class='String'>"pg_largeobject"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"pg_largeobject"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN2629"><span class='Ref_To_Local'>loOutQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * pg_largeobject_metadata 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90000</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2628"><span class='Ref_To_Local'>loFrozenQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2629"><span class='Ref_To_Local'>loOutQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90300</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2628"><span class='Ref_To_Local'>loFrozenQry</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT relfrozenxid, relminmxid\n"</span> 
                                  <span class='String'>"FROM pg_catalog.pg_class\n"</span> 
                                  <span class='String'>"WHERE oid = %u;\n"</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/catalog/pg_largeobject_metadata.h.html#LN28"><span class='Ref_to_Const'>LargeObjectMetadataRelationId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2628"><span class='Ref_To_Local'>loFrozenQry</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT relfrozenxid, 0 AS relminmxid\n"</span> 
                                  <span class='String'>"FROM pg_catalog.pg_class\n"</span> 
                                  <span class='String'>"WHERE oid = %u;\n"</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/catalog/pg_largeobject_metadata.h.html#LN28"><span class='Ref_to_Const'>LargeObjectMetadataRelationId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2628"><span class='Ref_To_Local'>loFrozenQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN2630"><span class='Ref_To_Local'>i_relfrozenxid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a><span class='Delimiter'>, </span><span class='String'>"relfrozenxid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN2631"><span class='Ref_To_Local'>i_relminmxid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a><span class='Delimiter'>, </span><span class='String'>"relminmxid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2629"><span class='Ref_To_Local'>loOutQry</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, set pg_largeobject_metadata relfrozenxid and relminmxid\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2629"><span class='Ref_To_Local'>loOutQry</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE pg_catalog.pg_class\n"</span> 
                              <span class='String'>"SET relfrozenxid = '%u', relminmxid = '%u'\n"</span> 
                              <span class='String'>"WHERE oid = %u;\n"</span><span class='Delimiter'>, 
</span>                              atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2630"><span class='Ref_To_Local'>i_relfrozenxid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                              atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2631"><span class='Ref_To_Local'>i_relminmxid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                              <a href="../../include/catalog/pg_largeobject_metadata.h.html#LN28"><span class='Ref_to_Const'>LargeObjectMetadataRelationId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                         <span class='String'>"pg_largeobject_metadata"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                         <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"pg_largeobject_metadata"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN2629"><span class='Ref_To_Local'>loOutQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2627"><span class='Ref_To_Local'>lo_res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2628"><span class='Ref_To_Local'>loFrozenQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2629"><span class='Ref_To_Local'>loOutQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if dopt-&GT;binary_upgrade &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Dump DB comment if any */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80200</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * 8.2 keeps comments on shared objects in a shared table, so we 
         * cannot use the dumpComment used for other database objects. 
         */ 
</span><a name="LN2720"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>comment</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"description"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2720"><span class='Ref_To_Local'>comment</span></a> <span class='Operator'>&& </span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2720"><span class='Ref_To_Local'>comment</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Generates warning when loaded into a differently-named 
             * database. 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><span class='String'>"COMMENT ON DATABASE %s IS "</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2720"><span class='Ref_To_Local'>comment</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2466"><span class='Ref_To_Local'>dbCatId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN2469"><span class='Ref_To_Local'>dba</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"COMMENT"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN54"><span class='Ref_to_EnumConst'>SECTION_NONE</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="pg_dump.c.html#LN2467"><span class='Ref_To_Local'>dbDumpId</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Delimiter'>, </span><span class='String'>"DATABASE %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN2466"><span class='Ref_To_Local'>dbCatId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2467"><span class='Ref_To_Local'>dbDumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Dump shared security label. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN2451"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN148"><span class='Ref_to_Member'>no_security_labels</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90200</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2751"></a>        <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>shres</span><span class='Delimiter'>; 
</span><a name="LN2752"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>seclabelQry</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN2752"><span class='Ref_To_Local'>seclabelQry</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="dumputils.h.html#LN48"><span class='Ref_to_Proto'>buildShSecLabelQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2455"><span class='Ref_To_Local'>conn</span></a><span class='Delimiter'>, </span><span class='String'>"pg_database"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2466"><span class='Ref_To_Local'>dbCatId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2752"><span class='Ref_To_Local'>seclabelQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2751"><span class='Ref_To_Local'>shres</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2752"><span class='Ref_To_Local'>seclabelQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2752"><span class='Ref_To_Local'>seclabelQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="dumputils.h.html#LN50"><span class='Ref_to_Proto'>emitShSecLabels</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2455"><span class='Ref_To_Local'>conn</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2751"><span class='Ref_To_Local'>shres</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2752"><span class='Ref_To_Local'>seclabelQry</span></a><span class='Delimiter'>, </span><span class='String'>"DATABASE"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2752"><span class='Ref_To_Local'>seclabelQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>))</span> 
            <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2449"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2466"><span class='Ref_To_Local'>dbCatId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2468"><span class='Ref_To_Local'>datname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN2469"><span class='Ref_To_Local'>dba</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"SECURITY LABEL"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN54"><span class='Ref_to_EnumConst'>SECTION_NONE</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN2752"><span class='Ref_To_Local'>seclabelQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><a href="pg_dump.c.html#LN2467"><span class='Ref_To_Local'>dbDumpId</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2752"><span class='Ref_To_Local'>seclabelQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2751"><span class='Ref_To_Local'>shres</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2456"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2452"><span class='Ref_To_Local'>dbQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2453"><span class='Ref_To_Local'>delQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2454"><span class='Ref_To_Local'>creaQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpDatabase &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpEncoding: put the correct encoding into the archive 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2780"></a><span class='Declare_Function'>dumpEncoding</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>AH</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2782"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>encname</span> <span class='Operator'>= </span><a href="../../include/mb/pg_wchar.h.html#LN502"><span class='Ref_to_Proto'>pg_encoding_to_char</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2780"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN195"><span class='Ref_to_Member'>encoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2783"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>qry</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"saving encoding = %s\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2782"><span class='Ref_To_Local'>encname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2783"><span class='Ref_To_Local'>qry</span></a><span class='Delimiter'>, </span><span class='String'>"SET client_encoding = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2783"><span class='Ref_To_Local'>qry</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2782"><span class='Ref_To_Local'>encname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2780"><span class='Ref_to_Parameter'>AH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2783"><span class='Ref_To_Local'>qry</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2780"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                 <span class='String'>"ENCODING"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                 <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"ENCODING"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN2783"><span class='Ref_To_Local'>qry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2783"><span class='Ref_To_Local'>qry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpEncoding &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * dumpStdStrings: put the correct escape string behavior into the archive 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2807"></a><span class='Declare_Function'>dumpStdStrings</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>AH</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2809"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>stdstrings</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2807"><span class='Ref_to_Parameter'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN196"><span class='Ref_to_Member'>std_strings</span></a> <span class='Operator'>? </span><span class='String'>"on"</span> <span class='Operator'>: </span><span class='String'>"off"</span><span class='Delimiter'>; 
</span><a name="LN2810"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>qry</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"saving standard_conforming_strings = %s\n"</span><span class='Delimiter'>, 
</span>                  <a href="pg_dump.c.html#LN2809"><span class='Ref_To_Local'>stdstrings</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2810"><span class='Ref_To_Local'>qry</span></a><span class='Delimiter'>, </span><span class='String'>"SET standard_conforming_strings = '%s';\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN2809"><span class='Ref_To_Local'>stdstrings</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2807"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                 <span class='String'>"STDSTRINGS"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                 <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"STDSTRINGS"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN2810"><span class='Ref_To_Local'>qry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2810"><span class='Ref_To_Local'>qry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpStdStrings &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * getBlobs: 
 *  Collect schema-level data about large objects 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2835"></a><span class='Declare_Function'>getBlobs</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2837"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN2835"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN2838"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>blobQry</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2839"></a>    <a href="pg_dump.h.html#LN548"><span class='Ref_to_Typedef'>BlobInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>binfo</span><span class='Delimiter'>; 
</span><a name="LN2840"></a>    <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>bdata</span><span class='Delimiter'>; 
</span><a name="LN2841"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN2842"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN2843"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN2844"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN2845"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_lomowner</span><span class='Delimiter'>; 
</span><a name="LN2846"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_lomacl</span><span class='Delimiter'>; 
</span><a name="LN2847"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rlomacl</span><span class='Delimiter'>; 
</span><a name="LN2848"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initlomacl</span><span class='Delimiter'>; 
</span><a name="LN2849"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initrlomacl</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Verbose message */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"reading large objects\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2835"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fetch BLOB OIDs, and owner/ACL data if &GT;= 9.0 */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2835"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2861"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2862"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2863"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>init_acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2864"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>init_racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2861"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2862"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2863"><span class='Ref_To_Local'>init_acl_subquery</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN2864"><span class='Ref_To_Local'>init_racl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"l.lomacl"</span><span class='Delimiter'>, </span><span class='String'>"l.lomowner"</span><span class='Delimiter'>, </span><span class='String'>"'L'"</span><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN2837"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2838"><span class='Ref_To_Local'>blobQry</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT l.oid, (%s l.lomowner) AS rolname, "</span> 
                          <span class='String'>"%s AS lomacl, "</span> 
                          <span class='String'>"%s AS rlomacl, "</span> 
                          <span class='String'>"%s AS initlomacl, "</span> 
                          <span class='String'>"%s AS initrlomacl "</span> 
                          <span class='String'>"FROM pg_largeobject_metadata l "</span> 
                          <span class='String'>"LEFT JOIN pg_init_privs pip ON "</span> 
                          <span class='String'>"(l.oid = pip.objoid "</span> 
                          <span class='String'>"AND pip.classoid = 'pg_largeobject'::regclass "</span> 
                          <span class='String'>"AND pip.objsubid = 0) "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN2861"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN2862"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN2863"><span class='Ref_To_Local'>init_acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN2864"><span class='Ref_To_Local'>init_racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2861"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2862"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2863"><span class='Ref_To_Local'>init_acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2864"><span class='Ref_To_Local'>init_racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2835"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90000</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2838"><span class='Ref_To_Local'>blobQry</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT oid, (%s lomowner) AS rolname, lomacl, "</span> 
                          <span class='String'>"NULL AS rlomacl, NULL AS initlomacl, "</span> 
                          <span class='String'>"NULL AS initrlomacl "</span> 
                          <span class='String'>" FROM pg_largeobject_metadata"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2838"><span class='Ref_To_Local'>blobQry</span></a><span class='Delimiter'>, 
</span>                             <span class='String'>"SELECT DISTINCT loid AS oid, "</span> 
                             <span class='String'>"NULL::name AS rolname, NULL::oid AS lomacl, "</span> 
                             <span class='String'>"NULL::oid AS rlomacl, NULL::oid AS initlomacl, "</span> 
                             <span class='String'>"NULL::oid AS initrlomacl "</span> 
                             <span class='String'>" FROM pg_largeobject"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2835"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2838"><span class='Ref_To_Local'>blobQry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2844"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2845"><span class='Ref_To_Local'>i_lomowner</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2846"><span class='Ref_To_Local'>i_lomacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"lomacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2847"><span class='Ref_To_Local'>i_rlomacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rlomacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2848"><span class='Ref_To_Local'>i_initlomacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initlomacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN2849"><span class='Ref_To_Local'>i_initrlomacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initrlomacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN2842"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Each large object has its own BLOB archive entry. 
     */ 
</span>    <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN548"><span class='Ref_to_Typedef'>BlobInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2842"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN548"><span class='Ref_to_Typedef'>BlobInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN2842"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN76"><span class='Ref_to_EnumConst'>DO_BLOB</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/catalog/pg_largeobject.h.html#LN28"><span class='Ref_to_Const'>LargeObjectRelationId</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2844"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2844"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN551"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2845"><span class='Ref_To_Local'>i_lomowner</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN552"><span class='Ref_to_Member'>blobacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2846"><span class='Ref_To_Local'>i_lomacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN553"><span class='Ref_to_Member'>rblobacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2847"><span class='Ref_To_Local'>i_rlomacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN554"><span class='Ref_to_Member'>initblobacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2848"><span class='Ref_To_Local'>i_initlomacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN555"><span class='Ref_to_Member'>initrblobacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2849"><span class='Ref_To_Local'>i_initrlomacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2846"><span class='Ref_To_Local'>i_lomacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2847"><span class='Ref_To_Local'>i_rlomacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2848"><span class='Ref_To_Local'>i_initlomacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2849"><span class='Ref_To_Local'>i_initrlomacl</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * In binary-upgrade mode for blobs, we do *not* dump out the data or 
         * the ACLs, should any exist.  The data and ACL (if any) will be 
         * copied by pg_upgrade, which simply copies the pg_largeobject and 
         * pg_largeobject_metadata tables. 
         * 
         * We *do* dump out the definition of the blob because we need that to 
         * make the restoration of the comments, and anything else, work since 
         * pg_upgrade copies the files behind pg_largeobject and 
         * pg_largeobject_metadata after the dump is restored. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2837"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN2839"><span class='Ref_To_Local'>binfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN2843"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN92"><span class='Ref_to_Const'>DUMP_COMPONENT_DATA</span></a> <span class='Operator'>| </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * If we have any large objects, a "BLOBS" archive entry is needed. This 
     * is just a placeholder for sorting; it carries no data now. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2842"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN2840"><span class='Ref_To_Local'>bdata</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2840"><span class='Ref_To_Local'>bdata</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN77"><span class='Ref_to_EnumConst'>DO_BLOB_DATA</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2840"><span class='Ref_To_Local'>bdata</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2840"><span class='Ref_To_Local'>bdata</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN2840"><span class='Ref_To_Local'>bdata</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><span class='String'>"BLOBS"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2841"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2838"><span class='Ref_To_Local'>blobQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getBlobs &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpBlob 
 * 
 * dump the definition (metadata) of the given large object 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2981"></a><span class='Declare_Function'>dumpBlob</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN548"><span class='Ref_to_Typedef'>BlobInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>binfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2983"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>cquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN2984"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>dquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2983"><span class='Ref_To_Local'>cquery</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT pg_catalog.lo_create('%s');\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2984"><span class='Ref_To_Local'>dquery</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT pg_catalog.lo_unlink('%s');\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN551"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"BLOB"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN2983"><span class='Ref_To_Local'>cquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2984"><span class='Ref_To_Local'>dquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* set up tag for comment and/or ACL */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2983"><span class='Ref_To_Local'>cquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2983"><span class='Ref_To_Local'>cquery</span></a><span class='Delimiter'>, </span><span class='String'>"LARGE OBJECT %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump comment if any */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2983"><span class='Ref_To_Local'>cquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN551"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump security label if any */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2983"><span class='Ref_To_Local'>cquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN551"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump ACL if any */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN552"><span class='Ref_to_Member'>blobacl</span></a> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>))</span> 
        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><span class='String'>"LARGE OBJECT"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN550"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2983"><span class='Ref_To_Local'>cquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN551"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN552"><span class='Ref_to_Member'>blobacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN553"><span class='Ref_to_Member'>rblobacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN554"><span class='Ref_to_Member'>initblobacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN2981"><span class='Ref_to_Parameter'>binfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN555"><span class='Ref_to_Member'>initrblobacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2983"><span class='Ref_To_Local'>cquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN2984"><span class='Ref_To_Local'>dquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpBlob &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpBlobs: 
 *  dump the data contents of all large objects 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN3036"></a><span class='Declare_Function'>dumpBlobs</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>arg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3038"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>blobQry</span><span class='Delimiter'>; 
</span><a name="LN3039"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>blobFetchQry</span><span class='Delimiter'>; 
</span><a name="LN3040"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN139"><span class='Ref_to_Typedef'>PGconn</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>conn</span> <span class='Operator'>= </span><a href="../pg_basebackup/streamutil.h.html#LN30"><span class='Ref_to_Proto'>GetConnection</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3036"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3041"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN3042"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>buf</span><span class='Delimiter'>[</span><a href="pg_backup_archiver.h.html#LN34"><span class='Ref_to_Const'>LOBBUFSIZE</span></a><span class='Delimiter'>]; 
</span><a name="LN3043"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN3044"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN3045"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>cnt</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"saving large objects\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3036"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Currently, we re-fetch all BLOB OIDs using a cursor.  Consider scanning 
     * the already-in-memory dumpable objects instead... 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3036"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90000</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN3038"><span class='Ref_To_Local'>blobQry</span></a> <span class='Operator'>= </span><span class='String'>"DECLARE bloboid CURSOR FOR SELECT oid FROM pg_largeobject_metadata"</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN3038"><span class='Ref_To_Local'>blobQry</span></a> <span class='Operator'>= </span><span class='String'>"DECLARE bloboid CURSOR FOR SELECT DISTINCT loid FROM pg_largeobject"</span><span class='Delimiter'>; 
</span> 
    <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3036"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3038"><span class='Ref_To_Local'>blobQry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Command to fetch from cursor */ 
</span>    <a href="pg_dump.c.html#LN3039"><span class='Ref_To_Local'>blobFetchQry</span></a> <span class='Operator'>= </span><span class='String'>"FETCH 1000 IN bloboid"</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>do</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Do a fetch */ 
</span>        <a href="pg_dump.c.html#LN3041"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3036"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3039"><span class='Ref_To_Local'>blobFetchQry</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Process the tuples, if any */ 
</span>        <a href="pg_dump.c.html#LN3043"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3041"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3044"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3044"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN3043"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3044"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN3076"></a>            <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>blobOid</span><span class='Delimiter'>; 
</span><a name="LN3077"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>loFd</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN3076"><span class='Ref_To_Local'>blobOid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3041"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3044"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Open the BLOB */ 
</span>            <a href="pg_dump.c.html#LN3077"><span class='Ref_To_Local'>loFd</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/fe-lobj.c.html#LN56"><span class='Ref_to_Func'>lo_open</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3040"><span class='Ref_To_Local'>conn</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3076"><span class='Ref_To_Local'>blobOid</span></a><span class='Delimiter'>, </span><a href="../../include/libpq/libpq-fs.h.html#LN21"><span class='Ref_to_Const'>INV_READ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3077"><span class='Ref_To_Local'>loFd</span></a> <span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"could not open large object %u: %s"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN3076"><span class='Ref_To_Local'>blobOid</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN323"><span class='Ref_to_Proto'>PQerrorMessage</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3040"><span class='Ref_To_Local'>conn</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <a href="pg_backup.h.html#LN263"><span class='Ref_to_Proto'>StartBlob</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3036"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3076"><span class='Ref_To_Local'>blobOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Now read it in chunks, sending data to archive */ 
</span>            <span class='Control'>do</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pg_dump.c.html#LN3045"><span class='Ref_To_Local'>cnt</span></a> <span class='Operator'>= </span><a href="../../include/libpq/be-fsstubs.h.html#LN26"><span class='Ref_to_Proto'>lo_read</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3040"><span class='Ref_To_Local'>conn</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3077"><span class='Ref_To_Local'>loFd</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3042"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="pg_backup_archiver.h.html#LN34"><span class='Ref_to_Const'>LOBBUFSIZE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3045"><span class='Ref_To_Local'>cnt</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"error reading large object %u: %s"</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN3076"><span class='Ref_To_Local'>blobOid</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN323"><span class='Ref_to_Proto'>PQerrorMessage</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3040"><span class='Ref_To_Local'>conn</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <a href="pg_backup.h.html#LN261"><span class='Ref_to_Proto'>WriteData</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3036"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3042"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3045"><span class='Ref_To_Local'>cnt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3045"><span class='Ref_To_Local'>cnt</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/fe-lobj.c.html#LN98"><span class='Ref_to_Func'>lo_close</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3040"><span class='Ref_To_Local'>conn</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3077"><span class='Ref_To_Local'>loFd</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_backup.h.html#LN264"><span class='Ref_to_Proto'>EndBlob</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3036"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3076"><span class='Ref_To_Local'>blobOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3041"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end do &raquo; </span> <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3043"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpBlobs &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getPolicies 
 *    get information about policies on a dumpable table. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN3115"></a><span class='Declare_Function'>getPolicies</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>[], </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3117"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN3118"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN3119"></a>    <a href="pg_dump.h.html#LN564"><span class='Ref_to_Typedef'>PolicyInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>polinfo</span><span class='Delimiter'>; 
</span><a name="LN3120"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN3121"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN3122"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_polname</span><span class='Delimiter'>; 
</span><a name="LN3123"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_polcmd</span><span class='Delimiter'>; 
</span><a name="LN3124"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_polpermissive</span><span class='Delimiter'>; 
</span><a name="LN3125"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_polroles</span><span class='Delimiter'>; 
</span><a name="LN3126"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_polqual</span><span class='Delimiter'>; 
</span><a name="LN3127"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_polwithcheck</span><span class='Delimiter'>; 
</span><a name="LN3128"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN3129"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>, 
</span><a name="LN3130"></a>                <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3115"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90500</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3117"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3128"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3128"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN3115"><span class='Ref_to_Parameter'>numTables</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3128"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3139"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN3115"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3128"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore row security on tables not to be dumped */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN96"><span class='Ref_to_Const'>DUMP_COMPONENT_POLICY</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"reading row security enabled for table \"%s.%s\"\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Get row security enabled information for the table. We represent 
         * RLS enabled on a table by creating PolicyInfo object with an empty 
         * policy. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN277"><span class='Ref_to_Member'>rowsec</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Note: use tableoid 0 so that this object won't be mistaken for 
             * something that pg_depend entries apply to. 
             */ 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN564"><span class='Ref_to_Typedef'>PolicyInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN82"><span class='Ref_to_EnumConst'>DO_POLICY</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>; 
</span>            <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN567"><span class='Ref_to_Member'>poltable</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN568"><span class='Ref_to_Member'>polname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN569"><span class='Ref_to_Member'>polcmd</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN570"><span class='Ref_to_Member'>polpermissive</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN571"><span class='Ref_to_Member'>polroles</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN572"><span class='Ref_to_Member'>polqual</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN573"><span class='Ref_to_Member'>polwithcheck</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tbinfo-&GT;rowsec &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"reading policies for table \"%s.%s\"\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * select table schema to ensure regproc name is qualified if needed 
         */ 
</span>        <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3115"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3117"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Get the policies for the table. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3115"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>100000</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3117"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT oid, tableoid, pol.polname, pol.polcmd, pol.polpermissive, "</span> 
                              <span class='String'>"CASE WHEN pol.polroles = '{0}' THEN NULL ELSE "</span> 
                              <span class='String'>"   pg_catalog.array_to_string(ARRAY(SELECT pg_catalog.quote_ident(rolname) from pg_catalog.pg_roles WHERE oid = ANY(pol.polroles)), ', ') END AS polroles, "</span> 
             <span class='String'>"pg_catalog.pg_get_expr(pol.polqual, pol.polrelid) AS polqual, "</span> 
                              <span class='String'>"pg_catalog.pg_get_expr(pol.polwithcheck, pol.polrelid) AS polwithcheck "</span> 
                              <span class='String'>"FROM pg_catalog.pg_policy pol "</span> 
                              <span class='String'>"WHERE polrelid = '%u'"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3117"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT oid, tableoid, pol.polname, pol.polcmd, 't' as polpermissive, "</span> 
                              <span class='String'>"CASE WHEN pol.polroles = '{0}' THEN NULL ELSE "</span> 
                              <span class='String'>"   pg_catalog.array_to_string(ARRAY(SELECT pg_catalog.quote_ident(rolname) from pg_catalog.pg_roles WHERE oid = ANY(pol.polroles)), ', ') END AS polroles, "</span> 
             <span class='String'>"pg_catalog.pg_get_expr(pol.polqual, pol.polrelid) AS polqual, "</span> 
                              <span class='String'>"pg_catalog.pg_get_expr(pol.polwithcheck, pol.polrelid) AS polwithcheck "</span> 
                              <span class='String'>"FROM pg_catalog.pg_policy pol "</span> 
                              <span class='String'>"WHERE polrelid = '%u'"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3115"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3117"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN3130"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3130"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * No explicit policies to handle (only the default-deny policy, 
             * which is handled as part of the table definition).  Clean up 
             * and return. 
             */ 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="pg_dump.c.html#LN3120"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3121"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3122"><span class='Ref_To_Local'>i_polname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"polname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3123"><span class='Ref_To_Local'>i_polcmd</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"polcmd"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3124"><span class='Ref_To_Local'>i_polpermissive</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"polpermissive"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3125"><span class='Ref_To_Local'>i_polroles</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"polroles"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3126"><span class='Ref_To_Local'>i_polqual</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"polqual"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3127"><span class='Ref_To_Local'>i_polwithcheck</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"polwithcheck"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3130"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN564"><span class='Ref_to_Typedef'>PolicyInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN3130"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN82"><span class='Ref_to_EnumConst'>DO_POLICY</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= 
</span>                <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3121"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3120"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN567"><span class='Ref_to_Member'>poltable</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3139"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN568"><span class='Ref_to_Member'>polname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3122"><span class='Ref_To_Local'>i_polname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN568"><span class='Ref_to_Member'>polname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN569"><span class='Ref_to_Member'>polcmd</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3123"><span class='Ref_To_Local'>i_polcmd</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN570"><span class='Ref_to_Member'>polpermissive</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3124"><span class='Ref_To_Local'>i_polpermissive</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='String'>'t'</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3125"><span class='Ref_To_Local'>i_polroles</span></a><span class='Parentheses'>))</span> 
                <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN571"><span class='Ref_to_Member'>polroles</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN571"><span class='Ref_to_Member'>polroles</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3125"><span class='Ref_To_Local'>i_polroles</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3126"><span class='Ref_To_Local'>i_polqual</span></a><span class='Parentheses'>))</span> 
                <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN572"><span class='Ref_to_Member'>polqual</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN572"><span class='Ref_to_Member'>polqual</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3126"><span class='Ref_To_Local'>i_polqual</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3127"><span class='Ref_To_Local'>i_polwithcheck</span></a><span class='Parentheses'>))</span> 
                <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN573"><span class='Ref_to_Member'>polwithcheck</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="pg_dump.c.html#LN3119"><span class='Ref_To_Local'>polinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN573"><span class='Ref_to_Member'>polwithcheck</span></a> 
                    <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3129"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3127"><span class='Ref_To_Local'>i_polwithcheck</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;ntups;j++ &raquo; </span> 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3118"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numTables;i++ &raquo; </span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3117"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getPolicies &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpPolicy 
 *    dump the definition of the given policy 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3277"></a><span class='Declare_Function'>dumpPolicy</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN564"><span class='Ref_to_Typedef'>PolicyInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>polinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3279"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN3280"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN567"><span class='Ref_to_Member'>poltable</span></a><span class='Delimiter'>; 
</span><a name="LN3281"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN3282"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delqry</span><span class='Delimiter'>; 
</span><a name="LN3283"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>cmd</span><span class='Delimiter'>; 
</span><a name="LN3284"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tag</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3279"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If polname is NULL, then this record is just indicating that ROW LEVEL 
     * SECURITY is enabled for the table. Dump as ALTER TABLE &LT;table&GT; ENABLE 
     * ROW LEVEL SECURITY. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN568"><span class='Ref_to_Member'>polname</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE %s ENABLE ROW LEVEL SECURITY;"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN96"><span class='Ref_to_Const'>DUMP_COMPONENT_POLICY</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN3280"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                         <span class='String'>"ROW SECURITY"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if polinfo-&GT;polname==NUL... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN569"><span class='Ref_to_Member'>polcmd</span></a> <span class='Operator'>== </span><span class='String'>'*'</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN3283"><span class='Ref_To_Local'>cmd</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN569"><span class='Ref_to_Member'>polcmd</span></a> <span class='Operator'>== </span><span class='String'>'r'</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN3283"><span class='Ref_To_Local'>cmd</span></a> <span class='Operator'>= </span><span class='String'>" FOR SELECT"</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN569"><span class='Ref_to_Member'>polcmd</span></a> <span class='Operator'>== </span><span class='String'>'a'</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN3283"><span class='Ref_To_Local'>cmd</span></a> <span class='Operator'>= </span><span class='String'>" FOR INSERT"</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN569"><span class='Ref_to_Member'>polcmd</span></a> <span class='Operator'>== </span><span class='String'>'w'</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN3283"><span class='Ref_To_Local'>cmd</span></a> <span class='Operator'>= </span><span class='String'>" FOR UPDATE"</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN569"><span class='Ref_to_Member'>polcmd</span></a> <span class='Operator'>== </span><span class='String'>'d'</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN3283"><span class='Ref_To_Local'>cmd</span></a> <span class='Operator'>= </span><span class='String'>" FOR DELETE"</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"unexpected policy command type: %c\n"</span><span class='Delimiter'>, 
</span>                  <a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN569"><span class='Ref_to_Member'>polcmd</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3282"><span class='Ref_To_Local'>delqry</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE POLICY %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN568"><span class='Ref_to_Member'>polname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" ON %s%s%s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3280"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <span class='Operator'>!</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN570"><span class='Ref_to_Member'>polpermissive</span></a> <span class='Operator'>? </span><span class='String'>" AS RESTRICTIVE"</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3283"><span class='Ref_To_Local'>cmd</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN571"><span class='Ref_to_Member'>polroles</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" TO %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN571"><span class='Ref_to_Member'>polroles</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN572"><span class='Ref_to_Member'>polqual</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" USING (%s)"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN572"><span class='Ref_to_Member'>polqual</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN573"><span class='Ref_to_Member'>polwithcheck</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" WITH CHECK (%s)"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN573"><span class='Ref_to_Member'>polwithcheck</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3282"><span class='Ref_To_Local'>delqry</span></a><span class='Delimiter'>, </span><span class='String'>"DROP POLICY %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN568"><span class='Ref_to_Member'>polname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3282"><span class='Ref_To_Local'>delqry</span></a><span class='Delimiter'>, </span><span class='String'>" ON %s;\n"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3280"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3284"><span class='Ref_To_Local'>tag</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3280"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN96"><span class='Ref_to_Const'>DUMP_COMPONENT_POLICY</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN3284"><span class='Ref_To_Local'>tag</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN3277"><span class='Ref_to_Parameter'>polinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN566"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN3280"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"POLICY"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3282"><span class='Ref_To_Local'>delqry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3284"><span class='Ref_To_Local'>tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3281"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3282"><span class='Ref_To_Local'>delqry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpPolicy &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getPublications 
 *    get information about publications 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN3378"></a><span class='Declare_Function'>getPublications</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3380"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3378"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN3381"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN3382"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN3383"></a>    <a href="pg_dump.h.html#LN579"><span class='Ref_to_Typedef'>PublicationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pubinfo</span><span class='Delimiter'>; 
</span><a name="LN3384"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN3385"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN3386"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_pubname</span><span class='Delimiter'>; 
</span><a name="LN3387"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN3388"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_puballtables</span><span class='Delimiter'>; 
</span><a name="LN3389"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_pubinsert</span><span class='Delimiter'>; 
</span><a name="LN3390"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_pubupdate</span><span class='Delimiter'>; 
</span><a name="LN3391"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_pubdelete</span><span class='Delimiter'>; 
</span><a name="LN3392"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN3393"></a>                <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3380"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN149"><span class='Ref_to_Member'>no_publications</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN3378"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>100000</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3381"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3381"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get the publications. */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3381"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT p.tableoid, p.oid, p.pubname, "</span> 
                      <span class='String'>"(%s p.pubowner) AS rolname, "</span> 
                      <span class='String'>"p.puballtables, p.pubinsert, p.pubupdate, p.pubdelete "</span> 
                      <span class='String'>"FROM pg_catalog.pg_publication p"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3378"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3381"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3393"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3384"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3385"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3386"><span class='Ref_To_Local'>i_pubname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"pubname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3387"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3388"><span class='Ref_To_Local'>i_puballtables</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"puballtables"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3389"><span class='Ref_To_Local'>i_pubinsert</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"pubinsert"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3390"><span class='Ref_To_Local'>i_pubupdate</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"pubupdate"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3391"><span class='Ref_To_Local'>i_pubdelete</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"pubdelete"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3393"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN579"><span class='Ref_to_Typedef'>PublicationInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN3393"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN83"><span class='Ref_to_EnumConst'>DO_PUBLICATION</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= 
</span>            <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3384"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3385"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3386"><span class='Ref_To_Local'>i_pubname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN582"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3387"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN583"><span class='Ref_to_Member'>puballtables</span></a> <span class='Operator'>= 
</span>            <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3388"><span class='Ref_To_Local'>i_puballtables</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN584"><span class='Ref_to_Member'>pubinsert</span></a> <span class='Operator'>= 
</span>            <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3389"><span class='Ref_To_Local'>i_pubinsert</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN585"><span class='Ref_to_Member'>pubupdate</span></a> <span class='Operator'>= 
</span>            <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3390"><span class='Ref_To_Local'>i_pubupdate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN586"><span class='Ref_to_Member'>pubdelete</span></a> <span class='Operator'>= 
</span>            <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3391"><span class='Ref_To_Local'>i_pubdelete</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN582"><span class='Ref_to_Member'>rolname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: owner of publication \"%s\" appears to be invalid\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3383"><span class='Ref_To_Local'>pubinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3392"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3378"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3382"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3381"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getPublications &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpPublication 
 *    dump the definition of the given publication 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3460"></a><span class='Declare_Function'>dumpPublication</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN579"><span class='Ref_to_Typedef'>PublicationInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pubinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3462"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN3463"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN3464"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN3465"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>first</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3462"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3464"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3462"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP PUBLICATION %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE PUBLICATION %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3464"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"PUBLICATION %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN583"><span class='Ref_to_Member'>puballtables</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" FOR ALL TABLES"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" WITH (publish = '"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN584"><span class='Ref_to_Member'>pubinsert</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"insert"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3465"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN585"><span class='Ref_to_Member'>pubupdate</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN3465"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"update"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3465"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN586"><span class='Ref_to_Member'>pubdelete</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN3465"><span class='Ref_To_Local'>first</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"delete"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3465"><span class='Ref_To_Local'>first</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"');\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN582"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                 <span class='String'>"PUBLICATION"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3462"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3464"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN582"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3464"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN582"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3460"><span class='Ref_to_Parameter'>pubinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN581"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3462"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3463"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpPublication &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getPublicationTables 
 *    get information about publication membership for dumpable tables. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN3541"></a><span class='Declare_Function'>getPublicationTables</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>[], </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3543"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN3544"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN3545"></a>    <a href="pg_dump.h.html#LN593"><span class='Ref_to_Typedef'>PublicationRelInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>pubrinfo</span><span class='Delimiter'>; 
</span><a name="LN3546"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN3547"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN3548"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_pubname</span><span class='Delimiter'>; 
</span><a name="LN3549"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN3550"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>, 
</span><a name="LN3551"></a>                <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3541"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>100000</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3543"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3549"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3549"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN3541"><span class='Ref_to_Parameter'>numTables</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3549"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3560"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN3541"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3549"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Comment_Multi_Line'>/* Only plain tables can be aded to publications. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3560"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Ignore publication membership of tables whose definitions are not 
         * to be dumped. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3560"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"reading publication membership for table \"%s.%s\"\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3560"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3560"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3543"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Get the publication membership for the table. */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3543"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT pr.tableoid, pr.oid, p.pubname "</span> 
                          <span class='String'>"FROM pg_catalog.pg_publication_rel pr,"</span> 
                          <span class='String'>"     pg_catalog.pg_publication p "</span> 
                          <span class='String'>"WHERE pr.prrelid = '%u'"</span> 
                          <span class='String'>"  AND p.oid = pr.prpubid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN3560"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3544"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3541"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3543"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN3551"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3544"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3551"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Table is not member of any publications. Clean up and return. 
             */ 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3544"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="pg_dump.c.html#LN3546"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3544"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3547"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3544"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3548"><span class='Ref_To_Local'>i_pubname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3544"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"pubname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN3545"><span class='Ref_To_Local'>pubrinfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3551"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN593"><span class='Ref_to_Typedef'>PublicationRelInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN3551"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN3545"><span class='Ref_To_Local'>pubrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN595"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN84"><span class='Ref_to_EnumConst'>DO_PUBLICATION_REL</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3545"><span class='Ref_To_Local'>pubrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN595"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= 
</span>                <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3544"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3546"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3545"><span class='Ref_To_Local'>pubrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN595"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3544"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3547"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN3545"><span class='Ref_To_Local'>pubrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN595"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3545"><span class='Ref_To_Local'>pubrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN595"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3560"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3545"><span class='Ref_To_Local'>pubrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN595"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3560"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3545"><span class='Ref_To_Local'>pubrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN597"><span class='Ref_to_Member'>pubname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3544"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3548"><span class='Ref_To_Local'>i_pubname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN3545"><span class='Ref_To_Local'>pubrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN596"><span class='Ref_to_Member'>pubtable</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3560"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>            <a href="pg_dump.c.html#LN1639"><span class='Ref_to_Func'>selectDumpablePublicationTable</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3545"><span class='Ref_To_Local'>pubrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3550"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN595"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3541"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3544"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numTables;i++ &raquo; </span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3543"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getPublicationTables &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpPublicationTable 
 *    dump the definition of the given publication table mapping 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3632"></a><span class='Declare_Function'>dumpPublicationTable</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN593"><span class='Ref_to_Typedef'>PublicationRelInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pubrinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3634"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3632"><span class='Ref_to_Parameter'>pubrinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN596"><span class='Ref_to_Member'>pubtable</span></a><span class='Delimiter'>; 
</span><a name="LN3635"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN3636"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tag</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3632"><span class='Ref_to_Parameter'>pubrinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN595"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3636"><span class='Ref_To_Local'>tag</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3632"><span class='Ref_to_Parameter'>pubrinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN597"><span class='Ref_to_Member'>pubname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3634"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3635"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3635"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER PUBLICATION %s ADD TABLE ONLY"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3632"><span class='Ref_to_Parameter'>pubrinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN597"><span class='Ref_to_Member'>pubname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3635"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" %s;"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3634"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * There is no point in creating drop query as drop query as the drop is 
     * done by table drop. 
     */ 
</span>    <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3632"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3632"><span class='Ref_to_Parameter'>pubrinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN595"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3632"><span class='Ref_to_Parameter'>pubrinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN595"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN3636"><span class='Ref_To_Local'>tag</span></a><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN3634"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                 <span class='String'>""</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                 <span class='String'>"PUBLICATION TABLE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN3635"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3636"><span class='Ref_To_Local'>tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3635"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpPublicationTable &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Is the currently connected user a superuser? 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN3672"></a><span class='Declare_Function'>is_superuser</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3674"></a>    <a href="pg_backup_archiver.h.html#LN119"><span class='Ref_to_Typedef'>ArchiveHandle</span></a> <span class='Operator'>*</span><span class='Declare_Local'>AH</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_backup_archiver.h.html#LN119"><span class='Ref_to_Typedef'>ArchiveHandle</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN3672"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>; 
</span><a name="LN3675"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3675"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN319"><span class='Ref_to_Proto'>PQparameterStatus</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3674"><span class='Ref_To_Local'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup_archiver.h.html#LN284"><span class='Ref_to_Member'>connection</span></a><span class='Delimiter'>, </span><span class='String'>"is_superuser"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3675"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3675"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><span class='String'>"on"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * getSubscriptions 
 *    get information about subscriptions 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN3690"></a><span class='Declare_Function'>getSubscriptions</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3692"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN3690"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN3693"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN3694"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN3695"></a>    <a href="pg_dump.h.html#LN603"><span class='Ref_to_Typedef'>SubscriptionInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>subinfo</span><span class='Delimiter'>; 
</span><a name="LN3696"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN3697"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN3698"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_subname</span><span class='Delimiter'>; 
</span><a name="LN3699"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN3700"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_subconninfo</span><span class='Delimiter'>; 
</span><a name="LN3701"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_subslotname</span><span class='Delimiter'>; 
</span><a name="LN3702"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_subsynccommit</span><span class='Delimiter'>; 
</span><a name="LN3703"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_subpublications</span><span class='Delimiter'>; 
</span><a name="LN3704"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN3705"></a>                <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3692"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN150"><span class='Ref_to_Member'>no_subscriptions</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN3690"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>100000</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../psql/common.h.html#LN40"><span class='Ref_to_Proto'>is_superuser</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3690"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN3712"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>n</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3690"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT count(*) FROM pg_subscription "</span> 
                    <span class='String'>"WHERE subdbid = (SELECT oid FROM pg_catalog.pg_database"</span> 
                      <span class='String'>"                 WHERE datname = current_database())"</span><span class='Delimiter'>, 
</span>                              <a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3712"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3712"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: subscriptions not dumped because current user is not a superuser\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN3693"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3693"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get the subscriptions in current database. */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3693"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT s.tableoid, s.oid, s.subname,"</span> 
                      <span class='String'>"(%s s.subowner) AS rolname, "</span> 
                      <span class='String'>" s.subconninfo, s.subslotname, s.subsynccommit, "</span> 
                      <span class='String'>" s.subpublications "</span> 
                      <span class='String'>"FROM pg_catalog.pg_subscription s "</span> 
                  <span class='String'>"WHERE s.subdbid = (SELECT oid FROM pg_catalog.pg_database"</span> 
                    <span class='String'>"                   WHERE datname = current_database())"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3690"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3693"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3705"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3696"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3697"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3698"><span class='Ref_To_Local'>i_subname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"subname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3699"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3700"><span class='Ref_To_Local'>i_subconninfo</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"subconninfo"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3701"><span class='Ref_To_Local'>i_subslotname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"subslotname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3702"><span class='Ref_To_Local'>i_subsynccommit</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"subsynccommit"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3703"><span class='Ref_To_Local'>i_subpublications</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"subpublications"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3705"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN603"><span class='Ref_to_Typedef'>SubscriptionInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN3705"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN85"><span class='Ref_to_EnumConst'>DO_SUBSCRIPTION</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= 
</span>            <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3696"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3697"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3698"><span class='Ref_To_Local'>i_subname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN606"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3699"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN607"><span class='Ref_to_Member'>subconninfo</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3700"><span class='Ref_To_Local'>i_subconninfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3701"><span class='Ref_To_Local'>i_subslotname</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN608"><span class='Ref_to_Member'>subslotname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN608"><span class='Ref_to_Member'>subslotname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3701"><span class='Ref_To_Local'>i_subslotname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN609"><span class='Ref_to_Member'>subsynccommit</span></a> <span class='Operator'>= 
</span>            <a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3702"><span class='Ref_To_Local'>i_subsynccommit</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN610"><span class='Ref_to_Member'>subpublications</span></a> <span class='Operator'>= 
</span>            <a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3703"><span class='Ref_To_Local'>i_subpublications</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN606"><span class='Ref_to_Member'>rolname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: owner of subscription \"%s\" appears to be invalid\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3695"><span class='Ref_To_Local'>subinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3704"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3690"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3694"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3693"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getSubscriptions &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpSubscription 
 *    dump the definition of the given subscription 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3791"></a><span class='Declare_Function'>dumpSubscription</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN603"><span class='Ref_to_Typedef'>SubscriptionInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3793"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN3794"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN3795"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN3796"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>publications</span><span class='Delimiter'>; 
</span><a name="LN3797"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>pubnames</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN3798"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>npubnames</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN3799"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3793"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3794"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3795"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3793"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP SUBSCRIPTION %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3794"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE SUBSCRIPTION %s CONNECTION "</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3794"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN607"><span class='Ref_to_Member'>subconninfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build list of quoted publications and append them to query. */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/fe_utils/string_utils.h.html#LN48"><span class='Ref_to_Proto'>parsePGArray</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN610"><span class='Ref_to_Member'>subpublications</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN3797"><span class='Ref_To_Local'>pubnames</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN3798"><span class='Ref_To_Local'>npubnames</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                  <span class='String'>"WARNING: could not parse subpublications array\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3797"><span class='Ref_To_Local'>pubnames</span></a><span class='Parentheses'>) 
</span>            <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3797"><span class='Ref_To_Local'>pubnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3797"><span class='Ref_To_Local'>pubnames</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN3798"><span class='Ref_To_Local'>npubnames</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN3796"><span class='Ref_To_Local'>publications</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3799"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3799"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN3798"><span class='Ref_To_Local'>npubnames</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN3799"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3799"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3796"><span class='Ref_To_Local'>publications</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3796"><span class='Ref_To_Local'>publications</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3797"><span class='Ref_To_Local'>pubnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN3799"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3794"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" PUBLICATION %s WITH (connect = false, slot_name = "</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3796"><span class='Ref_To_Local'>publications</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN608"><span class='Ref_to_Member'>subslotname</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3794"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN608"><span class='Ref_to_Member'>subslotname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3794"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"NONE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN609"><span class='Ref_to_Member'>subsynccommit</span></a><span class='Delimiter'>, </span><span class='String'>"off"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3794"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>", synchronous_commit = %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN609"><span class='Ref_to_Member'>subsynccommit</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3794"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>");\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3795"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"SUBSCRIPTION %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN606"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                 <span class='String'>"SUBSCRIPTION"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                 <a href="pg_dump.c.html#LN3794"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3793"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                 <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3795"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN606"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3795"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN606"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3791"><span class='Ref_to_Parameter'>subinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN605"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3796"><span class='Ref_To_Local'>publications</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3797"><span class='Ref_To_Local'>pubnames</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3797"><span class='Ref_To_Local'>pubnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3793"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3794"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpSubscription &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN3877"></a><span class='Declare_Function'>binary_upgrade_set_type_oids_by_type_oid</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN3878"></a>                                         <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>upgrade_buffer</span><span class='Delimiter'>, 
</span><a name="LN3879"></a>                                         <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>pg_type_oid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3881"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>upgrade_query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN3882"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>upgrade_res</span><span class='Delimiter'>; 
</span><a name="LN3883"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>pg_type_array_oid</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3878"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, must preserve pg_type oid\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3878"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT pg_catalog.binary_upgrade_set_next_pg_type_oid('%u'::pg_catalog.oid);\n\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3879"><span class='Ref_to_Parameter'>pg_type_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* we only support old &GT;= 8.3 for binary upgrades */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3881"><span class='Ref_To_Local'>upgrade_query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT typarray "</span> 
                      <span class='String'>"FROM pg_catalog.pg_type "</span> 
                      <span class='String'>"WHERE pg_type.oid = '%u'::pg_catalog.oid;"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3879"><span class='Ref_to_Parameter'>pg_type_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3882"><span class='Ref_To_Local'>upgrade_res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3877"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3881"><span class='Ref_To_Local'>upgrade_query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3883"><span class='Ref_To_Local'>pg_type_array_oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3882"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3882"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='String'>"typarray"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3883"><span class='Ref_To_Local'>pg_type_array_oid</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3878"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, 
</span>               <span class='String'>"\n-- For binary upgrade, must preserve pg_type array oid\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3878"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT pg_catalog.binary_upgrade_set_next_array_pg_type_oid('%u'::pg_catalog.oid);\n\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN3883"><span class='Ref_To_Local'>pg_type_array_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3882"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3881"><span class='Ref_To_Local'>upgrade_query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end binary_upgrade_set_type_oids_by_type_oid &raquo; </span> 
 
<span class='Keyword'>static bool 
</span><a name="LN3915"></a><span class='Declare_Function'>binary_upgrade_set_type_oids_by_rel_oid</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN3916"></a>                                        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>upgrade_buffer</span><span class='Delimiter'>, 
</span><a name="LN3917"></a>                                        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>pg_rel_oid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3919"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>upgrade_query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN3920"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>upgrade_res</span><span class='Delimiter'>; 
</span><a name="LN3921"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>pg_type_oid</span><span class='Delimiter'>; 
</span><a name="LN3922"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>toast_set</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* we only support old &GT;= 8.3 for binary upgrades */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3919"><span class='Ref_To_Local'>upgrade_query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT c.reltype AS crel, t.reltype AS trel "</span> 
                      <span class='String'>"FROM pg_catalog.pg_class c "</span> 
                      <span class='String'>"LEFT JOIN pg_catalog.pg_class t ON "</span> 
                      <span class='String'>"  (c.reltoastrelid = t.oid) "</span> 
                      <span class='String'>"WHERE c.oid = '%u'::pg_catalog.oid;"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3917"><span class='Ref_to_Parameter'>pg_rel_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3920"><span class='Ref_To_Local'>upgrade_res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3915"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3919"><span class='Ref_To_Local'>upgrade_query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3921"><span class='Ref_To_Local'>pg_type_oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3920"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3920"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='String'>"crel"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN254"><span class='Ref_to_Proto'>binary_upgrade_set_type_oids_by_type_oid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3915"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3916"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, 
</span>                                             <a href="pg_dump.c.html#LN3921"><span class='Ref_To_Local'>pg_type_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3920"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3920"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='String'>"trel"</span><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Toast tables do not have pg_type array rows */ 
</span><a name="LN3943"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>pg_type_toast_oid</span> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3920"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                            <a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3920"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='String'>"trel"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3916"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, must preserve pg_type toast oid\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3916"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT pg_catalog.binary_upgrade_set_next_toast_pg_type_oid('%u'::pg_catalog.oid);\n\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN3943"><span class='Ref_To_Local'>pg_type_toast_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN3922"><span class='Ref_To_Local'>toast_set</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3920"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3919"><span class='Ref_To_Local'>upgrade_query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN3922"><span class='Ref_To_Local'>toast_set</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end binary_upgrade_set_type_oids_by_rel_oid &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN3961"></a><span class='Declare_Function'>binary_upgrade_set_pg_class_oids</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN3962"></a>                                 <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>upgrade_buffer</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>pg_class_oid</span><span class='Delimiter'>, 
</span><a name="LN3963"></a>                                 <span class='Keyword'>bool </span><span class='Declare_Parameter'>is_index</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3965"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>upgrade_query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN3966"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>upgrade_res</span><span class='Delimiter'>; 
</span><a name="LN3967"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>pg_class_reltoastrelid</span><span class='Delimiter'>; 
</span><a name="LN3968"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>pg_index_indexrelid</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3965"><span class='Ref_To_Local'>upgrade_query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT c.reltoastrelid, i.indexrelid "</span> 
                      <span class='String'>"FROM pg_catalog.pg_class c LEFT JOIN "</span> 
                      <span class='String'>"pg_catalog.pg_index i ON (c.reltoastrelid = i.indrelid AND i.indisvalid) "</span> 
                      <span class='String'>"WHERE c.oid = '%u'::pg_catalog.oid;"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN3962"><span class='Ref_to_Parameter'>pg_class_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3966"><span class='Ref_To_Local'>upgrade_res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3961"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN3965"><span class='Ref_To_Local'>upgrade_query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN3967"><span class='Ref_To_Local'>pg_class_reltoastrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3966"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3966"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='String'>"reltoastrelid"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN3968"><span class='Ref_To_Local'>pg_index_indexrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3966"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3966"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Delimiter'>, </span><span class='String'>"indexrelid"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3962"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, 
</span>                   <span class='String'>"\n-- For binary upgrade, must preserve pg_class oids\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN3963"><span class='Ref_to_Parameter'>is_index</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3962"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT pg_catalog.binary_upgrade_set_next_heap_pg_class_oid('%u'::pg_catalog.oid);\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN3962"><span class='Ref_to_Parameter'>pg_class_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* only tables have toast tables, not indexes */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3967"><span class='Ref_To_Local'>pg_class_reltoastrelid</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * One complexity is that the table definition might not require 
             * the creation of a TOAST table, and the TOAST table might have 
             * been created long after table creation, when the table was 
             * loaded with wide data.  By setting the TOAST oid we force 
             * creation of the TOAST heap and TOAST index by the backend so we 
             * can cleanly copy the files during binary upgrade. 
             */ 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3962"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT pg_catalog.binary_upgrade_set_next_toast_pg_class_oid('%u'::pg_catalog.oid);\n"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN3967"><span class='Ref_To_Local'>pg_class_reltoastrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* every toast table has an index */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3962"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT pg_catalog.binary_upgrade_set_next_index_pg_class_oid('%u'::pg_catalog.oid);\n"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN3968"><span class='Ref_To_Local'>pg_index_indexrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if OidIsValid(pg_class_r... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !is_index &raquo; </span> 
    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3962"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT pg_catalog.binary_upgrade_set_next_index_pg_class_oid('%u'::pg_catalog.oid);\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN3962"><span class='Ref_to_Parameter'>pg_class_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3962"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3966"><span class='Ref_To_Local'>upgrade_res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN3965"><span class='Ref_To_Local'>upgrade_query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end binary_upgrade_set_pg_class_oids &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * If the DumpableObject is a member of an extension, add a suitable 
 * ALTER EXTENSION ADD command to the creation commands in upgrade_buffer. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN4028"></a><span class='Declare_Function'>binary_upgrade_extension_member</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>upgrade_buffer</span><span class='Delimiter'>, 
</span><a name="LN4029"></a>                                <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dobj</span><span class='Delimiter'>, 
</span><a name="LN4030"></a>                                <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>objlabel</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4032"></a>    <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>extobj</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN4033"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN4029"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN136"><span class='Ref_to_Member'>ext_member</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Find the parent extension.  We could avoid this search if we wanted to 
     * add a link field to DumpableObject, but the space costs of that would 
     * be considerable.  We assume that member objects could only have a 
     * direct dependency on their own extension, not any others. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4033"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4033"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN4029"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN138"><span class='Ref_to_Member'>nDeps</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4033"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN4032"><span class='Ref_To_Local'>extobj</span></a> <span class='Operator'>= </span><a href="common.c.html#LN519"><span class='Ref_to_Func'>findObjectByDumpId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4029"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN137"><span class='Ref_to_Member'>dependencies</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4033"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4032"><span class='Ref_To_Local'>extobj</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN4032"><span class='Ref_To_Local'>extobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>== </span><a href="pg_dump.h.html#LN44"><span class='Ref_to_EnumConst'>DO_EXTENSION</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4032"><span class='Ref_To_Local'>extobj</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4032"><span class='Ref_To_Local'>extobj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"could not find parent extension for %s\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4030"><span class='Ref_to_Parameter'>objlabel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4028"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, 
</span>      <span class='String'>"\n-- For binary upgrade, handle extension membership the hard way\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4028"><span class='Ref_to_Parameter'>upgrade_buffer</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER EXTENSION %s ADD %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4032"><span class='Ref_To_Local'>extobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN4030"><span class='Ref_to_Parameter'>objlabel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end binary_upgrade_extension_member &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getNamespaces: 
 *    read all namespaces in the system catalogs and return them in the 
 * NamespaceInfo* structure 
 * 
 *  numNamespaces is set to the number of namespaces read in 
 */ 
</span><a href="pg_dump.h.html#LN142"><span class='Ref_to_Typedef'>NamespaceInfo</span></a> <span class='Operator'>* 
</span><a name="LN4069"></a><span class='Declare_Function'>getNamespaces</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numNamespaces</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4071"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4069"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN4072"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN4073"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN4074"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN4075"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN4076"></a>    <a href="pg_dump.h.html#LN142"><span class='Ref_to_Typedef'>NamespaceInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nsinfo</span><span class='Delimiter'>; 
</span><a name="LN4077"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN4078"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN4079"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_nspname</span><span class='Delimiter'>; 
</span><a name="LN4080"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN4081"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_nspacl</span><span class='Delimiter'>; 
</span><a name="LN4082"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rnspacl</span><span class='Delimiter'>; 
</span><a name="LN4083"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initnspacl</span><span class='Delimiter'>; 
</span><a name="LN4084"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initrnspacl</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4075"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4069"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * we fetch all namespaces including system ones, so that every object we 
     * read in can be linked to a containing namespace. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4069"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4097"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN4098"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN4099"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>init_acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN4100"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>init_racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4097"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4098"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4099"><span class='Ref_To_Local'>init_acl_subquery</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN4100"><span class='Ref_To_Local'>init_racl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"n.nspacl"</span><span class='Delimiter'>, </span><span class='String'>"n.nspowner"</span><span class='Delimiter'>, </span><span class='String'>"'n'"</span><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN4071"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4075"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT n.tableoid, n.oid, n.nspname, "</span> 
                          <span class='String'>"(%s nspowner) AS rolname, "</span> 
                          <span class='String'>"%s as nspacl, "</span> 
                          <span class='String'>"%s as rnspacl, "</span> 
                          <span class='String'>"%s as initnspacl, "</span> 
                          <span class='String'>"%s as initrnspacl "</span> 
                          <span class='String'>"FROM pg_namespace n "</span> 
                          <span class='String'>"LEFT JOIN pg_init_privs pip "</span> 
                          <span class='String'>"ON (n.oid = pip.objoid "</span> 
                          <span class='String'>"AND pip.classoid = 'pg_namespace'::regclass "</span> 
                          <span class='String'>"AND pip.objsubid = 0"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN4097"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN4098"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN4099"><span class='Ref_To_Local'>init_acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN4100"><span class='Ref_To_Local'>init_racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * When we are doing a 'clean' run, we will be dropping and recreating 
         * the 'public' schema (the only object which has that kind of 
         * treatment in the backend and which has an entry in pg_init_privs) 
         * and therefore we should not consider any initial privileges in 
         * pg_init_privs in that case. 
         * 
         * See pg_backup_archiver.c:_printTocEntry() for the details on why 
         * the public schema is special in this regard. 
         * 
         * Note that if the public schema is dropped and re-created, this is 
         * essentially a no-op because the new public schema won't have an 
         * entry in pg_init_privs anyway, as the entry will be removed when 
         * the public schema is dropped. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4071"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN163"><span class='Ref_to_Member'>outputClean</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4075"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" AND pip.objoid &LT;&GT; 'public'::regnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4075"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>") "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4097"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4098"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4099"><span class='Ref_To_Local'>init_acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4100"><span class='Ref_To_Local'>init_racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4075"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, nspname, "</span> 
                          <span class='String'>"(%s nspowner) AS rolname, "</span> 
                          <span class='String'>"nspacl, NULL as rnspacl, "</span> 
                          <span class='String'>"NULL AS initnspacl, NULL as initrnspacl "</span> 
                          <span class='String'>"FROM pg_namespace"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4069"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4075"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4073"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN142"><span class='Ref_to_Typedef'>NamespaceInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4073"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN142"><span class='Ref_to_Typedef'>NamespaceInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4077"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4078"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4079"><span class='Ref_To_Local'>i_nspname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"nspname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4080"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4081"><span class='Ref_To_Local'>i_nspacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"nspacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4082"><span class='Ref_To_Local'>i_rnspacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rnspacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4083"><span class='Ref_To_Local'>i_initnspacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initnspacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4084"><span class='Ref_To_Local'>i_initrnspacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initrnspacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN4073"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN43"><span class='Ref_to_EnumConst'>DO_NAMESPACE</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4077"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4078"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4079"><span class='Ref_To_Local'>i_nspname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN145"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4080"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN146"><span class='Ref_to_Member'>nspacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4081"><span class='Ref_To_Local'>i_nspacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN147"><span class='Ref_to_Member'>rnspacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4082"><span class='Ref_To_Local'>i_rnspacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN148"><span class='Ref_to_Member'>initnspacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4083"><span class='Ref_To_Local'>i_initnspacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN149"><span class='Ref_to_Member'>initrnspacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4084"><span class='Ref_To_Local'>i_initrnspacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether to dump this namespace */ 
</span>        <a href="pg_dump.c.html#LN1369"><span class='Ref_to_Func'>selectDumpableNamespace</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="pg_dump.c.html#LN4069"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Do not try to dump ACL if the ACL is empty or the default. 
         * 
         * This is useful because, for some schemas/objects, the only 
         * component we are going to try and dump is the ACL and if we can 
         * remove that then 'dump' goes to zero/false and we don't consider 
         * this object for dumping at all later on. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4081"><span class='Ref_To_Local'>i_nspacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4082"><span class='Ref_To_Local'>i_rnspacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4083"><span class='Ref_To_Local'>i_initnspacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4084"><span class='Ref_To_Local'>i_initrnspacl</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN145"><span class='Ref_to_Member'>rolname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: owner of schema \"%s\" appears to be invalid\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4074"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4072"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4075"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN4069"><span class='Ref_to_Parameter'>numNamespaces</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4073"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN4076"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getNamespaces &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * findNamespace: 
 *      given a namespace OID, look up the info read by getNamespaces 
 */ 
</span><span class='Keyword'>static </span><a href="pg_dump.h.html#LN142"><span class='Ref_to_Typedef'>NamespaceInfo</span></a> <span class='Operator'>* 
</span><a name="LN4218"></a><span class='Declare_Function'>findNamespace</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>nsoid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4220"></a>    <a href="pg_dump.h.html#LN142"><span class='Ref_to_Typedef'>NamespaceInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nsinfo</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4220"><span class='Ref_To_Local'>nsinfo</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN654"><span class='Ref_to_Proto'>findNamespaceByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4218"><span class='Ref_to_Parameter'>nsoid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4220"><span class='Ref_To_Local'>nsinfo</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"schema with OID %u does not exist\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4218"><span class='Ref_to_Parameter'>nsoid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="pg_dump.c.html#LN4220"><span class='Ref_To_Local'>nsinfo</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * getExtensions: 
 *    read all extensions in the system catalogs and return them in the 
 * ExtensionInfo* structure 
 * 
 *  numExtensions is set to the number of extensions read in 
 */ 
</span><a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Operator'>* 
</span><a name="LN4236"></a><span class='Declare_Function'>getExtensions</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numExtensions</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4238"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4236"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN4239"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN4240"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN4241"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN4242"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN4243"></a>    <a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>extinfo</span><span class='Delimiter'>; 
</span><a name="LN4244"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN4245"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN4246"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_extname</span><span class='Delimiter'>; 
</span><a name="LN4247"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_nspname</span><span class='Delimiter'>; 
</span><a name="LN4248"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_extrelocatable</span><span class='Delimiter'>; 
</span><a name="LN4249"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_extversion</span><span class='Delimiter'>; 
</span><a name="LN4250"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_extconfig</span><span class='Delimiter'>; 
</span><a name="LN4251"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_extcondition</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Before 9.1, there are no extensions. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4236"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN4236"><span class='Ref_to_Parameter'>numExtensions</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN4242"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4236"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4242"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT x.tableoid, x.oid, "</span> 
                         <span class='String'>"x.extname, n.nspname, x.extrelocatable, x.extversion, x.extconfig, x.extcondition "</span> 
                         <span class='String'>"FROM pg_extension x "</span> 
                         <span class='String'>"JOIN pg_namespace n ON n.oid = x.extnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4236"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4242"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4240"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4240"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4244"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4245"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4246"><span class='Ref_To_Local'>i_extname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"extname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4247"><span class='Ref_To_Local'>i_nspname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"nspname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4248"><span class='Ref_To_Local'>i_extrelocatable</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"extrelocatable"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4249"><span class='Ref_To_Local'>i_extversion</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"extversion"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4250"><span class='Ref_To_Local'>i_extconfig</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"extconfig"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4251"><span class='Ref_To_Local'>i_extcondition</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"extcondition"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN4240"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN44"><span class='Ref_to_EnumConst'>DO_EXTENSION</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4244"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4245"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4246"><span class='Ref_To_Local'>i_extname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4247"><span class='Ref_To_Local'>i_nspname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN156"><span class='Ref_to_Member'>relocatable</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4248"><span class='Ref_To_Local'>i_extrelocatable</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='String'>'t'</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN157"><span class='Ref_to_Member'>extversion</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4249"><span class='Ref_To_Local'>i_extversion</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN158"><span class='Ref_to_Member'>extconfig</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4250"><span class='Ref_To_Local'>i_extconfig</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN159"><span class='Ref_to_Member'>extcondition</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4251"><span class='Ref_To_Local'>i_extcondition</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1616"><span class='Ref_to_Func'>selectDumpableExtension</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4241"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4238"><span class='Ref_To_Local'>dopt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4239"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4242"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN4236"><span class='Ref_to_Parameter'>numExtensions</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4240"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN4243"><span class='Ref_To_Local'>extinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getExtensions &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTypes: 
 *    read all types in the system catalogs and return them in the 
 * TypeInfo* structure 
 * 
 *  numTypes is set to the number of types read in 
 * 
 * NB: this must run after getFuncs() because we assume we can do 
 * findFuncByOid(). 
 */ 
</span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>* 
</span><a name="LN4323"></a><span class='Declare_Function'>getTypes</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numTypes</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4325"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4323"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN4326"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN4327"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN4328"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN4329"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN4330"></a>    <a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>tyinfo</span><span class='Delimiter'>; 
</span><a name="LN4331"></a>    <a href="pg_dump.h.html#LN188"><span class='Ref_to_Typedef'>ShellTypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>stinfo</span><span class='Delimiter'>; 
</span><a name="LN4332"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN4333"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN4334"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_typname</span><span class='Delimiter'>; 
</span><a name="LN4335"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_typnamespace</span><span class='Delimiter'>; 
</span><a name="LN4336"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_typacl</span><span class='Delimiter'>; 
</span><a name="LN4337"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rtypacl</span><span class='Delimiter'>; 
</span><a name="LN4338"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_inittypacl</span><span class='Delimiter'>; 
</span><a name="LN4339"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initrtypacl</span><span class='Delimiter'>; 
</span><a name="LN4340"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN4341"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_typelem</span><span class='Delimiter'>; 
</span><a name="LN4342"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_typrelid</span><span class='Delimiter'>; 
</span><a name="LN4343"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_typrelkind</span><span class='Delimiter'>; 
</span><a name="LN4344"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_typtype</span><span class='Delimiter'>; 
</span><a name="LN4345"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_typisdefined</span><span class='Delimiter'>; 
</span><a name="LN4346"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_isarray</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * we include even the built-in types because those may be used as array 
     * elements by user-defined types 
     * 
     * we filter out the built-in types when we dump out the types 
     * 
     * same approach for undefined (shell) types and array types 
     * 
     * Note: as of 8.3 we can reliably detect whether a type is an 
     * auto-generated array type by checking the element type's typarray. 
     * (Before that the test is capable of generating false positives.) We 
     * still check for name beginning with '_', though, so as to avoid the 
     * cost of the subselect probe for all standard types.  This would have to 
     * be revisited if the backend ever allows renaming of array types. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4323"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4323"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN4369"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN4370"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN4371"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initacl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN4372"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initracl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4369"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4370"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4371"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN4372"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"t.typacl"</span><span class='Delimiter'>, </span><span class='String'>"t.typowner"</span><span class='Delimiter'>, </span><span class='String'>"'T'"</span><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN4325"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4329"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT t.tableoid, t.oid, t.typname, "</span> 
                          <span class='String'>"t.typnamespace, "</span> 
                          <span class='String'>"%s AS typacl, "</span> 
                          <span class='String'>"%s AS rtypacl, "</span> 
                          <span class='String'>"%s AS inittypacl, "</span> 
                          <span class='String'>"%s AS initrtypacl, "</span> 
                          <span class='String'>"(%s t.typowner) AS rolname, "</span> 
                          <span class='String'>"t.typelem, t.typrelid, "</span> 
                          <span class='String'>"CASE WHEN t.typrelid = 0 THEN ' '::\"char\" "</span> 
                          <span class='String'>"ELSE (SELECT relkind FROM pg_class WHERE oid = t.typrelid) END AS typrelkind, "</span> 
                          <span class='String'>"t.typtype, t.typisdefined, "</span> 
                          <span class='String'>"t.typname[0] = '_' AND t.typelem != 0 AND "</span> 
                          <span class='String'>"(SELECT typarray FROM pg_type te WHERE oid = t.typelem) = t.oid AS isarray "</span> 
                          <span class='String'>"FROM pg_type t "</span> 
                          <span class='String'>"LEFT JOIN pg_init_privs pip ON "</span> 
                          <span class='String'>"(t.oid = pip.objoid "</span> 
                          <span class='String'>"AND pip.classoid = 'pg_type'::regclass "</span> 
                          <span class='String'>"AND pip.objsubid = 0) "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN4369"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN4370"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN4371"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN4372"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4369"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4370"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4371"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4372"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4323"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90200</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4329"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, typname, "</span> 
                          <span class='String'>"typnamespace, typacl, NULL as rtypacl, "</span> 
                          <span class='String'>"NULL AS inittypacl, NULL AS initrtypacl, "</span> 
                          <span class='String'>"(%s typowner) AS rolname, "</span> 
                          <span class='String'>"typelem, typrelid, "</span> 
                          <span class='String'>"CASE WHEN typrelid = 0 THEN ' '::\"char\" "</span> 
                          <span class='String'>"ELSE (SELECT relkind FROM pg_class WHERE oid = typrelid) END AS typrelkind, "</span> 
                          <span class='String'>"typtype, typisdefined, "</span> 
                          <span class='String'>"typname[0] = '_' AND typelem != 0 AND "</span> 
                          <span class='String'>"(SELECT typarray FROM pg_type te WHERE oid = pg_type.typelem) = oid AS isarray "</span> 
                          <span class='String'>"FROM pg_type"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4323"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4329"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, typname, "</span> 
                          <span class='String'>"typnamespace, NULL AS typacl, NULL as rtypacl, "</span> 
                          <span class='String'>"NULL AS inittypacl, NULL AS initrtypacl, "</span> 
                          <span class='String'>"(%s typowner) AS rolname, "</span> 
                          <span class='String'>"typelem, typrelid, "</span> 
                          <span class='String'>"CASE WHEN typrelid = 0 THEN ' '::\"char\" "</span> 
                          <span class='String'>"ELSE (SELECT relkind FROM pg_class WHERE oid = typrelid) END AS typrelkind, "</span> 
                          <span class='String'>"typtype, typisdefined, "</span> 
                          <span class='String'>"typname[0] = '_' AND typelem != 0 AND "</span> 
                          <span class='String'>"(SELECT typarray FROM pg_type te WHERE oid = pg_type.typelem) = oid AS isarray "</span> 
                          <span class='String'>"FROM pg_type"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4329"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, typname, "</span> 
                          <span class='String'>"typnamespace, NULL AS typacl, NULL as rtypacl, "</span> 
                          <span class='String'>"NULL AS inittypacl, NULL AS initrtypacl, "</span> 
                          <span class='String'>"(%s typowner) AS rolname, "</span> 
                          <span class='String'>"typelem, typrelid, "</span> 
                          <span class='String'>"CASE WHEN typrelid = 0 THEN ' '::\"char\" "</span> 
                          <span class='String'>"ELSE (SELECT relkind FROM pg_class WHERE oid = typrelid) END AS typrelkind, "</span> 
                          <span class='String'>"typtype, typisdefined, "</span> 
                          <span class='String'>"typname[0] = '_' AND typelem != 0 AS isarray "</span> 
                          <span class='String'>"FROM pg_type"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4323"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4329"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4327"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4327"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4332"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4333"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4334"><span class='Ref_To_Local'>i_typname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4335"><span class='Ref_To_Local'>i_typnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4336"><span class='Ref_To_Local'>i_typacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4337"><span class='Ref_To_Local'>i_rtypacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rtypacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4338"><span class='Ref_To_Local'>i_inittypacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"inittypacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4339"><span class='Ref_To_Local'>i_initrtypacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initrtypacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4340"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4341"><span class='Ref_To_Local'>i_typelem</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typelem"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4342"><span class='Ref_To_Local'>i_typrelid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typrelid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4343"><span class='Ref_To_Local'>i_typrelkind</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typrelkind"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4344"><span class='Ref_To_Local'>i_typtype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typtype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4345"><span class='Ref_To_Local'>i_typisdefined</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typisdefined"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4346"><span class='Ref_To_Local'>i_isarray</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"isarray"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN4327"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN45"><span class='Ref_to_EnumConst'>DO_TYPE</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4332"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4333"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4334"><span class='Ref_To_Local'>i_typname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4323"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4335"><span class='Ref_To_Local'>i_typnamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4340"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN171"><span class='Ref_to_Member'>typacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4336"><span class='Ref_To_Local'>i_typacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN172"><span class='Ref_to_Member'>rtypacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4337"><span class='Ref_To_Local'>i_rtypacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN173"><span class='Ref_to_Member'>inittypacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4338"><span class='Ref_To_Local'>i_inittypacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN174"><span class='Ref_to_Member'>initrtypacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4339"><span class='Ref_To_Local'>i_initrtypacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN175"><span class='Ref_to_Member'>typelem</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4341"><span class='Ref_To_Local'>i_typelem</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN176"><span class='Ref_to_Member'>typrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4342"><span class='Ref_To_Local'>i_typrelid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN177"><span class='Ref_to_Member'>typrelkind</span></a> <span class='Operator'>= *</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4343"><span class='Ref_To_Local'>i_typrelkind</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN178"><span class='Ref_to_Member'>typtype</span></a> <span class='Operator'>= *</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4344"><span class='Ref_To_Local'>i_typtype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN182"><span class='Ref_to_Member'>shellType</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4345"><span class='Ref_To_Local'>i_typisdefined</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN180"><span class='Ref_to_Member'>isDefined</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN180"><span class='Ref_to_Member'>isDefined</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4346"><span class='Ref_To_Local'>i_isarray</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN179"><span class='Ref_to_Member'>isArray</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN179"><span class='Ref_to_Member'>isArray</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1464"><span class='Ref_to_Func'>selectDumpableType</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="pg_dump.c.html#LN4323"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Do not try to dump ACL if no ACL exists. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4336"><span class='Ref_To_Local'>i_typacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4337"><span class='Ref_To_Local'>i_rtypacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4338"><span class='Ref_To_Local'>i_inittypacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4339"><span class='Ref_To_Local'>i_initrtypacl</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If it's a domain, fetch info about its constraints, if any 
         */ 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN184"><span class='Ref_to_Member'>nDomChecks</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN185"><span class='Ref_to_Member'>domChecks</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN178"><span class='Ref_to_Member'>typtype</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN721"><span class='Ref_to_Const'>TYPTYPE_DOMAIN</span></a><span class='Parentheses'>)</span> 
            <a href="pg_dump.c.html#LN223"><span class='Ref_to_Proto'>getDomainConstraints</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4323"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If it's a base type, make a DumpableObject representing a shell 
         * definition of the type.  We will need to dump that ahead of the I/O 
         * functions for the type.  Similarly, range types need a shell 
         * definition in case they have a canonicalize function. 
         * 
         * Note: the shell type doesn't have a catId.  You might think it 
         * should copy the base type's catId, but then it might capture the 
         * pg_depend entries for the type, which we don't want. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN178"><span class='Ref_to_Member'>typtype</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN719"><span class='Ref_to_Const'>TYPTYPE_BASE</span></a> <span class='Operator'>|| 
</span>             <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN178"><span class='Ref_to_Member'>typtype</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN724"><span class='Ref_to_Const'>TYPTYPE_RANGE</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN4331"><span class='Ref_To_Local'>stinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN188"><span class='Ref_to_Typedef'>ShellTypeInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN188"><span class='Ref_to_Typedef'>ShellTypeInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN4331"><span class='Ref_To_Local'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN46"><span class='Ref_to_EnumConst'>DO_SHELL_TYPE</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN4331"><span class='Ref_To_Local'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>; 
</span>            <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4331"><span class='Ref_To_Local'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN4331"><span class='Ref_To_Local'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN4331"><span class='Ref_To_Local'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN4331"><span class='Ref_To_Local'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN192"><span class='Ref_to_Member'>baseType</span></a> <span class='Operator'>= &</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN182"><span class='Ref_to_Member'>shellType</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4331"><span class='Ref_To_Local'>stinfo</span></a><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Initially mark the shell type as not to be dumped.  We'll only 
             * dump it if the I/O or canonicalize functions need to be dumped; 
             * this is taken care of while sorting dependencies. 
             */ 
</span>            <a href="pg_dump.c.html#LN4331"><span class='Ref_To_Local'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if (tyinfo[i].dobj.dump&... &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: owner of data type \"%s\" appears to be invalid\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4328"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN4323"><span class='Ref_to_Parameter'>numTypes</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4327"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4326"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4329"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN4330"><span class='Ref_To_Local'>tyinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTypes &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getOperators: 
 *    read all operators in the system catalogs and return them in the 
 * OprInfo* structure 
 * 
 *  numOprs is set to the number of operators read in 
 */ 
</span><a href="pg_dump.h.html#LN216"><span class='Ref_to_Typedef'>OprInfo</span></a> <span class='Operator'>* 
</span><a name="LN4576"></a><span class='Declare_Function'>getOperators</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numOprs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4578"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN4579"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN4580"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN4581"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN4582"></a>    <a href="pg_dump.h.html#LN216"><span class='Ref_to_Typedef'>OprInfo</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>oprinfo</span><span class='Delimiter'>; 
</span><a name="LN4583"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN4584"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN4585"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprname</span><span class='Delimiter'>; 
</span><a name="LN4586"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprnamespace</span><span class='Delimiter'>; 
</span><a name="LN4587"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN4588"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprkind</span><span class='Delimiter'>; 
</span><a name="LN4589"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprcode</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * find all operators, including builtin operators; we filter out 
     * system-defined operators at dump-out time. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4576"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4581"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, oprname, "</span> 
                      <span class='String'>"oprnamespace, "</span> 
                      <span class='String'>"(%s oprowner) AS rolname, "</span> 
                      <span class='String'>"oprkind, "</span> 
                      <span class='String'>"oprcode::oid AS oprcode "</span> 
                      <span class='String'>"FROM pg_operator"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4576"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4581"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4579"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN4576"><span class='Ref_to_Parameter'>numOprs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4579"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN216"><span class='Ref_to_Typedef'>OprInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4579"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN216"><span class='Ref_to_Typedef'>OprInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4583"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4584"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4585"><span class='Ref_To_Local'>i_oprname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4586"><span class='Ref_To_Local'>i_oprnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4587"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4588"><span class='Ref_To_Local'>i_oprkind</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprkind"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4589"><span class='Ref_To_Local'>i_oprcode</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprcode"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN4579"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN49"><span class='Ref_to_EnumConst'>DO_OPERATOR</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4583"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4584"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4585"><span class='Ref_To_Local'>i_oprname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4576"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4586"><span class='Ref_To_Local'>i_oprnamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN219"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4587"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN220"><span class='Ref_to_Member'>oprkind</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4588"><span class='Ref_To_Local'>i_oprkind</span></a><span class='Parentheses'>))</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>        <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN221"><span class='Ref_to_Member'>oprcode</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4589"><span class='Ref_To_Local'>i_oprcode</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4576"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Operators do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN219"><span class='Ref_to_Member'>rolname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: owner of operator \"%s\" appears to be invalid\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4580"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4578"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4581"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN4582"><span class='Ref_To_Local'>oprinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getOperators &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getCollations: 
 *    read all collations in the system catalogs and return them in the 
 * CollInfo* structure 
 * 
 *  numCollations is set to the number of collations read in 
 */ 
</span><a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a> <span class='Operator'>* 
</span><a name="LN4662"></a><span class='Declare_Function'>getCollations</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numCollations</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4664"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN4665"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN4666"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN4667"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN4668"></a>    <a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>collinfo</span><span class='Delimiter'>; 
</span><a name="LN4669"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN4670"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN4671"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_collname</span><span class='Delimiter'>; 
</span><a name="LN4672"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_collnamespace</span><span class='Delimiter'>; 
</span><a name="LN4673"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Collations didn't exist pre-9.1 */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4662"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN4662"><span class='Ref_to_Parameter'>numCollations</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN4667"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * find all collations, including builtin collations; we filter out 
     * system-defined collations at dump-out time. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4662"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4667"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, collname, "</span> 
                      <span class='String'>"collnamespace, "</span> 
                      <span class='String'>"(%s collowner) AS rolname "</span> 
                      <span class='String'>"FROM pg_collation"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4662"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4667"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4665"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN4662"><span class='Ref_to_Parameter'>numCollations</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4665"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4668"><span class='Ref_To_Local'>collinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4665"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4669"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4670"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4671"><span class='Ref_To_Local'>i_collname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"collname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4672"><span class='Ref_To_Local'>i_collnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"collnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4673"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN4665"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN4668"><span class='Ref_To_Local'>collinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN53"><span class='Ref_to_EnumConst'>DO_COLLATION</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4668"><span class='Ref_To_Local'>collinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4669"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4668"><span class='Ref_To_Local'>collinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4670"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4668"><span class='Ref_To_Local'>collinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4668"><span class='Ref_To_Local'>collinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4671"><span class='Ref_To_Local'>i_collname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4668"><span class='Ref_To_Local'>collinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4662"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4672"><span class='Ref_To_Local'>i_collnamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4668"><span class='Ref_To_Local'>collinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN246"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4673"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4668"><span class='Ref_To_Local'>collinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4662"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Collations do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN4668"><span class='Ref_To_Local'>collinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4666"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4664"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4667"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN4668"><span class='Ref_To_Local'>collinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getCollations &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getConversions: 
 *    read all conversions in the system catalogs and return them in the 
 * ConvInfo* structure 
 * 
 *  numConversions is set to the number of conversions read in 
 */ 
</span><a href="pg_dump.h.html#LN249"><span class='Ref_to_Typedef'>ConvInfo</span></a> <span class='Operator'>* 
</span><a name="LN4745"></a><span class='Declare_Function'>getConversions</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numConversions</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4747"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN4748"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN4749"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN4750"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN4751"></a>    <a href="pg_dump.h.html#LN249"><span class='Ref_to_Typedef'>ConvInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>convinfo</span><span class='Delimiter'>; 
</span><a name="LN4752"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN4753"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN4754"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_conname</span><span class='Delimiter'>; 
</span><a name="LN4755"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_connamespace</span><span class='Delimiter'>; 
</span><a name="LN4756"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4750"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * find all conversions, including builtin conversions; we filter out 
     * system-defined conversions at dump-out time. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4745"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4750"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, conname, "</span> 
                      <span class='String'>"connamespace, "</span> 
                      <span class='String'>"(%s conowner) AS rolname "</span> 
                      <span class='String'>"FROM pg_conversion"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4745"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4750"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4748"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN4745"><span class='Ref_to_Parameter'>numConversions</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4748"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4751"><span class='Ref_To_Local'>convinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN249"><span class='Ref_to_Typedef'>ConvInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4748"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN249"><span class='Ref_to_Typedef'>ConvInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4752"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4753"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4754"><span class='Ref_To_Local'>i_conname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"conname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4755"><span class='Ref_To_Local'>i_connamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"connamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4756"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN4748"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN4751"><span class='Ref_To_Local'>convinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN54"><span class='Ref_to_EnumConst'>DO_CONVERSION</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4751"><span class='Ref_To_Local'>convinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4752"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4751"><span class='Ref_To_Local'>convinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4753"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4751"><span class='Ref_To_Local'>convinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4751"><span class='Ref_To_Local'>convinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4754"><span class='Ref_To_Local'>i_conname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4751"><span class='Ref_To_Local'>convinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4745"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4755"><span class='Ref_To_Local'>i_connamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4751"><span class='Ref_To_Local'>convinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN252"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4756"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4751"><span class='Ref_To_Local'>convinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4745"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Conversions do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN4751"><span class='Ref_To_Local'>convinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4749"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4747"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4750"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN4751"><span class='Ref_To_Local'>convinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getConversions &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getAccessMethods: 
 *    read all user-defined access methods in the system catalogs and return 
 *    them in the AccessMethodInfo* structure 
 * 
 *  numAccessMethods is set to the number of access methods read in 
 */ 
</span><a href="pg_dump.h.html#LN224"><span class='Ref_to_Typedef'>AccessMethodInfo</span></a> <span class='Operator'>* 
</span><a name="LN4821"></a><span class='Declare_Function'>getAccessMethods</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numAccessMethods</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4823"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN4824"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN4825"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN4826"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN4827"></a>    <a href="pg_dump.h.html#LN224"><span class='Ref_to_Typedef'>AccessMethodInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>aminfo</span><span class='Delimiter'>; 
</span><a name="LN4828"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN4829"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN4830"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amname</span><span class='Delimiter'>; 
</span><a name="LN4831"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amhandler</span><span class='Delimiter'>; 
</span><a name="LN4832"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amtype</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Before 9.6, there are no user-defined access methods */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4821"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN4821"><span class='Ref_to_Parameter'>numAccessMethods</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN4826"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4821"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Select all access methods from pg_am table */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4826"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, amname, amtype, "</span> 
                      <span class='String'>"amhandler::pg_catalog.regproc AS amhandler "</span> 
                      <span class='String'>"FROM pg_am"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4821"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4826"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4824"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN4821"><span class='Ref_to_Parameter'>numAccessMethods</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4824"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN224"><span class='Ref_to_Typedef'>AccessMethodInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4824"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN224"><span class='Ref_to_Typedef'>AccessMethodInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4828"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4829"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4830"><span class='Ref_To_Local'>i_amname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4831"><span class='Ref_To_Local'>i_amhandler</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amhandler"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4832"><span class='Ref_To_Local'>i_amtype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amtype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN4824"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN50"><span class='Ref_to_EnumConst'>DO_ACCESS_METHOD</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4828"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4829"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4830"><span class='Ref_To_Local'>i_amname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN228"><span class='Ref_to_Member'>amhandler</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4831"><span class='Ref_To_Local'>i_amhandler</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN227"><span class='Ref_to_Member'>amtype</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4832"><span class='Ref_To_Local'>i_amtype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1589"><span class='Ref_to_Func'>selectDumpableAccessMethod</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4821"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Access methods do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4825"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4823"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4826"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN4827"><span class='Ref_To_Local'>aminfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getAccessMethods &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * getOpclasses: 
 *    read all opclasses in the system catalogs and return them in the 
 * OpclassInfo* structure 
 * 
 *  numOpclasses is set to the number of opclasses read in 
 */ 
</span><a href="pg_dump.h.html#LN231"><span class='Ref_to_Typedef'>OpclassInfo</span></a> <span class='Operator'>* 
</span><a name="LN4898"></a><span class='Declare_Function'>getOpclasses</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numOpclasses</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4900"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN4901"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN4902"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN4903"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN4904"></a>    <a href="pg_dump.h.html#LN231"><span class='Ref_to_Typedef'>OpclassInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>opcinfo</span><span class='Delimiter'>; 
</span><a name="LN4905"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN4906"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN4907"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_opcname</span><span class='Delimiter'>; 
</span><a name="LN4908"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_opcnamespace</span><span class='Delimiter'>; 
</span><a name="LN4909"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * find all opclasses, including builtin opclasses; we filter out 
     * system-defined opclasses at dump-out time. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4898"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4903"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, opcname, "</span> 
                      <span class='String'>"opcnamespace, "</span> 
                      <span class='String'>"(%s opcowner) AS rolname "</span> 
                      <span class='String'>"FROM pg_opclass"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4898"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4903"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4901"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN4898"><span class='Ref_to_Parameter'>numOpclasses</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4901"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN231"><span class='Ref_to_Typedef'>OpclassInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4901"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN231"><span class='Ref_to_Typedef'>OpclassInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4905"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4906"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4907"><span class='Ref_To_Local'>i_opcname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opcname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4908"><span class='Ref_To_Local'>i_opcnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opcnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4909"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN4901"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN51"><span class='Ref_to_EnumConst'>DO_OPCLASS</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4905"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4906"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4907"><span class='Ref_To_Local'>i_opcname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4898"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4908"><span class='Ref_To_Local'>i_opcnamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN234"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4909"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4898"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Op Classes do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN234"><span class='Ref_to_Member'>rolname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: owner of operator class \"%s\" appears to be invalid\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4902"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4900"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4903"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN4904"><span class='Ref_To_Local'>opcinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getOpclasses &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getOpfamilies: 
 *    read all opfamilies in the system catalogs and return them in the 
 * OpfamilyInfo* structure 
 * 
 *  numOpfamilies is set to the number of opfamilies read in 
 */ 
</span><a href="pg_dump.h.html#LN237"><span class='Ref_to_Typedef'>OpfamilyInfo</span></a> <span class='Operator'>* 
</span><a name="LN4976"></a><span class='Declare_Function'>getOpfamilies</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numOpfamilies</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN4978"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN4979"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN4980"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN4981"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN4982"></a>    <a href="pg_dump.h.html#LN237"><span class='Ref_to_Typedef'>OpfamilyInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>opfinfo</span><span class='Delimiter'>; 
</span><a name="LN4983"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN4984"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN4985"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_opfname</span><span class='Delimiter'>; 
</span><a name="LN4986"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_opfnamespace</span><span class='Delimiter'>; 
</span><a name="LN4987"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Before 8.3, there is no separate concept of opfamilies */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4976"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN4976"><span class='Ref_to_Parameter'>numOpfamilies</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN4981"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * find all opfamilies, including builtin opfamilies; we filter out 
     * system-defined opfamilies at dump-out time. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4976"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4981"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, opfname, "</span> 
                      <span class='String'>"opfnamespace, "</span> 
                      <span class='String'>"(%s opfowner) AS rolname "</span> 
                      <span class='String'>"FROM pg_opfamily"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4976"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4981"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4979"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN4976"><span class='Ref_to_Parameter'>numOpfamilies</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN4979"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN237"><span class='Ref_to_Typedef'>OpfamilyInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4979"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN237"><span class='Ref_to_Typedef'>OpfamilyInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN4983"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4984"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4985"><span class='Ref_To_Local'>i_opfname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opfname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4986"><span class='Ref_To_Local'>i_opfnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opfnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN4987"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN4979"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN52"><span class='Ref_to_EnumConst'>DO_OPFAMILY</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4983"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4984"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4985"><span class='Ref_To_Local'>i_opfname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4976"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4986"><span class='Ref_To_Local'>i_opfnamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN240"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4987"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN4976"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Extensions do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN240"><span class='Ref_to_Member'>rolname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: owner of operator family \"%s\" appears to be invalid\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN4980"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4978"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN4981"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN4982"><span class='Ref_To_Local'>opfinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getOpfamilies &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getAggregates: 
 *    read all the user-defined aggregates in the system catalogs and 
 * return them in the AggInfo* structure 
 * 
 * numAggs is set to the number of aggregates read in 
 */ 
</span><a href="pg_dump.h.html#LN210"><span class='Ref_to_Typedef'>AggInfo</span></a> <span class='Operator'>* 
</span><a name="LN5063"></a><span class='Declare_Function'>getAggregates</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numAggs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5065"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN5063"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN5066"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN5067"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN5068"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN5069"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5070"></a>    <a href="pg_dump.h.html#LN210"><span class='Ref_to_Typedef'>AggInfo</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>agginfo</span><span class='Delimiter'>; 
</span><a name="LN5071"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN5072"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN5073"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggname</span><span class='Delimiter'>; 
</span><a name="LN5074"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggnamespace</span><span class='Delimiter'>; 
</span><a name="LN5075"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_pronargs</span><span class='Delimiter'>; 
</span><a name="LN5076"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_proargtypes</span><span class='Delimiter'>; 
</span><a name="LN5077"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN5078"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggacl</span><span class='Delimiter'>; 
</span><a name="LN5079"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_raggacl</span><span class='Delimiter'>; 
</span><a name="LN5080"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initaggacl</span><span class='Delimiter'>; 
</span><a name="LN5081"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initraggacl</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5063"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Find all interesting aggregates.  See comment in getFuncs() for the 
     * rationale behind the filtering logic. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5063"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN5092"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5093"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5094"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initacl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5095"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initracl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5092"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5093"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5094"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN5095"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"p.proacl"</span><span class='Delimiter'>, </span><span class='String'>"p.proowner"</span><span class='Delimiter'>, </span><span class='String'>"'f'"</span><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN5065"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5069"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT p.tableoid, p.oid, "</span> 
                          <span class='String'>"p.proname AS aggname, "</span> 
                          <span class='String'>"p.pronamespace AS aggnamespace, "</span> 
                          <span class='String'>"p.pronargs, p.proargtypes, "</span> 
                          <span class='String'>"(%s p.proowner) AS rolname, "</span> 
                          <span class='String'>"%s AS aggacl, "</span> 
                          <span class='String'>"%s AS raggacl, "</span> 
                          <span class='String'>"%s AS initaggacl, "</span> 
                          <span class='String'>"%s AS initraggacl "</span> 
                          <span class='String'>"FROM pg_proc p "</span> 
                          <span class='String'>"LEFT JOIN pg_init_privs pip ON "</span> 
                          <span class='String'>"(p.oid = pip.objoid "</span> 
                          <span class='String'>"AND pip.classoid = 'pg_proc'::regclass "</span> 
                          <span class='String'>"AND pip.objsubid = 0) "</span> 
                          <span class='String'>"WHERE p.proisagg AND ("</span> 
                          <span class='String'>"p.pronamespace != "</span> 
                          <span class='String'>"(SELECT oid FROM pg_namespace "</span> 
                          <span class='String'>"WHERE nspname = 'pg_catalog') OR "</span> 
                          <span class='String'>"p.proacl IS DISTINCT FROM pip.initprivs"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5092"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5093"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5094"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5095"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5065"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5069"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                                 <span class='String'>" OR EXISTS(SELECT 1 FROM pg_depend WHERE "</span> 
                                 <span class='String'>"classid = 'pg_proc'::regclass AND "</span> 
                                 <span class='String'>"objid = p.oid AND "</span> 
                                 <span class='String'>"refclassid = 'pg_extension'::regclass AND "</span> 
                                 <span class='String'>"deptype = 'e')"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5069"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5092"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5093"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5094"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5095"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5063"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80200</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5069"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, proname AS aggname, "</span> 
                          <span class='String'>"pronamespace AS aggnamespace, "</span> 
                          <span class='String'>"pronargs, proargtypes, "</span> 
                          <span class='String'>"(%s proowner) AS rolname, "</span> 
                          <span class='String'>"proacl AS aggacl, "</span> 
                          <span class='String'>"NULL AS raggacl, "</span> 
                          <span class='String'>"NULL AS initaggacl, NULL AS initraggacl "</span> 
                          <span class='String'>"FROM pg_proc p "</span> 
                          <span class='String'>"WHERE proisagg AND ("</span> 
                          <span class='String'>"pronamespace != "</span> 
                          <span class='String'>"(SELECT oid FROM pg_namespace "</span> 
                          <span class='String'>"WHERE nspname = 'pg_catalog')"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5065"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN5063"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5069"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                                 <span class='String'>" OR EXISTS(SELECT 1 FROM pg_depend WHERE "</span> 
                                 <span class='String'>"classid = 'pg_proc'::regclass AND "</span> 
                                 <span class='String'>"objid = p.oid AND "</span> 
                                 <span class='String'>"refclassid = 'pg_extension'::regclass AND "</span> 
                                 <span class='String'>"deptype = 'e')"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5069"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5069"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, proname AS aggname, "</span> 
                          <span class='String'>"pronamespace AS aggnamespace, "</span> 
                          <span class='String'>"CASE WHEN proargtypes[0] = 'pg_catalog.\"any\"'::pg_catalog.regtype THEN 0 ELSE 1 END AS pronargs, "</span> 
                          <span class='String'>"proargtypes, "</span> 
                          <span class='String'>"(%s proowner) AS rolname, "</span> 
                          <span class='String'>"proacl AS aggacl, "</span> 
                          <span class='String'>"NULL AS raggacl, "</span> 
                          <span class='String'>"NULL AS initaggacl, NULL AS initraggacl "</span> 
                          <span class='String'>"FROM pg_proc "</span> 
                          <span class='String'>"WHERE proisagg "</span> 
                          <span class='String'>"AND pronamespace != "</span> 
               <span class='String'>"(SELECT oid FROM pg_namespace WHERE nspname = 'pg_catalog')"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5063"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5069"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN5067"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN5063"><span class='Ref_to_Parameter'>numAggs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN5067"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN210"><span class='Ref_to_Typedef'>AggInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5067"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN210"><span class='Ref_to_Typedef'>AggInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN5071"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5072"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5073"><span class='Ref_To_Local'>i_aggname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5074"><span class='Ref_To_Local'>i_aggnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5075"><span class='Ref_To_Local'>i_pronargs</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"pronargs"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5076"><span class='Ref_To_Local'>i_proargtypes</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proargtypes"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5077"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5078"><span class='Ref_To_Local'>i_aggacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5079"><span class='Ref_To_Local'>i_raggacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"raggacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5080"><span class='Ref_To_Local'>i_initaggacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initaggacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5081"><span class='Ref_To_Local'>i_initraggacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initraggacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN5067"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN48"><span class='Ref_to_EnumConst'>DO_AGG</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5071"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5072"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5073"><span class='Ref_To_Local'>i_aggname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5063"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5074"><span class='Ref_To_Local'>i_aggnamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5077"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: owner of aggregate function \"%s\" appears to be invalid\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN199"><span class='Ref_to_Member'>lang</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* not currently interesting */ 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN202"><span class='Ref_to_Member'>prorettype</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* not saved */ 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN203"><span class='Ref_to_Member'>proacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5078"><span class='Ref_To_Local'>i_aggacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN204"><span class='Ref_to_Member'>rproacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5079"><span class='Ref_To_Local'>i_raggacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN205"><span class='Ref_to_Member'>initproacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5080"><span class='Ref_To_Local'>i_initaggacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN206"><span class='Ref_to_Member'>initrproacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5081"><span class='Ref_To_Local'>i_initraggacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5075"><span class='Ref_To_Local'>i_pronargs</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN201"><span class='Ref_to_Member'>argtypes</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN201"><span class='Ref_to_Member'>argtypes</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.h.html#LN660"><span class='Ref_to_Proto'>parseOidArray</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5076"><span class='Ref_To_Local'>i_proargtypes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN201"><span class='Ref_to_Member'>argtypes</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5063"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Do not try to dump ACL if no ACL exists. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5078"><span class='Ref_To_Local'>i_aggacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5079"><span class='Ref_To_Local'>i_raggacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5080"><span class='Ref_To_Local'>i_initaggacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5081"><span class='Ref_To_Local'>i_initraggacl</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5068"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5066"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5069"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN5070"><span class='Ref_To_Local'>agginfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getAggregates &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getFuncs: 
 *    read all the user-defined functions in the system catalogs and 
 * return them in the FuncInfo* structure 
 * 
 * numFuncs is set to the number of functions read in 
 */ 
</span><a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a> <span class='Operator'>* 
</span><a name="LN5255"></a><span class='Declare_Function'>getFuncs</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numFuncs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5257"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN5255"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN5258"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN5259"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN5260"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN5261"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5262"></a>    <a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>finfo</span><span class='Delimiter'>; 
</span><a name="LN5263"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN5264"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN5265"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_proname</span><span class='Delimiter'>; 
</span><a name="LN5266"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_pronamespace</span><span class='Delimiter'>; 
</span><a name="LN5267"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN5268"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_prolang</span><span class='Delimiter'>; 
</span><a name="LN5269"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_pronargs</span><span class='Delimiter'>; 
</span><a name="LN5270"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_proargtypes</span><span class='Delimiter'>; 
</span><a name="LN5271"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_prorettype</span><span class='Delimiter'>; 
</span><a name="LN5272"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_proacl</span><span class='Delimiter'>; 
</span><a name="LN5273"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rproacl</span><span class='Delimiter'>; 
</span><a name="LN5274"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initproacl</span><span class='Delimiter'>; 
</span><a name="LN5275"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initrproacl</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5255"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Find all interesting functions.  This is a bit complicated: 
     * 
     * 1. Always exclude aggregates; those are handled elsewhere. 
     * 
     * 2. Always exclude functions that are internally dependent on something 
     * else, since presumably those will be created as a result of creating 
     * the something else.  This currently acts only to suppress constructor 
     * functions for range types (so we only need it in 9.2 and up).  Note 
     * this is OK only because the constructors don't have any dependencies 
     * the range type doesn't have; otherwise we might not get creation 
     * ordering correct. 
     * 
     * 3. Otherwise, we normally exclude functions in pg_catalog.  However, if 
     * they're members of extensions and we are in binary-upgrade mode then 
     * include them, since we want to dump extension members individually in 
     * that mode.  Also, if they are used by casts or transforms then we need 
     * to gather the information about them, though they won't be dumped if 
     * they are built-in.  Also, in 9.6 and up, include functions in 
     * pg_catalog if they have an ACL different from what's shown in 
     * pg_init_privs. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5255"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN5304"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5305"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5306"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initacl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5307"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initracl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5304"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5305"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5306"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN5307"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"p.proacl"</span><span class='Delimiter'>, </span><span class='String'>"p.proowner"</span><span class='Delimiter'>, </span><span class='String'>"'f'"</span><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN5257"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT p.tableoid, p.oid, p.proname, p.prolang, "</span> 
                          <span class='String'>"p.pronargs, p.proargtypes, p.prorettype, "</span> 
                          <span class='String'>"%s AS proacl, "</span> 
                          <span class='String'>"%s AS rproacl, "</span> 
                          <span class='String'>"%s AS initproacl, "</span> 
                          <span class='String'>"%s AS initrproacl, "</span> 
                          <span class='String'>"p.pronamespace, "</span> 
                          <span class='String'>"(%s p.proowner) AS rolname "</span> 
                          <span class='String'>"FROM pg_proc p "</span> 
                          <span class='String'>"LEFT JOIN pg_init_privs pip ON "</span> 
                          <span class='String'>"(p.oid = pip.objoid "</span> 
                          <span class='String'>"AND pip.classoid = 'pg_proc'::regclass "</span> 
                          <span class='String'>"AND pip.objsubid = 0) "</span> 
                          <span class='String'>"WHERE NOT proisagg"</span> 
                          <span class='String'>"\n  AND NOT EXISTS (SELECT 1 FROM pg_depend "</span> 
                          <span class='String'>"WHERE classid = 'pg_proc'::regclass AND "</span> 
                          <span class='String'>"objid = p.oid AND deptype = 'i')"</span> 
                          <span class='String'>"\n  AND ("</span> 
                          <span class='String'>"\n  pronamespace != "</span> 
                          <span class='String'>"(SELECT oid FROM pg_namespace "</span> 
                          <span class='String'>"WHERE nspname = 'pg_catalog')"</span> 
                          <span class='String'>"\n  OR EXISTS (SELECT 1 FROM pg_cast"</span> 
                          <span class='String'>"\n  WHERE pg_cast.oid &GT; %u "</span> 
                          <span class='String'>"\n  AND p.oid = pg_cast.castfunc)"</span> 
                          <span class='String'>"\n  OR EXISTS (SELECT 1 FROM pg_transform"</span> 
                          <span class='String'>"\n  WHERE pg_transform.oid &GT; %u AND "</span> 
                          <span class='String'>"\n  (p.oid = pg_transform.trffromsql"</span> 
                          <span class='String'>"\n  OR p.oid = pg_transform.trftosql))"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5304"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5305"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5306"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5307"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN101"><span class='Ref_to_Global_Var'>g_last_builtin_oid</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN101"><span class='Ref_to_Global_Var'>g_last_builtin_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5257"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                               <span class='String'>"\n  OR EXISTS(SELECT 1 FROM pg_depend WHERE "</span> 
                                 <span class='String'>"classid = 'pg_proc'::regclass AND "</span> 
                                 <span class='String'>"objid = p.oid AND "</span> 
                                 <span class='String'>"refclassid = 'pg_extension'::regclass AND "</span> 
                                 <span class='String'>"deptype = 'e')"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                           <span class='String'>"\n  OR p.proacl IS DISTINCT FROM pip.initprivs"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5304"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5305"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5306"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5307"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT tableoid, oid, proname, prolang, "</span> 
                          <span class='String'>"pronargs, proargtypes, prorettype, proacl, "</span> 
                          <span class='String'>"NULL as rproacl, "</span> 
                          <span class='String'>"NULL as initproacl, NULL AS initrproacl, "</span> 
                          <span class='String'>"pronamespace, "</span> 
                          <span class='String'>"(%s proowner) AS rolname "</span> 
                          <span class='String'>"FROM pg_proc p "</span> 
                          <span class='String'>"WHERE NOT proisagg"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5255"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90200</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                               <span class='String'>"\n  AND NOT EXISTS (SELECT 1 FROM pg_depend "</span> 
                                 <span class='String'>"WHERE classid = 'pg_proc'::regclass AND "</span> 
                                 <span class='String'>"objid = p.oid AND deptype = 'i')"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"\n  AND ("</span> 
                          <span class='String'>"\n  pronamespace != "</span> 
                          <span class='String'>"(SELECT oid FROM pg_namespace "</span> 
                          <span class='String'>"WHERE nspname = 'pg_catalog')"</span> 
                          <span class='String'>"\n  OR EXISTS (SELECT 1 FROM pg_cast"</span> 
                          <span class='String'>"\n  WHERE pg_cast.oid &GT; '%u'::oid"</span> 
                          <span class='String'>"\n  AND p.oid = pg_cast.castfunc)"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN101"><span class='Ref_to_Global_Var'>g_last_builtin_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5255"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90500</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"\n  OR EXISTS (SELECT 1 FROM pg_transform"</span> 
                              <span class='String'>"\n  WHERE pg_transform.oid &GT; '%u'::oid"</span> 
                              <span class='String'>"\n  AND (p.oid = pg_transform.trffromsql"</span> 
                              <span class='String'>"\n  OR p.oid = pg_transform.trftosql))"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN101"><span class='Ref_to_Global_Var'>g_last_builtin_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5257"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN5255"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                               <span class='String'>"\n  OR EXISTS(SELECT 1 FROM pg_depend WHERE "</span> 
                                 <span class='String'>"classid = 'pg_proc'::regclass AND "</span> 
                                 <span class='String'>"objid = p.oid AND "</span> 
                                 <span class='String'>"refclassid = 'pg_extension'::regclass AND "</span> 
                                 <span class='String'>"deptype = 'e')"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5255"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN5259"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN5255"><span class='Ref_to_Parameter'>numFuncs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN5259"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN26"><span class='Ref_to_Proto'>pg_malloc0</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5259"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN5263"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5264"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5265"><span class='Ref_To_Local'>i_proname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5266"><span class='Ref_To_Local'>i_pronamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"pronamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5267"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5268"><span class='Ref_To_Local'>i_prolang</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prolang"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5269"><span class='Ref_To_Local'>i_pronargs</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"pronargs"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5270"><span class='Ref_To_Local'>i_proargtypes</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proargtypes"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5271"><span class='Ref_To_Local'>i_prorettype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prorettype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5272"><span class='Ref_To_Local'>i_proacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5273"><span class='Ref_To_Local'>i_rproacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rproacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5274"><span class='Ref_To_Local'>i_initproacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initproacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5275"><span class='Ref_To_Local'>i_initrproacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initrproacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN5259"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN47"><span class='Ref_to_EnumConst'>DO_FUNC</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5263"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5264"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5265"><span class='Ref_To_Local'>i_proname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5255"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5266"><span class='Ref_To_Local'>i_pronamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5267"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN199"><span class='Ref_to_Member'>lang</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5268"><span class='Ref_To_Local'>i_prolang</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN202"><span class='Ref_to_Member'>prorettype</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5271"><span class='Ref_To_Local'>i_prorettype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN203"><span class='Ref_to_Member'>proacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5272"><span class='Ref_To_Local'>i_proacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN204"><span class='Ref_to_Member'>rproacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5273"><span class='Ref_To_Local'>i_rproacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN205"><span class='Ref_to_Member'>initproacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5274"><span class='Ref_To_Local'>i_initproacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN206"><span class='Ref_to_Member'>initrproacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5275"><span class='Ref_To_Local'>i_initrproacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5269"><span class='Ref_To_Local'>i_pronargs</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN201"><span class='Ref_to_Member'>argtypes</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN201"><span class='Ref_to_Member'>argtypes</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.h.html#LN660"><span class='Ref_to_Proto'>parseOidArray</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5270"><span class='Ref_To_Local'>i_proargtypes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN201"><span class='Ref_to_Member'>argtypes</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5255"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Do not try to dump ACL if no ACL exists. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5272"><span class='Ref_To_Local'>i_proacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5273"><span class='Ref_To_Local'>i_rproacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5274"><span class='Ref_To_Local'>i_initproacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5275"><span class='Ref_To_Local'>i_initrproacl</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                 <span class='String'>"WARNING: owner of function \"%s\" appears to be invalid\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5260"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5258"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5261"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN5262"><span class='Ref_To_Local'>finfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getFuncs &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTables 
 *    read all the tables (no indexes) 
 * in the system catalogs return them in the TableInfo* structure 
 * 
 * numTables is set to the number of tables read in 
 */ 
</span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>* 
</span><a name="LN5489"></a><span class='Declare_Function'>getTables</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numTables</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN5491"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN5492"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN5493"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN5494"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN5495"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5496"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tblinfo</span><span class='Delimiter'>; 
</span><a name="LN5497"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_reltableoid</span><span class='Delimiter'>; 
</span><a name="LN5498"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_reloid</span><span class='Delimiter'>; 
</span><a name="LN5499"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relname</span><span class='Delimiter'>; 
</span><a name="LN5500"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relnamespace</span><span class='Delimiter'>; 
</span><a name="LN5501"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relkind</span><span class='Delimiter'>; 
</span><a name="LN5502"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relacl</span><span class='Delimiter'>; 
</span><a name="LN5503"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rrelacl</span><span class='Delimiter'>; 
</span><a name="LN5504"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initrelacl</span><span class='Delimiter'>; 
</span><a name="LN5505"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initrrelacl</span><span class='Delimiter'>; 
</span><a name="LN5506"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN5507"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relchecks</span><span class='Delimiter'>; 
</span><a name="LN5508"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relhastriggers</span><span class='Delimiter'>; 
</span><a name="LN5509"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relhasindex</span><span class='Delimiter'>; 
</span><a name="LN5510"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relhasrules</span><span class='Delimiter'>; 
</span><a name="LN5511"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relrowsec</span><span class='Delimiter'>; 
</span><a name="LN5512"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relforcerowsec</span><span class='Delimiter'>; 
</span><a name="LN5513"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relhasoids</span><span class='Delimiter'>; 
</span><a name="LN5514"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relfrozenxid</span><span class='Delimiter'>; 
</span><a name="LN5515"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relminmxid</span><span class='Delimiter'>; 
</span><a name="LN5516"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_toastoid</span><span class='Delimiter'>; 
</span><a name="LN5517"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_toastfrozenxid</span><span class='Delimiter'>; 
</span><a name="LN5518"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_toastminmxid</span><span class='Delimiter'>; 
</span><a name="LN5519"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relpersistence</span><span class='Delimiter'>; 
</span><a name="LN5520"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relispopulated</span><span class='Delimiter'>; 
</span><a name="LN5521"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relreplident</span><span class='Delimiter'>; 
</span><a name="LN5522"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_owning_tab</span><span class='Delimiter'>; 
</span><a name="LN5523"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_owning_col</span><span class='Delimiter'>; 
</span><a name="LN5524"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_reltablespace</span><span class='Delimiter'>; 
</span><a name="LN5525"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_reloptions</span><span class='Delimiter'>; 
</span><a name="LN5526"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_checkoption</span><span class='Delimiter'>; 
</span><a name="LN5527"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_toastreloptions</span><span class='Delimiter'>; 
</span><a name="LN5528"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_reloftype</span><span class='Delimiter'>; 
</span><a name="LN5529"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_relpages</span><span class='Delimiter'>; 
</span><a name="LN5530"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_is_identity_sequence</span><span class='Delimiter'>; 
</span><a name="LN5531"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_changed_acl</span><span class='Delimiter'>; 
</span><a name="LN5532"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_partkeydef</span><span class='Delimiter'>; 
</span><a name="LN5533"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_ispartition</span><span class='Delimiter'>; 
</span><a name="LN5534"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_partbound</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Find all the tables and table-like objects. 
     * 
     * We include system catalogs, so that we can work if a user table is 
     * defined to inherit from a system catalog (pretty weird, but...) 
     * 
     * We ignore relations that are not ordinary tables, sequences, views, 
     * materialized views, composite types, or foreign tables. 
     * 
     * Composite-type table entries won't be dumped as such, but we have to 
     * make a DumpableObject for them so that we can track dependencies of the 
     * composite type (pg_depend entries for columns of the composite type 
     * link to the pg_class entry not the pg_type entry). 
     * 
     * Note: in this phase we should collect only a minimal amount of 
     * information about each table, basically just enough to decide if it is 
     * interesting. We must fetch all tables in this phase because otherwise 
     * we cannot correctly identify inherited columns, owned sequences, etc. 
     */ 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN5561"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>partkeydef</span> <span class='Operator'>= </span><span class='String'>"NULL"</span><span class='Delimiter'>; 
</span><a name="LN5562"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ispartition</span> <span class='Operator'>= </span><span class='String'>"false"</span><span class='Delimiter'>; 
</span><a name="LN5563"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>partbound</span> <span class='Operator'>= </span><span class='String'>"NULL"</span><span class='Delimiter'>; 
</span> 
<a name="LN5565"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5566"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5567"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initacl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5568"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initracl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
<a name="LN5570"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>attacl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5571"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>attracl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5572"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>attinitacl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN5573"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>attinitracl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Collect the information about any partitioned tables, which were 
         * added in PG10. 
         */ 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>100000</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN5561"><span class='Ref_To_Local'>partkeydef</span></a> <span class='Operator'>= </span><span class='String'>"pg_get_partkeydef(c.oid)"</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN5562"><span class='Ref_To_Local'>ispartition</span></a> <span class='Operator'>= </span><span class='String'>"c.relispartition"</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN5563"><span class='Ref_To_Local'>partbound</span></a> <span class='Operator'>= </span><span class='String'>"pg_get_expr(c.relpartbound, c.oid)"</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Left join to pick up dependency info linking sequences to their 
         * owning column, if any (note this dependency is AUTO as of 8.2) 
         * 
         * Left join to detect if any privileges are still as-set-at-init, in 
         * which case we won't dump out ACL commands for those. 
         */ 
</span> 
        <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5565"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5566"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5567"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN5568"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"c.relacl"</span><span class='Delimiter'>, </span><span class='String'>"c.relowner"</span><span class='Delimiter'>, 
</span>                      <span class='String'>"CASE WHEN c.relkind = "</span> <a href="../../include/c.h.html#LN161"><span class='Ref_to_Macro'>CppAsString2</span></a><span class='Parentheses'>(</span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Parentheses'>) 
</span>                        <span class='String'>" THEN 's' ELSE 'r' END::\"char\""</span><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN5491"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5570"><span class='Ref_To_Local'>attacl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5571"><span class='Ref_To_Local'>attracl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5572"><span class='Ref_To_Local'>attinitacl_subquery</span></a><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN5573"><span class='Ref_To_Local'>attinitracl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"at.attacl"</span><span class='Delimiter'>, </span><span class='String'>"c.relowner"</span><span class='Delimiter'>, </span><span class='String'>"'c'"</span><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN5491"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT c.tableoid, c.oid, c.relname, "</span> 
                          <span class='String'>"%s AS relacl, %s as rrelacl, "</span> 
                          <span class='String'>"%s AS initrelacl, %s as initrrelacl, "</span> 
                          <span class='String'>"c.relkind, c.relnamespace, "</span> 
                          <span class='String'>"(%s c.relowner) AS rolname, "</span> 
                          <span class='String'>"c.relchecks, c.relhastriggers, "</span> 
                          <span class='String'>"c.relhasindex, c.relhasrules, c.relhasoids, "</span> 
                          <span class='String'>"c.relrowsecurity, c.relforcerowsecurity, "</span> 
                          <span class='String'>"c.relfrozenxid, c.relminmxid, tc.oid AS toid, "</span> 
                          <span class='String'>"tc.relfrozenxid AS tfrozenxid, "</span> 
                          <span class='String'>"tc.relminmxid AS tminmxid, "</span> 
                          <span class='String'>"c.relpersistence, c.relispopulated, "</span> 
                          <span class='String'>"c.relreplident, c.relpages, "</span> 
                          <span class='String'>"CASE WHEN c.reloftype &LT;&GT; 0 THEN c.reloftype::pg_catalog.regtype ELSE NULL END AS reloftype, "</span> 
                          <span class='String'>"d.refobjid AS owning_tab, "</span> 
                          <span class='String'>"d.refobjsubid AS owning_col, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = c.reltablespace) AS reltablespace, "</span> 
                          <span class='String'>"array_remove(array_remove(c.reloptions,'check_option=local'),'check_option=cascaded') AS reloptions, "</span> 
                          <span class='String'>"CASE WHEN 'check_option=local' = ANY (c.reloptions) THEN 'LOCAL'::text "</span> 
                          <span class='String'>"WHEN 'check_option=cascaded' = ANY (c.reloptions) THEN 'CASCADED'::text ELSE NULL END AS checkoption, "</span> 
                          <span class='String'>"tc.reloptions AS toast_reloptions, "</span> 
                          <span class='String'>"c.relkind = '%c' AND EXISTS (SELECT 1 FROM pg_depend WHERE classid = 'pg_class'::regclass AND objid = c.oid AND objsubid = 0 AND refclassid = 'pg_class'::regclass AND deptype = 'i') AS is_identity_sequence, "</span> 
                          <span class='String'>"EXISTS (SELECT 1 FROM pg_attribute at LEFT JOIN pg_init_privs pip ON "</span> 
                          <span class='String'>"(c.oid = pip.objoid "</span> 
                          <span class='String'>"AND pip.classoid = 'pg_class'::regclass "</span> 
                          <span class='String'>"AND pip.objsubid = at.attnum)"</span> 
                          <span class='String'>"WHERE at.attrelid = c.oid AND ("</span> 
                          <span class='String'>"%s IS NOT NULL "</span> 
                          <span class='String'>"OR %s IS NOT NULL "</span> 
                          <span class='String'>"OR %s IS NOT NULL "</span> 
                          <span class='String'>"OR %s IS NOT NULL"</span> 
                          <span class='String'>"))"</span> 
                          <span class='String'>"AS changed_acl, "</span> 
                          <span class='String'>"%s AS partkeydef, "</span> 
                          <span class='String'>"%s AS ispartition, "</span> 
                          <span class='String'>"%s AS partbound "</span> 
                          <span class='String'>"FROM pg_class c "</span> 
                          <span class='String'>"LEFT JOIN pg_depend d ON "</span> 
                          <span class='String'>"(c.relkind = '%c' AND "</span> 
                          <span class='String'>"d.classid = c.tableoid AND d.objid = c.oid AND "</span> 
                          <span class='String'>"d.objsubid = 0 AND "</span> 
                    <span class='String'>"d.refclassid = c.tableoid AND d.deptype IN ('a', 'i')) "</span> 
                       <span class='String'>"LEFT JOIN pg_class tc ON (c.reltoastrelid = tc.oid) "</span> 
                          <span class='String'>"LEFT JOIN pg_init_privs pip ON "</span> 
                          <span class='String'>"(c.oid = pip.objoid "</span> 
                          <span class='String'>"AND pip.classoid = 'pg_class'::regclass "</span> 
                          <span class='String'>"AND pip.objsubid = 0) "</span> 
             <span class='String'>"WHERE c.relkind in ('%c', '%c', '%c', '%c', '%c', '%c', '%c') "</span> 
                          <span class='String'>"ORDER BY c.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5565"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5566"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5567"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5568"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5570"><span class='Ref_To_Local'>attacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5571"><span class='Ref_To_Local'>attracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5572"><span class='Ref_To_Local'>attinitacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5573"><span class='Ref_To_Local'>attinitracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5561"><span class='Ref_To_Local'>partkeydef</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5562"><span class='Ref_To_Local'>ispartition</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN5563"><span class='Ref_To_Local'>partbound</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN165"><span class='Ref_to_Const'>RELKIND_COMPOSITE_TYPE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN167"><span class='Ref_to_Const'>RELKIND_PARTITIONED_TABLE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5565"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5566"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5567"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5568"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5570"><span class='Ref_To_Local'>attacl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5571"><span class='Ref_To_Local'>attracl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5572"><span class='Ref_To_Local'>attinitacl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5573"><span class='Ref_To_Local'>attinitracl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90500</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Left join to pick up dependency info linking sequences to their 
         * owning column, if any (note this dependency is AUTO as of 8.2) 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT c.tableoid, c.oid, c.relname, "</span> 
                          <span class='String'>"c.relacl, NULL as rrelacl, "</span> 
                          <span class='String'>"NULL AS initrelacl, NULL AS initrrelacl, "</span> 
                          <span class='String'>"c.relkind, "</span> 
                          <span class='String'>"c.relnamespace, "</span> 
                          <span class='String'>"(%s c.relowner) AS rolname, "</span> 
                          <span class='String'>"c.relchecks, c.relhastriggers, "</span> 
                          <span class='String'>"c.relhasindex, c.relhasrules, c.relhasoids, "</span> 
                          <span class='String'>"c.relrowsecurity, c.relforcerowsecurity, "</span> 
                          <span class='String'>"c.relfrozenxid, c.relminmxid, tc.oid AS toid, "</span> 
                          <span class='String'>"tc.relfrozenxid AS tfrozenxid, "</span> 
                          <span class='String'>"tc.relminmxid AS tminmxid, "</span> 
                          <span class='String'>"c.relpersistence, c.relispopulated, "</span> 
                          <span class='String'>"c.relreplident, c.relpages, "</span> 
                          <span class='String'>"CASE WHEN c.reloftype &LT;&GT; 0 THEN c.reloftype::pg_catalog.regtype ELSE NULL END AS reloftype, "</span> 
                          <span class='String'>"d.refobjid AS owning_tab, "</span> 
                          <span class='String'>"d.refobjsubid AS owning_col, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = c.reltablespace) AS reltablespace, "</span> 
                          <span class='String'>"array_remove(array_remove(c.reloptions,'check_option=local'),'check_option=cascaded') AS reloptions, "</span> 
                          <span class='String'>"CASE WHEN 'check_option=local' = ANY (c.reloptions) THEN 'LOCAL'::text "</span> 
                          <span class='String'>"WHEN 'check_option=cascaded' = ANY (c.reloptions) THEN 'CASCADED'::text ELSE NULL END AS checkoption, "</span> 
                          <span class='String'>"tc.reloptions AS toast_reloptions, "</span> 
                          <span class='String'>"NULL AS changed_acl, "</span> 
                          <span class='String'>"NULL AS partkeydef, "</span> 
                          <span class='String'>"false AS ispartition, "</span> 
                          <span class='String'>"NULL AS partbound "</span> 
                          <span class='String'>"FROM pg_class c "</span> 
                          <span class='String'>"LEFT JOIN pg_depend d ON "</span> 
                          <span class='String'>"(c.relkind = '%c' AND "</span> 
                          <span class='String'>"d.classid = c.tableoid AND d.objid = c.oid AND "</span> 
                          <span class='String'>"d.objsubid = 0 AND "</span> 
                          <span class='String'>"d.refclassid = c.tableoid AND d.deptype = 'a') "</span> 
                       <span class='String'>"LEFT JOIN pg_class tc ON (c.reltoastrelid = tc.oid) "</span> 
                   <span class='String'>"WHERE c.relkind in ('%c', '%c', '%c', '%c', '%c', '%c') "</span> 
                          <span class='String'>"ORDER BY c.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN165"><span class='Ref_to_Const'>RELKIND_COMPOSITE_TYPE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Left join to pick up dependency info linking sequences to their 
         * owning column, if any (note this dependency is AUTO as of 8.2) 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT c.tableoid, c.oid, c.relname, "</span> 
                          <span class='String'>"c.relacl, NULL as rrelacl, "</span> 
                          <span class='String'>"NULL AS initrelacl, NULL AS initrrelacl, "</span> 
                          <span class='String'>"c.relkind, "</span> 
                          <span class='String'>"c.relnamespace, "</span> 
                          <span class='String'>"(%s c.relowner) AS rolname, "</span> 
                          <span class='String'>"c.relchecks, c.relhastriggers, "</span> 
                          <span class='String'>"c.relhasindex, c.relhasrules, c.relhasoids, "</span> 
                          <span class='String'>"'f'::bool AS relrowsecurity, "</span> 
                          <span class='String'>"'f'::bool AS relforcerowsecurity, "</span> 
                          <span class='String'>"c.relfrozenxid, c.relminmxid, tc.oid AS toid, "</span> 
                          <span class='String'>"tc.relfrozenxid AS tfrozenxid, "</span> 
                          <span class='String'>"tc.relminmxid AS tminmxid, "</span> 
                          <span class='String'>"c.relpersistence, c.relispopulated, "</span> 
                          <span class='String'>"c.relreplident, c.relpages, "</span> 
                          <span class='String'>"CASE WHEN c.reloftype &LT;&GT; 0 THEN c.reloftype::pg_catalog.regtype ELSE NULL END AS reloftype, "</span> 
                          <span class='String'>"d.refobjid AS owning_tab, "</span> 
                          <span class='String'>"d.refobjsubid AS owning_col, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = c.reltablespace) AS reltablespace, "</span> 
                          <span class='String'>"array_remove(array_remove(c.reloptions,'check_option=local'),'check_option=cascaded') AS reloptions, "</span> 
                          <span class='String'>"CASE WHEN 'check_option=local' = ANY (c.reloptions) THEN 'LOCAL'::text "</span> 
                          <span class='String'>"WHEN 'check_option=cascaded' = ANY (c.reloptions) THEN 'CASCADED'::text ELSE NULL END AS checkoption, "</span> 
                          <span class='String'>"tc.reloptions AS toast_reloptions, "</span> 
                          <span class='String'>"NULL AS changed_acl, "</span> 
                          <span class='String'>"NULL AS partkeydef, "</span> 
                          <span class='String'>"false AS ispartition, "</span> 
                          <span class='String'>"NULL AS partbound "</span> 
                          <span class='String'>"FROM pg_class c "</span> 
                          <span class='String'>"LEFT JOIN pg_depend d ON "</span> 
                          <span class='String'>"(c.relkind = '%c' AND "</span> 
                          <span class='String'>"d.classid = c.tableoid AND d.objid = c.oid AND "</span> 
                          <span class='String'>"d.objsubid = 0 AND "</span> 
                          <span class='String'>"d.refclassid = c.tableoid AND d.deptype = 'a') "</span> 
                       <span class='String'>"LEFT JOIN pg_class tc ON (c.reltoastrelid = tc.oid) "</span> 
                   <span class='String'>"WHERE c.relkind in ('%c', '%c', '%c', '%c', '%c', '%c') "</span> 
                          <span class='String'>"ORDER BY c.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN165"><span class='Ref_to_Const'>RELKIND_COMPOSITE_TYPE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Left join to pick up dependency info linking sequences to their 
         * owning column, if any (note this dependency is AUTO as of 8.2) 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT c.tableoid, c.oid, c.relname, "</span> 
                          <span class='String'>"c.relacl, NULL as rrelacl, "</span> 
                          <span class='String'>"NULL AS initrelacl, NULL AS initrrelacl, "</span> 
                          <span class='String'>"c.relkind, "</span> 
                          <span class='String'>"c.relnamespace, "</span> 
                          <span class='String'>"(%s c.relowner) AS rolname, "</span> 
                          <span class='String'>"c.relchecks, c.relhastriggers, "</span> 
                          <span class='String'>"c.relhasindex, c.relhasrules, c.relhasoids, "</span> 
                          <span class='String'>"'f'::bool AS relrowsecurity, "</span> 
                          <span class='String'>"'f'::bool AS relforcerowsecurity, "</span> 
                          <span class='String'>"c.relfrozenxid, c.relminmxid, tc.oid AS toid, "</span> 
                          <span class='String'>"tc.relfrozenxid AS tfrozenxid, "</span> 
                          <span class='String'>"tc.relminmxid AS tminmxid, "</span> 
                          <span class='String'>"c.relpersistence, c.relispopulated, "</span> 
                          <span class='String'>"'d' AS relreplident, c.relpages, "</span> 
                          <span class='String'>"CASE WHEN c.reloftype &LT;&GT; 0 THEN c.reloftype::pg_catalog.regtype ELSE NULL END AS reloftype, "</span> 
                          <span class='String'>"d.refobjid AS owning_tab, "</span> 
                          <span class='String'>"d.refobjsubid AS owning_col, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = c.reltablespace) AS reltablespace, "</span> 
                          <span class='String'>"array_remove(array_remove(c.reloptions,'check_option=local'),'check_option=cascaded') AS reloptions, "</span> 
                          <span class='String'>"CASE WHEN 'check_option=local' = ANY (c.reloptions) THEN 'LOCAL'::text "</span> 
                          <span class='String'>"WHEN 'check_option=cascaded' = ANY (c.reloptions) THEN 'CASCADED'::text ELSE NULL END AS checkoption, "</span> 
                          <span class='String'>"tc.reloptions AS toast_reloptions, "</span> 
                          <span class='String'>"NULL AS changed_acl, "</span> 
                          <span class='String'>"NULL AS partkeydef, "</span> 
                          <span class='String'>"false AS ispartition, "</span> 
                          <span class='String'>"NULL AS partbound "</span> 
                          <span class='String'>"FROM pg_class c "</span> 
                          <span class='String'>"LEFT JOIN pg_depend d ON "</span> 
                          <span class='String'>"(c.relkind = '%c' AND "</span> 
                          <span class='String'>"d.classid = c.tableoid AND d.objid = c.oid AND "</span> 
                          <span class='String'>"d.objsubid = 0 AND "</span> 
                          <span class='String'>"d.refclassid = c.tableoid AND d.deptype = 'a') "</span> 
                       <span class='String'>"LEFT JOIN pg_class tc ON (c.reltoastrelid = tc.oid) "</span> 
                   <span class='String'>"WHERE c.relkind in ('%c', '%c', '%c', '%c', '%c', '%c') "</span> 
                          <span class='String'>"ORDER BY c.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN165"><span class='Ref_to_Const'>RELKIND_COMPOSITE_TYPE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Left join to pick up dependency info linking sequences to their 
         * owning column, if any (note this dependency is AUTO as of 8.2) 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT c.tableoid, c.oid, c.relname, "</span> 
                          <span class='String'>"c.relacl, NULL as rrelacl, "</span> 
                          <span class='String'>"NULL AS initrelacl, NULL AS initrrelacl, "</span> 
                          <span class='String'>"c.relkind, "</span> 
                          <span class='String'>"c.relnamespace, "</span> 
                          <span class='String'>"(%s c.relowner) AS rolname, "</span> 
                          <span class='String'>"c.relchecks, c.relhastriggers, "</span> 
                          <span class='String'>"c.relhasindex, c.relhasrules, c.relhasoids, "</span> 
                          <span class='String'>"'f'::bool AS relrowsecurity, "</span> 
                          <span class='String'>"'f'::bool AS relforcerowsecurity, "</span> 
                          <span class='String'>"c.relfrozenxid, 0 AS relminmxid, tc.oid AS toid, "</span> 
                          <span class='String'>"tc.relfrozenxid AS tfrozenxid, "</span> 
                          <span class='String'>"0 AS tminmxid, "</span> 
                          <span class='String'>"c.relpersistence, 't' as relispopulated, "</span> 
                          <span class='String'>"'d' AS relreplident, c.relpages, "</span> 
                          <span class='String'>"CASE WHEN c.reloftype &LT;&GT; 0 THEN c.reloftype::pg_catalog.regtype ELSE NULL END AS reloftype, "</span> 
                          <span class='String'>"d.refobjid AS owning_tab, "</span> 
                          <span class='String'>"d.refobjsubid AS owning_col, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = c.reltablespace) AS reltablespace, "</span> 
                          <span class='String'>"c.reloptions AS reloptions, "</span> 
                          <span class='String'>"tc.reloptions AS toast_reloptions, "</span> 
                          <span class='String'>"NULL AS changed_acl, "</span> 
                          <span class='String'>"NULL AS partkeydef, "</span> 
                          <span class='String'>"false AS ispartition, "</span> 
                          <span class='String'>"NULL AS partbound "</span> 
                          <span class='String'>"FROM pg_class c "</span> 
                          <span class='String'>"LEFT JOIN pg_depend d ON "</span> 
                          <span class='String'>"(c.relkind = '%c' AND "</span> 
                          <span class='String'>"d.classid = c.tableoid AND d.objid = c.oid AND "</span> 
                          <span class='String'>"d.objsubid = 0 AND "</span> 
                          <span class='String'>"d.refclassid = c.tableoid AND d.deptype = 'a') "</span> 
                       <span class='String'>"LEFT JOIN pg_class tc ON (c.reltoastrelid = tc.oid) "</span> 
                   <span class='String'>"WHERE c.relkind in ('%c', '%c', '%c', '%c', '%c', '%c') "</span> 
                          <span class='String'>"ORDER BY c.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN165"><span class='Ref_to_Const'>RELKIND_COMPOSITE_TYPE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90000</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Left join to pick up dependency info linking sequences to their 
         * owning column, if any (note this dependency is AUTO as of 8.2) 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT c.tableoid, c.oid, c.relname, "</span> 
                          <span class='String'>"c.relacl, NULL as rrelacl, "</span> 
                          <span class='String'>"NULL AS initrelacl, NULL AS initrrelacl, "</span> 
                          <span class='String'>"c.relkind, "</span> 
                          <span class='String'>"c.relnamespace, "</span> 
                          <span class='String'>"(%s c.relowner) AS rolname, "</span> 
                          <span class='String'>"c.relchecks, c.relhastriggers, "</span> 
                          <span class='String'>"c.relhasindex, c.relhasrules, c.relhasoids, "</span> 
                          <span class='String'>"'f'::bool AS relrowsecurity, "</span> 
                          <span class='String'>"'f'::bool AS relforcerowsecurity, "</span> 
                          <span class='String'>"c.relfrozenxid, 0 AS relminmxid, tc.oid AS toid, "</span> 
                          <span class='String'>"tc.relfrozenxid AS tfrozenxid, "</span> 
                          <span class='String'>"0 AS tminmxid, "</span> 
                          <span class='String'>"'p' AS relpersistence, 't' as relispopulated, "</span> 
                          <span class='String'>"'d' AS relreplident, c.relpages, "</span> 
                          <span class='String'>"CASE WHEN c.reloftype &LT;&GT; 0 THEN c.reloftype::pg_catalog.regtype ELSE NULL END AS reloftype, "</span> 
                          <span class='String'>"d.refobjid AS owning_tab, "</span> 
                          <span class='String'>"d.refobjsubid AS owning_col, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = c.reltablespace) AS reltablespace, "</span> 
                          <span class='String'>"c.reloptions AS reloptions, "</span> 
                          <span class='String'>"tc.reloptions AS toast_reloptions, "</span> 
                          <span class='String'>"NULL AS changed_acl, "</span> 
                          <span class='String'>"NULL AS partkeydef, "</span> 
                          <span class='String'>"false AS ispartition, "</span> 
                          <span class='String'>"NULL AS partbound "</span> 
                          <span class='String'>"FROM pg_class c "</span> 
                          <span class='String'>"LEFT JOIN pg_depend d ON "</span> 
                          <span class='String'>"(c.relkind = '%c' AND "</span> 
                          <span class='String'>"d.classid = c.tableoid AND d.objid = c.oid AND "</span> 
                          <span class='String'>"d.objsubid = 0 AND "</span> 
                          <span class='String'>"d.refclassid = c.tableoid AND d.deptype = 'a') "</span> 
                       <span class='String'>"LEFT JOIN pg_class tc ON (c.reltoastrelid = tc.oid) "</span> 
                          <span class='String'>"WHERE c.relkind in ('%c', '%c', '%c', '%c') "</span> 
                          <span class='String'>"ORDER BY c.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN165"><span class='Ref_to_Const'>RELKIND_COMPOSITE_TYPE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Left join to pick up dependency info linking sequences to their 
         * owning column, if any (note this dependency is AUTO as of 8.2) 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT c.tableoid, c.oid, c.relname, "</span> 
                          <span class='String'>"c.relacl, NULL as rrelacl, "</span> 
                          <span class='String'>"NULL AS initrelacl, NULL AS initrrelacl, "</span> 
                          <span class='String'>"c.relkind, "</span> 
                          <span class='String'>"c.relnamespace, "</span> 
                          <span class='String'>"(%s c.relowner) AS rolname, "</span> 
                          <span class='String'>"c.relchecks, c.relhastriggers, "</span> 
                          <span class='String'>"c.relhasindex, c.relhasrules, c.relhasoids, "</span> 
                          <span class='String'>"'f'::bool AS relrowsecurity, "</span> 
                          <span class='String'>"'f'::bool AS relforcerowsecurity, "</span> 
                          <span class='String'>"c.relfrozenxid, 0 AS relminmxid, tc.oid AS toid, "</span> 
                          <span class='String'>"tc.relfrozenxid AS tfrozenxid, "</span> 
                          <span class='String'>"0 AS tminmxid, "</span> 
                          <span class='String'>"'p' AS relpersistence, 't' as relispopulated, "</span> 
                          <span class='String'>"'d' AS relreplident, c.relpages, "</span> 
                          <span class='String'>"NULL AS reloftype, "</span> 
                          <span class='String'>"d.refobjid AS owning_tab, "</span> 
                          <span class='String'>"d.refobjsubid AS owning_col, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = c.reltablespace) AS reltablespace, "</span> 
                          <span class='String'>"c.reloptions AS reloptions, "</span> 
                          <span class='String'>"tc.reloptions AS toast_reloptions, "</span> 
                          <span class='String'>"NULL AS changed_acl, "</span> 
                          <span class='String'>"NULL AS partkeydef, "</span> 
                          <span class='String'>"false AS ispartition, "</span> 
                          <span class='String'>"NULL AS partbound "</span> 
                          <span class='String'>"FROM pg_class c "</span> 
                          <span class='String'>"LEFT JOIN pg_depend d ON "</span> 
                          <span class='String'>"(c.relkind = '%c' AND "</span> 
                          <span class='String'>"d.classid = c.tableoid AND d.objid = c.oid AND "</span> 
                          <span class='String'>"d.objsubid = 0 AND "</span> 
                          <span class='String'>"d.refclassid = c.tableoid AND d.deptype = 'a') "</span> 
                       <span class='String'>"LEFT JOIN pg_class tc ON (c.reltoastrelid = tc.oid) "</span> 
                          <span class='String'>"WHERE c.relkind in ('%c', '%c', '%c', '%c') "</span> 
                          <span class='String'>"ORDER BY c.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN165"><span class='Ref_to_Const'>RELKIND_COMPOSITE_TYPE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80200</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Left join to pick up dependency info linking sequences to their 
         * owning column, if any (note this dependency is AUTO as of 8.2) 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT c.tableoid, c.oid, c.relname, "</span> 
                          <span class='String'>"c.relacl, NULL as rrelacl, "</span> 
                          <span class='String'>"NULL AS initrelacl, NULL AS initrrelacl, "</span> 
                          <span class='String'>"c.relkind, "</span> 
                          <span class='String'>"c.relnamespace, "</span> 
                          <span class='String'>"(%s c.relowner) AS rolname, "</span> 
                      <span class='String'>"c.relchecks, (c.reltriggers &LT;&GT; 0) AS relhastriggers, "</span> 
                          <span class='String'>"c.relhasindex, c.relhasrules, c.relhasoids, "</span> 
                          <span class='String'>"'f'::bool AS relrowsecurity, "</span> 
                          <span class='String'>"'f'::bool AS relforcerowsecurity, "</span> 
                          <span class='String'>"c.relfrozenxid, 0 AS relminmxid, tc.oid AS toid, "</span> 
                          <span class='String'>"tc.relfrozenxid AS tfrozenxid, "</span> 
                          <span class='String'>"0 AS tminmxid, "</span> 
                          <span class='String'>"'p' AS relpersistence, 't' as relispopulated, "</span> 
                          <span class='String'>"'d' AS relreplident, c.relpages, "</span> 
                          <span class='String'>"NULL AS reloftype, "</span> 
                          <span class='String'>"d.refobjid AS owning_tab, "</span> 
                          <span class='String'>"d.refobjsubid AS owning_col, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = c.reltablespace) AS reltablespace, "</span> 
                          <span class='String'>"c.reloptions AS reloptions, "</span> 
                          <span class='String'>"NULL AS toast_reloptions, "</span> 
                          <span class='String'>"NULL AS changed_acl, "</span> 
                          <span class='String'>"NULL AS partkeydef, "</span> 
                          <span class='String'>"false AS ispartition, "</span> 
                          <span class='String'>"NULL AS partbound "</span> 
                          <span class='String'>"FROM pg_class c "</span> 
                          <span class='String'>"LEFT JOIN pg_depend d ON "</span> 
                          <span class='String'>"(c.relkind = '%c' AND "</span> 
                          <span class='String'>"d.classid = c.tableoid AND d.objid = c.oid AND "</span> 
                          <span class='String'>"d.objsubid = 0 AND "</span> 
                          <span class='String'>"d.refclassid = c.tableoid AND d.deptype = 'a') "</span> 
                       <span class='String'>"LEFT JOIN pg_class tc ON (c.reltoastrelid = tc.oid) "</span> 
                          <span class='String'>"WHERE c.relkind in ('%c', '%c', '%c', '%c') "</span> 
                          <span class='String'>"ORDER BY c.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN165"><span class='Ref_to_Const'>RELKIND_COMPOSITE_TYPE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Left join to pick up dependency info linking sequences to their 
         * owning column, if any 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT c.tableoid, c.oid, relname, "</span> 
                          <span class='String'>"relacl, NULL as rrelacl, "</span> 
                          <span class='String'>"NULL AS initrelacl, NULL AS initrrelacl, "</span> 
                          <span class='String'>"relkind, relnamespace, "</span> 
                          <span class='String'>"(%s relowner) AS rolname, "</span> 
                          <span class='String'>"relchecks, (reltriggers &LT;&GT; 0) AS relhastriggers, "</span> 
                          <span class='String'>"relhasindex, relhasrules, relhasoids, "</span> 
                          <span class='String'>"'f'::bool AS relrowsecurity, "</span> 
                          <span class='String'>"'f'::bool AS relforcerowsecurity, "</span> 
                          <span class='String'>"0 AS relfrozenxid, 0 AS relminmxid,"</span> 
                          <span class='String'>"0 AS toid, "</span> 
                          <span class='String'>"0 AS tfrozenxid, 0 AS tminmxid,"</span> 
                          <span class='String'>"'p' AS relpersistence, 't' as relispopulated, "</span> 
                          <span class='String'>"'d' AS relreplident, relpages, "</span> 
                          <span class='String'>"NULL AS reloftype, "</span> 
                          <span class='String'>"d.refobjid AS owning_tab, "</span> 
                          <span class='String'>"d.refobjsubid AS owning_col, "</span> 
                          <span class='String'>"(SELECT spcname FROM pg_tablespace t WHERE t.oid = c.reltablespace) AS reltablespace, "</span> 
                          <span class='String'>"NULL AS reloptions, "</span> 
                          <span class='String'>"NULL AS toast_reloptions, "</span> 
                          <span class='String'>"NULL AS changed_acl, "</span> 
                          <span class='String'>"NULL AS partkeydef, "</span> 
                          <span class='String'>"false AS ispartition, "</span> 
                          <span class='String'>"NULL AS partbound "</span> 
                          <span class='String'>"FROM pg_class c "</span> 
                          <span class='String'>"LEFT JOIN pg_depend d ON "</span> 
                          <span class='String'>"(c.relkind = '%c' AND "</span> 
                          <span class='String'>"d.classid = c.tableoid AND d.objid = c.oid AND "</span> 
                          <span class='String'>"d.objsubid = 0 AND "</span> 
                          <span class='String'>"d.refclassid = c.tableoid AND d.deptype = 'i') "</span> 
                          <span class='String'>"WHERE relkind in ('%c', '%c', '%c', '%c') "</span> 
                          <span class='String'>"ORDER BY c.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Delimiter'>, </span><a href="../../include/catalog/pg_class.h.html#LN165"><span class='Ref_to_Const'>RELKIND_COMPOSITE_TYPE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN5493"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>numTables</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN5493"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Extract data from result and lock dumpable tables.  We do the locking 
     * before anything else, to minimize the window wherein a table could 
     * disappear under us. 
     * 
     * Note that we have to save info about all tables here, even when dumping 
     * only one, because we don't yet know which tables might be inheritance 
     * ancestors of the target table. 
     */ 
</span>    <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN26"><span class='Ref_to_Proto'>pg_malloc0</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5493"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN5497"><span class='Ref_To_Local'>i_reltableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5498"><span class='Ref_To_Local'>i_reloid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5499"><span class='Ref_To_Local'>i_relname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5500"><span class='Ref_To_Local'>i_relnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5502"><span class='Ref_To_Local'>i_relacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5503"><span class='Ref_To_Local'>i_rrelacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rrelacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5504"><span class='Ref_To_Local'>i_initrelacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initrelacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5505"><span class='Ref_To_Local'>i_initrrelacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initrrelacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5501"><span class='Ref_To_Local'>i_relkind</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relkind"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5506"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5507"><span class='Ref_To_Local'>i_relchecks</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relchecks"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5508"><span class='Ref_To_Local'>i_relhastriggers</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relhastriggers"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5509"><span class='Ref_To_Local'>i_relhasindex</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relhasindex"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5510"><span class='Ref_To_Local'>i_relhasrules</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relhasrules"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5511"><span class='Ref_To_Local'>i_relrowsec</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relrowsecurity"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5512"><span class='Ref_To_Local'>i_relforcerowsec</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relforcerowsecurity"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5513"><span class='Ref_To_Local'>i_relhasoids</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relhasoids"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5514"><span class='Ref_To_Local'>i_relfrozenxid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relfrozenxid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5515"><span class='Ref_To_Local'>i_relminmxid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relminmxid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5516"><span class='Ref_To_Local'>i_toastoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"toid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5517"><span class='Ref_To_Local'>i_toastfrozenxid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tfrozenxid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5518"><span class='Ref_To_Local'>i_toastminmxid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tminmxid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5519"><span class='Ref_To_Local'>i_relpersistence</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relpersistence"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5520"><span class='Ref_To_Local'>i_relispopulated</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relispopulated"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5521"><span class='Ref_To_Local'>i_relreplident</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relreplident"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5529"><span class='Ref_To_Local'>i_relpages</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relpages"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5522"><span class='Ref_To_Local'>i_owning_tab</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"owning_tab"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5523"><span class='Ref_To_Local'>i_owning_col</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"owning_col"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5524"><span class='Ref_To_Local'>i_reltablespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"reltablespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5525"><span class='Ref_To_Local'>i_reloptions</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"reloptions"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5526"><span class='Ref_To_Local'>i_checkoption</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"checkoption"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5527"><span class='Ref_To_Local'>i_toastreloptions</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"toast_reloptions"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5528"><span class='Ref_To_Local'>i_reloftype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"reloftype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5530"><span class='Ref_To_Local'>i_is_identity_sequence</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"is_identity_sequence"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5531"><span class='Ref_To_Local'>i_changed_acl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"changed_acl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5532"><span class='Ref_To_Local'>i_partkeydef</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"partkeydef"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5533"><span class='Ref_To_Local'>i_ispartition</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"ispartition"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN5534"><span class='Ref_To_Local'>i_partbound</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"partbound"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5491"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN141"><span class='Ref_to_Member'>lockWaitTimeout</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Arrange to fail instead of waiting forever for a table lock. 
         * 
         * NB: this coding assumes that the only queries issued within the 
         * following loop are LOCK TABLEs; else the timeout may be undesirably 
         * applied to other things too. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SET statement_timeout = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/fe_utils/string_utils.h.html#LN35"><span class='Ref_to_Proto'>appendStringLiteralConn</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5491"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN141"><span class='Ref_to_Member'>lockWaitTimeout</span></a><span class='Delimiter'>, </span><a href="../pg_basebackup/streamutil.h.html#LN30"><span class='Ref_to_Proto'>GetConnection</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN5493"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN55"><span class='Ref_to_EnumConst'>DO_TABLE</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5497"><span class='Ref_To_Local'>i_reltableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5498"><span class='Ref_To_Local'>i_reloid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5499"><span class='Ref_To_Local'>i_relname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5500"><span class='Ref_To_Local'>i_relnamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5506"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN262"><span class='Ref_to_Member'>relacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5502"><span class='Ref_To_Local'>i_relacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN263"><span class='Ref_to_Member'>rrelacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5503"><span class='Ref_To_Local'>i_rrelacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN264"><span class='Ref_to_Member'>initrelacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5504"><span class='Ref_To_Local'>i_initrelacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN265"><span class='Ref_to_Member'>initrrelacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5505"><span class='Ref_To_Local'>i_initrrelacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5501"><span class='Ref_To_Local'>i_relkind</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN267"><span class='Ref_to_Member'>relpersistence</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5519"><span class='Ref_To_Local'>i_relpersistence</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN274"><span class='Ref_to_Member'>hasindex</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5509"><span class='Ref_To_Local'>i_relhasindex</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN275"><span class='Ref_to_Member'>hasrules</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5510"><span class='Ref_To_Local'>i_relhasrules</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN276"><span class='Ref_to_Member'>hastriggers</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5508"><span class='Ref_To_Local'>i_relhastriggers</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN277"><span class='Ref_to_Member'>rowsec</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5511"><span class='Ref_To_Local'>i_relrowsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN278"><span class='Ref_to_Member'>forcerowsec</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5512"><span class='Ref_To_Local'>i_relforcerowsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN279"><span class='Ref_to_Member'>hasoids</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5513"><span class='Ref_To_Local'>i_relhasoids</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN268"><span class='Ref_to_Member'>relispopulated</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5520"><span class='Ref_To_Local'>i_relispopulated</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN269"><span class='Ref_to_Member'>relreplident</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5521"><span class='Ref_To_Local'>i_relreplident</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN291"><span class='Ref_to_Member'>relpages</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5529"><span class='Ref_To_Local'>i_relpages</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN280"><span class='Ref_to_Member'>frozenxid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5514"><span class='Ref_To_Local'>i_relfrozenxid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN281"><span class='Ref_to_Member'>minmxid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5515"><span class='Ref_To_Local'>i_relminmxid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN282"><span class='Ref_to_Member'>toast_oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5516"><span class='Ref_To_Local'>i_toastoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN283"><span class='Ref_to_Member'>toast_frozenxid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5517"><span class='Ref_To_Local'>i_toastfrozenxid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN284"><span class='Ref_to_Member'>toast_minmxid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5518"><span class='Ref_To_Local'>i_toastminmxid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5528"><span class='Ref_To_Local'>i_reloftype</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN286"><span class='Ref_to_Member'>reloftype</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN286"><span class='Ref_to_Member'>reloftype</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5528"><span class='Ref_To_Local'>i_reloftype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN285"><span class='Ref_to_Member'>ncheck</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5507"><span class='Ref_To_Local'>i_relchecks</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5522"><span class='Ref_To_Local'>i_owning_tab</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN288"><span class='Ref_to_Member'>owning_tab</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN289"><span class='Ref_to_Member'>owning_col</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN288"><span class='Ref_to_Member'>owning_tab</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5522"><span class='Ref_To_Local'>i_owning_tab</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN289"><span class='Ref_to_Member'>owning_col</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5523"><span class='Ref_To_Local'>i_owning_col</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN270"><span class='Ref_to_Member'>reltablespace</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5524"><span class='Ref_To_Local'>i_reltablespace</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN271"><span class='Ref_to_Member'>reloptions</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5525"><span class='Ref_To_Local'>i_reloptions</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5526"><span class='Ref_To_Local'>i_checkoption</span></a> <span class='Operator'>== -</span><span class='Number'>1</span> <span class='Operator'>|| </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5526"><span class='Ref_To_Local'>i_checkoption</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN272"><span class='Ref_to_Member'>checkoption</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN272"><span class='Ref_to_Member'>checkoption</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5526"><span class='Ref_To_Local'>i_checkoption</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN273"><span class='Ref_to_Member'>toast_reloptions</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5527"><span class='Ref_To_Local'>i_toastreloptions</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* other fields were zeroed above */ 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Decide whether we want to dump this table. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN165"><span class='Ref_to_Const'>RELKIND_COMPOSITE_TYPE</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN1425"><span class='Ref_to_Func'>selectDumpableTable</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If the table-level and all column-level ACLs for this table are 
         * unchanged, then we don't need to worry about including the ACLs for 
         * this table.  If any column-level ACLs have been changed, the 
         * 'changed_acl' column from the query will indicate that. 
         * 
         * This can result in a significant performance improvement in cases 
         * where we are only looking to dump out the ACL (eg: pg_catalog). 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5502"><span class='Ref_To_Local'>i_relacl</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5503"><span class='Ref_To_Local'>i_rrelacl</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5504"><span class='Ref_To_Local'>i_initrelacl</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5505"><span class='Ref_To_Local'>i_initrrelacl</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>            strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5531"><span class='Ref_To_Local'>i_changed_acl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"f"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN293"><span class='Ref_to_Member'>interesting</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>? </span><span class='Boolean'>true </span><span class='Operator'>: </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN294"><span class='Ref_to_Member'>dummy_view</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* might get set during sort */ 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN295"><span class='Ref_to_Member'>postponed_def</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* might get set during sort */ 
</span> 
        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN290"><span class='Ref_to_Member'>is_identity_sequence</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5530"><span class='Ref_To_Local'>i_is_identity_sequence</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>               strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5530"><span class='Ref_To_Local'>i_is_identity_sequence</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Partition key string or NULL */ 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN321"><span class='Ref_to_Member'>partkeydef</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5532"><span class='Ref_To_Local'>i_partkeydef</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN296"><span class='Ref_to_Member'>ispartition</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5533"><span class='Ref_To_Local'>i_ispartition</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN322"><span class='Ref_to_Member'>partbound</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5534"><span class='Ref_To_Local'>i_partbound</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Read-lock target tables to make sure they aren't DROPPED or altered 
         * in schema before we get around to dumping them. 
         * 
         * Note that we don't explicitly lock parents of the target tables; we 
         * assume our lock on the child is enough to prevent schema 
         * alterations to parent tables. 
         * 
         * NOTE: it'd be kinda nice to lock other relations too, not only 
         * plain tables, but the backend doesn't presently allow that. 
         * 
         * We only need to lock the table for certain components; see 
         * pg_dump.h 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a> <span class='Operator'>|| 
</span>             <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN167"><span class='Ref_to_Const'>RELKIND_PARTITIONED_TABLE</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN122"><span class='Ref_to_Const'>DUMP_COMPONENTS_REQUIRING_LOCK</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"LOCK TABLE %s IN ACCESS SHARE MODE"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN27"><span class='Ref_to_Proto'>fmtQualifiedId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a><span class='Delimiter'>, 
</span>                                        <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                                             <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* Emit notice if join for owner failed */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: owner of table \"%s\" appears to be invalid\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN5494"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5491"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN141"><span class='Ref_to_Member'>lockWaitTimeout</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5489"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"SET statement_timeout = 0"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5492"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN5495"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN5496"><span class='Ref_To_Local'>tblinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTables &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getOwnedSeqs 
 *    identify owned sequences and mark them as dumpable if owning table is 
 * 
 * We used to do this in getTables(), but it's better to do it after the 
 * index used by findTableByOid() has been set up. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN6276"></a><span class='Declare_Function'>getOwnedSeqs</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>[], </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6278"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Force sequences that are "owned" by table columns to be dumped whenever 
     * their owning table is being dumped. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6278"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6278"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN6276"><span class='Ref_to_Parameter'>numTables</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6278"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6286"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>seqinfo</span> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN6276"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6278"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN6287"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>owning_tab</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6286"><span class='Ref_To_Local'>seqinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN288"><span class='Ref_to_Member'>owning_tab</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* not an owned sequence */ 
</span> 
        <a href="pg_dump.c.html#LN6287"><span class='Ref_To_Local'>owning_tab</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN649"><span class='Ref_to_Proto'>findTableByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6286"><span class='Ref_To_Local'>seqinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN288"><span class='Ref_to_Member'>owning_tab</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6287"><span class='Ref_To_Local'>owning_tab</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"failed sanity check, parent table with OID %u of sequence with OID %u not found\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN6286"><span class='Ref_To_Local'>seqinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN288"><span class='Ref_to_Member'>owning_tab</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6286"><span class='Ref_To_Local'>seqinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We need to dump the components that are being dumped for the table 
         * and any components which the sequence is explicitly marked with. 
         * 
         * We can't simply use the set of components which are being dumped 
         * for the table as the table might be in an extension (and only the 
         * non-extension components, eg: ACLs if changed, security labels, and 
         * policies, are being dumped) while the sequence is not (and 
         * therefore the definition and other components should also be 
         * dumped). 
         * 
         * If the sequence is part of the extension then it should be properly 
         * marked by checkExtensionMembership() and this will be a no-op as 
         * the table will be equivalently marked. 
         */ 
</span>        <a href="pg_dump.c.html#LN6286"><span class='Ref_To_Local'>seqinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6286"><span class='Ref_To_Local'>seqinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>| </span><a href="pg_dump.c.html#LN6287"><span class='Ref_To_Local'>owning_tab</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6286"><span class='Ref_To_Local'>seqinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>!= </span><a href="pg_dump.h.html#LN90"><span class='Ref_to_Const'>DUMP_COMPONENT_NONE</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN6286"><span class='Ref_To_Local'>seqinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN293"><span class='Ref_to_Member'>interesting</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numTables;i++ &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end getOwnedSeqs &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getInherits 
 *    read all the inheritance information 
 * from the system catalogs return them in the InhInfo* structure 
 * 
 * numInherits is set to the number of pairs read in 
 */ 
</span><a href="pg_dump.h.html#LN472"><span class='Ref_to_Typedef'>InhInfo</span></a> <span class='Operator'>* 
</span><a name="LN6327"></a><span class='Declare_Function'>getInherits</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numInherits</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6329"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN6330"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN6331"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN6332"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN6333"></a>    <a href="pg_dump.h.html#LN472"><span class='Ref_to_Typedef'>InhInfo</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>inhinfo</span><span class='Delimiter'>; 
</span> 
<a name="LN6335"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_inhrelid</span><span class='Delimiter'>; 
</span><a name="LN6336"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_inhparent</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6327"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Find all the inheritance information, excluding implicit inheritance 
     * via partitioning.  We handle that case using getPartitions(), because 
     * we want more information about partitions than just the parent-child 
     * relationship. 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6332"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT inhrelid, inhparent FROM pg_inherits"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6329"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6327"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6332"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6330"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6329"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN6327"><span class='Ref_to_Parameter'>numInherits</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6330"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6333"><span class='Ref_To_Local'>inhinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN472"><span class='Ref_to_Typedef'>InhInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6330"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN472"><span class='Ref_to_Typedef'>InhInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6335"><span class='Ref_To_Local'>i_inhrelid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6329"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"inhrelid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN6336"><span class='Ref_To_Local'>i_inhparent</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6329"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"inhparent"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6331"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6331"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN6330"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6331"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN6333"><span class='Ref_To_Local'>inhinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6331"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN474"><span class='Ref_to_Member'>inhrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6329"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6331"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6335"><span class='Ref_To_Local'>i_inhrelid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6333"><span class='Ref_To_Local'>inhinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6331"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN475"><span class='Ref_to_Member'>inhparent</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6329"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6331"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6336"><span class='Ref_To_Local'>i_inhparent</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6329"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6332"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN6333"><span class='Ref_To_Local'>inhinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getInherits &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getIndexes 
 *    get information about every index on a dumpable table 
 * 
 * Note: index data is not returned directly to the caller, but it 
 * does get entered into the DumpableObject tables. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN6381"></a><span class='Declare_Function'>getIndexes</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>[], </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6383"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN6384"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span><a name="LN6385"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN6386"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN6387"></a>    <a href="pg_dump.h.html#LN352"><span class='Ref_to_Typedef'>IndxInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>indxinfo</span><span class='Delimiter'>; 
</span><a name="LN6388"></a>    <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>constrinfo</span><span class='Delimiter'>; 
</span><a name="LN6389"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>, 
</span><a name="LN6390"></a>                <span class='Declare_Local'>i_oid</span><span class='Delimiter'>, 
</span><a name="LN6391"></a>                <span class='Declare_Local'>i_indexname</span><span class='Delimiter'>, 
</span><a name="LN6392"></a>                <span class='Declare_Local'>i_indexdef</span><span class='Delimiter'>, 
</span><a name="LN6393"></a>                <span class='Declare_Local'>i_indnkeys</span><span class='Delimiter'>, 
</span><a name="LN6394"></a>                <span class='Declare_Local'>i_indkey</span><span class='Delimiter'>, 
</span><a name="LN6395"></a>                <span class='Declare_Local'>i_indisclustered</span><span class='Delimiter'>, 
</span><a name="LN6396"></a>                <span class='Declare_Local'>i_indisreplident</span><span class='Delimiter'>, 
</span><a name="LN6397"></a>                <span class='Declare_Local'>i_contype</span><span class='Delimiter'>, 
</span><a name="LN6398"></a>                <span class='Declare_Local'>i_conname</span><span class='Delimiter'>, 
</span><a name="LN6399"></a>                <span class='Declare_Local'>i_condeferrable</span><span class='Delimiter'>, 
</span><a name="LN6400"></a>                <span class='Declare_Local'>i_condeferred</span><span class='Delimiter'>, 
</span><a name="LN6401"></a>                <span class='Declare_Local'>i_contableoid</span><span class='Delimiter'>, 
</span><a name="LN6402"></a>                <span class='Declare_Local'>i_conoid</span><span class='Delimiter'>, 
</span><a name="LN6403"></a>                <span class='Declare_Local'>i_condef</span><span class='Delimiter'>, 
</span><a name="LN6404"></a>                <span class='Declare_Local'>i_tablespace</span><span class='Delimiter'>, 
</span><a name="LN6405"></a>                <span class='Declare_Local'>i_indreloptions</span><span class='Delimiter'>, 
</span><a name="LN6406"></a>                <span class='Declare_Local'>i_relpages</span><span class='Delimiter'>; 
</span><a name="LN6407"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6383"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6383"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN6381"><span class='Ref_to_Parameter'>numTables</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6383"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6411"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN6381"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6383"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Comment_Multi_Line'>/* Only plain tables and materialized views have indexes. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a> <span class='Operator'>&& 
</span>            <a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN274"><span class='Ref_to_Member'>hasindex</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore indexes of tables whose definitions are not to be dumped */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"reading indexes for table \"%s.%s\"\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Make sure we are in proper schema so indexdef is right */ 
</span>        <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6381"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * The point of the messy-looking outer join is to find a constraint 
         * that is related by an internal dependency link to the index. If we 
         * find one, create a CONSTRAINT entry linked to the INDEX entry.  We 
         * assume an index won't have more than one internal dependency. 
         * 
         * As of 9.0 we don't need to look at pg_depend but can check for a 
         * match to pg_constraint.conindid.  The check on conrelid is 
         * redundant but useful because that column is indexed while conindid 
         * is not. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6385"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6381"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90400</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * the test on indisready is necessary in 9.2, and harmless in 
             * earlier/later versions 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6385"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT t.tableoid, t.oid, "</span> 
                              <span class='String'>"t.relname AS indexname, "</span> 
                     <span class='String'>"pg_catalog.pg_get_indexdef(i.indexrelid) AS indexdef, "</span> 
                              <span class='String'>"t.relnatts AS indnkeys, "</span> 
                              <span class='String'>"i.indkey, i.indisclustered, "</span> 
                              <span class='String'>"i.indisreplident, t.relpages, "</span> 
                              <span class='String'>"c.contype, c.conname, "</span> 
                              <span class='String'>"c.condeferrable, c.condeferred, "</span> 
                              <span class='String'>"c.tableoid AS contableoid, "</span> 
                              <span class='String'>"c.oid AS conoid, "</span> 
                  <span class='String'>"pg_catalog.pg_get_constraintdef(c.oid, false) AS condef, "</span> 
                              <span class='String'>"(SELECT spcname FROM pg_catalog.pg_tablespace s WHERE s.oid = t.reltablespace) AS tablespace, "</span> 
                              <span class='String'>"t.reloptions AS indreloptions "</span> 
                              <span class='String'>"FROM pg_catalog.pg_index i "</span> 
                      <span class='String'>"JOIN pg_catalog.pg_class t ON (t.oid = i.indexrelid) "</span> 
                              <span class='String'>"LEFT JOIN pg_catalog.pg_constraint c "</span> 
                              <span class='String'>"ON (i.indrelid = c.conrelid AND "</span> 
                              <span class='String'>"i.indexrelid = c.conindid AND "</span> 
                              <span class='String'>"c.contype IN ('p','u','x')) "</span> 
                              <span class='String'>"WHERE i.indrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"AND i.indisvalid AND i.indisready "</span> 
                              <span class='String'>"ORDER BY indexname"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6381"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90000</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * the test on indisready is necessary in 9.2, and harmless in 
             * earlier/later versions 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6385"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT t.tableoid, t.oid, "</span> 
                              <span class='String'>"t.relname AS indexname, "</span> 
                     <span class='String'>"pg_catalog.pg_get_indexdef(i.indexrelid) AS indexdef, "</span> 
                              <span class='String'>"t.relnatts AS indnkeys, "</span> 
                              <span class='String'>"i.indkey, i.indisclustered, "</span> 
                              <span class='String'>"false AS indisreplident, t.relpages, "</span> 
                              <span class='String'>"c.contype, c.conname, "</span> 
                              <span class='String'>"c.condeferrable, c.condeferred, "</span> 
                              <span class='String'>"c.tableoid AS contableoid, "</span> 
                              <span class='String'>"c.oid AS conoid, "</span> 
                  <span class='String'>"pg_catalog.pg_get_constraintdef(c.oid, false) AS condef, "</span> 
                              <span class='String'>"(SELECT spcname FROM pg_catalog.pg_tablespace s WHERE s.oid = t.reltablespace) AS tablespace, "</span> 
                              <span class='String'>"t.reloptions AS indreloptions "</span> 
                              <span class='String'>"FROM pg_catalog.pg_index i "</span> 
                      <span class='String'>"JOIN pg_catalog.pg_class t ON (t.oid = i.indexrelid) "</span> 
                              <span class='String'>"LEFT JOIN pg_catalog.pg_constraint c "</span> 
                              <span class='String'>"ON (i.indrelid = c.conrelid AND "</span> 
                              <span class='String'>"i.indexrelid = c.conindid AND "</span> 
                              <span class='String'>"c.contype IN ('p','u','x')) "</span> 
                              <span class='String'>"WHERE i.indrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"AND i.indisvalid AND i.indisready "</span> 
                              <span class='String'>"ORDER BY indexname"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6381"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80200</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6385"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT t.tableoid, t.oid, "</span> 
                              <span class='String'>"t.relname AS indexname, "</span> 
                     <span class='String'>"pg_catalog.pg_get_indexdef(i.indexrelid) AS indexdef, "</span> 
                              <span class='String'>"t.relnatts AS indnkeys, "</span> 
                              <span class='String'>"i.indkey, i.indisclustered, "</span> 
                              <span class='String'>"false AS indisreplident, t.relpages, "</span> 
                              <span class='String'>"c.contype, c.conname, "</span> 
                              <span class='String'>"c.condeferrable, c.condeferred, "</span> 
                              <span class='String'>"c.tableoid AS contableoid, "</span> 
                              <span class='String'>"c.oid AS conoid, "</span> 
                              <span class='String'>"null AS condef, "</span> 
                              <span class='String'>"(SELECT spcname FROM pg_catalog.pg_tablespace s WHERE s.oid = t.reltablespace) AS tablespace, "</span> 
                              <span class='String'>"t.reloptions AS indreloptions "</span> 
                              <span class='String'>"FROM pg_catalog.pg_index i "</span> 
                      <span class='String'>"JOIN pg_catalog.pg_class t ON (t.oid = i.indexrelid) "</span> 
                              <span class='String'>"LEFT JOIN pg_catalog.pg_depend d "</span> 
                              <span class='String'>"ON (d.classid = t.tableoid "</span> 
                              <span class='String'>"AND d.objid = t.oid "</span> 
                              <span class='String'>"AND d.deptype = 'i') "</span> 
                              <span class='String'>"LEFT JOIN pg_catalog.pg_constraint c "</span> 
                              <span class='String'>"ON (d.refclassid = c.tableoid "</span> 
                              <span class='String'>"AND d.refobjid = c.oid) "</span> 
                              <span class='String'>"WHERE i.indrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"AND i.indisvalid "</span> 
                              <span class='String'>"ORDER BY indexname"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6385"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT t.tableoid, t.oid, "</span> 
                              <span class='String'>"t.relname AS indexname, "</span> 
                     <span class='String'>"pg_catalog.pg_get_indexdef(i.indexrelid) AS indexdef, "</span> 
                              <span class='String'>"t.relnatts AS indnkeys, "</span> 
                              <span class='String'>"i.indkey, i.indisclustered, "</span> 
                              <span class='String'>"false AS indisreplident, t.relpages, "</span> 
                              <span class='String'>"c.contype, c.conname, "</span> 
                              <span class='String'>"c.condeferrable, c.condeferred, "</span> 
                              <span class='String'>"c.tableoid AS contableoid, "</span> 
                              <span class='String'>"c.oid AS conoid, "</span> 
                              <span class='String'>"null AS condef, "</span> 
                              <span class='String'>"(SELECT spcname FROM pg_catalog.pg_tablespace s WHERE s.oid = t.reltablespace) AS tablespace, "</span> 
                              <span class='String'>"null AS indreloptions "</span> 
                              <span class='String'>"FROM pg_catalog.pg_index i "</span> 
                      <span class='String'>"JOIN pg_catalog.pg_class t ON (t.oid = i.indexrelid) "</span> 
                              <span class='String'>"LEFT JOIN pg_catalog.pg_depend d "</span> 
                              <span class='String'>"ON (d.classid = t.tableoid "</span> 
                              <span class='String'>"AND d.objid = t.oid "</span> 
                              <span class='String'>"AND d.deptype = 'i') "</span> 
                              <span class='String'>"LEFT JOIN pg_catalog.pg_constraint c "</span> 
                              <span class='String'>"ON (d.refclassid = c.tableoid "</span> 
                              <span class='String'>"AND d.refobjid = c.oid) "</span> 
                              <span class='String'>"WHERE i.indrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"ORDER BY indexname"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
        <a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6381"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6385"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6407"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6389"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6390"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6391"><span class='Ref_To_Local'>i_indexname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"indexname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6392"><span class='Ref_To_Local'>i_indexdef</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"indexdef"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6393"><span class='Ref_To_Local'>i_indnkeys</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"indnkeys"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6394"><span class='Ref_To_Local'>i_indkey</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"indkey"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6395"><span class='Ref_To_Local'>i_indisclustered</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"indisclustered"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6396"><span class='Ref_To_Local'>i_indisreplident</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"indisreplident"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6406"><span class='Ref_To_Local'>i_relpages</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"relpages"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6397"><span class='Ref_To_Local'>i_contype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"contype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6398"><span class='Ref_To_Local'>i_conname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"conname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6399"><span class='Ref_To_Local'>i_condeferrable</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"condeferrable"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6400"><span class='Ref_To_Local'>i_condeferred</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"condeferred"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6401"><span class='Ref_To_Local'>i_contableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"contableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6402"><span class='Ref_To_Local'>i_conoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"conoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6403"><span class='Ref_To_Local'>i_condef</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"condef"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6404"><span class='Ref_To_Local'>i_tablespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tablespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6405"><span class='Ref_To_Local'>i_indreloptions</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"indreloptions"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN352"><span class='Ref_to_Typedef'>IndxInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6407"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN352"><span class='Ref_to_Typedef'>IndxInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6407"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN6407"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN6594"></a>            <span class='Keyword'>char</span>        <span class='Declare_Local'>contype</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN57"><span class='Ref_to_EnumConst'>DO_INDEX</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6389"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6390"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6391"><span class='Ref_To_Local'>i_indexname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN355"><span class='Ref_to_Member'>indextable</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN356"><span class='Ref_to_Member'>indexdef</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6392"><span class='Ref_To_Local'>i_indexdef</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN359"><span class='Ref_to_Member'>indnkeys</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6393"><span class='Ref_To_Local'>i_indnkeys</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN357"><span class='Ref_to_Member'>tablespace</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6404"><span class='Ref_To_Local'>i_tablespace</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN358"><span class='Ref_to_Member'>indreloptions</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6405"><span class='Ref_To_Local'>i_indreloptions</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN360"><span class='Ref_to_Member'>indkeys</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN359"><span class='Ref_to_Member'>indnkeys</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.h.html#LN660"><span class='Ref_to_Proto'>parseOidArray</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6394"><span class='Ref_To_Local'>i_indkey</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN360"><span class='Ref_to_Member'>indkeys</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN359"><span class='Ref_to_Member'>indnkeys</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN361"><span class='Ref_to_Member'>indisclustered</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6395"><span class='Ref_To_Local'>i_indisclustered</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN362"><span class='Ref_to_Member'>indisreplident</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6396"><span class='Ref_To_Local'>i_indisreplident</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN365"><span class='Ref_to_Member'>relpages</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6406"><span class='Ref_To_Local'>i_relpages</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6594"><span class='Ref_To_Local'>contype</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6397"><span class='Ref_To_Local'>i_contype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6594"><span class='Ref_To_Local'>contype</span></a> <span class='Operator'>== </span><span class='String'>'p'</span> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN6594"><span class='Ref_To_Local'>contype</span></a> <span class='Operator'>== </span><span class='String'>'u'</span> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN6594"><span class='Ref_To_Local'>contype</span></a> <span class='Operator'>== </span><span class='String'>'x'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * If we found a constraint matching the index, create an 
                 * entry for it. 
                 */ 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN61"><span class='Ref_to_EnumConst'>DO_CONSTRAINT</span></a><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6401"><span class='Ref_To_Local'>i_contableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6402"><span class='Ref_To_Local'>i_conoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6398"><span class='Ref_To_Local'>i_conname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN426"><span class='Ref_to_Member'>contable</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6411"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN427"><span class='Ref_to_Member'>condomain</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6594"><span class='Ref_To_Local'>contype</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6594"><span class='Ref_To_Local'>contype</span></a> <span class='Operator'>== </span><span class='String'>'x'</span><span class='Parentheses'>) 
</span>                    <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6403"><span class='Ref_To_Local'>i_condef</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN430"><span class='Ref_to_Member'>confrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN431"><span class='Ref_to_Member'>conindex</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN432"><span class='Ref_to_Member'>condeferrable</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6399"><span class='Ref_To_Local'>i_condeferrable</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='String'>'t'</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN433"><span class='Ref_to_Member'>condeferred</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6400"><span class='Ref_To_Local'>i_condeferred</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='String'>'t'</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN434"><span class='Ref_to_Member'>conislocal</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN364"><span class='Ref_to_Member'>indexconstraint</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6388"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if contype=='p'||contype... &raquo; </span> 
            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* Plain secondary index */ 
</span>                <a href="pg_dump.c.html#LN6387"><span class='Ref_To_Local'>indxinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6384"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN364"><span class='Ref_to_Member'>indexconstraint</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;ntups;j++ &raquo; </span> 
 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6386"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numTables;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6385"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getIndexes &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getExtendedStatistics 
 *    get information about extended statistics on a dumpable table 
 *    or materialized view. 
 * 
 * Note: extended statistics data is not returned directly to the caller, but 
 * it does get entered into the DumpableObject tables. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN6665"></a><span class='Declare_Function'>getExtendedStatistics</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>[], </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6667"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN6668"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span><a name="LN6669"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN6670"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN6671"></a>    <a href="pg_dump.h.html#LN368"><span class='Ref_to_Typedef'>StatsExtInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>statsextinfo</span><span class='Delimiter'>; 
</span><a name="LN6672"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN6673"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN6674"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN6675"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_stxname</span><span class='Delimiter'>; 
</span><a name="LN6676"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_stxdef</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Extended statistics were new in v10 */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6665"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>100000</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6669"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6667"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6667"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN6665"><span class='Ref_to_Parameter'>numTables</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6667"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6686"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN6665"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6667"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Only plain tables, materialized views, foreign tables and 
         * partitioned tables can have extended statistics. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6686"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a> <span class='Operator'>&& 
</span>            <a href="pg_dump.c.html#LN6686"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a> <span class='Operator'>&& 
</span>            <a href="pg_dump.c.html#LN6686"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a> <span class='Operator'>&& 
</span>            <a href="pg_dump.c.html#LN6686"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_class.h.html#LN167"><span class='Ref_to_Const'>RELKIND_PARTITIONED_TABLE</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Ignore extended statistics of tables whose definitions are not to 
         * be dumped. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6686"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"reading extended statistics for table \"%s.%s\"\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN6686"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN6686"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Make sure we are in proper schema so stadef is right */ 
</span>        <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6665"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6686"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6669"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6669"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT "</span> 
                          <span class='String'>"tableoid, "</span> 
                          <span class='String'>"oid, "</span> 
                          <span class='String'>"stxname, "</span> 
                          <span class='String'>"pg_catalog.pg_get_statisticsobjdef(oid) AS stxdef "</span> 
                          <span class='String'>"FROM pg_statistic_ext "</span> 
                          <span class='String'>"WHERE stxrelid = '%u' "</span> 
                          <span class='String'>"ORDER BY stxname"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6686"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6670"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6665"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6669"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6672"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6670"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6673"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6670"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6674"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6670"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6675"><span class='Ref_To_Local'>i_stxname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6670"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"stxname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6676"><span class='Ref_To_Local'>i_stxdef</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6670"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"stxdef"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6671"><span class='Ref_To_Local'>statsextinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN368"><span class='Ref_to_Typedef'>StatsExtInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6672"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN368"><span class='Ref_to_Typedef'>StatsExtInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN6672"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN6671"><span class='Ref_To_Local'>statsextinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN58"><span class='Ref_to_EnumConst'>DO_STATSEXT</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6671"><span class='Ref_To_Local'>statsextinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6670"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6673"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6671"><span class='Ref_To_Local'>statsextinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6670"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6674"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN6671"><span class='Ref_To_Local'>statsextinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6671"><span class='Ref_To_Local'>statsextinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6670"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6675"><span class='Ref_To_Local'>i_stxname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6671"><span class='Ref_To_Local'>statsextinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6686"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6671"><span class='Ref_To_Local'>statsextinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN371"><span class='Ref_to_Member'>statsexttable</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6686"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6671"><span class='Ref_To_Local'>statsextinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN372"><span class='Ref_to_Member'>statsextdef</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6670"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6668"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6676"><span class='Ref_To_Local'>i_stxdef</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6670"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numTables;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6669"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getExtendedStatistics &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getConstraints 
 * 
 * Get info about constraints on dumpable tables. 
 * 
 * Currently handles foreign keys only. 
 * Unique and primary key constraints are handled with indexes, 
 * while check constraints are processed in getTableAttrs(). 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN6764"></a><span class='Declare_Function'>getConstraints</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>[], </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6766"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN6767"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span><a name="LN6768"></a>    <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>constrinfo</span><span class='Delimiter'>; 
</span><a name="LN6769"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN6770"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN6771"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_contableoid</span><span class='Delimiter'>, 
</span><a name="LN6772"></a>                <span class='Declare_Local'>i_conoid</span><span class='Delimiter'>, 
</span><a name="LN6773"></a>                <span class='Declare_Local'>i_conname</span><span class='Delimiter'>, 
</span><a name="LN6774"></a>                <span class='Declare_Local'>i_confrelid</span><span class='Delimiter'>, 
</span><a name="LN6775"></a>                <span class='Declare_Local'>i_condef</span><span class='Delimiter'>; 
</span><a name="LN6776"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6769"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6766"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6766"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN6764"><span class='Ref_to_Parameter'>numTables</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6766"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6782"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN6764"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6766"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN6782"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN276"><span class='Ref_to_Member'>hastriggers</span></a> <span class='Operator'>|| 
</span>            <span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6782"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"reading foreign key constraints for table \"%s.%s\"\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN6782"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN6782"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * select table schema to ensure constraint expr is qualified if 
         * needed 
         */ 
</span>        <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6764"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6782"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6769"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6769"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT tableoid, oid, conname, confrelid, "</span> 
                          <span class='String'>"pg_catalog.pg_get_constraintdef(oid) AS condef "</span> 
                          <span class='String'>"FROM pg_catalog.pg_constraint "</span> 
                          <span class='String'>"WHERE conrelid = '%u'::pg_catalog.oid "</span> 
                          <span class='String'>"AND contype = 'f'"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN6782"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6764"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6769"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6776"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6771"><span class='Ref_To_Local'>i_contableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6772"><span class='Ref_To_Local'>i_conoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6773"><span class='Ref_To_Local'>i_conname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"conname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6774"><span class='Ref_To_Local'>i_confrelid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"confrelid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6775"><span class='Ref_To_Local'>i_condef</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"condef"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6776"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN6776"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN62"><span class='Ref_to_EnumConst'>DO_FK_CONSTRAINT</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6771"><span class='Ref_To_Local'>i_contableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6772"><span class='Ref_To_Local'>i_conoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6773"><span class='Ref_To_Local'>i_conname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6782"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN426"><span class='Ref_to_Member'>contable</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6782"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN427"><span class='Ref_to_Member'>condomain</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a> <span class='Operator'>= </span><span class='String'>'f'</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6775"><span class='Ref_To_Local'>i_condef</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN430"><span class='Ref_to_Member'>confrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6774"><span class='Ref_To_Local'>i_confrelid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN431"><span class='Ref_to_Member'>conindex</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN432"><span class='Ref_to_Member'>condeferrable</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN433"><span class='Ref_to_Member'>condeferred</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN434"><span class='Ref_to_Member'>conislocal</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN6768"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6767"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6770"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numTables;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6769"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getConstraints &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getDomainConstraints 
 * 
 * Get info about constraints on a domain. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN6851"></a><span class='Declare_Function'>getDomainConstraints</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6853"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN6854"></a>    <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>constrinfo</span><span class='Delimiter'>; 
</span><a name="LN6855"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN6856"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN6857"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>, 
</span><a name="LN6858"></a>                <span class='Declare_Local'>i_oid</span><span class='Delimiter'>, 
</span><a name="LN6859"></a>                <span class='Declare_Local'>i_conname</span><span class='Delimiter'>, 
</span><a name="LN6860"></a>                <span class='Declare_Local'>i_consrc</span><span class='Delimiter'>; 
</span><a name="LN6861"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * select appropriate schema to ensure names in constraint are properly 
     * qualified 
     */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6851"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6851"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6855"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6851"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6855"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, conname, "</span> 
                          <span class='String'>"pg_catalog.pg_get_constraintdef(oid) AS consrc, "</span> 
                          <span class='String'>"convalidated "</span> 
                          <span class='String'>"FROM pg_catalog.pg_constraint "</span> 
                          <span class='String'>"WHERE contypid = '%u'::pg_catalog.oid "</span> 
                          <span class='String'>"ORDER BY conname"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN6851"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6855"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, conname, "</span> 
                          <span class='String'>"pg_catalog.pg_get_constraintdef(oid) AS consrc, "</span> 
                          <span class='String'>"true as convalidated "</span> 
                          <span class='String'>"FROM pg_catalog.pg_constraint "</span> 
                          <span class='String'>"WHERE contypid = '%u'::pg_catalog.oid "</span> 
                          <span class='String'>"ORDER BY conname"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN6851"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6851"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6855"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6861"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6857"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN6858"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN6859"><span class='Ref_To_Local'>i_conname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"conname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN6860"><span class='Ref_To_Local'>i_consrc</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"consrc"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6861"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6851"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN184"><span class='Ref_to_Member'>nDomChecks</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6861"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN6851"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN185"><span class='Ref_to_Member'>domChecks</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN6861"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN6905"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>validated</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN61"><span class='Ref_to_EnumConst'>DO_CONSTRAINT</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6857"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6858"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6859"><span class='Ref_To_Local'>i_conname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6851"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN426"><span class='Ref_to_Member'>contable</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN427"><span class='Ref_to_Member'>condomain</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6851"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a> <span class='Operator'>= </span><span class='String'>'c'</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6860"><span class='Ref_To_Local'>i_consrc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN430"><span class='Ref_to_Member'>confrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN431"><span class='Ref_to_Member'>conindex</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN432"><span class='Ref_to_Member'>condeferrable</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN433"><span class='Ref_to_Member'>condeferred</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN434"><span class='Ref_to_Member'>conislocal</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>= !</span><a href="pg_dump.c.html#LN6905"><span class='Ref_To_Local'>validated</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Make the domain depend on the constraint, ensuring it won't be 
         * output till any constraint dependencies are OK.  If the constraint 
         * has not been validated, it's going to be dumped after the domain 
         * anyway, so this doesn't matter. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6905"><span class='Ref_To_Local'>validated</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN6851"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, 
</span>                                <a href="pg_dump.c.html#LN6854"><span class='Ref_To_Local'>constrinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6853"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6856"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6855"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getDomainConstraints &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getRules 
 *    get basic information about every rule in the system 
 * 
 * numRules is set to the number of rules read in 
 */ 
</span><a href="pg_dump.h.html#LN375"><span class='Ref_to_Typedef'>RuleInfo</span></a> <span class='Operator'>* 
</span><a name="LN6948"></a><span class='Declare_Function'>getRules</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numRules</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN6950"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN6951"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN6952"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN6953"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN6954"></a>    <a href="pg_dump.h.html#LN375"><span class='Ref_to_Typedef'>RuleInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>ruleinfo</span><span class='Delimiter'>; 
</span><a name="LN6955"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN6956"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN6957"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rulename</span><span class='Delimiter'>; 
</span><a name="LN6958"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_ruletable</span><span class='Delimiter'>; 
</span><a name="LN6959"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_ev_type</span><span class='Delimiter'>; 
</span><a name="LN6960"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_is_instead</span><span class='Delimiter'>; 
</span><a name="LN6961"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_ev_enabled</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6948"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6948"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6953"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span> 
                             <span class='String'>"tableoid, oid, rulename, "</span> 
                             <span class='String'>"ev_class AS ruletable, ev_type, is_instead, "</span> 
                             <span class='String'>"ev_enabled "</span> 
                             <span class='String'>"FROM pg_rewrite "</span> 
                             <span class='String'>"ORDER BY oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6953"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span> 
                             <span class='String'>"tableoid, oid, rulename, "</span> 
                             <span class='String'>"ev_class AS ruletable, ev_type, is_instead, "</span> 
                             <span class='String'>"'O'::char AS ev_enabled "</span> 
                             <span class='String'>"FROM pg_rewrite "</span> 
                             <span class='String'>"ORDER BY oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6948"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6953"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6951"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN6948"><span class='Ref_to_Parameter'>numRules</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6951"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN375"><span class='Ref_to_Typedef'>RuleInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6951"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN375"><span class='Ref_to_Typedef'>RuleInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN6955"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN6956"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN6957"><span class='Ref_To_Local'>i_rulename</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rulename"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN6958"><span class='Ref_To_Local'>i_ruletable</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"ruletable"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN6959"><span class='Ref_To_Local'>i_ev_type</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"ev_type"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN6960"><span class='Ref_To_Local'>i_is_instead</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"is_instead"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN6961"><span class='Ref_To_Local'>i_ev_enabled</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"ev_enabled"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN6951"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN7003"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>ruletableoid</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN59"><span class='Ref_to_EnumConst'>DO_RULE</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6955"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6956"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6957"><span class='Ref_To_Local'>i_rulename</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7003"><span class='Ref_To_Local'>ruletableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6958"><span class='Ref_To_Local'>i_ruletable</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN378"><span class='Ref_to_Member'>ruletable</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN649"><span class='Ref_to_Proto'>findTableByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7003"><span class='Ref_To_Local'>ruletableoid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN378"><span class='Ref_to_Member'>ruletable</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"failed sanity check, parent table with OID %u of pg_rewrite entry with OID %u not found\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN7003"><span class='Ref_To_Local'>ruletableoid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN378"><span class='Ref_to_Member'>ruletable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN378"><span class='Ref_to_Member'>ruletable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN379"><span class='Ref_to_Member'>ev_type</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6959"><span class='Ref_To_Local'>i_ev_type</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN380"><span class='Ref_to_Member'>is_instead</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6960"><span class='Ref_To_Local'>i_is_instead</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='String'>'t'</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN381"><span class='Ref_to_Member'>ev_enabled</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN6961"><span class='Ref_To_Local'>i_ev_enabled</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN378"><span class='Ref_to_Member'>ruletable</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * If the table is a view or materialized view, force its ON 
             * SELECT rule to be sorted before the view itself --- this 
             * ensures that any dependencies for the rule affect the table's 
             * positioning. Other rules are forced to appear after their 
             * table. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN378"><span class='Ref_to_Member'>ruletable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a> <span class='Operator'>|| 
</span>                 <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN378"><span class='Ref_to_Member'>ruletable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN379"><span class='Ref_to_Member'>ev_type</span></a> <span class='Operator'>== </span><span class='String'>'1'</span> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN380"><span class='Ref_to_Member'>is_instead</span></a><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN378"><span class='Ref_to_Member'>ruletable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, 
</span>                                    <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Comment_Multi_Line'>/* We'll merge the rule into CREATE VIEW, if possible */ 
</span>                <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN382"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, 
</span>                                    <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN378"><span class='Ref_to_Member'>ruletable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN382"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if ruleinfo[i].ruletable &raquo; </span> 
        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN6952"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN382"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6950"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN6953"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN6954"><span class='Ref_To_Local'>ruleinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getRules &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTriggers 
 *    get information about every trigger on a dumpable table 
 * 
 * Note: trigger data is not returned directly to the caller, but it 
 * does get entered into the DumpableObject tables. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN7064"></a><span class='Declare_Function'>getTriggers</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>[], </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7066"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN7067"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span><a name="LN7068"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN7069"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN7070"></a>    <a href="pg_dump.h.html#LN386"><span class='Ref_to_Typedef'>TriggerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tginfo</span><span class='Delimiter'>; 
</span><a name="LN7071"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>, 
</span><a name="LN7072"></a>                <span class='Declare_Local'>i_oid</span><span class='Delimiter'>, 
</span><a name="LN7073"></a>                <span class='Declare_Local'>i_tgname</span><span class='Delimiter'>, 
</span><a name="LN7074"></a>                <span class='Declare_Local'>i_tgfname</span><span class='Delimiter'>, 
</span><a name="LN7075"></a>                <span class='Declare_Local'>i_tgtype</span><span class='Delimiter'>, 
</span><a name="LN7076"></a>                <span class='Declare_Local'>i_tgnargs</span><span class='Delimiter'>, 
</span><a name="LN7077"></a>                <span class='Declare_Local'>i_tgargs</span><span class='Delimiter'>, 
</span><a name="LN7078"></a>                <span class='Declare_Local'>i_tgisconstraint</span><span class='Delimiter'>, 
</span><a name="LN7079"></a>                <span class='Declare_Local'>i_tgconstrname</span><span class='Delimiter'>, 
</span><a name="LN7080"></a>                <span class='Declare_Local'>i_tgconstrrelid</span><span class='Delimiter'>, 
</span><a name="LN7081"></a>                <span class='Declare_Local'>i_tgconstrrelname</span><span class='Delimiter'>, 
</span><a name="LN7082"></a>                <span class='Declare_Local'>i_tgenabled</span><span class='Delimiter'>, 
</span><a name="LN7083"></a>                <span class='Declare_Local'>i_tgdeferrable</span><span class='Delimiter'>, 
</span><a name="LN7084"></a>                <span class='Declare_Local'>i_tginitdeferred</span><span class='Delimiter'>, 
</span><a name="LN7085"></a>                <span class='Declare_Local'>i_tgdef</span><span class='Delimiter'>; 
</span><a name="LN7086"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7066"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7066"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN7064"><span class='Ref_to_Parameter'>numTables</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7066"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN7090"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN7064"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7066"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN276"><span class='Ref_to_Member'>hastriggers</span></a> <span class='Operator'>|| 
</span>            <span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>))</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"reading triggers for table \"%s.%s\"\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * select table schema to ensure regproc name is qualified if needed 
         */ 
</span>        <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7064"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7068"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7064"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90000</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * NB: think not to use pretty=true in pg_get_triggerdef.  It 
             * could result in non-forward-compatible dumps of WHEN clauses 
             * due to under-parenthesization. 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7068"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT tgname, "</span> 
                              <span class='String'>"tgfoid::pg_catalog.regproc AS tgfname, "</span> 
                        <span class='String'>"pg_catalog.pg_get_triggerdef(oid, false) AS tgdef, "</span> 
                              <span class='String'>"tgenabled, tableoid, oid "</span> 
                              <span class='String'>"FROM pg_catalog.pg_trigger t "</span> 
                              <span class='String'>"WHERE tgrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"AND NOT tgisinternal"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7064"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * We ignore triggers that are tied to a foreign-key constraint 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7068"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT tgname, "</span> 
                              <span class='String'>"tgfoid::pg_catalog.regproc AS tgfname, "</span> 
                              <span class='String'>"tgtype, tgnargs, tgargs, tgenabled, "</span> 
                              <span class='String'>"tgisconstraint, tgconstrname, tgdeferrable, "</span> 
                              <span class='String'>"tgconstrrelid, tginitdeferred, tableoid, oid, "</span> 
                     <span class='String'>"tgconstrrelid::pg_catalog.regclass AS tgconstrrelname "</span> 
                              <span class='String'>"FROM pg_catalog.pg_trigger t "</span> 
                              <span class='String'>"WHERE tgrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"AND tgconstraint = 0"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * We ignore triggers that are tied to a foreign-key constraint, 
             * but in these versions we have to grovel through pg_constraint 
             * to find out 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7068"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT tgname, "</span> 
                              <span class='String'>"tgfoid::pg_catalog.regproc AS tgfname, "</span> 
                              <span class='String'>"tgtype, tgnargs, tgargs, tgenabled, "</span> 
                              <span class='String'>"tgisconstraint, tgconstrname, tgdeferrable, "</span> 
                              <span class='String'>"tgconstrrelid, tginitdeferred, tableoid, oid, "</span> 
                     <span class='String'>"tgconstrrelid::pg_catalog.regclass AS tgconstrrelname "</span> 
                              <span class='String'>"FROM pg_catalog.pg_trigger t "</span> 
                              <span class='String'>"WHERE tgrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"AND (NOT tgisconstraint "</span> 
                              <span class='String'>" OR NOT EXISTS"</span> 
                              <span class='String'>"  (SELECT 1 FROM pg_catalog.pg_depend d "</span> 
                              <span class='String'>"   JOIN pg_catalog.pg_constraint c ON (d.refclassid = c.tableoid AND d.refobjid = c.oid) "</span> 
                              <span class='String'>"   WHERE d.classid = t.tableoid AND d.objid = t.oid AND d.deptype = 'i' AND c.contype = 'f'))"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
        <a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7064"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7068"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN7086"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN7071"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7072"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7073"><span class='Ref_To_Local'>i_tgname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7074"><span class='Ref_To_Local'>i_tgfname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgfname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7075"><span class='Ref_To_Local'>i_tgtype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgtype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7076"><span class='Ref_To_Local'>i_tgnargs</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgnargs"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7077"><span class='Ref_To_Local'>i_tgargs</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgargs"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7078"><span class='Ref_To_Local'>i_tgisconstraint</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgisconstraint"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7079"><span class='Ref_To_Local'>i_tgconstrname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgconstrname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7080"><span class='Ref_To_Local'>i_tgconstrrelid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgconstrrelid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7081"><span class='Ref_To_Local'>i_tgconstrrelname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgconstrrelname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7082"><span class='Ref_To_Local'>i_tgenabled</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgenabled"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7083"><span class='Ref_To_Local'>i_tgdeferrable</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgdeferrable"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7084"><span class='Ref_To_Local'>i_tginitdeferred</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tginitdeferred"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7085"><span class='Ref_To_Local'>i_tgdef</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tgdef"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN386"><span class='Ref_to_Typedef'>TriggerInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7086"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN386"><span class='Ref_to_Typedef'>TriggerInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN331"><span class='Ref_to_Member'>numTriggers</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7086"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN332"><span class='Ref_to_Member'>triggers</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN7086"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN60"><span class='Ref_to_EnumConst'>DO_TRIGGER</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7071"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7072"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7073"><span class='Ref_To_Local'>i_tgname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN389"><span class='Ref_to_Member'>tgtable</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN398"><span class='Ref_to_Member'>tgenabled</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7082"><span class='Ref_To_Local'>i_tgenabled</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7085"><span class='Ref_To_Local'>i_tgdef</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN401"><span class='Ref_to_Member'>tgdef</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7085"><span class='Ref_To_Local'>i_tgdef</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* remaining fields are not valid if we have tgdef */ 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN390"><span class='Ref_to_Member'>tgfname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN391"><span class='Ref_to_Member'>tgtype</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN392"><span class='Ref_to_Member'>tgnargs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN393"><span class='Ref_to_Member'>tgargs</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN394"><span class='Ref_to_Member'>tgisconstraint</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN399"><span class='Ref_to_Member'>tgdeferrable</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN400"><span class='Ref_to_Member'>tginitdeferred</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN395"><span class='Ref_to_Member'>tgconstrname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN396"><span class='Ref_to_Member'>tgconstrrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN397"><span class='Ref_to_Member'>tgconstrrelname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN401"><span class='Ref_to_Member'>tgdef</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN390"><span class='Ref_to_Member'>tgfname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7074"><span class='Ref_To_Local'>i_tgfname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN391"><span class='Ref_to_Member'>tgtype</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7075"><span class='Ref_To_Local'>i_tgtype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN392"><span class='Ref_to_Member'>tgnargs</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7076"><span class='Ref_To_Local'>i_tgnargs</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN393"><span class='Ref_to_Member'>tgargs</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7077"><span class='Ref_To_Local'>i_tgargs</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN394"><span class='Ref_to_Member'>tgisconstraint</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7078"><span class='Ref_To_Local'>i_tgisconstraint</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='String'>'t'</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN399"><span class='Ref_to_Member'>tgdeferrable</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7083"><span class='Ref_To_Local'>i_tgdeferrable</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='String'>'t'</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN400"><span class='Ref_to_Member'>tginitdeferred</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7084"><span class='Ref_To_Local'>i_tginitdeferred</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='String'>'t'</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN394"><span class='Ref_to_Member'>tgisconstraint</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN395"><span class='Ref_to_Member'>tgconstrname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7079"><span class='Ref_To_Local'>i_tgconstrname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN396"><span class='Ref_to_Member'>tgconstrrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7080"><span class='Ref_To_Local'>i_tgconstrrelid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN396"><span class='Ref_to_Member'>tgconstrrelid</span></a><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7081"><span class='Ref_To_Local'>i_tgconstrrelname</span></a><span class='Parentheses'>))</span> 
                            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"query produced null referenced table name for foreign key trigger \"%s\" on table \"%s\" (OID of table: %u)\n"</span><span class='Delimiter'>, 
</span>                                          <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                                          <a href="pg_dump.c.html#LN7090"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                                          <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN396"><span class='Ref_to_Member'>tgconstrrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN397"><span class='Ref_to_Member'>tgconstrrelname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7081"><span class='Ref_To_Local'>i_tgconstrrelname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                        <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN397"><span class='Ref_to_Member'>tgconstrrelname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN395"><span class='Ref_to_Member'>tgconstrname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN396"><span class='Ref_to_Member'>tgconstrrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>                    <a href="pg_dump.c.html#LN7070"><span class='Ref_To_Local'>tginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7067"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN397"><span class='Ref_to_Member'>tgconstrrelname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;ntups;j++ &raquo; </span> 
 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7069"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numTables;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7068"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTriggers &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getEventTriggers 
 *    get information about event triggers 
 */ 
</span><a href="pg_dump.h.html#LN404"><span class='Ref_to_Typedef'>EventTriggerInfo</span></a> <span class='Operator'>* 
</span><a name="LN7264"></a><span class='Declare_Function'>getEventTriggers</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numEventTriggers</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7266"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN7267"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN7268"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN7269"></a>    <a href="pg_dump.h.html#LN404"><span class='Ref_to_Typedef'>EventTriggerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>evtinfo</span><span class='Delimiter'>; 
</span><a name="LN7270"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>, 
</span><a name="LN7271"></a>                <span class='Declare_Local'>i_oid</span><span class='Delimiter'>, 
</span><a name="LN7272"></a>                <span class='Declare_Local'>i_evtname</span><span class='Delimiter'>, 
</span><a name="LN7273"></a>                <span class='Declare_Local'>i_evtevent</span><span class='Delimiter'>, 
</span><a name="LN7274"></a>                <span class='Declare_Local'>i_evtowner</span><span class='Delimiter'>, 
</span><a name="LN7275"></a>                <span class='Declare_Local'>i_evttags</span><span class='Delimiter'>, 
</span><a name="LN7276"></a>                <span class='Declare_Local'>i_evtfname</span><span class='Delimiter'>, 
</span><a name="LN7277"></a>                <span class='Declare_Local'>i_evtenabled</span><span class='Delimiter'>; 
</span><a name="LN7278"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Before 9.3, there are no event triggers */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7264"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN7264"><span class='Ref_to_Parameter'>numEventTriggers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN7267"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7264"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7267"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT e.tableoid, e.oid, evtname, evtenabled, "</span> 
                      <span class='String'>"evtevent, (%s evtowner) AS evtowner, "</span> 
                      <span class='String'>"array_to_string(array("</span> 
                      <span class='String'>"select quote_literal(x) "</span> 
                      <span class='String'>" from unnest(evttags) as t(x)), ', ') as evttags, "</span> 
                      <span class='String'>"e.evtfoid::regproc as evtfname "</span> 
                      <span class='String'>"FROM pg_event_trigger e "</span> 
                      <span class='String'>"ORDER BY e.oid"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7264"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7267"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7278"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN7264"><span class='Ref_to_Parameter'>numEventTriggers</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7278"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN404"><span class='Ref_to_Typedef'>EventTriggerInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7278"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN404"><span class='Ref_to_Typedef'>EventTriggerInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7270"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7271"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7272"><span class='Ref_To_Local'>i_evtname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"evtname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7273"><span class='Ref_To_Local'>i_evtevent</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"evtevent"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7274"><span class='Ref_To_Local'>i_evtowner</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"evtowner"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7275"><span class='Ref_To_Local'>i_evttags</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"evttags"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7276"><span class='Ref_To_Local'>i_evtfname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"evtfname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7277"><span class='Ref_To_Local'>i_evtenabled</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"evtenabled"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN7278"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN80"><span class='Ref_to_EnumConst'>DO_EVENT_TRIGGER</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7270"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7271"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7272"><span class='Ref_To_Local'>i_evtname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN407"><span class='Ref_to_Member'>evtname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7272"><span class='Ref_To_Local'>i_evtname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN408"><span class='Ref_to_Member'>evtevent</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7273"><span class='Ref_To_Local'>i_evtevent</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN409"><span class='Ref_to_Member'>evtowner</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7274"><span class='Ref_To_Local'>i_evtowner</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN410"><span class='Ref_to_Member'>evttags</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7275"><span class='Ref_To_Local'>i_evttags</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN411"><span class='Ref_to_Member'>evtfname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7276"><span class='Ref_To_Local'>i_evtfname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN412"><span class='Ref_to_Member'>evtenabled</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7277"><span class='Ref_To_Local'>i_evtenabled</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7264"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Event Triggers do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7266"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7268"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7267"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN7269"><span class='Ref_To_Local'>evtinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getEventTriggers &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getProcLangs 
 *    get basic information about every procedural language in the system 
 * 
 * numProcLangs is set to the number of langs read in 
 * 
 * NB: this must run after getFuncs() because we assume we can do 
 * findFuncByOid(). 
 */ 
</span><a href="pg_dump.h.html#LN438"><span class='Ref_to_Typedef'>ProcLangInfo</span></a> <span class='Operator'>* 
</span><a name="LN7358"></a><span class='Declare_Function'>getProcLangs</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numProcLangs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7360"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7358"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN7361"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN7362"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN7363"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN7364"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN7365"></a>    <a href="pg_dump.h.html#LN438"><span class='Ref_to_Typedef'>ProcLangInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>planginfo</span><span class='Delimiter'>; 
</span><a name="LN7366"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN7367"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN7368"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_lanname</span><span class='Delimiter'>; 
</span><a name="LN7369"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_lanpltrusted</span><span class='Delimiter'>; 
</span><a name="LN7370"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_lanplcallfoid</span><span class='Delimiter'>; 
</span><a name="LN7371"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_laninline</span><span class='Delimiter'>; 
</span><a name="LN7372"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_lanvalidator</span><span class='Delimiter'>; 
</span><a name="LN7373"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_lanacl</span><span class='Delimiter'>; 
</span><a name="LN7374"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rlanacl</span><span class='Delimiter'>; 
</span><a name="LN7375"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initlanacl</span><span class='Delimiter'>; 
</span><a name="LN7376"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initrlanacl</span><span class='Delimiter'>; 
</span><a name="LN7377"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_lanowner</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7358"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7358"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN7384"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN7385"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN7386"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initacl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN7387"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initracl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7384"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7385"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7386"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN7387"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"l.lanacl"</span><span class='Delimiter'>, </span><span class='String'>"l.lanowner"</span><span class='Delimiter'>, </span><span class='String'>"'l'"</span><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN7360"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* pg_language has a laninline column */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7364"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT l.tableoid, l.oid, "</span> 
                          <span class='String'>"l.lanname, l.lanpltrusted, l.lanplcallfoid, "</span> 
                          <span class='String'>"l.laninline, l.lanvalidator, "</span> 
                          <span class='String'>"%s AS lanacl, "</span> 
                          <span class='String'>"%s AS rlanacl, "</span> 
                          <span class='String'>"%s AS initlanacl, "</span> 
                          <span class='String'>"%s AS initrlanacl, "</span> 
                          <span class='String'>"(%s l.lanowner) AS lanowner "</span> 
                          <span class='String'>"FROM pg_language l "</span> 
                          <span class='String'>"LEFT JOIN pg_init_privs pip ON "</span> 
                          <span class='String'>"(l.oid = pip.objoid "</span> 
                          <span class='String'>"AND pip.classoid = 'pg_language'::regclass "</span> 
                          <span class='String'>"AND pip.objsubid = 0) "</span> 
                          <span class='String'>"WHERE l.lanispl "</span> 
                          <span class='String'>"ORDER BY l.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN7384"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN7385"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN7386"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN7387"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7384"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7385"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7386"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7387"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7358"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90000</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* pg_language has a laninline column */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7364"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, "</span> 
                          <span class='String'>"lanname, lanpltrusted, lanplcallfoid, "</span> 
                          <span class='String'>"laninline, lanvalidator, lanacl, NULL AS rlanacl, "</span> 
                          <span class='String'>"NULL AS initlanacl, NULL AS initrlanacl, "</span> 
                          <span class='String'>"(%s lanowner) AS lanowner "</span> 
                          <span class='String'>"FROM pg_language "</span> 
                          <span class='String'>"WHERE lanispl "</span> 
                          <span class='String'>"ORDER BY oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7358"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* pg_language has a lanowner column */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7364"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, "</span> 
                          <span class='String'>"lanname, lanpltrusted, lanplcallfoid, "</span> 
                          <span class='String'>"0 AS laninline, lanvalidator, lanacl, "</span> 
                          <span class='String'>"NULL AS rlanacl, "</span> 
                          <span class='String'>"NULL AS initlanacl, NULL AS initrlanacl, "</span> 
                          <span class='String'>"(%s lanowner) AS lanowner "</span> 
                          <span class='String'>"FROM pg_language "</span> 
                          <span class='String'>"WHERE lanispl "</span> 
                          <span class='String'>"ORDER BY oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7358"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Languages are owned by the bootstrap superuser, OID 10 */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7364"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, "</span> 
                          <span class='String'>"lanname, lanpltrusted, lanplcallfoid, "</span> 
                          <span class='String'>"0 AS laninline, lanvalidator, lanacl, "</span> 
                          <span class='String'>"NULL AS rlanacl, "</span> 
                          <span class='String'>"NULL AS initlanacl, NULL AS initrlanacl, "</span> 
                          <span class='String'>"(%s '10') AS lanowner "</span> 
                          <span class='String'>"FROM pg_language "</span> 
                          <span class='String'>"WHERE lanispl "</span> 
                          <span class='String'>"ORDER BY oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Languages are owned by the bootstrap superuser, sysid 1 */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7364"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, "</span> 
                          <span class='String'>"lanname, lanpltrusted, lanplcallfoid, "</span> 
                          <span class='String'>"0 AS laninline, lanvalidator, lanacl, "</span> 
                          <span class='String'>"NULL AS rlanacl, "</span> 
                          <span class='String'>"NULL AS initlanacl, NULL AS initrlanacl, "</span> 
                          <span class='String'>"(%s '1') AS lanowner "</span> 
                          <span class='String'>"FROM pg_language "</span> 
                          <span class='String'>"WHERE lanispl "</span> 
                          <span class='String'>"ORDER BY oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7358"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7364"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7362"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN7358"><span class='Ref_to_Parameter'>numProcLangs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7362"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN438"><span class='Ref_to_Typedef'>ProcLangInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7362"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN438"><span class='Ref_to_Typedef'>ProcLangInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7366"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7367"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7368"><span class='Ref_To_Local'>i_lanname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"lanname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7369"><span class='Ref_To_Local'>i_lanpltrusted</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"lanpltrusted"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7370"><span class='Ref_To_Local'>i_lanplcallfoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"lanplcallfoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7371"><span class='Ref_To_Local'>i_laninline</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"laninline"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7372"><span class='Ref_To_Local'>i_lanvalidator</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"lanvalidator"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7373"><span class='Ref_To_Local'>i_lanacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"lanacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7374"><span class='Ref_To_Local'>i_rlanacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rlanacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7375"><span class='Ref_To_Local'>i_initlanacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initlanacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7376"><span class='Ref_To_Local'>i_initrlanacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initrlanacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7377"><span class='Ref_To_Local'>i_lanowner</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"lanowner"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN7362"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN63"><span class='Ref_to_EnumConst'>DO_PROCLANG</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7366"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7367"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7368"><span class='Ref_To_Local'>i_lanname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN441"><span class='Ref_to_Member'>lanpltrusted</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7369"><span class='Ref_To_Local'>i_lanpltrusted</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='String'>'t'</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN442"><span class='Ref_to_Member'>lanplcallfoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7370"><span class='Ref_To_Local'>i_lanplcallfoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN443"><span class='Ref_to_Member'>laninline</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7371"><span class='Ref_To_Local'>i_laninline</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN444"><span class='Ref_to_Member'>lanvalidator</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7372"><span class='Ref_To_Local'>i_lanvalidator</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN445"><span class='Ref_to_Member'>lanacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7373"><span class='Ref_To_Local'>i_lanacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN446"><span class='Ref_to_Member'>rlanacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7374"><span class='Ref_To_Local'>i_rlanacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN447"><span class='Ref_to_Member'>initlanacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7375"><span class='Ref_To_Local'>i_initlanacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN448"><span class='Ref_to_Member'>initrlanacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7376"><span class='Ref_To_Local'>i_initrlanacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN449"><span class='Ref_to_Member'>lanowner</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7377"><span class='Ref_To_Local'>i_lanowner</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1556"><span class='Ref_to_Func'>selectDumpableProcLang</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7358"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Do not try to dump ACL if no ACL exists. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7373"><span class='Ref_To_Local'>i_lanacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7374"><span class='Ref_To_Local'>i_rlanacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7375"><span class='Ref_To_Local'>i_initlanacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7376"><span class='Ref_To_Local'>i_initrlanacl</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7363"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7361"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7364"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN7365"><span class='Ref_To_Local'>planginfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getProcLangs &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getCasts 
 *    get basic information about every cast in the system 
 * 
 * numCasts is set to the number of casts read in 
 */ 
</span><a href="pg_dump.h.html#LN452"><span class='Ref_to_Typedef'>CastInfo</span></a> <span class='Operator'>* 
</span><a name="LN7539"></a><span class='Declare_Function'>getCasts</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numCasts</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7541"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN7542"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN7543"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN7544"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN7545"></a>    <a href="pg_dump.h.html#LN452"><span class='Ref_to_Typedef'>CastInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>castinfo</span><span class='Delimiter'>; 
</span><a name="LN7546"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN7547"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN7548"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_castsource</span><span class='Delimiter'>; 
</span><a name="LN7549"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_casttarget</span><span class='Delimiter'>; 
</span><a name="LN7550"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_castfunc</span><span class='Delimiter'>; 
</span><a name="LN7551"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_castcontext</span><span class='Delimiter'>; 
</span><a name="LN7552"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_castmethod</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7539"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7539"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7544"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, "</span> 
                             <span class='String'>"castsource, casttarget, castfunc, castcontext, "</span> 
                             <span class='String'>"castmethod "</span> 
                             <span class='String'>"FROM pg_cast ORDER BY 3,4"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7544"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, "</span> 
                             <span class='String'>"castsource, casttarget, castfunc, castcontext, "</span> 
                <span class='String'>"CASE WHEN castfunc = 0 THEN 'b' ELSE 'f' END AS castmethod "</span> 
                             <span class='String'>"FROM pg_cast ORDER BY 3,4"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7539"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7544"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7542"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN7539"><span class='Ref_to_Parameter'>numCasts</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7542"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN452"><span class='Ref_to_Typedef'>CastInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7542"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN452"><span class='Ref_to_Typedef'>CastInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7546"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7547"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7548"><span class='Ref_To_Local'>i_castsource</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"castsource"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7549"><span class='Ref_To_Local'>i_casttarget</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"casttarget"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7550"><span class='Ref_To_Local'>i_castfunc</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"castfunc"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7551"><span class='Ref_To_Local'>i_castcontext</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"castcontext"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7552"><span class='Ref_To_Local'>i_castmethod</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"castmethod"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN7542"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN7590"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN43"><span class='Ref_to_Struct'>PQExpBufferData</span></a> <span class='Declare_Local'>namebuf</span><span class='Delimiter'>; 
</span><a name="LN7591"></a>        <a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>sTypeInfo</span><span class='Delimiter'>; 
</span><a name="LN7592"></a>        <a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>tTypeInfo</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN64"><span class='Ref_to_EnumConst'>DO_CAST</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7546"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7547"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN455"><span class='Ref_to_Member'>castsource</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7548"><span class='Ref_To_Local'>i_castsource</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN456"><span class='Ref_to_Member'>casttarget</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7549"><span class='Ref_To_Local'>i_casttarget</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN457"><span class='Ref_to_Member'>castfunc</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7550"><span class='Ref_To_Local'>i_castfunc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN458"><span class='Ref_to_Member'>castcontext</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7551"><span class='Ref_To_Local'>i_castcontext</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN459"><span class='Ref_to_Member'>castmethod</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7552"><span class='Ref_To_Local'>i_castmethod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Try to name cast as concatenation of typnames.  This is only used 
         * for purposes of sorting.  If we fail to find either type, the name 
         * will be an empty string. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN87"><span class='Ref_to_Func'>initPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN7590"><span class='Ref_To_Local'>namebuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7591"><span class='Ref_To_Local'>sTypeInfo</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN650"><span class='Ref_to_Proto'>findTypeByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN455"><span class='Ref_to_Member'>castsource</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7592"><span class='Ref_To_Local'>tTypeInfo</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN650"><span class='Ref_to_Proto'>findTypeByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN456"><span class='Ref_to_Member'>casttarget</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7591"><span class='Ref_To_Local'>sTypeInfo</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN7592"><span class='Ref_To_Local'>tTypeInfo</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN7590"><span class='Ref_To_Local'>namebuf</span></a><span class='Delimiter'>, </span><span class='String'>"%s %s"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7591"><span class='Ref_To_Local'>sTypeInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7592"><span class='Ref_To_Local'>tTypeInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7590"><span class='Ref_To_Local'>namebuf</span></a><span class='Operator'>.</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1531"><span class='Ref_to_Func'>selectDumpableCast</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7539"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Casts do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7543"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7541"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7544"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN7545"><span class='Ref_To_Local'>castinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getCasts &raquo; </span> 
 
<span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN7632"></a><span class='Declare_Function'>get_language_name</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>langid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7634"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN7635"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN7636"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>lanname</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7634"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7634"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT lanname FROM pg_language WHERE oid = %u"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7632"><span class='Ref_to_Parameter'>langid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7635"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7632"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7634"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7636"><span class='Ref_To_Local'>lanname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7635"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7634"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7635"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN7636"><span class='Ref_To_Local'>lanname</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * getTransforms 
 *    get basic information about every transform in the system 
 * 
 * numTransforms is set to the number of transforms read in 
 */ 
</span><a href="pg_dump.h.html#LN462"><span class='Ref_to_Typedef'>TransformInfo</span></a> <span class='Operator'>* 
</span><a name="LN7655"></a><span class='Declare_Function'>getTransforms</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numTransforms</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7657"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN7658"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN7659"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN7660"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN7661"></a>    <a href="pg_dump.h.html#LN462"><span class='Ref_to_Typedef'>TransformInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>transforminfo</span><span class='Delimiter'>; 
</span><a name="LN7662"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN7663"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN7664"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_trftype</span><span class='Delimiter'>; 
</span><a name="LN7665"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_trflang</span><span class='Delimiter'>; 
</span><a name="LN7666"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_trffromsql</span><span class='Delimiter'>; 
</span><a name="LN7667"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_trftosql</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Transforms didn't exist pre-9.5 */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7655"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90500</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN7655"><span class='Ref_to_Parameter'>numTransforms</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN7660"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7655"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7660"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, "</span> 
                      <span class='String'>"trftype, trflang, trffromsql::oid, trftosql::oid "</span> 
                      <span class='String'>"FROM pg_transform "</span> 
                      <span class='String'>"ORDER BY 3,4"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7655"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7660"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7658"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN7655"><span class='Ref_to_Parameter'>numTransforms</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7658"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN462"><span class='Ref_to_Typedef'>TransformInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7658"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN462"><span class='Ref_to_Typedef'>TransformInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN7662"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7663"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7664"><span class='Ref_To_Local'>i_trftype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"trftype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7665"><span class='Ref_To_Local'>i_trflang</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"trflang"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7666"><span class='Ref_To_Local'>i_trffromsql</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"trffromsql"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN7667"><span class='Ref_To_Local'>i_trftosql</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"trftosql"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN7658"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN7703"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN43"><span class='Ref_to_Struct'>PQExpBufferData</span></a> <span class='Declare_Local'>namebuf</span><span class='Delimiter'>; 
</span><a name="LN7704"></a>        <a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>typeInfo</span><span class='Delimiter'>; 
</span><a name="LN7705"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>lanname</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN75"><span class='Ref_to_EnumConst'>DO_TRANSFORM</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7662"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7663"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN465"><span class='Ref_to_Member'>trftype</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7664"><span class='Ref_To_Local'>i_trftype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN466"><span class='Ref_to_Member'>trflang</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7665"><span class='Ref_To_Local'>i_trflang</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN467"><span class='Ref_to_Member'>trffromsql</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7666"><span class='Ref_To_Local'>i_trffromsql</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN468"><span class='Ref_to_Member'>trftosql</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7667"><span class='Ref_To_Local'>i_trftosql</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Try to name transform as concatenation of type and language name. 
         * This is only used for purposes of sorting.  If we fail to find 
         * either, the name will be an empty string. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN87"><span class='Ref_to_Func'>initPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN7703"><span class='Ref_To_Local'>namebuf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7704"><span class='Ref_To_Local'>typeInfo</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN650"><span class='Ref_to_Proto'>findTypeByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN465"><span class='Ref_to_Member'>trftype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7705"><span class='Ref_To_Local'>lanname</span></a> <span class='Operator'>= </span><a href="../../include/utils/lsyscache.h.html#LN95"><span class='Ref_to_Proto'>get_language_name</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7655"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN466"><span class='Ref_to_Member'>trflang</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7704"><span class='Ref_To_Local'>typeInfo</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN7705"><span class='Ref_To_Local'>lanname</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN7703"><span class='Ref_To_Local'>namebuf</span></a><span class='Delimiter'>, </span><span class='String'>"%s %s"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7704"><span class='Ref_To_Local'>typeInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7705"><span class='Ref_To_Local'>lanname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7703"><span class='Ref_To_Local'>namebuf</span></a><span class='Operator'>.</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7705"><span class='Ref_To_Local'>lanname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7659"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7655"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7657"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7660"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN7661"><span class='Ref_To_Local'>transforminfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTransforms &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTableAttrs - 
 *    for each interesting table, read info about its attributes 
 *    (names, types, default values, CHECK constraints, etc) 
 * 
 * This is implemented in a very inefficient way right now, looping 
 * through the tblinfo and doing a join per table to find the attrs and their 
 * types.  However, because we want type names and so forth to be named 
 * relative to the schema of each table, we couldn't do it in just one 
 * query.  (Maybe one query per schema?) 
 * 
 *  modifies tblinfo 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN7755"></a><span class='Declare_Function'>getTableAttrs</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tblinfo</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numTables</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN7757"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN7758"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN7759"></a>                <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span><a name="LN7760"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN7761"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attnum</span><span class='Delimiter'>; 
</span><a name="LN7762"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attname</span><span class='Delimiter'>; 
</span><a name="LN7763"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_atttypname</span><span class='Delimiter'>; 
</span><a name="LN7764"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_atttypmod</span><span class='Delimiter'>; 
</span><a name="LN7765"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attstattarget</span><span class='Delimiter'>; 
</span><a name="LN7766"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attstorage</span><span class='Delimiter'>; 
</span><a name="LN7767"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_typstorage</span><span class='Delimiter'>; 
</span><a name="LN7768"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attnotnull</span><span class='Delimiter'>; 
</span><a name="LN7769"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_atthasdef</span><span class='Delimiter'>; 
</span><a name="LN7770"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attidentity</span><span class='Delimiter'>; 
</span><a name="LN7771"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attisdropped</span><span class='Delimiter'>; 
</span><a name="LN7772"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attlen</span><span class='Delimiter'>; 
</span><a name="LN7773"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attalign</span><span class='Delimiter'>; 
</span><a name="LN7774"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attislocal</span><span class='Delimiter'>; 
</span><a name="LN7775"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attoptions</span><span class='Delimiter'>; 
</span><a name="LN7776"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attcollation</span><span class='Delimiter'>; 
</span><a name="LN7777"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attfdwoptions</span><span class='Delimiter'>; 
</span><a name="LN7778"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN7779"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN7780"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>hasdefaults</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7758"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7758"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>numTables</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7758"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN7784"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>tblinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7758"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Comment_Multi_Line'>/* Don't bother to collect info for sequences */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Don't bother with uninteresting tables, either */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN293"><span class='Ref_to_Member'>interesting</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Make sure we are in proper schema for this table; this allows 
         * correct retrieval of formatted type names and default exprs 
         */ 
</span>        <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* find all the user attributes and their types */ 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * we must read the attribute names in attribute number order! because 
         * we will use the attnum to index into the attnames array later. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"finding the columns and types of table \"%s.%s\"\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>100000</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * attidentity is new in version 10. 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT a.attnum, a.attname, a.atttypmod, "</span> 
                              <span class='String'>"a.attstattarget, a.attstorage, t.typstorage, "</span> 
                              <span class='String'>"a.attnotnull, a.atthasdef, a.attisdropped, "</span> 
                              <span class='String'>"a.attlen, a.attalign, a.attislocal, "</span> 
                  <span class='String'>"pg_catalog.format_type(t.oid,a.atttypmod) AS atttypname, "</span> 
                        <span class='String'>"array_to_string(a.attoptions, ', ') AS attoptions, "</span> 
                              <span class='String'>"CASE WHEN a.attcollation &LT;&GT; t.typcollation "</span> 
                           <span class='String'>"THEN a.attcollation ELSE 0 END AS attcollation, "</span> 
                              <span class='String'>"a.attidentity, "</span> 
                              <span class='String'>"pg_catalog.array_to_string(ARRAY("</span> 
                              <span class='String'>"SELECT pg_catalog.quote_ident(option_name) || "</span> 
                              <span class='String'>"' ' || pg_catalog.quote_literal(option_value) "</span> 
                        <span class='String'>"FROM pg_catalog.pg_options_to_table(attfdwoptions) "</span> 
                              <span class='String'>"ORDER BY option_name"</span> 
                              <span class='String'>"), E',\n    ') AS attfdwoptions "</span> 
             <span class='String'>"FROM pg_catalog.pg_attribute a LEFT JOIN pg_catalog.pg_type t "</span> 
                              <span class='String'>"ON a.atttypid = t.oid "</span> 
                              <span class='String'>"WHERE a.attrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"AND a.attnum &GT; 0::pg_catalog.int2 "</span> 
                              <span class='String'>"ORDER BY a.attnum"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90200</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * attfdwoptions is new in 9.2. 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT a.attnum, a.attname, a.atttypmod, "</span> 
                              <span class='String'>"a.attstattarget, a.attstorage, t.typstorage, "</span> 
                              <span class='String'>"a.attnotnull, a.atthasdef, a.attisdropped, "</span> 
                              <span class='String'>"a.attlen, a.attalign, a.attislocal, "</span> 
                  <span class='String'>"pg_catalog.format_type(t.oid,a.atttypmod) AS atttypname, "</span> 
                        <span class='String'>"array_to_string(a.attoptions, ', ') AS attoptions, "</span> 
                              <span class='String'>"CASE WHEN a.attcollation &LT;&GT; t.typcollation "</span> 
                           <span class='String'>"THEN a.attcollation ELSE 0 END AS attcollation, "</span> 
                              <span class='String'>"pg_catalog.array_to_string(ARRAY("</span> 
                              <span class='String'>"SELECT pg_catalog.quote_ident(option_name) || "</span> 
                              <span class='String'>"' ' || pg_catalog.quote_literal(option_value) "</span> 
                        <span class='String'>"FROM pg_catalog.pg_options_to_table(attfdwoptions) "</span> 
                              <span class='String'>"ORDER BY option_name"</span> 
                              <span class='String'>"), E',\n    ') AS attfdwoptions "</span> 
             <span class='String'>"FROM pg_catalog.pg_attribute a LEFT JOIN pg_catalog.pg_type t "</span> 
                              <span class='String'>"ON a.atttypid = t.oid "</span> 
                              <span class='String'>"WHERE a.attrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"AND a.attnum &GT; 0::pg_catalog.int2 "</span> 
                              <span class='String'>"ORDER BY a.attnum"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * attcollation is new in 9.1.  Since we only want to dump COLLATE 
             * clauses for attributes whose collation is different from their 
             * type's default, we use a CASE here to suppress uninteresting 
             * attcollations cheaply. 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT a.attnum, a.attname, a.atttypmod, "</span> 
                              <span class='String'>"a.attstattarget, a.attstorage, t.typstorage, "</span> 
                              <span class='String'>"a.attnotnull, a.atthasdef, a.attisdropped, "</span> 
                              <span class='String'>"a.attlen, a.attalign, a.attislocal, "</span> 
                  <span class='String'>"pg_catalog.format_type(t.oid,a.atttypmod) AS atttypname, "</span> 
                        <span class='String'>"array_to_string(a.attoptions, ', ') AS attoptions, "</span> 
                              <span class='String'>"CASE WHEN a.attcollation &LT;&GT; t.typcollation "</span> 
                           <span class='String'>"THEN a.attcollation ELSE 0 END AS attcollation, "</span> 
                              <span class='String'>"NULL AS attfdwoptions "</span> 
             <span class='String'>"FROM pg_catalog.pg_attribute a LEFT JOIN pg_catalog.pg_type t "</span> 
                              <span class='String'>"ON a.atttypid = t.oid "</span> 
                              <span class='String'>"WHERE a.attrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"AND a.attnum &GT; 0::pg_catalog.int2 "</span> 
                              <span class='String'>"ORDER BY a.attnum"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90000</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* attoptions is new in 9.0 */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT a.attnum, a.attname, a.atttypmod, "</span> 
                              <span class='String'>"a.attstattarget, a.attstorage, t.typstorage, "</span> 
                              <span class='String'>"a.attnotnull, a.atthasdef, a.attisdropped, "</span> 
                              <span class='String'>"a.attlen, a.attalign, a.attislocal, "</span> 
                  <span class='String'>"pg_catalog.format_type(t.oid,a.atttypmod) AS atttypname, "</span> 
                        <span class='String'>"array_to_string(a.attoptions, ', ') AS attoptions, "</span> 
                              <span class='String'>"0 AS attcollation, "</span> 
                              <span class='String'>"NULL AS attfdwoptions "</span> 
             <span class='String'>"FROM pg_catalog.pg_attribute a LEFT JOIN pg_catalog.pg_type t "</span> 
                              <span class='String'>"ON a.atttypid = t.oid "</span> 
                              <span class='String'>"WHERE a.attrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"AND a.attnum &GT; 0::pg_catalog.int2 "</span> 
                              <span class='String'>"ORDER BY a.attnum"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* need left join here to not fail on dropped columns ... */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT a.attnum, a.attname, a.atttypmod, "</span> 
                              <span class='String'>"a.attstattarget, a.attstorage, t.typstorage, "</span> 
                              <span class='String'>"a.attnotnull, a.atthasdef, a.attisdropped, "</span> 
                              <span class='String'>"a.attlen, a.attalign, a.attislocal, "</span> 
                  <span class='String'>"pg_catalog.format_type(t.oid,a.atttypmod) AS atttypname, "</span> 
                              <span class='String'>"'' AS attoptions, 0 AS attcollation, "</span> 
                              <span class='String'>"NULL AS attfdwoptions "</span> 
             <span class='String'>"FROM pg_catalog.pg_attribute a LEFT JOIN pg_catalog.pg_type t "</span> 
                              <span class='String'>"ON a.atttypid = t.oid "</span> 
                              <span class='String'>"WHERE a.attrelid = '%u'::pg_catalog.oid "</span> 
                              <span class='String'>"AND a.attnum &GT; 0::pg_catalog.int2 "</span> 
                              <span class='String'>"ORDER BY a.attnum"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN7761"><span class='Ref_To_Local'>i_attnum</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attnum"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7762"><span class='Ref_To_Local'>i_attname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7763"><span class='Ref_To_Local'>i_atttypname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"atttypname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7764"><span class='Ref_To_Local'>i_atttypmod</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"atttypmod"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7765"><span class='Ref_To_Local'>i_attstattarget</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attstattarget"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7766"><span class='Ref_To_Local'>i_attstorage</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attstorage"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7767"><span class='Ref_To_Local'>i_typstorage</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typstorage"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7768"><span class='Ref_To_Local'>i_attnotnull</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attnotnull"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7769"><span class='Ref_To_Local'>i_atthasdef</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"atthasdef"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7770"><span class='Ref_To_Local'>i_attidentity</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attidentity"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7771"><span class='Ref_To_Local'>i_attisdropped</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attisdropped"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7772"><span class='Ref_To_Local'>i_attlen</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attlen"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7773"><span class='Ref_To_Local'>i_attalign</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attalign"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7774"><span class='Ref_To_Local'>i_attislocal</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attislocal"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7775"><span class='Ref_To_Local'>i_attoptions</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attoptions"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7776"><span class='Ref_To_Local'>i_attcollation</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attcollation"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7777"><span class='Ref_To_Local'>i_attfdwoptions</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attfdwoptions"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN302"><span class='Ref_to_Member'>numatts</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN304"><span class='Ref_to_Member'>atttypnames</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN305"><span class='Ref_to_Member'>atttypmod</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN306"><span class='Ref_to_Member'>attstattarget</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN307"><span class='Ref_to_Member'>attstorage</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN308"><span class='Ref_to_Member'>typstorage</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN310"><span class='Ref_to_Member'>attidentity</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN309"><span class='Ref_to_Member'>attisdropped</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN311"><span class='Ref_to_Member'>attlen</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN312"><span class='Ref_to_Member'>attalign</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN313"><span class='Ref_to_Member'>attislocal</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN314"><span class='Ref_to_Member'>attoptions</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN315"><span class='Ref_to_Member'>attcollation</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN316"><span class='Ref_to_Member'>attfdwoptions</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN317"><span class='Ref_to_Member'>notnull</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN318"><span class='Ref_to_Member'>inhNotNull</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>bool</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN319"><span class='Ref_to_Member'>attrdefs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN335"><span class='Ref_to_Typedef'>AttrDefInfo</span></a> <span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN335"><span class='Ref_to_Typedef'>AttrDefInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN7780"><span class='Ref_To_Local'>hasdefaults</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>+ </span><span class='Number'>1</span> <span class='Operator'>!= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7761"><span class='Ref_To_Local'>i_attnum</span></a><span class='Parentheses'>)))</span> 
                <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                              <span class='String'>"invalid column numbering in table \"%s\"\n"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7762"><span class='Ref_To_Local'>i_attname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN304"><span class='Ref_to_Member'>atttypnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7763"><span class='Ref_To_Local'>i_atttypname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN305"><span class='Ref_to_Member'>atttypmod</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7764"><span class='Ref_To_Local'>i_atttypmod</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN306"><span class='Ref_to_Member'>attstattarget</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7765"><span class='Ref_To_Local'>i_attstattarget</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN307"><span class='Ref_to_Member'>attstorage</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7766"><span class='Ref_To_Local'>i_attstorage</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN308"><span class='Ref_to_Member'>typstorage</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7767"><span class='Ref_To_Local'>i_typstorage</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN310"><span class='Ref_to_Member'>attidentity</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7770"><span class='Ref_To_Local'>i_attidentity</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>? *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7770"><span class='Ref_To_Local'>i_attidentity</span></a><span class='Parentheses'>))</span> <span class='Operator'>: </span><span class='String'>'\0'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN323"><span class='Ref_to_Member'>needs_override</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN323"><span class='Ref_to_Member'>needs_override</span></a> <span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN310"><span class='Ref_to_Member'>attidentity</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../include/catalog/pg_attribute.h.html#LN227"><span class='Ref_to_Const'>ATTRIBUTE_IDENTITY_ALWAYS</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN309"><span class='Ref_to_Member'>attisdropped</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7771"><span class='Ref_To_Local'>i_attisdropped</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN311"><span class='Ref_to_Member'>attlen</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7772"><span class='Ref_To_Local'>i_attlen</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN312"><span class='Ref_to_Member'>attalign</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7773"><span class='Ref_To_Local'>i_attalign</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN313"><span class='Ref_to_Member'>attislocal</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7774"><span class='Ref_To_Local'>i_attislocal</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN317"><span class='Ref_to_Member'>notnull</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7768"><span class='Ref_To_Local'>i_attnotnull</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN314"><span class='Ref_to_Member'>attoptions</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7775"><span class='Ref_To_Local'>i_attoptions</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN315"><span class='Ref_to_Member'>attcollation</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7776"><span class='Ref_To_Local'>i_attcollation</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN316"><span class='Ref_to_Member'>attfdwoptions</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7777"><span class='Ref_To_Local'>i_attfdwoptions</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN319"><span class='Ref_to_Member'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* fix below */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7769"><span class='Ref_To_Local'>i_atthasdef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span> 
                <a href="pg_dump.c.html#LN7780"><span class='Ref_To_Local'>hasdefaults</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* these flags will be set in flagInhAttrs() */ 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN318"><span class='Ref_to_Member'>inhNotNull</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;ntups;j++ &raquo; </span> 
 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Get info about column defaults 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7780"><span class='Ref_To_Local'>hasdefaults</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN8004"></a>            <a href="pg_dump.h.html#LN335"><span class='Ref_to_Typedef'>AttrDefInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>attrdefs</span><span class='Delimiter'>; 
</span><a name="LN8005"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>numDefaults</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>                <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"finding default expressions of table \"%s.%s\"\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN232"><span class='Ref_to_Func'>printfPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, adnum, "</span> 
                           <span class='String'>"pg_catalog.pg_get_expr(adbin, adrelid) AS adsrc "</span> 
                              <span class='String'>"FROM pg_catalog.pg_attrdef "</span> 
                              <span class='String'>"WHERE adrelid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN8005"><span class='Ref_To_Local'>numDefaults</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN335"><span class='Ref_to_Typedef'>AttrDefInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8005"><span class='Ref_To_Local'>numDefaults</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN335"><span class='Ref_to_Typedef'>AttrDefInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN8005"><span class='Ref_To_Local'>numDefaults</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8025"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>adnum</span><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN8025"><span class='Ref_To_Local'>adnum</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8025"><span class='Ref_To_Local'>adnum</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN8025"><span class='Ref_To_Local'>adnum</span></a> <span class='Operator'>&GT; </span><a href="pg_dump.c.html#LN7779"><span class='Ref_To_Local'>ntups</span></a><span class='Parentheses'>) 
</span>                    <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                  <span class='String'>"invalid adnum value %d for table \"%s\"\n"</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN8025"><span class='Ref_To_Local'>adnum</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * dropped columns shouldn't have defaults, but just in case, 
                 * ignore 'em 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN309"><span class='Ref_to_Member'>attisdropped</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8025"><span class='Ref_To_Local'>adnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN337"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN56"><span class='Ref_to_EnumConst'>DO_ATTRDEF</span></a><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN337"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN337"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN337"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN338"><span class='Ref_to_Member'>adtable</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN339"><span class='Ref_to_Member'>adnum</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8025"><span class='Ref_To_Local'>adnum</span></a><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN340"><span class='Ref_to_Member'>adef_expr</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN337"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN337"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN337"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Defaults on a VIEW must always be dumped as separate ALTER 
                 * TABLE commands.  Defaults on regular tables are dumped as 
                 * part of the CREATE TABLE if possible, which it won't be if 
                 * the column is not going to be emitted explicitly. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN341"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.h.html#LN693"><span class='Ref_to_Proto'>shouldPrintColumn</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7757"><span class='Ref_To_Local'>dopt</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8025"><span class='Ref_To_Local'>adnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* column will be suppressed, print default separately */ 
</span>                    <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN341"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN341"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Mark the default as needing to appear before the table, 
                     * so that any dependencies it has must be emitted before 
                     * the CREATE TABLE.  If this is not possible, we'll 
                     * change to "separate" mode while sorting dependencies. 
                     */ 
</span>                    <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, 
</span>                                        <a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN337"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN319"><span class='Ref_to_Member'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8025"><span class='Ref_To_Local'>adnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= &</span><a href="pg_dump.c.html#LN8004"><span class='Ref_To_Local'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;numDefaults;j++ &raquo; </span> 
            <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if hasdefaults &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * Get info about table CHECK constraints 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN285"><span class='Ref_to_Member'>ncheck</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN8093"></a>            <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>constrs</span><span class='Delimiter'>; 
</span><a name="LN8094"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>numConstrs</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>                <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"finding check constraints for table \"%s.%s\"\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90200</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * convalidated is new in 9.2 (actually, it is there in 9.1, 
                 * but it wasn't ever false for check constraints until 9.2). 
                 */ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, conname, "</span> 
                           <span class='String'>"pg_catalog.pg_get_constraintdef(oid) AS consrc, "</span> 
                                  <span class='String'>"conislocal, convalidated "</span> 
                                  <span class='String'>"FROM pg_catalog.pg_constraint "</span> 
                                  <span class='String'>"WHERE conrelid = '%u'::pg_catalog.oid "</span> 
                                  <span class='String'>"   AND contype = 'c' "</span> 
                                  <span class='String'>"ORDER BY conname"</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* conislocal is new in 8.4 */ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, conname, "</span> 
                           <span class='String'>"pg_catalog.pg_get_constraintdef(oid) AS consrc, "</span> 
                                  <span class='String'>"conislocal, true AS convalidated "</span> 
                                  <span class='String'>"FROM pg_catalog.pg_constraint "</span> 
                                  <span class='String'>"WHERE conrelid = '%u'::pg_catalog.oid "</span> 
                                  <span class='String'>"   AND contype = 'c' "</span> 
                                  <span class='String'>"ORDER BY conname"</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, conname, "</span> 
                           <span class='String'>"pg_catalog.pg_get_constraintdef(oid) AS consrc, "</span> 
                                  <span class='String'>"true AS conislocal, true AS convalidated "</span> 
                                  <span class='String'>"FROM pg_catalog.pg_constraint "</span> 
                                  <span class='String'>"WHERE conrelid = '%u'::pg_catalog.oid "</span> 
                                  <span class='String'>"   AND contype = 'c' "</span> 
                                  <span class='String'>"ORDER BY conname"</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7755"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN8094"><span class='Ref_To_Local'>numConstrs</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8094"><span class='Ref_To_Local'>numConstrs</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN285"><span class='Ref_to_Member'>ncheck</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN126"><span class='Ref_to_Macro'>ngettext</span></a><span class='Parentheses'>(</span><span class='String'>"expected %d check constraint on table \"%s\" but found %d\n"</span><span class='Delimiter'>, 
</span>                                         <span class='String'>"expected %d check constraints on table \"%s\" but found %d\n"</span><span class='Delimiter'>, 
</span>                                         <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN285"><span class='Ref_to_Member'>ncheck</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN285"><span class='Ref_to_Member'>ncheck</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8094"><span class='Ref_To_Local'>numConstrs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"(The system catalogs might be corrupted.)\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8094"><span class='Ref_To_Local'>numConstrs</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN320"><span class='Ref_to_Member'>checkexprs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>; 
</span> 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN8094"><span class='Ref_To_Local'>numConstrs</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN8159"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>validated</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><span class='Number'>5</span><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN61"><span class='Ref_to_EnumConst'>DO_CONSTRAINT</span></a><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN426"><span class='Ref_to_Member'>contable</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN427"><span class='Ref_to_Member'>condomain</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a> <span class='Operator'>= </span><span class='String'>'c'</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN430"><span class='Ref_to_Member'>confrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN431"><span class='Ref_to_Member'>conindex</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN432"><span class='Ref_to_Member'>condeferrable</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN433"><span class='Ref_to_Member'>condeferred</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN434"><span class='Ref_to_Member'>conislocal</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * An unvalidated constraint needs to be dumped separately, so 
                 * that potentially-violating existing data is loaded before 
                 * the constraint. 
                 */ 
</span>                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>= !</span><a href="pg_dump.c.html#LN8159"><span class='Ref_To_Local'>validated</span></a><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Mark the constraint as needing to appear before the table 
                 * --- this is so that any other dependencies of the 
                 * constraint will be emitted before we try to create the 
                 * table.  If the constraint is to be dumped separately, it 
                 * will be dumped after data is loaded anyway, so don't do it. 
                 * (There's an automatic dependency in the opposite direction 
                 * anyway, so don't need to add one manually here.) 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a><span class='Parentheses'>) 
</span>                    <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN7784"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, 
</span>                                        <a href="pg_dump.c.html#LN8093"><span class='Ref_To_Local'>constrs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN7759"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * If the constraint is inherited, this will be detected later 
                 * (in pre-8.4 databases).  We also detect later if the 
                 * constraint must be split out from the table definition. 
                 */ 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;numConstrs;j++ &raquo; </span> 
            <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7778"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tbinfo-&GT;ncheck&GT;0 &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numTables;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN7760"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTableAttrs &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Test whether a column should be printed as part of table's CREATE TABLE. 
 * Column number is zero-based. 
 * 
 * Normally this is always true, but it's false for dropped columns, as well 
 * as those that were inherited without any local definition.  (If we print 
 * such a column it will mistakenly get pg_attribute.attislocal set to true.) 
 * However, in binary_upgrade mode, we must print all such columns anyway and 
 * fix the attislocal/attisdropped state later, so as to keep control of the 
 * physical column order. 
 * 
 * This function exists because there are scattered nonobvious places that 
 * must be kept in sync with this decision. 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN8227"></a><span class='Declare_Function'>shouldPrintColumn</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dopt</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>colno</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8227"><span class='Ref_to_Parameter'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8227"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN313"><span class='Ref_to_Member'>attislocal</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8227"><span class='Ref_to_Parameter'>colno</span></a><span class='Delimiter'>] </span><span class='Operator'>&& !</span><a href="pg_dump.c.html#LN8227"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN309"><span class='Ref_to_Member'>attisdropped</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8227"><span class='Ref_to_Parameter'>colno</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTSParsers: 
 *    read all text search parsers in the system catalogs and return them 
 *    in the TSParserInfo* structure 
 * 
 *  numTSParsers is set to the number of parsers read in 
 */ 
</span><a href="pg_dump.h.html#LN478"><span class='Ref_to_Typedef'>TSParserInfo</span></a> <span class='Operator'>* 
</span><a name="LN8243"></a><span class='Declare_Function'>getTSParsers</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numTSParsers</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN8245"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN8246"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN8247"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN8248"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN8249"></a>    <a href="pg_dump.h.html#LN478"><span class='Ref_to_Typedef'>TSParserInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>prsinfo</span><span class='Delimiter'>; 
</span><a name="LN8250"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN8251"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN8252"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_prsname</span><span class='Delimiter'>; 
</span><a name="LN8253"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_prsnamespace</span><span class='Delimiter'>; 
</span><a name="LN8254"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_prsstart</span><span class='Delimiter'>; 
</span><a name="LN8255"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_prstoken</span><span class='Delimiter'>; 
</span><a name="LN8256"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_prsend</span><span class='Delimiter'>; 
</span><a name="LN8257"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_prsheadline</span><span class='Delimiter'>; 
</span><a name="LN8258"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_prslextype</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Before 8.3, there is no built-in text search support */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8243"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN8243"><span class='Ref_to_Parameter'>numTSParsers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN8248"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * find all text search objects, including builtin ones; we filter out 
     * system-defined objects at dump-out time. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8243"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8248"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, prsname, prsnamespace, "</span> 
                         <span class='String'>"prsstart::oid, prstoken::oid, "</span> 
                         <span class='String'>"prsend::oid, prsheadline::oid, prslextype::oid "</span> 
                         <span class='String'>"FROM pg_ts_parser"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8243"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8248"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8246"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN8243"><span class='Ref_to_Parameter'>numTSParsers</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8246"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN478"><span class='Ref_to_Typedef'>TSParserInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8246"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN478"><span class='Ref_to_Typedef'>TSParserInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8250"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8251"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8252"><span class='Ref_To_Local'>i_prsname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prsname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8253"><span class='Ref_To_Local'>i_prsnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prsnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8254"><span class='Ref_To_Local'>i_prsstart</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prsstart"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8255"><span class='Ref_To_Local'>i_prstoken</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prstoken"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8256"><span class='Ref_To_Local'>i_prsend</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prsend"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8257"><span class='Ref_To_Local'>i_prsheadline</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prsheadline"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8258"><span class='Ref_To_Local'>i_prslextype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prslextype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN8246"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN68"><span class='Ref_to_EnumConst'>DO_TSPARSER</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8250"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8251"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8252"><span class='Ref_To_Local'>i_prsname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8243"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8253"><span class='Ref_To_Local'>i_prsnamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN481"><span class='Ref_to_Member'>prsstart</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8254"><span class='Ref_To_Local'>i_prsstart</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN482"><span class='Ref_to_Member'>prstoken</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8255"><span class='Ref_To_Local'>i_prstoken</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN483"><span class='Ref_to_Member'>prsend</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8256"><span class='Ref_To_Local'>i_prsend</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN484"><span class='Ref_to_Member'>prsheadline</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8257"><span class='Ref_To_Local'>i_prsheadline</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN485"><span class='Ref_to_Member'>prslextype</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8258"><span class='Ref_To_Local'>i_prslextype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8243"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Text Search Parsers do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8247"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8245"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8248"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN8249"><span class='Ref_To_Local'>prsinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTSParsers &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTSDictionaries: 
 *    read all text search dictionaries in the system catalogs and return them 
 *    in the TSDictInfo* structure 
 * 
 *  numTSDicts is set to the number of dictionaries read in 
 */ 
</span><a href="pg_dump.h.html#LN488"><span class='Ref_to_Typedef'>TSDictInfo</span></a> <span class='Operator'>* 
</span><a name="LN8337"></a><span class='Declare_Function'>getTSDictionaries</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numTSDicts</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN8339"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN8340"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN8341"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN8342"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN8343"></a>    <a href="pg_dump.h.html#LN488"><span class='Ref_to_Typedef'>TSDictInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dictinfo</span><span class='Delimiter'>; 
</span><a name="LN8344"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN8345"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN8346"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_dictname</span><span class='Delimiter'>; 
</span><a name="LN8347"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_dictnamespace</span><span class='Delimiter'>; 
</span><a name="LN8348"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN8349"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_dicttemplate</span><span class='Delimiter'>; 
</span><a name="LN8350"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_dictinitoption</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Before 8.3, there is no built-in text search support */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8337"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN8337"><span class='Ref_to_Parameter'>numTSDicts</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN8342"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8337"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8342"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, dictname, "</span> 
                      <span class='String'>"dictnamespace, (%s dictowner) AS rolname, "</span> 
                      <span class='String'>"dicttemplate, dictinitoption "</span> 
                      <span class='String'>"FROM pg_ts_dict"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8337"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8342"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8340"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN8337"><span class='Ref_to_Parameter'>numTSDicts</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8340"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN488"><span class='Ref_to_Typedef'>TSDictInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8340"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN488"><span class='Ref_to_Typedef'>TSDictInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8344"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8345"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8346"><span class='Ref_To_Local'>i_dictname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"dictname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8347"><span class='Ref_To_Local'>i_dictnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"dictnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8348"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8350"><span class='Ref_To_Local'>i_dictinitoption</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"dictinitoption"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8349"><span class='Ref_To_Local'>i_dicttemplate</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"dicttemplate"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN8340"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN69"><span class='Ref_to_EnumConst'>DO_TSDICT</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8344"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8345"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8346"><span class='Ref_To_Local'>i_dictname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8337"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8347"><span class='Ref_To_Local'>i_dictnamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN491"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8348"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN492"><span class='Ref_to_Member'>dicttemplate</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8349"><span class='Ref_To_Local'>i_dicttemplate</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8350"><span class='Ref_To_Local'>i_dictinitoption</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN493"><span class='Ref_to_Member'>dictinitoption</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN493"><span class='Ref_to_Member'>dictinitoption</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8350"><span class='Ref_To_Local'>i_dictinitoption</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8337"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Text Search Dictionaries do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8341"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8339"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8342"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN8343"><span class='Ref_To_Local'>dictinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTSDictionaries &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTSTemplates: 
 *    read all text search templates in the system catalogs and return them 
 *    in the TSTemplateInfo* structure 
 * 
 *  numTSTemplates is set to the number of templates read in 
 */ 
</span><a href="pg_dump.h.html#LN496"><span class='Ref_to_Typedef'>TSTemplateInfo</span></a> <span class='Operator'>* 
</span><a name="LN8424"></a><span class='Declare_Function'>getTSTemplates</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numTSTemplates</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN8426"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN8427"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN8428"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN8429"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN8430"></a>    <a href="pg_dump.h.html#LN496"><span class='Ref_to_Typedef'>TSTemplateInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tmplinfo</span><span class='Delimiter'>; 
</span><a name="LN8431"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN8432"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN8433"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tmplname</span><span class='Delimiter'>; 
</span><a name="LN8434"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tmplnamespace</span><span class='Delimiter'>; 
</span><a name="LN8435"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tmplinit</span><span class='Delimiter'>; 
</span><a name="LN8436"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tmpllexize</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Before 8.3, there is no built-in text search support */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8424"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN8424"><span class='Ref_to_Parameter'>numTSTemplates</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN8429"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8424"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8429"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, tmplname, "</span> 
                         <span class='String'>"tmplnamespace, tmplinit::oid, tmpllexize::oid "</span> 
                         <span class='String'>"FROM pg_ts_template"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8424"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8429"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8427"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN8424"><span class='Ref_to_Parameter'>numTSTemplates</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8427"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN496"><span class='Ref_to_Typedef'>TSTemplateInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8427"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN496"><span class='Ref_to_Typedef'>TSTemplateInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8431"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8432"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8433"><span class='Ref_To_Local'>i_tmplname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tmplname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8434"><span class='Ref_To_Local'>i_tmplnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tmplnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8435"><span class='Ref_To_Local'>i_tmplinit</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tmplinit"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8436"><span class='Ref_To_Local'>i_tmpllexize</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tmpllexize"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN8427"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN70"><span class='Ref_to_EnumConst'>DO_TSTEMPLATE</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8431"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8432"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8433"><span class='Ref_To_Local'>i_tmplname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8424"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8434"><span class='Ref_To_Local'>i_tmplnamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN499"><span class='Ref_to_Member'>tmplinit</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8435"><span class='Ref_To_Local'>i_tmplinit</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN500"><span class='Ref_to_Member'>tmpllexize</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8436"><span class='Ref_To_Local'>i_tmpllexize</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8424"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Text Search Templates do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8428"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8426"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8429"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN8430"><span class='Ref_To_Local'>tmplinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTSTemplates &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getTSConfigurations: 
 *    read all text search configurations in the system catalogs and return 
 *    them in the TSConfigInfo* structure 
 * 
 *  numTSConfigs is set to the number of configurations read in 
 */ 
</span><a href="pg_dump.h.html#LN503"><span class='Ref_to_Typedef'>TSConfigInfo</span></a> <span class='Operator'>* 
</span><a name="LN8503"></a><span class='Declare_Function'>getTSConfigurations</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numTSConfigs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN8505"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN8506"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN8507"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN8508"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN8509"></a>    <a href="pg_dump.h.html#LN503"><span class='Ref_to_Typedef'>TSConfigInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cfginfo</span><span class='Delimiter'>; 
</span><a name="LN8510"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN8511"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN8512"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_cfgname</span><span class='Delimiter'>; 
</span><a name="LN8513"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_cfgnamespace</span><span class='Delimiter'>; 
</span><a name="LN8514"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN8515"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_cfgparser</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Before 8.3, there is no built-in text search support */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8503"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN8503"><span class='Ref_to_Parameter'>numTSConfigs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN8508"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8503"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8508"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, cfgname, "</span> 
                      <span class='String'>"cfgnamespace, (%s cfgowner) AS rolname, cfgparser "</span> 
                      <span class='String'>"FROM pg_ts_config"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8503"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8508"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8506"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN8503"><span class='Ref_to_Parameter'>numTSConfigs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8506"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN503"><span class='Ref_to_Typedef'>TSConfigInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8506"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN503"><span class='Ref_to_Typedef'>TSConfigInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8510"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8511"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8512"><span class='Ref_To_Local'>i_cfgname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"cfgname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8513"><span class='Ref_To_Local'>i_cfgnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"cfgnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8514"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8515"><span class='Ref_To_Local'>i_cfgparser</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"cfgparser"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN8506"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN71"><span class='Ref_to_EnumConst'>DO_TSCONFIG</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8510"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8511"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8512"><span class='Ref_To_Local'>i_cfgname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= 
</span>            <a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8503"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8513"><span class='Ref_To_Local'>i_cfgnamespace</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN506"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8514"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN507"><span class='Ref_to_Member'>cfgparser</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8515"><span class='Ref_To_Local'>i_cfgparser</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8503"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Text Search Configurations do not currently have ACLs. */ 
</span>        <a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8507"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8505"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8508"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN8509"><span class='Ref_To_Local'>cfginfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getTSConfigurations &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getForeignDataWrappers: 
 *    read all foreign-data wrappers in the system catalogs and return 
 *    them in the FdwInfo* structure 
 * 
 *  numForeignDataWrappers is set to the number of fdws read in 
 */ 
</span><a href="pg_dump.h.html#LN510"><span class='Ref_to_Typedef'>FdwInfo</span></a> <span class='Operator'>* 
</span><a name="LN8583"></a><span class='Declare_Function'>getForeignDataWrappers</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numForeignDataWrappers</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN8585"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8583"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN8586"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN8587"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN8588"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN8589"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN8590"></a>    <a href="pg_dump.h.html#LN510"><span class='Ref_to_Typedef'>FdwInfo</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>fdwinfo</span><span class='Delimiter'>; 
</span><a name="LN8591"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN8592"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN8593"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_fdwname</span><span class='Delimiter'>; 
</span><a name="LN8594"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN8595"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_fdwhandler</span><span class='Delimiter'>; 
</span><a name="LN8596"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_fdwvalidator</span><span class='Delimiter'>; 
</span><a name="LN8597"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_fdwacl</span><span class='Delimiter'>; 
</span><a name="LN8598"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rfdwacl</span><span class='Delimiter'>; 
</span><a name="LN8599"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initfdwacl</span><span class='Delimiter'>; 
</span><a name="LN8600"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initrfdwacl</span><span class='Delimiter'>; 
</span><a name="LN8601"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_fdwoptions</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Before 8.4, there are no foreign-data wrappers */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8583"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN8583"><span class='Ref_to_Parameter'>numForeignDataWrappers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN8589"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8583"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8583"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN8617"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN8618"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN8619"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initacl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN8620"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initracl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8617"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8618"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8619"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN8620"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"f.fdwacl"</span><span class='Delimiter'>, </span><span class='String'>"f.fdwowner"</span><span class='Delimiter'>, </span><span class='String'>"'F'"</span><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN8585"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8589"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT f.tableoid, f.oid, f.fdwname, "</span> 
                          <span class='String'>"(%s f.fdwowner) AS rolname, "</span> 
                          <span class='String'>"f.fdwhandler::pg_catalog.regproc, "</span> 
                          <span class='String'>"f.fdwvalidator::pg_catalog.regproc, "</span> 
                          <span class='String'>"%s AS fdwacl, "</span> 
                          <span class='String'>"%s AS rfdwacl, "</span> 
                          <span class='String'>"%s AS initfdwacl, "</span> 
                          <span class='String'>"%s AS initrfdwacl, "</span> 
                          <span class='String'>"array_to_string(ARRAY("</span> 
                          <span class='String'>"SELECT quote_ident(option_name) || ' ' || "</span> 
                          <span class='String'>"quote_literal(option_value) "</span> 
                          <span class='String'>"FROM pg_options_to_table(f.fdwoptions) "</span> 
                          <span class='String'>"ORDER BY option_name"</span> 
                          <span class='String'>"), E',\n    ') AS fdwoptions "</span> 
                          <span class='String'>"FROM pg_foreign_data_wrapper f "</span> 
                          <span class='String'>"LEFT JOIN pg_init_privs pip ON "</span> 
                          <span class='String'>"(f.oid = pip.objoid "</span> 
                    <span class='String'>"AND pip.classoid = 'pg_foreign_data_wrapper'::regclass "</span> 
                          <span class='String'>"AND pip.objsubid = 0) "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8617"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8618"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8619"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8620"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8617"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8618"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8619"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8620"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8583"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8589"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, fdwname, "</span> 
                          <span class='String'>"(%s fdwowner) AS rolname, "</span> 
                          <span class='String'>"fdwhandler::pg_catalog.regproc, "</span> 
                          <span class='String'>"fdwvalidator::pg_catalog.regproc, fdwacl, "</span> 
                          <span class='String'>"NULL as rfdwacl, "</span> 
                          <span class='String'>"NULL as initfdwacl, NULL AS initrfdwacl, "</span> 
                          <span class='String'>"array_to_string(ARRAY("</span> 
                          <span class='String'>"SELECT quote_ident(option_name) || ' ' || "</span> 
                          <span class='String'>"quote_literal(option_value) "</span> 
                          <span class='String'>"FROM pg_options_to_table(fdwoptions) "</span> 
                          <span class='String'>"ORDER BY option_name"</span> 
                          <span class='String'>"), E',\n    ') AS fdwoptions "</span> 
                          <span class='String'>"FROM pg_foreign_data_wrapper"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8589"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, fdwname, "</span> 
                          <span class='String'>"(%s fdwowner) AS rolname, "</span> 
                          <span class='String'>"'-' AS fdwhandler, "</span> 
                          <span class='String'>"fdwvalidator::pg_catalog.regproc, fdwacl, "</span> 
                          <span class='String'>"NULL as rfdwacl, "</span> 
                          <span class='String'>"NULL as initfdwacl, NULL AS initrfdwacl, "</span> 
                          <span class='String'>"array_to_string(ARRAY("</span> 
                          <span class='String'>"SELECT quote_ident(option_name) || ' ' || "</span> 
                          <span class='String'>"quote_literal(option_value) "</span> 
                          <span class='String'>"FROM pg_options_to_table(fdwoptions) "</span> 
                          <span class='String'>"ORDER BY option_name"</span> 
                          <span class='String'>"), E',\n    ') AS fdwoptions "</span> 
                          <span class='String'>"FROM pg_foreign_data_wrapper"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8583"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8589"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8587"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN8583"><span class='Ref_to_Parameter'>numForeignDataWrappers</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8587"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN510"><span class='Ref_to_Typedef'>FdwInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8587"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN510"><span class='Ref_to_Typedef'>FdwInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8591"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8592"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8593"><span class='Ref_To_Local'>i_fdwname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"fdwname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8594"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8595"><span class='Ref_To_Local'>i_fdwhandler</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"fdwhandler"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8596"><span class='Ref_To_Local'>i_fdwvalidator</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"fdwvalidator"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8597"><span class='Ref_To_Local'>i_fdwacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"fdwacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8598"><span class='Ref_To_Local'>i_rfdwacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rfdwacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8599"><span class='Ref_To_Local'>i_initfdwacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initfdwacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8600"><span class='Ref_To_Local'>i_initrfdwacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initrfdwacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8601"><span class='Ref_To_Local'>i_fdwoptions</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"fdwoptions"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN8587"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN72"><span class='Ref_to_EnumConst'>DO_FDW</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8591"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8592"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8593"><span class='Ref_To_Local'>i_fdwname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN513"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8594"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN514"><span class='Ref_to_Member'>fdwhandler</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8595"><span class='Ref_To_Local'>i_fdwhandler</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN515"><span class='Ref_to_Member'>fdwvalidator</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8596"><span class='Ref_To_Local'>i_fdwvalidator</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN516"><span class='Ref_to_Member'>fdwoptions</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8601"><span class='Ref_To_Local'>i_fdwoptions</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN517"><span class='Ref_to_Member'>fdwacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8597"><span class='Ref_To_Local'>i_fdwacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN518"><span class='Ref_to_Member'>rfdwacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8598"><span class='Ref_To_Local'>i_rfdwacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN519"><span class='Ref_to_Member'>initfdwacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8599"><span class='Ref_To_Local'>i_initfdwacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN520"><span class='Ref_to_Member'>initrfdwacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8600"><span class='Ref_To_Local'>i_initrfdwacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8583"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Do not try to dump ACL if no ACL exists. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8597"><span class='Ref_To_Local'>i_fdwacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8598"><span class='Ref_To_Local'>i_rfdwacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8599"><span class='Ref_To_Local'>i_initfdwacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8600"><span class='Ref_To_Local'>i_initrfdwacl</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8588"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8586"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8589"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN8590"><span class='Ref_To_Local'>fdwinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getForeignDataWrappers &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getForeignServers: 
 *    read all foreign servers in the system catalogs and return 
 *    them in the ForeignServerInfo * structure 
 * 
 *  numForeignServers is set to the number of servers read in 
 */ 
</span><a href="pg_dump.h.html#LN523"><span class='Ref_to_Typedef'>ForeignServerInfo</span></a> <span class='Operator'>* 
</span><a name="LN8752"></a><span class='Declare_Function'>getForeignServers</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numForeignServers</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN8754"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8752"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN8755"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN8756"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN8757"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN8758"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN8759"></a>    <a href="pg_dump.h.html#LN523"><span class='Ref_to_Typedef'>ForeignServerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>srvinfo</span><span class='Delimiter'>; 
</span><a name="LN8760"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN8761"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN8762"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_srvname</span><span class='Delimiter'>; 
</span><a name="LN8763"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rolname</span><span class='Delimiter'>; 
</span><a name="LN8764"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_srvfdw</span><span class='Delimiter'>; 
</span><a name="LN8765"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_srvtype</span><span class='Delimiter'>; 
</span><a name="LN8766"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_srvversion</span><span class='Delimiter'>; 
</span><a name="LN8767"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_srvacl</span><span class='Delimiter'>; 
</span><a name="LN8768"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rsrvacl</span><span class='Delimiter'>; 
</span><a name="LN8769"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initsrvacl</span><span class='Delimiter'>; 
</span><a name="LN8770"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initrsrvacl</span><span class='Delimiter'>; 
</span><a name="LN8771"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_srvoptions</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Before 8.4, there are no foreign servers */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8752"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN8752"><span class='Ref_to_Parameter'>numForeignServers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN8758"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8752"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8752"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN8787"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN8788"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN8789"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initacl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN8790"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initracl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8787"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8788"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8789"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN8790"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"f.srvacl"</span><span class='Delimiter'>, </span><span class='String'>"f.srvowner"</span><span class='Delimiter'>, </span><span class='String'>"'S'"</span><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN8754"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8758"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT f.tableoid, f.oid, f.srvname, "</span> 
                          <span class='String'>"(%s f.srvowner) AS rolname, "</span> 
                          <span class='String'>"f.srvfdw, f.srvtype, f.srvversion, "</span> 
                          <span class='String'>"%s AS srvacl, "</span> 
                          <span class='String'>"%s AS rsrvacl, "</span> 
                          <span class='String'>"%s AS initsrvacl, "</span> 
                          <span class='String'>"%s AS initrsrvacl, "</span> 
                          <span class='String'>"array_to_string(ARRAY("</span> 
                          <span class='String'>"SELECT quote_ident(option_name) || ' ' || "</span> 
                          <span class='String'>"quote_literal(option_value) "</span> 
                          <span class='String'>"FROM pg_options_to_table(f.srvoptions) "</span> 
                          <span class='String'>"ORDER BY option_name"</span> 
                          <span class='String'>"), E',\n    ') AS srvoptions "</span> 
                          <span class='String'>"FROM pg_foreign_server f "</span> 
                          <span class='String'>"LEFT JOIN pg_init_privs pip "</span> 
                          <span class='String'>"ON (f.oid = pip.objoid "</span> 
                          <span class='String'>"AND pip.classoid = 'pg_foreign_server'::regclass "</span> 
                          <span class='String'>"AND pip.objsubid = 0) "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8787"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8788"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8789"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8790"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8787"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8788"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8789"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8790"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8758"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT tableoid, oid, srvname, "</span> 
                          <span class='String'>"(%s srvowner) AS rolname, "</span> 
                          <span class='String'>"srvfdw, srvtype, srvversion, srvacl, "</span> 
                          <span class='String'>"NULL AS rsrvacl, "</span> 
                          <span class='String'>"NULL AS initsrvacl, NULL AS initrsrvacl, "</span> 
                          <span class='String'>"array_to_string(ARRAY("</span> 
                          <span class='String'>"SELECT quote_ident(option_name) || ' ' || "</span> 
                          <span class='String'>"quote_literal(option_value) "</span> 
                          <span class='String'>"FROM pg_options_to_table(srvoptions) "</span> 
                          <span class='String'>"ORDER BY option_name"</span> 
                          <span class='String'>"), E',\n    ') AS srvoptions "</span> 
                          <span class='String'>"FROM pg_foreign_server"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8752"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8758"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8756"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN8752"><span class='Ref_to_Parameter'>numForeignServers</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8756"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN523"><span class='Ref_to_Typedef'>ForeignServerInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8756"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN523"><span class='Ref_to_Typedef'>ForeignServerInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8760"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8761"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8762"><span class='Ref_To_Local'>i_srvname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"srvname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8763"><span class='Ref_To_Local'>i_rolname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rolname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8764"><span class='Ref_To_Local'>i_srvfdw</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"srvfdw"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8765"><span class='Ref_To_Local'>i_srvtype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"srvtype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8766"><span class='Ref_To_Local'>i_srvversion</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"srvversion"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8767"><span class='Ref_To_Local'>i_srvacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"srvacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8768"><span class='Ref_To_Local'>i_rsrvacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rsrvacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8769"><span class='Ref_To_Local'>i_initsrvacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initsrvacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8770"><span class='Ref_To_Local'>i_initrsrvacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initrsrvacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8771"><span class='Ref_To_Local'>i_srvoptions</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"srvoptions"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN8756"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN73"><span class='Ref_to_EnumConst'>DO_FOREIGN_SERVER</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8760"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8761"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8762"><span class='Ref_To_Local'>i_srvname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN526"><span class='Ref_to_Member'>rolname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8763"><span class='Ref_To_Local'>i_rolname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN527"><span class='Ref_to_Member'>srvfdw</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8764"><span class='Ref_To_Local'>i_srvfdw</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN528"><span class='Ref_to_Member'>srvtype</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8765"><span class='Ref_To_Local'>i_srvtype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN529"><span class='Ref_to_Member'>srvversion</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8766"><span class='Ref_To_Local'>i_srvversion</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN534"><span class='Ref_to_Member'>srvoptions</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8771"><span class='Ref_To_Local'>i_srvoptions</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN530"><span class='Ref_to_Member'>srvacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8767"><span class='Ref_To_Local'>i_srvacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN531"><span class='Ref_to_Member'>rsrvacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8768"><span class='Ref_To_Local'>i_rsrvacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN532"><span class='Ref_to_Member'>initsrvacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8769"><span class='Ref_To_Local'>i_initsrvacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN533"><span class='Ref_to_Member'>initrsrvacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8770"><span class='Ref_To_Local'>i_initrsrvacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1655"><span class='Ref_to_Func'>selectDumpableObject</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8752"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Do not try to dump ACL if no ACL exists. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8767"><span class='Ref_To_Local'>i_srvacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8768"><span class='Ref_To_Local'>i_rsrvacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8769"><span class='Ref_To_Local'>i_initsrvacl</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8770"><span class='Ref_To_Local'>i_initrsrvacl</span></a><span class='Parentheses'>))</span> 
            <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8757"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>&= ~</span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8755"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8758"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN8759"><span class='Ref_To_Local'>srvinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getForeignServers &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getDefaultACLs: 
 *    read all default ACL information in the system catalogs and return 
 *    them in the DefaultACLInfo structure 
 * 
 *  numDefaultACLs is set to the number of ACLs read in 
 */ 
</span><a href="pg_dump.h.html#LN537"><span class='Ref_to_Typedef'>DefaultACLInfo</span></a> <span class='Operator'>* 
</span><a name="LN8905"></a><span class='Declare_Function'>getDefaultACLs</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>numDefaultACLs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN8907"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8905"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN8908"></a>    <a href="pg_dump.h.html#LN537"><span class='Ref_to_Typedef'>DefaultACLInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>daclinfo</span><span class='Delimiter'>; 
</span><a name="LN8909"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN8910"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN8911"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oid</span><span class='Delimiter'>; 
</span><a name="LN8912"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tableoid</span><span class='Delimiter'>; 
</span><a name="LN8913"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_defaclrole</span><span class='Delimiter'>; 
</span><a name="LN8914"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_defaclnamespace</span><span class='Delimiter'>; 
</span><a name="LN8915"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_defaclobjtype</span><span class='Delimiter'>; 
</span><a name="LN8916"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_defaclacl</span><span class='Delimiter'>; 
</span><a name="LN8917"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_rdefaclacl</span><span class='Delimiter'>; 
</span><a name="LN8918"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initdefaclacl</span><span class='Delimiter'>; 
</span><a name="LN8919"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_initrdefaclacl</span><span class='Delimiter'>; 
</span><a name="LN8920"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN8921"></a>                <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8905"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&LT; </span><span class='Number'>90000</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN8905"><span class='Ref_to_Parameter'>numDefaultACLs</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN8909"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8905"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8905"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN8936"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN8937"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN8938"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initacl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN8939"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initracl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8936"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8937"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8938"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN8939"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"defaclacl"</span><span class='Delimiter'>, </span><span class='String'>"defaclrole"</span><span class='Delimiter'>, 
</span>                        <span class='String'>"CASE WHEN defaclobjtype = 'S' THEN 's' ELSE defaclobjtype END::\"char\""</span><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN8907"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8909"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT d.oid, d.tableoid, "</span> 
                          <span class='String'>"(%s d.defaclrole) AS defaclrole, "</span> 
                          <span class='String'>"d.defaclnamespace, "</span> 
                          <span class='String'>"d.defaclobjtype, "</span> 
                          <span class='String'>"%s AS defaclacl, "</span> 
                          <span class='String'>"%s AS rdefaclacl, "</span> 
                          <span class='String'>"%s AS initdefaclacl, "</span> 
                          <span class='String'>"%s AS initrdefaclacl "</span> 
                          <span class='String'>"FROM pg_default_acl d "</span> 
                          <span class='String'>"LEFT JOIN pg_init_privs pip ON "</span> 
                          <span class='String'>"(d.oid = pip.objoid "</span> 
                          <span class='String'>"AND pip.classoid = 'pg_default_acl'::regclass "</span> 
                          <span class='String'>"AND pip.objsubid = 0) "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8936"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8937"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8938"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN8939"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8909"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT oid, tableoid, "</span> 
                          <span class='String'>"(%s defaclrole) AS defaclrole, "</span> 
                          <span class='String'>"defaclnamespace, "</span> 
                          <span class='String'>"defaclobjtype, "</span> 
                          <span class='String'>"defaclacl, "</span> 
                          <span class='String'>"NULL AS rdefaclacl, "</span> 
                          <span class='String'>"NULL AS initdefaclacl, "</span> 
                          <span class='String'>"NULL AS initrdefaclacl "</span> 
                          <span class='String'>"FROM pg_default_acl"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN95"><span class='Ref_to_Global_Var'>username_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8905"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8909"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8921"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pg_dump.c.html#LN8905"><span class='Ref_to_Parameter'>numDefaultACLs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN8921"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN537"><span class='Ref_to_Typedef'>DefaultACLInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8921"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN537"><span class='Ref_to_Typedef'>DefaultACLInfo</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN8911"><span class='Ref_To_Local'>i_oid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8912"><span class='Ref_To_Local'>i_tableoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8913"><span class='Ref_To_Local'>i_defaclrole</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"defaclrole"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8914"><span class='Ref_To_Local'>i_defaclnamespace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"defaclnamespace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8915"><span class='Ref_To_Local'>i_defaclobjtype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"defaclobjtype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8916"><span class='Ref_To_Local'>i_defaclacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"defaclacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8917"><span class='Ref_To_Local'>i_rdefaclacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rdefaclacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8918"><span class='Ref_To_Local'>i_initdefaclacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initdefaclacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN8919"><span class='Ref_To_Local'>i_initrdefaclacl</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"initrdefaclacl"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN8921"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN8998"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>nspid</span> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8914"><span class='Ref_To_Local'>i_defaclnamespace</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN74"><span class='Ref_to_EnumConst'>DO_DEFAULT_ACL</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8912"><span class='Ref_To_Local'>i_tableoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8911"><span class='Ref_To_Local'>i_oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* cheesy ... is it worth coming up with a better object name? */ 
</span>        <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8915"><span class='Ref_To_Local'>i_defaclobjtype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8998"><span class='Ref_To_Local'>nspid</span></a> <span class='Operator'>!= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN146"><span class='Ref_to_Proto'>findNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8905"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8998"><span class='Ref_To_Local'>nspid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN540"><span class='Ref_to_Member'>defaclrole</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8913"><span class='Ref_To_Local'>i_defaclrole</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN541"><span class='Ref_to_Member'>defaclobjtype</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8915"><span class='Ref_To_Local'>i_defaclobjtype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN542"><span class='Ref_to_Member'>defaclacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8916"><span class='Ref_To_Local'>i_defaclacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN543"><span class='Ref_to_Member'>rdefaclacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8917"><span class='Ref_To_Local'>i_rdefaclacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN544"><span class='Ref_to_Member'>initdefaclacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8918"><span class='Ref_To_Local'>i_initdefaclacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN545"><span class='Ref_to_Member'>initrdefaclacl</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8919"><span class='Ref_To_Local'>i_initrdefaclacl</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Decide whether we want to dump it */ 
</span>        <a href="pg_dump.c.html#LN1509"><span class='Ref_to_Func'>selectDumpableDefaultACL</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN8920"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN8907"><span class='Ref_To_Local'>dopt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8910"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN8909"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN8908"><span class='Ref_To_Local'>daclinfo</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getDefaultACLs &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpComment -- 
 * 
 * This routine is used to dump any comments associated with the 
 * object handed to this routine. The routine takes a constant character 
 * string for the target part of the comment-creation command, plus 
 * the namespace and owner of the object (for labeling the ArchiveEntry), 
 * plus catalog ID and subid which are the lookup key for pg_description, 
 * plus the dump ID for the object (for setting a dependency). 
 * If a matching pg_description entry is found, it is dumped. 
 * 
 * Note: although this routine takes a dumpId for dependency purposes, 
 * that purpose is just to mark the dependency in the emitted dump file 
 * for possible future use by pg_restore.  We do NOT use it for determining 
 * ordering of the comment in the dump file, because this routine is called 
 * after dependency sorting occurs.  This routine should be called just after 
 * calling ArchiveEntry() for the specified object. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9049"></a><span class='Declare_Function'>dumpComment</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, 
</span><a name="LN9050"></a>            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>namespace</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>owner</span><span class='Delimiter'>, 
</span><a name="LN9051"></a>            <a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a> <span class='Declare_Parameter'>catalogId</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>subid</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Declare_Parameter'>dumpId</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9053"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9049"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN9054"></a>    <a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>comments</span><span class='Delimiter'>; 
</span><a name="LN9055"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncomments</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Comments are schema not data ... except blob comments are data */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strncmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9049"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>, </span><span class='String'>"LARGE OBJECT "</span><span class='Delimiter'>, </span><span class='Number'>13</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9053"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* We do dump blob comments in binary-upgrade mode */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9053"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN137"><span class='Ref_to_Member'>schemaOnly</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN9053"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Search for comments associated with catalogId, using table */ 
</span>    <a href="pg_dump.c.html#LN9055"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN153"><span class='Ref_to_Proto'>findComments</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9049"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9051"><span class='Ref_to_Parameter'>catalogId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9051"><span class='Ref_to_Parameter'>catalogId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, 
</span>                             <span class='Operator'>&</span><a href="pg_dump.c.html#LN9054"><span class='Ref_To_Local'>comments</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Is there one matching the subid? */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9055"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9054"><span class='Ref_To_Local'>comments</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN69"><span class='Ref_to_Member'>objsubid</span></a> <span class='Operator'>== </span><a href="pg_dump.c.html#LN9051"><span class='Ref_to_Parameter'>subid</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN9054"><span class='Ref_To_Local'>comments</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN9055"><span class='Ref_To_Local'>ncomments</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* If a comment exists, build COMMENT ON statement */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9055"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN9086"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9086"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"COMMENT ON %s IS "</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9049"><span class='Ref_to_Parameter'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9086"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9054"><span class='Ref_To_Local'>comments</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN66"><span class='Ref_to_Member'>descr</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9049"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9086"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We mark comments as SECTION_NONE because they really belong in the 
         * same section as their parent, whether that is pre-data or 
         * post-data. 
         */ 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9049"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9049"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>, </span><span class='Control'>namespace</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9050"><span class='Ref_to_Parameter'>owner</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"COMMENT"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN54"><span class='Ref_to_EnumConst'>SECTION_NONE</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9086"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9051"><span class='Ref_to_Parameter'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9086"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if ncomments&GT;0 &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end dumpComment &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpTableComment -- 
 * 
 * As above, but dump comments for both the specified table (or view) 
 * and its columns. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9115"></a><span class='Declare_Function'>dumpTableComment</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Delimiter'>, 
</span><a name="LN9116"></a>                 <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>reltypename</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9118"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN9119"></a>    <a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>comments</span><span class='Delimiter'>; 
</span><a name="LN9120"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncomments</span><span class='Delimiter'>; 
</span><a name="LN9121"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN9122"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>target</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Comments are SCHEMA not data */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9118"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Search for comments associated with relation, using table */ 
</span>    <a href="pg_dump.c.html#LN9120"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN153"><span class='Ref_to_Proto'>findComments</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, 
</span>                             <span class='Operator'>&</span><a href="pg_dump.c.html#LN9119"><span class='Ref_To_Local'>comments</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If comments exist, build COMMENT ON statements */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9120"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN9122"><span class='Ref_To_Local'>target</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9120"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN9143"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>descr</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9119"><span class='Ref_To_Local'>comments</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN66"><span class='Ref_to_Member'>descr</span></a><span class='Delimiter'>; 
</span><a name="LN9144"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>objsubid</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9119"><span class='Ref_To_Local'>comments</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN69"><span class='Ref_to_Member'>objsubid</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9144"><span class='Ref_To_Local'>objsubid</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9122"><span class='Ref_To_Local'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9122"><span class='Ref_To_Local'>target</span></a><span class='Delimiter'>, </span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9116"><span class='Ref_to_Parameter'>reltypename</span></a><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"COMMENT ON %s IS "</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9122"><span class='Ref_To_Local'>target</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9143"><span class='Ref_To_Local'>descr</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN9122"><span class='Ref_To_Local'>target</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                         <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"COMMENT"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN54"><span class='Ref_to_EnumConst'>SECTION_NONE</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if objsubid==0 &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9144"><span class='Ref_To_Local'>objsubid</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN9144"><span class='Ref_To_Local'>objsubid</span></a> <span class='Operator'>&LT;= </span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN302"><span class='Ref_to_Member'>numatts</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9122"><span class='Ref_To_Local'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9122"><span class='Ref_To_Local'>target</span></a><span class='Delimiter'>, </span><span class='String'>"COLUMN %s."</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9122"><span class='Ref_To_Local'>target</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN9144"><span class='Ref_To_Local'>objsubid</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"COMMENT ON %s IS "</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9122"><span class='Ref_To_Local'>target</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9143"><span class='Ref_To_Local'>descr</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN9122"><span class='Ref_To_Local'>target</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                         <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"COMMENT"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN54"><span class='Ref_to_EnumConst'>SECTION_NONE</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9115"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if objsubid&GT;0&&objsubid&LT;... &raquo; </span> 
 
        <a href="pg_dump.c.html#LN9119"><span class='Ref_To_Local'>comments</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN9120"><span class='Ref_To_Local'>ncomments</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while ncomments&GT;0 &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9121"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9122"><span class='Ref_To_Local'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTableComment &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * findComments -- 
 * 
 * Find the comment(s), if any, associated with the given object.  All the 
 * objsubid values associated with the given classoid/objoid are found with 
 * one search. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN9204"></a><span class='Declare_Function'>findComments</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>classoid</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>objoid</span><span class='Delimiter'>, 
</span><a name="LN9205"></a>             <a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>items</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* static storage for table of comments */ 
</span><a name="LN9208"></a>    <span class='Keyword'>static </span><a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>comments</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN9209"></a>    <span class='Keyword'>static int</span>  <span class='Declare_Local'>ncomments</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
<a name="LN9211"></a>    <a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>middle</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN9212"></a>    <a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>low</span><span class='Delimiter'>; 
</span><a name="LN9213"></a>    <a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>high</span><span class='Delimiter'>; 
</span><a name="LN9214"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nmatch</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get comments if we didn't already */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9209"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN9209"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN155"><span class='Ref_to_Proto'>collectComments</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9204"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN9208"><span class='Ref_To_Local'>comments</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Do binary search to find some item matching the object. 
     */ 
</span>    <a href="pg_dump.c.html#LN9212"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN9208"><span class='Ref_To_Local'>comments</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <a href="pg_dump.c.html#LN9213"><span class='Ref_To_Local'>high</span></a> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN9208"><span class='Ref_To_Local'>comments</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN9209"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9212"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>&LT;= </span><a href="pg_dump.c.html#LN9213"><span class='Ref_To_Local'>high</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9212"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9213"><span class='Ref_To_Local'>high</span></a> <span class='Operator'>- </span><a href="pg_dump.c.html#LN9212"><span class='Ref_To_Local'>low</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9204"><span class='Ref_to_Parameter'>classoid</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN67"><span class='Ref_to_Member'>classoid</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN9213"><span class='Ref_To_Local'>high</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9204"><span class='Ref_to_Parameter'>classoid</span></a> <span class='Operator'>&GT; </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN67"><span class='Ref_to_Member'>classoid</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN9212"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9204"><span class='Ref_to_Parameter'>objoid</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN68"><span class='Ref_to_Member'>objoid</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN9213"><span class='Ref_To_Local'>high</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9204"><span class='Ref_to_Parameter'>objoid</span></a> <span class='Operator'>&GT; </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN68"><span class='Ref_to_Member'>objoid</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN9212"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* found a match */ 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9212"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>&GT; </span><a href="pg_dump.c.html#LN9213"><span class='Ref_To_Local'>high</span></a><span class='Parentheses'>)</span>             <span class='Comment_Single_Line'>/* no matches */ 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN9205"><span class='Ref_to_Parameter'>items</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now determine how many items match the object.  The search loop 
     * invariant still holds: only items between low and high inclusive could 
     * match. 
     */ 
</span>    <a href="pg_dump.c.html#LN9214"><span class='Ref_To_Local'>nmatch</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>&GT; </span><a href="pg_dump.c.html#LN9212"><span class='Ref_To_Local'>low</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9204"><span class='Ref_to_Parameter'>classoid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a><span class='Delimiter'>[</span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN67"><span class='Ref_to_Member'>classoid</span></a> <span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN9204"><span class='Ref_to_Parameter'>objoid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a><span class='Delimiter'>[</span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN68"><span class='Ref_to_Member'>objoid</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN9214"><span class='Ref_To_Local'>nmatch</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN9205"><span class='Ref_to_Parameter'>items</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>+= </span><a href="pg_dump.c.html#LN9214"><span class='Ref_To_Local'>nmatch</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>&LT;= </span><a href="pg_dump.c.html#LN9213"><span class='Ref_To_Local'>high</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9204"><span class='Ref_to_Parameter'>classoid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN67"><span class='Ref_to_Member'>classoid</span></a> <span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN9204"><span class='Ref_to_Parameter'>objoid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN68"><span class='Ref_to_Member'>objoid</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN9211"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN9214"><span class='Ref_To_Local'>nmatch</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN9214"><span class='Ref_To_Local'>nmatch</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end findComments &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * collectComments -- 
 * 
 * Construct a table of all comments available for database objects. 
 * We used to do per-object queries for the comments, but it's much faster 
 * to pull them all over at once, and on most databases the memory cost 
 * isn't high. 
 * 
 * The table is sorted by classoid/objid/objsubid for speed in lookup. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN9288"></a><span class='Declare_Function'>collectComments</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>items</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9290"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN9291"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN9292"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_description</span><span class='Delimiter'>; 
</span><a name="LN9293"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_classoid</span><span class='Delimiter'>; 
</span><a name="LN9294"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_objoid</span><span class='Delimiter'>; 
</span><a name="LN9295"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_objsubid</span><span class='Delimiter'>; 
</span><a name="LN9296"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN9297"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN9298"></a>    <a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>comments</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Note we do NOT change source schema here; preserve the caller's 
     * setting, instead. 
     */ 
</span> 
    <a href="pg_dump.c.html#LN9291"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9291"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT description, classoid, objoid, objsubid "</span> 
                         <span class='String'>"FROM pg_catalog.pg_description "</span> 
                         <span class='String'>"ORDER BY classoid, objoid, objsubid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9290"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9288"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9291"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Construct lookup table containing OIDs in numeric form */ 
</span> 
    <a href="pg_dump.c.html#LN9292"><span class='Ref_To_Local'>i_description</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9290"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"description"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN9293"><span class='Ref_To_Local'>i_classoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9290"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"classoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN9294"><span class='Ref_To_Local'>i_objoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9290"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"objoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN9295"><span class='Ref_To_Local'>i_objsubid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9290"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"objsubid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9296"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9290"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9298"><span class='Ref_To_Local'>comments</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9296"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9297"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN9297"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN9296"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN9297"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN9298"><span class='Ref_To_Local'>comments</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN9297"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN66"><span class='Ref_to_Member'>descr</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9290"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9297"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9292"><span class='Ref_To_Local'>i_description</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN9298"><span class='Ref_To_Local'>comments</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN9297"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN67"><span class='Ref_to_Member'>classoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9290"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9297"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9293"><span class='Ref_To_Local'>i_classoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN9298"><span class='Ref_To_Local'>comments</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN9297"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN68"><span class='Ref_to_Member'>objoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9290"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9297"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9294"><span class='Ref_To_Local'>i_objoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN9298"><span class='Ref_To_Local'>comments</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN9297"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN69"><span class='Ref_to_Member'>objsubid</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9290"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9297"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9295"><span class='Ref_To_Local'>i_objsubid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Do NOT free the PGresult since we are keeping pointers into it */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9291"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN9288"><span class='Ref_to_Parameter'>items</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9298"><span class='Ref_To_Local'>comments</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="pg_dump.c.html#LN9296"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end collectComments &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpDumpableObject 
 * 
 * This routine and its subsidiaries are responsible for creating 
 * ArchiveEntries (TOC objects) for each object to be dumped. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9346"></a><span class='Declare_Function'>dumpDumpableObject</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dobj</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN43"><span class='Ref_to_EnumConst'>DO_NAMESPACE</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN163"><span class='Ref_to_Proto'>dumpNamespace</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN142"><span class='Ref_to_Typedef'>NamespaceInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN44"><span class='Ref_to_EnumConst'>DO_EXTENSION</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN164"><span class='Ref_to_Proto'>dumpExtension</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN45"><span class='Ref_to_EnumConst'>DO_TYPE</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN165"><span class='Ref_to_Proto'>dumpType</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN46"><span class='Ref_to_EnumConst'>DO_SHELL_TYPE</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN173"><span class='Ref_to_Proto'>dumpShellType</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN188"><span class='Ref_to_Typedef'>ShellTypeInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN47"><span class='Ref_to_EnumConst'>DO_FUNC</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN175"><span class='Ref_to_Proto'>dumpFunc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN48"><span class='Ref_to_EnumConst'>DO_AGG</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN185"><span class='Ref_to_Proto'>dumpAgg</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN210"><span class='Ref_to_Typedef'>AggInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN49"><span class='Ref_to_EnumConst'>DO_OPERATOR</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN178"><span class='Ref_to_Proto'>dumpOpr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN216"><span class='Ref_to_Typedef'>OprInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN50"><span class='Ref_to_EnumConst'>DO_ACCESS_METHOD</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN179"><span class='Ref_to_Proto'>dumpAccessMethod</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN224"><span class='Ref_to_Typedef'>AccessMethodInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN51"><span class='Ref_to_EnumConst'>DO_OPCLASS</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN180"><span class='Ref_to_Proto'>dumpOpclass</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN231"><span class='Ref_to_Typedef'>OpclassInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN52"><span class='Ref_to_EnumConst'>DO_OPFAMILY</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN181"><span class='Ref_to_Proto'>dumpOpfamily</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN237"><span class='Ref_to_Typedef'>OpfamilyInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN53"><span class='Ref_to_EnumConst'>DO_COLLATION</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN182"><span class='Ref_to_Proto'>dumpCollation</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN54"><span class='Ref_to_EnumConst'>DO_CONVERSION</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN183"><span class='Ref_to_Proto'>dumpConversion</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN249"><span class='Ref_to_Typedef'>ConvInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN55"><span class='Ref_to_EnumConst'>DO_TABLE</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN188"><span class='Ref_to_Proto'>dumpTable</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN56"><span class='Ref_to_EnumConst'>DO_ATTRDEF</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN190"><span class='Ref_to_Proto'>dumpAttrDef</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN335"><span class='Ref_to_Typedef'>AttrDefInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN57"><span class='Ref_to_EnumConst'>DO_INDEX</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN193"><span class='Ref_to_Proto'>dumpIndex</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN352"><span class='Ref_to_Typedef'>IndxInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN58"><span class='Ref_to_EnumConst'>DO_STATSEXT</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN194"><span class='Ref_to_Proto'>dumpStatisticsExt</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN368"><span class='Ref_to_Typedef'>StatsExtInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN81"><span class='Ref_to_EnumConst'>DO_REFRESH_MATVIEW</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN148"><span class='Ref_to_Proto'>refreshMatViewData</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN59"><span class='Ref_to_EnumConst'>DO_RULE</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN184"><span class='Ref_to_Proto'>dumpRule</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN375"><span class='Ref_to_Typedef'>RuleInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN60"><span class='Ref_to_EnumConst'>DO_TRIGGER</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN186"><span class='Ref_to_Proto'>dumpTrigger</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN386"><span class='Ref_to_Typedef'>TriggerInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN80"><span class='Ref_to_EnumConst'>DO_EVENT_TRIGGER</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN187"><span class='Ref_to_Proto'>dumpEventTrigger</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN404"><span class='Ref_to_Typedef'>EventTriggerInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN61"><span class='Ref_to_EnumConst'>DO_CONSTRAINT</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN195"><span class='Ref_to_Proto'>dumpConstraint</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN62"><span class='Ref_to_EnumConst'>DO_FK_CONSTRAINT</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN195"><span class='Ref_to_Proto'>dumpConstraint</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN63"><span class='Ref_to_EnumConst'>DO_PROCLANG</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN174"><span class='Ref_to_Proto'>dumpProcLang</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN438"><span class='Ref_to_Typedef'>ProcLangInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN64"><span class='Ref_to_EnumConst'>DO_CAST</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN176"><span class='Ref_to_Proto'>dumpCast</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN452"><span class='Ref_to_Typedef'>CastInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN75"><span class='Ref_to_EnumConst'>DO_TRANSFORM</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN177"><span class='Ref_to_Proto'>dumpTransform</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN462"><span class='Ref_to_Typedef'>TransformInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN66"><span class='Ref_to_EnumConst'>DO_SEQUENCE_SET</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN192"><span class='Ref_to_Proto'>dumpSequenceData</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN65"><span class='Ref_to_EnumConst'>DO_TABLE_DATA</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN147"><span class='Ref_to_Proto'>dumpTableData</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN67"><span class='Ref_to_EnumConst'>DO_DUMMY_TYPE</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* table rowtypes and array types are never dumped separately */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN68"><span class='Ref_to_EnumConst'>DO_TSPARSER</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN197"><span class='Ref_to_Proto'>dumpTSParser</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN478"><span class='Ref_to_Typedef'>TSParserInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN69"><span class='Ref_to_EnumConst'>DO_TSDICT</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN198"><span class='Ref_to_Proto'>dumpTSDictionary</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN488"><span class='Ref_to_Typedef'>TSDictInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN70"><span class='Ref_to_EnumConst'>DO_TSTEMPLATE</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN199"><span class='Ref_to_Proto'>dumpTSTemplate</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN496"><span class='Ref_to_Typedef'>TSTemplateInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN71"><span class='Ref_to_EnumConst'>DO_TSCONFIG</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN200"><span class='Ref_to_Proto'>dumpTSConfig</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN503"><span class='Ref_to_Typedef'>TSConfigInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN72"><span class='Ref_to_EnumConst'>DO_FDW</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN201"><span class='Ref_to_Proto'>dumpForeignDataWrapper</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN510"><span class='Ref_to_Typedef'>FdwInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN73"><span class='Ref_to_EnumConst'>DO_FOREIGN_SERVER</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN202"><span class='Ref_to_Proto'>dumpForeignServer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN523"><span class='Ref_to_Typedef'>ForeignServerInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN74"><span class='Ref_to_EnumConst'>DO_DEFAULT_ACL</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN206"><span class='Ref_to_Proto'>dumpDefaultACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN537"><span class='Ref_to_Typedef'>DefaultACLInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN76"><span class='Ref_to_EnumConst'>DO_BLOB</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN245"><span class='Ref_to_Proto'>dumpBlob</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN548"><span class='Ref_to_Typedef'>BlobInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN77"><span class='Ref_to_EnumConst'>DO_BLOB_DATA</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN92"><span class='Ref_to_Const'>DUMP_COMPONENT_DATA</span></a><span class='Parentheses'>) 
</span>                <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                             <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"BLOBS"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN56"><span class='Ref_to_EnumConst'>SECTION_DATA</span></a><span class='Delimiter'>, 
</span>                             <span class='String'>""</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                             <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN246"><span class='Ref_to_Proto'>dumpBlobs</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN82"><span class='Ref_to_EnumConst'>DO_POLICY</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN247"><span class='Ref_to_Proto'>dumpPolicy</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN564"><span class='Ref_to_Typedef'>PolicyInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN83"><span class='Ref_to_EnumConst'>DO_PUBLICATION</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN248"><span class='Ref_to_Proto'>dumpPublication</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN579"><span class='Ref_to_Typedef'>PublicationInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN84"><span class='Ref_to_EnumConst'>DO_PUBLICATION_REL</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN249"><span class='Ref_to_Proto'>dumpPublicationTable</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN593"><span class='Ref_to_Typedef'>PublicationRelInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN85"><span class='Ref_to_EnumConst'>DO_SUBSCRIPTION</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN250"><span class='Ref_to_Proto'>dumpSubscription</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN603"><span class='Ref_to_Typedef'>SubscriptionInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN9346"><span class='Ref_to_Parameter'>dobj</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN78"><span class='Ref_to_EnumConst'>DO_PRE_DATA_BOUNDARY</span></a><span class='Operator'>: 
</span>        <span class='Control'>case</span> <a href="pg_dump.h.html#LN79"><span class='Ref_to_EnumConst'>DO_POST_DATA_BOUNDARY</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* never dumped, nothing to do */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch dobj-&GT;objType &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end dumpDumpableObject &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpNamespace 
 *    writes out to fout the queries to recreate a user-defined namespace 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9491"></a><span class='Declare_Function'>dumpNamespace</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN142"><span class='Ref_to_Typedef'>NamespaceInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>nspinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9493"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN9494"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN9495"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN9496"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN9497"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qnspname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN9493"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9494"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN9495"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN9496"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9497"><span class='Ref_To_Local'>qnspname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9495"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP SCHEMA %s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9497"><span class='Ref_To_Local'>qnspname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9494"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE SCHEMA %s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9497"><span class='Ref_To_Local'>qnspname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9496"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"SCHEMA %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9497"><span class='Ref_To_Local'>qnspname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9493"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9494"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9496"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN145"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"SCHEMA"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9494"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9495"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Schema Comments and Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9496"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN145"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9496"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN145"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><span class='String'>"SCHEMA"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9497"><span class='Ref_To_Local'>qnspname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN145"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN146"><span class='Ref_to_Member'>nspacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN147"><span class='Ref_to_Member'>rnspacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN148"><span class='Ref_to_Member'>initnspacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9491"><span class='Ref_to_Parameter'>nspinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN149"><span class='Ref_to_Member'>initrnspacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9497"><span class='Ref_To_Local'>qnspname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9494"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9495"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9496"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpNamespace &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpExtension 
 *    writes out to fout the queries to recreate an extension 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9557"></a><span class='Declare_Function'>dumpExtension</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>extinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9559"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN9560"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN9561"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN9562"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN9563"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qextname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN9559"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN9561"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN9562"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9563"><span class='Ref_To_Local'>qextname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9561"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP EXTENSION %s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9563"><span class='Ref_To_Local'>qextname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN9559"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * In a regular dump, we use IF NOT EXISTS so that there isn't a 
         * problem if the extension already exists in the target database; 
         * this is essential for installed-by-default extensions such as 
         * plpgsql. 
         * 
         * In binary-upgrade mode, that doesn't work well, so instead we skip 
         * built-in extensions based on their OIDs; see 
         * selectDumpableExtension. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE EXTENSION IF NOT EXISTS %s WITH SCHEMA %s;\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN9563"><span class='Ref_To_Local'>qextname</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><span class='Control'>namespace</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span><a name="LN9594"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN9595"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>n</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"-- For binary upgrade, create an empty extension and insert objects into it\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We unconditionally create the extension, so we must drop it if it 
         * exists.  This could happen if the user deleted 'plpgsql' and then 
         * readded it, causing its oid to be greater than g_last_builtin_oid. 
         * The g_last_builtin_oid test was kept to avoid repeatedly dropping 
         * and recreating extensions like 'plpgsql'. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"DROP EXTENSION IF EXISTS %s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9563"><span class='Ref_To_Local'>qextname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                 <span class='String'>"SELECT pg_catalog.binary_upgrade_create_empty_extension("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><span class='Control'>namespace</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s, "</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN156"><span class='Ref_to_Member'>relocatable</span></a> <span class='Operator'>? </span><span class='String'>"true"</span> <span class='Operator'>: </span><span class='String'>"false"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN157"><span class='Ref_to_Member'>extversion</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Note that we're pushing extconfig (an OID array) back into 
         * pg_extension exactly as-is.  This is OK because pg_class OIDs are 
         * preserved in binary upgrade. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN158"><span class='Ref_to_Member'>extconfig</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>2</span><span class='Parentheses'>)</span> 
            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN158"><span class='Ref_to_Member'>extconfig</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN159"><span class='Ref_to_Member'>extcondition</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>2</span><span class='Parentheses'>)</span> 
            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN159"><span class='Ref_to_Member'>extcondition</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ARRAY["</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN9595"><span class='Ref_To_Local'>n</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9594"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN9594"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN138"><span class='Ref_to_Member'>nDeps</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN9594"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN9637"></a>            <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>extobj</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN9637"><span class='Ref_To_Local'>extobj</span></a> <span class='Operator'>= </span><a href="common.c.html#LN519"><span class='Ref_to_Func'>findObjectByDumpId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN137"><span class='Ref_to_Member'>dependencies</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN9594"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9637"><span class='Ref_To_Local'>extobj</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN9637"><span class='Ref_To_Local'>extobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>== </span><a href="pg_dump.h.html#LN44"><span class='Ref_to_EnumConst'>DO_EXTENSION</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9595"><span class='Ref_To_Local'>n</span></a><span class='Operator'>++ &GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9637"><span class='Ref_To_Local'>extobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"]::pg_catalog.text[]"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>");\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9562"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"EXTENSION %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9563"><span class='Ref_To_Local'>qextname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='String'>""</span><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"EXTENSION"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9561"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Extension Comments and Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9562"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9562"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9557"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9563"><span class='Ref_To_Local'>qextname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9560"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9561"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9562"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpExtension &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpType 
 *    writes out to fout the queries to recreate a user-defined type 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9686"></a><span class='Declare_Function'>dumpType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9688"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN9688"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump out in proper style */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN178"><span class='Ref_to_Member'>typtype</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN719"><span class='Ref_to_Const'>TYPTYPE_BASE</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN166"><span class='Ref_to_Proto'>dumpBaseType</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN178"><span class='Ref_to_Member'>typtype</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN721"><span class='Ref_to_Const'>TYPTYPE_DOMAIN</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN170"><span class='Ref_to_Proto'>dumpDomain</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN178"><span class='Ref_to_Member'>typtype</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN720"><span class='Ref_to_Const'>TYPTYPE_COMPOSITE</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN171"><span class='Ref_to_Proto'>dumpCompositeType</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN178"><span class='Ref_to_Member'>typtype</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN722"><span class='Ref_to_Const'>TYPTYPE_ENUM</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN167"><span class='Ref_to_Proto'>dumpEnumType</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN178"><span class='Ref_to_Member'>typtype</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN724"><span class='Ref_to_Const'>TYPTYPE_RANGE</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN168"><span class='Ref_to_Proto'>dumpRangeType</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN178"><span class='Ref_to_Member'>typtype</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_type.h.html#LN723"><span class='Ref_to_Const'>TYPTYPE_PSEUDO</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN180"><span class='Ref_to_Member'>isDefined</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN169"><span class='Ref_to_Proto'>dumpUndefinedType</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: typtype of data type \"%s\" appears to be invalid\n"</span><span class='Delimiter'>, 
</span>                  <a href="pg_dump.c.html#LN9686"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpType &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpEnumType 
 *    writes out to fout the queries to recreate a user-defined enum type 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9717"></a><span class='Declare_Function'>dumpEnumType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9719"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN9720"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN9721"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN9722"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN9723"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN9724"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN9725"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>num</span><span class='Delimiter'>, 
</span><a name="LN9726"></a>                <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN9727"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>enum_oid</span><span class='Delimiter'>; 
</span><a name="LN9728"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qtypname</span><span class='Delimiter'>; 
</span><a name="LN9729"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>label</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set proper schema search path */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9723"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT oid, enumlabel "</span> 
                          <span class='String'>"FROM pg_catalog.pg_enum "</span> 
                          <span class='String'>"WHERE enumtypid = '%u'"</span> 
                          <span class='String'>"ORDER BY enumsortorder"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9723"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT oid, enumlabel "</span> 
                          <span class='String'>"FROM pg_catalog.pg_enum "</span> 
                          <span class='String'>"WHERE enumtypid = '%u'"</span> 
                          <span class='String'>"ORDER BY oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9724"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9723"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9725"><span class='Ref_To_Local'>num</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9724"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9728"><span class='Ref_To_Local'>qtypname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog. 
     * CASCADE shouldn't be required here as for normal types since the I/O 
     * functions are generic and do not get dropped. 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9721"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP TYPE %s."</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9721"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN9728"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9719"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN254"><span class='Ref_to_Proto'>binary_upgrade_set_type_oids_by_type_oid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                                 <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE TYPE %s AS ENUM ("</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN9728"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN9719"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Labels with server-assigned oids */ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9726"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN9726"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN9725"><span class='Ref_To_Local'>num</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN9726"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN9729"><span class='Ref_To_Local'>label</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9724"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9726"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9724"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"enumlabel"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9726"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9729"><span class='Ref_To_Local'>label</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n);\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9719"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Labels with dump-assigned (preserved) oids */ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9726"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN9726"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN9725"><span class='Ref_To_Local'>num</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN9726"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN9727"><span class='Ref_To_Local'>enum_oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9724"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9726"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9724"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oid"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN9729"><span class='Ref_To_Local'>label</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9724"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9726"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9724"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"enumlabel"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9726"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, must preserve pg_enum oids\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT pg_catalog.binary_upgrade_set_next_pg_enum_oid('%u'::pg_catalog.oid);\n"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN9727"><span class='Ref_To_Local'>enum_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TYPE %s."</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s ADD VALUE "</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN9728"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9729"><span class='Ref_To_Local'>label</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if dopt-&GT;binary_upgrade &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9722"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9728"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9719"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9722"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"TYPE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9721"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Type Comments and Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9722"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9722"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9728"><span class='Ref_To_Local'>qtypname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN171"><span class='Ref_to_Member'>typacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN172"><span class='Ref_to_Member'>rtypacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN173"><span class='Ref_to_Member'>inittypacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9717"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN174"><span class='Ref_to_Member'>initrtypacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9724"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9720"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9721"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9722"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9723"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpEnumType &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpRangeType 
 *    writes out to fout the queries to recreate a user-defined range type 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9853"></a><span class='Declare_Function'>dumpRangeType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9855"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN9856"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN9857"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN9858"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN9859"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN9860"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN9861"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>collationOid</span><span class='Delimiter'>; 
</span><a name="LN9862"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qtypname</span><span class='Delimiter'>; 
</span><a name="LN9863"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>procname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * select appropriate schema to ensure names in CREATE are properly 
     * qualified 
     */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9859"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>            <span class='String'>"SELECT pg_catalog.format_type(rngsubtype, NULL) AS rngsubtype, "</span> 
                      <span class='String'>"opc.opcname AS opcname, "</span> 
                      <span class='String'>"(SELECT nspname FROM pg_catalog.pg_namespace nsp "</span> 
                      <span class='String'>"  WHERE nsp.oid = opc.opcnamespace) AS opcnsp, "</span> 
                      <span class='String'>"opc.opcdefault, "</span> 
                      <span class='String'>"CASE WHEN rngcollation = st.typcollation THEN 0 "</span> 
                      <span class='String'>"     ELSE rngcollation END AS collation, "</span> 
                      <span class='String'>"rngcanonical, rngsubdiff "</span> 
                      <span class='String'>"FROM pg_catalog.pg_range r, pg_catalog.pg_type st, "</span> 
                      <span class='String'>"     pg_catalog.pg_opclass opc "</span> 
                      <span class='String'>"WHERE st.oid = rngsubtype AND opc.oid = rngsubopc AND "</span> 
                      <span class='String'>"rngtypid = '%u'"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9859"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9862"><span class='Ref_To_Local'>qtypname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog. 
     * CASCADE shouldn't be required here as for normal types since the I/O 
     * functions are generic and do not get dropped. 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9857"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP TYPE %s."</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9857"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN9862"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9855"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN254"><span class='Ref_to_Proto'>binary_upgrade_set_type_oids_by_type_oid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                                                 <a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE TYPE %s AS RANGE ("</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN9862"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n    subtype = %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rngsubtype"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* print subtype_opclass only if not default for subtype */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opcdefault"</span><span class='Parentheses'>))</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'t'</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN9913"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opcname</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opcname"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN9914"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nspname</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opcnsp"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* always schema-qualify, don't try to be smart */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    subtype_opclass = %s."</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9914"><span class='Ref_To_Local'>nspname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9913"><span class='Ref_To_Local'>opcname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN9861"><span class='Ref_To_Local'>collationOid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"collation"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9861"><span class='Ref_To_Local'>collationOid</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN9925"></a>        <a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>coll</span> <span class='Operator'>= </span><a href="pg_dump.h.html#LN653"><span class='Ref_to_Proto'>findCollationByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9861"><span class='Ref_To_Local'>collationOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9925"><span class='Ref_To_Local'>coll</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* always schema-qualify, don't try to be smart */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    collation = %s."</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9925"><span class='Ref_To_Local'>coll</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9925"><span class='Ref_To_Local'>coll</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN9863"><span class='Ref_To_Local'>procname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rngcanonical"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9863"><span class='Ref_To_Local'>procname</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    canonical = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9863"><span class='Ref_To_Local'>procname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN9863"><span class='Ref_To_Local'>procname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"rngsubdiff"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9863"><span class='Ref_To_Local'>procname</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    subtype_diff = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9863"><span class='Ref_To_Local'>procname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n);\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9858"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9862"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9855"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9858"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"TYPE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9857"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Type Comments and Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9858"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9858"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9862"><span class='Ref_To_Local'>qtypname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN171"><span class='Ref_to_Member'>typacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN172"><span class='Ref_to_Member'>rtypacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN173"><span class='Ref_to_Member'>inittypacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9853"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN174"><span class='Ref_to_Member'>initrtypacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9860"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9856"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9857"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9858"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9859"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpRangeType &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpUndefinedType 
 *    writes out to fout the queries to recreate a !typisdefined type 
 * 
 * This is a shell type, but we use different terminology to distinguish 
 * this case from where we have to emit a shell type definition to break 
 * circular dependencies.  An undefined type shouldn't ever have anything 
 * depending on it. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN9997"></a><span class='Declare_Function'>dumpUndefinedType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN9999"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN10000"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10001"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10002"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10003"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qtypname</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10003"><span class='Ref_To_Local'>qtypname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog. 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10001"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP TYPE %s."</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10001"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN10003"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9999"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN254"><span class='Ref_to_Proto'>binary_upgrade_set_type_oids_by_type_oid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                                                 <a href="pg_dump.c.html#LN10000"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10000"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE TYPE %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN10003"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10002"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10003"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9999"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10000"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10002"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"TYPE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10000"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10001"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Type Comments and Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10002"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10002"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10003"><span class='Ref_To_Local'>qtypname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN171"><span class='Ref_to_Member'>typacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN172"><span class='Ref_to_Member'>rtypacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN173"><span class='Ref_to_Member'>inittypacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN9997"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN174"><span class='Ref_to_Member'>initrtypacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10000"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10001"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10002"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpUndefinedType &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpBaseType 
 *    writes out to fout the queries to recreate a user-defined base type 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN10066"></a><span class='Declare_Function'>dumpBaseType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10068"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN10069"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10070"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10071"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10072"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10073"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN10074"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qtypname</span><span class='Delimiter'>; 
</span><a name="LN10075"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typlen</span><span class='Delimiter'>; 
</span><a name="LN10076"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typinput</span><span class='Delimiter'>; 
</span><a name="LN10077"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typoutput</span><span class='Delimiter'>; 
</span><a name="LN10078"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typreceive</span><span class='Delimiter'>; 
</span><a name="LN10079"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typsend</span><span class='Delimiter'>; 
</span><a name="LN10080"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typmodin</span><span class='Delimiter'>; 
</span><a name="LN10081"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typmodout</span><span class='Delimiter'>; 
</span><a name="LN10082"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typanalyze</span><span class='Delimiter'>; 
</span><a name="LN10083"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typreceiveoid</span><span class='Delimiter'>; 
</span><a name="LN10084"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typsendoid</span><span class='Delimiter'>; 
</span><a name="LN10085"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typmodinoid</span><span class='Delimiter'>; 
</span><a name="LN10086"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typmodoutoid</span><span class='Delimiter'>; 
</span><a name="LN10087"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typanalyzeoid</span><span class='Delimiter'>; 
</span><a name="LN10088"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typcategory</span><span class='Delimiter'>; 
</span><a name="LN10089"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typispreferred</span><span class='Delimiter'>; 
</span><a name="LN10090"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typdelim</span><span class='Delimiter'>; 
</span><a name="LN10091"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typbyval</span><span class='Delimiter'>; 
</span><a name="LN10092"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typalign</span><span class='Delimiter'>; 
</span><a name="LN10093"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typstorage</span><span class='Delimiter'>; 
</span><a name="LN10094"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typcollatable</span><span class='Delimiter'>; 
</span><a name="LN10095"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typdefault</span><span class='Delimiter'>; 
</span><a name="LN10096"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>typdefault_is_literal</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set proper schema search path so regproc references list correctly */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fetch type-specific details */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10072"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT typlen, "</span> 
                          <span class='String'>"typinput, typoutput, typreceive, typsend, "</span> 
                          <span class='String'>"typmodin, typmodout, typanalyze, "</span> 
                          <span class='String'>"typreceive::pg_catalog.oid AS typreceiveoid, "</span> 
                          <span class='String'>"typsend::pg_catalog.oid AS typsendoid, "</span> 
                          <span class='String'>"typmodin::pg_catalog.oid AS typmodinoid, "</span> 
                          <span class='String'>"typmodout::pg_catalog.oid AS typmodoutoid, "</span> 
                          <span class='String'>"typanalyze::pg_catalog.oid AS typanalyzeoid, "</span> 
                          <span class='String'>"typcategory, typispreferred, "</span> 
                          <span class='String'>"typdelim, typbyval, typalign, typstorage, "</span> 
                          <span class='String'>"(typcollation &LT;&GT; 0) AS typcollatable, "</span> 
                          <span class='String'>"pg_catalog.pg_get_expr(typdefaultbin, 0) AS typdefaultbin, typdefault "</span> 
                          <span class='String'>"FROM pg_catalog.pg_type "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10072"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT typlen, "</span> 
                          <span class='String'>"typinput, typoutput, typreceive, typsend, "</span> 
                          <span class='String'>"typmodin, typmodout, typanalyze, "</span> 
                          <span class='String'>"typreceive::pg_catalog.oid AS typreceiveoid, "</span> 
                          <span class='String'>"typsend::pg_catalog.oid AS typsendoid, "</span> 
                          <span class='String'>"typmodin::pg_catalog.oid AS typmodinoid, "</span> 
                          <span class='String'>"typmodout::pg_catalog.oid AS typmodoutoid, "</span> 
                          <span class='String'>"typanalyze::pg_catalog.oid AS typanalyzeoid, "</span> 
                          <span class='String'>"typcategory, typispreferred, "</span> 
                          <span class='String'>"typdelim, typbyval, typalign, typstorage, "</span> 
                          <span class='String'>"false AS typcollatable, "</span> 
                          <span class='String'>"pg_catalog.pg_get_expr(typdefaultbin, 0) AS typdefaultbin, typdefault "</span> 
                          <span class='String'>"FROM pg_catalog.pg_type "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Before 8.4, pg_get_expr does not allow 0 for its second arg */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10072"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT typlen, "</span> 
                          <span class='String'>"typinput, typoutput, typreceive, typsend, "</span> 
                          <span class='String'>"typmodin, typmodout, typanalyze, "</span> 
                          <span class='String'>"typreceive::pg_catalog.oid AS typreceiveoid, "</span> 
                          <span class='String'>"typsend::pg_catalog.oid AS typsendoid, "</span> 
                          <span class='String'>"typmodin::pg_catalog.oid AS typmodinoid, "</span> 
                          <span class='String'>"typmodout::pg_catalog.oid AS typmodoutoid, "</span> 
                          <span class='String'>"typanalyze::pg_catalog.oid AS typanalyzeoid, "</span> 
                          <span class='String'>"'U' AS typcategory, false AS typispreferred, "</span> 
                          <span class='String'>"typdelim, typbyval, typalign, typstorage, "</span> 
                          <span class='String'>"false AS typcollatable, "</span> 
                          <span class='String'>"pg_catalog.pg_get_expr(typdefaultbin, 'pg_catalog.pg_type'::pg_catalog.regclass) AS typdefaultbin, typdefault "</span> 
                          <span class='String'>"FROM pg_catalog.pg_type "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10072"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT typlen, "</span> 
                          <span class='String'>"typinput, typoutput, typreceive, typsend, "</span> 
                          <span class='String'>"'-' AS typmodin, '-' AS typmodout, "</span> 
                          <span class='String'>"typanalyze, "</span> 
                          <span class='String'>"typreceive::pg_catalog.oid AS typreceiveoid, "</span> 
                          <span class='String'>"typsend::pg_catalog.oid AS typsendoid, "</span> 
                          <span class='String'>"0 AS typmodinoid, 0 AS typmodoutoid, "</span> 
                          <span class='String'>"typanalyze::pg_catalog.oid AS typanalyzeoid, "</span> 
                          <span class='String'>"'U' AS typcategory, false AS typispreferred, "</span> 
                          <span class='String'>"typdelim, typbyval, typalign, typstorage, "</span> 
                          <span class='String'>"false AS typcollatable, "</span> 
                          <span class='String'>"pg_catalog.pg_get_expr(typdefaultbin, 'pg_catalog.pg_type'::pg_catalog.regclass) AS typdefaultbin, typdefault "</span> 
                          <span class='String'>"FROM pg_catalog.pg_type "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10072"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10075"><span class='Ref_To_Local'>typlen</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typlen"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10076"><span class='Ref_To_Local'>typinput</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typinput"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10077"><span class='Ref_To_Local'>typoutput</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typoutput"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10078"><span class='Ref_To_Local'>typreceive</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typreceive"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10079"><span class='Ref_To_Local'>typsend</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typsend"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10080"><span class='Ref_To_Local'>typmodin</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typmodin"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10081"><span class='Ref_To_Local'>typmodout</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typmodout"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10082"><span class='Ref_To_Local'>typanalyze</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typanalyze"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10083"><span class='Ref_To_Local'>typreceiveoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typreceiveoid"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10084"><span class='Ref_To_Local'>typsendoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typsendoid"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10085"><span class='Ref_To_Local'>typmodinoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typmodinoid"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10086"><span class='Ref_To_Local'>typmodoutoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typmodoutoid"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10087"><span class='Ref_To_Local'>typanalyzeoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typanalyzeoid"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10088"><span class='Ref_To_Local'>typcategory</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typcategory"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10089"><span class='Ref_To_Local'>typispreferred</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typispreferred"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10090"><span class='Ref_To_Local'>typdelim</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typdelim"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10091"><span class='Ref_To_Local'>typbyval</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typbyval"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10092"><span class='Ref_To_Local'>typalign</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typalign"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10093"><span class='Ref_To_Local'>typstorage</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typstorage"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10094"><span class='Ref_To_Local'>typcollatable</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typcollatable"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typdefaultbin"</span><span class='Parentheses'>)))</span> 
        <a href="pg_dump.c.html#LN10095"><span class='Ref_To_Local'>typdefault</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typdefaultbin"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typdefault"</span><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN10095"><span class='Ref_To_Local'>typdefault</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typdefault"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN10096"><span class='Ref_To_Local'>typdefault_is_literal</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* it needs quotes */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN10095"><span class='Ref_To_Local'>typdefault</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10074"><span class='Ref_To_Local'>qtypname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog. 
     * The reason we include CASCADE is that the circular dependency between 
     * the type and its I/O functions makes it impossible to drop the type any 
     * other way. 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10070"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP TYPE %s."</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10070"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s CASCADE;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN10074"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* We might already have a shell type, but setting pg_type_oid is harmless */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10068"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN254"><span class='Ref_to_Proto'>binary_upgrade_set_type_oids_by_type_oid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                                 <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"CREATE TYPE %s (\n"</span> 
                      <span class='String'>"    INTERNALLENGTH = %s"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN10074"><span class='Ref_To_Local'>qtypname</span></a><span class='Delimiter'>, 
</span>                      <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10075"><span class='Ref_To_Local'>typlen</span></a><span class='Delimiter'>, </span><span class='String'>"-1"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='String'>"variable"</span> <span class='Operator'>: </span><a href="pg_dump.c.html#LN10075"><span class='Ref_To_Local'>typlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* regproc result is sufficiently quoted already */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    INPUT = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10076"><span class='Ref_To_Local'>typinput</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    OUTPUT = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10077"><span class='Ref_To_Local'>typoutput</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10083"><span class='Ref_To_Local'>typreceiveoid</span></a><span class='Parentheses'>))</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    RECEIVE = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10078"><span class='Ref_To_Local'>typreceive</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10084"><span class='Ref_To_Local'>typsendoid</span></a><span class='Parentheses'>))</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    SEND = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10079"><span class='Ref_To_Local'>typsend</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10085"><span class='Ref_To_Local'>typmodinoid</span></a><span class='Parentheses'>))</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    TYPMOD_IN = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10080"><span class='Ref_To_Local'>typmodin</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10086"><span class='Ref_To_Local'>typmodoutoid</span></a><span class='Parentheses'>))</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    TYPMOD_OUT = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10081"><span class='Ref_To_Local'>typmodout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10087"><span class='Ref_To_Local'>typanalyzeoid</span></a><span class='Parentheses'>))</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    ANALYZE = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10082"><span class='Ref_To_Local'>typanalyze</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10094"><span class='Ref_To_Local'>typcollatable</span></a><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    COLLATABLE = true"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10095"><span class='Ref_To_Local'>typdefault</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    DEFAULT = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10096"><span class='Ref_To_Local'>typdefault_is_literal</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10095"><span class='Ref_To_Local'>typdefault</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10095"><span class='Ref_To_Local'>typdefault</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN175"><span class='Ref_to_Member'>typelem</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN10260"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>elemType</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* reselect schema in case changed by function dump */ 
</span>        <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN10260"><span class='Ref_To_Local'>elemType</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN243"><span class='Ref_to_Proto'>getFormattedTypeName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN175"><span class='Ref_to_Member'>typelem</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN83"><span class='Ref_to_EnumConst'>zeroAsOpaque</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    ELEMENT = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10260"><span class='Ref_To_Local'>elemType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10260"><span class='Ref_To_Local'>elemType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10088"><span class='Ref_To_Local'>typcategory</span></a><span class='Delimiter'>, </span><span class='String'>"U"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    CATEGORY = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10088"><span class='Ref_To_Local'>typcategory</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10089"><span class='Ref_To_Local'>typispreferred</span></a><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    PREFERRED = true"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10090"><span class='Ref_To_Local'>typdelim</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10090"><span class='Ref_To_Local'>typdelim</span></a><span class='Delimiter'>, </span><span class='String'>","</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    DELIMITER = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10090"><span class='Ref_To_Local'>typdelim</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10092"><span class='Ref_To_Local'>typalign</span></a><span class='Delimiter'>, </span><span class='String'>"c"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    ALIGNMENT = char"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10092"><span class='Ref_To_Local'>typalign</span></a><span class='Delimiter'>, </span><span class='String'>"s"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    ALIGNMENT = int2"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10092"><span class='Ref_To_Local'>typalign</span></a><span class='Delimiter'>, </span><span class='String'>"i"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    ALIGNMENT = int4"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10092"><span class='Ref_To_Local'>typalign</span></a><span class='Delimiter'>, </span><span class='String'>"d"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    ALIGNMENT = double"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10093"><span class='Ref_To_Local'>typstorage</span></a><span class='Delimiter'>, </span><span class='String'>"p"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    STORAGE = plain"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10093"><span class='Ref_To_Local'>typstorage</span></a><span class='Delimiter'>, </span><span class='String'>"e"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    STORAGE = external"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10093"><span class='Ref_To_Local'>typstorage</span></a><span class='Delimiter'>, </span><span class='String'>"x"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    STORAGE = extended"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10093"><span class='Ref_To_Local'>typstorage</span></a><span class='Delimiter'>, </span><span class='String'>"m"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    STORAGE = main"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10091"><span class='Ref_To_Local'>typbyval</span></a><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    PASSEDBYVALUE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n);\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10071"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10074"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10068"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10071"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"TYPE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10070"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Type Comments and Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10071"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10071"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10074"><span class='Ref_To_Local'>qtypname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN171"><span class='Ref_to_Member'>typacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN172"><span class='Ref_to_Member'>rtypacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN173"><span class='Ref_to_Member'>inittypacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10066"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN174"><span class='Ref_to_Member'>initrtypacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10073"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10069"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10070"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10071"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10072"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpBaseType &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpDomain 
 *    writes out to fout the queries to recreate a user-defined domain 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN10353"></a><span class='Declare_Function'>dumpDomain</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10355"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN10356"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10357"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10358"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10359"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10360"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN10361"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN10362"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qtypname</span><span class='Delimiter'>; 
</span><a name="LN10363"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typnotnull</span><span class='Delimiter'>; 
</span><a name="LN10364"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typdefn</span><span class='Delimiter'>; 
</span><a name="LN10365"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typdefault</span><span class='Delimiter'>; 
</span><a name="LN10366"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typcollation</span><span class='Delimiter'>; 
</span><a name="LN10367"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>typdefault_is_literal</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set proper schema search path so type references list correctly */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fetch domain specific details */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* typcollation is new in 9.1 */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10359"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT t.typnotnull, "</span> 
            <span class='String'>"pg_catalog.format_type(t.typbasetype, t.typtypmod) AS typdefn, "</span> 
                          <span class='String'>"pg_catalog.pg_get_expr(t.typdefaultbin, 'pg_catalog.pg_type'::pg_catalog.regclass) AS typdefaultbin, "</span> 
                          <span class='String'>"t.typdefault, "</span> 
                          <span class='String'>"CASE WHEN t.typcollation &LT;&GT; u.typcollation "</span> 
                          <span class='String'>"THEN t.typcollation ELSE 0 END AS typcollation "</span> 
                          <span class='String'>"FROM pg_catalog.pg_type t "</span> 
                 <span class='String'>"LEFT JOIN pg_catalog.pg_type u ON (t.typbasetype = u.oid) "</span> 
                          <span class='String'>"WHERE t.oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10359"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT typnotnull, "</span> 
                <span class='String'>"pg_catalog.format_type(typbasetype, typtypmod) AS typdefn, "</span> 
                          <span class='String'>"pg_catalog.pg_get_expr(typdefaultbin, 'pg_catalog.pg_type'::pg_catalog.regclass) AS typdefaultbin, "</span> 
                          <span class='String'>"typdefault, 0 AS typcollation "</span> 
                          <span class='String'>"FROM pg_catalog.pg_type "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10359"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10363"><span class='Ref_To_Local'>typnotnull</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typnotnull"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10364"><span class='Ref_To_Local'>typdefn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typdefn"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typdefaultbin"</span><span class='Parentheses'>)))</span> 
        <a href="pg_dump.c.html#LN10365"><span class='Ref_To_Local'>typdefault</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typdefaultbin"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typdefault"</span><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN10365"><span class='Ref_To_Local'>typdefault</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typdefault"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN10367"><span class='Ref_To_Local'>typdefault_is_literal</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* it needs quotes */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN10365"><span class='Ref_To_Local'>typdefault</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10366"><span class='Ref_To_Local'>typcollation</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"typcollation"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10355"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN254"><span class='Ref_to_Proto'>binary_upgrade_set_type_oids_by_type_oid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                                 <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10362"><span class='Ref_To_Local'>qtypname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"CREATE DOMAIN %s AS %s"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN10362"><span class='Ref_To_Local'>qtypname</span></a><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN10364"><span class='Ref_To_Local'>typdefn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Print collation only if different from base type's collation */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10366"><span class='Ref_To_Local'>typcollation</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN10427"></a>        <a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>coll</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN10427"><span class='Ref_To_Local'>coll</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN653"><span class='Ref_to_Proto'>findCollationByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10366"><span class='Ref_To_Local'>typcollation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10427"><span class='Ref_To_Local'>coll</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* always schema-qualify, don't try to be smart */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" COLLATE %s."</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10427"><span class='Ref_To_Local'>coll</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10427"><span class='Ref_To_Local'>coll</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10363"><span class='Ref_To_Local'>typnotnull</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" NOT NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10365"><span class='Ref_To_Local'>typdefault</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" DEFAULT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10367"><span class='Ref_To_Local'>typdefault_is_literal</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10365"><span class='Ref_To_Local'>typdefault</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10365"><span class='Ref_To_Local'>typdefault</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10360"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Add any CHECK constraints for the domain 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10361"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN10361"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN184"><span class='Ref_to_Member'>nDomChecks</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN10361"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN10458"></a>        <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>domcheck</span> <span class='Operator'>= &</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN185"><span class='Ref_to_Member'>domChecks</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN10361"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN10458"><span class='Ref_To_Local'>domcheck</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n\tCONSTRAINT %s %s"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10458"><span class='Ref_To_Local'>domcheck</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10458"><span class='Ref_To_Local'>domcheck</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10357"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP DOMAIN %s."</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10357"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN10362"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10358"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"DOMAIN %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10362"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10355"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10358"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"DOMAIN"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10357"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Domain Comments and Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10358"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10358"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10362"><span class='Ref_To_Local'>qtypname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN171"><span class='Ref_to_Member'>typacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN172"><span class='Ref_to_Member'>rtypacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN173"><span class='Ref_to_Member'>inittypacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN174"><span class='Ref_to_Member'>initrtypacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump any per-constraint comments */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10361"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN10361"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN184"><span class='Ref_to_Member'>nDomChecks</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN10361"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN10512"></a>        <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>domcheck</span> <span class='Operator'>= &</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN185"><span class='Ref_to_Member'>domChecks</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN10361"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN10513"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10513"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"CONSTRAINT %s "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10512"><span class='Ref_To_Local'>domcheck</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10513"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"ON DOMAIN %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10362"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10513"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                        <a href="pg_dump.c.html#LN10512"><span class='Ref_To_Local'>domcheck</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10353"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10513"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10356"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10357"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10358"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10359"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpDomain &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpCompositeType 
 *    writes out to fout the queries to recreate a user-defined stand-alone 
 *    composite type 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN10541"></a><span class='Declare_Function'>dumpCompositeType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10543"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN10544"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10545"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>dropped</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10546"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10547"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10548"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN10549"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN10550"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qtypname</span><span class='Delimiter'>; 
</span><a name="LN10551"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN10552"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attname</span><span class='Delimiter'>; 
</span><a name="LN10553"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_atttypdefn</span><span class='Delimiter'>; 
</span><a name="LN10554"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attlen</span><span class='Delimiter'>; 
</span><a name="LN10555"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attalign</span><span class='Delimiter'>; 
</span><a name="LN10556"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attisdropped</span><span class='Delimiter'>; 
</span><a name="LN10557"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attcollation</span><span class='Delimiter'>; 
</span><a name="LN10558"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN10559"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>actual_atts</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set proper schema search path so type references list correctly */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fetch type specific details */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * attcollation is new in 9.1.  Since we only want to dump COLLATE 
         * clauses for attributes whose collation is different from their 
         * type's default, we use a CASE here to suppress uninteresting 
         * attcollations cheaply.  atttypid will be 0 for dropped columns; 
         * collation does not matter for those. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10548"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT a.attname, "</span> 
            <span class='String'>"pg_catalog.format_type(a.atttypid, a.atttypmod) AS atttypdefn, "</span> 
                          <span class='String'>"a.attlen, a.attalign, a.attisdropped, "</span> 
                          <span class='String'>"CASE WHEN a.attcollation &LT;&GT; at.typcollation "</span> 
                          <span class='String'>"THEN a.attcollation ELSE 0 END AS attcollation "</span> 
                          <span class='String'>"FROM pg_catalog.pg_type ct "</span> 
                <span class='String'>"JOIN pg_catalog.pg_attribute a ON a.attrelid = ct.typrelid "</span> 
                    <span class='String'>"LEFT JOIN pg_catalog.pg_type at ON at.oid = a.atttypid "</span> 
                          <span class='String'>"WHERE ct.oid = '%u'::pg_catalog.oid "</span> 
                          <span class='String'>"ORDER BY a.attnum "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Since ALTER TYPE could not drop columns until 9.1, attisdropped 
         * should always be false. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10548"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT a.attname, "</span> 
            <span class='String'>"pg_catalog.format_type(a.atttypid, a.atttypmod) AS atttypdefn, "</span> 
                          <span class='String'>"a.attlen, a.attalign, a.attisdropped, "</span> 
                          <span class='String'>"0 AS attcollation "</span> 
                     <span class='String'>"FROM pg_catalog.pg_type ct, pg_catalog.pg_attribute a "</span> 
                          <span class='String'>"WHERE ct.oid = '%u'::pg_catalog.oid "</span> 
                          <span class='String'>"AND a.attrelid = ct.typrelid "</span> 
                          <span class='String'>"ORDER BY a.attnum "</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10548"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10551"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10552"><span class='Ref_To_Local'>i_attname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10553"><span class='Ref_To_Local'>i_atttypdefn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"atttypdefn"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10554"><span class='Ref_To_Local'>i_attlen</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attlen"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10555"><span class='Ref_To_Local'>i_attalign</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attalign"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10556"><span class='Ref_To_Local'>i_attisdropped</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attisdropped"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10557"><span class='Ref_To_Local'>i_attcollation</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attcollation"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10543"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN254"><span class='Ref_to_Proto'>binary_upgrade_set_type_oids_by_type_oid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                                 <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN258"><span class='Ref_to_Proto'>binary_upgrade_set_pg_class_oids</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN176"><span class='Ref_to_Member'>typrelid</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN10550"><span class='Ref_To_Local'>qtypname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE TYPE %s AS ("</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN10550"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10559"><span class='Ref_To_Local'>actual_atts</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10558"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN10558"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN10551"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN10558"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN10629"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attname</span><span class='Delimiter'>; 
</span><a name="LN10630"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>atttypdefn</span><span class='Delimiter'>; 
</span><a name="LN10631"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attlen</span><span class='Delimiter'>; 
</span><a name="LN10632"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attalign</span><span class='Delimiter'>; 
</span><a name="LN10633"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>attisdropped</span><span class='Delimiter'>; 
</span><a name="LN10634"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>attcollation</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN10629"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10558"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10552"><span class='Ref_To_Local'>i_attname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN10630"><span class='Ref_To_Local'>atttypdefn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10558"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10553"><span class='Ref_To_Local'>i_atttypdefn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN10631"><span class='Ref_To_Local'>attlen</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10558"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10554"><span class='Ref_To_Local'>i_attlen</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN10632"><span class='Ref_To_Local'>attalign</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10558"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10555"><span class='Ref_To_Local'>i_attalign</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN10633"><span class='Ref_To_Local'>attisdropped</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10558"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10556"><span class='Ref_To_Local'>i_attisdropped</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN10634"><span class='Ref_To_Local'>attcollation</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10558"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10557"><span class='Ref_To_Local'>i_attcollation</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10633"><span class='Ref_To_Local'>attisdropped</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN10543"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Format properly if not first attr */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10559"><span class='Ref_To_Local'>actual_atts</span></a><span class='Operator'>++ &GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n\t"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN10633"><span class='Ref_To_Local'>attisdropped</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10629"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10630"><span class='Ref_To_Local'>atttypdefn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Add collation if not default for the column type */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10634"><span class='Ref_To_Local'>attcollation</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span><a name="LN10658"></a>                <a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>coll</span><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN10658"><span class='Ref_To_Local'>coll</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN653"><span class='Ref_to_Proto'>findCollationByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10634"><span class='Ref_To_Local'>attcollation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10658"><span class='Ref_To_Local'>coll</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* always schema-qualify, don't try to be smart */ 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" COLLATE %s."</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10658"><span class='Ref_To_Local'>coll</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10658"><span class='Ref_To_Local'>coll</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * This is a dropped attribute and we're in binary_upgrade mode. 
             * Insert a placeholder for it in the CREATE TYPE command, and set 
             * length and alignment with direct UPDATE to the catalogs 
             * afterwards. See similar code in dumpTableSchema(). 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s INTEGER /* dummy */"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10629"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* stash separately for insertion after the CREATE TYPE */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10545"><span class='Ref_To_Local'>dropped</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"\n-- For binary upgrade, recreate dropped column.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10545"><span class='Ref_To_Local'>dropped</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE pg_catalog.pg_attribute\n"</span> 
                              <span class='String'>"SET attlen = %s, "</span> 
                              <span class='String'>"attalign = '%s', attbyval = false\n"</span> 
                              <span class='String'>"WHERE attname = "</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10631"><span class='Ref_To_Local'>attlen</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10632"><span class='Ref_To_Local'>attalign</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10545"><span class='Ref_To_Local'>dropped</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10629"><span class='Ref_To_Local'>attname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10545"><span class='Ref_To_Local'>dropped</span></a><span class='Delimiter'>, </span><span class='String'>"\n  AND attrelid = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10545"><span class='Ref_To_Local'>dropped</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10550"><span class='Ref_To_Local'>qtypname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10545"><span class='Ref_To_Local'>dropped</span></a><span class='Delimiter'>, </span><span class='String'>"::pg_catalog.regclass;\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10545"><span class='Ref_To_Local'>dropped</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TYPE %s "</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN10550"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10545"><span class='Ref_To_Local'>dropped</span></a><span class='Delimiter'>, </span><span class='String'>"DROP ATTRIBUTE %s;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10629"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n);\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10545"><span class='Ref_To_Local'>dropped</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10546"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP TYPE %s."</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10546"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN10550"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10547"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10550"><span class='Ref_To_Local'>qtypname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10543"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10547"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"TYPE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10546"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
    <span class='Comment_Multi_Line'>/* Dump Type Comments and Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10547"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10547"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10550"><span class='Ref_To_Local'>qtypname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN171"><span class='Ref_to_Member'>typacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN172"><span class='Ref_to_Member'>rtypacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN173"><span class='Ref_to_Member'>inittypacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN174"><span class='Ref_to_Member'>initrtypacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10549"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10544"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10545"><span class='Ref_To_Local'>dropped</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10546"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10547"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10548"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump any per-column comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN172"><span class='Ref_to_Proto'>dumpCompositeTypeColComments</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10541"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpCompositeType &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpCompositeTypeColComments 
 *    writes out to fout the queries to recreate comments on the columns of 
 *    a user-defined stand-alone composite type 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN10762"></a><span class='Declare_Function'>dumpCompositeTypeColComments</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tyinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10764"></a>    <a href="pg_dump.c.html#LN64"><span class='Ref_to_Typedef'>CommentItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>comments</span><span class='Delimiter'>; 
</span><a name="LN10765"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ncomments</span><span class='Delimiter'>; 
</span><a name="LN10766"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN10767"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN10768"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>target</span><span class='Delimiter'>; 
</span><a name="LN10769"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>pgClassOid</span><span class='Delimiter'>; 
</span><a name="LN10770"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN10771"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN10772"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attname</span><span class='Delimiter'>; 
</span><a name="LN10773"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_attnum</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10767"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10767"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT c.tableoid, a.attname, a.attnum "</span> 
                      <span class='String'>"FROM pg_catalog.pg_class c, pg_catalog.pg_attribute a "</span> 
                      <span class='String'>"WHERE c.oid = '%u' AND c.oid = a.attrelid "</span> 
                      <span class='String'>"  AND NOT a.attisdropped "</span> 
                      <span class='String'>"ORDER BY a.attnum "</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN10762"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN176"><span class='Ref_to_Member'>typrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fetch column attnames */ 
</span>    <a href="pg_dump.c.html#LN10766"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10762"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10767"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10771"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10766"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10771"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>&LT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10766"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10767"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN10769"><span class='Ref_To_Local'>pgClassOid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10766"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10766"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tableoid"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Search for comments associated with type's pg_class OID */ 
</span>    <a href="pg_dump.c.html#LN10765"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN153"><span class='Ref_to_Proto'>findComments</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10762"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN10769"><span class='Ref_To_Local'>pgClassOid</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN10762"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN176"><span class='Ref_to_Member'>typrelid</span></a><span class='Delimiter'>, 
</span>                             <span class='Operator'>&</span><a href="pg_dump.c.html#LN10764"><span class='Ref_To_Local'>comments</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If no comments exist, we're done */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10765"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10766"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10767"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Build COMMENT ON statements */ 
</span>    <a href="pg_dump.c.html#LN10768"><span class='Ref_To_Local'>target</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10773"><span class='Ref_To_Local'>i_attnum</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10766"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attnum"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10772"><span class='Ref_To_Local'>i_attname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10766"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"attname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10765"><span class='Ref_To_Local'>ncomments</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN10819"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>attname</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN10819"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10770"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN10770"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN10771"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN10770"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10766"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10770"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10773"><span class='Ref_To_Local'>i_attnum</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><a href="pg_dump.c.html#LN10764"><span class='Ref_To_Local'>comments</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN69"><span class='Ref_to_Member'>objsubid</span></a><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pg_dump.c.html#LN10819"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10766"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10770"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10772"><span class='Ref_To_Local'>i_attname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10819"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>)</span>            <span class='Comment_Single_Line'>/* just in case we don't find it */ 
</span>        <span class='Delimiter'>{ 
</span><a name="LN10832"></a>            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>descr</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN10764"><span class='Ref_To_Local'>comments</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN66"><span class='Ref_to_Member'>descr</span></a><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10768"><span class='Ref_To_Local'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10768"><span class='Ref_To_Local'>target</span></a><span class='Delimiter'>, </span><span class='String'>"COLUMN %s."</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10762"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10768"><span class='Ref_To_Local'>target</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10819"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10767"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10767"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"COMMENT ON %s IS "</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10768"><span class='Ref_To_Local'>target</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10767"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10832"><span class='Ref_To_Local'>descr</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10762"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10767"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10762"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN10768"><span class='Ref_To_Local'>target</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN10762"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10762"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                         <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"COMMENT"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN54"><span class='Ref_to_EnumConst'>SECTION_NONE</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN10767"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10762"><span class='Ref_to_Parameter'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if attname &raquo; </span> 
 
        <a href="pg_dump.c.html#LN10764"><span class='Ref_To_Local'>comments</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN10765"><span class='Ref_To_Local'>ncomments</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while ncomments&GT;0 &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10766"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10767"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10768"><span class='Ref_To_Local'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpCompositeTypeColComments &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpShellType 
 *    writes out to fout the queries to create a shell type 
 * 
 * We dump a shell definition in advance of the I/O functions for the type. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN10870"></a><span class='Declare_Function'>dumpShellType</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN188"><span class='Ref_to_Typedef'>ShellTypeInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10872"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN10873"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN10872"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10873"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Note the lack of a DROP command for the shell type; any required DROP 
     * is driven off the base type entry, instead.  This interacts with 
     * _printTocEntry()'s use of the presence of a DROP command to decide 
     * whether an entry needs an ALTER OWNER command.  We don't want to alter 
     * the shell type's owner immediately on creation; that should happen only 
     * after it's filled in, otherwise the backend complains. 
     */ 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10872"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN254"><span class='Ref_to_Proto'>binary_upgrade_set_type_oids_by_type_oid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10873"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                           <a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN192"><span class='Ref_to_Member'>baseType</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10873"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE TYPE %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN190"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10870"><span class='Ref_to_Parameter'>stinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN192"><span class='Ref_to_Member'>baseType</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"SHELL TYPE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10873"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10873"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpShellType &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpProcLang 
 *        writes out to fout the queries to recreate a user-defined 
 *        procedural language 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN10917"></a><span class='Declare_Function'>dumpProcLang</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN438"><span class='Ref_to_Typedef'>ProcLangInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>plang</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN10919"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN10920"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>defqry</span><span class='Delimiter'>; 
</span><a name="LN10921"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delqry</span><span class='Delimiter'>; 
</span><a name="LN10922"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN10923"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>useParams</span><span class='Delimiter'>; 
</span><a name="LN10924"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qlanname</span><span class='Delimiter'>; 
</span><a name="LN10925"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>lanschema</span><span class='Delimiter'>; 
</span><a name="LN10926"></a>    <a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>funcInfo</span><span class='Delimiter'>; 
</span><a name="LN10927"></a>    <a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>inlineInfo</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN10928"></a>    <a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>validatorInfo</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN10919"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Try to find the support function(s).  It is not an error if we don't 
     * find them --- if the functions are in the pg_catalog schema, as is 
     * standard in 8.1 and up, then we won't have loaded them. (In this case 
     * we will emit a parameterless CREATE LANGUAGE command, which will 
     * require PL template knowledge in the backend to reload.) 
     */ 
</span> 
    <a href="pg_dump.c.html#LN10926"><span class='Ref_To_Local'>funcInfo</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN651"><span class='Ref_to_Proto'>findFuncByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN442"><span class='Ref_to_Member'>lanplcallfoid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10926"><span class='Ref_To_Local'>funcInfo</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="pg_dump.c.html#LN10926"><span class='Ref_To_Local'>funcInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN10926"><span class='Ref_To_Local'>funcInfo</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* treat not-dumped same as not-found */ 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN443"><span class='Ref_to_Member'>laninline</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN10927"><span class='Ref_To_Local'>inlineInfo</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN651"><span class='Ref_to_Proto'>findFuncByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN443"><span class='Ref_to_Member'>laninline</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10927"><span class='Ref_To_Local'>inlineInfo</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="pg_dump.c.html#LN10927"><span class='Ref_To_Local'>inlineInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN10927"><span class='Ref_To_Local'>inlineInfo</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN444"><span class='Ref_to_Member'>lanvalidator</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN10928"><span class='Ref_To_Local'>validatorInfo</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN651"><span class='Ref_to_Proto'>findFuncByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN444"><span class='Ref_to_Member'>lanvalidator</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10928"><span class='Ref_To_Local'>validatorInfo</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="pg_dump.c.html#LN10928"><span class='Ref_To_Local'>validatorInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN10928"><span class='Ref_To_Local'>validatorInfo</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the functions are dumpable then emit a traditional CREATE LANGUAGE 
     * with parameters.  Otherwise, we'll write a parameterless command, which 
     * will rely on data from pg_pltemplate. 
     */ 
</span>    <a href="pg_dump.c.html#LN10923"><span class='Ref_To_Local'>useParams</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10926"><span class='Ref_To_Local'>funcInfo</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& 
</span>                 <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10927"><span class='Ref_To_Local'>inlineInfo</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>|| !</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN443"><span class='Ref_to_Member'>laninline</span></a><span class='Parentheses'>))</span> <span class='Operator'>&& 
</span>                 <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10928"><span class='Ref_To_Local'>validatorInfo</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>|| !</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN444"><span class='Ref_to_Member'>lanvalidator</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10921"><span class='Ref_To_Local'>delqry</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN10922"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN10924"><span class='Ref_To_Local'>qlanname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If dumping a HANDLER clause, treat the language as being in the handler 
     * function's schema; this avoids cluttering the HANDLER clause. Otherwise 
     * it doesn't really have a schema. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10923"><span class='Ref_To_Local'>useParams</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN10925"><span class='Ref_To_Local'>lanschema</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN10926"><span class='Ref_To_Local'>funcInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN10925"><span class='Ref_To_Local'>lanschema</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10921"><span class='Ref_To_Local'>delqry</span></a><span class='Delimiter'>, </span><span class='String'>"DROP PROCEDURAL LANGUAGE %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN10924"><span class='Ref_To_Local'>qlanname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10923"><span class='Ref_To_Local'>useParams</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE %sPROCEDURAL LANGUAGE %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN441"><span class='Ref_to_Member'>lanpltrusted</span></a> <span class='Operator'>? </span><span class='String'>"TRUSTED "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10924"><span class='Ref_To_Local'>qlanname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>" HANDLER %s"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10926"><span class='Ref_To_Local'>funcInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN443"><span class='Ref_to_Member'>laninline</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>" INLINE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Cope with possibility that inline is in different schema */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10927"><span class='Ref_To_Local'>inlineInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN10926"><span class='Ref_To_Local'>funcInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, 
</span>                               <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10927"><span class='Ref_To_Local'>inlineInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10927"><span class='Ref_To_Local'>inlineInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN444"><span class='Ref_to_Member'>lanvalidator</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>" VALIDATOR "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Cope with possibility that validator is in different schema */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10928"><span class='Ref_To_Local'>validatorInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN10926"><span class='Ref_To_Local'>funcInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, 
</span>                            <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10928"><span class='Ref_To_Local'>validatorInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10928"><span class='Ref_To_Local'>validatorInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if useParams &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * If not dumping parameters, then use CREATE OR REPLACE so that the 
         * command will not fail if the language is preinstalled in the target 
         * database.  We restrict the use of REPLACE to this case so as to 
         * eliminate the risk of replacing a language with incompatible 
         * parameter settings: this command will only succeed at all if there 
         * is a pg_pltemplate entry, and if there is one, the existing entry 
         * must match it too. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE OR REPLACE PROCEDURAL LANGUAGE %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN10924"><span class='Ref_To_Local'>qlanname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10922"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"LANGUAGE %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10924"><span class='Ref_To_Local'>qlanname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10919"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10922"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10925"><span class='Ref_To_Local'>lanschema</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN449"><span class='Ref_to_Member'>lanowner</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"PROCEDURAL LANGUAGE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10921"><span class='Ref_To_Local'>delqry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Proc Lang Comments and Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10922"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN10925"><span class='Ref_To_Local'>lanschema</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN449"><span class='Ref_to_Member'>lanowner</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10922"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10925"><span class='Ref_To_Local'>lanschema</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN449"><span class='Ref_to_Member'>lanowner</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN441"><span class='Ref_to_Member'>lanpltrusted</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><span class='String'>"LANGUAGE"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10924"><span class='Ref_To_Local'>qlanname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN440"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10925"><span class='Ref_To_Local'>lanschema</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN449"><span class='Ref_to_Member'>lanowner</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN445"><span class='Ref_to_Member'>lanacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN446"><span class='Ref_to_Member'>rlanacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN447"><span class='Ref_to_Member'>initlanacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN10917"><span class='Ref_to_Parameter'>plang</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN448"><span class='Ref_to_Member'>initrlanacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10924"><span class='Ref_To_Local'>qlanname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10920"><span class='Ref_To_Local'>defqry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10921"><span class='Ref_To_Local'>delqry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN10922"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpProcLang &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * format_function_arguments: generate function name and argument list 
 * 
 * This is used when we can rely on pg_get_function_arguments to format 
 * the argument list.  Note, however, that pg_get_function_arguments 
 * does not special-case zero-argument aggregates. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN11077"></a><span class='Declare_Function'>format_function_arguments</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>finfo</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>funcargs</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>is_agg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN11079"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN43"><span class='Ref_to_Struct'>PQExpBufferData</span></a> <span class='Declare_Local'>fn</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN87"><span class='Ref_to_Func'>initPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11079"><span class='Ref_To_Local'>fn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11079"><span class='Ref_To_Local'>fn</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11077"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11077"><span class='Ref_to_Parameter'>is_agg</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN11077"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11079"><span class='Ref_To_Local'>fn</span></a><span class='Delimiter'>, </span><span class='String'>"(*)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11079"><span class='Ref_To_Local'>fn</span></a><span class='Delimiter'>, </span><span class='String'>"(%s)"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11077"><span class='Ref_to_Parameter'>funcargs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="pg_dump.c.html#LN11079"><span class='Ref_To_Local'>fn</span></a><span class='Operator'>.</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * format_function_arguments_old: generate function name and argument list 
 * 
 * The argument type names are qualified if needed.  The function name 
 * is never qualified. 
 * 
 * This is used only with pre-8.4 servers, so we aren't expecting to see 
 * VARIADIC or TABLE arguments, nor are there any defaults for arguments. 
 * 
 * Any or all of allargtypes, argmodes, argnames may be NULL. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN11102"></a><span class='Declare_Function'>format_function_arguments_old</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN11103"></a>                              <a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>finfo</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nallargs</span><span class='Delimiter'>, 
</span><a name="LN11104"></a>                              <span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>allargtypes</span><span class='Delimiter'>, 
</span><a name="LN11105"></a>                              <span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>argmodes</span><span class='Delimiter'>, 
</span><a name="LN11106"></a>                              <span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>argnames</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN11108"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN43"><span class='Ref_to_Struct'>PQExpBufferData</span></a> <span class='Declare_Local'>fn</span><span class='Delimiter'>; 
</span><a name="LN11109"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN87"><span class='Ref_to_Func'>initPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11108"><span class='Ref_To_Local'>fn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11108"><span class='Ref_To_Local'>fn</span></a><span class='Delimiter'>, </span><span class='String'>"%s("</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11103"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11109"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN11109"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN11103"><span class='Ref_to_Parameter'>nallargs</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN11109"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN11115"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>typid</span><span class='Delimiter'>; 
</span><a name="LN11116"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typname</span><span class='Delimiter'>; 
</span><a name="LN11117"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>argmode</span><span class='Delimiter'>; 
</span><a name="LN11118"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>argname</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN11115"><span class='Ref_To_Local'>typid</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11104"><span class='Ref_to_Parameter'>allargtypes</span></a> <span class='Operator'>? </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11104"><span class='Ref_to_Parameter'>allargtypes</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN11109"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>: </span><a href="pg_dump.c.html#LN11103"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN201"><span class='Ref_to_Member'>argtypes</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN11109"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]; 
</span>        <a href="pg_dump.c.html#LN11116"><span class='Ref_To_Local'>typname</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN243"><span class='Ref_to_Proto'>getFormattedTypeName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11102"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11115"><span class='Ref_To_Local'>typid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN83"><span class='Ref_to_EnumConst'>zeroAsOpaque</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11105"><span class='Ref_to_Parameter'>argmodes</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11105"><span class='Ref_to_Parameter'>argmodes</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN11109"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>][</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <a href="../../include/catalog/pg_proc.h.html#LN5500"><span class='Ref_to_Const'>PROARGMODE_IN</span></a><span class='Operator'>: 
</span>                    <a href="pg_dump.c.html#LN11117"><span class='Ref_To_Local'>argmode</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/catalog/pg_proc.h.html#LN5501"><span class='Ref_to_Const'>PROARGMODE_OUT</span></a><span class='Operator'>: 
</span>                    <a href="pg_dump.c.html#LN11117"><span class='Ref_To_Local'>argmode</span></a> <span class='Operator'>= </span><span class='String'>"OUT "</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <a href="../../include/catalog/pg_proc.h.html#LN5502"><span class='Ref_to_Const'>PROARGMODE_INOUT</span></a><span class='Operator'>: 
</span>                    <a href="pg_dump.c.html#LN11117"><span class='Ref_To_Local'>argmode</span></a> <span class='Operator'>= </span><span class='String'>"INOUT "</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: bogus value in proargmodes array\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="pg_dump.c.html#LN11117"><span class='Ref_To_Local'>argmode</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN11117"><span class='Ref_To_Local'>argmode</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN11118"><span class='Ref_To_Local'>argname</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11106"><span class='Ref_to_Parameter'>argnames</span></a> <span class='Operator'>? </span><a href="pg_dump.c.html#LN11106"><span class='Ref_to_Parameter'>argnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN11109"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>: </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11118"><span class='Ref_To_Local'>argname</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN11118"><span class='Ref_To_Local'>argname</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN11118"><span class='Ref_To_Local'>argname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11108"><span class='Ref_To_Local'>fn</span></a><span class='Delimiter'>, </span><span class='String'>"%s%s%s%s%s"</span><span class='Delimiter'>, 
</span>                          <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11109"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>", "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11117"><span class='Ref_To_Local'>argmode</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11118"><span class='Ref_To_Local'>argname</span></a> <span class='Operator'>? </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11118"><span class='Ref_To_Local'>argname</span></a><span class='Parentheses'>) </span><span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11118"><span class='Ref_To_Local'>argname</span></a> <span class='Operator'>? </span><span class='String'>" "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11116"><span class='Ref_To_Local'>typname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11116"><span class='Ref_To_Local'>typname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;nallargs;j++ &raquo; </span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11108"><span class='Ref_To_Local'>fn</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="pg_dump.c.html#LN11108"><span class='Ref_To_Local'>fn</span></a><span class='Operator'>.</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end format_function_arguments_old &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * format_function_signature: generate function name and argument list 
 * 
 * This is like format_function_arguments_old except that only a minimal 
 * list of input argument types is generated; this is sufficient to 
 * reference the function, but not to define it. 
 * 
 * If honor_quotes is false then the function name is never quoted. 
 * This is appropriate for use in TOC tags, but not in SQL commands. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN11172"></a><span class='Declare_Function'>format_function_signature</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>finfo</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>honor_quotes</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN11174"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN43"><span class='Ref_to_Struct'>PQExpBufferData</span></a> <span class='Declare_Local'>fn</span><span class='Delimiter'>; 
</span><a name="LN11175"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN87"><span class='Ref_to_Func'>initPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11174"><span class='Ref_To_Local'>fn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11172"><span class='Ref_to_Parameter'>honor_quotes</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11174"><span class='Ref_To_Local'>fn</span></a><span class='Delimiter'>, </span><span class='String'>"%s("</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11172"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11174"><span class='Ref_To_Local'>fn</span></a><span class='Delimiter'>, </span><span class='String'>"%s("</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11172"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11175"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN11175"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN11172"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN11175"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN11184"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typname</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11175"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11174"><span class='Ref_To_Local'>fn</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN11184"><span class='Ref_To_Local'>typname</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN243"><span class='Ref_to_Proto'>getFormattedTypeName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11172"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11172"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN201"><span class='Ref_to_Member'>argtypes</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN11175"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], 
</span>                                       <a href="pg_dump.c.html#LN83"><span class='Ref_to_EnumConst'>zeroAsOpaque</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11174"><span class='Ref_To_Local'>fn</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11184"><span class='Ref_To_Local'>typname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11184"><span class='Ref_To_Local'>typname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11174"><span class='Ref_To_Local'>fn</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="pg_dump.c.html#LN11174"><span class='Ref_To_Local'>fn</span></a><span class='Operator'>.</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end format_function_signature &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * dumpFunc: 
 *    dump out one function 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN11204"></a><span class='Declare_Function'>dumpFunc</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>finfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN11206"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN11207"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN11208"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN11209"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delqry</span><span class='Delimiter'>; 
</span><a name="LN11210"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN11211"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>asPart</span><span class='Delimiter'>; 
</span><a name="LN11212"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN11213"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>funcsig</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* identity signature */ 
</span><a name="LN11214"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>funcfullsig</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* full signature */ 
</span><a name="LN11215"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>funcsig_tag</span><span class='Delimiter'>; 
</span><a name="LN11216"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>proretset</span><span class='Delimiter'>; 
</span><a name="LN11217"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>prosrc</span><span class='Delimiter'>; 
</span><a name="LN11218"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>probin</span><span class='Delimiter'>; 
</span><a name="LN11219"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>funcargs</span><span class='Delimiter'>; 
</span><a name="LN11220"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>funciargs</span><span class='Delimiter'>; 
</span><a name="LN11221"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>funcresult</span><span class='Delimiter'>; 
</span><a name="LN11222"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>proallargtypes</span><span class='Delimiter'>; 
</span><a name="LN11223"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>proargmodes</span><span class='Delimiter'>; 
</span><a name="LN11224"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>proargnames</span><span class='Delimiter'>; 
</span><a name="LN11225"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>protrftypes</span><span class='Delimiter'>; 
</span><a name="LN11226"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>proiswindow</span><span class='Delimiter'>; 
</span><a name="LN11227"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>provolatile</span><span class='Delimiter'>; 
</span><a name="LN11228"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>proisstrict</span><span class='Delimiter'>; 
</span><a name="LN11229"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>prosecdef</span><span class='Delimiter'>; 
</span><a name="LN11230"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>proleakproof</span><span class='Delimiter'>; 
</span><a name="LN11231"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>proconfig</span><span class='Delimiter'>; 
</span><a name="LN11232"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>procost</span><span class='Delimiter'>; 
</span><a name="LN11233"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>prorows</span><span class='Delimiter'>; 
</span><a name="LN11234"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>proparallel</span><span class='Delimiter'>; 
</span><a name="LN11235"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>lanname</span><span class='Delimiter'>; 
</span><a name="LN11236"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>rettypename</span><span class='Delimiter'>; 
</span><a name="LN11237"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nallargs</span><span class='Delimiter'>; 
</span><a name="LN11238"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>allargtypes</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN11239"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>argmodes</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN11240"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>argnames</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN11241"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>configitems</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN11242"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nconfigitems</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN11243"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN11206"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11207"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11209"><span class='Ref_To_Local'>delqry</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11210"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11211"><span class='Ref_To_Local'>asPart</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set proper schema search path so type references list correctly */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fetch function-specific details */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * proparallel was added in 9.6 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11207"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT proretset, prosrc, probin, "</span> 
                    <span class='String'>"pg_catalog.pg_get_function_arguments(oid) AS funcargs, "</span> 
          <span class='String'>"pg_catalog.pg_get_function_identity_arguments(oid) AS funciargs, "</span> 
                     <span class='String'>"pg_catalog.pg_get_function_result(oid) AS funcresult, "</span> 
                          <span class='String'>"array_to_string(protrftypes, ' ') AS protrftypes, "</span> 
                          <span class='String'>"proiswindow, provolatile, proisstrict, prosecdef, "</span> 
                          <span class='String'>"proleakproof, proconfig, procost, prorows, "</span> 
                          <span class='String'>"proparallel, "</span> 
                          <span class='String'>"(SELECT lanname FROM pg_catalog.pg_language WHERE oid = prolang) AS lanname "</span> 
                          <span class='String'>"FROM pg_catalog.pg_proc "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90500</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * protrftypes was added in 9.5 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11207"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT proretset, prosrc, probin, "</span> 
                    <span class='String'>"pg_catalog.pg_get_function_arguments(oid) AS funcargs, "</span> 
          <span class='String'>"pg_catalog.pg_get_function_identity_arguments(oid) AS funciargs, "</span> 
                     <span class='String'>"pg_catalog.pg_get_function_result(oid) AS funcresult, "</span> 
                          <span class='String'>"array_to_string(protrftypes, ' ') AS protrftypes, "</span> 
                          <span class='String'>"proiswindow, provolatile, proisstrict, prosecdef, "</span> 
                          <span class='String'>"proleakproof, proconfig, procost, prorows, "</span> 
                          <span class='String'>"(SELECT lanname FROM pg_catalog.pg_language WHERE oid = prolang) AS lanname "</span> 
                          <span class='String'>"FROM pg_catalog.pg_proc "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90200</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * proleakproof was added in 9.2 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11207"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT proretset, prosrc, probin, "</span> 
                    <span class='String'>"pg_catalog.pg_get_function_arguments(oid) AS funcargs, "</span> 
          <span class='String'>"pg_catalog.pg_get_function_identity_arguments(oid) AS funciargs, "</span> 
                     <span class='String'>"pg_catalog.pg_get_function_result(oid) AS funcresult, "</span> 
                          <span class='String'>"proiswindow, provolatile, proisstrict, prosecdef, "</span> 
                          <span class='String'>"proleakproof, proconfig, procost, prorows, "</span> 
                          <span class='String'>"(SELECT lanname FROM pg_catalog.pg_language WHERE oid = prolang) AS lanname "</span> 
                          <span class='String'>"FROM pg_catalog.pg_proc "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * In 8.4 and up we rely on pg_get_function_arguments and 
         * pg_get_function_result instead of examining proallargtypes etc. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11207"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT proretset, prosrc, probin, "</span> 
                    <span class='String'>"pg_catalog.pg_get_function_arguments(oid) AS funcargs, "</span> 
          <span class='String'>"pg_catalog.pg_get_function_identity_arguments(oid) AS funciargs, "</span> 
                     <span class='String'>"pg_catalog.pg_get_function_result(oid) AS funcresult, "</span> 
                          <span class='String'>"proiswindow, provolatile, proisstrict, prosecdef, "</span> 
                          <span class='String'>"false AS proleakproof, "</span> 
                          <span class='String'>" proconfig, procost, prorows, "</span> 
                          <span class='String'>"(SELECT lanname FROM pg_catalog.pg_language WHERE oid = prolang) AS lanname "</span> 
                          <span class='String'>"FROM pg_catalog.pg_proc "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11207"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT proretset, prosrc, probin, "</span> 
                          <span class='String'>"proallargtypes, proargmodes, proargnames, "</span> 
                          <span class='String'>"false AS proiswindow, "</span> 
                          <span class='String'>"provolatile, proisstrict, prosecdef, "</span> 
                          <span class='String'>"false AS proleakproof, "</span> 
                          <span class='String'>"proconfig, procost, prorows, "</span> 
                          <span class='String'>"(SELECT lanname FROM pg_catalog.pg_language WHERE oid = prolang) AS lanname "</span> 
                          <span class='String'>"FROM pg_catalog.pg_proc "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11207"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT proretset, prosrc, probin, "</span> 
                          <span class='String'>"proallargtypes, proargmodes, proargnames, "</span> 
                          <span class='String'>"false AS proiswindow, "</span> 
                          <span class='String'>"provolatile, proisstrict, prosecdef, "</span> 
                          <span class='String'>"false AS proleakproof, "</span> 
                          <span class='String'>"null AS proconfig, 0 AS procost, 0 AS prorows, "</span> 
                          <span class='String'>"(SELECT lanname FROM pg_catalog.pg_language WHERE oid = prolang) AS lanname "</span> 
                          <span class='String'>"FROM pg_catalog.pg_proc "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11207"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT proretset, prosrc, probin, "</span> 
                          <span class='String'>"null AS proallargtypes, "</span> 
                          <span class='String'>"null AS proargmodes, "</span> 
                          <span class='String'>"proargnames, "</span> 
                          <span class='String'>"false AS proiswindow, "</span> 
                          <span class='String'>"provolatile, proisstrict, prosecdef, "</span> 
                          <span class='String'>"false AS proleakproof, "</span> 
                          <span class='String'>"null AS proconfig, 0 AS procost, 0 AS prorows, "</span> 
                          <span class='String'>"(SELECT lanname FROM pg_catalog.pg_language WHERE oid = prolang) AS lanname "</span> 
                          <span class='String'>"FROM pg_catalog.pg_proc "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11207"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11216"><span class='Ref_To_Local'>proretset</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proretset"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11217"><span class='Ref_To_Local'>prosrc</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prosrc"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11218"><span class='Ref_To_Local'>probin</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"probin"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN11219"><span class='Ref_To_Local'>funcargs</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"funcargs"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN11220"><span class='Ref_To_Local'>funciargs</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"funciargs"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN11221"><span class='Ref_To_Local'>funcresult</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"funcresult"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN11222"><span class='Ref_To_Local'>proallargtypes</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11223"><span class='Ref_To_Local'>proargmodes</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11224"><span class='Ref_To_Local'>proargnames</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN11222"><span class='Ref_To_Local'>proallargtypes</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proallargtypes"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN11223"><span class='Ref_To_Local'>proargmodes</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proargmodes"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN11224"><span class='Ref_To_Local'>proargnames</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proargnames"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN11219"><span class='Ref_To_Local'>funcargs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11220"><span class='Ref_To_Local'>funciargs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11221"><span class='Ref_To_Local'>funcresult</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"protrftypes"</span><span class='Parentheses'>) </span><span class='Operator'>!= -</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN11225"><span class='Ref_To_Local'>protrftypes</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"protrftypes"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN11225"><span class='Ref_To_Local'>protrftypes</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11226"><span class='Ref_To_Local'>proiswindow</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proiswindow"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11227"><span class='Ref_To_Local'>provolatile</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"provolatile"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11228"><span class='Ref_To_Local'>proisstrict</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proisstrict"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11229"><span class='Ref_To_Local'>prosecdef</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prosecdef"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11230"><span class='Ref_To_Local'>proleakproof</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proleakproof"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11231"><span class='Ref_To_Local'>proconfig</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proconfig"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11232"><span class='Ref_To_Local'>procost</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"procost"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11233"><span class='Ref_To_Local'>prorows</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"prorows"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proparallel"</span><span class='Parentheses'>) </span><span class='Operator'>!= -</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN11234"><span class='Ref_To_Local'>proparallel</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proparallel"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN11234"><span class='Ref_To_Local'>proparallel</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11235"><span class='Ref_To_Local'>lanname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"lanname"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * See backend/commands/functioncmds.c for details of how the 'AS' clause 
     * is used.  In 8.4 and up, an unused probin is NULL (here ""); previous 
     * versions would set it to "-".  There are no known cases in which prosrc 
     * is unused, so the tests below for "-" are probably useless. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11218"><span class='Ref_To_Local'>probin</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'\0'</span> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11218"><span class='Ref_To_Local'>probin</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11211"><span class='Ref_To_Local'>asPart</span></a><span class='Delimiter'>, </span><span class='String'>"AS "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11211"><span class='Ref_To_Local'>asPart</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11218"><span class='Ref_To_Local'>probin</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11217"><span class='Ref_To_Local'>prosrc</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11211"><span class='Ref_To_Local'>asPart</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * where we have bin, use dollar quoting if allowed and src 
             * contains quote or backslash; else use regular quoting. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11206"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN144"><span class='Ref_to_Member'>disable_dollar_quoting</span></a> <span class='Operator'>|| 
</span>              <span class='Parentheses'>(</span>strchr<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11217"><span class='Ref_To_Local'>prosrc</span></a><span class='Delimiter'>, </span><span class='String'>'\''</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span>strchr<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11217"><span class='Ref_To_Local'>prosrc</span></a><span class='Delimiter'>, </span><span class='String'>'\\'</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>))</span> 
                <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11211"><span class='Ref_To_Local'>asPart</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11217"><span class='Ref_To_Local'>prosrc</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../include/fe_utils/string_utils.h.html#LN37"><span class='Ref_to_Proto'>appendStringLiteralDQ</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11211"><span class='Ref_To_Local'>asPart</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11217"><span class='Ref_To_Local'>prosrc</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11217"><span class='Ref_To_Local'>prosrc</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11211"><span class='Ref_To_Local'>asPart</span></a><span class='Delimiter'>, </span><span class='String'>"AS "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* with no bin, dollar quote src unconditionally if allowed */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11206"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN144"><span class='Ref_to_Member'>disable_dollar_quoting</span></a><span class='Parentheses'>) 
</span>                <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11211"><span class='Ref_To_Local'>asPart</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11217"><span class='Ref_To_Local'>prosrc</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../include/fe_utils/string_utils.h.html#LN37"><span class='Ref_to_Proto'>appendStringLiteralDQ</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11211"><span class='Ref_To_Local'>asPart</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11217"><span class='Ref_To_Local'>prosrc</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN11237"><span class='Ref_To_Local'>nallargs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* unless we learn different from allargs */ 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11222"><span class='Ref_To_Local'>proallargtypes</span></a> <span class='Operator'>&& *</span><a href="pg_dump.c.html#LN11222"><span class='Ref_To_Local'>proallargtypes</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN11458"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>nitems</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/fe_utils/string_utils.h.html#LN48"><span class='Ref_to_Proto'>parsePGArray</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11222"><span class='Ref_To_Local'>proallargtypes</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11238"><span class='Ref_To_Local'>allargtypes</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11458"><span class='Ref_To_Local'>nitems</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN11458"><span class='Ref_To_Local'>nitems</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: could not parse proallargtypes array\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11238"><span class='Ref_To_Local'>allargtypes</span></a><span class='Parentheses'>) 
</span>                <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11238"><span class='Ref_To_Local'>allargtypes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN11238"><span class='Ref_To_Local'>allargtypes</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="pg_dump.c.html#LN11237"><span class='Ref_To_Local'>nallargs</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11458"><span class='Ref_To_Local'>nitems</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11223"><span class='Ref_To_Local'>proargmodes</span></a> <span class='Operator'>&& *</span><a href="pg_dump.c.html#LN11223"><span class='Ref_To_Local'>proargmodes</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN11474"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>nitems</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/fe_utils/string_utils.h.html#LN48"><span class='Ref_to_Proto'>parsePGArray</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11223"><span class='Ref_To_Local'>proargmodes</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11239"><span class='Ref_To_Local'>argmodes</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11474"><span class='Ref_To_Local'>nitems</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN11474"><span class='Ref_To_Local'>nitems</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN11237"><span class='Ref_To_Local'>nallargs</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: could not parse proargmodes array\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11239"><span class='Ref_To_Local'>argmodes</span></a><span class='Parentheses'>) 
</span>                <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11239"><span class='Ref_To_Local'>argmodes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN11239"><span class='Ref_To_Local'>argmodes</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11224"><span class='Ref_To_Local'>proargnames</span></a> <span class='Operator'>&& *</span><a href="pg_dump.c.html#LN11224"><span class='Ref_To_Local'>proargnames</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN11488"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>nitems</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/fe_utils/string_utils.h.html#LN48"><span class='Ref_to_Proto'>parsePGArray</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11224"><span class='Ref_To_Local'>proargnames</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11240"><span class='Ref_To_Local'>argnames</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11488"><span class='Ref_To_Local'>nitems</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN11488"><span class='Ref_To_Local'>nitems</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN11237"><span class='Ref_To_Local'>nallargs</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: could not parse proargnames array\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11240"><span class='Ref_To_Local'>argnames</span></a><span class='Parentheses'>) 
</span>                <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11240"><span class='Ref_To_Local'>argnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN11240"><span class='Ref_To_Local'>argnames</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11231"><span class='Ref_To_Local'>proconfig</span></a> <span class='Operator'>&& *</span><a href="pg_dump.c.html#LN11231"><span class='Ref_To_Local'>proconfig</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/fe_utils/string_utils.h.html#LN48"><span class='Ref_to_Proto'>parsePGArray</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11231"><span class='Ref_To_Local'>proconfig</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11241"><span class='Ref_To_Local'>configitems</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11242"><span class='Ref_To_Local'>nconfigitems</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: could not parse proconfig array\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11241"><span class='Ref_To_Local'>configitems</span></a><span class='Parentheses'>) 
</span>                <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11241"><span class='Ref_To_Local'>configitems</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN11241"><span class='Ref_To_Local'>configitems</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN11242"><span class='Ref_To_Local'>nconfigitems</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11219"><span class='Ref_To_Local'>funcargs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 8.4 or later; we rely on server-side code for most of the work */ 
</span>        <a href="pg_dump.c.html#LN11214"><span class='Ref_To_Local'>funcfullsig</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN228"><span class='Ref_to_Proto'>format_function_arguments</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11219"><span class='Ref_To_Local'>funcargs</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN11213"><span class='Ref_To_Local'>funcsig</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN228"><span class='Ref_to_Proto'>format_function_arguments</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11220"><span class='Ref_To_Local'>funciargs</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Comment_Multi_Line'>/* pre-8.4, do it ourselves */ 
</span>        <a href="pg_dump.c.html#LN11213"><span class='Ref_To_Local'>funcsig</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN230"><span class='Ref_to_Proto'>format_function_arguments_old</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                                                <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11237"><span class='Ref_To_Local'>nallargs</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11238"><span class='Ref_To_Local'>allargtypes</span></a><span class='Delimiter'>, 
</span>                                                <a href="pg_dump.c.html#LN11239"><span class='Ref_To_Local'>argmodes</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11240"><span class='Ref_To_Local'>argnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11215"><span class='Ref_To_Local'>funcsig_tag</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN235"><span class='Ref_to_Proto'>format_function_signature</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11209"><span class='Ref_To_Local'>delqry</span></a><span class='Delimiter'>, </span><span class='String'>"DROP FUNCTION %s.%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN11213"><span class='Ref_To_Local'>funcsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE FUNCTION %s "</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11214"><span class='Ref_To_Local'>funcfullsig</span></a> <span class='Operator'>? </span><a href="pg_dump.c.html#LN11214"><span class='Ref_To_Local'>funcfullsig</span></a> <span class='Operator'>: 
</span>                      <a href="pg_dump.c.html#LN11213"><span class='Ref_To_Local'>funcsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11221"><span class='Ref_To_Local'>funcresult</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"RETURNS %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11221"><span class='Ref_To_Local'>funcresult</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN11236"><span class='Ref_To_Local'>rettypename</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN243"><span class='Ref_to_Proto'>getFormattedTypeName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN202"><span class='Ref_to_Member'>prorettype</span></a><span class='Delimiter'>, 
</span>                                           <a href="pg_dump.c.html#LN83"><span class='Ref_to_EnumConst'>zeroAsOpaque</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"RETURNS %s%s"</span><span class='Delimiter'>, 
</span>                          <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11216"><span class='Ref_To_Local'>proretset</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"SETOF "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11236"><span class='Ref_To_Local'>rettypename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11236"><span class='Ref_To_Local'>rettypename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n    LANGUAGE %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11235"><span class='Ref_To_Local'>lanname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11225"><span class='Ref_To_Local'>protrftypes</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11225"><span class='Ref_To_Local'>protrftypes</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN11551"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>typeids</span> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><a href="../../include/pg_config_manual.h.html#LN36"><span class='Ref_to_Const'>FUNC_MAX_ARGS</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN11552"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" TRANSFORM "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.h.html#LN660"><span class='Ref_to_Proto'>parseOidArray</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11225"><span class='Ref_To_Local'>protrftypes</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11551"><span class='Ref_To_Local'>typeids</span></a><span class='Delimiter'>, </span><a href="../../include/pg_config_manual.h.html#LN36"><span class='Ref_to_Const'>FUNC_MAX_ARGS</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11552"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN11551"><span class='Ref_To_Local'>typeids</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN11552"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; </span><a href="pg_dump.c.html#LN11552"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11552"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"FOR TYPE %s"</span><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN243"><span class='Ref_to_Proto'>getFormattedTypeName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11551"><span class='Ref_To_Local'>typeids</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN11552"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><a href="pg_dump.c.html#LN86"><span class='Ref_to_EnumConst'>zeroAsNone</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11226"><span class='Ref_To_Local'>proiswindow</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" WINDOW"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11227"><span class='Ref_To_Local'>provolatile</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/catalog/pg_proc.h.html#LN5484"><span class='Ref_to_Const'>PROVOLATILE_VOLATILE</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11227"><span class='Ref_To_Local'>provolatile</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../include/catalog/pg_proc.h.html#LN5482"><span class='Ref_to_Const'>PROVOLATILE_IMMUTABLE</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" IMMUTABLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11227"><span class='Ref_To_Local'>provolatile</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../include/catalog/pg_proc.h.html#LN5483"><span class='Ref_to_Const'>PROVOLATILE_STABLE</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" STABLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11227"><span class='Ref_To_Local'>provolatile</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/catalog/pg_proc.h.html#LN5484"><span class='Ref_to_Const'>PROVOLATILE_VOLATILE</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"unrecognized provolatile value for function \"%s\"\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11228"><span class='Ref_To_Local'>proisstrict</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" STRICT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11229"><span class='Ref_To_Local'>prosecdef</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" SECURITY DEFINER"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11230"><span class='Ref_To_Local'>proleakproof</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" LEAKPROOF"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * COST and ROWS are emitted only if present and not default, so as not to 
     * break backwards-compatibility of the dump without need.  Keep this code 
     * in sync with the defaults in functioncmds.c. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11232"><span class='Ref_To_Local'>procost</span></a><span class='Delimiter'>, </span><span class='String'>"0"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11235"><span class='Ref_To_Local'>lanname</span></a><span class='Delimiter'>, </span><span class='String'>"internal"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11235"><span class='Ref_To_Local'>lanname</span></a><span class='Delimiter'>, </span><span class='String'>"c"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* default cost is 1 */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11232"><span class='Ref_To_Local'>procost</span></a><span class='Delimiter'>, </span><span class='String'>"1"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" COST %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11232"><span class='Ref_To_Local'>procost</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* default cost is 100 */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11232"><span class='Ref_To_Local'>procost</span></a><span class='Delimiter'>, </span><span class='String'>"100"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" COST %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11232"><span class='Ref_To_Local'>procost</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11216"><span class='Ref_To_Local'>proretset</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span> <span class='Operator'>&& 
</span>        strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11233"><span class='Ref_To_Local'>prorows</span></a><span class='Delimiter'>, </span><span class='String'>"0"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11233"><span class='Ref_To_Local'>prorows</span></a><span class='Delimiter'>, </span><span class='String'>"1000"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" ROWS %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11233"><span class='Ref_To_Local'>prorows</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11234"><span class='Ref_To_Local'>proparallel</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="pg_dump.c.html#LN11234"><span class='Ref_To_Local'>proparallel</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/catalog/pg_proc.h.html#LN5493"><span class='Ref_to_Const'>PROPARALLEL_UNSAFE</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11234"><span class='Ref_To_Local'>proparallel</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../include/catalog/pg_proc.h.html#LN5491"><span class='Ref_to_Const'>PROPARALLEL_SAFE</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" PARALLEL SAFE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11234"><span class='Ref_To_Local'>proparallel</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../include/catalog/pg_proc.h.html#LN5492"><span class='Ref_to_Const'>PROPARALLEL_RESTRICTED</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" PARALLEL RESTRICTED"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11234"><span class='Ref_To_Local'>proparallel</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/catalog/pg_proc.h.html#LN5493"><span class='Ref_to_Const'>PROPARALLEL_UNSAFE</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"unrecognized proparallel value for function \"%s\"\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11243"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN11243"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN11242"><span class='Ref_To_Local'>nconfigitems</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN11243"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* we feel free to scribble on configitems[] here */ 
</span><a name="LN11626"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>configitem</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11241"><span class='Ref_To_Local'>configitems</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN11243"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span><a name="LN11627"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>pos</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN11627"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11626"><span class='Ref_To_Local'>configitem</span></a><span class='Delimiter'>, </span><span class='String'>'='</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11627"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN11627"><span class='Ref_To_Local'>pos</span></a><span class='Operator'>++ = </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n    SET %s TO "</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11626"><span class='Ref_To_Local'>configitem</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Some GUC variable names are 'LIST' type and hence must not be 
         * quoted. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11626"><span class='Ref_To_Local'>configitem</span></a><span class='Delimiter'>, </span><span class='String'>"DateStyle"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> 
            <span class='Operator'>|| </span><a href="../../port/pgstrcasecmp.c.html#LN34"><span class='Ref_to_Func'>pg_strcasecmp</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11626"><span class='Ref_To_Local'>configitem</span></a><span class='Delimiter'>, </span><span class='String'>"search_path"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11627"><span class='Ref_To_Local'>pos</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11627"><span class='Ref_To_Local'>pos</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;nconfigitems;i+... &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n    %s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11211"><span class='Ref_To_Local'>asPart</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11210"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"FUNCTION %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11213"><span class='Ref_To_Local'>funcsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11206"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11210"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11215"><span class='Ref_To_Local'>funcsig_tag</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"FUNCTION"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11209"><span class='Ref_To_Local'>delqry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Function Comments and Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11210"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11210"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><span class='String'>"FUNCTION"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN11213"><span class='Ref_To_Local'>funcsig</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11215"><span class='Ref_To_Local'>funcsig_tag</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN203"><span class='Ref_to_Member'>proacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN204"><span class='Ref_to_Member'>rproacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN205"><span class='Ref_to_Member'>initproacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11204"><span class='Ref_to_Parameter'>finfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN206"><span class='Ref_to_Member'>initrproacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11212"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11207"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11208"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11209"><span class='Ref_To_Local'>delqry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11210"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11211"><span class='Ref_To_Local'>asPart</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11213"><span class='Ref_To_Local'>funcsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11214"><span class='Ref_To_Local'>funcfullsig</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11214"><span class='Ref_To_Local'>funcfullsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11215"><span class='Ref_To_Local'>funcsig_tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11238"><span class='Ref_To_Local'>allargtypes</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11238"><span class='Ref_To_Local'>allargtypes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11239"><span class='Ref_To_Local'>argmodes</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11239"><span class='Ref_To_Local'>argmodes</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11240"><span class='Ref_To_Local'>argnames</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11240"><span class='Ref_To_Local'>argnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11241"><span class='Ref_To_Local'>configitems</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11241"><span class='Ref_To_Local'>configitems</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpFunc &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Dump a user-defined cast 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN11708"></a><span class='Declare_Function'>dumpCast</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN452"><span class='Ref_to_Typedef'>CastInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cast</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN11710"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN11711"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>defqry</span><span class='Delimiter'>; 
</span><a name="LN11712"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delqry</span><span class='Delimiter'>; 
</span><a name="LN11713"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN11714"></a>    <a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>funcInfo</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN11715"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sourceType</span><span class='Delimiter'>; 
</span><a name="LN11716"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>targetType</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN11710"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Cannot dump if we don't have the cast function's info */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN457"><span class='Ref_to_Member'>castfunc</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN11714"><span class='Ref_To_Local'>funcInfo</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN651"><span class='Ref_to_Proto'>findFuncByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN457"><span class='Ref_to_Member'>castfunc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11714"><span class='Ref_To_Local'>funcInfo</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"could not find function definition for function with OID %u\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN457"><span class='Ref_to_Member'>castfunc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Make sure we are in proper schema (needed for getFormattedTypeName). 
     * Casts don't have a schema of their own, so use pg_catalog. 
     */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11711"><span class='Ref_To_Local'>defqry</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11712"><span class='Ref_To_Local'>delqry</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11713"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11715"><span class='Ref_To_Local'>sourceType</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN243"><span class='Ref_to_Proto'>getFormattedTypeName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN455"><span class='Ref_to_Member'>castsource</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN86"><span class='Ref_to_EnumConst'>zeroAsNone</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11716"><span class='Ref_To_Local'>targetType</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN243"><span class='Ref_to_Proto'>getFormattedTypeName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN456"><span class='Ref_to_Member'>casttarget</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN86"><span class='Ref_to_EnumConst'>zeroAsNone</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11712"><span class='Ref_To_Local'>delqry</span></a><span class='Delimiter'>, </span><span class='String'>"DROP CAST (%s AS %s);\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN11715"><span class='Ref_To_Local'>sourceType</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11716"><span class='Ref_To_Local'>targetType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11711"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE CAST (%s AS %s) "</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN11715"><span class='Ref_To_Local'>sourceType</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11716"><span class='Ref_To_Local'>targetType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN459"><span class='Ref_to_Member'>castmethod</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/pg_cast.h.html#LN67"><span class='Ref_to_EnumConst'>COERCION_METHOD_BINARY</span></a><span class='Operator'>: 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11711"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>"WITHOUT FUNCTION"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/pg_cast.h.html#LN68"><span class='Ref_to_EnumConst'>COERCION_METHOD_INOUT</span></a><span class='Operator'>: 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11711"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>"WITH INOUT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/pg_cast.h.html#LN66"><span class='Ref_to_EnumConst'>COERCION_METHOD_FUNCTION</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11714"><span class='Ref_To_Local'>funcInfo</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN11760"></a>                <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>fsig</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN235"><span class='Ref_to_Proto'>format_function_signature</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11714"><span class='Ref_To_Local'>funcInfo</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Always qualify the function name, in case it is not in 
                 * pg_catalog schema (format_function_signature won't qualify 
                 * it). 
                 */ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11711"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>"WITH FUNCTION %s.%s"</span><span class='Delimiter'>, 
</span>                           <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11714"><span class='Ref_To_Local'>funcInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11760"><span class='Ref_To_Local'>fsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11760"><span class='Ref_To_Local'>fsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
                <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: bogus value in pg_cast.castfunc or pg_cast.castmethod field\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: bogus value in pg_cast.castmethod field\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch cast-&GT;castmethod &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN458"><span class='Ref_to_Member'>castcontext</span></a> <span class='Operator'>== </span><span class='String'>'a'</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11711"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>" AS ASSIGNMENT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN458"><span class='Ref_to_Member'>castcontext</span></a> <span class='Operator'>== </span><span class='String'>'i'</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11711"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>" AS IMPLICIT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11711"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11713"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"CAST (%s AS %s)"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN11715"><span class='Ref_To_Local'>sourceType</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11716"><span class='Ref_To_Local'>targetType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11710"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11711"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11713"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11713"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <span class='String'>"pg_catalog"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"CAST"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11711"><span class='Ref_To_Local'>defqry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11712"><span class='Ref_To_Local'>delqry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Cast Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11713"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <span class='String'>"pg_catalog"</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11708"><span class='Ref_to_Parameter'>cast</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN454"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11715"><span class='Ref_To_Local'>sourceType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11716"><span class='Ref_To_Local'>targetType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11711"><span class='Ref_To_Local'>defqry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11712"><span class='Ref_To_Local'>delqry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11713"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpCast &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Dump a transform 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN11817"></a><span class='Declare_Function'>dumpTransform</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN462"><span class='Ref_to_Typedef'>TransformInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>transform</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN11819"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN11820"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>defqry</span><span class='Delimiter'>; 
</span><a name="LN11821"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delqry</span><span class='Delimiter'>; 
</span><a name="LN11822"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN11823"></a>    <a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>fromsqlFuncInfo</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN11824"></a>    <a href="pg_dump.h.html#LN195"><span class='Ref_to_Typedef'>FuncInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>tosqlFuncInfo</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN11825"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>lanname</span><span class='Delimiter'>; 
</span><a name="LN11826"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>transformType</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN11819"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Cannot dump if we don't have the transform functions' info */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN467"><span class='Ref_to_Member'>trffromsql</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN11823"><span class='Ref_To_Local'>fromsqlFuncInfo</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN651"><span class='Ref_to_Proto'>findFuncByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN467"><span class='Ref_to_Member'>trffromsql</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11823"><span class='Ref_To_Local'>fromsqlFuncInfo</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"could not find function definition for function with OID %u\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN467"><span class='Ref_to_Member'>trffromsql</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN468"><span class='Ref_to_Member'>trftosql</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN11824"><span class='Ref_To_Local'>tosqlFuncInfo</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN651"><span class='Ref_to_Proto'>findFuncByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN468"><span class='Ref_to_Member'>trftosql</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11824"><span class='Ref_To_Local'>tosqlFuncInfo</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"could not find function definition for function with OID %u\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN468"><span class='Ref_to_Member'>trftosql</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema (needed for getFormattedTypeName) */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11820"><span class='Ref_To_Local'>defqry</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11821"><span class='Ref_To_Local'>delqry</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11822"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11825"><span class='Ref_To_Local'>lanname</span></a> <span class='Operator'>= </span><a href="../../include/utils/lsyscache.h.html#LN95"><span class='Ref_to_Proto'>get_language_name</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN466"><span class='Ref_to_Member'>trflang</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11826"><span class='Ref_To_Local'>transformType</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN243"><span class='Ref_to_Proto'>getFormattedTypeName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN465"><span class='Ref_to_Member'>trftype</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN86"><span class='Ref_to_EnumConst'>zeroAsNone</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11821"><span class='Ref_To_Local'>delqry</span></a><span class='Delimiter'>, </span><span class='String'>"DROP TRANSFORM FOR %s LANGUAGE %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN11826"><span class='Ref_To_Local'>transformType</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11825"><span class='Ref_To_Local'>lanname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11820"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE TRANSFORM FOR %s LANGUAGE %s ("</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN11826"><span class='Ref_To_Local'>transformType</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11825"><span class='Ref_To_Local'>lanname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN467"><span class='Ref_to_Member'>trffromsql</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN468"><span class='Ref_to_Member'>trftosql</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: bogus transform definition, at least one of trffromsql and trftosql should be nonzero\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN467"><span class='Ref_to_Member'>trffromsql</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11823"><span class='Ref_To_Local'>fromsqlFuncInfo</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN11871"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>fsig</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN235"><span class='Ref_to_Proto'>format_function_signature</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11823"><span class='Ref_To_Local'>fromsqlFuncInfo</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Always qualify the function name, in case it is not in 
             * pg_catalog schema (format_function_signature won't qualify it). 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11820"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>"FROM SQL WITH FUNCTION %s.%s"</span><span class='Delimiter'>, 
</span>                    <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11823"><span class='Ref_To_Local'>fromsqlFuncInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11871"><span class='Ref_To_Local'>fsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11871"><span class='Ref_To_Local'>fsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: bogus value in pg_transform.trffromsql field\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN468"><span class='Ref_to_Member'>trftosql</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN467"><span class='Ref_to_Member'>trffromsql</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11820"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11824"><span class='Ref_To_Local'>tosqlFuncInfo</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN11892"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>fsig</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN235"><span class='Ref_to_Proto'>format_function_signature</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11824"><span class='Ref_To_Local'>tosqlFuncInfo</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Always qualify the function name, in case it is not in 
             * pg_catalog schema (format_function_signature won't qualify it). 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11820"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>"TO SQL WITH FUNCTION %s.%s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11824"><span class='Ref_To_Local'>tosqlFuncInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11892"><span class='Ref_To_Local'>fsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11892"><span class='Ref_To_Local'>fsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: bogus value in pg_transform.trftosql field\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if transform-&GT;trftosql &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11820"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='String'>");\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11822"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"TRANSFORM FOR %s LANGUAGE %s"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN11826"><span class='Ref_To_Local'>transformType</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11825"><span class='Ref_To_Local'>lanname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11819"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11820"><span class='Ref_To_Local'>defqry</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11822"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11822"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <span class='String'>"pg_catalog"</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"TRANSFORM"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11820"><span class='Ref_To_Local'>defqry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11821"><span class='Ref_To_Local'>delqry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN137"><span class='Ref_to_Member'>dependencies</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN138"><span class='Ref_to_Member'>nDeps</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Transform Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11822"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <span class='String'>"pg_catalog"</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11817"><span class='Ref_to_Parameter'>transform</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN464"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11825"><span class='Ref_To_Local'>lanname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11826"><span class='Ref_To_Local'>transformType</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11820"><span class='Ref_To_Local'>defqry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11821"><span class='Ref_To_Local'>delqry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11822"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTransform &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * dumpOpr 
 *    write out a single operator definition 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN11942"></a><span class='Declare_Function'>dumpOpr</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN216"><span class='Ref_to_Typedef'>OprInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>oprinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN11944"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN11945"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN11946"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN11947"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN11948"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN11949"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>oprid</span><span class='Delimiter'>; 
</span><a name="LN11950"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>details</span><span class='Delimiter'>; 
</span><a name="LN11951"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN11952"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprkind</span><span class='Delimiter'>; 
</span><a name="LN11953"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprcode</span><span class='Delimiter'>; 
</span><a name="LN11954"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprleft</span><span class='Delimiter'>; 
</span><a name="LN11955"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprright</span><span class='Delimiter'>; 
</span><a name="LN11956"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprcom</span><span class='Delimiter'>; 
</span><a name="LN11957"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprnegate</span><span class='Delimiter'>; 
</span><a name="LN11958"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprrest</span><span class='Delimiter'>; 
</span><a name="LN11959"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprjoin</span><span class='Delimiter'>; 
</span><a name="LN11960"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprcanmerge</span><span class='Delimiter'>; 
</span><a name="LN11961"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_oprcanhash</span><span class='Delimiter'>; 
</span><a name="LN11962"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprkind</span><span class='Delimiter'>; 
</span><a name="LN11963"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprcode</span><span class='Delimiter'>; 
</span><a name="LN11964"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprleft</span><span class='Delimiter'>; 
</span><a name="LN11965"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprright</span><span class='Delimiter'>; 
</span><a name="LN11966"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprcom</span><span class='Delimiter'>; 
</span><a name="LN11967"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprnegate</span><span class='Delimiter'>; 
</span><a name="LN11968"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprrest</span><span class='Delimiter'>; 
</span><a name="LN11969"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprjoin</span><span class='Delimiter'>; 
</span><a name="LN11970"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprcanmerge</span><span class='Delimiter'>; 
</span><a name="LN11971"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprcanhash</span><span class='Delimiter'>; 
</span><a name="LN11972"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprregproc</span><span class='Delimiter'>; 
</span><a name="LN11973"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oprref</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN11944"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * some operators are invalid because they were the result of user 
     * defining operators before commutators exist 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN221"><span class='Ref_to_Member'>oprcode</span></a><span class='Parentheses'>))</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11945"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11946"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11947"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11948"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11949"><span class='Ref_To_Local'>oprid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema so regoperator works correctly */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11945"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT oprkind, "</span> 
                          <span class='String'>"oprcode::pg_catalog.regprocedure, "</span> 
                          <span class='String'>"oprleft::pg_catalog.regtype, "</span> 
                          <span class='String'>"oprright::pg_catalog.regtype, "</span> 
                          <span class='String'>"oprcom::pg_catalog.regoperator, "</span> 
                          <span class='String'>"oprnegate::pg_catalog.regoperator, "</span> 
                          <span class='String'>"oprrest::pg_catalog.regprocedure, "</span> 
                          <span class='String'>"oprjoin::pg_catalog.regprocedure, "</span> 
                          <span class='String'>"oprcanmerge, oprcanhash "</span> 
                          <span class='String'>"FROM pg_catalog.pg_operator "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11945"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT oprkind, "</span> 
                          <span class='String'>"oprcode::pg_catalog.regprocedure, "</span> 
                          <span class='String'>"oprleft::pg_catalog.regtype, "</span> 
                          <span class='String'>"oprright::pg_catalog.regtype, "</span> 
                          <span class='String'>"oprcom::pg_catalog.regoperator, "</span> 
                          <span class='String'>"oprnegate::pg_catalog.regoperator, "</span> 
                          <span class='String'>"oprrest::pg_catalog.regprocedure, "</span> 
                          <span class='String'>"oprjoin::pg_catalog.regprocedure, "</span> 
                          <span class='String'>"(oprlsortop != 0) AS oprcanmerge, "</span> 
                          <span class='String'>"oprcanhash "</span> 
                          <span class='String'>"FROM pg_catalog.pg_operator "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11945"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11952"><span class='Ref_To_Local'>i_oprkind</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprkind"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11953"><span class='Ref_To_Local'>i_oprcode</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprcode"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11954"><span class='Ref_To_Local'>i_oprleft</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprleft"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11955"><span class='Ref_To_Local'>i_oprright</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprright"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11956"><span class='Ref_To_Local'>i_oprcom</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprcom"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11957"><span class='Ref_To_Local'>i_oprnegate</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprnegate"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11958"><span class='Ref_To_Local'>i_oprrest</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprrest"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11959"><span class='Ref_To_Local'>i_oprjoin</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprjoin"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11960"><span class='Ref_To_Local'>i_oprcanmerge</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprcanmerge"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11961"><span class='Ref_To_Local'>i_oprcanhash</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"oprcanhash"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11962"><span class='Ref_To_Local'>oprkind</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11952"><span class='Ref_To_Local'>i_oprkind</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11963"><span class='Ref_To_Local'>oprcode</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11953"><span class='Ref_To_Local'>i_oprcode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11964"><span class='Ref_To_Local'>oprleft</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11954"><span class='Ref_To_Local'>i_oprleft</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11965"><span class='Ref_To_Local'>oprright</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11955"><span class='Ref_To_Local'>i_oprright</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11966"><span class='Ref_To_Local'>oprcom</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11956"><span class='Ref_To_Local'>i_oprcom</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11967"><span class='Ref_To_Local'>oprnegate</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11957"><span class='Ref_To_Local'>i_oprnegate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11968"><span class='Ref_To_Local'>oprrest</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11958"><span class='Ref_To_Local'>i_oprrest</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11969"><span class='Ref_To_Local'>oprjoin</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11959"><span class='Ref_To_Local'>i_oprjoin</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11970"><span class='Ref_To_Local'>oprcanmerge</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11960"><span class='Ref_To_Local'>i_oprcanmerge</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN11971"><span class='Ref_To_Local'>oprcanhash</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11961"><span class='Ref_To_Local'>i_oprcanhash</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN237"><span class='Ref_to_Proto'>convertRegProcReference</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11963"><span class='Ref_To_Local'>oprcode</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>"    PROCEDURE = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11949"><span class='Ref_To_Local'>oprid</span></a><span class='Delimiter'>, </span><span class='String'>"%s ("</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * right unary means there's a left arg and left unary means there's a 
     * right arg 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11962"><span class='Ref_To_Local'>oprkind</span></a><span class='Delimiter'>, </span><span class='String'>"r"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>        strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11962"><span class='Ref_To_Local'>oprkind</span></a><span class='Delimiter'>, </span><span class='String'>"b"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    LEFTARG = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11964"><span class='Ref_To_Local'>oprleft</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11949"><span class='Ref_To_Local'>oprid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11964"><span class='Ref_To_Local'>oprleft</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11949"><span class='Ref_To_Local'>oprid</span></a><span class='Delimiter'>, </span><span class='String'>"NONE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11962"><span class='Ref_To_Local'>oprkind</span></a><span class='Delimiter'>, </span><span class='String'>"l"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>        strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11962"><span class='Ref_To_Local'>oprkind</span></a><span class='Delimiter'>, </span><span class='String'>"b"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    RIGHTARG = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11965"><span class='Ref_To_Local'>oprright</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11949"><span class='Ref_To_Local'>oprid</span></a><span class='Delimiter'>, </span><span class='String'>", %s)"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11965"><span class='Ref_To_Local'>oprright</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11949"><span class='Ref_To_Local'>oprid</span></a><span class='Delimiter'>, </span><span class='String'>", NONE)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11973"><span class='Ref_To_Local'>oprref</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN239"><span class='Ref_to_Proto'>convertOperatorReference</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11966"><span class='Ref_To_Local'>oprcom</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11973"><span class='Ref_To_Local'>oprref</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    COMMUTATOR = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11973"><span class='Ref_To_Local'>oprref</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11973"><span class='Ref_To_Local'>oprref</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN11973"><span class='Ref_To_Local'>oprref</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN239"><span class='Ref_to_Proto'>convertOperatorReference</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11967"><span class='Ref_To_Local'>oprnegate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11973"><span class='Ref_To_Local'>oprref</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    NEGATOR = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11973"><span class='Ref_To_Local'>oprref</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11973"><span class='Ref_To_Local'>oprref</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11970"><span class='Ref_To_Local'>oprcanmerge</span></a><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    MERGES"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11971"><span class='Ref_To_Local'>oprcanhash</span></a><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    HASHES"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN237"><span class='Ref_to_Proto'>convertRegProcReference</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11968"><span class='Ref_To_Local'>oprrest</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    RESTRICT = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN237"><span class='Ref_to_Proto'>convertRegProcReference</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11969"><span class='Ref_To_Local'>oprjoin</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    JOIN = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11972"><span class='Ref_To_Local'>oprregproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11947"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP OPERATOR %s.%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN11949"><span class='Ref_To_Local'>oprid</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11946"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE OPERATOR %s (\n%s\n);\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11948"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"OPERATOR %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11949"><span class='Ref_To_Local'>oprid</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11944"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11946"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11948"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN219"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"OPERATOR"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN11946"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11947"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Operator Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11948"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN219"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN11942"><span class='Ref_to_Parameter'>oprinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN218"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11951"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11945"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11946"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11947"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11948"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11949"><span class='Ref_To_Local'>oprid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN11950"><span class='Ref_To_Local'>details</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpOpr &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert a function reference obtained from pg_operator 
 * 
 * Returns allocated string of what to print, or NULL if function references 
 * is InvalidOid. Returned string is expected to be free'd by the caller. 
 * 
 * The input is a REGPROCEDURE display; we have to strip the argument-types 
 * part. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN12170"></a><span class='Declare_Function'>convertRegProcReference</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>proc</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN12172"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>name</span><span class='Delimiter'>; 
</span><a name="LN12173"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>paren</span><span class='Delimiter'>; 
</span><a name="LN12174"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>inquote</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* In all cases "-" means a null reference */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12170"><span class='Ref_to_Parameter'>proc</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12172"><span class='Ref_To_Local'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12170"><span class='Ref_to_Parameter'>proc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* find non-double-quoted left paren */ 
</span>    <a href="pg_dump.c.html#LN12174"><span class='Ref_To_Local'>inquote</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12173"><span class='Ref_To_Local'>paren</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN12172"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="pg_dump.c.html#LN12173"><span class='Ref_To_Local'>paren</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN12173"><span class='Ref_To_Local'>paren</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="pg_dump.c.html#LN12173"><span class='Ref_To_Local'>paren</span></a> <span class='Operator'>== </span><span class='String'>'('</span> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN12174"><span class='Ref_To_Local'>inquote</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Operator'>*</span><a href="pg_dump.c.html#LN12173"><span class='Ref_To_Local'>paren</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="pg_dump.c.html#LN12173"><span class='Ref_To_Local'>paren</span></a> <span class='Operator'>== </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN12174"><span class='Ref_To_Local'>inquote</span></a> <span class='Operator'>= !</span><a href="pg_dump.c.html#LN12174"><span class='Ref_To_Local'>inquote</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="pg_dump.c.html#LN12172"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end convertRegProcReference &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert an operator cross-reference obtained from pg_operator 
 * 
 * Returns an allocated string of what to print, or NULL to print nothing. 
 * Caller is responsible for free'ing result string. 
 * 
 * The input is a REGOPERATOR display; we have to strip the argument-types 
 * part, and add OPERATOR() decoration if the name is schema-qualified. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN12206"></a><span class='Declare_Function'>convertOperatorReference</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>opr</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN12208"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>name</span><span class='Delimiter'>; 
</span><a name="LN12209"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>oname</span><span class='Delimiter'>; 
</span><a name="LN12210"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ptr</span><span class='Delimiter'>; 
</span><a name="LN12211"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>inquote</span><span class='Delimiter'>; 
</span><a name="LN12212"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>sawdot</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* In all cases "0" means a null reference */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12206"><span class='Ref_to_Parameter'>opr</span></a><span class='Delimiter'>, </span><span class='String'>"0"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12208"><span class='Ref_To_Local'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12206"><span class='Ref_to_Parameter'>opr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* find non-double-quoted left paren, and check for non-quoted dot */ 
</span>    <a href="pg_dump.c.html#LN12211"><span class='Ref_To_Local'>inquote</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12212"><span class='Ref_To_Local'>sawdot</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12210"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN12208"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="pg_dump.c.html#LN12210"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN12210"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="pg_dump.c.html#LN12210"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>'"'</span><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN12211"><span class='Ref_To_Local'>inquote</span></a> <span class='Operator'>= !</span><a href="pg_dump.c.html#LN12211"><span class='Ref_To_Local'>inquote</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="pg_dump.c.html#LN12210"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>'.'</span> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN12211"><span class='Ref_To_Local'>inquote</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN12212"><span class='Ref_To_Local'>sawdot</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="pg_dump.c.html#LN12210"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>== </span><span class='String'>'('</span> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN12211"><span class='Ref_To_Local'>inquote</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Operator'>*</span><a href="pg_dump.c.html#LN12210"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span>    <span class='Comment_Multi_Line'>/* If not schema-qualified, don't need to add OPERATOR() */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN12212"><span class='Ref_To_Local'>sawdot</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="pg_dump.c.html#LN12208"><span class='Ref_To_Local'>name</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12209"><span class='Ref_To_Local'>oname</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"OPERATOR(%s)"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12208"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12208"><span class='Ref_To_Local'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="pg_dump.c.html#LN12209"><span class='Ref_To_Local'>oname</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end convertOperatorReference &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert a function OID obtained from pg_ts_parser or pg_ts_template 
 * 
 * It is sufficient to use REGPROC rather than REGPROCEDURE, since the 
 * argument lists of these functions are predetermined.  Note that the 
 * caller should ensure we are in the proper schema, because the results 
 * are search path dependent! 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN12251"></a><span class='Declare_Function'>convertTSFunction</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>funcOid</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN12253"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN12254"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>query</span><span class='Delimiter'>[</span><span class='Number'>128</span><span class='Delimiter'>]; 
</span><a name="LN12255"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12254"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12254"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <span class='String'>"SELECT '%u'::pg_catalog.regproc"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12251"><span class='Ref_to_Parameter'>funcOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12255"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12251"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12254"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12253"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12255"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12255"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN12253"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * dumpAccessMethod 
 *    write out a single access method definition 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN12273"></a><span class='Declare_Function'>dumpAccessMethod</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN224"><span class='Ref_to_Typedef'>AccessMethodInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>aminfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN12275"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN12276"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN12277"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN12278"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN12279"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qamname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN12275"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12276"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12277"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12278"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12279"><span class='Ref_To_Local'>qamname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12276"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE ACCESS METHOD %s "</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12279"><span class='Ref_To_Local'>qamname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN227"><span class='Ref_to_Member'>amtype</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/pg_am.h.html#LN60"><span class='Ref_to_Const'>AMTYPE_INDEX</span></a><span class='Operator'>: 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12276"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"TYPE INDEX "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: invalid type \"%c\" of access method \"%s\"\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN227"><span class='Ref_to_Member'>amtype</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12279"><span class='Ref_To_Local'>qamname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/common/fe_memutils.h.html#LN29"><span class='Ref_to_Proto'>pg_free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12279"><span class='Ref_To_Local'>qamname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12276"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12277"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12278"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12276"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"HANDLER %s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN228"><span class='Ref_to_Member'>amhandler</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12277"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP ACCESS METHOD %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN12279"><span class='Ref_To_Local'>qamname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12278"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"ACCESS METHOD %s"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN12279"><span class='Ref_To_Local'>qamname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12275"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12276"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12278"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='String'>""</span><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"ACCESS METHOD"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN12276"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12277"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Access Method Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12278"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12273"><span class='Ref_to_Parameter'>aminfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN226"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/common/fe_memutils.h.html#LN29"><span class='Ref_to_Proto'>pg_free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12279"><span class='Ref_To_Local'>qamname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12276"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12277"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12278"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpAccessMethod &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpOpclass 
 *    write out a single operator class definition 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN12348"></a><span class='Declare_Function'>dumpOpclass</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN231"><span class='Ref_to_Typedef'>OpclassInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>opcinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN12350"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN12351"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN12352"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN12353"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN12354"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN12355"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN12356"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN12357"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_opcintype</span><span class='Delimiter'>; 
</span><a name="LN12358"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_opckeytype</span><span class='Delimiter'>; 
</span><a name="LN12359"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_opcdefault</span><span class='Delimiter'>; 
</span><a name="LN12360"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_opcfamily</span><span class='Delimiter'>; 
</span><a name="LN12361"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_opcfamilyname</span><span class='Delimiter'>; 
</span><a name="LN12362"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_opcfamilynsp</span><span class='Delimiter'>; 
</span><a name="LN12363"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amname</span><span class='Delimiter'>; 
</span><a name="LN12364"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amopstrategy</span><span class='Delimiter'>; 
</span><a name="LN12365"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amopreqcheck</span><span class='Delimiter'>; 
</span><a name="LN12366"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amopopr</span><span class='Delimiter'>; 
</span><a name="LN12367"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_sortfamily</span><span class='Delimiter'>; 
</span><a name="LN12368"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_sortfamilynsp</span><span class='Delimiter'>; 
</span><a name="LN12369"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amprocnum</span><span class='Delimiter'>; 
</span><a name="LN12370"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amproc</span><span class='Delimiter'>; 
</span><a name="LN12371"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amproclefttype</span><span class='Delimiter'>; 
</span><a name="LN12372"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amprocrighttype</span><span class='Delimiter'>; 
</span><a name="LN12373"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opcintype</span><span class='Delimiter'>; 
</span><a name="LN12374"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opckeytype</span><span class='Delimiter'>; 
</span><a name="LN12375"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opcdefault</span><span class='Delimiter'>; 
</span><a name="LN12376"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opcfamily</span><span class='Delimiter'>; 
</span><a name="LN12377"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opcfamilyname</span><span class='Delimiter'>; 
</span><a name="LN12378"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>opcfamilynsp</span><span class='Delimiter'>; 
</span><a name="LN12379"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amname</span><span class='Delimiter'>; 
</span><a name="LN12380"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amopstrategy</span><span class='Delimiter'>; 
</span><a name="LN12381"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amopreqcheck</span><span class='Delimiter'>; 
</span><a name="LN12382"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amopopr</span><span class='Delimiter'>; 
</span><a name="LN12383"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sortfamily</span><span class='Delimiter'>; 
</span><a name="LN12384"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sortfamilynsp</span><span class='Delimiter'>; 
</span><a name="LN12385"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amprocnum</span><span class='Delimiter'>; 
</span><a name="LN12386"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amproc</span><span class='Delimiter'>; 
</span><a name="LN12387"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amproclefttype</span><span class='Delimiter'>; 
</span><a name="LN12388"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amprocrighttype</span><span class='Delimiter'>; 
</span><a name="LN12389"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>needComma</span><span class='Delimiter'>; 
</span><a name="LN12390"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN12350"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12353"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12354"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema so regoperator works correctly */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get additional fields from the pg_opclass row */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT opcintype::pg_catalog.regtype, "</span> 
                          <span class='String'>"opckeytype::pg_catalog.regtype, "</span> 
                          <span class='String'>"opcdefault, opcfamily, "</span> 
                          <span class='String'>"opfname AS opcfamilyname, "</span> 
                          <span class='String'>"nspname AS opcfamilynsp, "</span> 
                          <span class='String'>"(SELECT amname FROM pg_catalog.pg_am WHERE oid = opcmethod) AS amname "</span> 
                          <span class='String'>"FROM pg_catalog.pg_opclass c "</span> 
                   <span class='String'>"LEFT JOIN pg_catalog.pg_opfamily f ON f.oid = opcfamily "</span> 
               <span class='String'>"LEFT JOIN pg_catalog.pg_namespace n ON n.oid = opfnamespace "</span> 
                          <span class='String'>"WHERE c.oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT opcintype::pg_catalog.regtype, "</span> 
                          <span class='String'>"opckeytype::pg_catalog.regtype, "</span> 
                          <span class='String'>"opcdefault, NULL AS opcfamily, "</span> 
                          <span class='String'>"NULL AS opcfamilyname, "</span> 
                          <span class='String'>"NULL AS opcfamilynsp, "</span> 
        <span class='String'>"(SELECT amname FROM pg_catalog.pg_am WHERE oid = opcamid) AS amname "</span> 
                          <span class='String'>"FROM pg_catalog.pg_opclass "</span> 
                          <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12357"><span class='Ref_To_Local'>i_opcintype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opcintype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12358"><span class='Ref_To_Local'>i_opckeytype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opckeytype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12359"><span class='Ref_To_Local'>i_opcdefault</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opcdefault"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12360"><span class='Ref_To_Local'>i_opcfamily</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opcfamily"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12361"><span class='Ref_To_Local'>i_opcfamilyname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opcfamilyname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12362"><span class='Ref_To_Local'>i_opcfamilynsp</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"opcfamilynsp"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12363"><span class='Ref_To_Local'>i_amname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* opcintype may still be needed after we PQclear res */ 
</span>    <a href="pg_dump.c.html#LN12373"><span class='Ref_To_Local'>opcintype</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12357"><span class='Ref_To_Local'>i_opcintype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12374"><span class='Ref_To_Local'>opckeytype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12358"><span class='Ref_To_Local'>i_opckeytype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12375"><span class='Ref_To_Local'>opcdefault</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12359"><span class='Ref_To_Local'>i_opcdefault</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* opcfamily will still be needed after we PQclear res */ 
</span>    <a href="pg_dump.c.html#LN12376"><span class='Ref_To_Local'>opcfamily</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12360"><span class='Ref_To_Local'>i_opcfamily</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12377"><span class='Ref_To_Local'>opcfamilyname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12361"><span class='Ref_To_Local'>i_opcfamilyname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12378"><span class='Ref_To_Local'>opcfamilynsp</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12362"><span class='Ref_To_Local'>i_opcfamilynsp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* amname will still be needed after we PQclear res */ 
</span>    <a href="pg_dump.c.html#LN12379"><span class='Ref_To_Local'>amname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12363"><span class='Ref_To_Local'>i_amname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12353"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP OPERATOR CLASS %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12353"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>".%s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12353"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>" USING %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12379"><span class='Ref_To_Local'>amname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build the fixed portion of the CREATE command */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE OPERATOR CLASS %s\n    "</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12375"><span class='Ref_To_Local'>opcdefault</span></a><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"DEFAULT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"FOR TYPE %s USING %s"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN12373"><span class='Ref_To_Local'>opcintype</span></a><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12379"><span class='Ref_To_Local'>amname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12377"><span class='Ref_To_Local'>opcfamilyname</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" FAMILY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12378"><span class='Ref_To_Local'>opcfamilynsp</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12378"><span class='Ref_To_Local'>opcfamilynsp</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12377"><span class='Ref_To_Local'>opcfamilyname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" AS\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12389"><span class='Ref_To_Local'>needComma</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12374"><span class='Ref_To_Local'>opckeytype</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"STORAGE %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12374"><span class='Ref_To_Local'>opckeytype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12389"><span class='Ref_To_Local'>needComma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now fetch and print the OPERATOR entries (pg_amop rows). 
     * 
     * Print only those opfamily members that are tied to the opclass by 
     * pg_depend entries. 
     * 
     * XXX RECHECK is gone as of 8.4, but we'll still print it if dumping an 
     * older server's opclass in which it is used.  This is to avoid 
     * hard-to-detect breakage if a newer pg_dump is used to dump from an 
     * older server and then reload into that old version.  This can go away 
     * once 8.3 is so old as to not be of interest to anyone. 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT amopstrategy, false AS amopreqcheck, "</span> 
                          <span class='String'>"amopopr::pg_catalog.regoperator, "</span> 
                          <span class='String'>"opfname AS sortfamily, "</span> 
                          <span class='String'>"nspname AS sortfamilynsp "</span> 
                   <span class='String'>"FROM pg_catalog.pg_amop ao JOIN pg_catalog.pg_depend ON "</span> 
                          <span class='String'>"(classid = 'pg_catalog.pg_amop'::pg_catalog.regclass AND objid = ao.oid) "</span> 
              <span class='String'>"LEFT JOIN pg_catalog.pg_opfamily f ON f.oid = amopsortfamily "</span> 
               <span class='String'>"LEFT JOIN pg_catalog.pg_namespace n ON n.oid = opfnamespace "</span> 
           <span class='String'>"WHERE refclassid = 'pg_catalog.pg_opclass'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND refobjid = '%u'::pg_catalog.oid "</span> 
                          <span class='String'>"AND amopfamily = '%s'::pg_catalog.oid "</span> 
                          <span class='String'>"ORDER BY amopstrategy"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12376"><span class='Ref_To_Local'>opcfamily</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT amopstrategy, false AS amopreqcheck, "</span> 
                          <span class='String'>"amopopr::pg_catalog.regoperator, "</span> 
                          <span class='String'>"NULL AS sortfamily, "</span> 
                          <span class='String'>"NULL AS sortfamilynsp "</span> 
                          <span class='String'>"FROM pg_catalog.pg_amop ao, pg_catalog.pg_depend "</span> 
           <span class='String'>"WHERE refclassid = 'pg_catalog.pg_opclass'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND refobjid = '%u'::pg_catalog.oid "</span> 
                   <span class='String'>"AND classid = 'pg_catalog.pg_amop'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND objid = ao.oid "</span> 
                          <span class='String'>"ORDER BY amopstrategy"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT amopstrategy, amopreqcheck, "</span> 
                          <span class='String'>"amopopr::pg_catalog.regoperator, "</span> 
                          <span class='String'>"NULL AS sortfamily, "</span> 
                          <span class='String'>"NULL AS sortfamilynsp "</span> 
                          <span class='String'>"FROM pg_catalog.pg_amop ao, pg_catalog.pg_depend "</span> 
           <span class='String'>"WHERE refclassid = 'pg_catalog.pg_opclass'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND refobjid = '%u'::pg_catalog.oid "</span> 
                   <span class='String'>"AND classid = 'pg_catalog.pg_amop'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND objid = ao.oid "</span> 
                          <span class='String'>"ORDER BY amopstrategy"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Here, we print all entries since there are no opfamilies and hence 
         * no loose operators to worry about. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT amopstrategy, amopreqcheck, "</span> 
                          <span class='String'>"amopopr::pg_catalog.regoperator, "</span> 
                          <span class='String'>"NULL AS sortfamily, "</span> 
                          <span class='String'>"NULL AS sortfamilynsp "</span> 
                          <span class='String'>"FROM pg_catalog.pg_amop "</span> 
                          <span class='String'>"WHERE amopclaid = '%u'::pg_catalog.oid "</span> 
                          <span class='String'>"ORDER BY amopstrategy"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12356"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12364"><span class='Ref_To_Local'>i_amopstrategy</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amopstrategy"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12365"><span class='Ref_To_Local'>i_amopreqcheck</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amopreqcheck"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12366"><span class='Ref_To_Local'>i_amopopr</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amopopr"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12367"><span class='Ref_To_Local'>i_sortfamily</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"sortfamily"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12368"><span class='Ref_To_Local'>i_sortfamilynsp</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"sortfamilynsp"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN12356"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN12380"><span class='Ref_To_Local'>amopstrategy</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12364"><span class='Ref_To_Local'>i_amopstrategy</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12381"><span class='Ref_To_Local'>amopreqcheck</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12365"><span class='Ref_To_Local'>i_amopreqcheck</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12382"><span class='Ref_To_Local'>amopopr</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12366"><span class='Ref_To_Local'>i_amopopr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12383"><span class='Ref_To_Local'>sortfamily</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12367"><span class='Ref_To_Local'>i_sortfamily</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12384"><span class='Ref_To_Local'>sortfamilynsp</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12368"><span class='Ref_To_Local'>i_sortfamilynsp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12389"><span class='Ref_To_Local'>needComma</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" ,\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"OPERATOR %s %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12380"><span class='Ref_To_Local'>amopstrategy</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12382"><span class='Ref_To_Local'>amopopr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12383"><span class='Ref_To_Local'>sortfamily</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" FOR ORDER BY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12384"><span class='Ref_To_Local'>sortfamilynsp</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12384"><span class='Ref_To_Local'>sortfamilynsp</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12383"><span class='Ref_To_Local'>sortfamily</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12381"><span class='Ref_To_Local'>amopreqcheck</span></a><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" RECHECK"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN12389"><span class='Ref_To_Local'>needComma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now fetch and print the FUNCTION entries (pg_amproc rows). 
     * 
     * Print only those opfamily members that are tied to the opclass by 
     * pg_depend entries. 
     * 
     * We print the amproclefttype/amprocrighttype even though in most cases 
     * the backend could deduce the right values, because of the corner case 
     * of a btree sort support function for a cross-type comparison.  That's 
     * only allowed in 9.2 and later, but for simplicity print them in all 
     * versions that have the columns. 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80300</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT amprocnum, "</span> 
                          <span class='String'>"amproc::pg_catalog.regprocedure, "</span> 
                          <span class='String'>"amproclefttype::pg_catalog.regtype, "</span> 
                          <span class='String'>"amprocrighttype::pg_catalog.regtype "</span> 
                        <span class='String'>"FROM pg_catalog.pg_amproc ap, pg_catalog.pg_depend "</span> 
           <span class='String'>"WHERE refclassid = 'pg_catalog.pg_opclass'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND refobjid = '%u'::pg_catalog.oid "</span> 
                 <span class='String'>"AND classid = 'pg_catalog.pg_amproc'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND objid = ap.oid "</span> 
                          <span class='String'>"ORDER BY amprocnum"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT amprocnum, "</span> 
                          <span class='String'>"amproc::pg_catalog.regprocedure, "</span> 
                          <span class='String'>"'' AS amproclefttype, "</span> 
                          <span class='String'>"'' AS amprocrighttype "</span> 
                          <span class='String'>"FROM pg_catalog.pg_amproc "</span> 
                          <span class='String'>"WHERE amopclaid = '%u'::pg_catalog.oid "</span> 
                          <span class='String'>"ORDER BY amprocnum"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12356"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12369"><span class='Ref_To_Local'>i_amprocnum</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amprocnum"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12370"><span class='Ref_To_Local'>i_amproc</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amproc"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12371"><span class='Ref_To_Local'>i_amproclefttype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amproclefttype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12372"><span class='Ref_To_Local'>i_amprocrighttype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amprocrighttype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN12356"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN12385"><span class='Ref_To_Local'>amprocnum</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12369"><span class='Ref_To_Local'>i_amprocnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12386"><span class='Ref_To_Local'>amproc</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12370"><span class='Ref_To_Local'>i_amproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12387"><span class='Ref_To_Local'>amproclefttype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12371"><span class='Ref_To_Local'>i_amproclefttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12388"><span class='Ref_To_Local'>amprocrighttype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12390"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12372"><span class='Ref_To_Local'>i_amprocrighttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12389"><span class='Ref_To_Local'>needComma</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" ,\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"FUNCTION %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12385"><span class='Ref_To_Local'>amprocnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="pg_dump.c.html#LN12387"><span class='Ref_To_Local'>amproclefttype</span></a> <span class='Operator'>&& *</span><a href="pg_dump.c.html#LN12388"><span class='Ref_To_Local'>amprocrighttype</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" (%s, %s)"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12387"><span class='Ref_To_Local'>amproclefttype</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12388"><span class='Ref_To_Local'>amprocrighttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12386"><span class='Ref_To_Local'>amproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN12389"><span class='Ref_To_Local'>needComma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12355"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If needComma is still false it means we haven't added anything after 
     * the AS keyword.  To avoid printing broken SQL, append a dummy STORAGE 
     * clause with the same datatype.  This isn't sanctioned by the 
     * documentation, but actually DefineOpClass will treat it as a no-op. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN12389"><span class='Ref_To_Local'>needComma</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"STORAGE %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12373"><span class='Ref_To_Local'>opcintype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12354"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"OPERATOR CLASS %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12354"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>" USING %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12379"><span class='Ref_To_Local'>amname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12350"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12354"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN234"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"OPERATOR CLASS"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12353"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Operator Class Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12354"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN234"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12348"><span class='Ref_to_Parameter'>opcinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN233"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12373"><span class='Ref_To_Local'>opcintype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12376"><span class='Ref_To_Local'>opcfamily</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12379"><span class='Ref_To_Local'>amname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12351"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12352"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12353"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12354"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpOpclass &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpOpfamily 
 *    write out a single operator family definition 
 * 
 * Note: this also dumps any "loose" operator members that aren't bound to a 
 * specific opclass within the opfamily. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN12730"></a><span class='Declare_Function'>dumpOpfamily</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN237"><span class='Ref_to_Typedef'>OpfamilyInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>opfinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN12732"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN12733"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN12734"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN12735"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN12736"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN12737"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN12738"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res_ops</span><span class='Delimiter'>; 
</span><a name="LN12739"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res_procs</span><span class='Delimiter'>; 
</span><a name="LN12740"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN12741"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amname</span><span class='Delimiter'>; 
</span><a name="LN12742"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amopstrategy</span><span class='Delimiter'>; 
</span><a name="LN12743"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amopreqcheck</span><span class='Delimiter'>; 
</span><a name="LN12744"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amopopr</span><span class='Delimiter'>; 
</span><a name="LN12745"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_sortfamily</span><span class='Delimiter'>; 
</span><a name="LN12746"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_sortfamilynsp</span><span class='Delimiter'>; 
</span><a name="LN12747"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amprocnum</span><span class='Delimiter'>; 
</span><a name="LN12748"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amproc</span><span class='Delimiter'>; 
</span><a name="LN12749"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amproclefttype</span><span class='Delimiter'>; 
</span><a name="LN12750"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_amprocrighttype</span><span class='Delimiter'>; 
</span><a name="LN12751"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amname</span><span class='Delimiter'>; 
</span><a name="LN12752"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amopstrategy</span><span class='Delimiter'>; 
</span><a name="LN12753"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amopreqcheck</span><span class='Delimiter'>; 
</span><a name="LN12754"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amopopr</span><span class='Delimiter'>; 
</span><a name="LN12755"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sortfamily</span><span class='Delimiter'>; 
</span><a name="LN12756"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sortfamilynsp</span><span class='Delimiter'>; 
</span><a name="LN12757"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amprocnum</span><span class='Delimiter'>; 
</span><a name="LN12758"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amproc</span><span class='Delimiter'>; 
</span><a name="LN12759"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amproclefttype</span><span class='Delimiter'>; 
</span><a name="LN12760"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>amprocrighttype</span><span class='Delimiter'>; 
</span><a name="LN12761"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>needComma</span><span class='Delimiter'>; 
</span><a name="LN12762"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN12732"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12735"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN12736"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema so regoperator works correctly */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Fetch only those opfamily members that are tied directly to the 
     * opfamily by pg_depend entries. 
     * 
     * XXX RECHECK is gone as of 8.4, but we'll still print it if dumping an 
     * older server's opclass in which it is used.  This is to avoid 
     * hard-to-detect breakage if a newer pg_dump is used to dump from an 
     * older server and then reload into that old version.  This can go away 
     * once 8.3 is so old as to not be of interest to anyone. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT amopstrategy, false AS amopreqcheck, "</span> 
                          <span class='String'>"amopopr::pg_catalog.regoperator, "</span> 
                          <span class='String'>"opfname AS sortfamily, "</span> 
                          <span class='String'>"nspname AS sortfamilynsp "</span> 
                   <span class='String'>"FROM pg_catalog.pg_amop ao JOIN pg_catalog.pg_depend ON "</span> 
                          <span class='String'>"(classid = 'pg_catalog.pg_amop'::pg_catalog.regclass AND objid = ao.oid) "</span> 
              <span class='String'>"LEFT JOIN pg_catalog.pg_opfamily f ON f.oid = amopsortfamily "</span> 
               <span class='String'>"LEFT JOIN pg_catalog.pg_namespace n ON n.oid = opfnamespace "</span> 
          <span class='String'>"WHERE refclassid = 'pg_catalog.pg_opfamily'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND refobjid = '%u'::pg_catalog.oid "</span> 
                          <span class='String'>"AND amopfamily = '%u'::pg_catalog.oid "</span> 
                          <span class='String'>"ORDER BY amopstrategy"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT amopstrategy, false AS amopreqcheck, "</span> 
                          <span class='String'>"amopopr::pg_catalog.regoperator, "</span> 
                          <span class='String'>"NULL AS sortfamily, "</span> 
                          <span class='String'>"NULL AS sortfamilynsp "</span> 
                          <span class='String'>"FROM pg_catalog.pg_amop ao, pg_catalog.pg_depend "</span> 
          <span class='String'>"WHERE refclassid = 'pg_catalog.pg_opfamily'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND refobjid = '%u'::pg_catalog.oid "</span> 
                   <span class='String'>"AND classid = 'pg_catalog.pg_amop'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND objid = ao.oid "</span> 
                          <span class='String'>"ORDER BY amopstrategy"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT amopstrategy, amopreqcheck, "</span> 
                          <span class='String'>"amopopr::pg_catalog.regoperator, "</span> 
                          <span class='String'>"NULL AS sortfamily, "</span> 
                          <span class='String'>"NULL AS sortfamilynsp "</span> 
                          <span class='String'>"FROM pg_catalog.pg_amop ao, pg_catalog.pg_depend "</span> 
          <span class='String'>"WHERE refclassid = 'pg_catalog.pg_opfamily'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND refobjid = '%u'::pg_catalog.oid "</span> 
                   <span class='String'>"AND classid = 'pg_catalog.pg_amop'::pg_catalog.regclass "</span> 
                          <span class='String'>"AND objid = ao.oid "</span> 
                          <span class='String'>"ORDER BY amopstrategy"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT amprocnum, "</span> 
                      <span class='String'>"amproc::pg_catalog.regprocedure, "</span> 
                      <span class='String'>"amproclefttype::pg_catalog.regtype, "</span> 
                      <span class='String'>"amprocrighttype::pg_catalog.regtype "</span> 
                      <span class='String'>"FROM pg_catalog.pg_amproc ap, pg_catalog.pg_depend "</span> 
          <span class='String'>"WHERE refclassid = 'pg_catalog.pg_opfamily'::pg_catalog.regclass "</span> 
                      <span class='String'>"AND refobjid = '%u'::pg_catalog.oid "</span> 
                 <span class='String'>"AND classid = 'pg_catalog.pg_amproc'::pg_catalog.regclass "</span> 
                      <span class='String'>"AND objid = ap.oid "</span> 
                      <span class='String'>"ORDER BY amprocnum"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get additional fields from the pg_opfamily row */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span> 
     <span class='String'>"(SELECT amname FROM pg_catalog.pg_am WHERE oid = opfmethod) AS amname "</span> 
                      <span class='String'>"FROM pg_catalog.pg_opfamily "</span> 
                      <span class='String'>"WHERE oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12737"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN12741"><span class='Ref_To_Local'>i_amname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12737"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"amname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* amname will still be needed after we PQclear res */ 
</span>    <a href="pg_dump.c.html#LN12751"><span class='Ref_To_Local'>amname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12737"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12741"><span class='Ref_To_Local'>i_amname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12735"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP OPERATOR FAMILY %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12735"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>".%s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12735"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>" USING %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12751"><span class='Ref_To_Local'>amname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Build the fixed portion of the CREATE command */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE OPERATOR FAMILY %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" USING %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12751"><span class='Ref_To_Local'>amname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12737"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Do we need an ALTER to add loose members? */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER OPERATOR FAMILY %s"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" USING %s ADD\n    "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12751"><span class='Ref_To_Local'>amname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN12761"><span class='Ref_To_Local'>needComma</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Now fetch and print the OPERATOR entries (pg_amop rows). 
         */ 
</span>        <a href="pg_dump.c.html#LN12740"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN12742"><span class='Ref_To_Local'>i_amopstrategy</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Delimiter'>, </span><span class='String'>"amopstrategy"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12743"><span class='Ref_To_Local'>i_amopreqcheck</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Delimiter'>, </span><span class='String'>"amopreqcheck"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12744"><span class='Ref_To_Local'>i_amopopr</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Delimiter'>, </span><span class='String'>"amopopr"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12745"><span class='Ref_To_Local'>i_sortfamily</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Delimiter'>, </span><span class='String'>"sortfamily"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12746"><span class='Ref_To_Local'>i_sortfamilynsp</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Delimiter'>, </span><span class='String'>"sortfamilynsp"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN12740"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN12752"><span class='Ref_To_Local'>amopstrategy</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12742"><span class='Ref_To_Local'>i_amopstrategy</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN12753"><span class='Ref_To_Local'>amopreqcheck</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12743"><span class='Ref_To_Local'>i_amopreqcheck</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN12754"><span class='Ref_To_Local'>amopopr</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12744"><span class='Ref_To_Local'>i_amopopr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN12755"><span class='Ref_To_Local'>sortfamily</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12745"><span class='Ref_To_Local'>i_sortfamily</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN12756"><span class='Ref_To_Local'>sortfamilynsp</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12746"><span class='Ref_To_Local'>i_sortfamilynsp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12761"><span class='Ref_To_Local'>needComma</span></a><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" ,\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"OPERATOR %s %s"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN12752"><span class='Ref_To_Local'>amopstrategy</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12754"><span class='Ref_To_Local'>amopopr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12755"><span class='Ref_To_Local'>sortfamily</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" FOR ORDER BY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12756"><span class='Ref_To_Local'>sortfamilynsp</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12756"><span class='Ref_To_Local'>sortfamilynsp</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12755"><span class='Ref_To_Local'>sortfamily</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12753"><span class='Ref_To_Local'>amopreqcheck</span></a><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" RECHECK"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN12761"><span class='Ref_To_Local'>needComma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * Now fetch and print the FUNCTION entries (pg_amproc rows). 
         */ 
</span>        <a href="pg_dump.c.html#LN12740"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN12747"><span class='Ref_To_Local'>i_amprocnum</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a><span class='Delimiter'>, </span><span class='String'>"amprocnum"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12748"><span class='Ref_To_Local'>i_amproc</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a><span class='Delimiter'>, </span><span class='String'>"amproc"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12749"><span class='Ref_To_Local'>i_amproclefttype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a><span class='Delimiter'>, </span><span class='String'>"amproclefttype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN12750"><span class='Ref_To_Local'>i_amprocrighttype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a><span class='Delimiter'>, </span><span class='String'>"amprocrighttype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN12740"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN12757"><span class='Ref_To_Local'>amprocnum</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12747"><span class='Ref_To_Local'>i_amprocnum</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN12758"><span class='Ref_To_Local'>amproc</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12748"><span class='Ref_To_Local'>i_amproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN12759"><span class='Ref_To_Local'>amproclefttype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12749"><span class='Ref_To_Local'>i_amproclefttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN12760"><span class='Ref_To_Local'>amprocrighttype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12762"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12750"><span class='Ref_To_Local'>i_amprocrighttype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12761"><span class='Ref_To_Local'>needComma</span></a><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" ,\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"FUNCTION %s (%s, %s) %s"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN12757"><span class='Ref_To_Local'>amprocnum</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12759"><span class='Ref_To_Local'>amproclefttype</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12760"><span class='Ref_To_Local'>amprocrighttype</span></a><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN12758"><span class='Ref_To_Local'>amproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN12761"><span class='Ref_To_Local'>needComma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if PQntuples(res_ops)&GT;0|... &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12736"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"OPERATOR FAMILY %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12736"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>" USING %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12751"><span class='Ref_To_Local'>amname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12732"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12736"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN240"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"OPERATOR FAMILY"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12735"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Operator Family Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12736"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN240"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN12730"><span class='Ref_to_Parameter'>opfinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN239"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12751"><span class='Ref_To_Local'>amname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12738"><span class='Ref_To_Local'>res_ops</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12739"><span class='Ref_To_Local'>res_procs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12733"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12734"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12735"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN12736"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpOpfamily &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpCollation 
 *    write out a single collation definition 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN13002"></a><span class='Declare_Function'>dumpCollation</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>collinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN13004"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN13005"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN13006"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN13007"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN13008"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN13009"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN13010"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_collprovider</span><span class='Delimiter'>; 
</span><a name="LN13011"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_collcollate</span><span class='Delimiter'>; 
</span><a name="LN13012"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_collctype</span><span class='Delimiter'>; 
</span><a name="LN13013"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>collprovider</span><span class='Delimiter'>; 
</span><a name="LN13014"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>collcollate</span><span class='Delimiter'>; 
</span><a name="LN13015"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>collctype</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN13004"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13005"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13007"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13008"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get collation-specific details */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>100000</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13005"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span> 
                          <span class='String'>"collprovider, "</span> 
                          <span class='String'>"collcollate, "</span> 
                          <span class='String'>"collctype, "</span> 
                          <span class='String'>"collversion "</span> 
                          <span class='String'>"FROM pg_catalog.pg_collation c "</span> 
                          <span class='String'>"WHERE c.oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13005"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span> 
                          <span class='String'>"'c'::char AS collprovider, "</span> 
                          <span class='String'>"collcollate, "</span> 
                          <span class='String'>"collctype, "</span> 
                          <span class='String'>"NULL AS collversion "</span> 
                          <span class='String'>"FROM pg_catalog.pg_collation c "</span> 
                          <span class='String'>"WHERE c.oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13009"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13005"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13010"><span class='Ref_To_Local'>i_collprovider</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13009"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"collprovider"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13011"><span class='Ref_To_Local'>i_collcollate</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13009"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"collcollate"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13012"><span class='Ref_To_Local'>i_collctype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13009"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"collctype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13013"><span class='Ref_To_Local'>collprovider</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13009"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13010"><span class='Ref_To_Local'>i_collprovider</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13014"><span class='Ref_To_Local'>collcollate</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13009"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13011"><span class='Ref_To_Local'>i_collcollate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13015"><span class='Ref_To_Local'>collctype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13009"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13012"><span class='Ref_To_Local'>i_collctype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13007"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP COLLATION %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13007"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>".%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE COLLATION %s ("</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"provider = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13013"><span class='Ref_To_Local'>collprovider</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'c'</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"libc"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13013"><span class='Ref_To_Local'>collprovider</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'i'</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"icu"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13013"><span class='Ref_To_Local'>collprovider</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'d'</span><span class='Parentheses'>) 
</span>        <span class='Comment_Multi_Line'>/* to allow dumping pg_catalog; not accepted on input */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"default"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                      <span class='String'>"unrecognized collation provider: %s\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN13013"><span class='Ref_To_Local'>collprovider</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13014"><span class='Ref_To_Local'>collcollate</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13015"><span class='Ref_To_Local'>collctype</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", locale = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13014"><span class='Ref_To_Local'>collcollate</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", lc_collate = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13014"><span class='Ref_To_Local'>collcollate</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", lc_ctype = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13015"><span class='Ref_To_Local'>collctype</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * For binary upgrade, carry over the collation version.  For normal 
     * dump/restore, omit the version, so that it is computed upon restore. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13004"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN13102"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i_collversion</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN13102"><span class='Ref_To_Local'>i_collversion</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13009"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"collversion"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13009"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13102"><span class='Ref_To_Local'>i_collversion</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", version = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                  <a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13009"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13102"><span class='Ref_To_Local'>i_collversion</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>");\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13008"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"COLLATION %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13004"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13008"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN246"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"COLLATION"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13007"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Collation Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13008"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN246"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13002"><span class='Ref_to_Parameter'>collinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13009"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13005"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13006"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13007"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13008"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpCollation &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpConversion 
 *    write out a single conversion definition 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN13151"></a><span class='Declare_Function'>dumpConversion</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN249"><span class='Ref_to_Typedef'>ConvInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>convinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN13153"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN13154"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN13155"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN13156"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN13157"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN13158"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN13159"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_conforencoding</span><span class='Delimiter'>; 
</span><a name="LN13160"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_contoencoding</span><span class='Delimiter'>; 
</span><a name="LN13161"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_conproc</span><span class='Delimiter'>; 
</span><a name="LN13162"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_condefault</span><span class='Delimiter'>; 
</span><a name="LN13163"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>conforencoding</span><span class='Delimiter'>; 
</span><a name="LN13164"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>contoencoding</span><span class='Delimiter'>; 
</span><a name="LN13165"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>conproc</span><span class='Delimiter'>; 
</span><a name="LN13166"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>condefault</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN13153"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13154"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13155"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13156"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13157"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get conversion-specific details */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13154"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span> 
         <span class='String'>"pg_catalog.pg_encoding_to_char(conforencoding) AS conforencoding, "</span> 
           <span class='String'>"pg_catalog.pg_encoding_to_char(contoencoding) AS contoencoding, "</span> 
                      <span class='String'>"conproc, condefault "</span> 
                      <span class='String'>"FROM pg_catalog.pg_conversion c "</span> 
                      <span class='String'>"WHERE c.oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13158"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13154"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13159"><span class='Ref_To_Local'>i_conforencoding</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13158"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"conforencoding"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13160"><span class='Ref_To_Local'>i_contoencoding</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13158"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"contoencoding"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13161"><span class='Ref_To_Local'>i_conproc</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13158"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"conproc"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13162"><span class='Ref_To_Local'>i_condefault</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13158"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"condefault"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13163"><span class='Ref_To_Local'>conforencoding</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13158"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13159"><span class='Ref_To_Local'>i_conforencoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13164"><span class='Ref_To_Local'>contoencoding</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13158"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13160"><span class='Ref_To_Local'>i_contoencoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13165"><span class='Ref_To_Local'>conproc</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13158"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13161"><span class='Ref_To_Local'>i_conproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13166"><span class='Ref_To_Local'>condefault</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13158"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13162"><span class='Ref_To_Local'>i_condefault</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13156"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP CONVERSION %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13156"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>".%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13155"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE %sCONVERSION %s FOR "</span><span class='Delimiter'>, 
</span>                      <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13166"><span class='Ref_To_Local'>condefault</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"DEFAULT "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13155"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13163"><span class='Ref_To_Local'>conforencoding</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13155"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" TO "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13155"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13164"><span class='Ref_To_Local'>contoencoding</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* regproc output is already sufficiently quoted */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13155"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" FROM %s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13165"><span class='Ref_To_Local'>conproc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13157"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"CONVERSION %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13153"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13155"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13157"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN252"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"CONVERSION"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13155"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13156"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Conversion Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13157"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN252"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13151"><span class='Ref_to_Parameter'>convinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN251"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13158"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13154"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13155"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13156"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13157"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpConversion &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * format_aggregate_signature: generate aggregate name and argument list 
 * 
 * The argument type names are qualified if needed.  The aggregate name 
 * is never qualified. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN13255"></a><span class='Declare_Function'>format_aggregate_signature</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN210"><span class='Ref_to_Typedef'>AggInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>agginfo</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>honor_quotes</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN13257"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN43"><span class='Ref_to_Struct'>PQExpBufferData</span></a> <span class='Declare_Local'>buf</span><span class='Delimiter'>; 
</span><a name="LN13258"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN87"><span class='Ref_to_Func'>initPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13257"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13255"><span class='Ref_to_Parameter'>honor_quotes</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13257"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13255"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13257"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13255"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13255"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13257"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"(*)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13257"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13258"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN13258"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN13255"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN200"><span class='Ref_to_Member'>nargs</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN13258"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN13273"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>typname</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN13273"><span class='Ref_To_Local'>typname</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN243"><span class='Ref_to_Proto'>getFormattedTypeName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13255"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13255"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN201"><span class='Ref_to_Member'>argtypes</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN13258"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], 
</span>                                           <a href="pg_dump.c.html#LN83"><span class='Ref_to_EnumConst'>zeroAsOpaque</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13257"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"%s%s"</span><span class='Delimiter'>, 
</span>                              <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13258"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>", "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN13273"><span class='Ref_To_Local'>typname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13273"><span class='Ref_To_Local'>typname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13257"><span class='Ref_To_Local'>buf</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="pg_dump.c.html#LN13257"><span class='Ref_To_Local'>buf</span></a><span class='Operator'>.</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end format_aggregate_signature &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpAgg 
 *    write out a single aggregate definition 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN13293"></a><span class='Declare_Function'>dumpAgg</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN210"><span class='Ref_to_Typedef'>AggInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>agginfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN13295"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN13296"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN13297"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN13298"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN13299"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN13300"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>details</span><span class='Delimiter'>; 
</span><a name="LN13301"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>aggsig</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* identity signature */ 
</span><a name="LN13302"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>aggfullsig</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* full signature */ 
</span><a name="LN13303"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>aggsig_tag</span><span class='Delimiter'>; 
</span><a name="LN13304"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN13305"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggtransfn</span><span class='Delimiter'>; 
</span><a name="LN13306"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggfinalfn</span><span class='Delimiter'>; 
</span><a name="LN13307"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggcombinefn</span><span class='Delimiter'>; 
</span><a name="LN13308"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggserialfn</span><span class='Delimiter'>; 
</span><a name="LN13309"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggdeserialfn</span><span class='Delimiter'>; 
</span><a name="LN13310"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggmtransfn</span><span class='Delimiter'>; 
</span><a name="LN13311"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggminvtransfn</span><span class='Delimiter'>; 
</span><a name="LN13312"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggmfinalfn</span><span class='Delimiter'>; 
</span><a name="LN13313"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggfinalextra</span><span class='Delimiter'>; 
</span><a name="LN13314"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggmfinalextra</span><span class='Delimiter'>; 
</span><a name="LN13315"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggsortop</span><span class='Delimiter'>; 
</span><a name="LN13316"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_hypothetical</span><span class='Delimiter'>; 
</span><a name="LN13317"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggtranstype</span><span class='Delimiter'>; 
</span><a name="LN13318"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggtransspace</span><span class='Delimiter'>; 
</span><a name="LN13319"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggmtranstype</span><span class='Delimiter'>; 
</span><a name="LN13320"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggmtransspace</span><span class='Delimiter'>; 
</span><a name="LN13321"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_agginitval</span><span class='Delimiter'>; 
</span><a name="LN13322"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_aggminitval</span><span class='Delimiter'>; 
</span><a name="LN13323"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_convertok</span><span class='Delimiter'>; 
</span><a name="LN13324"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_proparallel</span><span class='Delimiter'>; 
</span><a name="LN13325"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggtransfn</span><span class='Delimiter'>; 
</span><a name="LN13326"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggfinalfn</span><span class='Delimiter'>; 
</span><a name="LN13327"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggcombinefn</span><span class='Delimiter'>; 
</span><a name="LN13328"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggserialfn</span><span class='Delimiter'>; 
</span><a name="LN13329"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggdeserialfn</span><span class='Delimiter'>; 
</span><a name="LN13330"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggmtransfn</span><span class='Delimiter'>; 
</span><a name="LN13331"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggminvtransfn</span><span class='Delimiter'>; 
</span><a name="LN13332"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggmfinalfn</span><span class='Delimiter'>; 
</span><a name="LN13333"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>aggfinalextra</span><span class='Delimiter'>; 
</span><a name="LN13334"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>aggmfinalextra</span><span class='Delimiter'>; 
</span><a name="LN13335"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggsortop</span><span class='Delimiter'>; 
</span><a name="LN13336"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>aggsortconvop</span><span class='Delimiter'>; 
</span><a name="LN13337"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>hypothetical</span><span class='Delimiter'>; 
</span><a name="LN13338"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggtranstype</span><span class='Delimiter'>; 
</span><a name="LN13339"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggtransspace</span><span class='Delimiter'>; 
</span><a name="LN13340"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggmtranstype</span><span class='Delimiter'>; 
</span><a name="LN13341"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggmtransspace</span><span class='Delimiter'>; 
</span><a name="LN13342"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>agginitval</span><span class='Delimiter'>; 
</span><a name="LN13343"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>aggminitval</span><span class='Delimiter'>; 
</span><a name="LN13344"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>convertok</span><span class='Delimiter'>; 
</span><a name="LN13345"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>proparallel</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN13295"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13296"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13297"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13298"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13299"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get aggregate-specific details */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13296"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT aggtransfn, "</span> 
                          <span class='String'>"aggfinalfn, aggtranstype::pg_catalog.regtype, "</span> 
                    <span class='String'>"aggcombinefn, aggserialfn, aggdeserialfn, aggmtransfn, "</span> 
           <span class='String'>"aggminvtransfn, aggmfinalfn, aggmtranstype::pg_catalog.regtype, "</span> 
                          <span class='String'>"aggfinalextra, aggmfinalextra, "</span> 
                          <span class='String'>"aggsortop::pg_catalog.regoperator, "</span> 
                          <span class='String'>"(aggkind = 'h') AS hypothetical, "</span> 
                          <span class='String'>"aggtransspace, agginitval, "</span> 
                          <span class='String'>"aggmtransspace, aggminitval, "</span> 
                          <span class='String'>"true AS convertok, "</span> 
                  <span class='String'>"pg_catalog.pg_get_function_arguments(p.oid) AS funcargs, "</span> 
        <span class='String'>"pg_catalog.pg_get_function_identity_arguments(p.oid) AS funciargs, "</span> 
                          <span class='String'>"p.proparallel "</span> 
                      <span class='String'>"FROM pg_catalog.pg_aggregate a, pg_catalog.pg_proc p "</span> 
                          <span class='String'>"WHERE a.aggfnoid = p.oid "</span> 
                          <span class='String'>"AND p.oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13296"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT aggtransfn, "</span> 
                          <span class='String'>"aggfinalfn, aggtranstype::pg_catalog.regtype, "</span> 
                          <span class='String'>"'-' AS aggcombinefn, '-' AS aggserialfn, "</span> 
                        <span class='String'>"'-' AS aggdeserialfn, aggmtransfn, aggminvtransfn, "</span> 
                          <span class='String'>"aggmfinalfn, aggmtranstype::pg_catalog.regtype, "</span> 
                          <span class='String'>"aggfinalextra, aggmfinalextra, "</span> 
                          <span class='String'>"aggsortop::pg_catalog.regoperator, "</span> 
                          <span class='String'>"(aggkind = 'h') AS hypothetical, "</span> 
                          <span class='String'>"aggtransspace, agginitval, "</span> 
                          <span class='String'>"aggmtransspace, aggminitval, "</span> 
                          <span class='String'>"true AS convertok, "</span> 
                  <span class='String'>"pg_catalog.pg_get_function_arguments(p.oid) AS funcargs, "</span> 
         <span class='String'>"pg_catalog.pg_get_function_identity_arguments(p.oid) AS funciargs "</span> 
                      <span class='String'>"FROM pg_catalog.pg_aggregate a, pg_catalog.pg_proc p "</span> 
                          <span class='String'>"WHERE a.aggfnoid = p.oid "</span> 
                          <span class='String'>"AND p.oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13296"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT aggtransfn, "</span> 
                          <span class='String'>"aggfinalfn, aggtranstype::pg_catalog.regtype, "</span> 
                          <span class='String'>"'-' AS aggcombinefn, '-' AS aggserialfn, "</span> 
                          <span class='String'>"'-' AS aggdeserialfn, '-' AS aggmtransfn, "</span> 
                          <span class='String'>"'-' AS aggminvtransfn, '-' AS aggmfinalfn, "</span> 
                          <span class='String'>"0 AS aggmtranstype, false AS aggfinalextra, "</span> 
                          <span class='String'>"false AS aggmfinalextra, "</span> 
                          <span class='String'>"aggsortop::pg_catalog.regoperator, "</span> 
                          <span class='String'>"false AS hypothetical, "</span> 
                          <span class='String'>"0 AS aggtransspace, agginitval, "</span> 
                          <span class='String'>"0 AS aggmtransspace, NULL AS aggminitval, "</span> 
                          <span class='String'>"true AS convertok, "</span> 
                  <span class='String'>"pg_catalog.pg_get_function_arguments(p.oid) AS funcargs, "</span> 
         <span class='String'>"pg_catalog.pg_get_function_identity_arguments(p.oid) AS funciargs "</span> 
                      <span class='String'>"FROM pg_catalog.pg_aggregate a, pg_catalog.pg_proc p "</span> 
                          <span class='String'>"WHERE a.aggfnoid = p.oid "</span> 
                          <span class='String'>"AND p.oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80100</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13296"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT aggtransfn, "</span> 
                          <span class='String'>"aggfinalfn, aggtranstype::pg_catalog.regtype, "</span> 
                          <span class='String'>"'-' AS aggcombinefn, '-' AS aggserialfn, "</span> 
                          <span class='String'>"'-' AS aggdeserialfn, '-' AS aggmtransfn, "</span> 
                          <span class='String'>"'-' AS aggminvtransfn, '-' AS aggmfinalfn, "</span> 
                          <span class='String'>"0 AS aggmtranstype, false AS aggfinalextra, "</span> 
                          <span class='String'>"false AS aggmfinalextra, "</span> 
                          <span class='String'>"aggsortop::pg_catalog.regoperator, "</span> 
                          <span class='String'>"false AS hypothetical, "</span> 
                          <span class='String'>"0 AS aggtransspace, agginitval, "</span> 
                          <span class='String'>"0 AS aggmtransspace, NULL AS aggminitval, "</span> 
                          <span class='String'>"true AS convertok "</span> 
                      <span class='String'>"FROM pg_catalog.pg_aggregate a, pg_catalog.pg_proc p "</span> 
                          <span class='String'>"WHERE a.aggfnoid = p.oid "</span> 
                          <span class='String'>"AND p.oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13296"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT aggtransfn, "</span> 
                          <span class='String'>"aggfinalfn, aggtranstype::pg_catalog.regtype, "</span> 
                          <span class='String'>"'-' AS aggcombinefn, '-' AS aggserialfn, "</span> 
                          <span class='String'>"'-' AS aggdeserialfn, '-' AS aggmtransfn, "</span> 
                          <span class='String'>"'-' AS aggminvtransfn, '-' AS aggmfinalfn, "</span> 
                          <span class='String'>"0 AS aggmtranstype, false AS aggfinalextra, "</span> 
                          <span class='String'>"false AS aggmfinalextra, 0 AS aggsortop, "</span> 
                          <span class='String'>"false AS hypothetical, "</span> 
                          <span class='String'>"0 AS aggtransspace, agginitval, "</span> 
                          <span class='String'>"0 AS aggmtransspace, NULL AS aggminitval, "</span> 
                          <span class='String'>"true AS convertok "</span> 
                      <span class='String'>"FROM pg_catalog.pg_aggregate a, pg_catalog.pg_proc p "</span> 
                          <span class='String'>"WHERE a.aggfnoid = p.oid "</span> 
                          <span class='String'>"AND p.oid = '%u'::pg_catalog.oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13296"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13305"><span class='Ref_To_Local'>i_aggtransfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggtransfn"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13306"><span class='Ref_To_Local'>i_aggfinalfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggfinalfn"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13307"><span class='Ref_To_Local'>i_aggcombinefn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggcombinefn"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13308"><span class='Ref_To_Local'>i_aggserialfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggserialfn"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13309"><span class='Ref_To_Local'>i_aggdeserialfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggdeserialfn"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13310"><span class='Ref_To_Local'>i_aggmtransfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggmtransfn"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13311"><span class='Ref_To_Local'>i_aggminvtransfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggminvtransfn"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13312"><span class='Ref_To_Local'>i_aggmfinalfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggmfinalfn"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13313"><span class='Ref_To_Local'>i_aggfinalextra</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggfinalextra"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13314"><span class='Ref_To_Local'>i_aggmfinalextra</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggmfinalextra"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13315"><span class='Ref_To_Local'>i_aggsortop</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggsortop"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13316"><span class='Ref_To_Local'>i_hypothetical</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"hypothetical"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13317"><span class='Ref_To_Local'>i_aggtranstype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggtranstype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13318"><span class='Ref_To_Local'>i_aggtransspace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggtransspace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13319"><span class='Ref_To_Local'>i_aggmtranstype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggmtranstype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13320"><span class='Ref_To_Local'>i_aggmtransspace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggmtransspace"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13321"><span class='Ref_To_Local'>i_agginitval</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"agginitval"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13322"><span class='Ref_To_Local'>i_aggminitval</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"aggminitval"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13323"><span class='Ref_To_Local'>i_convertok</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"convertok"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13324"><span class='Ref_To_Local'>i_proparallel</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proparallel"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13325"><span class='Ref_To_Local'>aggtransfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13305"><span class='Ref_To_Local'>i_aggtransfn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13326"><span class='Ref_To_Local'>aggfinalfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13306"><span class='Ref_To_Local'>i_aggfinalfn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13327"><span class='Ref_To_Local'>aggcombinefn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13307"><span class='Ref_To_Local'>i_aggcombinefn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13328"><span class='Ref_To_Local'>aggserialfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13308"><span class='Ref_To_Local'>i_aggserialfn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13329"><span class='Ref_To_Local'>aggdeserialfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13309"><span class='Ref_To_Local'>i_aggdeserialfn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13330"><span class='Ref_To_Local'>aggmtransfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13310"><span class='Ref_To_Local'>i_aggmtransfn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13331"><span class='Ref_To_Local'>aggminvtransfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13311"><span class='Ref_To_Local'>i_aggminvtransfn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13332"><span class='Ref_To_Local'>aggmfinalfn</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13312"><span class='Ref_To_Local'>i_aggmfinalfn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13333"><span class='Ref_To_Local'>aggfinalextra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13313"><span class='Ref_To_Local'>i_aggfinalextra</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13334"><span class='Ref_To_Local'>aggmfinalextra</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13314"><span class='Ref_To_Local'>i_aggmfinalextra</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13335"><span class='Ref_To_Local'>aggsortop</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13315"><span class='Ref_To_Local'>i_aggsortop</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13337"><span class='Ref_To_Local'>hypothetical</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13316"><span class='Ref_To_Local'>i_hypothetical</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13338"><span class='Ref_To_Local'>aggtranstype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13317"><span class='Ref_To_Local'>i_aggtranstype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13339"><span class='Ref_To_Local'>aggtransspace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13318"><span class='Ref_To_Local'>i_aggtransspace</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13340"><span class='Ref_To_Local'>aggmtranstype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13319"><span class='Ref_To_Local'>i_aggmtranstype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13341"><span class='Ref_To_Local'>aggmtransspace</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13320"><span class='Ref_To_Local'>i_aggmtransspace</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13342"><span class='Ref_To_Local'>agginitval</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13321"><span class='Ref_To_Local'>i_agginitval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13343"><span class='Ref_To_Local'>aggminitval</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13322"><span class='Ref_To_Local'>i_aggminitval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13344"><span class='Ref_To_Local'>convertok</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13323"><span class='Ref_To_Local'>i_convertok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'t'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 8.4 or later; we rely on server-side code for most of the work */ 
</span><a name="LN13506"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>funcargs</span><span class='Delimiter'>; 
</span><a name="LN13507"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>funciargs</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN13506"><span class='Ref_To_Local'>funcargs</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"funcargs"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN13507"><span class='Ref_To_Local'>funciargs</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"funciargs"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN13302"><span class='Ref_To_Local'>aggfullsig</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN228"><span class='Ref_to_Proto'>format_function_arguments</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13506"><span class='Ref_To_Local'>funcargs</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN13301"><span class='Ref_To_Local'>aggsig</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN228"><span class='Ref_to_Proto'>format_function_arguments</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13507"><span class='Ref_To_Local'>funciargs</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <span class='Comment_Multi_Line'>/* pre-8.4, do it ourselves */ 
</span>        <a href="pg_dump.c.html#LN13301"><span class='Ref_To_Local'>aggsig</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN13254"><span class='Ref_to_Func'>format_aggregate_signature</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13303"><span class='Ref_To_Local'>aggsig_tag</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN13254"><span class='Ref_to_Func'>format_aggregate_signature</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13324"><span class='Ref_To_Local'>i_proparallel</span></a> <span class='Operator'>!= -</span><span class='Number'>1</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN13345"><span class='Ref_To_Local'>proparallel</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"proparallel"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN13345"><span class='Ref_To_Local'>proparallel</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN13344"><span class='Ref_To_Local'>convertok</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: aggregate function %s could not be dumped correctly for this database version; ignored\n"</span><span class='Delimiter'>, 
</span>                  <a href="pg_dump.c.html#LN13301"><span class='Ref_To_Local'>aggsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13302"><span class='Ref_To_Local'>aggfullsig</span></a><span class='Parentheses'>) 
</span>            <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13302"><span class='Ref_To_Local'>aggfullsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13301"><span class='Ref_To_Local'>aggsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* regproc and regtype output is already sufficiently quoted */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>"    SFUNC = %s,\n    STYPE = %s"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN13325"><span class='Ref_To_Local'>aggtransfn</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13338"><span class='Ref_To_Local'>aggtranstype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13339"><span class='Ref_To_Local'>aggtransspace</span></a><span class='Delimiter'>, </span><span class='String'>"0"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    SSPACE = %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13339"><span class='Ref_To_Local'>aggtransspace</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13321"><span class='Ref_To_Local'>i_agginitval</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    INITCOND = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13342"><span class='Ref_To_Local'>agginitval</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13326"><span class='Ref_To_Local'>aggfinalfn</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    FINALFUNC = %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13326"><span class='Ref_To_Local'>aggfinalfn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13333"><span class='Ref_To_Local'>aggfinalextra</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    FINALFUNC_EXTRA"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13327"><span class='Ref_To_Local'>aggcombinefn</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    COMBINEFUNC = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13327"><span class='Ref_To_Local'>aggcombinefn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13328"><span class='Ref_To_Local'>aggserialfn</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    SERIALFUNC = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13328"><span class='Ref_To_Local'>aggserialfn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13329"><span class='Ref_To_Local'>aggdeserialfn</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    DESERIALFUNC = %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13329"><span class='Ref_To_Local'>aggdeserialfn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13330"><span class='Ref_To_Local'>aggmtransfn</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    MSFUNC = %s,\n    MINVFUNC = %s,\n    MSTYPE = %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13330"><span class='Ref_To_Local'>aggmtransfn</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13331"><span class='Ref_To_Local'>aggminvtransfn</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13340"><span class='Ref_To_Local'>aggmtranstype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13341"><span class='Ref_To_Local'>aggmtransspace</span></a><span class='Delimiter'>, </span><span class='String'>"0"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    MSSPACE = %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13341"><span class='Ref_To_Local'>aggmtransspace</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN490"><span class='Ref_to_Proto'>PQgetisnull</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13322"><span class='Ref_To_Local'>i_aggminitval</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    MINITCOND = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13343"><span class='Ref_To_Local'>aggminitval</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13332"><span class='Ref_To_Local'>aggmfinalfn</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    MFINALFUNC = %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13332"><span class='Ref_To_Local'>aggmfinalfn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13334"><span class='Ref_To_Local'>aggmfinalextra</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    MFINALFUNC_EXTRA"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN13336"><span class='Ref_To_Local'>aggsortconvop</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN239"><span class='Ref_to_Proto'>convertOperatorReference</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13335"><span class='Ref_To_Local'>aggsortop</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13336"><span class='Ref_To_Local'>aggsortconvop</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    SORTOP = %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13336"><span class='Ref_To_Local'>aggsortconvop</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13336"><span class='Ref_To_Local'>aggsortconvop</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13337"><span class='Ref_To_Local'>hypothetical</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    HYPOTHETICAL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13345"><span class='Ref_To_Local'>proparallel</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="pg_dump.c.html#LN13345"><span class='Ref_To_Local'>proparallel</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/catalog/pg_proc.h.html#LN5493"><span class='Ref_to_Const'>PROPARALLEL_UNSAFE</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13345"><span class='Ref_To_Local'>proparallel</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../include/catalog/pg_proc.h.html#LN5491"><span class='Ref_to_Const'>PROPARALLEL_SAFE</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    PARALLEL = safe"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13345"><span class='Ref_To_Local'>proparallel</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../include/catalog/pg_proc.h.html#LN5492"><span class='Ref_to_Const'>PROPARALLEL_RESTRICTED</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Delimiter'>, </span><span class='String'>",\n    PARALLEL = restricted"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13345"><span class='Ref_To_Local'>proparallel</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="../../include/catalog/pg_proc.h.html#LN5493"><span class='Ref_to_Const'>PROPARALLEL_UNSAFE</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"unrecognized proparallel value for function \"%s\"\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13298"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP AGGREGATE %s.%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN13301"><span class='Ref_To_Local'>aggsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13297"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE AGGREGATE %s (\n%s\n);\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN13302"><span class='Ref_To_Local'>aggfullsig</span></a> <span class='Operator'>? </span><a href="pg_dump.c.html#LN13302"><span class='Ref_To_Local'>aggfullsig</span></a> <span class='Operator'>: </span><a href="pg_dump.c.html#LN13301"><span class='Ref_To_Local'>aggsig</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13299"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"AGGREGATE %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13301"><span class='Ref_To_Local'>aggsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13295"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13297"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13299"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13303"><span class='Ref_To_Local'>aggsig_tag</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"AGGREGATE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13297"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13298"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Aggregate Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13299"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13299"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                   <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Since there is no GRANT ON AGGREGATE syntax, we have to make the ACL 
     * command look like a function's GRANT; in particular this affects the 
     * syntax for zero-argument aggregates and ordered-set aggregates. 
     */ 
</span>    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13301"><span class='Ref_To_Local'>aggsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13303"><span class='Ref_To_Local'>aggsig_tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13301"><span class='Ref_To_Local'>aggsig</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN235"><span class='Ref_to_Proto'>format_function_signature</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13303"><span class='Ref_To_Local'>aggsig_tag</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN235"><span class='Ref_to_Proto'>format_function_signature</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                <span class='String'>"FUNCTION"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN13301"><span class='Ref_To_Local'>aggsig</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13303"><span class='Ref_To_Local'>aggsig_tag</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN197"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN198"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN203"><span class='Ref_to_Member'>proacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN204"><span class='Ref_to_Member'>rproacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN205"><span class='Ref_to_Member'>initproacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13293"><span class='Ref_to_Parameter'>agginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN212"><span class='Ref_to_Member'>aggfn</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN206"><span class='Ref_to_Member'>initrproacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13301"><span class='Ref_To_Local'>aggsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13302"><span class='Ref_To_Local'>aggfullsig</span></a><span class='Parentheses'>) 
</span>        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13302"><span class='Ref_To_Local'>aggfullsig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13303"><span class='Ref_To_Local'>aggsig_tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13304"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13296"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13297"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13298"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13299"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13300"><span class='Ref_To_Local'>details</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpAgg &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpTSParser 
 *    write out a single text search parser 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN13700"></a><span class='Declare_Function'>dumpTSParser</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN478"><span class='Ref_to_Typedef'>TSParserInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>prsinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN13702"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN13703"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN13704"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN13705"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN13702"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13703"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13704"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13705"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13703"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE TEXT SEARCH PARSER %s (\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13703"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    START = %s,\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN240"><span class='Ref_to_Proto'>convertTSFunction</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN481"><span class='Ref_to_Member'>prsstart</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13703"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    GETTOKEN = %s,\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN240"><span class='Ref_to_Proto'>convertTSFunction</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN482"><span class='Ref_to_Member'>prstoken</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13703"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    END = %s,\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN240"><span class='Ref_to_Proto'>convertTSFunction</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN483"><span class='Ref_to_Member'>prsend</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN484"><span class='Ref_to_Member'>prsheadline</span></a> <span class='Operator'>!= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13703"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    HEADLINE = %s,\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN240"><span class='Ref_to_Proto'>convertTSFunction</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN484"><span class='Ref_to_Member'>prsheadline</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13703"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    LEXTYPES = %s );\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN240"><span class='Ref_to_Proto'>convertTSFunction</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN485"><span class='Ref_to_Member'>prslextype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13704"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP TEXT SEARCH PARSER %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13704"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>".%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13705"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"TEXT SEARCH PARSER %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13702"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13703"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13705"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='String'>""</span><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"TEXT SEARCH PARSER"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13703"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13704"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Parser Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13705"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13700"><span class='Ref_to_Parameter'>prsinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN480"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13703"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13704"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13705"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTSParser &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpTSDictionary 
 *    write out a single text search dictionary 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN13774"></a><span class='Declare_Function'>dumpTSDictionary</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN488"><span class='Ref_to_Typedef'>TSDictInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dictinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN13776"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN13777"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN13778"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN13779"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN13780"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN13781"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN13782"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nspname</span><span class='Delimiter'>; 
</span><a name="LN13783"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tmplname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN13776"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13777"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13778"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13779"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13780"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fetch name and namespace of the dictionary's template */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13780"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT nspname, tmplname "</span> 
                      <span class='String'>"FROM pg_ts_template p, pg_namespace n "</span> 
                      <span class='String'>"WHERE p.oid = '%u' AND n.oid = tmplnamespace"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN492"><span class='Ref_to_Member'>dicttemplate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13781"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13780"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13782"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13781"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13783"><span class='Ref_To_Local'>tmplname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13781"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13777"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE TEXT SEARCH DICTIONARY %s (\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13777"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    TEMPLATE = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13782"><span class='Ref_To_Local'>nspname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13777"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13782"><span class='Ref_To_Local'>nspname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13777"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13783"><span class='Ref_To_Local'>tmplname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13781"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* the dictinitoption can be dumped straight into the command */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN493"><span class='Ref_to_Member'>dictinitoption</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13777"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN493"><span class='Ref_to_Member'>dictinitoption</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13777"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" );\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13778"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP TEXT SEARCH DICTIONARY %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13778"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>".%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13779"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"TEXT SEARCH DICTIONARY %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13776"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13777"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13779"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN491"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"TEXT SEARCH DICTIONARY"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13777"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13778"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Dictionary Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13779"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN491"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13774"><span class='Ref_to_Parameter'>dictinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN490"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13777"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13778"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13779"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13780"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTSDictionary &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpTSTemplate 
 *    write out a single text search template 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN13865"></a><span class='Declare_Function'>dumpTSTemplate</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN496"><span class='Ref_to_Typedef'>TSTemplateInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tmplinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN13867"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN13868"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN13869"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN13870"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN13867"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13868"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13869"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13870"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13868"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE TEXT SEARCH TEMPLATE %s (\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN499"><span class='Ref_to_Member'>tmplinit</span></a> <span class='Operator'>!= </span><a href="../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13868"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    INIT = %s,\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN240"><span class='Ref_to_Proto'>convertTSFunction</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN499"><span class='Ref_to_Member'>tmplinit</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13868"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    LEXIZE = %s );\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN240"><span class='Ref_to_Proto'>convertTSFunction</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN500"><span class='Ref_to_Member'>tmpllexize</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13869"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP TEXT SEARCH TEMPLATE %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13869"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>".%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13870"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"TEXT SEARCH TEMPLATE %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13867"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13868"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13870"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='String'>""</span><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"TEXT SEARCH TEMPLATE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13868"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13869"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Template Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13870"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13865"><span class='Ref_to_Parameter'>tmplinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN498"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13868"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13869"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13870"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTSTemplate &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpTSConfig 
 *    write out a single text search configuration 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN13933"></a><span class='Declare_Function'>dumpTSConfig</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN503"><span class='Ref_to_Typedef'>TSConfigInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cfginfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN13935"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN13936"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN13937"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN13938"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN13939"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN13940"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN13941"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>nspname</span><span class='Delimiter'>; 
</span><a name="LN13942"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>prsname</span><span class='Delimiter'>; 
</span><a name="LN13943"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>, 
</span><a name="LN13944"></a>                <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN13945"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_tokenname</span><span class='Delimiter'>; 
</span><a name="LN13946"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_dictname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN13935"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13937"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13938"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13939"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fetch name and namespace of the config's parser */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13939"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT nspname, prsname "</span> 
                      <span class='String'>"FROM pg_ts_parser p, pg_namespace n "</span> 
                      <span class='String'>"WHERE p.oid = '%u' AND n.oid = prsnamespace"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN507"><span class='Ref_to_Member'>cfgparser</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13939"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13941"><span class='Ref_To_Local'>nspname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13942"><span class='Ref_To_Local'>prsname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE TEXT SEARCH CONFIGURATION %s (\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    PARSER = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13941"><span class='Ref_To_Local'>nspname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13941"><span class='Ref_To_Local'>nspname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s );\n"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13942"><span class='Ref_To_Local'>prsname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13939"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13939"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT\n"</span> 
                      <span class='String'>"  ( SELECT alias FROM pg_catalog.ts_token_type('%u'::pg_catalog.oid) AS t\n"</span> 
                      <span class='String'>"    WHERE t.tokid = m.maptokentype ) AS tokenname,\n"</span> 
                      <span class='String'>"  m.mapdict::pg_catalog.regdictionary AS dictname\n"</span> 
                      <span class='String'>"FROM pg_catalog.pg_ts_config_map AS m\n"</span> 
                      <span class='String'>"WHERE m.mapcfg = '%u'\n"</span> 
                      <span class='String'>"ORDER BY m.mapcfg, m.maptokentype, m.mapseqno"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN507"><span class='Ref_to_Member'>cfgparser</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13939"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13943"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN13945"><span class='Ref_To_Local'>i_tokenname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"tokenname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN13946"><span class='Ref_To_Local'>i_dictname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"dictname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13944"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN13944"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN13943"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN13944"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN13999"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tokenname</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13944"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13945"><span class='Ref_To_Local'>i_tokenname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN14000"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>dictname</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13944"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13946"><span class='Ref_To_Local'>i_dictname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13944"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>            strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13999"><span class='Ref_To_Local'>tokenname</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13944"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13945"><span class='Ref_To_Local'>i_tokenname</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* starting a new token type, so start a new command */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13944"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nALTER TEXT SEARCH CONFIGURATION %s\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* tokenname needs quoting, dictname does NOT */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    ADD MAPPING FOR %s WITH %s"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13999"><span class='Ref_To_Local'>tokenname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14000"><span class='Ref_To_Local'>dictname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14000"><span class='Ref_To_Local'>dictname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13943"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13940"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13937"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP TEXT SEARCH CONFIGURATION %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13937"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>".%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13938"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"TEXT SEARCH CONFIGURATION %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13935"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13938"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN506"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"TEXT SEARCH CONFIGURATION"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13937"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Configuration Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13938"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN506"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN13933"><span class='Ref_to_Parameter'>cfginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN505"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13936"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13937"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13938"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN13939"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTSConfig &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpForeignDataWrapper 
 *    write out a single foreign-data wrapper definition 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN14065"></a><span class='Declare_Function'>dumpForeignDataWrapper</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN510"><span class='Ref_to_Typedef'>FdwInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fdwinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN14067"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN14068"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN14069"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN14070"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN14071"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qfdwname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN14067"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14068"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14069"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14070"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14071"><span class='Ref_To_Local'>qfdwname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14068"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE FOREIGN DATA WRAPPER %s"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN14071"><span class='Ref_To_Local'>qfdwname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN514"><span class='Ref_to_Member'>fdwhandler</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14068"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" HANDLER %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN514"><span class='Ref_to_Member'>fdwhandler</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN515"><span class='Ref_to_Member'>fdwvalidator</span></a><span class='Delimiter'>, </span><span class='String'>"-"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14068"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" VALIDATOR %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN515"><span class='Ref_to_Member'>fdwvalidator</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN516"><span class='Ref_to_Member'>fdwoptions</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14068"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" OPTIONS (\n    %s\n)"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN516"><span class='Ref_to_Member'>fdwoptions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14068"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14069"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP FOREIGN DATA WRAPPER %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN14071"><span class='Ref_To_Local'>qfdwname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14070"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"FOREIGN DATA WRAPPER %s"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN14071"><span class='Ref_To_Local'>qfdwname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14067"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14068"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14070"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN513"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"FOREIGN DATA WRAPPER"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14068"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14069"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Handle the ACL */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                <span class='String'>"FOREIGN DATA WRAPPER"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN14071"><span class='Ref_To_Local'>qfdwname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN513"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN517"><span class='Ref_to_Member'>fdwacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN518"><span class='Ref_to_Member'>rfdwacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN519"><span class='Ref_to_Member'>initfdwacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN520"><span class='Ref_to_Member'>initrfdwacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Foreign Data Wrapper Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14070"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN513"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14065"><span class='Ref_to_Parameter'>fdwinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN512"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14071"><span class='Ref_To_Local'>qfdwname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14068"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14069"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14070"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpForeignDataWrapper &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpForeignServer 
 *    write out a foreign server definition 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN14144"></a><span class='Declare_Function'>dumpForeignServer</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN523"><span class='Ref_to_Typedef'>ForeignServerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>srvinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN14146"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN14147"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN14148"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN14149"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN14150"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN14151"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN14152"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>qsrvname</span><span class='Delimiter'>; 
</span><a name="LN14153"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>fdwname</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN14146"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14148"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14149"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14150"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14152"><span class='Ref_To_Local'>qsrvname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* look up the foreign-data wrapper */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14150"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT fdwname "</span> 
                      <span class='String'>"FROM pg_foreign_data_wrapper w "</span> 
                      <span class='String'>"WHERE w.oid = '%u'"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN527"><span class='Ref_to_Member'>srvfdw</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14151"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14150"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14153"><span class='Ref_To_Local'>fdwname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14151"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE SERVER %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14152"><span class='Ref_To_Local'>qsrvname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN528"><span class='Ref_to_Member'>srvtype</span></a> <span class='Operator'>&& </span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN528"><span class='Ref_to_Member'>srvtype</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" TYPE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN528"><span class='Ref_to_Member'>srvtype</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN529"><span class='Ref_to_Member'>srvversion</span></a> <span class='Operator'>&& </span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN529"><span class='Ref_to_Member'>srvversion</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" VERSION "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN529"><span class='Ref_to_Member'>srvversion</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" FOREIGN DATA WRAPPER "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14153"><span class='Ref_To_Local'>fdwname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN534"><span class='Ref_to_Member'>srvoptions</span></a> <span class='Operator'>&& </span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN534"><span class='Ref_to_Member'>srvoptions</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" OPTIONS (\n    %s\n)"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN534"><span class='Ref_to_Member'>srvoptions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14148"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP SERVER %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN14152"><span class='Ref_To_Local'>qsrvname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14149"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"SERVER %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14152"><span class='Ref_To_Local'>qsrvname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14146"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14149"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN526"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"SERVER"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14148"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Handle the ACL */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                <span class='String'>"FOREIGN SERVER"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN14152"><span class='Ref_To_Local'>qsrvname</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN526"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN530"><span class='Ref_to_Member'>srvacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN531"><span class='Ref_to_Member'>rsrvacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN532"><span class='Ref_to_Member'>initsrvacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN533"><span class='Ref_to_Member'>initrsrvacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump user mappings */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN97"><span class='Ref_to_Const'>DUMP_COMPONENT_USERMAP</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN203"><span class='Ref_to_Proto'>dumpUserMappings</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN526"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Foreign Server Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14149"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN526"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14144"><span class='Ref_to_Parameter'>srvinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN525"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14152"><span class='Ref_To_Local'>qsrvname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14147"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14148"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14149"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14150"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpForeignServer &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpUserMappings 
 * 
 * This routine is used to dump any user mappings associated with the 
 * server handed to this routine. Should be called after ArchiveEntry() 
 * for the server. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN14252"></a><span class='Declare_Function'>dumpUserMappings</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, 
</span><a name="LN14253"></a>                 <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>servername</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>namespace</span><span class='Delimiter'>, 
</span><a name="LN14254"></a>                 <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>owner</span><span class='Delimiter'>, 
</span><a name="LN14255"></a>                 <a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a> <span class='Declare_Parameter'>catalogId</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Declare_Parameter'>dumpId</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN14257"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN14258"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN14259"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN14260"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>tag</span><span class='Delimiter'>; 
</span><a name="LN14261"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN14262"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN14263"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_usename</span><span class='Delimiter'>; 
</span><a name="LN14264"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_umoptions</span><span class='Delimiter'>; 
</span><a name="LN14265"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14257"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14260"><span class='Ref_To_Local'>tag</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14258"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14259"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We read from the publicly accessible view pg_user_mappings, so as not 
     * to fail if run by a non-superuser.  Note that the view will show 
     * umoptions as null if the user hasn't got privileges for the associated 
     * server; this means that pg_dump will dump such a mapping, but with no 
     * OPTIONS clause.  A possible alternative is to skip such mappings 
     * altogether, but it's not clear that that's an improvement. 
     */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14252"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14259"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT usename, "</span> 
                      <span class='String'>"array_to_string(ARRAY("</span> 
                      <span class='String'>"SELECT quote_ident(option_name) || ' ' || "</span> 
                      <span class='String'>"quote_literal(option_value) "</span> 
                      <span class='String'>"FROM pg_options_to_table(umoptions) "</span> 
                      <span class='String'>"ORDER BY option_name"</span> 
                      <span class='String'>"), E',\n    ') AS umoptions "</span> 
                      <span class='String'>"FROM pg_user_mappings "</span> 
                      <span class='String'>"WHERE srvid = '%u' "</span> 
                      <span class='String'>"ORDER BY usename"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN14255"><span class='Ref_to_Parameter'>catalogId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14261"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14252"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14259"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14262"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14261"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14263"><span class='Ref_To_Local'>i_usename</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14261"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"usename"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14264"><span class='Ref_To_Local'>i_umoptions</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14261"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"umoptions"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14265"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14265"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN14262"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14265"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN14303"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>usename</span><span class='Delimiter'>; 
</span><a name="LN14304"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>umoptions</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN14303"><span class='Ref_To_Local'>usename</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14261"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14265"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14263"><span class='Ref_To_Local'>i_usename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN14304"><span class='Ref_To_Local'>umoptions</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14261"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14265"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14264"><span class='Ref_To_Local'>i_umoptions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14257"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14257"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE USER MAPPING FOR %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14303"><span class='Ref_To_Local'>usename</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14257"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" SERVER %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14253"><span class='Ref_to_Parameter'>servername</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14304"><span class='Ref_To_Local'>umoptions</span></a> <span class='Operator'>&& </span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14304"><span class='Ref_To_Local'>umoptions</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14257"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" OPTIONS (\n    %s\n)"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14304"><span class='Ref_To_Local'>umoptions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14257"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14258"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14258"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP USER MAPPING FOR %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14303"><span class='Ref_To_Local'>usename</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14258"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>" SERVER %s;\n"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14253"><span class='Ref_to_Parameter'>servername</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14260"><span class='Ref_To_Local'>tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14260"><span class='Ref_To_Local'>tag</span></a><span class='Delimiter'>, </span><span class='String'>"USER MAPPING %s SERVER %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN14303"><span class='Ref_To_Local'>usename</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14253"><span class='Ref_to_Parameter'>servername</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14252"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14260"><span class='Ref_To_Local'>tag</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <span class='Control'>namespace</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14254"><span class='Ref_to_Parameter'>owner</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"USER MAPPING"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14257"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14258"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Operator'>&</span><a href="pg_dump.c.html#LN14255"><span class='Ref_to_Parameter'>dumpId</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14261"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14259"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14258"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14260"><span class='Ref_To_Local'>tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14257"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpUserMappings &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Write out default privileges information 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN14349"></a><span class='Declare_Function'>dumpDefaultACL</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN537"><span class='Ref_to_Typedef'>DefaultACLInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>daclinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN14351"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN14352"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN14353"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>tag</span><span class='Delimiter'>; 
</span><a name="LN14354"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>type</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN14351"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN14351"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN140"><span class='Ref_to_Member'>aclsSkip</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14352"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14353"><span class='Ref_To_Local'>tag</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN541"><span class='Ref_to_Member'>defaclobjtype</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/pg_default_acl.h.html#LN68"><span class='Ref_to_Const'>DEFACLOBJ_RELATION</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN14354"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><span class='String'>"TABLES"</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/pg_default_acl.h.html#LN69"><span class='Ref_to_Const'>DEFACLOBJ_SEQUENCE</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN14354"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><span class='String'>"SEQUENCES"</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/pg_default_acl.h.html#LN70"><span class='Ref_to_Const'>DEFACLOBJ_FUNCTION</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN14354"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><span class='String'>"FUNCTIONS"</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/pg_default_acl.h.html#LN71"><span class='Ref_to_Const'>DEFACLOBJ_TYPE</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN14354"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><span class='String'>"TYPES"</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/catalog/pg_default_acl.h.html#LN72"><span class='Ref_to_Const'>DEFACLOBJ_NAMESPACE</span></a><span class='Operator'>: 
</span>            <a href="pg_dump.c.html#LN14354"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><span class='String'>"SCHEMAS"</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* shouldn't get here */ 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                      <span class='String'>"unrecognized object type in default privileges: %d\n"</span><span class='Delimiter'>, 
</span>                          <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN541"><span class='Ref_to_Member'>defaclobjtype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN14354"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><span class='String'>""</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch daclinfo-&GT;defaclobjty... &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14353"><span class='Ref_To_Local'>tag</span></a><span class='Delimiter'>, </span><span class='String'>"DEFAULT PRIVILEGES FOR %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14354"><span class='Ref_To_Local'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* build the actual command(s) for this tuple */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dumputils.h.html#LN42"><span class='Ref_to_Proto'>buildDefaultACLCommands</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14354"><span class='Ref_To_Local'>type</span></a><span class='Delimiter'>, 
</span>                                 <a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>? 
</span>                                 <a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>: </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                 <a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN542"><span class='Ref_to_Member'>defaclacl</span></a><span class='Delimiter'>, 
</span>                                 <a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN543"><span class='Ref_to_Member'>rdefaclacl</span></a><span class='Delimiter'>, 
</span>                                 <a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN544"><span class='Ref_to_Member'>initdefaclacl</span></a><span class='Delimiter'>, 
</span>                                 <a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN545"><span class='Ref_to_Member'>initrdefaclacl</span></a><span class='Delimiter'>, 
</span>                                 <a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN540"><span class='Ref_to_Member'>defaclrole</span></a><span class='Delimiter'>, 
</span>                                 <a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a><span class='Delimiter'>, 
</span>                                 <a href="pg_dump.c.html#LN14352"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>))</span> 
        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"could not parse default ACL list (%s)\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN542"><span class='Ref_to_Member'>defaclacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14353"><span class='Ref_To_Local'>tag</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>        <a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>? </span><a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN539"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>: </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14349"><span class='Ref_to_Parameter'>daclinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN540"><span class='Ref_to_Member'>defaclrole</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"DEFAULT ACL"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14352"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14353"><span class='Ref_To_Local'>tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14352"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpDefaultACL &raquo; </span> 
 
<span class='Comment_Multi_Line'>/*---------- 
 * Write out grant/revoke information 
 * 
 * 'objCatId' is the catalog ID of the underlying object. 
 * 'objDumpId' is the dump ID of the underlying object. 
 * 'type' must be one of 
 *      TABLE, SEQUENCE, FUNCTION, LANGUAGE, SCHEMA, DATABASE, TABLESPACE, 
 *      FOREIGN DATA WRAPPER, SERVER, or LARGE OBJECT. 
 * 'name' is the formatted name of the object.  Must be quoted etc. already. 
 * 'subname' is the formatted name of the sub-object, if any.  Must be quoted. 
 * 'tag' is the tag for the archive entry (typ. unquoted name of object). 
 * 'nspname' is the namespace the object is in (NULL if none). 
 * 'owner' is the owner, NULL if there is no owner (for languages). 
 * 'acls' is the string read out of the fooacl system catalog field; 
 *      it will be parsed here. 
 * 'racls' contains any initial ACLs that the object had which have now been 
 *      revoked by the user, it will also be parsed here. 
 *---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN14439"></a><span class='Declare_Function'>dumpACL</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a> <span class='Declare_Parameter'>objCatId</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Declare_Parameter'>objDumpId</span><span class='Delimiter'>, 
</span><a name="LN14440"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>type</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>name</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>subname</span><span class='Delimiter'>, 
</span><a name="LN14441"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>tag</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>nspname</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>owner</span><span class='Delimiter'>, 
</span><a name="LN14442"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>acls</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>racls</span><span class='Delimiter'>, 
</span><a name="LN14443"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>initacls</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>initracls</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN14445"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14439"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN14446"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>sql</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Do nothing if ACL dump is not enabled */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14445"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN140"><span class='Ref_to_Member'>aclsSkip</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* --data-only skips ACLs *except* BLOB ACLs */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14445"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14440"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>, </span><span class='String'>"LARGE OBJECT"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14446"><span class='Ref_To_Local'>sql</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Check to see if this object has had any initial ACLs included for it. 
     * If so, we are in binary upgrade mode and these are the ACLs to turn 
     * into GRANT and REVOKE statements to set and record the initial 
     * privileges for an extension object.  Let the backend know that these 
     * are to be recorded by calling binary_upgrade_set_record_init_privs() 
     * before and after. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14443"><span class='Ref_to_Parameter'>initacls</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14443"><span class='Ref_to_Parameter'>initracls</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14446"><span class='Ref_To_Local'>sql</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT pg_catalog.binary_upgrade_set_record_init_privs(true);\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dumputils.h.html#LN38"><span class='Ref_to_Proto'>buildACLCommands</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14440"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14440"><span class='Ref_to_Parameter'>subname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14440"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14443"><span class='Ref_to_Parameter'>initacls</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14443"><span class='Ref_to_Parameter'>initracls</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14441"><span class='Ref_to_Parameter'>owner</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>""</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14439"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14446"><span class='Ref_To_Local'>sql</span></a><span class='Parentheses'>))</span> 
            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                          <span class='String'>"could not parse initial GRANT ACL list (%s) or initial REVOKE ACL list (%s) for object \"%s\" (%s)\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN14443"><span class='Ref_to_Parameter'>initacls</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14443"><span class='Ref_to_Parameter'>initracls</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14440"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14440"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14446"><span class='Ref_To_Local'>sql</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT pg_catalog.binary_upgrade_set_record_init_privs(false);\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="dumputils.h.html#LN38"><span class='Ref_to_Proto'>buildACLCommands</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14440"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14440"><span class='Ref_to_Parameter'>subname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14440"><span class='Ref_to_Parameter'>type</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14442"><span class='Ref_to_Parameter'>acls</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14442"><span class='Ref_to_Parameter'>racls</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14441"><span class='Ref_to_Parameter'>owner</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>""</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14439"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14446"><span class='Ref_To_Local'>sql</span></a><span class='Parentheses'>))</span> 
        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                      <span class='String'>"could not parse GRANT ACL list (%s) or REVOKE ACL list (%s) for object \"%s\" (%s)\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN14442"><span class='Ref_to_Parameter'>acls</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14442"><span class='Ref_to_Parameter'>racls</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14440"><span class='Ref_to_Parameter'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14440"><span class='Ref_to_Parameter'>type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14446"><span class='Ref_To_Local'>sql</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN46"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14439"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14441"><span class='Ref_to_Parameter'>tag</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14441"><span class='Ref_to_Parameter'>nspname</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14441"><span class='Ref_to_Parameter'>owner</span></a> <span class='Operator'>? </span><a href="pg_dump.c.html#LN14441"><span class='Ref_to_Parameter'>owner</span></a> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"ACL"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN54"><span class='Ref_to_EnumConst'>SECTION_NONE</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14446"><span class='Ref_To_Local'>sql</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14439"><span class='Ref_to_Parameter'>objDumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14446"><span class='Ref_To_Local'>sql</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpACL &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpSecLabel 
 * 
 * This routine is used to dump any security labels associated with the 
 * object handed to this routine. The routine takes a constant character 
 * string for the target part of the security-label command, plus 
 * the namespace and owner of the object (for labeling the ArchiveEntry), 
 * plus catalog ID and subid which are the lookup key for pg_seclabel, 
 * plus the dump ID for the object (for setting a dependency). 
 * If a matching pg_seclabel entry is found, it is dumped. 
 * 
 * Note: although this routine takes a dumpId for dependency purposes, 
 * that purpose is just to mark the dependency in the emitted dump file 
 * for possible future use by pg_restore.  We do NOT use it for determining 
 * ordering of the label in the dump file, because this routine is called 
 * after dependency sorting occurs.  This routine should be called just after 
 * calling ArchiveEntry() for the specified object. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN14515"></a><span class='Declare_Function'>dumpSecLabel</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Delimiter'>, 
</span><a name="LN14516"></a>             <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>namespace</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>owner</span><span class='Delimiter'>, 
</span><a name="LN14517"></a>             <a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a> <span class='Declare_Parameter'>catalogId</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>subid</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Declare_Parameter'>dumpId</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN14519"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14515"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN14520"></a>    <a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>labels</span><span class='Delimiter'>; 
</span><a name="LN14521"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nlabels</span><span class='Delimiter'>; 
</span><a name="LN14522"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN14523"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* do nothing, if --no-security-labels is supplied */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14519"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN148"><span class='Ref_to_Member'>no_security_labels</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Comments are schema not data ... except blob comments are data */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strncmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14515"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>, </span><span class='String'>"LARGE OBJECT "</span><span class='Delimiter'>, </span><span class='Number'>13</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14519"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* We do dump blob security labels in binary-upgrade mode */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14519"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN137"><span class='Ref_to_Member'>schemaOnly</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN14519"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Search for security labels associated with catalogId, using table */ 
</span>    <a href="pg_dump.c.html#LN14521"><span class='Ref_To_Local'>nlabels</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN159"><span class='Ref_to_Proto'>findSecLabels</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14515"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14517"><span class='Ref_to_Parameter'>catalogId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14517"><span class='Ref_to_Parameter'>catalogId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN14520"><span class='Ref_To_Local'>labels</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14523"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14522"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14522"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN14521"><span class='Ref_To_Local'>nlabels</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14522"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Ignore label entries for which the subid doesn't match. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14520"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN78"><span class='Ref_to_Member'>objsubid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN14517"><span class='Ref_to_Parameter'>subid</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14523"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SECURITY LABEL FOR %s ON %s IS "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14520"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN74"><span class='Ref_to_Member'>provider</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14515"><span class='Ref_to_Parameter'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14523"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14520"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14522"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN75"><span class='Ref_to_Member'>label</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14515"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14523"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14523"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN46"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14515"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14515"><span class='Ref_to_Parameter'>target</span></a><span class='Delimiter'>, </span><span class='Control'>namespace</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14516"><span class='Ref_to_Parameter'>owner</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"SECURITY LABEL"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN54"><span class='Ref_to_EnumConst'>SECTION_NONE</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14523"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14517"><span class='Ref_to_Parameter'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14523"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpSecLabel &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpTableSecLabel 
 * 
 * As above, but dump security label for both the specified table (or view) 
 * and its columns. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN14581"></a><span class='Declare_Function'>dumpTableSecLabel</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>reltypename</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN14583"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN14584"></a>    <a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>labels</span><span class='Delimiter'>; 
</span><a name="LN14585"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nlabels</span><span class='Delimiter'>; 
</span><a name="LN14586"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN14587"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN14588"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>target</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* do nothing, if --no-security-labels is supplied */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14583"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN148"><span class='Ref_to_Member'>no_security_labels</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* SecLabel are SCHEMA not data */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14583"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Search for comments associated with relation, using table */ 
</span>    <a href="pg_dump.c.html#LN14585"><span class='Ref_To_Local'>nlabels</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN159"><span class='Ref_to_Proto'>findSecLabels</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, 
</span>                            <a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a><span class='Delimiter'>, 
</span>                            <a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, 
</span>                            <span class='Operator'>&</span><a href="pg_dump.c.html#LN14584"><span class='Ref_To_Local'>labels</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* If security labels exist, build SECURITY LABEL statements */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14585"><span class='Ref_To_Local'>nlabels</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14587"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14588"><span class='Ref_To_Local'>target</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14586"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14586"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN14585"><span class='Ref_To_Local'>nlabels</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14586"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN14613"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>colname</span><span class='Delimiter'>; 
</span><a name="LN14614"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>provider</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14584"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14586"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN74"><span class='Ref_to_Member'>provider</span></a><span class='Delimiter'>; 
</span><a name="LN14615"></a>        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>label</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14584"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14586"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN75"><span class='Ref_to_Member'>label</span></a><span class='Delimiter'>; 
</span><a name="LN14616"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>objsubid</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14584"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14586"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN78"><span class='Ref_to_Member'>objsubid</span></a><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14588"><span class='Ref_To_Local'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14616"><span class='Ref_To_Local'>objsubid</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14588"><span class='Ref_To_Local'>target</span></a><span class='Delimiter'>, </span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>reltypename</span></a><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN14613"><span class='Ref_To_Local'>colname</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN264"><span class='Ref_to_Proto'>getAttrName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14616"><span class='Ref_To_Local'>objsubid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* first fmtId result must be consumed before calling it again */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14588"><span class='Ref_To_Local'>target</span></a><span class='Delimiter'>, </span><span class='String'>"COLUMN %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14588"><span class='Ref_To_Local'>target</span></a><span class='Delimiter'>, </span><span class='String'>".%s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14613"><span class='Ref_To_Local'>colname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14587"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SECURITY LABEL FOR %s ON %s IS "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14614"><span class='Ref_To_Local'>provider</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14588"><span class='Ref_To_Local'>target</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14587"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14615"><span class='Ref_To_Local'>label</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14587"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;nlabels;i++ &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14587"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN46"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14588"><span class='Ref_To_Local'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14588"><span class='Ref_To_Local'>target</span></a><span class='Delimiter'>, </span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>reltypename</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14588"><span class='Ref_To_Local'>target</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"SECURITY LABEL"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN54"><span class='Ref_to_EnumConst'>SECTION_NONE</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN14587"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14581"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14587"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14588"><span class='Ref_To_Local'>target</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTableSecLabel &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * findSecLabels 
 * 
 * Find the security label(s), if any, associated with the given object. 
 * All the objsubid values associated with the given classoid/objoid are 
 * found with one search. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN14662"></a><span class='Declare_Function'>findSecLabels</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>classoid</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>objoid</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>items</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* static storage for table of security labels */ 
</span><a name="LN14665"></a>    <span class='Keyword'>static </span><a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>labels</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN14666"></a>    <span class='Keyword'>static int</span>  <span class='Declare_Local'>nlabels</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
<a name="LN14668"></a>    <a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>middle</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN14669"></a>    <a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>low</span><span class='Delimiter'>; 
</span><a name="LN14670"></a>    <a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>high</span><span class='Delimiter'>; 
</span><a name="LN14671"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nmatch</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Get security labels if we didn't already */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14666"><span class='Ref_To_Local'>nlabels</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN14666"><span class='Ref_To_Local'>nlabels</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN161"><span class='Ref_to_Proto'>collectSecLabels</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN14665"><span class='Ref_To_Local'>labels</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14666"><span class='Ref_To_Local'>nlabels</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span>           <span class='Comment_Single_Line'>/* no labels, so no match is possible */ 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>items</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Do binary search to find some item matching the object. 
     */ 
</span>    <a href="pg_dump.c.html#LN14669"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN14665"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <a href="pg_dump.c.html#LN14670"><span class='Ref_To_Local'>high</span></a> <span class='Operator'>= &</span><a href="pg_dump.c.html#LN14665"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14666"><span class='Ref_To_Local'>nlabels</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14669"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>&LT;= </span><a href="pg_dump.c.html#LN14670"><span class='Ref_To_Local'>high</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14669"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14670"><span class='Ref_To_Local'>high</span></a> <span class='Operator'>- </span><a href="pg_dump.c.html#LN14669"><span class='Ref_To_Local'>low</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>2</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>classoid</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN76"><span class='Ref_to_Member'>classoid</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN14670"><span class='Ref_To_Local'>high</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>classoid</span></a> <span class='Operator'>&GT; </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN76"><span class='Ref_to_Member'>classoid</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN14669"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>objoid</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN77"><span class='Ref_to_Member'>objoid</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN14670"><span class='Ref_To_Local'>high</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>objoid</span></a> <span class='Operator'>&GT; </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN77"><span class='Ref_to_Member'>objoid</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN14669"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* found a match */ 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14669"><span class='Ref_To_Local'>low</span></a> <span class='Operator'>&GT; </span><a href="pg_dump.c.html#LN14670"><span class='Ref_To_Local'>high</span></a><span class='Parentheses'>)</span>             <span class='Comment_Single_Line'>/* no matches */ 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>items</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now determine how many items match the object.  The search loop 
     * invariant still holds: only items between low and high inclusive could 
     * match. 
     */ 
</span>    <a href="pg_dump.c.html#LN14671"><span class='Ref_To_Local'>nmatch</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>&GT; </span><a href="pg_dump.c.html#LN14669"><span class='Ref_To_Local'>low</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>classoid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a><span class='Delimiter'>[</span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN76"><span class='Ref_to_Member'>classoid</span></a> <span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>objoid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a><span class='Delimiter'>[</span><span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN77"><span class='Ref_to_Member'>objoid</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN14671"><span class='Ref_To_Local'>nmatch</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>items</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>+= </span><a href="pg_dump.c.html#LN14671"><span class='Ref_To_Local'>nmatch</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a> <span class='Operator'>&LT;= </span><a href="pg_dump.c.html#LN14670"><span class='Ref_To_Local'>high</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>classoid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN76"><span class='Ref_to_Member'>classoid</span></a> <span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN14662"><span class='Ref_to_Parameter'>objoid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.c.html#LN77"><span class='Ref_to_Member'>objoid</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN14668"><span class='Ref_To_Local'>middle</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN14671"><span class='Ref_To_Local'>nmatch</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN14671"><span class='Ref_To_Local'>nmatch</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end findSecLabels &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * collectSecLabels 
 * 
 * Construct a table of all security labels available for database objects. 
 * It's much faster to pull them all at once. 
 * 
 * The table is sorted by classoid/objid/objsubid for speed in lookup. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN14749"></a><span class='Declare_Function'>collectSecLabels</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>items</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN14751"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN14752"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN14753"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_label</span><span class='Delimiter'>; 
</span><a name="LN14754"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_provider</span><span class='Delimiter'>; 
</span><a name="LN14755"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_classoid</span><span class='Delimiter'>; 
</span><a name="LN14756"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_objoid</span><span class='Delimiter'>; 
</span><a name="LN14757"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_objsubid</span><span class='Delimiter'>; 
</span><a name="LN14758"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>; 
</span><a name="LN14759"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN14760"></a>    <a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>labels</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14752"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14752"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                         <span class='String'>"SELECT label, provider, classoid, objoid, objsubid "</span> 
                         <span class='String'>"FROM pg_catalog.pg_seclabel "</span> 
                         <span class='String'>"ORDER BY classoid, objoid, objsubid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14749"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14752"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Construct lookup table containing OIDs in numeric form */ 
</span>    <a href="pg_dump.c.html#LN14753"><span class='Ref_To_Local'>i_label</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"label"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14754"><span class='Ref_To_Local'>i_provider</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"provider"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14755"><span class='Ref_To_Local'>i_classoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"classoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14756"><span class='Ref_To_Local'>i_objoid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"objoid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN14757"><span class='Ref_To_Local'>i_objsubid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"objsubid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14758"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14760"><span class='Ref_To_Local'>labels</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14758"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN72"><span class='Ref_to_Typedef'>SecLabelItem</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN14758"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN14760"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN75"><span class='Ref_to_Member'>label</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14753"><span class='Ref_To_Local'>i_label</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN14760"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN74"><span class='Ref_to_Member'>provider</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14754"><span class='Ref_To_Local'>i_provider</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN14760"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN76"><span class='Ref_to_Member'>classoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14755"><span class='Ref_To_Local'>i_classoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN14760"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN77"><span class='Ref_to_Member'>objoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14756"><span class='Ref_To_Local'>i_objoid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN14760"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.c.html#LN78"><span class='Ref_to_Member'>objsubid</span></a> <span class='Operator'>= </span>atoi<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14751"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14759"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14757"><span class='Ref_To_Local'>i_objsubid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Do NOT free the PGresult since we are keeping pointers into it */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14752"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pg_dump.c.html#LN14749"><span class='Ref_to_Parameter'>items</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14760"><span class='Ref_To_Local'>labels</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="pg_dump.c.html#LN14758"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end collectSecLabels &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpTable 
 *    write out to fout the declarations (not data) of a user-defined table 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN14803"></a><span class='Declare_Function'>dumpTable</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN14805"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN14806"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>namecopy</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * noop if we are not dumping anything about this table, or if we are 
     * doing a data-only dump 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN14805"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN191"><span class='Ref_to_Proto'>dumpSequence</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="pg_dump.c.html#LN189"><span class='Ref_to_Proto'>dumpTableSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Handle the ACL here */ 
</span>    <a href="pg_dump.c.html#LN14806"><span class='Ref_To_Local'>namecopy</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN161"><span class='Ref_to_Const'>RELKIND_SEQUENCE</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"SEQUENCE"</span> <span class='Operator'>: 
</span>                <span class='String'>"TABLE"</span><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN14806"><span class='Ref_To_Local'>namecopy</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN262"><span class='Ref_to_Member'>relacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN263"><span class='Ref_to_Member'>rrelacl</span></a><span class='Delimiter'>, 
</span>                <a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN264"><span class='Ref_to_Member'>initrelacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN265"><span class='Ref_to_Member'>initrrelacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Handle column ACLs, if any.  Note: we pull these with a separate query 
     * rather than trying to fetch them during getTableAttrs, so that we won't 
     * miss ACLs on system columns. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN95"><span class='Ref_to_Const'>DUMP_COMPONENT_ACL</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN14838"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN14839"></a>        <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN14840"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>90600</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN14844"></a>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>acl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN14845"></a>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>racl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN14846"></a>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initacl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN14847"></a>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>initracl_subquery</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
            <a href="dumputils.h.html#LN53"><span class='Ref_to_Proto'>buildACLQueries</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14844"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14845"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14846"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN14847"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Delimiter'>, </span><span class='String'>"at.attacl"</span><span class='Delimiter'>, </span><span class='String'>"c.relowner"</span><span class='Delimiter'>, </span><span class='String'>"'c'"</span><span class='Delimiter'>, 
</span>                            <a href="pg_dump.c.html#LN14805"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14838"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT at.attname, "</span> 
                              <span class='String'>"%s AS attacl, "</span> 
                              <span class='String'>"%s AS rattacl, "</span> 
                              <span class='String'>"%s AS initattacl, "</span> 
                              <span class='String'>"%s AS initrattacl "</span> 
                              <span class='String'>"FROM pg_catalog.pg_attribute at "</span> 
                       <span class='String'>"JOIN pg_catalog.pg_class c ON (at.attrelid = c.oid) "</span> 
                              <span class='String'>"LEFT JOIN pg_catalog.pg_init_privs pip ON "</span> 
                              <span class='String'>"(at.attrelid = pip.objoid "</span> 
             <span class='String'>"AND pip.classoid = 'pg_catalog.pg_class'::pg_catalog.regclass "</span> 
                              <span class='String'>"AND at.attnum = pip.objsubid) "</span> 
                              <span class='String'>"WHERE at.attrelid = '%u'::pg_catalog.oid AND "</span> 
                              <span class='String'>"NOT at.attisdropped "</span> 
                              <span class='String'>"AND ("</span> 
                              <span class='String'>"%s IS NOT NULL OR "</span> 
                              <span class='String'>"%s IS NOT NULL OR "</span> 
                              <span class='String'>"%s IS NOT NULL OR "</span> 
                              <span class='String'>"%s IS NOT NULL)"</span> 
                              <span class='String'>"ORDER BY at.attnum"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN14844"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN14845"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN14846"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN14847"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN14844"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN14845"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN14846"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN14847"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14844"><span class='Ref_To_Local'>acl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14845"><span class='Ref_To_Local'>racl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14846"><span class='Ref_To_Local'>initacl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14847"><span class='Ref_To_Local'>initracl_subquery</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14838"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT attname, attacl, NULL as rattacl, "</span> 
                              <span class='String'>"NULL AS initattacl, NULL AS initrattacl "</span> 
                              <span class='String'>"FROM pg_catalog.pg_attribute "</span> 
                <span class='String'>"WHERE attrelid = '%u'::pg_catalog.oid AND NOT attisdropped "</span> 
                              <span class='String'>"AND attacl IS NOT NULL "</span> 
                              <span class='String'>"ORDER BY attnum"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="pg_dump.c.html#LN14839"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14838"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14840"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14840"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14839"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14840"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span><a name="LN14904"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attname</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14839"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14840"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN14905"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attacl</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14839"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14840"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN14906"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>rattacl</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14839"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14840"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN14907"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>initattacl</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14839"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14840"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN14908"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>initrattacl</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14839"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14840"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN14909"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>attnamecopy</span><span class='Delimiter'>; 
</span><a name="LN14910"></a>            <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>acltag</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN14909"><span class='Ref_To_Local'>attnamecopy</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14904"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN14910"><span class='Ref_To_Local'>acltag</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"%s.%s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14904"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Column's GRANT type is always TABLE */ 
</span>            <a href="pg_dump.c.html#LN208"><span class='Ref_to_Proto'>dumpACL</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, </span><span class='String'>"TABLE"</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN14806"><span class='Ref_To_Local'>namecopy</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14909"><span class='Ref_To_Local'>attnamecopy</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14910"><span class='Ref_To_Local'>acltag</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14803"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN14905"><span class='Ref_To_Local'>attacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14906"><span class='Ref_To_Local'>rattacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14907"><span class='Ref_To_Local'>initattacl</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14908"><span class='Ref_To_Local'>initrattacl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14909"><span class='Ref_To_Local'>attnamecopy</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14910"><span class='Ref_To_Local'>acltag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;PQntuples(res);... &raquo; </span> 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14839"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14838"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if fout-&GT;remoteVersion&GT;=... &raquo; </span> 
 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14806"><span class='Ref_To_Local'>namecopy</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTable &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Create the AS clause for a view or materialized view. The semicolon is 
 * stripped because a materialized view must add a WITH NO DATA clause. 
 * 
 * This returns a new buffer which must be freed by the caller. 
 */ 
</span><span class='Keyword'>static </span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> 
<a name="LN14938"></a><span class='Declare_Function'>createViewAsClause</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN14940"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN14941"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN14942"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN14943"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Fetch the view definition */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14940"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>         <span class='String'>"SELECT pg_catalog.pg_get_viewdef('%u'::pg_catalog.oid) AS viewdef"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN14938"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN14942"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14938"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14940"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14942"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14942"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"query to obtain definition of view \"%s\" returned no data\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN14938"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"query to obtain definition of view \"%s\" returned more than one definition\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN14938"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN14943"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN489"><span class='Ref_to_Proto'>PQgetlength</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14942"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14943"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"definition of view \"%s\" appears to be empty (length zero)\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN14938"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Strip off the trailing semicolon so that other things may follow. */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14942"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14943"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>';'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN178"><span class='Ref_to_Proto'>appendBinaryPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14941"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14942"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14943"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14942"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14940"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN14941"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end createViewAsClause &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Create a dummy AS clause for a view.  This is used when the real view 
 * definition has to be postponed because of circular dependencies. 
 * We must duplicate the view's external properties -- column names and types 
 * (including collation) -- so that it works for subsequent references. 
 * 
 * This returns a new buffer which must be freed by the caller. 
 */ 
</span><span class='Keyword'>static </span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> 
<a name="LN14987"></a><span class='Declare_Function'>createDummyViewAsClause</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN14989"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN14990"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14989"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14990"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14990"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN14987"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN302"><span class='Ref_to_Member'>numatts</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN14990"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14990"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14989"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14989"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='String'>"\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14989"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='String'>"NULL::%s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN14987"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN304"><span class='Ref_to_Member'>atttypnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14990"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Must add collation if not default for the type, because CREATE OR 
         * REPLACE VIEW won't change it 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14987"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN315"><span class='Ref_to_Member'>attcollation</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14990"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN15008"></a>            <a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>coll</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN15008"><span class='Ref_To_Local'>coll</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN653"><span class='Ref_to_Proto'>findCollationByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14987"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN315"><span class='Ref_to_Member'>attcollation</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14990"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15008"><span class='Ref_To_Local'>coll</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* always schema-qualify, don't try to be smart */ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14989"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='String'>" COLLATE %s."</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15008"><span class='Ref_To_Local'>coll</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14989"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15008"><span class='Ref_To_Local'>coll</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14989"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><span class='String'>" AS %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN14987"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN14990"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;tbinfo-&GT;numatts... &raquo; </span> 
 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN14989"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end createDummyViewAsClause &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpTableSchema 
 *    write the declaration (not data) of one user-defined table or view 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN15031"></a><span class='Declare_Function'>dumpTableSchema</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN15033"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN15034"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN15035"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN15036"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN15037"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numParents</span><span class='Delimiter'>; 
</span><a name="LN15038"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>**</span><span class='Declare_Local'>parents</span><span class='Delimiter'>; 
</span><a name="LN15039"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>actual_atts</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* number of attrs in this CREATE statement */ 
</span><a name="LN15040"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>reltypename</span><span class='Delimiter'>; 
</span><a name="LN15041"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>storage</span><span class='Delimiter'>; 
</span><a name="LN15042"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>srvname</span><span class='Delimiter'>; 
</span><a name="LN15043"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>ftoptions</span><span class='Delimiter'>; 
</span><a name="LN15044"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>, 
</span><a name="LN15045"></a>                <span class='Declare_Local'>k</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN256"><span class='Ref_to_Proto'>binary_upgrade_set_type_oids_by_rel_oid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                                <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Is it a table or a view? */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN15057"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Note: keep this code in sync with the is_view case in dumpRule() 
         */ 
</span> 
        <a href="pg_dump.c.html#LN15040"><span class='Ref_To_Local'>reltypename</span></a> <span class='Operator'>= </span><span class='String'>"VIEW"</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * DROP must be fully qualified in case same name appears in 
         * pg_catalog 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15035"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP VIEW %s."</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15035"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN258"><span class='Ref_to_Proto'>binary_upgrade_set_pg_class_oids</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                             <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE VIEW %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN294"><span class='Ref_to_Member'>dummy_view</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN15057"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14986"><span class='Ref_to_Func'>createDummyViewAsClause</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN266"><span class='Ref_to_Proto'>nonemptyReloptions</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN271"><span class='Ref_to_Member'>reloptions</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" WITH ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN267"><span class='Ref_to_Proto'>appendReloptionsArrayAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN271"><span class='Ref_to_Member'>reloptions</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="pg_dump.c.html#LN15057"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14937"><span class='Ref_to_Func'>createViewAsClause</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" AS\n%s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15057"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15057"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN272"><span class='Ref_to_Member'>checkoption</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& !</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN294"><span class='Ref_to_Member'>dummy_view</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n  WITH %s CHECK OPTION"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN272"><span class='Ref_to_Member'>checkoption</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15036"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"VIEW %s"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tbinfo-&GT;relkind==RELK... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a><span class='Operator'>: 
</span>                <span class='Delimiter'>{ 
</span><a name="LN15107"></a>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN15108"></a>                    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN15109"></a>                    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_srvname</span><span class='Delimiter'>; 
</span><a name="LN15110"></a>                    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_ftoptions</span><span class='Delimiter'>; 
</span> 
                    <a href="pg_dump.c.html#LN15040"><span class='Ref_To_Local'>reltypename</span></a> <span class='Operator'>= </span><span class='String'>"FOREIGN TABLE"</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* retrieve name of foreign server and generic options */ 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15107"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                                      <span class='String'>"SELECT fs.srvname, "</span> 
                                      <span class='String'>"pg_catalog.array_to_string(ARRAY("</span> 
                             <span class='String'>"SELECT pg_catalog.quote_ident(option_name) || "</span> 
                             <span class='String'>"' ' || pg_catalog.quote_literal(option_value) "</span> 
                            <span class='String'>"FROM pg_catalog.pg_options_to_table(ftoptions) "</span> 
                                      <span class='String'>"ORDER BY option_name"</span> 
                                      <span class='String'>"), E',\n    ') AS ftoptions "</span> 
                                      <span class='String'>"FROM pg_catalog.pg_foreign_table ft "</span> 
                                      <span class='String'>"JOIN pg_catalog.pg_foreign_server fs "</span> 
                                      <span class='String'>"ON (fs.oid = ft.ftserver) "</span> 
                                      <span class='String'>"WHERE ft.ftrelid = '%u'"</span><span class='Delimiter'>, 
</span>                                      <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="pg_dump.c.html#LN15108"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15107"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="pg_dump.c.html#LN15109"><span class='Ref_To_Local'>i_srvname</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15108"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"srvname"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="pg_dump.c.html#LN15110"><span class='Ref_To_Local'>i_ftoptions</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15108"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"ftoptions"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="pg_dump.c.html#LN15042"><span class='Ref_To_Local'>srvname</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15108"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15109"><span class='Ref_To_Local'>i_srvname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="pg_dump.c.html#LN15043"><span class='Ref_To_Local'>ftoptions</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15108"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15110"><span class='Ref_To_Local'>i_ftoptions</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15108"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15107"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Control'>case</span> <a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Operator'>: 
</span>                <a href="pg_dump.c.html#LN15040"><span class='Ref_To_Local'>reltypename</span></a> <span class='Operator'>= </span><span class='String'>"MATERIALIZED VIEW"</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN15042"><span class='Ref_To_Local'>srvname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN15043"><span class='Ref_To_Local'>ftoptions</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="pg_dump.c.html#LN15040"><span class='Ref_To_Local'>reltypename</span></a> <span class='Operator'>= </span><span class='String'>"TABLE"</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN15042"><span class='Ref_To_Local'>srvname</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN15043"><span class='Ref_To_Local'>ftoptions</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch tbinfo-&GT;relkind &raquo; </span> 
 
        <a href="pg_dump.c.html#LN15037"><span class='Ref_To_Local'>numParents</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN328"><span class='Ref_to_Member'>numParents</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN15038"><span class='Ref_To_Local'>parents</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN329"><span class='Ref_to_Member'>parents</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * DROP must be fully qualified in case same name appears in 
         * pg_catalog 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15035"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP %s %s."</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15040"><span class='Ref_To_Local'>reltypename</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15035"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15036"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15040"><span class='Ref_To_Local'>reltypename</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN258"><span class='Ref_to_Proto'>binary_upgrade_set_pg_class_oids</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                             <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE %s%s %s"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN267"><span class='Ref_to_Member'>relpersistence</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN170"><span class='Ref_to_Const'>RELPERSISTENCE_UNLOGGED</span></a> <span class='Operator'>? 
</span>                          <span class='String'>"UNLOGGED "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN15040"><span class='Ref_To_Local'>reltypename</span></a><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Attach to type, if reloftype; except in case of a binary upgrade, 
         * we dump the table normally and attach it to the type afterward. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN286"><span class='Ref_to_Member'>reloftype</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" OF %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN286"><span class='Ref_to_Member'>reloftype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * If the table is a partition, dump it as such; except in the case of 
         * a binary upgrade, we dump the table normally and attach it to the 
         * parent afterward. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN296"><span class='Ref_to_Member'>ispartition</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN15187"></a>            <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>parentRel</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN329"><span class='Ref_to_Member'>parents</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * With partitions, unlike inheritance, there can only be one 
             * parent. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN328"><span class='Ref_to_Member'>numParents</span></a> <span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>                <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"invalid number of parents %d for table \"%s\"\n"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN328"><span class='Ref_to_Member'>numParents</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" PARTITION OF "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15187"><span class='Ref_To_Local'>parentRel</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, 
</span>                                <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15187"><span class='Ref_To_Local'>parentRel</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15187"><span class='Ref_To_Local'>parentRel</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Dump the attributes */ 
</span>            <a href="pg_dump.c.html#LN15039"><span class='Ref_To_Local'>actual_atts</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN302"><span class='Ref_to_Member'>numatts</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * Normally, dump if it's locally defined in this table, and 
                 * not dropped.  But for binary upgrade, we'll dump all the 
                 * columns, and then fix up the dropped and nonlocal cases 
                 * below. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.h.html#LN693"><span class='Ref_to_Proto'>shouldPrintColumn</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* 
                     * Default value --- suppress if to be printed separately. 
                     */ 
</span><a name="LN15221"></a>                    <span class='Keyword'>bool</span>        <span class='Declare_Local'>has_default</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN319"><span class='Ref_to_Member'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& 
</span>                                             <span class='Operator'>!</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN319"><span class='Ref_to_Member'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN341"><span class='Ref_to_Member'>separate</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Not Null constraint --- suppress if inherited, except 
                     * in binary-upgrade case where that won't work. 
                     */ 
</span><a name="LN15228"></a>                    <span class='Keyword'>bool</span>        <span class='Declare_Local'>has_notnull</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN317"><span class='Ref_to_Member'>notnull</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>&& 
</span>                                               <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN318"><span class='Ref_to_Member'>inhNotNull</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>|| 
</span>                                                <a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Skip column if fully defined by reloftype or the 
                     * partition parent. 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN286"><span class='Ref_to_Member'>reloftype</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN296"><span class='Ref_to_Member'>ispartition</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                        <span class='Operator'>!</span><a href="pg_dump.c.html#LN15221"><span class='Ref_To_Local'>has_default</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN15228"><span class='Ref_To_Local'>has_notnull</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>)</span> 
                        <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Format properly if not first attr */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15039"><span class='Ref_To_Local'>actual_atts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="pg_dump.c.html#LN15039"><span class='Ref_To_Local'>actual_atts</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Attribute name */ 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN309"><span class='Ref_to_Member'>attisdropped</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * ALTER TABLE DROP COLUMN clears 
                         * pg_attribute.atttypid, so we will not have gotten a 
                         * valid type name; insert INTEGER as a stopgap. We'll 
                         * clean things up later. 
                         */ 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" INTEGER /* dummy */"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* Skip all the rest, too */ 
</span>                        <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Attribute type 
                     * 
                     * In binary-upgrade mode, we always include the type. If 
                     * we aren't in binary-upgrade mode, then we skip the type 
                     * when creating a typed table ('OF type_name') or a 
                     * partition ('PARTITION OF'), since the type comes from 
                     * the parent/partitioned table. 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a> <span class='Operator'>|| </span><span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN286"><span class='Ref_to_Member'>reloftype</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN296"><span class='Ref_to_Member'>ispartition</span></a><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" %s"</span><span class='Delimiter'>, 
</span>                                          <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN304"><span class='Ref_to_Member'>atttypnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Comment_Multi_Line'>/* Add collation if not default for the type */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN315"><span class='Ref_to_Member'>attcollation</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
                    <span class='Delimiter'>{ 
</span><a name="LN15282"></a>                        <a href="pg_dump.h.html#LN243"><span class='Ref_to_Typedef'>CollInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>coll</span><span class='Delimiter'>; 
</span> 
                        <a href="pg_dump.c.html#LN15282"><span class='Ref_To_Local'>coll</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN653"><span class='Ref_to_Proto'>findCollationByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN315"><span class='Ref_to_Member'>attcollation</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15282"><span class='Ref_To_Local'>coll</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Comment_Multi_Line'>/* always schema-qualify, don't try to be smart */ 
</span>                            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" COLLATE %s."</span><span class='Delimiter'>, 
</span>                                     <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15282"><span class='Ref_To_Local'>coll</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15282"><span class='Ref_To_Local'>coll</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN245"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15221"><span class='Ref_To_Local'>has_default</span></a><span class='Parentheses'>) 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" DEFAULT %s"</span><span class='Delimiter'>, 
</span>                                          <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN319"><span class='Ref_to_Member'>attrdefs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN340"><span class='Ref_to_Member'>adef_expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15228"><span class='Ref_To_Local'>has_notnull</span></a><span class='Parentheses'>) 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" NOT NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if shouldPrintColumn(dop... &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;tbinfo-&GT;numatts... &raquo; </span> 
 
            <span class='Comment_Multi_Line'>/* 
             * Add non-inherited CHECK constraints, if any. 
             */ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN285"><span class='Ref_to_Member'>ncheck</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN15308"></a>                <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>constr</span> <span class='Operator'>= &</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN320"><span class='Ref_to_Member'>checkexprs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15308"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>|| !</span><a href="pg_dump.c.html#LN15308"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN434"><span class='Ref_to_Member'>conislocal</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15039"><span class='Ref_To_Local'>actual_atts</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" (\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>",\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"CONSTRAINT %s "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15308"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15308"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN15039"><span class='Ref_To_Local'>actual_atts</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15039"><span class='Ref_To_Local'>actual_atts</span></a><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>((</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN286"><span class='Ref_to_Member'>reloftype</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN296"><span class='Ref_to_Member'>ispartition</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                       <span class='Operator'>!</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * We must have a parenthesized attribute list, even though 
                 * empty, when not using the OF TYPE or PARTITION OF syntax. 
                 */ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" (\n)"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN296"><span class='Ref_to_Member'>ispartition</span></a> <span class='Operator'>&& !</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN322"><span class='Ref_to_Member'>partbound</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* Emit the INHERITS clause, except if this is a partition. */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15037"><span class='Ref_To_Local'>numParents</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>                <span class='Operator'>!</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN296"><span class='Ref_to_Member'>ispartition</span></a> <span class='Operator'>&& 
</span>                <span class='Operator'>!</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nINHERITS ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN15037"><span class='Ref_To_Local'>numParents</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN15351"></a>                    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>parentRel</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15038"><span class='Ref_To_Local'>parents</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>]; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15351"><span class='Ref_To_Local'>parentRel</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Parentheses'>) 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, 
</span>                                <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15351"><span class='Ref_To_Local'>parentRel</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15351"><span class='Ref_To_Local'>parentRel</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN167"><span class='Ref_to_Const'>RELKIND_PARTITIONED_TABLE</span></a><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nPARTITION BY %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN321"><span class='Ref_to_Member'>partkeydef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nSERVER %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15042"><span class='Ref_To_Local'>srvname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tbinfo-&GT;relkind!=RELK... &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN266"><span class='Ref_to_Proto'>nonemptyReloptions</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN271"><span class='Ref_to_Member'>reloptions</span></a><span class='Parentheses'>) </span><span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN266"><span class='Ref_to_Proto'>nonemptyReloptions</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN273"><span class='Ref_to_Member'>toast_reloptions</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN15373"></a>            <span class='Keyword'>bool</span>        <span class='Declare_Local'>addcomma</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nWITH ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN266"><span class='Ref_to_Proto'>nonemptyReloptions</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN271"><span class='Ref_to_Member'>reloptions</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pg_dump.c.html#LN15373"><span class='Ref_To_Local'>addcomma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN267"><span class='Ref_to_Proto'>appendReloptionsArrayAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN271"><span class='Ref_to_Member'>reloptions</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN266"><span class='Ref_to_Proto'>nonemptyReloptions</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN273"><span class='Ref_to_Member'>toast_reloptions</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15373"><span class='Ref_To_Local'>addcomma</span></a><span class='Parentheses'>) 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN267"><span class='Ref_to_Proto'>appendReloptionsArrayAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN273"><span class='Ref_to_Member'>toast_reloptions</span></a><span class='Delimiter'>, </span><span class='String'>"toast."</span><span class='Delimiter'>, 
</span>                                        <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if nonemptyReloptions(tb... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* Dump generic options if any */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15043"><span class='Ref_To_Local'>ftoptions</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN15043"><span class='Ref_To_Local'>ftoptions</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nOPTIONS (\n    %s\n)"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15043"><span class='Ref_To_Local'>ftoptions</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * For materialized views, create the AS clause just like a view. At 
         * this point, we always mark the view as not populated. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN15401"></a>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN15401"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14937"><span class='Ref_to_Func'>createViewAsClause</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" AS\n%s\n  WITH NO DATA;\n"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN15401"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15401"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * To create binary-compatible heap files, we have to ensure the same 
         * physical column order, including dropped columns, as in the 
         * original.  Therefore, we create dropped columns above and drop them 
         * here, also updating their attlen/attalign values so that the 
         * dropped column can be skipped properly.  (We do not bother with 
         * restoring the original attbyval setting.)  Also, inheritance 
         * relationships are set up by doing ALTER TABLE INHERIT rather than 
         * using an INHERITS clause --- the latter would possibly mess up the 
         * column order.  That also means we have to take care about setting 
         * attislocal correctly, plus fix up any inherited CHECK constraints. 
         * Analogously, we set up typed tables using ALTER TABLE / OF here. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a> <span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a> <span class='Operator'>|| 
</span>             <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a> <span class='Operator'>|| 
</span>             <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN167"><span class='Ref_to_Const'>RELKIND_PARTITIONED_TABLE</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN302"><span class='Ref_to_Member'>numatts</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN309"><span class='Ref_to_Member'>attisdropped</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, recreate dropped column.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE pg_catalog.pg_attribute\n"</span> 
                                      <span class='String'>"SET attlen = %d, "</span> 
                                      <span class='String'>"attalign = '%c', attbyval = false\n"</span> 
                                      <span class='String'>"WHERE attname = "</span><span class='Delimiter'>, 
</span>                                      <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN311"><span class='Ref_to_Member'>attlen</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], 
</span>                                      <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN312"><span class='Ref_to_Member'>attalign</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n  AND attrelid = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"::pg_catalog.regclass;\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a> <span class='Operator'>|| 
</span>                        <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN167"><span class='Ref_to_Const'>RELKIND_PARTITIONED_TABLE</span></a><span class='Parentheses'>) 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s "</span><span class='Delimiter'>, 
</span>                                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER FOREIGN TABLE ONLY %s "</span><span class='Delimiter'>, 
</span>                                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"DROP COLUMN %s;\n"</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tbinfo-&GT;attisdropped[... &raquo; </span> 
                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN313"><span class='Ref_to_Member'>attislocal</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, recreate inherited column.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE pg_catalog.pg_attribute\n"</span> 
                                         <span class='String'>"SET attislocal = false\n"</span> 
                                         <span class='String'>"WHERE attname = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>], </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n  AND attrelid = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"::pg_catalog.regclass;\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;tbinfo-&GT;numatts... &raquo; </span> 
 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN285"><span class='Ref_to_Member'>ncheck</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN15470"></a>                <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>constr</span> <span class='Operator'>= &</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN320"><span class='Ref_to_Member'>checkexprs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15470"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN15470"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN434"><span class='Ref_to_Member'>conislocal</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, set up inherited constraint.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" ADD CONSTRAINT %s "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15470"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15470"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE pg_catalog.pg_constraint\n"</span> 
                                     <span class='String'>"SET conislocal = false\n"</span> 
                                     <span class='String'>"WHERE contype = 'c' AND conname = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15470"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n  AND conrelid = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"::pg_catalog.regclass;\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for k=0;k&LT;tbinfo-&GT;ncheck;... &raquo; </span> 
 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15037"><span class='Ref_To_Local'>numParents</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, set up inheritance and partitioning this way.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN15037"><span class='Ref_To_Local'>numParents</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN15495"></a>                    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>parentRel</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15038"><span class='Ref_To_Local'>parents</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15045"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>]; 
</span><a name="LN15496"></a>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>parentname</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Schema-qualify the parent table, if necessary */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15495"><span class='Ref_To_Local'>parentRel</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Parentheses'>) 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15496"><span class='Ref_To_Local'>parentname</span></a><span class='Delimiter'>, </span><span class='String'>"%s."</span><span class='Delimiter'>, 
</span>                                <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15495"><span class='Ref_To_Local'>parentRel</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15496"><span class='Ref_To_Local'>parentname</span></a><span class='Delimiter'>, </span><span class='String'>"%s"</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15495"><span class='Ref_To_Local'>parentRel</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* In the partitioning case, we alter the parent */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN296"><span class='Ref_to_Member'>ispartition</span></a><span class='Parentheses'>) 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                     <span class='String'>"ALTER TABLE ONLY %s ATTACH PARTITION "</span><span class='Delimiter'>, 
</span>                                          <a href="pg_dump.c.html#LN15496"><span class='Ref_To_Local'>parentname</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s INHERIT "</span><span class='Delimiter'>, 
</span>                                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* Partition needs specifying the bounds */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN296"><span class='Ref_to_Member'>ispartition</span></a><span class='Parentheses'>) 
</span>                        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s %s;\n"</span><span class='Delimiter'>, 
</span>                                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                          <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN322"><span class='Ref_to_Member'>partbound</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15496"><span class='Ref_To_Local'>parentname</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15496"><span class='Ref_To_Local'>parentname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for k=0;k&LT;numParents;k++ &raquo; </span> 
            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if numParents&GT;0 &raquo; </span> 
 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN286"><span class='Ref_to_Member'>reloftype</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, set up typed tables this way.\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s OF %s;\n"</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN286"><span class='Ref_to_Member'>reloftype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, set heap's relfrozenxid and relminmxid\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE pg_catalog.pg_class\n"</span> 
                              <span class='String'>"SET relfrozenxid = '%u', relminmxid = '%u'\n"</span> 
                              <span class='String'>"WHERE oid = "</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN280"><span class='Ref_to_Member'>frozenxid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN281"><span class='Ref_to_Member'>minmxid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"::pg_catalog.regclass;\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN282"><span class='Ref_to_Member'>toast_oid</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* We preserve the toast oids, so we can use it during restore */ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, set toast's relfrozenxid and relminmxid\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE pg_catalog.pg_class\n"</span> 
                               <span class='String'>"SET relfrozenxid = '%u', relminmxid = '%u'\n"</span> 
                                  <span class='String'>"WHERE oid = '%u';\n"</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN283"><span class='Ref_to_Member'>toast_frozenxid</span></a><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN284"><span class='Ref_to_Member'>toast_minmxid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN282"><span class='Ref_to_Member'>toast_oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if dopt-&GT;binary_upgrade&... &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* 
         * In binary_upgrade mode, restore matviews' populated status by 
         * poking pg_class directly.  This is pretty ugly, but we can't use 
         * REFRESH MATERIALIZED VIEW since it's possible that some underlying 
         * matview is not populated even though this matview is. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a> <span class='Operator'>&& 
</span>            <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN268"><span class='Ref_to_Member'>relispopulated</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\n-- For binary upgrade, mark materialized view as populated\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"UPDATE pg_catalog.pg_class\n"</span> 
                                 <span class='String'>"SET relispopulated = 't'\n"</span> 
                                 <span class='String'>"WHERE oid = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"::pg_catalog.regclass;\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Dump additional per-column properties that we can't handle in the 
         * main CREATE TABLE command. 
         */ 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN302"><span class='Ref_to_Member'>numatts</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* None of this applies to dropped columns */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN309"><span class='Ref_to_Member'>attisdropped</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * If we didn't dump the column definition explicitly above, and 
             * it is NOT NULL and did not inherit that property from a parent, 
             * we have to mark it separately. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.h.html#LN693"><span class='Ref_to_Proto'>shouldPrintColumn</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN317"><span class='Ref_to_Member'>notnull</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>&& !</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN318"><span class='Ref_to_Member'>inhNotNull</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER COLUMN %s SET NOT NULL;\n"</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Dump per-column statistics information. We only issue an ALTER 
             * TABLE statement if the attstattarget entry for this column is 
             * non-negative (i.e. it's not the default value) 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN306"><span class='Ref_to_Member'>attstattarget</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER COLUMN %s "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SET STATISTICS %d;\n"</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN306"><span class='Ref_to_Member'>attstattarget</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Dump per-column storage information.  The statement is only 
             * dumped if the storage has been changed from the type's default. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN307"><span class='Ref_to_Member'>attstorage</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN308"><span class='Ref_to_Member'>typstorage</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN307"><span class='Ref_to_Member'>attstorage</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <span class='String'>'p'</span><span class='Operator'>: 
</span>                        <a href="pg_dump.c.html#LN15041"><span class='Ref_To_Local'>storage</span></a> <span class='Operator'>= </span><span class='String'>"PLAIN"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <span class='String'>'e'</span><span class='Operator'>: 
</span>                        <a href="pg_dump.c.html#LN15041"><span class='Ref_To_Local'>storage</span></a> <span class='Operator'>= </span><span class='String'>"EXTERNAL"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <span class='String'>'m'</span><span class='Operator'>: 
</span>                        <a href="pg_dump.c.html#LN15041"><span class='Ref_To_Local'>storage</span></a> <span class='Operator'>= </span><span class='String'>"MAIN"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>case</span> <span class='String'>'x'</span><span class='Operator'>: 
</span>                        <a href="pg_dump.c.html#LN15041"><span class='Ref_To_Local'>storage</span></a> <span class='Operator'>= </span><span class='String'>"EXTENDED"</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <a href="pg_dump.c.html#LN15041"><span class='Ref_To_Local'>storage</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Only dump the statement if it's a storage type we recognize 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15041"><span class='Ref_To_Local'>storage</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s "</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER COLUMN %s "</span><span class='Delimiter'>, 
</span>                                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SET STORAGE %s;\n"</span><span class='Delimiter'>, 
</span>                                      <a href="pg_dump.c.html#LN15041"><span class='Ref_To_Local'>storage</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tbinfo-&GT;attstorage[j]... &raquo; </span> 
 
            <span class='Comment_Multi_Line'>/* 
             * Dump per-column attributes. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN314"><span class='Ref_to_Member'>attoptions</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>&& </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN314"><span class='Ref_to_Member'>attoptions</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>][</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER COLUMN %s "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"SET (%s);\n"</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN314"><span class='Ref_to_Member'>attoptions</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Dump per-column fdw options. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a> <span class='Operator'>&& 
</span>                <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN316"><span class='Ref_to_Member'>attfdwoptions</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>] </span><span class='Operator'>&& 
</span>                <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN316"><span class='Ref_to_Member'>attfdwoptions</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>][</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER FOREIGN TABLE %s "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER COLUMN %s "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"OPTIONS (\n    %s\n);\n"</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN316"><span class='Ref_to_Member'>attfdwoptions</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;tbinfo-&GT;numatts... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * dump properties we only have ALTER TABLE syntax for 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a> <span class='Operator'>|| 
</span>         <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN167"><span class='Ref_to_Const'>RELKIND_PARTITIONED_TABLE</span></a> <span class='Operator'>|| 
</span>         <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>        <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN269"><span class='Ref_to_Member'>relreplident</span></a> <span class='Operator'>!= </span><a href="../../include/catalog/pg_class.h.html#LN174"><span class='Ref_to_Const'>REPLICA_IDENTITY_DEFAULT</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN269"><span class='Ref_to_Member'>relreplident</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN184"><span class='Ref_to_Const'>REPLICA_IDENTITY_INDEX</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* nothing to do, will be set when the index is dumped */ 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN269"><span class='Ref_to_Member'>relreplident</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN176"><span class='Ref_to_Const'>REPLICA_IDENTITY_NOTHING</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nALTER TABLE ONLY %s REPLICA IDENTITY NOTHING;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN269"><span class='Ref_to_Member'>relreplident</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN178"><span class='Ref_to_Const'>REPLICA_IDENTITY_FULL</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nALTER TABLE ONLY %s REPLICA IDENTITY FULL;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if (tbinfo-&GT;relkind==REL... &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN166"><span class='Ref_to_Const'>RELKIND_FOREIGN_TABLE</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN279"><span class='Ref_to_Member'>hasoids</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nALTER TABLE ONLY %s SET WITH OIDS;\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN278"><span class='Ref_to_Member'>forcerowsec</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nALTER TABLE ONLY %s FORCE ROW LEVEL SECURITY;\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15033"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15036"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN266"><span class='Ref_to_Member'>relkind</span></a> <span class='Operator'>== </span><a href="../../include/catalog/pg_class.h.html#LN163"><span class='Ref_to_Const'>RELKIND_VIEW</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Null_Value'>NULL </span><span class='Operator'>: </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN270"><span class='Ref_to_Member'>reltablespace</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>               <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15040"><span class='Ref_To_Local'>reltypename</span></a><span class='Delimiter'>, </span><span class='String'>"TABLE"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> <span class='Operator'>? </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN279"><span class='Ref_to_Member'>hasoids</span></a> <span class='Operator'>: </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15040"><span class='Ref_To_Local'>reltypename</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN295"><span class='Ref_to_Member'>postponed_def</span></a> <span class='Operator'>? 
</span>                     <a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a> <span class='Operator'>: </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15035"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
    <span class='Comment_Multi_Line'>/* Dump Table Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN9114"><span class='Ref_to_Func'>dumpTableComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15040"><span class='Ref_To_Local'>reltypename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Table Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN14580"><span class='Ref_to_Func'>dumpTableSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15040"><span class='Ref_To_Local'>reltypename</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump comments on inlined table constraints */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN285"><span class='Ref_to_Member'>ncheck</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN15740"></a>        <a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>constr</span> <span class='Operator'>= &</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN320"><span class='Ref_to_Member'>checkexprs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15044"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15740"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>|| !</span><a href="pg_dump.c.html#LN15740"><span class='Ref_To_Local'>constr</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN434"><span class='Ref_to_Member'>conislocal</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN196"><span class='Ref_to_Proto'>dumpTableConstraintComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15031"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15740"><span class='Ref_To_Local'>constr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15034"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15035"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15036"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTableSchema &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpAttrDef --- dump an attribute's default-value declaration 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN15758"></a><span class='Declare_Function'>dumpAttrDef</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN335"><span class='Ref_to_Typedef'>AttrDefInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>adinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN15760"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15758"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN15761"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15758"><span class='Ref_to_Parameter'>adinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN338"><span class='Ref_to_Member'>adtable</span></a><span class='Delimiter'>; 
</span><a name="LN15762"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>adnum</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15758"><span class='Ref_to_Parameter'>adinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN339"><span class='Ref_to_Member'>adnum</span></a><span class='Delimiter'>; 
</span><a name="LN15763"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN15764"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN15765"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tag</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if table definition not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN15761"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN15760"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not "separate"; it was dumped in the table's definition */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN15758"><span class='Ref_to_Parameter'>adinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN341"><span class='Ref_to_Member'>separate</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN15763"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN15764"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15763"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s "</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15761"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15763"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER COLUMN %s SET DEFAULT %s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15761"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15762"><span class='Ref_To_Local'>adnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN15758"><span class='Ref_to_Parameter'>adinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN340"><span class='Ref_to_Member'>adef_expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15764"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE %s."</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15761"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15764"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s "</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15761"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15764"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER COLUMN %s DROP DEFAULT;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15761"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15762"><span class='Ref_To_Local'>adnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN15765"><span class='Ref_To_Local'>tag</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15761"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15761"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15762"><span class='Ref_To_Local'>adnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15758"><span class='Ref_to_Parameter'>adinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN337"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15758"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15758"><span class='Ref_to_Parameter'>adinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN337"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15758"><span class='Ref_to_Parameter'>adinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN337"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15765"><span class='Ref_To_Local'>tag</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15761"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15761"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"DEFAULT"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15763"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15764"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15765"><span class='Ref_To_Local'>tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15763"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15764"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpAttrDef &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getAttrName: extract the correct name for an attribute 
 * 
 * The array tblInfo-&GT;attnames[] only provides names of user attributes; 
 * if a system attribute number is supplied, we have to fake it. 
 * We also do a little bit of bounds checking for safety's sake. 
 */ 
</span><span class='Keyword'>static const char </span><span class='Operator'>* 
</span><a name="LN15820"></a><span class='Declare_Function'>getAttrName</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>attrnum</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tblInfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15820"><span class='Ref_to_Parameter'>attrnum</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN15820"><span class='Ref_to_Parameter'>attrnum</span></a> <span class='Operator'>&LT;= </span><a href="pg_dump.c.html#LN15820"><span class='Ref_to_Parameter'>tblInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN302"><span class='Ref_to_Member'>numatts</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="pg_dump.c.html#LN15820"><span class='Ref_to_Parameter'>tblInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN15820"><span class='Ref_to_Parameter'>attrnum</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15820"><span class='Ref_to_Parameter'>attrnum</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="../../include/access/sysattr.h.html#LN20"><span class='Ref_to_Const'>SelfItemPointerAttributeNumber</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>"ctid"</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/access/sysattr.h.html#LN21"><span class='Ref_to_Const'>ObjectIdAttributeNumber</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>"oid"</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/access/sysattr.h.html#LN22"><span class='Ref_to_Const'>MinTransactionIdAttributeNumber</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>"xmin"</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/access/sysattr.h.html#LN23"><span class='Ref_to_Const'>MinCommandIdAttributeNumber</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>"cmin"</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/access/sysattr.h.html#LN24"><span class='Ref_to_Const'>MaxTransactionIdAttributeNumber</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>"xmax"</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/access/sysattr.h.html#LN25"><span class='Ref_to_Const'>MaxCommandIdAttributeNumber</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>"cmax"</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="../../include/access/sysattr.h.html#LN26"><span class='Ref_to_Const'>TableOidAttributeNumber</span></a><span class='Operator'>: 
</span>            <span class='Control'>return</span> <span class='String'>"tableoid"</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"invalid column number %d for table \"%s\"\n"</span><span class='Delimiter'>, 
</span>                  <a href="pg_dump.c.html#LN15820"><span class='Ref_to_Parameter'>attrnum</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15820"><span class='Ref_to_Parameter'>tblInfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>                <span class='Comment_Single_Line'>/* keep compiler quiet */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end getAttrName &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpIndex 
 *    write out to fout a user-defined index 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN15851"></a><span class='Declare_Function'>dumpIndex</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN352"><span class='Ref_to_Typedef'>IndxInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indxinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN15853"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN15854"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN355"><span class='Ref_to_Member'>indextable</span></a><span class='Delimiter'>; 
</span><a name="LN15855"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_constraint</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN364"><span class='Ref_to_Member'>indexconstraint</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN15856"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN15857"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN15858"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15853"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN15856"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN15857"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN15858"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15858"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"INDEX %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If there's an associated constraint, don't dump the index per se, but 
     * do dump any comment for it.  (This is safe because dependency ordering 
     * will have ensured the constraint is emitted first.)  Note that the 
     * emitted comment has to be shown as depending on the constraint, not the 
     * index, in such cases. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN15855"><span class='Ref_To_Local'>is_constraint</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15853"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN258"><span class='Ref_to_Proto'>binary_upgrade_set_pg_class_oids</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                             <a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Plain secondary index */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN356"><span class='Ref_to_Member'>indexdef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* If the index is clustered, we need to record that. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN361"><span class='Ref_to_Member'>indisclustered</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nALTER TABLE %s CLUSTER"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15854"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" ON %s;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* If the index defines identity, we need to record that. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN362"><span class='Ref_to_Member'>indisreplident</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nALTER TABLE ONLY %s REPLICA IDENTITY USING"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15854"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15856"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" INDEX %s;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * DROP must be fully qualified in case same name appears in 
         * pg_catalog 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15857"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP INDEX %s."</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15854"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15857"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN15854"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN357"><span class='Ref_to_Member'>tablespace</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN15854"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                         <span class='String'>"INDEX"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN15856"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15857"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !is_constraint &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Dump Index Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15858"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN15854"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN15854"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN15855"><span class='Ref_To_Local'>is_constraint</span></a> <span class='Operator'>? </span><a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN364"><span class='Ref_to_Member'>indexconstraint</span></a> <span class='Operator'>: 
</span>                    <a href="pg_dump.c.html#LN15851"><span class='Ref_to_Parameter'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15856"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15857"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15858"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpIndex &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpStatisticsExt 
 *    write out to fout an extended statistics object 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN15944"></a><span class='Declare_Function'>dumpStatisticsExt</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN368"><span class='Ref_to_Typedef'>StatsExtInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>statsextinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN15946"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN15947"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>statsextinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN371"><span class='Ref_to_Member'>statsexttable</span></a><span class='Delimiter'>; 
</span><a name="LN15948"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN15949"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN15950"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15946"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN15948"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN15949"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN15950"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15950"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"STATISTICS %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>statsextinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15948"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>statsextinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN372"><span class='Ref_to_Member'>statsextdef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15949"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP STATISTICS %s."</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15947"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15949"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>statsextinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>statsextinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>statsextinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>statsextinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>statsextinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15947"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15947"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"STATISTICS"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN15948"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15949"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Statistics Comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>statsextinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15950"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN15947"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN15947"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>statsextinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN15944"><span class='Ref_to_Parameter'>statsextinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN370"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15948"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15949"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15950"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpStatisticsExt &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpConstraint 
 *    write out to fout a user-defined constraint 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN15999"></a><span class='Declare_Function'>dumpConstraint</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>coninfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN16001"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN16002"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN426"><span class='Ref_to_Member'>contable</span></a><span class='Delimiter'>; 
</span><a name="LN16003"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>q</span><span class='Delimiter'>; 
</span><a name="LN16004"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delq</span><span class='Delimiter'>; 
</span><a name="LN16005"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tag</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN16001"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a> <span class='Operator'>== </span><span class='String'>'p'</span> <span class='Operator'>|| 
</span>        <a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a> <span class='Operator'>== </span><span class='String'>'u'</span> <span class='Operator'>|| 
</span>        <a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a> <span class='Operator'>== </span><span class='String'>'x'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Index-related constraint */ 
</span><a name="LN16019"></a>        <a href="pg_dump.h.html#LN352"><span class='Ref_to_Typedef'>IndxInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>indxinfo</span><span class='Delimiter'>; 
</span><a name="LN16020"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>k</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN16019"><span class='Ref_To_Local'>indxinfo</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN352"><span class='Ref_to_Typedef'>IndxInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="common.c.html#LN519"><span class='Ref_to_Func'>findObjectByDumpId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN431"><span class='Ref_to_Member'>conindex</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16019"><span class='Ref_To_Local'>indxinfo</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"missing index for constraint \"%s\"\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16001"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN258"><span class='Ref_to_Proto'>binary_upgrade_set_pg_class_oids</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, 
</span>                                             <a href="pg_dump.c.html#LN16019"><span class='Ref_To_Local'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    ADD CONSTRAINT %s "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* pg_get_constraintdef should have provided everything */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s ("</span><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a> <span class='Operator'>== </span><span class='String'>'p'</span> <span class='Operator'>? </span><span class='String'>"PRIMARY KEY"</span> <span class='Operator'>: </span><span class='String'>"UNIQUE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16020"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN16020"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN16019"><span class='Ref_To_Local'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN359"><span class='Ref_to_Member'>indnkeys</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN16020"><span class='Ref_To_Local'>k</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN16048"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>indkey</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN16019"><span class='Ref_To_Local'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN360"><span class='Ref_to_Member'>indkeys</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN16020"><span class='Ref_To_Local'>k</span></a><span class='Delimiter'>]; 
</span><a name="LN16049"></a>                <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>attname</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16048"><span class='Ref_To_Local'>indkey</span></a> <span class='Operator'>== </span><a href="../../include/access/attnum.h.html#LN22"><span class='Ref_to_Const'>InvalidAttrNumber</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN16049"><span class='Ref_To_Local'>attname</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN264"><span class='Ref_to_Proto'>getAttrName</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16048"><span class='Ref_To_Local'>indkey</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"%s%s"</span><span class='Delimiter'>, 
</span>                                  <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16020"><span class='Ref_To_Local'>k</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>""</span> <span class='Operator'>: </span><span class='String'>", "</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16049"><span class='Ref_To_Local'>attname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN266"><span class='Ref_to_Proto'>nonemptyReloptions</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16019"><span class='Ref_To_Local'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN358"><span class='Ref_to_Member'>indreloptions</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" WITH ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.c.html#LN267"><span class='Ref_to_Proto'>appendReloptionsArrayAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16019"><span class='Ref_To_Local'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN358"><span class='Ref_to_Member'>indreloptions</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN432"><span class='Ref_to_Member'>condeferrable</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" DEFERRABLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN433"><span class='Ref_to_Member'>condeferred</span></a><span class='Parentheses'>) 
</span>                    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" INITIALLY DEFERRED"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
        <span class='Comment_Multi_Line'>/* If the index is clustered, we need to record that. */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16019"><span class='Ref_To_Local'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN361"><span class='Ref_to_Member'>indisclustered</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"\nALTER TABLE %s CLUSTER"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>" ON %s;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16019"><span class='Ref_To_Local'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN354"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * DROP must be fully qualified in case same name appears in 
         * pg_catalog 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s."</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP CONSTRAINT %s;\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN16005"><span class='Ref_To_Local'>tag</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN16005"><span class='Ref_To_Local'>tag</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN16019"><span class='Ref_To_Local'>indxinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN357"><span class='Ref_to_Member'>tablespace</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                         <span class='String'>"CONSTRAINT"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if coninfo-&GT;contype=='p'... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a> <span class='Operator'>== </span><span class='String'>'f'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * XXX Potentially wrap in a 'SET CONSTRAINTS OFF' block so that the 
         * current table data is not processed 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    ADD CONSTRAINT %s %s;\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * DROP must be fully qualified in case same name appears in 
         * pg_catalog 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE ONLY %s."</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP CONSTRAINT %s;\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN16005"><span class='Ref_To_Local'>tag</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>            <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN16005"><span class='Ref_To_Local'>tag</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                         <span class='String'>"FK CONSTRAINT"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                         <a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                         <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if coninfo-&GT;contype=='f' &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a> <span class='Operator'>== </span><span class='String'>'c'</span> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* CHECK constraint on a table */ 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore if not to be dumped separately, or if it was inherited */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN434"><span class='Ref_to_Member'>conislocal</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* not ONLY since we want it to propagate to children */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE %s\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    ADD CONSTRAINT %s %s;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * DROP must be fully qualified in case same name appears in 
             * pg_catalog 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE %s."</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s "</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP CONSTRAINT %s;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN16005"><span class='Ref_To_Local'>tag</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>                <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16005"><span class='Ref_To_Local'>tag</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                             <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                             <span class='String'>"CHECK CONSTRAINT"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                             <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                             <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if coninfo-&GT;separate&&co... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if coninfo-&GT;contype=='c'... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a> <span class='Operator'>== </span><span class='String'>'c'</span> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* CHECK constraint on a domain */ 
</span><a name="LN16190"></a>        <a href="pg_dump.h.html#LN162"><span class='Ref_to_Typedef'>TypeInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>tyinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN427"><span class='Ref_to_Member'>condomain</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Ignore if not to be dumped separately */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER DOMAIN %s\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16190"><span class='Ref_To_Local'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Delimiter'>, </span><span class='String'>"    ADD CONSTRAINT %s %s;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN429"><span class='Ref_to_Member'>condef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * DROP must be fully qualified in case same name appears in 
             * pg_catalog 
             */ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER DOMAIN %s."</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16190"><span class='Ref_To_Local'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"%s "</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16190"><span class='Ref_To_Local'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Delimiter'>, </span><span class='String'>"DROP CONSTRAINT %s;\n"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <a href="pg_dump.c.html#LN16005"><span class='Ref_To_Local'>tag</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16190"><span class='Ref_To_Local'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>                <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16005"><span class='Ref_To_Local'>tag</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16190"><span class='Ref_To_Local'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN164"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                             <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16190"><span class='Ref_To_Local'>tyinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN170"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                             <span class='String'>"CHECK CONSTRAINT"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                             <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                             <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if coninfo-&GT;separate &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if coninfo-&GT;contype=='c'... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"unrecognized constraint type: %c\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN428"><span class='Ref_to_Member'>contype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Dump Constraint Comments --- only works for table constraints */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16002"><span class='Ref_To_Local'>tbinfo</span></a> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>&& 
</span>        <a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN196"><span class='Ref_to_Proto'>dumpTableConstraintComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN15999"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16005"><span class='Ref_To_Local'>tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16003"><span class='Ref_To_Local'>q</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16004"><span class='Ref_To_Local'>delq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpConstraint &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpTableConstraintComment --- dump a constraint's comment if any 
 * 
 * This is split out because we need the function in two different places 
 * depending on whether the constraint is dumped as part of CREATE TABLE 
 * or as a separate ALTER command. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN16250"></a><span class='Declare_Function'>dumpTableConstraintComment</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>coninfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN16252"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN16250"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN426"><span class='Ref_to_Member'>contable</span></a><span class='Delimiter'>; 
</span><a name="LN16253"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16253"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"CONSTRAINT %s "</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16250"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16253"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"ON %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16252"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16250"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16250"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16253"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN16252"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN16252"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN16250"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>             <a href="pg_dump.c.html#LN16250"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN435"><span class='Ref_to_Member'>separate</span></a> <span class='Operator'>? </span><a href="pg_dump.c.html#LN16250"><span class='Ref_to_Parameter'>coninfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN425"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a> <span class='Operator'>: </span><a href="pg_dump.c.html#LN16252"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16253"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTableConstraintComment &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * findLastBuiltinOid_V71 - 
 * 
 * find the last built in oid 
 * 
 * For 7.1 through 8.0, we do this by retrieving datlastsysoid from the 
 * pg_database entry for the current database. 
 */ 
</span><span class='Keyword'>static </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN16279"></a><span class='Declare_Function'>findLastBuiltinOid_V71</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>dbname</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN16281"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN16282"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>last_oid</span><span class='Delimiter'>; 
</span><a name="LN16283"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16283"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16283"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT datlastsysoid from pg_database where datname = "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16283"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16279"><span class='Ref_to_Parameter'>dbname</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16279"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN16281"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16279"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16283"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16282"><span class='Ref_To_Local'>last_oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16281"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16281"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"datlastsysoid"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16281"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16283"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN16282"><span class='Ref_To_Local'>last_oid</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * dumpSequence 
 *    write the declaration (not data) of one user-defined sequence 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN16302"></a><span class='Declare_Function'>dumpSequence</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN16304"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN16305"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN16306"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>startv</span><span class='Delimiter'>, 
</span><a name="LN16307"></a>               <span class='Operator'>*</span><span class='Declare_Local'>incby</span><span class='Delimiter'>, 
</span><a name="LN16308"></a>               <span class='Operator'>*</span><span class='Declare_Local'>maxv</span><span class='Delimiter'>, 
</span><a name="LN16309"></a>               <span class='Operator'>*</span><span class='Declare_Local'>minv</span><span class='Delimiter'>, 
</span><a name="LN16310"></a>               <span class='Operator'>*</span><span class='Declare_Local'>cache</span><span class='Delimiter'>, 
</span><a name="LN16311"></a>               <span class='Operator'>*</span><span class='Declare_Local'>seqtype</span><span class='Delimiter'>; 
</span><a name="LN16312"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>cycled</span><span class='Delimiter'>; 
</span><a name="LN16313"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_ascending</span><span class='Delimiter'>; 
</span><a name="LN16314"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN16315"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delqry</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN16316"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>100000</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>        <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT format_type(seqtypid, NULL), "</span> 
                          <span class='String'>"seqstart, seqincrement, "</span> 
                          <span class='String'>"seqmax, seqmin, "</span> 
                          <span class='String'>"seqcache, seqcycle "</span> 
                          <span class='String'>"FROM pg_class c "</span> 
                          <span class='String'>"JOIN pg_sequence s ON (s.seqrelid = c.oid) "</span> 
                          <span class='String'>"WHERE c.oid = '%u'::oid"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Before PostgreSQL 10, sequence metadata is in the sequence itself, 
         * so switch to the sequence's schema instead of pg_catalog. 
         */ 
</span> 
        <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>        <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT 'bigint'::name AS sequence_type, "</span> 
                          <span class='String'>"start_value, increment_by, max_value, min_value, "</span> 
                          <span class='String'>"cache_value, is_cycled FROM %s"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>        <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"SELECT 'bigint'::name AS sequence_type, "</span> 
                     <span class='String'>"0 AS start_value, increment_by, max_value, min_value, "</span> 
                          <span class='String'>"cache_value, is_cycled FROM %s"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN126"><span class='Ref_to_Macro'>ngettext</span></a><span class='Parentheses'>(</span><span class='String'>"query to get data of sequence \"%s\" returned %d row (expected 1)\n"</span><span class='Delimiter'>, 
</span>                                 <span class='String'>"query to get data of sequence \"%s\" returned %d rows (expected 1)\n"</span><span class='Delimiter'>, 
</span>                                 <a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                  <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN16311"><span class='Ref_To_Local'>seqtype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16306"><span class='Ref_To_Local'>startv</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16307"><span class='Ref_To_Local'>incby</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16308"><span class='Ref_To_Local'>maxv</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16309"><span class='Ref_To_Local'>minv</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16310"><span class='Ref_To_Local'>cache</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>5</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16312"><span class='Ref_To_Local'>cycled</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>6</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN16313"><span class='Ref_To_Local'>is_ascending</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN16307"><span class='Ref_To_Local'>incby</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16313"><span class='Ref_To_Local'>is_ascending</span></a> <span class='Operator'>&& </span>atoi<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16309"><span class='Ref_To_Local'>minv</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN16309"><span class='Ref_To_Local'>minv</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN16313"><span class='Ref_To_Local'>is_ascending</span></a> <span class='Operator'>&& </span>atoi<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16308"><span class='Ref_To_Local'>maxv</span></a><span class='Parentheses'>) </span><span class='Operator'>== -</span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <a href="pg_dump.c.html#LN16308"><span class='Ref_To_Local'>maxv</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16311"><span class='Ref_To_Local'>seqtype</span></a><span class='Delimiter'>, </span><span class='String'>"smallint"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN16313"><span class='Ref_To_Local'>is_ascending</span></a> <span class='Operator'>&& </span>atoi<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16309"><span class='Ref_To_Local'>minv</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../include/c.h.html#LN335"><span class='Ref_to_Const'>PG_INT16_MIN</span></a><span class='Parentheses'>)</span> 
            <a href="pg_dump.c.html#LN16309"><span class='Ref_To_Local'>minv</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16313"><span class='Ref_To_Local'>is_ascending</span></a> <span class='Operator'>&& </span>atoi<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16308"><span class='Ref_To_Local'>maxv</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../include/c.h.html#LN336"><span class='Ref_to_Const'>PG_INT16_MAX</span></a><span class='Parentheses'>)</span> 
            <a href="pg_dump.c.html#LN16308"><span class='Ref_To_Local'>maxv</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16311"><span class='Ref_To_Local'>seqtype</span></a><span class='Delimiter'>, </span><span class='String'>"integer"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN16313"><span class='Ref_To_Local'>is_ascending</span></a> <span class='Operator'>&& </span>atoi<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16309"><span class='Ref_To_Local'>minv</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../include/c.h.html#LN338"><span class='Ref_to_Const'>PG_INT32_MIN</span></a><span class='Parentheses'>)</span> 
            <a href="pg_dump.c.html#LN16309"><span class='Ref_To_Local'>minv</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16313"><span class='Ref_To_Local'>is_ascending</span></a> <span class='Operator'>&& </span>atoi<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16308"><span class='Ref_To_Local'>maxv</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><a href="../../include/c.h.html#LN339"><span class='Ref_to_Const'>PG_INT32_MAX</span></a><span class='Parentheses'>)</span> 
            <a href="pg_dump.c.html#LN16308"><span class='Ref_To_Local'>maxv</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16311"><span class='Ref_To_Local'>seqtype</span></a><span class='Delimiter'>, </span><span class='String'>"bigint"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN16403"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>bufm</span><span class='Delimiter'>[</span><span class='Number'>100</span><span class='Delimiter'>], 
</span><a name="LN16404"></a>                    <span class='Declare_Local'>bufx</span><span class='Delimiter'>[</span><span class='Number'>100</span><span class='Delimiter'>]; 
</span> 
        <a href="../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16403"><span class='Ref_To_Local'>bufm</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16403"><span class='Ref_To_Local'>bufm</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN314"><span class='Ref_to_Const'>INT64_FORMAT</span></a><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN341"><span class='Ref_to_Const'>PG_INT64_MIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../pl/plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16404"><span class='Ref_To_Local'>bufx</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16404"><span class='Ref_To_Local'>bufx</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN314"><span class='Ref_to_Const'>INT64_FORMAT</span></a><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN342"><span class='Ref_to_Const'>PG_INT64_MAX</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN16313"><span class='Ref_To_Local'>is_ascending</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16309"><span class='Ref_To_Local'>minv</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16403"><span class='Ref_To_Local'>bufm</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_dump.c.html#LN16309"><span class='Ref_To_Local'>minv</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16313"><span class='Ref_To_Local'>is_ascending</span></a> <span class='Operator'>&& </span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16308"><span class='Ref_To_Local'>maxv</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16404"><span class='Ref_To_Local'>bufx</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="pg_dump.c.html#LN16308"><span class='Ref_To_Local'>maxv</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN290"><span class='Ref_to_Member'>is_identity_sequence</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16315"><span class='Ref_To_Local'>delqry</span></a><span class='Delimiter'>, </span><span class='String'>"DROP SEQUENCE %s."</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16315"><span class='Ref_To_Local'>delqry</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16304"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pg_dump.c.html#LN258"><span class='Ref_to_Proto'>binary_upgrade_set_pg_class_oids</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                                         <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN256"><span class='Ref_to_Proto'>binary_upgrade_set_type_oids_by_rel_oid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                                                <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN290"><span class='Ref_to_Member'>is_identity_sequence</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN16438"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>owning_tab</span> <span class='Operator'>= </span><a href="pg_dump.h.html#LN649"><span class='Ref_to_Proto'>findTableByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN288"><span class='Ref_to_Member'>owning_tab</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"ALTER TABLE %s "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16438"><span class='Ref_To_Local'>owning_tab</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"ALTER COLUMN %s ADD GENERATED "</span><span class='Delimiter'>, 
</span>                        <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16438"><span class='Ref_To_Local'>owning_tab</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN289"><span class='Ref_to_Member'>owning_col</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16438"><span class='Ref_To_Local'>owning_tab</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN310"><span class='Ref_to_Member'>attidentity</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN289"><span class='Ref_to_Member'>owning_col</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../include/catalog/pg_attribute.h.html#LN227"><span class='Ref_to_Const'>ATTRIBUTE_IDENTITY_ALWAYS</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"ALWAYS"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16438"><span class='Ref_To_Local'>owning_tab</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN310"><span class='Ref_to_Member'>attidentity</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN289"><span class='Ref_to_Member'>owning_col</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><a href="../../include/catalog/pg_attribute.h.html#LN228"><span class='Ref_to_Const'>ATTRIBUTE_IDENTITY_BY_DEFAULT</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"BY DEFAULT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" AS IDENTITY (\n    SEQUENCE NAME %s\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                          <span class='String'>"CREATE SEQUENCE %s\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16311"><span class='Ref_To_Local'>seqtype</span></a><span class='Delimiter'>, </span><span class='String'>"bigint"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"    AS %s\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16311"><span class='Ref_To_Local'>seqtype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN184"><span class='Ref_to_Member'>remoteVersion</span></a> <span class='Operator'>&GT;= </span><span class='Number'>80400</span><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"    START WITH %s\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16306"><span class='Ref_To_Local'>startv</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"    INCREMENT BY %s\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16307"><span class='Ref_To_Local'>incby</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16309"><span class='Ref_To_Local'>minv</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"    MINVALUE %s\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16309"><span class='Ref_To_Local'>minv</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"    NO MINVALUE\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16308"><span class='Ref_To_Local'>maxv</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"    MAXVALUE %s\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16308"><span class='Ref_To_Local'>maxv</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"    NO MAXVALUE\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"    CACHE %s%s"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN16310"><span class='Ref_To_Local'>cache</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16312"><span class='Ref_To_Local'>cycled</span></a> <span class='Operator'>? </span><span class='String'>"\n    CYCLE"</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN290"><span class='Ref_to_Member'>is_identity_sequence</span></a><span class='Parentheses'>) 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"\n);\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16316"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"SEQUENCE %s"</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* binary_upgrade:  no need to clear TOAST table oid */ 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16304"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN134"><span class='Ref_to_Member'>binary_upgrade</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN261"><span class='Ref_to_Proto'>binary_upgrade_extension_member</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, 
</span>                                        <a href="pg_dump.c.html#LN16316"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"SEQUENCE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16315"><span class='Ref_To_Local'>delqry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the sequence is owned by a table column, emit the ALTER for it as a 
     * separate TOC entry immediately following the sequence's own entry. It's 
     * OK to do this rather than using full sorting logic, because the 
     * dependency that tells us it's owned will have forced the table to be 
     * created first.  We can't just include the ALTER in the TOC entry 
     * because it will fail if we haven't reassigned the sequence owner to 
     * match the table's owner. 
     * 
     * We need not schema-qualify the table reference because both sequence 
     * and table must be in the same schema. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN288"><span class='Ref_to_Member'>owning_tab</span></a><span class='Parentheses'>) </span><span class='Operator'>&& !</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN290"><span class='Ref_to_Member'>is_identity_sequence</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN16520"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>owning_tab</span> <span class='Operator'>= </span><a href="pg_dump.h.html#LN649"><span class='Ref_to_Proto'>findTableByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN288"><span class='Ref_to_Member'>owning_tab</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16520"><span class='Ref_To_Local'>owning_tab</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="pg_backup_utils.c.html#LN100"><span class='Ref_to_Func'>exit_horribly</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"failed sanity check, parent table with OID %u of sequence with OID %u not found\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN288"><span class='Ref_to_Member'>owning_tab</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16520"><span class='Ref_To_Local'>owning_tab</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER SEQUENCE %s"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" OWNED BY %s"</span><span class='Delimiter'>, 
</span>                              <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16520"><span class='Ref_To_Local'>owning_tab</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>".%s;\n"</span><span class='Delimiter'>, 
</span>                        <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16520"><span class='Ref_To_Local'>owning_tab</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN289"><span class='Ref_to_Member'>owning_col</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>                <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                             <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                             <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"SEQUENCE OWNED BY"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN55"><span class='Ref_to_EnumConst'>SECTION_PRE_DATA</span></a><span class='Delimiter'>, 
</span>                             <a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                             <span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                             <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if owning_tab-&GT;dobj.dump... &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if OidIsValid(tbinfo-&GT;ow... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Dump Sequence Comments and Security Labels */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16316"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN94"><span class='Ref_to_Const'>DUMP_COMPONENT_SECLABEL</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN156"><span class='Ref_to_Proto'>dumpSecLabel</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16316"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16302"><span class='Ref_to_Parameter'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16305"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16314"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16315"><span class='Ref_To_Local'>delqry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16316"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpSequence &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpSequenceData 
 *    write the data of one user-defined sequence 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN16572"></a><span class='Declare_Function'>dumpSequenceData</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN344"><span class='Ref_to_Typedef'>TableDataInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tdinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN16574"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN16572"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN347"><span class='Ref_to_Member'>tdtable</span></a><span class='Delimiter'>; 
</span><a name="LN16575"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN16576"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>last</span><span class='Delimiter'>; 
</span><a name="LN16577"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>called</span><span class='Delimiter'>; 
</span><a name="LN16578"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16572"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16574"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16578"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT last_value, is_called FROM %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16574"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN16575"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16572"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16578"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16575"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="../../include/c.h.html#LN126"><span class='Ref_to_Macro'>ngettext</span></a><span class='Parentheses'>(</span><span class='String'>"query to get data of sequence \"%s\" returned %d row (expected 1)\n"</span><span class='Delimiter'>, 
</span>                                 <span class='String'>"query to get data of sequence \"%s\" returned %d rows (expected 1)\n"</span><span class='Delimiter'>, 
</span>                                 <a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16575"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                  <a href="pg_dump.c.html#LN16574"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16575"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN16576"><span class='Ref_To_Local'>last</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16575"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16577"><span class='Ref_To_Local'>called</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16575"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"t"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN129"><span class='Ref_to_Proto'>resetPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16578"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16578"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT pg_catalog.setval("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16578"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16574"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16572"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16578"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>", %s, %s);\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN16576"><span class='Ref_To_Local'>last</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16577"><span class='Ref_To_Local'>called</span></a> <span class='Operator'>? </span><span class='String'>"true"</span> <span class='Operator'>: </span><span class='String'>"false"</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16572"><span class='Ref_to_Parameter'>tdinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN92"><span class='Ref_to_Const'>DUMP_COMPONENT_DATA</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16572"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>, </span><a href="common.c.html#LN499"><span class='Ref_to_Func'>createDumpId</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16574"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16574"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16574"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                     <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='String'>"SEQUENCE SET"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN56"><span class='Ref_to_EnumConst'>SECTION_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16578"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Operator'>&</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16574"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16575"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16578"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpSequenceData &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpTrigger 
 *    write the declaration of one user-defined table trigger 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN16628"></a><span class='Declare_Function'>dumpTrigger</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN386"><span class='Ref_to_Typedef'>TriggerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tginfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN16630"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN16631"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN389"><span class='Ref_to_Member'>tgtable</span></a><span class='Delimiter'>; 
</span><a name="LN16632"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN16633"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delqry</span><span class='Delimiter'>; 
</span><a name="LN16634"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN16635"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tgargs</span><span class='Delimiter'>; 
</span><a name="LN16636"></a>    size_t      <span class='Declare_Local'>lentgargs</span><span class='Delimiter'>; 
</span><a name="LN16637"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>p</span><span class='Delimiter'>; 
</span><a name="LN16638"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>findx</span><span class='Delimiter'>; 
</span><a name="LN16639"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tag</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * we needn't check dobj.dump because TriggerInfo wouldn't have been 
     * created in the first place for non-dumpable triggers 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16630"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16633"><span class='Ref_To_Local'>delqry</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16634"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16633"><span class='Ref_To_Local'>delqry</span></a><span class='Delimiter'>, </span><span class='String'>"DROP TRIGGER %s "</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16633"><span class='Ref_To_Local'>delqry</span></a><span class='Delimiter'>, </span><span class='String'>"ON %s."</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16631"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16633"><span class='Ref_To_Local'>delqry</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16631"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN401"><span class='Ref_to_Member'>tgdef</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN401"><span class='Ref_to_Member'>tgdef</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN394"><span class='Ref_to_Member'>tgisconstraint</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE CONSTRAINT TRIGGER "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN395"><span class='Ref_to_Member'>tgconstrname</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE TRIGGER "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Trigger type */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/catalog/pg_trigger.h.html#LN130"><span class='Ref_to_Macro'>TRIGGER_FOR_BEFORE</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN391"><span class='Ref_to_Member'>tgtype</span></a><span class='Parentheses'>))</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"BEFORE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/catalog/pg_trigger.h.html#LN131"><span class='Ref_to_Macro'>TRIGGER_FOR_AFTER</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN391"><span class='Ref_to_Member'>tgtype</span></a><span class='Parentheses'>))</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"AFTER"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/catalog/pg_trigger.h.html#LN132"><span class='Ref_to_Macro'>TRIGGER_FOR_INSTEAD</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN391"><span class='Ref_to_Member'>tgtype</span></a><span class='Parentheses'>))</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"INSTEAD OF"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"unexpected tgtype value: %d\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN391"><span class='Ref_to_Member'>tgtype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/catalog/pg_trigger.h.html#LN133"><span class='Ref_to_Macro'>TRIGGER_FOR_INSERT</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN391"><span class='Ref_to_Member'>tgtype</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" INSERT"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/catalog/pg_trigger.h.html#LN134"><span class='Ref_to_Macro'>TRIGGER_FOR_DELETE</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN391"><span class='Ref_to_Member'>tgtype</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" OR DELETE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" DELETE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/catalog/pg_trigger.h.html#LN135"><span class='Ref_to_Macro'>TRIGGER_FOR_UPDATE</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN391"><span class='Ref_to_Member'>tgtype</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" OR UPDATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" UPDATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/catalog/pg_trigger.h.html#LN136"><span class='Ref_to_Macro'>TRIGGER_FOR_TRUNCATE</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN391"><span class='Ref_to_Member'>tgtype</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" OR TRUNCATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" TRUNCATE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" ON %s\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16631"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN394"><span class='Ref_to_Member'>tgisconstraint</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN396"><span class='Ref_to_Member'>tgconstrrelid</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* regclass output is already quoted */ 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"    FROM %s\n    "</span><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN397"><span class='Ref_to_Member'>tgconstrrelname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN399"><span class='Ref_to_Member'>tgdeferrable</span></a><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"NOT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"DEFERRABLE INITIALLY "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN400"><span class='Ref_to_Member'>tginitdeferred</span></a><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"DEFERRED\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"IMMEDIATE\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/catalog/pg_trigger.h.html#LN129"><span class='Ref_to_Macro'>TRIGGER_FOR_ROW</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN391"><span class='Ref_to_Member'>tgtype</span></a><span class='Parentheses'>))</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"    FOR EACH ROW\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"    FOR EACH STATEMENT\n    "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* regproc output is already sufficiently quoted */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"EXECUTE PROCEDURE %s("</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN390"><span class='Ref_to_Member'>tgfname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN16635"><span class='Ref_To_Local'>tgargs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN529"><span class='Ref_to_Proto'>PQunescapeBytea</span></a><span class='Parentheses'>((</span><span class='Keyword'>unsigned char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN393"><span class='Ref_to_Member'>tgargs</span></a><span class='Delimiter'>, 
</span>                                          <span class='Operator'>&</span><a href="pg_dump.c.html#LN16636"><span class='Ref_To_Local'>lentgargs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN16637"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN16635"><span class='Ref_To_Local'>tgargs</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN392"><span class='Ref_to_Member'>tgnargs</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* find the embedded null that terminates this trigger argument */ 
</span><a name="LN16758"></a>            size_t      <span class='Declare_Local'>tlen</span> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16637"><span class='Ref_To_Local'>p</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16637"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>+ </span><a href="pg_dump.c.html#LN16758"><span class='Ref_To_Local'>tlen</span></a> <span class='Operator'>&GT;= </span><a href="pg_dump.c.html#LN16635"><span class='Ref_To_Local'>tgargs</span></a> <span class='Operator'>+ </span><a href="pg_dump.c.html#LN16636"><span class='Ref_To_Local'>lentgargs</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* hm, not found before end of bytea value... */ 
</span>                <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"invalid argument string (%s) for trigger \"%s\" on table \"%s\"\n"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN393"><span class='Ref_to_Member'>tgargs</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN16631"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16638"><span class='Ref_To_Local'>findx</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_backup.h.html#LN298"><span class='Ref_to_Macro'>appendStringLiteralAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16637"><span class='Ref_To_Local'>p</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN16637"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>+= </span><a href="pg_dump.c.html#LN16758"><span class='Ref_To_Local'>tlen</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for findx=0;findx&LT;tginfo-... &raquo; </span> 
        <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16635"><span class='Ref_To_Local'>tgargs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>");\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN398"><span class='Ref_to_Member'>tgenabled</span></a> <span class='Operator'>!= </span><span class='String'>'t'</span> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN398"><span class='Ref_to_Member'>tgenabled</span></a> <span class='Operator'>!= </span><span class='String'>'O'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"\nALTER TABLE %s "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16631"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN398"><span class='Ref_to_Member'>tgenabled</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <span class='String'>'D'</span><span class='Operator'>: 
</span>            <span class='Control'>case</span> <span class='String'>'f'</span><span class='Operator'>: 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"DISABLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'A'</span><span class='Operator'>: 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"ENABLE ALWAYS"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'R'</span><span class='Operator'>: 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"ENABLE REPLICA"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"ENABLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" TRIGGER %s;\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tginfo-&GT;tgenabled!='t... &raquo; </span> 
 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16634"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"TRIGGER %s "</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16634"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"ON %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16631"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN16639"><span class='Ref_To_Local'>tag</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16631"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16639"><span class='Ref_To_Local'>tag</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16631"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16631"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"TRIGGER"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16633"><span class='Ref_To_Local'>delqry</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16634"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN16631"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16631"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16628"><span class='Ref_to_Parameter'>tginfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN388"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16639"><span class='Ref_To_Local'>tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16632"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16633"><span class='Ref_To_Local'>delqry</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16634"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpTrigger &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpEventTrigger 
 *    write the declaration of one user-defined event trigger 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN16837"></a><span class='Declare_Function'>dumpEventTrigger</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN404"><span class='Ref_to_Typedef'>EventTriggerInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>evtinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN16839"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN16840"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN16841"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN16839"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16841"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE EVENT TRIGGER "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>" ON "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN408"><span class='Ref_to_Member'>evtevent</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><span class='String'>""</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN410"><span class='Ref_to_Member'>evttags</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"\n         WHEN TAG IN ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN410"><span class='Ref_to_Member'>evttags</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"\n   EXECUTE PROCEDURE "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN411"><span class='Ref_to_Member'>evtfname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"();\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN412"><span class='Ref_to_Member'>evtenabled</span></a> <span class='Operator'>!= </span><span class='String'>'O'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"\nALTER EVENT TRIGGER %s "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN412"><span class='Ref_to_Member'>evtenabled</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <span class='String'>'D'</span><span class='Operator'>: 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"DISABLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'A'</span><span class='Operator'>: 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"ENABLE ALWAYS"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'R'</span><span class='Operator'>: 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"ENABLE REPLICA"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>default</span><span class='Operator'>: 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"ENABLE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if evtinfo-&GT;evtenabled!=... &raquo; </span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16841"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"EVENT TRIGGER %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN409"><span class='Ref_to_Member'>evtowner</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"EVENT TRIGGER"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16841"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN409"><span class='Ref_to_Member'>evtowner</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16837"><span class='Ref_to_Parameter'>evtinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN406"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16840"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16841"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpEventTrigger &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * dumpRule 
 *      Dump a rule 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN16910"></a><span class='Declare_Function'>dumpRule</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN375"><span class='Ref_to_Typedef'>RuleInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rinfo</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN16912"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN16913"></a>    <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>tbinfo</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN378"><span class='Ref_to_Member'>ruletable</span></a><span class='Delimiter'>; 
</span><a name="LN16914"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_view</span><span class='Delimiter'>; 
</span><a name="LN16915"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN16916"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>cmd</span><span class='Delimiter'>; 
</span><a name="LN16917"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>delcmd</span><span class='Delimiter'>; 
</span><a name="LN16918"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>labelq</span><span class='Delimiter'>; 
</span><a name="LN16919"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN16920"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tag</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Skip if not to be dumped */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>|| </span><a href="pg_dump.c.html#LN16912"><span class='Ref_To_Local'>dopt</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN138"><span class='Ref_to_Member'>dataOnly</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it is an ON SELECT rule that is created implicitly by CREATE VIEW, 
     * we do not want to dump it as a separate object. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN382"><span class='Ref_to_Member'>separate</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If it's an ON SELECT rule, we want to print it as a view definition, 
     * instead of a rule. 
     */ 
</span>    <a href="pg_dump.c.html#LN16914"><span class='Ref_To_Local'>is_view</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN379"><span class='Ref_to_Member'>ev_type</span></a> <span class='Operator'>== </span><span class='String'>'1'</span> <span class='Operator'>&& </span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN380"><span class='Ref_to_Member'>is_instead</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Make sure we are in proper schema. 
     */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN16915"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16917"><span class='Ref_To_Local'>delcmd</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN16918"><span class='Ref_To_Local'>labelq</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16914"><span class='Ref_To_Local'>is_view</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN16951"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We need OR REPLACE here because we'll be replacing a dummy view. 
         * Otherwise this should look largely like the regular view dump code. 
         */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE OR REPLACE VIEW %s"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN266"><span class='Ref_to_Proto'>nonemptyReloptions</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN271"><span class='Ref_to_Member'>reloptions</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><span class='String'>" WITH ("</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN267"><span class='Ref_to_Proto'>appendReloptionsArrayAH</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN271"><span class='Ref_to_Member'>reloptions</span></a><span class='Delimiter'>, </span><span class='String'>""</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>fout</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="pg_dump.c.html#LN16951"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14937"><span class='Ref_to_Func'>createViewAsClause</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><span class='String'>" AS\n%s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16951"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16951"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN272"><span class='Ref_to_Member'>checkoption</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><span class='String'>"\n  WITH %s CHECK OPTION"</span><span class='Delimiter'>, 
</span>                              <a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN272"><span class='Ref_to_Member'>checkoption</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><span class='String'>";\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if is_view &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* In the rule case, just print pg_get_ruledef's result verbatim */ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16915"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                    <span class='String'>"SELECT pg_catalog.pg_get_ruledef('%u'::pg_catalog.oid)"</span><span class='Delimiter'>, 
</span>                          <a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN16919"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16915"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16919"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"query to get rule \"%s\" for table \"%s\" failed: wrong number of rows returned\n"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="../../test/examples/testlibpq.c.html#LN12"><span class='Ref_to_Func'>exit_nicely</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN232"><span class='Ref_to_Func'>printfPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><span class='String'>"%s\n"</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16919"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16919"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Add the command to alter the rules replication firing semantics if it 
     * differs from the default. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN381"><span class='Ref_to_Member'>ev_enabled</span></a> <span class='Operator'>!= </span><span class='String'>'O'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><span class='String'>"ALTER TABLE %s "</span><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN381"><span class='Ref_to_Member'>ev_enabled</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <span class='String'>'A'</span><span class='Operator'>: 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><span class='String'>"ENABLE ALWAYS RULE %s;\n"</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'R'</span><span class='Operator'>: 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><span class='String'>"ENABLE REPLICA RULE %s;\n"</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <span class='String'>'D'</span><span class='Operator'>: 
</span>                <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Delimiter'>, </span><span class='String'>"DISABLE RULE %s;\n"</span><span class='Delimiter'>, 
</span>                                  <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * DROP must be fully qualified in case same name appears in pg_catalog 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16914"><span class='Ref_To_Local'>is_view</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * We can't DROP a view's ON SELECT rule.  Instead, use CREATE OR 
         * REPLACE VIEW to replace the rule with something with minimal 
         * dependencies. 
         */ 
</span><a name="LN17028"></a>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16917"><span class='Ref_To_Local'>delcmd</span></a><span class='Delimiter'>, </span><span class='String'>"CREATE OR REPLACE VIEW %s."</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16917"><span class='Ref_To_Local'>delcmd</span></a><span class='Delimiter'>, </span><span class='String'>"%s"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17028"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN14986"><span class='Ref_to_Func'>createDummyViewAsClause</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16917"><span class='Ref_To_Local'>delcmd</span></a><span class='Delimiter'>, </span><span class='String'>" AS\n%s;\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17028"><span class='Ref_To_Local'>result</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17028"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16917"><span class='Ref_To_Local'>delcmd</span></a><span class='Delimiter'>, </span><span class='String'>"DROP RULE %s "</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16917"><span class='Ref_To_Local'>delcmd</span></a><span class='Delimiter'>, </span><span class='String'>"ON %s."</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16917"><span class='Ref_To_Local'>delcmd</span></a><span class='Delimiter'>, </span><span class='String'>"%s;\n"</span><span class='Delimiter'>, 
</span>                          <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16918"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>"RULE %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16918"><span class='Ref_To_Local'>labelq</span></a><span class='Delimiter'>, </span><span class='String'>" ON %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN16920"><span class='Ref_To_Local'>tag</span></a> <span class='Operator'>= </span><a href="../../common/psprintf.c.html#LN44"><span class='Ref_to_Func'>psprintf</span></a><span class='Parentheses'>(</span><span class='String'>"%s %s"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup.h.html#LN249"><span class='Ref_to_Proto'>ArchiveEntry</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16920"><span class='Ref_To_Local'>tag</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                     <span class='String'>"RULE"</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN57"><span class='Ref_to_EnumConst'>SECTION_POST_DATA</span></a><span class='Delimiter'>, 
</span>                     <a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16917"><span class='Ref_To_Local'>delcmd</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                     <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dump rule comments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN93"><span class='Ref_to_Const'>DUMP_COMPONENT_COMMENT</span></a><span class='Parentheses'>) 
</span>        <a href="pg_dump.c.html#LN150"><span class='Ref_to_Proto'>dumpComment</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16918"><span class='Ref_To_Local'>labelq</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN16913"><span class='Ref_To_Local'>tbinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN261"><span class='Ref_to_Member'>rolname</span></a><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN16910"><span class='Ref_to_Parameter'>rinfo</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN377"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16920"><span class='Ref_To_Local'>tag</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16915"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16916"><span class='Ref_To_Local'>cmd</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16917"><span class='Ref_To_Local'>delcmd</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN16918"><span class='Ref_To_Local'>labelq</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end dumpRule &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getExtensionMembership --- obtain extension membership data 
 * 
 * We need to identify objects that are extension members as soon as they're 
 * loaded, so that we can correctly determine whether they need to be dumped. 
 * Generally speaking, extension member objects will get marked as *not* to 
 * be dumped, as they will be recreated by the single CREATE EXTENSION 
 * command.  However, in binary upgrade mode we still need to dump the members 
 * individually. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN17091"></a><span class='Declare_Function'>getExtensionMembership</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Declare_Parameter'>extinfo</span><span class='Delimiter'>[], 
</span><a name="LN17092"></a>                       <span class='Keyword'>int </span><span class='Declare_Parameter'>numExtensions</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN17094"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN17095"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN17096"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>, 
</span><a name="LN17097"></a>                <span class='Declare_Local'>nextmembers</span><span class='Delimiter'>, 
</span><a name="LN17098"></a>                <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN17099"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_classid</span><span class='Delimiter'>, 
</span><a name="LN17100"></a>                <span class='Declare_Local'>i_objid</span><span class='Delimiter'>, 
</span><a name="LN17101"></a>                <span class='Declare_Local'>i_refobjid</span><span class='Delimiter'>; 
</span><a name="LN17102"></a>    <a href="pg_dump.h.html#LN617"><span class='Ref_to_Typedef'>ExtensionMemberId</span></a> <span class='Operator'>*</span><span class='Declare_Local'>extmembers</span><span class='Delimiter'>; 
</span><a name="LN17103"></a>    <a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>ext</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Nothing to do if no extensions */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17092"><span class='Ref_to_Parameter'>numExtensions</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17091"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17094"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* refclassid constraint is redundant but may speed the search */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17094"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span> 
                         <span class='String'>"classid, objid, refobjid "</span> 
                         <span class='String'>"FROM pg_depend "</span> 
                         <span class='String'>"WHERE refclassid = 'pg_extension'::regclass "</span> 
                         <span class='String'>"AND deptype = 'e' "</span> 
                         <span class='String'>"ORDER BY 3"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17095"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17091"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17094"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17096"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17095"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17099"><span class='Ref_To_Local'>i_classid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17095"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"classid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17100"><span class='Ref_To_Local'>i_objid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17095"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"objid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17101"><span class='Ref_To_Local'>i_refobjid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17095"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"refobjid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17102"><span class='Ref_To_Local'>extmembers</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN617"><span class='Ref_to_Typedef'>ExtensionMemberId</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17096"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN617"><span class='Ref_to_Typedef'>ExtensionMemberId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17097"><span class='Ref_To_Local'>nextmembers</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Accumulate data into extmembers[]. 
     * 
     * Since we ordered the SELECT by referenced ID, we can expect that 
     * multiple entries for the same extension will appear together; this 
     * saves on searches. 
     */ 
</span>    <a href="pg_dump.c.html#LN17103"><span class='Ref_To_Local'>ext</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17098"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17098"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN17096"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17098"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN17144"></a>        <a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a>   <span class='Declare_Local'>objId</span><span class='Delimiter'>; 
</span><a name="LN17145"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>extId</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN17144"><span class='Ref_To_Local'>objId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17095"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17098"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17099"><span class='Ref_To_Local'>i_classid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17144"><span class='Ref_To_Local'>objId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17095"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17098"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17100"><span class='Ref_To_Local'>i_objid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17145"><span class='Ref_To_Local'>extId</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17095"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17098"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17101"><span class='Ref_To_Local'>i_refobjid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17103"><span class='Ref_To_Local'>ext</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN17103"><span class='Ref_To_Local'>ext</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN17145"><span class='Ref_To_Local'>extId</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN17103"><span class='Ref_To_Local'>ext</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN655"><span class='Ref_to_Proto'>findExtensionByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17145"><span class='Ref_To_Local'>extId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17103"><span class='Ref_To_Local'>ext</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* shouldn't happen */ 
</span>            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span><span class='String'>"could not find referenced extension %u\n"</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17145"><span class='Ref_To_Local'>extId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="pg_dump.c.html#LN17102"><span class='Ref_To_Local'>extmembers</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN17097"><span class='Ref_To_Local'>nextmembers</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN619"><span class='Ref_to_Member'>catId</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17144"><span class='Ref_To_Local'>objId</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17102"><span class='Ref_To_Local'>extmembers</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN17097"><span class='Ref_To_Local'>nextmembers</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN620"><span class='Ref_to_Member'>ext</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17103"><span class='Ref_To_Local'>ext</span></a><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17097"><span class='Ref_To_Local'>nextmembers</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17095"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Remember the data for use later */ 
</span>    <a href="pg_dump.h.html#LN657"><span class='Ref_to_Proto'>setExtensionMembership</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17102"><span class='Ref_To_Local'>extmembers</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17097"><span class='Ref_To_Local'>nextmembers</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17094"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getExtensionMembership &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * processExtensionTables --- deal with extension configuration tables 
 * 
 * There are two parts to this process: 
 * 
 * 1. Identify and create dump records for extension configuration tables. 
 * 
 *    Extensions can mark tables as "configuration", which means that the user 
 *    is able and expected to modify those tables after the extension has been 
 *    loaded.  For these tables, we dump out only the data- the structure is 
 *    expected to be handled at CREATE EXTENSION time, including any indexes or 
 *    foreign keys, which brings us to- 
 * 
 * 2. Record FK dependencies between configuration tables. 
 * 
 *    Due to the FKs being created at CREATE EXTENSION time and therefore before 
 *    the data is loaded, we have to work out what the best order for reloading 
 *    the data is, to avoid FK violations when the tables are restored.  This is 
 *    not perfect- we can't handle circular dependencies and if any exist they 
 *    will cause an invalid dump to be produced (though at least all of the data 
 *    is included for a user to manually restore).  This is currently documented 
 *    but perhaps we can provide a better solution in the future. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN17199"></a><span class='Declare_Function'>processExtensionTables</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Declare_Parameter'>extinfo</span><span class='Delimiter'>[], 
</span><a name="LN17200"></a>                       <span class='Keyword'>int </span><span class='Declare_Parameter'>numExtensions</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN17202"></a>    <a href="pg_backup.h.html#LN126"><span class='Ref_to_Typedef'>DumpOptions</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dopt</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17199"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN179"><span class='Ref_to_Member'>dopt</span></a><span class='Delimiter'>; 
</span><a name="LN17203"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN17204"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN17205"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>, 
</span><a name="LN17206"></a>                <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN17207"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_conrelid</span><span class='Delimiter'>, 
</span><a name="LN17208"></a>                <span class='Declare_Local'>i_confrelid</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Nothing to do if no extensions */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17200"><span class='Ref_to_Parameter'>numExtensions</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Identify extension configuration tables and create TableDataInfo 
     * objects for them, ensuring their data will be dumped even though the 
     * tables themselves won't be. 
     * 
     * Note that we create TableDataInfo objects even in schemaOnly mode, ie, 
     * user data in a configuration table is treated like schema data. This 
     * seems appropriate since system data in a config table would get 
     * reloaded by CREATE EXTENSION. 
     */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17206"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17206"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN17200"><span class='Ref_to_Parameter'>numExtensions</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17206"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN17226"></a>        <a href="pg_dump.h.html#LN152"><span class='Ref_to_Typedef'>ExtensionInfo</span></a> <span class='Operator'>*</span><span class='Declare_Local'>curext</span> <span class='Operator'>= &</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17199"><span class='Ref_to_Parameter'>extinfo</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN17206"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN17227"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>extconfig</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17226"><span class='Ref_To_Local'>curext</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN158"><span class='Ref_to_Member'>extconfig</span></a><span class='Delimiter'>; 
</span><a name="LN17228"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>extcondition</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17226"><span class='Ref_To_Local'>curext</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN159"><span class='Ref_to_Member'>extcondition</span></a><span class='Delimiter'>; 
</span><a name="LN17229"></a>        <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>extconfigarray</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN17230"></a>        <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>extconditionarray</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN17231"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>nconfigitems</span><span class='Delimiter'>; 
</span><a name="LN17232"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>nconditionitems</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../include/fe_utils/string_utils.h.html#LN48"><span class='Ref_to_Proto'>parsePGArray</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17227"><span class='Ref_To_Local'>extconfig</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN17229"><span class='Ref_To_Local'>extconfigarray</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN17231"><span class='Ref_To_Local'>nconfigitems</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>          <a href="../../include/fe_utils/string_utils.h.html#LN48"><span class='Ref_to_Proto'>parsePGArray</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17228"><span class='Ref_To_Local'>extcondition</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN17230"><span class='Ref_To_Local'>extconditionarray</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN17232"><span class='Ref_To_Local'>nconditionitems</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>            <a href="pg_dump.c.html#LN17231"><span class='Ref_To_Local'>nconfigitems</span></a> <span class='Operator'>== </span><a href="pg_dump.c.html#LN17232"><span class='Ref_To_Local'>nconditionitems</span></a><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span><a name="LN17238"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>j</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17238"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17238"><span class='Ref_To_Local'>j</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN17231"><span class='Ref_To_Local'>nconfigitems</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17238"><span class='Ref_To_Local'>j</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN17242"></a>                <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>configtbl</span><span class='Delimiter'>; 
</span><a name="LN17243"></a>                <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>configtbloid</span> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17229"><span class='Ref_To_Local'>extconfigarray</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN17238"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN17244"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>dumpobj</span> <span class='Operator'>= 
</span>                <a href="pg_dump.c.html#LN17226"><span class='Ref_To_Local'>curext</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Delimiter'>; 
</span> 
                <a href="pg_dump.c.html#LN17242"><span class='Ref_To_Local'>configtbl</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN649"><span class='Ref_to_Proto'>findTableByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17243"><span class='Ref_To_Local'>configtbloid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17242"><span class='Ref_To_Local'>configtbl</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Tables of not-to-be-dumped extensions shouldn't be dumped 
                 * unless the table or its schema is explicitly included 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17226"><span class='Ref_To_Local'>curext</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN154"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& </span><a href="pg_dump.h.html#LN91"><span class='Ref_to_Const'>DUMP_COMPONENT_DEFINITION</span></a><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* check table explicitly requested */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN118"><span class='Ref_to_Global_Var'>table_include_oids</span></a><span class='Operator'>.</span><a href="../../include/fe_utils/simple_list.h.html#LN27"><span class='Ref_to_Member'>head</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& 
</span>                        <a href="../../fe_utils/simple_list.c.html#LN43"><span class='Ref_to_Func'>simple_oid_list_member</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN118"><span class='Ref_to_Global_Var'>table_include_oids</span></a><span class='Delimiter'>, 
</span>                                               <a href="pg_dump.c.html#LN17243"><span class='Ref_To_Local'>configtbloid</span></a><span class='Parentheses'>))</span> 
                        <a href="pg_dump.c.html#LN17244"><span class='Ref_To_Local'>dumpobj</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
                    <span class='Comment_Multi_Line'>/* check table's schema explicitly requested */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17242"><span class='Ref_To_Local'>configtbl</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN134"><span class='Ref_to_Member'>dump</span></a> <span class='Operator'>& 
</span>                        <a href="pg_dump.h.html#LN92"><span class='Ref_to_Const'>DUMP_COMPONENT_DATA</span></a><span class='Parentheses'>) 
</span>                        <a href="pg_dump.c.html#LN17244"><span class='Ref_To_Local'>dumpobj</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Comment_Multi_Line'>/* check table excluded by an exclusion switch */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN120"><span class='Ref_to_Global_Var'>table_exclude_oids</span></a><span class='Operator'>.</span><a href="../../include/fe_utils/simple_list.h.html#LN27"><span class='Ref_to_Member'>head</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& 
</span>                    <a href="../../fe_utils/simple_list.c.html#LN43"><span class='Ref_to_Func'>simple_oid_list_member</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN120"><span class='Ref_to_Global_Var'>table_exclude_oids</span></a><span class='Delimiter'>, 
</span>                                           <a href="pg_dump.c.html#LN17243"><span class='Ref_To_Local'>configtbloid</span></a><span class='Parentheses'>))</span> 
                    <a href="pg_dump.c.html#LN17244"><span class='Ref_To_Local'>dumpobj</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* check schema excluded by an exclusion switch */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../fe_utils/simple_list.c.html#LN43"><span class='Ref_to_Func'>simple_oid_list_member</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN115"><span class='Ref_to_Global_Var'>schema_exclude_oids</span></a><span class='Delimiter'>, 
</span>                                  <a href="pg_dump.c.html#LN17242"><span class='Ref_To_Local'>configtbl</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN260"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><span class='Control'>namespace</span><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN144"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>))</span> 
                    <a href="pg_dump.c.html#LN17244"><span class='Ref_To_Local'>dumpobj</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17244"><span class='Ref_To_Local'>dumpobj</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* 
                     * Note: config tables are dumped without OIDs regardless 
                     * of the --oids setting.  This is because row filtering 
                     * conditions aren't compatible with dumping OIDs. 
                     */ 
</span>                    <a href="pg_dump.c.html#LN225"><span class='Ref_to_Proto'>makeTableDataInfo</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17202"><span class='Ref_To_Local'>dopt</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17242"><span class='Ref_To_Local'>configtbl</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17242"><span class='Ref_To_Local'>configtbl</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17230"><span class='Ref_To_Local'>extconditionarray</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN17238"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                            <a href="pg_dump.c.html#LN17242"><span class='Ref_To_Local'>configtbl</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN349"><span class='Ref_to_Member'>filtercond</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17230"><span class='Ref_To_Local'>extconditionarray</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN17238"><span class='Ref_To_Local'>j</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for j=0;j&LT;nconfigitems;j+... &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if parsePGArray(extconfi... &raquo; </span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17229"><span class='Ref_To_Local'>extconfigarray</span></a><span class='Parentheses'>) 
</span>            <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17229"><span class='Ref_To_Local'>extconfigarray</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17230"><span class='Ref_To_Local'>extconditionarray</span></a><span class='Parentheses'>) 
</span>            <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17230"><span class='Ref_To_Local'>extconditionarray</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numExtensions;i... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * Now that all the TableInfoData objects have been created for all the 
     * extensions, check their FK dependencies and register them to try and 
     * dump the data out in an order that they can be restored in. 
     * 
     * Note that this is not a problem for user tables as their FKs are 
     * recreated after the data has been loaded. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17199"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17203"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN232"><span class='Ref_to_Func'>printfPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17203"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, 
</span>                      <span class='String'>"SELECT conrelid, confrelid "</span> 
                      <span class='String'>"FROM pg_constraint "</span> 
                      <span class='String'>"JOIN pg_depend ON (objid = confrelid) "</span> 
                      <span class='String'>"WHERE contype = 'f' "</span> 
                      <span class='String'>"AND refclassid = 'pg_extension'::regclass "</span> 
                      <span class='String'>"AND classid = 'pg_class'::regclass;"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17204"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17199"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17203"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17205"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17204"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17207"><span class='Ref_To_Local'>i_conrelid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17204"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"conrelid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17208"><span class='Ref_To_Local'>i_confrelid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17204"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"confrelid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Now get the dependencies and register them */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17206"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17206"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN17205"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17206"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN17333"></a>        <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>conrelid</span><span class='Delimiter'>, 
</span><a name="LN17334"></a>                    <span class='Declare_Local'>confrelid</span><span class='Delimiter'>; 
</span><a name="LN17335"></a>        <a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a>  <span class='Operator'>*</span><span class='Declare_Local'>reftable</span><span class='Delimiter'>, 
</span><a name="LN17336"></a>                   <span class='Operator'>*</span><span class='Declare_Local'>contable</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN17333"><span class='Ref_To_Local'>conrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17204"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17206"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17207"><span class='Ref_To_Local'>i_conrelid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17334"><span class='Ref_To_Local'>confrelid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17204"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17206"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17208"><span class='Ref_To_Local'>i_confrelid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17336"><span class='Ref_To_Local'>contable</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN649"><span class='Ref_to_Proto'>findTableByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17333"><span class='Ref_To_Local'>conrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17335"><span class='Ref_To_Local'>reftable</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN649"><span class='Ref_to_Proto'>findTableByOid</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17334"><span class='Ref_To_Local'>confrelid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17335"><span class='Ref_To_Local'>reftable</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN17335"><span class='Ref_To_Local'>reftable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN17336"><span class='Ref_To_Local'>contable</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN17336"><span class='Ref_To_Local'>contable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Make referencing TABLE_DATA object depend on the referenced table's 
         * TABLE_DATA object. 
         */ 
</span>        <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pg_dump.c.html#LN17336"><span class='Ref_To_Local'>contable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Delimiter'>, 
</span>                            <a href="pg_dump.c.html#LN17335"><span class='Ref_To_Local'>reftable</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN330"><span class='Ref_to_Member'>dataObj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN346"><span class='Ref_to_Member'>dobj</span></a><span class='Operator'>.</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17204"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17203"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end processExtensionTables &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * getDependencies --- obtain available dependency data 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN17364"></a><span class='Declare_Function'>getDependencies</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN17366"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN17367"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span><a name="LN17368"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ntups</span><span class='Delimiter'>, 
</span><a name="LN17369"></a>                <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN17370"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i_classid</span><span class='Delimiter'>, 
</span><a name="LN17371"></a>                <span class='Declare_Local'>i_objid</span><span class='Delimiter'>, 
</span><a name="LN17372"></a>                <span class='Declare_Local'>i_refclassid</span><span class='Delimiter'>, 
</span><a name="LN17373"></a>                <span class='Declare_Local'>i_refobjid</span><span class='Delimiter'>, 
</span><a name="LN17374"></a>                <span class='Declare_Local'>i_deptype</span><span class='Delimiter'>; 
</span><a name="LN17375"></a>    <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dobj</span><span class='Delimiter'>, 
</span><a name="LN17376"></a>               <span class='Operator'>*</span><span class='Declare_Local'>refdobj</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN90"><span class='Ref_to_Global_Var'>g_verbose</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"reading dependency data\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Make sure we are in proper schema */ 
</span>    <a href="pg_dump.c.html#LN242"><span class='Ref_to_Proto'>selectSourceSchema</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17364"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17366"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * PIN dependencies aren't interesting, and EXTENSION dependencies were 
     * already processed by getExtensionMembership. 
     */ 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17366"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span> 
                         <span class='String'>"classid, objid, refclassid, refobjid, deptype "</span> 
                         <span class='String'>"FROM pg_depend "</span> 
                         <span class='String'>"WHERE deptype != 'p' AND deptype != 'e' "</span> 
                         <span class='String'>"ORDER BY 1,2"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN16"><span class='Ref_to_Proto'>ExecuteSqlQuery</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17364"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17366"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>, </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN87"><span class='Ref_to_EnumConst'>PGRES_TUPLES_OK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17368"><span class='Ref_To_Local'>ntups</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN473"><span class='Ref_to_Proto'>PQntuples</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17370"><span class='Ref_To_Local'>i_classid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"classid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17371"><span class='Ref_To_Local'>i_objid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"objid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17372"><span class='Ref_To_Local'>i_refclassid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"refclassid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17373"><span class='Ref_To_Local'>i_refobjid</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"refobjid"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17374"><span class='Ref_To_Local'>i_deptype</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/libpq-fe.h.html#LN477"><span class='Ref_to_Proto'>PQfnumber</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='String'>"deptype"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Since we ordered the SELECT by referencing ID, we can expect that 
     * multiple entries for the same object will appear together; this saves 
     * on searches. 
     */ 
</span>    <a href="pg_dump.c.html#LN17375"><span class='Ref_To_Local'>dobj</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17369"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17369"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN17368"><span class='Ref_To_Local'>ntups</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17369"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN17415"></a>        <a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a>   <span class='Declare_Local'>objId</span><span class='Delimiter'>; 
</span><a name="LN17416"></a>        <a href="pg_backup.h.html#LN223"><span class='Ref_to_Typedef'>CatalogId</span></a>   <span class='Declare_Local'>refobjId</span><span class='Delimiter'>; 
</span><a name="LN17417"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>deptype</span><span class='Delimiter'>; 
</span> 
        <a href="pg_dump.c.html#LN17415"><span class='Ref_To_Local'>objId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17369"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17370"><span class='Ref_To_Local'>i_classid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17415"><span class='Ref_To_Local'>objId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17369"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17371"><span class='Ref_To_Local'>i_objid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17416"><span class='Ref_To_Local'>refobjId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17369"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17372"><span class='Ref_To_Local'>i_refclassid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17416"><span class='Ref_To_Local'>refobjId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>= </span><a href="../../include/postgres_ext.h.html#LN41"><span class='Ref_to_Macro'>atooid</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17369"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17373"><span class='Ref_To_Local'>i_refobjid</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17417"><span class='Ref_To_Local'>deptype</span></a> <span class='Operator'>= *</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17369"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17374"><span class='Ref_To_Local'>i_deptype</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17375"><span class='Ref_To_Local'>dobj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL </span><span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN17375"><span class='Ref_To_Local'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN17415"><span class='Ref_To_Local'>objId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a> <span class='Operator'>|| 
</span>            <a href="pg_dump.c.html#LN17375"><span class='Ref_To_Local'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN17415"><span class='Ref_To_Local'>objId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.c.html#LN17375"><span class='Ref_To_Local'>dobj</span></a> <span class='Operator'>= </span><a href="common.c.html#LN537"><span class='Ref_to_Func'>findObjectByCatalogId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17415"><span class='Ref_To_Local'>objId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Failure to find objects mentioned in pg_depend is not unexpected, 
         * since for example we don't collect info about TOAST tables. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17375"><span class='Ref_To_Local'>dobj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> NOT_USED 
            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span><span class='String'>"no referencing object %u %u\n"</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN17415"><span class='Ref_To_Local'>objId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17415"><span class='Ref_To_Local'>objId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="pg_dump.c.html#LN17376"><span class='Ref_To_Local'>refdobj</span></a> <span class='Operator'>= </span><a href="common.c.html#LN537"><span class='Ref_to_Func'>findObjectByCatalogId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17416"><span class='Ref_To_Local'>refobjId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17376"><span class='Ref_To_Local'>refdobj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><span class='Directive'>#ifdef</span> NOT_USED 
            <a href="../../../contrib/seg/segscan.l.html#LN10"><span class='Ref_to_Macro'>fprintf</span></a><span class='Parentheses'>(</span>stderr<span class='Delimiter'>, </span><span class='String'>"no referenced object %u %u\n"</span><span class='Delimiter'>, 
</span>                    <a href="pg_dump.c.html#LN17416"><span class='Ref_To_Local'>refobjId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN225"><span class='Ref_to_Member'>tableoid</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17416"><span class='Ref_To_Local'>refobjId</span></a><span class='Operator'>.</span><a href="pg_backup.h.html#LN226"><span class='Ref_to_Member'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Ordinarily, table rowtypes have implicit dependencies on their 
         * tables.  However, for a composite type the implicit dependency goes 
         * the other way in pg_depend; which is the right thing for DROP but 
         * it doesn't produce the dependency ordering we need. So in that one 
         * case, we reverse the direction of the dependency. 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17417"><span class='Ref_To_Local'>deptype</span></a> <span class='Operator'>== </span><span class='String'>'i'</span> <span class='Operator'>&& 
</span>            <a href="pg_dump.c.html#LN17375"><span class='Ref_To_Local'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>== </span><a href="pg_dump.h.html#LN55"><span class='Ref_to_EnumConst'>DO_TABLE</span></a> <span class='Operator'>&& 
</span>            <a href="pg_dump.c.html#LN17376"><span class='Ref_To_Local'>refdobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>== </span><a href="pg_dump.h.html#LN45"><span class='Ref_to_EnumConst'>DO_TYPE</span></a><span class='Parentheses'>) 
</span>            <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17376"><span class='Ref_To_Local'>refdobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17375"><span class='Ref_To_Local'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Comment_Multi_Line'>/* normal case */ 
</span>            <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17375"><span class='Ref_To_Local'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17376"><span class='Ref_To_Local'>refdobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;ntups;i++ &raquo; </span> 
 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17367"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17366"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getDependencies &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * createBoundaryObjects - create dummy DumpableObjects to represent 
 * dump section boundaries. 
 */ 
</span><span class='Keyword'>static </span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>* 
</span><a name="LN17481"></a><span class='Declare_Function'>createBoundaryObjects</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN17483"></a>    <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dobjs</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17483"><span class='Ref_To_Local'>dobjs</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><span class='Number'>2</span> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17483"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN78"><span class='Ref_to_EnumConst'>DO_PRE_DATA_BOUNDARY</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17483"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>; 
</span>    <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17483"><span class='Ref_To_Local'>dobjs</span></a> <span class='Operator'>+ </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17483"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><span class='String'>"PRE-DATA BOUNDARY"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17483"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>= </span><a href="pg_dump.h.html#LN79"><span class='Ref_to_EnumConst'>DO_POST_DATA_BOUNDARY</span></a><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17483"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN130"><span class='Ref_to_Member'>catId</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN131"><span class='Ref_to_Global_Var'>nilCatalogId</span></a><span class='Delimiter'>; 
</span>    <a href="common.c.html#LN455"><span class='Ref_to_Func'>AssignDumpId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17483"><span class='Ref_To_Local'>dobjs</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17483"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="pg_dump.h.html#LN132"><span class='Ref_to_Member'>name</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><span class='String'>"POST-DATA BOUNDARY"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN17483"><span class='Ref_To_Local'>dobjs</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * addBoundaryDependencies - add dependencies as needed to enforce the dump 
 * section boundaries. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN17505"></a><span class='Declare_Function'>addBoundaryDependencies</span><span class='Parentheses'>(</span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>dobjs</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>numObjs</span><span class='Delimiter'>, 
</span><a name="LN17506"></a>                        <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>boundaryObjs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN17508"></a>    <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>preDataBound</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17506"><span class='Ref_to_Parameter'>boundaryObjs</span></a> <span class='Operator'>+ </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN17509"></a>    <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>postDataBound</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17506"><span class='Ref_to_Parameter'>boundaryObjs</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN17510"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17510"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17510"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN17505"><span class='Ref_to_Parameter'>numObjs</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17510"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN17514"></a>        <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dobj</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17505"><span class='Ref_to_Parameter'>dobjs</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN17510"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * The classification of object types here must match the SECTION_xxx 
         * values assigned during subsequent ArchiveEntry calls! 
         */ 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17514"><span class='Ref_To_Local'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN43"><span class='Ref_to_EnumConst'>DO_NAMESPACE</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN44"><span class='Ref_to_EnumConst'>DO_EXTENSION</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN45"><span class='Ref_to_EnumConst'>DO_TYPE</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN46"><span class='Ref_to_EnumConst'>DO_SHELL_TYPE</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN47"><span class='Ref_to_EnumConst'>DO_FUNC</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN48"><span class='Ref_to_EnumConst'>DO_AGG</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN49"><span class='Ref_to_EnumConst'>DO_OPERATOR</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN50"><span class='Ref_to_EnumConst'>DO_ACCESS_METHOD</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN51"><span class='Ref_to_EnumConst'>DO_OPCLASS</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN52"><span class='Ref_to_EnumConst'>DO_OPFAMILY</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN53"><span class='Ref_to_EnumConst'>DO_COLLATION</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN54"><span class='Ref_to_EnumConst'>DO_CONVERSION</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN55"><span class='Ref_to_EnumConst'>DO_TABLE</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN56"><span class='Ref_to_EnumConst'>DO_ATTRDEF</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN63"><span class='Ref_to_EnumConst'>DO_PROCLANG</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN64"><span class='Ref_to_EnumConst'>DO_CAST</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN67"><span class='Ref_to_EnumConst'>DO_DUMMY_TYPE</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN68"><span class='Ref_to_EnumConst'>DO_TSPARSER</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN69"><span class='Ref_to_EnumConst'>DO_TSDICT</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN70"><span class='Ref_to_EnumConst'>DO_TSTEMPLATE</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN71"><span class='Ref_to_EnumConst'>DO_TSCONFIG</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN72"><span class='Ref_to_EnumConst'>DO_FDW</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN73"><span class='Ref_to_EnumConst'>DO_FOREIGN_SERVER</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN75"><span class='Ref_to_EnumConst'>DO_TRANSFORM</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN76"><span class='Ref_to_EnumConst'>DO_BLOB</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* Pre-data objects: must come before the pre-data boundary */ 
</span>                <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17508"><span class='Ref_To_Local'>preDataBound</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17514"><span class='Ref_To_Local'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN65"><span class='Ref_to_EnumConst'>DO_TABLE_DATA</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN66"><span class='Ref_to_EnumConst'>DO_SEQUENCE_SET</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN77"><span class='Ref_to_EnumConst'>DO_BLOB_DATA</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* Data objects: must come between the boundaries */ 
</span>                <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17514"><span class='Ref_To_Local'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17508"><span class='Ref_To_Local'>preDataBound</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17509"><span class='Ref_To_Local'>postDataBound</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17514"><span class='Ref_To_Local'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN57"><span class='Ref_to_EnumConst'>DO_INDEX</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN58"><span class='Ref_to_EnumConst'>DO_STATSEXT</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN81"><span class='Ref_to_EnumConst'>DO_REFRESH_MATVIEW</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN60"><span class='Ref_to_EnumConst'>DO_TRIGGER</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN80"><span class='Ref_to_EnumConst'>DO_EVENT_TRIGGER</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN74"><span class='Ref_to_EnumConst'>DO_DEFAULT_ACL</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN82"><span class='Ref_to_EnumConst'>DO_POLICY</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN83"><span class='Ref_to_EnumConst'>DO_PUBLICATION</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN84"><span class='Ref_to_EnumConst'>DO_PUBLICATION_REL</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN85"><span class='Ref_to_EnumConst'>DO_SUBSCRIPTION</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* Post-data objects: must come after the post-data boundary */ 
</span>                <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17514"><span class='Ref_To_Local'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17509"><span class='Ref_To_Local'>postDataBound</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN59"><span class='Ref_to_EnumConst'>DO_RULE</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* Rules are post-data, but only if dumped separately */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="pg_dump.h.html#LN375"><span class='Ref_to_Typedef'>RuleInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN17514"><span class='Ref_To_Local'>dobj</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>separate<span class='Parentheses'>)</span> 
                    <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17514"><span class='Ref_To_Local'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17509"><span class='Ref_To_Local'>postDataBound</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN61"><span class='Ref_to_EnumConst'>DO_CONSTRAINT</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN62"><span class='Ref_to_EnumConst'>DO_FK_CONSTRAINT</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* Constraints are post-data, but only if dumped separately */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="pg_dump.h.html#LN423"><span class='Ref_to_Typedef'>ConstraintInfo</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN17514"><span class='Ref_To_Local'>dobj</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>separate<span class='Parentheses'>)</span> 
                    <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17514"><span class='Ref_To_Local'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17509"><span class='Ref_To_Local'>postDataBound</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN78"><span class='Ref_to_EnumConst'>DO_PRE_DATA_BOUNDARY</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* nothing to do */ 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Control'>case</span> <a href="pg_dump.h.html#LN79"><span class='Ref_to_EnumConst'>DO_POST_DATA_BOUNDARY</span></a><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* must come after the pre-data boundary */ 
</span>                <a href="pg_dump.h.html#LN646"><span class='Ref_to_Proto'>addObjectDependency</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17514"><span class='Ref_To_Local'>dobj</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17508"><span class='Ref_To_Local'>preDataBound</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN131"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch dobj-&GT;objType &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;numObjs;i++ &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end addBoundaryDependencies &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * BuildArchiveDependencies - create dependency data for archive TOC entries 
 * 
 * The raw dependency data obtained by getDependencies() is not terribly 
 * useful in an archive dump, because in many cases there are dependency 
 * chains linking through objects that don't appear explicitly in the dump. 
 * For example, a view will depend on its _RETURN rule while the _RETURN rule 
 * will depend on other objects --- but the rule will not appear as a separate 
 * object in the dump.  We need to adjust the view's dependencies to include 
 * whatever the rule depends on that is included in the dump. 
 * 
 * Just to make things more complicated, there are also "special" dependencies 
 * such as the dependency of a TABLE DATA item on its TABLE, which we must 
 * not rearrange because pg_restore knows that TABLE DATA only depends on 
 * its table.  In these cases we must leave the dependencies strictly as-is 
 * even if they refer to not-to-be-dumped objects. 
 * 
 * To handle this, the convention is that "special" dependencies are created 
 * during ArchiveEntry calls, and an archive TOC item that has any such 
 * entries will not be touched here.  Otherwise, we recursively search the 
 * DumpableObject data structures to build the correct dependencies for each 
 * archive TOC item. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN17617"></a><span class='Declare_Function'>BuildArchiveDependencies</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN17619"></a>    <a href="pg_backup_archiver.h.html#LN119"><span class='Ref_to_Typedef'>ArchiveHandle</span></a> <span class='Operator'>*</span><span class='Declare_Local'>AH</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_backup_archiver.h.html#LN119"><span class='Ref_to_Typedef'>ArchiveHandle</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pg_dump.c.html#LN17617"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>; 
</span><a name="LN17620"></a>    <a href="pg_backup_archiver.h.html#LN120"><span class='Ref_to_Typedef'>TocEntry</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>te</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Scan all TOC entries in the archive */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17620"><span class='Ref_To_Local'>te</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17619"><span class='Ref_To_Local'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup_archiver.h.html#LN302"><span class='Ref_to_Member'>toc</span></a><span class='Operator'>-&GT;</span><a href="pg_backup_archiver.h.html#LN339"><span class='Ref_to_Member'>next</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17620"><span class='Ref_To_Local'>te</span></a> <span class='Operator'>!= </span><a href="pg_dump.c.html#LN17619"><span class='Ref_To_Local'>AH</span></a><span class='Operator'>-&GT;</span><a href="pg_backup_archiver.h.html#LN302"><span class='Ref_to_Member'>toc</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17620"><span class='Ref_To_Local'>te</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17620"><span class='Ref_To_Local'>te</span></a><span class='Operator'>-&GT;</span><a href="pg_backup_archiver.h.html#LN339"><span class='Ref_to_Member'>next</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN17625"></a>        <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>dobj</span><span class='Delimiter'>; 
</span><a name="LN17626"></a>        <a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>dependencies</span><span class='Delimiter'>; 
</span><a name="LN17627"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>nDeps</span><span class='Delimiter'>; 
</span><a name="LN17628"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>allocDeps</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* No need to process entries that will not be dumped */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17620"><span class='Ref_To_Local'>te</span></a><span class='Operator'>-&GT;</span><a href="pg_backup_archiver.h.html#LN363"><span class='Ref_to_Member'>reqs</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Ignore entries that already have "special" dependencies */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17620"><span class='Ref_To_Local'>te</span></a><span class='Operator'>-&GT;</span><a href="pg_backup_archiver.h.html#LN356"><span class='Ref_to_Member'>nDeps</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Otherwise, look up the item's original DumpableObject, if any */ 
</span>        <a href="pg_dump.c.html#LN17625"><span class='Ref_To_Local'>dobj</span></a> <span class='Operator'>= </span><a href="common.c.html#LN519"><span class='Ref_to_Func'>findObjectByDumpId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17620"><span class='Ref_To_Local'>te</span></a><span class='Operator'>-&GT;</span><a href="pg_backup_archiver.h.html#LN341"><span class='Ref_to_Member'>dumpId</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17625"><span class='Ref_To_Local'>dobj</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* No work if it has no dependencies */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17625"><span class='Ref_To_Local'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN138"><span class='Ref_to_Member'>nDeps</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Set up work array */ 
</span>        <a href="pg_dump.c.html#LN17628"><span class='Ref_To_Local'>allocDeps</span></a> <span class='Operator'>= </span><span class='Number'>64</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17626"><span class='Ref_To_Local'>dependencies</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN25"><span class='Ref_to_Proto'>pg_malloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17628"><span class='Ref_To_Local'>allocDeps</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17627"><span class='Ref_To_Local'>nDeps</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Recursively find all dumpable dependencies */ 
</span>        <a href="pg_dump.c.html#LN216"><span class='Ref_to_Proto'>findDumpableDependencies</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17619"><span class='Ref_To_Local'>AH</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17625"><span class='Ref_To_Local'>dobj</span></a><span class='Delimiter'>, 
</span>                                 <span class='Operator'>&</span><a href="pg_dump.c.html#LN17626"><span class='Ref_To_Local'>dependencies</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN17627"><span class='Ref_To_Local'>nDeps</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pg_dump.c.html#LN17628"><span class='Ref_To_Local'>allocDeps</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* And save 'em ... */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17627"><span class='Ref_To_Local'>nDeps</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pg_dump.c.html#LN17626"><span class='Ref_To_Local'>dependencies</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN28"><span class='Ref_to_Proto'>pg_realloc</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17626"><span class='Ref_To_Local'>dependencies</span></a><span class='Delimiter'>, 
</span>                                                 <a href="pg_dump.c.html#LN17627"><span class='Ref_To_Local'>nDeps</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN17620"><span class='Ref_To_Local'>te</span></a><span class='Operator'>-&GT;</span><a href="pg_backup_archiver.h.html#LN355"><span class='Ref_to_Member'>dependencies</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17626"><span class='Ref_To_Local'>dependencies</span></a><span class='Delimiter'>; 
</span>            <a href="pg_dump.c.html#LN17620"><span class='Ref_To_Local'>te</span></a><span class='Operator'>-&GT;</span><a href="pg_backup_archiver.h.html#LN356"><span class='Ref_to_Member'>nDeps</span></a> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17627"><span class='Ref_To_Local'>nDeps</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <a href="../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17626"><span class='Ref_To_Local'>dependencies</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for te=AH-&GT;toc-&GT;next;te!=... &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end BuildArchiveDependencies &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* Recursive search subroutine for BuildArchiveDependencies */ 
</span><span class='Keyword'>static void 
</span><a name="LN17665"></a><span class='Declare_Function'>findDumpableDependencies</span><span class='Parentheses'>(</span><a href="pg_backup_archiver.h.html#LN119"><span class='Ref_to_Typedef'>ArchiveHandle</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>AH</span><span class='Delimiter'>, </span><a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dobj</span><span class='Delimiter'>, 
</span><a name="LN17666"></a>                         <a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>dependencies</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>nDeps</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>allocDeps</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN17668"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Ignore section boundary objects: if we search through them, we'll 
     * report lots of bogus dependencies. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17665"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>== </span><a href="pg_dump.h.html#LN78"><span class='Ref_to_EnumConst'>DO_PRE_DATA_BOUNDARY</span></a> <span class='Operator'>|| 
</span>        <a href="pg_dump.c.html#LN17665"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN129"><span class='Ref_to_Member'>objType</span></a> <span class='Operator'>== </span><a href="pg_dump.h.html#LN79"><span class='Ref_to_EnumConst'>DO_POST_DATA_BOUNDARY</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17668"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17668"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN17665"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN138"><span class='Ref_to_Member'>nDeps</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17668"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN17680"></a>        <a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a>      <span class='Declare_Local'>depid</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17665"><span class='Ref_to_Parameter'>dobj</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN137"><span class='Ref_to_Member'>dependencies</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN17668"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_backup_archiver.h.html#LN392"><span class='Ref_to_Proto'>TocIDRequired</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17665"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17680"><span class='Ref_To_Local'>depid</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* Object will be dumped, so just reference it as a dependency */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>nDeps</span></a> <span class='Operator'>&GT;= *</span><a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>allocDeps</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>allocDeps</span></a> <span class='Operator'>*= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>dependencies</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../include/common/fe_memutils.h.html#LN28"><span class='Ref_to_Proto'>pg_realloc</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>dependencies</span></a><span class='Delimiter'>, 
</span>                                                <span class='Operator'>*</span><a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>allocDeps</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN229"><span class='Ref_to_Typedef'>DumpId</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>dependencies</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Operator'>*</span><a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>nDeps</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="pg_dump.c.html#LN17680"><span class='Ref_To_Local'>depid</span></a><span class='Delimiter'>; 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>nDeps</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Object will not be dumped, so recursively consider its deps. We 
             * rely on the assumption that sortDumpableObjects already broke 
             * any dependency loops, else we might recurse infinitely. 
             */ 
</span><a name="LN17701"></a>            <a href="pg_dump.h.html#LN127"><span class='Ref_to_Typedef'>DumpableObject</span></a> <span class='Operator'>*</span><span class='Declare_Local'>otherdobj</span> <span class='Operator'>= </span><a href="common.c.html#LN519"><span class='Ref_to_Func'>findObjectByDumpId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17680"><span class='Ref_To_Local'>depid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17701"><span class='Ref_To_Local'>otherdobj</span></a><span class='Parentheses'>) 
</span>                <a href="pg_dump.c.html#LN216"><span class='Ref_to_Proto'>findDumpableDependencies</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17665"><span class='Ref_to_Parameter'>AH</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17701"><span class='Ref_To_Local'>otherdobj</span></a><span class='Delimiter'>, 
</span>                                         <a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>dependencies</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>nDeps</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17666"><span class='Ref_to_Parameter'>allocDeps</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=0;i&LT;dobj-&GT;nDeps;i++ &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end findDumpableDependencies &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * selectSourceSchema - make the specified schema the active search path 
 * in the source database. 
 * 
 * NB: pg_catalog is explicitly searched after the specified schema; 
 * so user names are only qualified if they are cross-schema references, 
 * and system names are only qualified if they conflict with a user name 
 * in the current schema. 
 * 
 * Whenever the selected schema is not pg_catalog, be careful to qualify 
 * references to system catalogs and types in our emitted commands! 
 * 
 * This function is called only from selectSourceSchemaOnAH and 
 * selectSourceSchema. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN17727"></a><span class='Declare_Function'>selectSourceSchema</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>schemaName</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN17729"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* This is checked by the callers already */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17727"><span class='Ref_to_Parameter'>schemaName</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& *</span><a href="pg_dump.c.html#LN17727"><span class='Ref_to_Parameter'>schemaName</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17729"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17729"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SET search_path = %s"</span><span class='Delimiter'>, 
</span>                      <a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17727"><span class='Ref_to_Parameter'>schemaName</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17727"><span class='Ref_to_Parameter'>schemaName</span></a><span class='Delimiter'>, </span><span class='String'>"pg_catalog"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17729"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>", pg_catalog"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_backup_db.h.html#LN15"><span class='Ref_to_Proto'>ExecuteSqlStatement</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17727"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17729"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17729"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * getFormattedTypeName - retrieve a nicely-formatted type name for the 
 * given type name. 
 * 
 * NB: the result may depend on the currently-selected search_path; this is 
 * why we don't try to cache the names. 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN17753"></a><span class='Declare_Function'>getFormattedTypeName</span><span class='Parentheses'>(</span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Delimiter'>, </span><a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>oid</span><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN81"><span class='Ref_to_Enum'>OidOptions</span></a> <span class='Declare_Parameter'>opts</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN17755"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN17756"></a>    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Local'>query</span><span class='Delimiter'>; 
</span><a name="LN17757"></a>    <a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17753"><span class='Ref_to_Parameter'>oid</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pg_dump.c.html#LN17753"><span class='Ref_to_Parameter'>opts</span></a> <span class='Operator'>& </span><a href="pg_dump.c.html#LN83"><span class='Ref_to_EnumConst'>zeroAsOpaque</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN125"><span class='Ref_to_Global_Var'>g_opaque_type</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pg_dump.c.html#LN17753"><span class='Ref_to_Parameter'>opts</span></a> <span class='Operator'>& </span><a href="pg_dump.c.html#LN84"><span class='Ref_to_EnumConst'>zeroAsAny</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><span class='String'>"'any'"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pg_dump.c.html#LN17753"><span class='Ref_to_Parameter'>opts</span></a> <span class='Operator'>& </span><a href="pg_dump.c.html#LN85"><span class='Ref_to_EnumConst'>zeroAsStar</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><span class='String'>"*"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pg_dump.c.html#LN17753"><span class='Ref_to_Parameter'>opts</span></a> <span class='Operator'>& </span><a href="pg_dump.c.html#LN86"><span class='Ref_to_EnumConst'>zeroAsNone</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><span class='String'>"NONE"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pg_dump.c.html#LN17756"><span class='Ref_To_Local'>query</span></a> <span class='Operator'>= </span><a href="../../interfaces/libpq/pqexpbuffer.c.html#LN69"><span class='Ref_to_Func'>createPQExpBuffer</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN260"><span class='Ref_to_Func'>appendPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17756"><span class='Ref_To_Local'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT pg_catalog.format_type('%u'::pg_catalog.oid, NULL)"</span><span class='Delimiter'>, 
</span>                      <a href="pg_dump.c.html#LN17753"><span class='Ref_to_Parameter'>oid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17757"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="pg_backup_db.h.html#LN18"><span class='Ref_to_Proto'>ExecuteSqlQueryForSingleRow</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17753"><span class='Ref_to_Parameter'>fout</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17756"><span class='Ref_To_Local'>query</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* result of format_type is already quoted */ 
</span>    <a href="pg_dump.c.html#LN17755"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../include/common/fe_memutils.h.html#LN24"><span class='Ref_to_Proto'>pg_strdup</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN488"><span class='Ref_to_Proto'>PQgetvalue</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17757"><span class='Ref_To_Local'>res</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/libpq-fe.h.html#LN501"><span class='Ref_to_Proto'>PQclear</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17757"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../interfaces/libpq/pqexpbuffer.c.html#LN111"><span class='Ref_to_Func'>destroyPQExpBuffer</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17756"><span class='Ref_To_Local'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pg_dump.c.html#LN17755"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end getFormattedTypeName &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Return a column list clause for the given relation. 
 * 
 * Special case: if there are no undropped columns in the relation, return 
 * "", not an invalid "()" column list. 
 */ 
</span><span class='Keyword'>static const char </span><span class='Operator'>* 
</span><a name="LN17793"></a><span class='Declare_Function'>fmtCopyColumnList</span><span class='Parentheses'>(</span><span class='Keyword'>const </span><a href="pg_dump.h.html#LN255"><span class='Ref_to_Typedef'>TableInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>ti</span><span class='Delimiter'>, </span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>buffer</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN17795"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>numatts</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17793"><span class='Ref_to_Parameter'>ti</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN302"><span class='Ref_to_Member'>numatts</span></a><span class='Delimiter'>; 
</span><a name="LN17796"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>attnames</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17793"><span class='Ref_to_Parameter'>ti</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN303"><span class='Ref_to_Member'>attnames</span></a><span class='Delimiter'>; 
</span><a name="LN17797"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Local'>attisdropped</span> <span class='Operator'>= </span><a href="pg_dump.c.html#LN17793"><span class='Ref_to_Parameter'>ti</span></a><span class='Operator'>-&GT;</span><a href="pg_dump.h.html#LN309"><span class='Ref_to_Member'>attisdropped</span></a><span class='Delimiter'>; 
</span><a name="LN17798"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>needComma</span><span class='Delimiter'>; 
</span><a name="LN17799"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17793"><span class='Ref_to_Parameter'>buffer</span></a><span class='Delimiter'>, </span><span class='String'>'('</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pg_dump.c.html#LN17798"><span class='Ref_To_Local'>needComma</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17799"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17799"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pg_dump.c.html#LN17795"><span class='Ref_To_Local'>numatts</span></a><span class='Delimiter'>; </span><a href="pg_dump.c.html#LN17799"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17797"><span class='Ref_To_Local'>attisdropped</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN17799"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17798"><span class='Ref_To_Local'>needComma</span></a><span class='Parentheses'>) 
</span>            <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17793"><span class='Ref_to_Parameter'>buffer</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN164"><span class='Ref_to_Proto'>appendPQExpBufferStr</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17793"><span class='Ref_to_Parameter'>buffer</span></a><span class='Delimiter'>, </span><a href="../../include/fe_utils/string_utils.h.html#LN26"><span class='Ref_to_Proto'>fmtId</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17796"><span class='Ref_To_Local'>attnames</span></a><span class='Delimiter'>[</span><a href="pg_dump.c.html#LN17799"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="pg_dump.c.html#LN17798"><span class='Ref_To_Local'>needComma</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN17798"><span class='Ref_To_Local'>needComma</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='String'>""</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* no undropped columns */ 
</span> 
    <a href="../../interfaces/libpq/pqexpbuffer.h.html#LN171"><span class='Ref_to_Proto'>appendPQExpBufferChar</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17793"><span class='Ref_to_Parameter'>buffer</span></a><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="pg_dump.c.html#LN17793"><span class='Ref_to_Parameter'>buffer</span></a><span class='Operator'>-&GT;</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN45"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end fmtCopyColumnList &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Check if a reloptions array is nonempty. 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN17824"></a><span class='Declare_Function'>nonemptyReloptions</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>reloptions</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Don't want to print it if it's just "{}" */ 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17824"><span class='Ref_to_Parameter'>reloptions</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span>strlen<span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17824"><span class='Ref_to_Parameter'>reloptions</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Format a reloptions array and append it to the given buffer. 
 * 
 * "prefix" is prepended to the option names; typically it's "" or "toast.". 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN17836"></a><span class='Declare_Function'>appendReloptionsArrayAH</span><span class='Parentheses'>(</span><a href="../../interfaces/libpq/pqexpbuffer.h.html#LN50"><span class='Ref_to_Typedef'>PQExpBuffer</span></a> <span class='Declare_Parameter'>buffer</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>reloptions</span><span class='Delimiter'>, 
</span><a name="LN17837"></a>                        <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>prefix</span><span class='Delimiter'>, </span><a href="pg_backup.h.html#LN177"><span class='Ref_to_Struct'>Archive</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fout</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN17839"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>res</span><span class='Delimiter'>; 
</span> 
    <a href="pg_dump.c.html#LN17839"><span class='Ref_To_Local'>res</span></a> <span class='Operator'>= </span><a href="../../include/fe_utils/string_utils.h.html#LN50"><span class='Ref_to_Proto'>appendReloptionsArray</span></a><span class='Parentheses'>(</span><a href="pg_dump.c.html#LN17836"><span class='Ref_to_Parameter'>buffer</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17836"><span class='Ref_to_Parameter'>reloptions</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17837"><span class='Ref_to_Parameter'>prefix</span></a><span class='Delimiter'>, </span><a href="pg_dump.c.html#LN17837"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN195"><span class='Ref_to_Member'>encoding</span></a><span class='Delimiter'>, 
</span>                                <a href="pg_dump.c.html#LN17837"><span class='Ref_to_Parameter'>fout</span></a><span class='Operator'>-&GT;</span><a href="pg_backup.h.html#LN196"><span class='Ref_to_Member'>std_strings</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pg_dump.c.html#LN17839"><span class='Ref_To_Local'>res</span></a><span class='Parentheses'>) 
</span>        <a href="pg_backup_utils.c.html#LN69"><span class='Ref_to_Func'>write_msg</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='String'>"WARNING: could not parse reloptions array\n"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>