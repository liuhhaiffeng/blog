<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\bin\pg_upgrade\pg_upgrade.h</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\bin\pg_upgrade\pg_upgrade.h</b></p></td>
<td align='right'>
Wed Jun 14 08:26:01 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/* 
 *  pg_upgrade.h 
 * 
 *  Copyright (c) 2010-2017, PostgreSQL Global Development Group 
 *  src/bin/pg_upgrade/pg_upgrade.h 
 */ 
</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;unistd.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;assert.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;sys/stat.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;sys/time.h&GT;</span> 
 
<span class='Keyword'>#include </span><span class='String'>"libpq-fe.h"</span> 
 
<span class='Comment_Multi_Line'>/* Use port in the private/dynamic port number range */ 
</span><a name="LN15"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEF_PGUPORT</span>         <span class='Number'>50432</span> 
 
<span class='Comment_Multi_Line'>/* Allocate for null byte */ 
</span><a name="LN18"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>USER_NAME_SIZE</span>      <span class='Number'>128</span> 
 
<a name="LN20"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAX_STRING</span>          <span class='Number'>1024</span> 
<a name="LN21"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LINE_ALLOC</span>          <span class='Number'>4096</span> 
<a name="LN22"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>QUERY_ALLOC</span>         <span class='Number'>8192</span> 
 
<a name="LN24"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MIGRATOR_API_VERSION</span>    <span class='Number'>1</span> 
 
<a name="LN26"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MESSAGE_WIDTH</span>       <span class='Number'>60</span> 
 
<a name="LN28"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>GET_MAJOR_VERSION</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>v</span><span class='Parentheses'>)</span>    <span class='Parentheses'>((</span><a href="pg_upgrade.h.html#LN28"><span class='Ref_to_Parameter'>v</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>100</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* contains both global db information and CREATE DATABASE commands */ 
</span><a name="LN31"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>GLOBALS_DUMP_FILE</span>   <span class='String'>"pg_upgrade_dump_globals.sql"</span> 
<a name="LN32"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DB_DUMP_FILE_MASK</span>   <span class='String'>"pg_upgrade_dump_%u.custom"</span> 
 
<a name="LN34"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DB_DUMP_LOG_FILE_MASK</span>   <span class='String'>"pg_upgrade_dump_%u.log"</span> 
<a name="LN35"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SERVER_LOG_FILE</span>     <span class='String'>"pg_upgrade_server.log"</span> 
<a name="LN36"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>UTILITY_LOG_FILE</span>    <span class='String'>"pg_upgrade_utility.log"</span> 
<a name="LN37"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>INTERNAL_LOG_FILE</span>   <span class='String'>"pg_upgrade_internal.log"</span> 
 
<a name="LN39"></a><span class='Keyword'>extern char </span><span class='Operator'>*</span><span class='Declare_Var'>output_files</span><span class='Delimiter'>[]; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * WIN32 files do not accept writes from multiple processes 
 * 
 * On Win32, we can't send both pg_upgrade output and command output to the 
 * same file because we get the error: "The process cannot access the file 
 * because it is being used by another process." so send the pg_ctl 
 * command-line output to a new file, rather than into the server log file. 
 * Ideally we could use UTILITY_LOG_FILE for this, but some Windows platforms 
 * keep the pg_ctl output file open by the running postmaster, even after 
 * pg_ctl exits. 
 * 
 * We could use the Windows pgwin32_open() flags to allow shared file 
 * writes but is unclear how all other tools would use those flags, so 
 * we just avoid it and log a little differently on Windows;  we adjust 
 * the error message appropriately. 
 */ 
</span><span class='Directive'>#ifndef</span> <a href="../../include/c.h.html#LN61"><span class='Ref_to_Const'>WIN32</span></a> 
<a name="LN58"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SERVER_START_LOG_FILE</span>   <a href="pg_upgrade.h.html#LN35"><span class='Ref_to_Const'>SERVER_LOG_FILE</span></a> 
<a name="LN59"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SERVER_STOP_LOG_FILE</span>    <a href="pg_upgrade.h.html#LN35"><span class='Ref_to_Const'>SERVER_LOG_FILE</span></a> 
<span class='Directive'>#else</span> 
<a name="LN61"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SERVER_START_LOG_FILE</span>   <span class='String'>"pg_upgrade_server_start.log"</span> 
<span class='Comment_Multi_Line'>/* 
 *  "pg_ctl start" keeps SERVER_START_LOG_FILE and SERVER_LOG_FILE open 
 *  while the server is running, so we use UTILITY_LOG_FILE for "pg_ctl 
 *  stop". 
 */ 
</span><a name="LN67"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SERVER_STOP_LOG_FILE</span>    <a href="pg_upgrade.h.html#LN36"><span class='Ref_to_Const'>UTILITY_LOG_FILE</span></a> 
<span class='Directive'>#endif</span> 
 
 
<span class='Directive'>#ifndef</span> <a href="../../include/c.h.html#LN61"><span class='Ref_to_Const'>WIN32</span></a> 
<a name="LN72"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>pg_mv_file</span>          <a href="../../port/dirmod.c.html#LN121"><span class='Ref_to_Macro'>rename</span></a> 
<a name="LN73"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>pg_link_file</span>        <a href="../../timezone/zic.c.html#LN109"><span class='Ref_to_Proto'>link</span></a> 
<a name="LN74"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PATH_SEPARATOR</span>      <span class='String'>'/'</span> 
<a name="LN75"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PATH_QUOTE</span>  <span class='String'>'\''</span> 
<a name="LN76"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RM_CMD</span>              <span class='String'>"rm -f"</span> 
<a name="LN77"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RMDIR_CMD</span>           <span class='String'>"rm -rf"</span> 
<a name="LN78"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SCRIPT_PREFIX</span>       <span class='String'>"./"</span> 
<a name="LN79"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SCRIPT_EXT</span>          <span class='String'>"sh"</span> 
<a name="LN80"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ECHO_QUOTE</span>  <span class='String'>"'"</span> 
<a name="LN81"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ECHO_BLANK</span>  <span class='String'>""</span> 
<span class='Directive'>#else</span> 
<a name="LN83"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>pg_mv_file</span>          <a href="../../port/dirmod.c.html#LN46"><span class='Ref_to_Func'>pgrename</span></a> 
<a name="LN84"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>pg_link_file</span>        <a href="file.c.html#LN22"><span class='Ref_to_Proto'>win32_pghardlink</span></a> 
<a name="LN85"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PATH_SEPARATOR</span>      <span class='String'>'\\'</span> 
<a name="LN86"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PATH_QUOTE</span>  <span class='String'>'"'</span> 
<a name="LN87"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RM_CMD</span>              <span class='String'>"DEL /q"</span> 
<a name="LN88"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>RMDIR_CMD</span>           <span class='String'>"RMDIR /s/q"</span> 
<a name="LN89"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SCRIPT_PREFIX</span>       <span class='String'>""</span> 
<a name="LN90"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SCRIPT_EXT</span>          <span class='String'>"bat"</span> 
<a name="LN91"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>EXE_EXT</span>             <span class='String'>".exe"</span> 
<a name="LN92"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ECHO_QUOTE</span>  <span class='String'>""</span> 
<a name="LN93"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ECHO_BLANK</span>  <span class='String'>"."</span> 
<span class='Directive'>#endif</span> 
 
<a name="LN96"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>CLUSTER_NAME</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>cluster</span><span class='Parentheses'>)</span>   <span class='Parentheses'>((</span><a href="pg_upgrade.h.html#LN96"><span class='Ref_to_Parameter'>cluster</span></a><span class='Parentheses'>) </span><span class='Operator'>== &</span><a href="pg_upgrade.c.html#LN55"><span class='Ref_to_Global_Var'>old_cluster</span></a> <span class='Operator'>? </span><span class='String'>"old"</span> <span class='Operator'>: \ 
</span>                                 <span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN96"><span class='Ref_to_Parameter'>cluster</span></a><span class='Parentheses'>) </span><span class='Operator'>== &</span><a href="pg_upgrade.c.html#LN56"><span class='Ref_to_Global_Var'>new_cluster</span></a> <span class='Operator'>? </span><span class='String'>"new"</span> <span class='Operator'>: </span><span class='String'>"none"</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* OID system catalog preservation added during PG 9.0 development */ 
</span><a name="LN100"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TABLE_SPACE_SUBDIRS_CAT_VER</span> <span class='Number'>201001111</span> 
<span class='Comment_Multi_Line'>/* postmaster/postgres -b (binary_upgrade) flag added during PG 9.1 development */ 
</span><a name="LN102"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BINARY_UPGRADE_SERVER_FLAG_CAT_VER</span> <span class='Number'>201104251</span> 
<span class='Comment_Multi_Line'>/* 
 *  Visibility map changed with this 9.2 commit, 
 *  8f9fe6edce358f7904e0db119416b4d1080a83aa; pick later catalog version. 
 */ 
</span><a name="LN107"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>VISIBILITY_MAP_CRASHSAFE_CAT_VER</span> <span class='Number'>201107031</span> 
 
<span class='Comment_Multi_Line'>/* 
 * The format of visibility map is changed with this 9.6 commit, 
 */ 
</span><a name="LN112"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>VISIBILITY_MAP_FROZEN_BIT_CAT_VER</span> <span class='Number'>201603011</span> 
<span class='Comment_Multi_Line'>/* 
 * pg_multixact format changed in 9.3 commit 0ac5ad5134f2769ccbaefec73844f85, 
 * ("Improve concurrency of foreign key locking") which also updated catalog 
 * version to this value.  pg_upgrade behavior depends on whether old and new 
 * server versions are both newer than this, or only the new one is. 
 */ 
</span><a name="LN119"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MULTIXACT_FORMATCHANGE_CAT_VER</span> <span class='Number'>201301231</span> 
 
<span class='Comment_Multi_Line'>/* 
 * large object chunk size added to pg_controldata, 
 * commit 5f93c37805e7485488480916b4585e098d3cc883 
 */ 
</span><a name="LN125"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LARGE_OBJECT_SIZE_PG_CONTROL_VER</span> <span class='Number'>942</span> 
 
<span class='Comment_Multi_Line'>/* 
 * change in JSONB format during 9.4 beta 
 */ 
</span><a name="LN130"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>JSONB_FORMAT_CHANGE_CAT_VER</span> <span class='Number'>201409291</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Each relation is represented by a relinfo structure. 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Can't use NAMEDATALEN; not guaranteed to be same on client */ 
</span><a name="LN138"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>nspname</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* namespace name */ 
</span><a name="LN139"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>relname</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* relation name */ 
</span><a name="LN140"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>reloid</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* relation OID */ 
</span><a name="LN141"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>relfilenode</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* relation relfile node */ 
</span><a name="LN142"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>indtable</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* if index, OID of its table, else 0 */ 
</span><a name="LN143"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>toastheap</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* if toast table, OID of base table, else 0 */ 
</span><a name="LN144"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>tablespace</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* tablespace path; "" for cluster default */ 
</span><a name="LN145"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>nsp_alloc</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* should nspname be freed? */ 
</span><a name="LN146"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>tblsp_alloc</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* should tablespace be freed? */ 
</span><a name="LN147"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>RelInfo</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN151"></a>    <a href="pg_upgrade.h.html#LN135"><span class='Ref_to_Typedef'>RelInfo</span></a>    <span class='Operator'>*</span><span class='Declare_Member'>rels</span><span class='Delimiter'>; 
</span><a name="LN152"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nrels</span><span class='Delimiter'>; 
</span><a name="LN153"></a>} <span class='Declare_Typedef'>RelInfoArr</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * The following structure represents a relation mapping. 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN160"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>old_tablespace</span><span class='Delimiter'>; 
</span><a name="LN161"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>new_tablespace</span><span class='Delimiter'>; 
</span><a name="LN162"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>old_tablespace_suffix</span><span class='Delimiter'>; 
</span><a name="LN163"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>new_tablespace_suffix</span><span class='Delimiter'>; 
</span><a name="LN164"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>old_db_oid</span><span class='Delimiter'>; 
</span><a name="LN165"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>new_db_oid</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * old/new relfilenodes might differ for pg_largeobject(_metadata) indexes 
     * due to VACUUM FULL or REINDEX.  Other relfilenodes are preserved. 
     */ 
</span><a name="LN171"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>old_relfilenode</span><span class='Delimiter'>; 
</span><a name="LN172"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>new_relfilenode</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* the rest are used only for logging and error reporting */ 
</span><a name="LN174"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>nspname</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* namespaces */ 
</span><a name="LN175"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>relname</span><span class='Delimiter'>; 
</span><a name="LN176"></a>} <span class='Declare_Typedef'>FileNameMap</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Structure to store database information 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN183"></a>    <a href="../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>db_oid</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* oid of the database */ 
</span><a name="LN184"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>db_name</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* database name */ 
</span><a name="LN185"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>db_tablespace</span><span class='Delimiter'>[</span><a href="../../include/pg_config_manual.h.html#LN88"><span class='Ref_to_Const'>MAXPGPATH</span></a><span class='Delimiter'>];</span>       <span class='Comment_Multi_Line'>/* database default tablespace 
                                                 * path */ 
</span><a name="LN187"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>db_collate</span><span class='Delimiter'>; 
</span><a name="LN188"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>db_ctype</span><span class='Delimiter'>; 
</span><a name="LN189"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>db_encoding</span><span class='Delimiter'>; 
</span><a name="LN190"></a>    <a href="pg_upgrade.h.html#LN149"><span class='Ref_to_Typedef'>RelInfoArr</span></a>  <span class='Declare_Member'>rel_arr</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* array of all user relinfos */ 
</span><a name="LN191"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>DbInfo</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN195"></a>    <a href="pg_upgrade.h.html#LN181"><span class='Ref_to_Typedef'>DbInfo</span></a>     <span class='Operator'>*</span><span class='Declare_Member'>dbs</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* array of db infos */ 
</span><a name="LN196"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ndbs</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* number of db infos */ 
</span><a name="LN197"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>DbInfoArr</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * The following structure is used to hold pg_control information. 
 * Rather than using the backend's control structure we use our own 
 * structure to avoid pg_control version issues between releases. 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN206"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>ctrl_ver</span><span class='Delimiter'>; 
</span><a name="LN207"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>cat_ver</span><span class='Delimiter'>; 
</span><a name="LN208"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>nextxlogfile</span><span class='Delimiter'>[</span><span class='Number'>25</span><span class='Delimiter'>]; 
</span><a name="LN209"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>chkpnt_nxtxid</span><span class='Delimiter'>; 
</span><a name="LN210"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>chkpnt_nxtepoch</span><span class='Delimiter'>; 
</span><a name="LN211"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>chkpnt_nxtoid</span><span class='Delimiter'>; 
</span><a name="LN212"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>chkpnt_nxtmulti</span><span class='Delimiter'>; 
</span><a name="LN213"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>chkpnt_nxtmxoff</span><span class='Delimiter'>; 
</span><a name="LN214"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>chkpnt_oldstMulti</span><span class='Delimiter'>; 
</span><a name="LN215"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>align</span><span class='Delimiter'>; 
</span><a name="LN216"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>blocksz</span><span class='Delimiter'>; 
</span><a name="LN217"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>largesz</span><span class='Delimiter'>; 
</span><a name="LN218"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>walsz</span><span class='Delimiter'>; 
</span><a name="LN219"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>walseg</span><span class='Delimiter'>; 
</span><a name="LN220"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>ident</span><span class='Delimiter'>; 
</span><a name="LN221"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>index</span><span class='Delimiter'>; 
</span><a name="LN222"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>toast</span><span class='Delimiter'>; 
</span><a name="LN223"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>large_object</span><span class='Delimiter'>; 
</span><a name="LN224"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>date_is_int</span><span class='Delimiter'>; 
</span><a name="LN225"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>float8_pass_by_value</span><span class='Delimiter'>; 
</span><a name="LN226"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>data_checksum_version</span><span class='Delimiter'>; 
</span><a name="LN227"></a>}<span class='Auto_Annotations'> &laquo; end {anonControlData} &raquo; </span> <span class='Declare_Typedef'>ControlData</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Enumeration to denote link modes 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN234"></a>    <span class='Declare_Enum_Const'>TRANSFER_MODE_COPY</span><span class='Delimiter'>, 
</span><a name="LN235"></a>    <span class='Declare_Enum_Const'>TRANSFER_MODE_LINK</span> 
<a name="LN236"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>transferMode</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Enumeration to denote pg_log modes 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN243"></a>    <span class='Declare_Enum_Const'>PG_VERBOSE</span><span class='Delimiter'>, 
</span><a name="LN244"></a>    <span class='Declare_Enum_Const'>PG_STATUS</span><span class='Delimiter'>, 
</span><a name="LN245"></a>    <span class='Declare_Enum_Const'>PG_REPORT</span><span class='Delimiter'>, 
</span><a name="LN246"></a>    <span class='Declare_Enum_Const'>PG_WARNING</span><span class='Delimiter'>, 
</span><a name="LN247"></a>    <span class='Declare_Enum_Const'>PG_FATAL</span> 
<a name="LN248"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>eLogType</span><span class='Delimiter'>; 
</span> 
 
<a name="LN251"></a><span class='Control'>typedef</span> <span class='Keyword'>long </span><span class='Declare_Typedef'>pgpid_t</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * cluster 
 * 
 *  information about each cluster 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN261"></a>    <a href="pg_upgrade.h.html#LN204"><span class='Ref_to_Typedef'>ControlData</span></a> <span class='Declare_Member'>controldata</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* pg_control information */ 
</span><a name="LN262"></a>    <a href="pg_upgrade.h.html#LN193"><span class='Ref_to_Typedef'>DbInfoArr</span></a>   <span class='Declare_Member'>dbarr</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* dbinfos array */ 
</span><a name="LN263"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>pgdata</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* pathname for cluster's $PGDATA directory */ 
</span><a name="LN264"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>pgconfig</span><span class='Delimiter'>;</span>       <span class='Comment_Multi_Line'>/* pathname for cluster's config file 
                                 * directory */ 
</span><a name="LN266"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>bindir</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* pathname for cluster's executable directory */ 
</span><a name="LN267"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>pgopts</span><span class='Delimiter'>;</span>         <span class='Comment_Multi_Line'>/* options to pass to the server, like pg_ctl 
                                 * -o */ 
</span><a name="LN269"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>sockdir</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* directory for Unix Domain socket, if any */ 
</span><a name="LN270"></a>    <span class='Keyword'>unsigned short </span><span class='Declare_Member'>port</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* port number where postmaster is waiting */ 
</span><a name="LN271"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>major_version</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* PG_VERSION of cluster */ 
</span><a name="LN272"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>major_version_str</span><span class='Delimiter'>[</span><span class='Number'>64</span><span class='Delimiter'>];</span>  <span class='Comment_Single_Line'>/* string PG_VERSION of cluster */ 
</span><a name="LN273"></a>    <a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>bin_version</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* version returned from pg_ctl */ 
</span><a name="LN274"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>tablespace_suffix</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* directory specification */ 
</span><a name="LN275"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>ClusterInfo</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *  LogOpts 
*/ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN283"></a>    FILE       <span class='Operator'>*</span><span class='Declare_Member'>internal</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* internal log FILE */ 
</span><a name="LN284"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>verbose</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* TRUE -&GT; be verbose in messages */ 
</span><a name="LN285"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>retain</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* retain log files on success */ 
</span><a name="LN286"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>LogOpts</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *  UserOpts 
*/ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN294"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>check</span><span class='Delimiter'>;</span>          <span class='Comment_Multi_Line'>/* TRUE -&GT; ask user for permission to make 
                                 * changes */ 
</span><a name="LN296"></a>    <a href="pg_upgrade.h.html#LN232"><span class='Ref_to_Typedef'>transferMode</span></a> <span class='Declare_Member'>transfer_mode</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* copy files or link them? */ 
</span><a name="LN297"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>jobs</span><span class='Delimiter'>; 
</span><a name="LN298"></a>} <span class='Declare_Typedef'>UserOpts</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * OSInfo 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN306"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>progname</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* complete pathname for this program */ 
</span><a name="LN307"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>exec_path</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* full path to my executable */ 
</span><a name="LN308"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>user</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* username for clusters */ 
</span><a name="LN309"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>user_specified</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* user specified on command-line */ 
</span><a name="LN310"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Member'>old_tablespaces</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* tablespaces */ 
</span><a name="LN311"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>num_old_tablespaces</span><span class='Delimiter'>; 
</span><a name="LN312"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Member'>libraries</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* loadable libraries */ 
</span><a name="LN313"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>num_libraries</span><span class='Delimiter'>; 
</span><a name="LN314"></a>    <a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Member'>running_cluster</span><span class='Delimiter'>; 
</span><a name="LN315"></a>} <span class='Declare_Typedef'>OSInfo</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Global variables 
 */ 
</span><a name="LN321"></a><span class='Keyword'>extern </span><a href="pg_upgrade.h.html#LN281"><span class='Ref_to_Typedef'>LogOpts</span></a> <span class='Declare_Var'>log_opts</span><span class='Delimiter'>; 
</span><a name="LN322"></a><span class='Keyword'>extern </span><a href="pg_upgrade.h.html#LN292"><span class='Ref_to_Typedef'>UserOpts</span></a> <span class='Declare_Var'>user_opts</span><span class='Delimiter'>; 
</span><a name="LN323"></a><span class='Keyword'>extern </span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Declare_Var'>old_cluster</span><span class='Delimiter'>, 
</span><a name="LN324"></a>            <span class='Declare_Var'>new_cluster</span><span class='Delimiter'>; 
</span><a name="LN325"></a><span class='Keyword'>extern </span><a href="pg_upgrade.h.html#LN304"><span class='Ref_to_Typedef'>OSInfo</span></a> <span class='Declare_Var'>os_info</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* check.c */ 
</span> 
<a name="LN330"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>output_check_banner</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>live_check</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN331"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>check_and_dump_old_cluster</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>live_check</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN332"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>check_new_cluster</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN333"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>report_clusters_compatible</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN334"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>issue_warnings</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN335"></a><span class='Keyword'>void </span><span class='Declare_Prototype'>output_completion_banner</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>analyze_script_file_name</span><span class='Delimiter'>, 
</span><a name="LN336"></a>                         <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>deletion_script_file_name</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN337"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>check_cluster_versions</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN338"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>check_cluster_compatibility</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>live_check</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN339"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>create_script_for_old_cluster_deletion</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>deletion_script_file_name</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN340"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>create_script_for_cluster_analyze</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>analyze_script_file_name</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* controldata.c */ 
</span> 
<a name="LN345"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>get_control_data</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>live_check</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN346"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>check_control_data</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN204"><span class='Ref_to_Typedef'>ControlData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>oldctrl</span><span class='Delimiter'>, </span><a href="pg_upgrade.h.html#LN204"><span class='Ref_to_Typedef'>ControlData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>newctrl</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN347"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>disable_old_cluster</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* dump.c */ 
</span> 
<a name="LN352"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>generate_old_dump</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* exec.c */ 
</span> 
<a name="LN357"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>EXEC_PSQL_ARGS</span> <span class='String'>"--echo-queries --set ON_ERROR_STOP=on --no-psqlrc --dbname=template1"</span> 
 
<span class='Keyword'>bool </span><a href="exec.c.html#LN75"><span class='Ref_to_Func'>exec_prog</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><a href="../pg_ctl/pg_ctl.c.html#LN82"><span class='Ref_to_Global_Var'>log_file</span></a><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>opt_log_file<span class='Delimiter'>, 
</span><a name="LN360"></a>          <span class='Keyword'>bool </span>throw_error<span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>4</span><span class='Delimiter'>, </span><span class='Number'>5</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN361"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>verify_directories</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN362"></a><span class='Keyword'>bool</span>        <span class='Declare_Prototype'>pid_lock_file_exists</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>datadir</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* file.c */ 
</span> 
<a name="LN367"></a><span class='Keyword'>void </span><span class='Declare_Prototype'>copyFile</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>dst</span><span class='Delimiter'>, 
</span><a name="LN368"></a>         <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>schemaName</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>relName</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN369"></a><span class='Keyword'>void </span><span class='Declare_Prototype'>linkFile</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>dst</span><span class='Delimiter'>, 
</span><a name="LN370"></a>         <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>schemaName</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>relName</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN371"></a><span class='Keyword'>void </span><span class='Declare_Prototype'>rewriteVisibilityMap</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>fromfile</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>tofile</span><span class='Delimiter'>, 
</span><a name="LN372"></a>                     <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>schemaName</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>relName</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN373"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>check_hard_link</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN374"></a>FILE       <span class='Operator'>*</span><span class='Declare_Prototype'>fopen_priv</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>path</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>mode</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* function.c */ 
</span> 
<a name="LN378"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>get_loadable_libraries</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN379"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>check_loadable_libraries</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* info.c */ 
</span> 
<a name="LN383"></a><a href="pg_upgrade.h.html#LN158"><span class='Ref_to_Typedef'>FileNameMap</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>gen_db_file_maps</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN181"><span class='Ref_to_Typedef'>DbInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>old_db</span><span class='Delimiter'>, 
</span><a name="LN384"></a>                 <a href="pg_upgrade.h.html#LN181"><span class='Ref_to_Typedef'>DbInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>new_db</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>nmaps</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>old_pgdata</span><span class='Delimiter'>, 
</span><a name="LN385"></a>                 <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>new_pgdata</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN386"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>get_db_and_rel_infos</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN387"></a><span class='Keyword'>void </span><span class='Declare_Prototype'>print_maps</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN158"><span class='Ref_to_Typedef'>FileNameMap</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>maps</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>n</span><span class='Delimiter'>, 
</span><a name="LN388"></a>           <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>db_name</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* option.c */ 
</span> 
<a name="LN392"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>parseCommandLine</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>argc</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>argv</span><span class='Delimiter'>[]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN393"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>adjust_data_dir</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN394"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>get_sock_dir</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>live_check</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* relfilenode.c */ 
</span> 
<a name="LN398"></a><span class='Keyword'>void </span><span class='Declare_Prototype'>transfer_all_new_tablespaces</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN193"><span class='Ref_to_Typedef'>DbInfoArr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>old_db_arr</span><span class='Delimiter'>, 
</span><a name="LN399"></a>                  <a href="pg_upgrade.h.html#LN193"><span class='Ref_to_Typedef'>DbInfoArr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>new_db_arr</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>old_pgdata</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>new_pgdata</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN400"></a><span class='Keyword'>void </span><span class='Declare_Prototype'>transfer_all_new_dbs</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN193"><span class='Ref_to_Typedef'>DbInfoArr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>old_db_arr</span><span class='Delimiter'>, 
</span><a name="LN401"></a>                   <a href="pg_upgrade.h.html#LN193"><span class='Ref_to_Typedef'>DbInfoArr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>new_db_arr</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>old_pgdata</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>new_pgdata</span><span class='Delimiter'>, 
</span><a name="LN402"></a>                     <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>old_tablespace</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* tablespace.c */ 
</span> 
<a name="LN406"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>init_tablespaces</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* server.c */ 
</span> 
<a name="LN411"></a><a href="../../interfaces/libpq/libpq-fe.h.html#LN139"><span class='Ref_to_Typedef'>PGconn</span></a>     <span class='Operator'>*</span><span class='Declare_Prototype'>connectToServer</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>db_name</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN412"></a><a href="../../interfaces/libpq/libpq-fe.h.html#LN146"><span class='Ref_to_Typedef'>PGresult</span></a>   <span class='Operator'>*</span><a href="server.c.html#LN116"><span class='Ref_to_Func'>executeQueryOrDie</span></a><span class='Parentheses'>(</span><a href="../../interfaces/libpq/libpq-fe.h.html#LN139"><span class='Ref_to_Typedef'>PGconn</span></a> <span class='Operator'>*</span><a href="../pg_rewind/libpq_fetch.c.html#LN31"><span class='Ref_to_Global_Var'>conn</span></a><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN414"></a><span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Prototype'>cluster_conn_opts</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN416"></a><span class='Keyword'>bool</span>        <span class='Declare_Prototype'>start_postmaster</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>throw_error</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN417"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>stop_postmaster</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>fast</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN418"></a><a href="../../include/c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Prototype'>get_major_server_version</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN419"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>check_pghost_envvar</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* util.c */ 
</span> 
<a name="LN424"></a><span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Prototype'>quote_identifier</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>s</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN425"></a><span class='Keyword'>int</span>         <span class='Declare_Prototype'>get_user_info</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>user_name_p</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN426"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>check_ok</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN427"></a><span class='Keyword'>void</span>        report_status<span class='Parentheses'>(</span><a href="../pg_rewind/logging.h.html#LN21"><span class='Ref_to_Typedef'>eLogType</span></a> type<span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN428"></a><span class='Keyword'>void</span>        <a href="../pg_rewind/logging.c.html#LN67"><span class='Ref_to_Func'>pg_log</span></a><span class='Parentheses'>(</span><a href="../pg_rewind/logging.h.html#LN21"><span class='Ref_to_Typedef'>eLogType</span></a> type<span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN429"></a><span class='Keyword'>void</span>        <a href="../pg_rewind/logging.c.html#LN81"><span class='Ref_to_Func'>pg_fatal</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><a href="../../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_noreturn</span><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN430"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>end_progress_output</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN431"></a><span class='Keyword'>void</span>        <a href="util.c.html#LN68"><span class='Ref_to_Func'>prep_status</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN432"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>check_ok</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN433"></a><span class='Keyword'>unsigned int </span><span class='Declare_Prototype'>str2uint</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN434"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>pg_putenv</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>val</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* version.c */ 
</span> 
<a name="LN439"></a><span class='Keyword'>void </span><span class='Declare_Prototype'>new_9_0_populate_pg_largeobject_metadata</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Delimiter'>, 
</span><a name="LN440"></a>                                         <span class='Keyword'>bool </span><span class='Declare_Parameter'>check_mode</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN441"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>old_9_3_check_for_line_data_type_usage</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN442"></a><span class='Keyword'>void</span>        <span class='Declare_Prototype'>old_9_6_check_for_unknown_data_type_usage</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN443"></a><span class='Keyword'>void </span><span class='Declare_Prototype'>old_9_6_invalidate_hash_indexes</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN259"><span class='Ref_to_Typedef'>ClusterInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cluster</span><span class='Delimiter'>, 
</span><a name="LN444"></a>                                <span class='Keyword'>bool </span><span class='Declare_Parameter'>check_mode</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* parallel.c */ 
</span><span class='Keyword'>void </span><a href="parallel.c.html#LN61"><span class='Ref_to_Func'>parallel_exec_prog</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><a href="../pg_ctl/pg_ctl.c.html#LN82"><span class='Ref_to_Global_Var'>log_file</span></a><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>opt_log_file<span class='Delimiter'>, 
</span><a name="LN448"></a>                   <span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>3</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN449"></a><span class='Keyword'>void </span><span class='Declare_Prototype'>parallel_transfer_all_new_dbs</span><span class='Parentheses'>(</span><a href="pg_upgrade.h.html#LN193"><span class='Ref_to_Typedef'>DbInfoArr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>old_db_arr</span><span class='Delimiter'>, </span><a href="pg_upgrade.h.html#LN193"><span class='Ref_to_Typedef'>DbInfoArr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>new_db_arr</span><span class='Delimiter'>, 
</span><a name="LN450"></a>                              <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>old_pgdata</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>new_pgdata</span><span class='Delimiter'>, 
</span><a name="LN451"></a>                              <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>old_tablespace</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN452"></a><span class='Keyword'>bool</span>        <span class='Declare_Prototype'>reap_child</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>wait_for_child</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>