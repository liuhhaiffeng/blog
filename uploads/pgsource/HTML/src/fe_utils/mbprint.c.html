<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\fe_utils\mbprint.c</title>
<LINK REL=StyleSheet HREF="../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\fe_utils\mbprint.c</b></p></td>
<td align='right'>
Wed Jun 14 08:26:02 2017
</td></tr>
<tr><td><a href='../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * Multibyte character printing support for frontend code 
 * 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * src/fe_utils/mbprint.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres_fe.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"fe_utils/mbprint.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"libpq-fe.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * To avoid version-skew problems, this file must not use declarations 
 * from pg_wchar.h: the encoding IDs we are dealing with are determined 
 * by the libpq.so we are linked with, and that might not match the 
 * numbers we see at compile time.  (If this file were inside libpq, 
 * the problem would go away...) 
 * 
 * Hence, we have our own definition of pg_wchar, and we get the values 
 * of any needed encoding IDs on-the-fly. 
 */ 
</span> 
<a name="LN30"></a><span class='Control'>typedef</span> <span class='Keyword'>unsigned int </span><span class='Declare_Typedef'>pg_wchar</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>static int 
</span><a name="LN33"></a><span class='Declare_Function'>pg_get_utf8_id</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN35"></a>    <span class='Keyword'>static int</span>  <span class='Declare_Local'>utf8_id</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN35"><span class='Ref_To_Local'>utf8_id</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="mbprint.c.html#LN35"><span class='Ref_To_Local'>utf8_id</span></a> <span class='Operator'>= </span><a href="../include/mb/pg_wchar.h.html#LN501"><span class='Ref_to_Proto'>pg_char_to_encoding</span></a><span class='Parentheses'>(</span><span class='String'>"utf8"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="mbprint.c.html#LN35"><span class='Ref_To_Local'>utf8_id</span></a><span class='Delimiter'>; 
} 
</span> 
<a name="LN42"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PG_UTF8</span>     <a href="mbprint.c.html#LN32"><span class='Ref_to_Func'>pg_get_utf8_id</span></a><span class='Parentheses'>() 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert a UTF-8 character to a Unicode code point. 
 * This is a one-character version of pg_utf2wchar_with_len. 
 * 
 * No error checks here, c must point to a long-enough string. 
 */ 
</span><span class='Keyword'>static </span><a href="../include/mb/pg_wchar.h.html#LN24"><span class='Ref_to_Typedef'>pg_wchar</span></a> 
<a name="LN52"></a><span class='Declare_Function'>utf8_to_unicode</span><span class='Parentheses'>(</span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Declare_Parameter'>c</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a> <span class='Operator'>& </span><span class='Number'>0x80</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../include/mb/pg_wchar.h.html#LN24"><span class='Ref_to_Typedef'>pg_wchar</span></a><span class='Parentheses'>) </span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a> <span class='Operator'>& </span><span class='Number'>0xe0</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0xc0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../include/mb/pg_wchar.h.html#LN24"><span class='Ref_to_Typedef'>pg_wchar</span></a><span class='Parentheses'>) (((</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x1f</span><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>6</span><span class='Parentheses'>)</span> <span class='Operator'>| 
</span>                           <span class='Parentheses'>(</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x3f</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a> <span class='Operator'>& </span><span class='Number'>0xf0</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0xe0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../include/mb/pg_wchar.h.html#LN24"><span class='Ref_to_Typedef'>pg_wchar</span></a><span class='Parentheses'>) (((</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x0f</span><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>12</span><span class='Parentheses'>)</span> <span class='Operator'>| 
</span>                           <span class='Parentheses'>((</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x3f</span><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>6</span><span class='Parentheses'>)</span> <span class='Operator'>| 
</span>                           <span class='Parentheses'>(</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x3f</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a> <span class='Operator'>& </span><span class='Number'>0xf8</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0xf0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="../include/mb/pg_wchar.h.html#LN24"><span class='Ref_to_Typedef'>pg_wchar</span></a><span class='Parentheses'>) (((</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x07</span><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>18</span><span class='Parentheses'>)</span> <span class='Operator'>| 
</span>                           <span class='Parentheses'>((</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x3f</span><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>12</span><span class='Parentheses'>)</span> <span class='Operator'>| 
</span>                           <span class='Parentheses'>((</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x3f</span><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>6</span><span class='Parentheses'>)</span> <span class='Operator'>| 
</span>                           <span class='Parentheses'>(</span><a href="mbprint.c.html#LN52"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x3f</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Comment_Multi_Line'>/* that is an invalid code on purpose */ 
</span>        <span class='Control'>return</span> <span class='Number'>0xffffffff</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end utf8_to_unicode &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Unicode 3.1 compliant validation : for each category, it checks the 
 * combination of each byte to make sure it maps to a valid range. It also 
 * returns -1 for the following UCS values: ucs &GT; 0x10ffff ucs & 0xfffe = 
 * 0xfffe 0xfdd0 &LT; ucs &LT; 0xfdef ucs & 0xdb00 = 0xd800 (surrogates) 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN81"></a><span class='Declare_Function'>utf_charcheck</span><span class='Parentheses'>(</span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Declare_Parameter'>c</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a> <span class='Operator'>& </span><span class='Number'>0x80</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a> <span class='Operator'>& </span><span class='Number'>0xe0</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0xc0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* two-byte char */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0xc0</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0x80</span><span class='Parentheses'>)</span> <span class='Operator'>&& </span><span class='Parentheses'>((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x1f</span><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Number'>0x01</span><span class='Parentheses'>))</span> 
            <span class='Control'>return</span> <span class='Number'>2</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a> <span class='Operator'>& </span><span class='Number'>0xf0</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0xe0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* three-byte char */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0xc0</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0x80</span><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>            <span class='Parentheses'>(((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x0f</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0x00</span><span class='Parentheses'>)</span> <span class='Operator'>|| </span><span class='Parentheses'>((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x20</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0x20</span><span class='Parentheses'>))</span> <span class='Operator'>&& 
</span>            <span class='Parentheses'>((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0xc0</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0x80</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span><a name="LN99"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>z</span> <span class='Operator'>= </span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x0f</span><span class='Delimiter'>; 
</span><a name="LN100"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>yx</span> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x3f</span><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>6</span><span class='Parentheses'>)</span> <span class='Operator'>| </span><span class='Parentheses'>(</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x3f</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN101"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>lx</span> <span class='Operator'>= </span><a href="mbprint.c.html#LN100"><span class='Ref_To_Local'>yx</span></a> <span class='Operator'>& </span><span class='Number'>0x7f</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* check 0xfffe/0xffff, 0xfdd0..0xfedf range, surrogates */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="mbprint.c.html#LN99"><span class='Ref_To_Local'>z</span></a> <span class='Operator'>== </span><span class='Number'>0x0f</span><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>                 <span class='Parentheses'>(((</span><a href="mbprint.c.html#LN100"><span class='Ref_To_Local'>yx</span></a> <span class='Operator'>& </span><span class='Number'>0xffe</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0xffe</span><span class='Parentheses'>)</span> <span class='Operator'>|| 
</span>               <span class='Parentheses'>(((</span><a href="mbprint.c.html#LN100"><span class='Ref_To_Local'>yx</span></a> <span class='Operator'>& </span><span class='Number'>0xf80</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0xd80</span><span class='Parentheses'>)</span> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="mbprint.c.html#LN101"><span class='Ref_To_Local'>lx</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0x30</span><span class='Parentheses'>)</span> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="mbprint.c.html#LN101"><span class='Ref_To_Local'>lx</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0x4f</span><span class='Parentheses'>))))</span> <span class='Operator'>|| 
</span>                <span class='Parentheses'>((</span><a href="mbprint.c.html#LN99"><span class='Ref_To_Local'>z</span></a> <span class='Operator'>== </span><span class='Number'>0x0d</span><span class='Parentheses'>)</span> <span class='Operator'>&& </span><span class='Parentheses'>((</span><a href="mbprint.c.html#LN100"><span class='Ref_To_Local'>yx</span></a> <span class='Operator'>& </span><span class='Number'>0xb00</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0x800</span><span class='Parentheses'>)))</span> 
                <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Number'>3</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if (*c&0xf0)==0xe0 &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Operator'>*</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a> <span class='Operator'>& </span><span class='Number'>0xf8</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0xf0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN115"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>u</span> <span class='Operator'>= </span><span class='Parentheses'>((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x07</span><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>2</span><span class='Parentheses'>)</span> <span class='Operator'>| </span><span class='Parentheses'>((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x30</span><span class='Parentheses'>) </span><span class='Operator'>&GT;&GT; </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* four-byte char */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0xc0</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0x80</span><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span><a href="mbprint.c.html#LN115"><span class='Ref_To_Local'>u</span></a> <span class='Operator'>&GT; </span><span class='Number'>0x00</span><span class='Parentheses'>)</span> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="mbprint.c.html#LN115"><span class='Ref_To_Local'>u</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0x10</span><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>            <span class='Parentheses'>((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0xc0</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0x80</span><span class='Parentheses'>)</span> <span class='Operator'>&& </span><span class='Parentheses'>((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0xc0</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0x80</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* test for 0xzzzzfffe/0xzzzzfffff */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x0f</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0x0f</span><span class='Parentheses'>)</span> <span class='Operator'>&& </span><span class='Parentheses'>((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x3f</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0x3f</span><span class='Parentheses'>)</span> <span class='Operator'>&& 
</span>                <span class='Parentheses'>((</span><a href="mbprint.c.html#LN81"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>] </span><span class='Operator'>& </span><span class='Number'>0x3e</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0x3e</span><span class='Parentheses'>))</span> 
                <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Number'>4</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end utf_charcheck &raquo; </span> 
 
 
<span class='Keyword'>static void 
</span><a name="LN135"></a><span class='Declare_Function'>mb_utf_validate</span><span class='Parentheses'>(</span><span class='Keyword'>unsigned char </span><span class='Operator'>*</span><span class='Declare_Parameter'>pwcs</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN137"></a>    <span class='Keyword'>unsigned char </span><span class='Operator'>*</span><span class='Declare_Local'>p</span> <span class='Operator'>= </span><a href="mbprint.c.html#LN135"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="mbprint.c.html#LN135"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN141"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>len</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="mbprint.c.html#LN141"><span class='Ref_To_Local'>len</span></a> <span class='Operator'>= </span><a href="mbprint.c.html#LN80"><span class='Ref_to_Func'>utf_charcheck</span></a><span class='Parentheses'>(</span><a href="mbprint.c.html#LN135"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Parentheses'>))</span> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN137"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>!= </span><a href="mbprint.c.html#LN135"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN147"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN147"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="mbprint.c.html#LN147"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="mbprint.c.html#LN141"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; </span><a href="mbprint.c.html#LN147"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                    <span class='Operator'>*</span><a href="mbprint.c.html#LN137"><span class='Ref_To_Local'>p</span></a><span class='Operator'>++ = *</span><a href="mbprint.c.html#LN135"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <a href="mbprint.c.html#LN135"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>+= </span><a href="mbprint.c.html#LN141"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN137"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>+= </span><a href="mbprint.c.html#LN141"><span class='Ref_To_Local'>len</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <span class='Comment_Multi_Line'>/* we skip the char */ 
</span>            <a href="mbprint.c.html#LN135"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while *pwcs &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN137"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>!= </span><a href="mbprint.c.html#LN135"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="mbprint.c.html#LN137"><span class='Ref_To_Local'>p</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end mb_utf_validate &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * public functions : wcswidth and mbvalidate 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * pg_wcswidth is the dumb display-width function. 
 * It assumes that everything will appear on one line. 
 * OTOH it is easier to use than pg_wcssize if this applies to you. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN176"></a><span class='Declare_Function'>pg_wcswidth</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>pwcs</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>len</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>encoding</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN178"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>width</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN176"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN182"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>chlen</span><span class='Delimiter'>, 
</span><a name="LN183"></a>                    <span class='Declare_Local'>chwidth</span><span class='Delimiter'>; 
</span> 
        <a href="mbprint.c.html#LN182"><span class='Ref_To_Local'>chlen</span></a> <span class='Operator'>= </span><a href="../interfaces/libpq/libpq-fe.h.html#LN588"><span class='Ref_to_Proto'>PQmblen</span></a><span class='Parentheses'>(</span><a href="mbprint.c.html#LN176"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Delimiter'>, </span><a href="mbprint.c.html#LN176"><span class='Ref_to_Parameter'>encoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN176"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span>size_t<span class='Parentheses'>) </span><a href="mbprint.c.html#LN182"><span class='Ref_To_Local'>chlen</span></a><span class='Parentheses'>)</span> 
            <span class='Control'>break</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* Invalid string */ 
</span> 
        <a href="mbprint.c.html#LN183"><span class='Ref_To_Local'>chwidth</span></a> <span class='Operator'>= </span><a href="../interfaces/libpq/libpq-fe.h.html#LN591"><span class='Ref_to_Proto'>PQdsplen</span></a><span class='Parentheses'>(</span><a href="mbprint.c.html#LN176"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Delimiter'>, </span><a href="mbprint.c.html#LN176"><span class='Ref_to_Parameter'>encoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN183"><span class='Ref_To_Local'>chwidth</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="mbprint.c.html#LN178"><span class='Ref_To_Local'>width</span></a> <span class='Operator'>+= </span><a href="mbprint.c.html#LN183"><span class='Ref_To_Local'>chwidth</span></a><span class='Delimiter'>; 
</span> 
        <a href="mbprint.c.html#LN176"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>+= </span><a href="mbprint.c.html#LN182"><span class='Ref_To_Local'>chlen</span></a><span class='Delimiter'>; 
</span>        <a href="mbprint.c.html#LN176"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>-= </span><a href="mbprint.c.html#LN182"><span class='Ref_To_Local'>chlen</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <a href="mbprint.c.html#LN178"><span class='Ref_To_Local'>width</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_wcswidth &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * pg_wcssize takes the given string in the given encoding and returns three 
 * values: 
 *    result_width: Width in display characters of the longest line in string 
 *    result_height: Number of lines in display output 
 *    result_format_size: Number of bytes required to store formatted 
 *      representation of string 
 * 
 * This MUST be kept in sync with pg_wcsformat! 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN210"></a><span class='Declare_Function'>pg_wcssize</span><span class='Parentheses'>(</span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Declare_Parameter'>pwcs</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>len</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>encoding</span><span class='Delimiter'>, 
</span><a name="LN211"></a>           <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>result_width</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>result_height</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>result_format_size</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN213"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>w</span><span class='Delimiter'>, 
</span><a name="LN214"></a>                <span class='Declare_Local'>chlen</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN215"></a>                <span class='Declare_Local'>linewidth</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN216"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>width</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN217"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>height</span> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN218"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>format_size</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>&& </span><a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>+= </span><a href="mbprint.c.html#LN214"><span class='Ref_To_Local'>chlen</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="mbprint.c.html#LN214"><span class='Ref_To_Local'>chlen</span></a> <span class='Operator'>= </span><a href="../interfaces/libpq/libpq-fe.h.html#LN588"><span class='Ref_to_Proto'>PQmblen</span></a><span class='Parentheses'>((</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Delimiter'>, </span><a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>encoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span>size_t<span class='Parentheses'>) </span><a href="mbprint.c.html#LN214"><span class='Ref_To_Local'>chlen</span></a><span class='Parentheses'>)</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="mbprint.c.html#LN213"><span class='Ref_To_Local'>w</span></a> <span class='Operator'>= </span><a href="../interfaces/libpq/libpq-fe.h.html#LN591"><span class='Ref_to_Proto'>PQdsplen</span></a><span class='Parentheses'>((</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Delimiter'>, </span><a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>encoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN214"><span class='Ref_To_Local'>chlen</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span>         <span class='Comment_Single_Line'>/* single-byte char */ 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>== </span><span class='String'>'\n'</span><span class='Parentheses'>)</span>  <span class='Comment_Single_Line'>/* Newline */ 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>&GT; </span><a href="mbprint.c.html#LN216"><span class='Ref_To_Local'>width</span></a><span class='Parentheses'>) 
</span>                    <a href="mbprint.c.html#LN216"><span class='Ref_To_Local'>width</span></a> <span class='Operator'>= </span><a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN217"><span class='Ref_To_Local'>height</span></a> <span class='Operator'>+= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN218"><span class='Ref_To_Local'>format_size</span></a> <span class='Operator'>+= </span><span class='Number'>1</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* For NUL char */ 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>== </span><span class='String'>'\r'</span><span class='Parentheses'>)</span>     <span class='Comment_Single_Line'>/* Linefeed */ 
</span>            <span class='Delimiter'>{ 
</span>                <a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>+= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN218"><span class='Ref_To_Local'>format_size</span></a> <span class='Operator'>+= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>== </span><span class='String'>'\t'</span><span class='Parentheses'>)</span>     <span class='Comment_Single_Line'>/* Tab */ 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>do</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                    <a href="mbprint.c.html#LN218"><span class='Ref_To_Local'>format_size</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>% </span><span class='Number'>8</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN213"><span class='Ref_To_Local'>w</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span>     <span class='Comment_Single_Line'>/* Other control char */ 
</span>            <span class='Delimiter'>{ 
</span>                <a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>+= </span><span class='Number'>4</span><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN218"><span class='Ref_To_Local'>format_size</span></a> <span class='Operator'>+= </span><span class='Number'>4</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span>    <span class='Comment_Single_Line'>/* Output it as-is */ 
</span>            <span class='Delimiter'>{ 
</span>                <a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>+= </span><a href="mbprint.c.html#LN213"><span class='Ref_To_Local'>w</span></a><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN218"><span class='Ref_To_Local'>format_size</span></a> <span class='Operator'>+= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if chlen==1 &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN213"><span class='Ref_To_Local'>w</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span>         <span class='Comment_Single_Line'>/* Non-ascii control char */ 
</span>        <span class='Delimiter'>{ 
</span>            <a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>+= </span><span class='Number'>6</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* \u0000 */ 
</span>            <a href="mbprint.c.html#LN218"><span class='Ref_To_Local'>format_size</span></a> <span class='Operator'>+= </span><span class='Number'>6</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span>    <span class='Comment_Single_Line'>/* All other chars */ 
</span>        <span class='Delimiter'>{ 
</span>            <a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>+= </span><a href="mbprint.c.html#LN213"><span class='Ref_To_Local'>w</span></a><span class='Delimiter'>; 
</span>            <a href="mbprint.c.html#LN218"><span class='Ref_To_Local'>format_size</span></a> <span class='Operator'>+= </span><a href="mbprint.c.html#LN214"><span class='Ref_To_Local'>chlen</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="mbprint.c.html#LN210"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>-= </span><a href="mbprint.c.html#LN214"><span class='Ref_To_Local'>chlen</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;*pwcs&&len&GT;0;pwcs+=c... &raquo; </span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>&GT; </span><a href="mbprint.c.html#LN216"><span class='Ref_To_Local'>width</span></a><span class='Parentheses'>) 
</span>        <a href="mbprint.c.html#LN216"><span class='Ref_To_Local'>width</span></a> <span class='Operator'>= </span><a href="mbprint.c.html#LN215"><span class='Ref_To_Local'>linewidth</span></a><span class='Delimiter'>; 
</span>    <a href="mbprint.c.html#LN218"><span class='Ref_To_Local'>format_size</span></a> <span class='Operator'>+= </span><span class='Number'>1</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* For NUL char */ 
</span> 
    <span class='Comment_Multi_Line'>/* Set results */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN211"><span class='Ref_to_Parameter'>result_width</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="mbprint.c.html#LN211"><span class='Ref_to_Parameter'>result_width</span></a> <span class='Operator'>= </span><a href="mbprint.c.html#LN216"><span class='Ref_To_Local'>width</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN211"><span class='Ref_to_Parameter'>result_height</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="mbprint.c.html#LN211"><span class='Ref_to_Parameter'>result_height</span></a> <span class='Operator'>= </span><a href="mbprint.c.html#LN217"><span class='Ref_To_Local'>height</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN211"><span class='Ref_to_Parameter'>result_format_size</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="mbprint.c.html#LN211"><span class='Ref_to_Parameter'>result_format_size</span></a> <span class='Operator'>= </span><a href="mbprint.c.html#LN218"><span class='Ref_To_Local'>format_size</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end pg_wcssize &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 *  Format a string into one or more "struct lineptr" lines. 
 *  lines[i].ptr == NULL indicates the end of the array. 
 * 
 * This MUST be kept in sync with pg_wcssize! 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN293"></a><span class='Declare_Function'>pg_wcsformat</span><span class='Parentheses'>(</span><span class='Keyword'>const unsigned char </span><span class='Operator'>*</span><span class='Declare_Parameter'>pwcs</span><span class='Delimiter'>, </span>size_t <span class='Declare_Parameter'>len</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>encoding</span><span class='Delimiter'>, 
</span><a name="LN294"></a>             <span class='Control'>struct</span> <a href="../include/fe_utils/mbprint.h.html#LN15"><span class='Ref_to_Struct'>lineptr</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>lines</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>count</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN296"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>w</span><span class='Delimiter'>, 
</span><a name="LN297"></a>                <span class='Declare_Local'>chlen</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN298"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>linewidth</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN299"></a>    <span class='Keyword'>unsigned char </span><span class='Operator'>*</span><span class='Declare_Local'>ptr</span> <span class='Operator'>= </span><a href="mbprint.c.html#LN294"><span class='Ref_to_Parameter'>lines</span></a><span class='Operator'>-&GT;</span><a href="../include/fe_utils/mbprint.h.html#LN17"><span class='Ref_to_Member'>ptr</span></a><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* Pointer to data area */ 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>&& </span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>+= </span><a href="mbprint.c.html#LN297"><span class='Ref_To_Local'>chlen</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="mbprint.c.html#LN297"><span class='Ref_To_Local'>chlen</span></a> <span class='Operator'>= </span><a href="../interfaces/libpq/libpq-fe.h.html#LN588"><span class='Ref_to_Proto'>PQmblen</span></a><span class='Parentheses'>((</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Delimiter'>, </span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>encoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>&LT; </span><span class='Parentheses'>(</span>size_t<span class='Parentheses'>) </span><a href="mbprint.c.html#LN297"><span class='Ref_To_Local'>chlen</span></a><span class='Parentheses'>)</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <a href="mbprint.c.html#LN296"><span class='Ref_To_Local'>w</span></a> <span class='Operator'>= </span><a href="../interfaces/libpq/libpq-fe.h.html#LN591"><span class='Ref_to_Proto'>PQdsplen</span></a><span class='Parentheses'>((</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Delimiter'>, </span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>encoding</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN297"><span class='Ref_To_Local'>chlen</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>)</span>         <span class='Comment_Single_Line'>/* single-byte char */ 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>== </span><span class='String'>'\n'</span><span class='Parentheses'>)</span>  <span class='Comment_Single_Line'>/* Newline */ 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++ = </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN294"><span class='Ref_to_Parameter'>lines</span></a><span class='Operator'>-&GT;</span><a href="../include/fe_utils/mbprint.h.html#LN18"><span class='Ref_to_Member'>width</span></a> <span class='Operator'>= </span><a href="mbprint.c.html#LN298"><span class='Ref_To_Local'>linewidth</span></a><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN298"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN294"><span class='Ref_to_Parameter'>lines</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN294"><span class='Ref_to_Parameter'>count</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN294"><span class='Ref_to_Parameter'>count</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* Screwup */ 
</span> 
                <span class='Comment_Multi_Line'>/* make next line point to remaining memory */ 
</span>                <a href="mbprint.c.html#LN294"><span class='Ref_to_Parameter'>lines</span></a><span class='Operator'>-&GT;</span><a href="../include/fe_utils/mbprint.h.html#LN17"><span class='Ref_to_Member'>ptr</span></a> <span class='Operator'>= </span><a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>== </span><span class='String'>'\r'</span><span class='Parentheses'>)</span>     <span class='Comment_Single_Line'>/* Linefeed */ 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>"\\r"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN298"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>+= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>+= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>pwcs</span></a> <span class='Operator'>== </span><span class='String'>'\t'</span><span class='Parentheses'>)</span>     <span class='Comment_Single_Line'>/* Tab */ 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>do</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Operator'>*</span><a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++ = </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>                    <a href="mbprint.c.html#LN298"><span class='Ref_To_Local'>linewidth</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN298"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>% </span><span class='Number'>8</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN296"><span class='Ref_To_Local'>w</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span>     <span class='Comment_Single_Line'>/* Other control char */ 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>"\\x%02X"</span><span class='Delimiter'>, </span><span class='Operator'>*</span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN298"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>+= </span><span class='Number'>4</span><span class='Delimiter'>; 
</span>                <a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>+= </span><span class='Number'>4</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span>    <span class='Comment_Single_Line'>/* Output it as-is */ 
</span>            <span class='Delimiter'>{ 
</span>                <a href="mbprint.c.html#LN298"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>+= </span><a href="mbprint.c.html#LN296"><span class='Ref_To_Local'>w</span></a><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++ = *</span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if chlen==1 &raquo; </span> 
        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN296"><span class='Ref_To_Local'>w</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span>         <span class='Comment_Single_Line'>/* Non-ascii control char */ 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>encoding</span></a> <span class='Operator'>== </span><a href="mbprint.c.html#LN42"><span class='Ref_to_Const'>PG_UTF8</span></a><span class='Parentheses'>) 
</span>                <a href="../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>"\\u%04X"</span><span class='Delimiter'>, </span><a href="mbprint.c.html#LN51"><span class='Ref_to_Func'>utf8_to_unicode</span></a><span class='Parentheses'>(</span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* 
                 * This case cannot happen in the current code because only 
                 * UTF-8 signals multibyte control characters. But we may need 
                 * to support it at some stage 
                 */ 
</span>                <a href="../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>"\\u????"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a> <span class='Operator'>+= </span><span class='Number'>6</span><span class='Delimiter'>; 
</span>            <a href="mbprint.c.html#LN298"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>+= </span><span class='Number'>6</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span>    <span class='Comment_Single_Line'>/* All other chars */ 
</span>        <span class='Delimiter'>{ 
</span><a name="LN367"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN367"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="mbprint.c.html#LN367"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="mbprint.c.html#LN297"><span class='Ref_To_Local'>chlen</span></a><span class='Delimiter'>; </span><a href="mbprint.c.html#LN367"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>                <span class='Operator'>*</span><a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++ = </span><a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Delimiter'>[</span><a href="mbprint.c.html#LN367"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>            <a href="mbprint.c.html#LN298"><span class='Ref_To_Local'>linewidth</span></a> <span class='Operator'>+= </span><a href="mbprint.c.html#LN296"><span class='Ref_To_Local'>w</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="mbprint.c.html#LN293"><span class='Ref_to_Parameter'>len</span></a> <span class='Operator'>-= </span><a href="mbprint.c.html#LN297"><span class='Ref_To_Local'>chlen</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;*pwcs&&len&GT;0;pwcs+=c... &raquo; </span> 
    <a href="mbprint.c.html#LN294"><span class='Ref_to_Parameter'>lines</span></a><span class='Operator'>-&GT;</span><a href="../include/fe_utils/mbprint.h.html#LN18"><span class='Ref_to_Member'>width</span></a> <span class='Operator'>= </span><a href="mbprint.c.html#LN298"><span class='Ref_To_Local'>linewidth</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="mbprint.c.html#LN299"><span class='Ref_To_Local'>ptr</span></a><span class='Operator'>++ = </span><span class='String'>'\0'</span><span class='Delimiter'>;</span>              <span class='Comment_Single_Line'>/* Terminate formatted string */ 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN294"><span class='Ref_to_Parameter'>count</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../test/isolation/specscanner.l.html#LN91"><span class='Ref_to_Proto'>exit</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span>                <span class='Comment_Single_Line'>/* Screwup */ 
</span> 
    <span class='Parentheses'>(</span><a href="mbprint.c.html#LN294"><span class='Ref_to_Parameter'>lines</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>ptr <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* terminate line array */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end pg_wcsformat &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Encoding validation: delete any unvalidatable characters from the string 
 * 
 * This seems redundant with existing functionality elsewhere? 
 */ 
</span><span class='Keyword'>unsigned char </span><span class='Operator'>* 
</span><a name="LN391"></a><span class='Declare_Function'>mbvalidate</span><span class='Parentheses'>(</span><span class='Keyword'>unsigned char </span><span class='Operator'>*</span><span class='Declare_Parameter'>pwcs</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>encoding</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="mbprint.c.html#LN391"><span class='Ref_to_Parameter'>encoding</span></a> <span class='Operator'>== </span><a href="mbprint.c.html#LN42"><span class='Ref_to_Const'>PG_UTF8</span></a><span class='Parentheses'>) 
</span>        <a href="mbprint.c.html#LN134"><span class='Ref_to_Func'>mb_utf_validate</span></a><span class='Parentheses'>(</span><a href="mbprint.c.html#LN391"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * other encodings needing validation should add their own routines 
         * here 
         */ 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="mbprint.c.html#LN391"><span class='Ref_to_Parameter'>pwcs</span></a><span class='Delimiter'>; 
} 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>