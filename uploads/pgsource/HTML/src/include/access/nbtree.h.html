<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\include\access\nbtree.h</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\include\access\nbtree.h</b></p></td>
<td align='right'>
Wed Jun 14 08:26:03 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * nbtree.h 
 *    header file for postgres btree access method implementation. 
 * 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * src/include/access/nbtree.h 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Directive'>#ifndef</span> <a href="nbtree.h.html#LN14"><span class='Ref_to_Const'>NBTREE_H</span></a> 
<a name="LN14"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NBTREE_H</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/amapi.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/itup.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/sdir.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/xlogreader.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_index.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"lib/stringinfo.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/bufmgr.h"</span> 
 
<span class='Comment_Multi_Line'>/* There's room for a 16-bit vacuum cycle ID in BTPageOpaqueData */ 
</span><a name="LN25"></a><span class='Control'>typedef</span> <a href="../c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a> <span class='Declare_Typedef'>BTCycleId</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 *  BTPageOpaqueData -- At the end of every page, we store a pointer 
 *  to both siblings in the tree.  This is used to do forward/backward 
 *  index scans.  The next-page link is also critical for recovery when 
 *  a search has navigated to the wrong page due to concurrent page splits 
 *  or deletions; see src/backend/access/nbtree/README for more info. 
 * 
 *  In addition, we store the page's btree level (counting upwards from 
 *  zero at a leaf page) as well as some flag bits indicating the page type 
 *  and status.  If the page is deleted, we replace the level with the 
 *  next-transaction-ID value indicating when it is safe to reclaim the page. 
 * 
 *  We also store a "vacuum cycle ID".  When a page is split while VACUUM is 
 *  processing the index, a nonzero value associated with the VACUUM run is 
 *  stored into both halves of the split page.  (If VACUUM is not running, 
 *  both pages receive zero cycleids.)  This allows VACUUM to detect whether 
 *  a page was split since it started, with a small probability of false match 
 *  if the page was last split some exact multiple of MAX_BT_CYCLE_ID VACUUMs 
 *  ago.  Also, during a split, the BTP_SPLIT_END flag is cleared in the left 
 *  (original) page, and set in the right page, but only if the next page 
 *  to its right has a different cycleid. 
 * 
 *  NOTE: the BTP_LEAF flag bit is redundant since level==0 could be tested 
 *  instead. 
 */ 
</span> 
<a name="LN53"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>BTPageOpaqueData</span> 
<span class='Delimiter'>{ 
</span><a name="LN55"></a>    <a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Member'>btpo_prev</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* left sibling, or P_NONE if leftmost */ 
</span><a name="LN56"></a>    <a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Member'>btpo_next</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* right sibling, or P_NONE if rightmost */ 
</span>    <span class='Control'>union</span> 
    <span class='Delimiter'>{ 
</span><a name="LN59"></a>        <a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>level</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* tree level --- zero for leaf pages */ 
</span><a name="LN60"></a>        <a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Member'>xact</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* next transaction ID, if deleted */ 
</span><a name="LN61"></a>    <span class='Delimiter'>}</span>           <span class='Declare_Member'>btpo</span><span class='Delimiter'>; 
</span><a name="LN62"></a>    <a href="../c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a>      <span class='Declare_Member'>btpo_flags</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* flag bits, see below */ 
</span><a name="LN63"></a>    <a href="nbtree.h.html#LN25"><span class='Ref_to_Typedef'>BTCycleId</span></a>   <span class='Declare_Member'>btpo_cycleid</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* vacuum cycle ID of latest split */ 
</span><a name="LN64"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>BTPageOpaqueData</span><span class='Delimiter'>; 
</span> 
<a name="LN66"></a><span class='Control'>typedef</span> <a href="nbtree.h.html#LN53"><span class='Ref_to_Struct'>BTPageOpaqueData</span></a> <span class='Operator'>*</span><span class='Declare_Typedef'>BTPageOpaque</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Bits defined in btpo_flags */ 
</span><a name="LN69"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTP_LEAF</span>        <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* leaf page, i.e. not internal page */ 
</span><a name="LN70"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTP_ROOT</span>        <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>1</span><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* root page (has no parent) */ 
</span><a name="LN71"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTP_DELETED</span>     <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>2</span><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* page has been deleted from tree */ 
</span><a name="LN72"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTP_META</span>        <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>3</span><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* meta-page */ 
</span><a name="LN73"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTP_HALF_DEAD</span>   <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>4</span><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* empty, but still in tree */ 
</span><a name="LN74"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTP_SPLIT_END</span>   <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>5</span><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* rightmost page of split group */ 
</span><a name="LN75"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTP_HAS_GARBAGE</span> <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>6</span><span class='Parentheses'>)</span>    <span class='Comment_Single_Line'>/* page has LP_DEAD tuples */ 
</span><a name="LN76"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTP_INCOMPLETE_SPLIT</span> <span class='Parentheses'>(</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>7</span><span class='Parentheses'>)</span>   <span class='Comment_Single_Line'>/* right sibling's downlink is missing */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * The max allowed value of a cycle ID is a bit less than 64K.  This is 
 * for convenience of pg_filedump and similar utilities: we want to use 
 * the last 2 bytes of special space as an index type indicator, and 
 * restricting cycle ID lets btree use that space for vacuum cycle IDs 
 * while still allowing index type to be identified. 
 */ 
</span><a name="LN85"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAX_BT_CYCLE_ID</span>     <span class='Number'>0xFF7F</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * The Meta page is always the first page in the btree index. 
 * Its primary purpose is to point to the location of the btree root page. 
 * We also point to the "fast" root, which is the current effective root; 
 * see README for discussion. 
 */ 
</span> 
<a name="LN95"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>BTMetaPageData</span> 
<span class='Delimiter'>{ 
</span><a name="LN97"></a>    <a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>btm_magic</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* should contain BTREE_MAGIC */ 
</span><a name="LN98"></a>    <a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>btm_version</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* should contain BTREE_VERSION */ 
</span><a name="LN99"></a>    <a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Member'>btm_root</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* current root location */ 
</span><a name="LN100"></a>    <a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>btm_level</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* tree level of the root page */ 
</span><a name="LN101"></a>    <a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Member'>btm_fastroot</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* current "fast" root location */ 
</span><a name="LN102"></a>    <a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>btm_fastlevel</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* tree level of the "fast" root page */ 
</span><a name="LN103"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>BTMetaPageData</span><span class='Delimiter'>; 
</span> 
<a name="LN105"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>BTPageGetMeta</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>p</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="nbtree.h.html#LN95"><span class='Ref_to_Struct'>BTMetaPageData</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../storage/bufpage.h.html#LN242"><span class='Ref_to_Macro'>PageGetContents</span></a><span class='Parentheses'>(</span><a href="nbtree.h.html#LN105"><span class='Ref_to_Parameter'>p</span></a><span class='Parentheses'>))</span> 
 
<a name="LN108"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTREE_METAPAGE</span>  <span class='Number'>0</span>       <span class='Comment_Single_Line'>/* first page is meta */ 
</span><a name="LN109"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTREE_MAGIC</span>     <span class='Number'>0x053162</span>    <span class='Comment_Single_Line'>/* magic number of btree pages */ 
</span><a name="LN110"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTREE_VERSION</span>   <span class='Number'>2</span>       <span class='Comment_Single_Line'>/* current version number */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Maximum size of a btree index entry, including its tuple header. 
 * 
 * We actually need to be able to fit three items on every page, 
 * so restrict any one item to 1/3 the per-page available space. 
 */ 
</span><a name="LN118"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>BTMaxItemSize</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>page</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../c.h.html#LN599"><span class='Ref_to_Macro'>MAXALIGN_DOWN</span></a><span class='Parentheses'>((</span><a href="../storage/bufpage.h.html#LN264"><span class='Ref_to_Macro'>PageGetPageSize</span></a><span class='Parentheses'>(</span><a href="nbtree.h.html#LN118"><span class='Ref_to_Parameter'>page</span></a><span class='Parentheses'>)</span> <span class='Operator'>- \ 
</span>                   <a href="../c.h.html#LN587"><span class='Ref_to_Macro'>MAXALIGN</span></a><span class='Parentheses'>(</span><a href="../storage/bufpage.h.html#LN212"><span class='Ref_to_Const'>SizeOfPageHeaderData</span></a> <span class='Operator'>+ </span><span class='Number'>3</span><span class='Operator'>*</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../storage/itemid.h.html#LN23"><span class='Ref_to_Struct'>ItemIdData</span></a><span class='Parentheses'>))</span> <span class='Operator'>- \ 
</span>                   <a href="../c.h.html#LN587"><span class='Ref_to_Macro'>MAXALIGN</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="nbtree.h.html#LN53"><span class='Ref_to_Struct'>BTPageOpaqueData</span></a><span class='Parentheses'>)))</span> <span class='Operator'>/ </span><span class='Number'>3</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * The leaf-page fillfactor defaults to 90% but is user-adjustable. 
 * For pages above the leaf level, we use a fixed 70% fillfactor. 
 * The fillfactor is applied during index build and when splitting 
 * a rightmost page; when splitting non-rightmost pages we try to 
 * divide the data equally. 
 */ 
</span><a name="LN130"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTREE_MIN_FILLFACTOR</span>        <span class='Number'>10</span> 
<a name="LN131"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTREE_DEFAULT_FILLFACTOR</span>    <span class='Number'>90</span> 
<a name="LN132"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTREE_NONLEAF_FILLFACTOR</span>    <span class='Number'>70</span> 
 
<span class='Comment_Multi_Line'>/* 
 *  Test whether two btree entries are "the same". 
 * 
 *  Old comments: 
 *  In addition, we must guarantee that all tuples in the index are unique, 
 *  in order to satisfy some assumptions in Lehman and Yao.  The way that we 
 *  do this is by generating a new OID for every insertion that we do in the 
 *  tree.  This adds eight bytes to the size of btree index tuples.  Note 
 *  that we do not use the OID as part of a composite key; the OID only 
 *  serves as a unique identifier for a given index tuple (logical position 
 *  within a page). 
 * 
 *  New comments: 
 *  actually, we must guarantee that all tuples in A LEVEL 
 *  are unique, not in ALL INDEX. So, we can use the t_tid 
 *  as unique identifier for a given index tuple (logical position 
 *  within a level). - vadim 04/09/97 
 */ 
</span><a name="LN152"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>BTTidSame</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>i1</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>i2</span><span class='Parentheses'>)</span>   <span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="../storage/itemptr.h.html#LN74"><span class='Ref_to_Macro'>ItemPointerGetBlockNumber</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="nbtree.h.html#LN152"><span class='Ref_to_Parameter'>i1</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><a href="../storage/itemptr.h.html#LN74"><span class='Ref_to_Macro'>ItemPointerGetBlockNumber</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="nbtree.h.html#LN152"><span class='Ref_to_Parameter'>i2</span></a><span class='Parentheses'>)))</span> <span class='Operator'>&& \ 
</span>     <span class='Parentheses'>(</span><a href="../storage/itemptr.h.html#LN93"><span class='Ref_to_Macro'>ItemPointerGetOffsetNumber</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="nbtree.h.html#LN152"><span class='Ref_to_Parameter'>i1</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><a href="../storage/itemptr.h.html#LN93"><span class='Ref_to_Macro'>ItemPointerGetOffsetNumber</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="nbtree.h.html#LN152"><span class='Ref_to_Parameter'>i2</span></a><span class='Parentheses'>))))</span> 
<a name="LN155"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>BTEntrySame</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>i1</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>i2</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="nbtree.h.html#LN152"><span class='Ref_to_Macro'>BTTidSame</span></a><span class='Parentheses'>((</span><a href="nbtree.h.html#LN155"><span class='Ref_to_Parameter'>i1</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>t_tid<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="nbtree.h.html#LN155"><span class='Ref_to_Parameter'>i2</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>t_tid<span class='Parentheses'>)</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 *  In general, the btree code tries to localize its knowledge about 
 *  page layout to a couple of routines.  However, we need a special 
 *  value to indicate "no page number" in those places where we expect 
 *  page numbers.  We can use zero for this because we never need to 
 *  make a pointer to the metadata page. 
 */ 
</span> 
<a name="LN167"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>P_NONE</span>          <span class='Number'>0</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Macros to test whether a page is leftmost or rightmost on its tree level, 
 * as well as other state info kept in the opaque data. 
 */ 
</span><a name="LN173"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>P_LEFTMOST</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>opaque</span><span class='Parentheses'>)</span>      <span class='Parentheses'>((</span><a href="nbtree.h.html#LN173"><span class='Ref_to_Parameter'>opaque</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>btpo_prev <span class='Operator'>== </span><a href="nbtree.h.html#LN167"><span class='Ref_to_Const'>P_NONE</span></a><span class='Parentheses'>)</span> 
<a name="LN174"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>P_RIGHTMOST</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>opaque</span><span class='Parentheses'>)</span>     <span class='Parentheses'>((</span><a href="nbtree.h.html#LN174"><span class='Ref_to_Parameter'>opaque</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>btpo_next <span class='Operator'>== </span><a href="nbtree.h.html#LN167"><span class='Ref_to_Const'>P_NONE</span></a><span class='Parentheses'>)</span> 
<a name="LN175"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>P_ISLEAF</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>opaque</span><span class='Parentheses'>)</span>        <span class='Parentheses'>((</span><a href="nbtree.h.html#LN175"><span class='Ref_to_Parameter'>opaque</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>btpo_flags <span class='Operator'>& </span><a href="nbtree.h.html#LN69"><span class='Ref_to_Const'>BTP_LEAF</span></a><span class='Parentheses'>)</span> 
<a name="LN176"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>P_ISROOT</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>opaque</span><span class='Parentheses'>)</span>        <span class='Parentheses'>((</span><a href="nbtree.h.html#LN176"><span class='Ref_to_Parameter'>opaque</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>btpo_flags <span class='Operator'>& </span><a href="nbtree.h.html#LN70"><span class='Ref_to_Const'>BTP_ROOT</span></a><span class='Parentheses'>)</span> 
<a name="LN177"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>P_ISDELETED</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>opaque</span><span class='Parentheses'>)</span>     <span class='Parentheses'>((</span><a href="nbtree.h.html#LN177"><span class='Ref_to_Parameter'>opaque</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>btpo_flags <span class='Operator'>& </span><a href="nbtree.h.html#LN71"><span class='Ref_to_Const'>BTP_DELETED</span></a><span class='Parentheses'>)</span> 
<a name="LN178"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>P_ISMETA</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>opaque</span><span class='Parentheses'>)</span>        <span class='Parentheses'>((</span><a href="nbtree.h.html#LN178"><span class='Ref_to_Parameter'>opaque</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>btpo_flags <span class='Operator'>& </span><a href="nbtree.h.html#LN72"><span class='Ref_to_Const'>BTP_META</span></a><span class='Parentheses'>)</span> 
<a name="LN179"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>P_ISHALFDEAD</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>opaque</span><span class='Parentheses'>)</span>    <span class='Parentheses'>((</span><a href="nbtree.h.html#LN179"><span class='Ref_to_Parameter'>opaque</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>btpo_flags <span class='Operator'>& </span><a href="nbtree.h.html#LN73"><span class='Ref_to_Const'>BTP_HALF_DEAD</span></a><span class='Parentheses'>)</span> 
<a name="LN180"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>P_IGNORE</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>opaque</span><span class='Parentheses'>)</span>        <span class='Parentheses'>((</span><a href="nbtree.h.html#LN180"><span class='Ref_to_Parameter'>opaque</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>btpo_flags <span class='Operator'>& </span><span class='Parentheses'>(</span><a href="nbtree.h.html#LN71"><span class='Ref_to_Const'>BTP_DELETED</span></a><span class='Operator'>|</span><a href="nbtree.h.html#LN73"><span class='Ref_to_Const'>BTP_HALF_DEAD</span></a><span class='Parentheses'>))</span> 
<a name="LN181"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>P_HAS_GARBAGE</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>opaque</span><span class='Parentheses'>)</span>   <span class='Parentheses'>((</span><a href="nbtree.h.html#LN181"><span class='Ref_to_Parameter'>opaque</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>btpo_flags <span class='Operator'>& </span><a href="nbtree.h.html#LN75"><span class='Ref_to_Const'>BTP_HAS_GARBAGE</span></a><span class='Parentheses'>)</span> 
<a name="LN182"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>P_INCOMPLETE_SPLIT</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>opaque</span><span class='Parentheses'>)</span>  <span class='Parentheses'>((</span><a href="nbtree.h.html#LN182"><span class='Ref_to_Parameter'>opaque</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>btpo_flags <span class='Operator'>& </span><a href="nbtree.h.html#LN76"><span class='Ref_to_Const'>BTP_INCOMPLETE_SPLIT</span></a><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 *  Lehman and Yao's algorithm requires a ``high key'' on every non-rightmost 
 *  page.  The high key is not a data key, but gives info about what range of 
 *  keys is supposed to be on this page.  The high key on a page is required 
 *  to be greater than or equal to any data key that appears on the page. 
 *  If we find ourselves trying to insert a key &GT; high key, we know we need 
 *  to move right (this should only happen if the page was split since we 
 *  examined the parent page). 
 * 
 *  Our insertion algorithm guarantees that we can use the initial least key 
 *  on our right sibling as the high key.  Once a page is created, its high 
 *  key changes only if the page is split. 
 * 
 *  On a non-rightmost page, the high key lives in item 1 and data items 
 *  start in item 2.  Rightmost pages have no high key, so we store data 
 *  items beginning in item 1. 
 */ 
</span> 
<a name="LN202"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>P_HIKEY</span>             <span class='Parentheses'>((</span><a href="../storage/off.h.html#LN23"><span class='Ref_to_Typedef'>OffsetNumber</span></a><span class='Parentheses'>) </span><span class='Number'>1</span><span class='Parentheses'>)</span> 
<a name="LN203"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>P_FIRSTKEY</span>          <span class='Parentheses'>((</span><a href="../storage/off.h.html#LN23"><span class='Ref_to_Typedef'>OffsetNumber</span></a><span class='Parentheses'>) </span><span class='Number'>2</span><span class='Parentheses'>)</span> 
<a name="LN204"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>P_FIRSTDATAKEY</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>opaque</span><span class='Parentheses'>)</span>  <span class='Parentheses'>(</span><a href="nbtree.h.html#LN174"><span class='Ref_to_Macro'>P_RIGHTMOST</span></a><span class='Parentheses'>(</span><a href="nbtree.h.html#LN204"><span class='Ref_to_Parameter'>opaque</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="nbtree.h.html#LN202"><span class='Ref_to_Const'>P_HIKEY</span></a> <span class='Operator'>: </span><a href="nbtree.h.html#LN203"><span class='Ref_to_Const'>P_FIRSTKEY</span></a><span class='Parentheses'>)</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 *  Operator strategy numbers for B-tree have been moved to access/stratnum.h, 
 *  because many places need to use them in ScanKeyInit() calls. 
 * 
 *  The strategy numbers are chosen so that we can commute them by 
 *  subtraction, thus: 
 */ 
</span><a name="LN214"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>BTCommuteStrategyNumber</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>strat</span><span class='Parentheses'>)</span>  <span class='Parentheses'>(</span><a href="stratnum.h.html#LN34"><span class='Ref_to_Const'>BTMaxStrategyNumber</span></a> <span class='Operator'>+ </span><span class='Number'>1</span> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="nbtree.h.html#LN214"><span class='Ref_to_Parameter'>strat</span></a><span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* 
 *  When a new operator class is declared, we require that the user 
 *  supply us with an amproc procedure (BTORDER_PROC) for determining 
 *  whether, for two keys a and b, a &LT; b, a = b, or a &GT; b.  This routine 
 *  must return &LT; 0, 0, &GT; 0, respectively, in these three cases.  (It must 
 *  not return INT_MIN, since we may negate the result before using it.) 
 * 
 *  To facilitate accelerated sorting, an operator class may choose to 
 *  offer a second procedure (BTSORTSUPPORT_PROC).  For full details, see 
 *  src/include/utils/sortsupport.h. 
 */ 
</span> 
<a name="LN228"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTORDER_PROC</span>        <span class='Number'>1</span> 
<a name="LN229"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTSORTSUPPORT_PROC</span>  <span class='Number'>2</span> 
<a name="LN230"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BTNProcs</span>            <span class='Number'>2</span> 
 
<span class='Comment_Multi_Line'>/* 
 *  We need to be able to tell the difference between read and write 
 *  requests for pages, in order to do locking correctly. 
 */ 
</span> 
<a name="LN237"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BT_READ</span>         <a href="../storage/bufmgr.h.html#LN87"><span class='Ref_to_Const'>BUFFER_LOCK_SHARE</span></a> 
<a name="LN238"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BT_WRITE</span>        <a href="../storage/bufmgr.h.html#LN88"><span class='Ref_to_Const'>BUFFER_LOCK_EXCLUSIVE</span></a> 
 
<span class='Comment_Multi_Line'>/* 
 *  BTStackData -- As we descend a tree, we push the (location, downlink) 
 *  pairs from internal pages onto a private stack.  If we split a 
 *  leaf, we use this stack to walk back up the tree and insert data 
 *  into parent pages (and possibly to split them, too).  Lehman and 
 *  Yao's update algorithm guarantees that under no circumstances can 
 *  our private stack give us an irredeemably bad picture up the tree. 
 *  Again, see the paper for details. 
 */ 
</span> 
<a name="LN250"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>BTStackData</span> 
<span class='Delimiter'>{ 
</span><a name="LN252"></a>    <a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Member'>bts_blkno</span><span class='Delimiter'>; 
</span><a name="LN253"></a>    <a href="../storage/off.h.html#LN23"><span class='Ref_to_Typedef'>OffsetNumber</span></a> <span class='Declare_Member'>bts_offset</span><span class='Delimiter'>; 
</span><a name="LN254"></a>    <a href="itup.h.html#LN34"><span class='Ref_to_Struct'>IndexTupleData</span></a> <span class='Declare_Member'>bts_btentry</span><span class='Delimiter'>; 
</span><a name="LN255"></a>    <span class='Control'>struct</span> <a href="nbtree.h.html#LN250"><span class='Ref_to_Struct'>BTStackData</span></a> <span class='Operator'>*</span><span class='Declare_Member'>bts_parent</span><span class='Delimiter'>; 
</span><a name="LN256"></a>} <span class='Declare_Typedef'>BTStackData</span><span class='Delimiter'>; 
</span> 
<a name="LN258"></a><span class='Control'>typedef</span> <a href="nbtree.h.html#LN250"><span class='Ref_to_Struct'>BTStackData</span></a> <span class='Operator'>*</span><span class='Declare_Typedef'>BTStack</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * BTScanOpaqueData is the btree-private state needed for an indexscan. 
 * This consists of preprocessed scan keys (see _bt_preprocess_keys() for 
 * details of the preprocessing), information about the current location 
 * of the scan, and information about the marked location, if any.  (We use 
 * BTScanPosData to represent the data needed for each of current and marked 
 * locations.)  In addition we can remember some known-killed index entries 
 * that must be marked before we can move off the current page. 
 * 
 * Index scans work a page at a time: we pin and read-lock the page, identify 
 * all the matching items on the page and save them in BTScanPosData, then 
 * release the read-lock while returning the items to the caller for 
 * processing.  This approach minimizes lock/unlock traffic.  Note that we 
 * keep the pin on the index page until the caller is done with all the items 
 * (this is needed for VACUUM synchronization, see nbtree/README).  When we 
 * are ready to step to the next page, if the caller has told us any of the 
 * items were killed, we re-lock the page to mark them killed, then unlock. 
 * Finally we drop the pin and step to the next page in the appropriate 
 * direction. 
 * 
 * If we are doing an index-only scan, we save the entire IndexTuple for each 
 * matched item, otherwise only its heap TID and offset.  The IndexTuples go 
 * into a separate workspace array; each BTScanPosItem stores its tuple's 
 * offset within that array. 
 */ 
</span> 
<a name="LN286"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>BTScanPosItem</span>    <span class='Comment_Single_Line'>/* what we remember about each match */ 
</span><span class='Delimiter'>{ 
</span><a name="LN288"></a>    <a href="../storage/itemptr.h.html#LN35"><span class='Ref_to_Struct'>ItemPointerData</span></a> <span class='Declare_Member'>heapTid</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* TID of referenced heap item */ 
</span><a name="LN289"></a>    <a href="../storage/off.h.html#LN23"><span class='Ref_to_Typedef'>OffsetNumber</span></a> <span class='Declare_Member'>indexOffset</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* index item's location within page */ 
</span><a name="LN290"></a>    <a href="../storage/bufpage.h.html#LN82"><span class='Ref_to_Typedef'>LocationIndex</span></a> <span class='Declare_Member'>tupleOffset</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* IndexTuple's offset in workspace, if any */ 
</span><a name="LN291"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>BTScanPosItem</span><span class='Delimiter'>; 
</span> 
<a name="LN293"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>BTScanPosData</span> 
<span class='Delimiter'>{ 
</span><a name="LN295"></a>    <a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a>      <span class='Declare_Member'>buf</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* if valid, the buffer is pinned */ 
</span> 
<a name="LN297"></a>    <a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a>  <span class='Declare_Member'>lsn</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* pos in the WAL stream when page was read */ 
</span><a name="LN298"></a>    <a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Member'>currPage</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* page referenced by items array */ 
</span><a name="LN299"></a>    <a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Member'>nextPage</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* page's right link when we scanned it */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * moreLeft and moreRight track whether we think there may be matching 
     * index entries to the left and right of the current page, respectively. 
     * We can clear the appropriate one of these flags when _bt_checkkeys() 
     * returns continuescan = false. 
     */ 
</span><a name="LN307"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>moreLeft</span><span class='Delimiter'>; 
</span><a name="LN308"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>moreRight</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If we are doing an index-only scan, nextTupleOffset is the first free 
     * location in the associated tuple storage workspace. 
     */ 
</span><a name="LN314"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nextTupleOffset</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * The items array is always ordered in index order (ie, increasing 
     * indexoffset).  When scanning backwards it is convenient to fill the 
     * array back-to-front, so we start at the last slot and fill downwards. 
     * Hence we need both a first-valid-entry and a last-valid-entry counter. 
     * itemIndex is a cursor showing which entry was last returned to caller. 
     */ 
</span><a name="LN323"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>firstItem</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* first valid index in items[] */ 
</span><a name="LN324"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>lastItem</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* last valid index in items[] */ 
</span><a name="LN325"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>itemIndex</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* current index in items[] */ 
</span> 
<a name="LN327"></a>    <a href="nbtree.h.html#LN286"><span class='Ref_to_Struct'>BTScanPosItem</span></a> <span class='Declare_Member'>items</span><span class='Delimiter'>[</span><a href="itup.h.html#LN136"><span class='Ref_to_Const'>MaxIndexTuplesPerPage</span></a><span class='Delimiter'>]; </span><span class='Comment_Single_Line'>/* MUST BE LAST */ 
</span><a name="LN328"></a><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end BTScanPosData &raquo; </span> <span class='Declare_Typedef'>BTScanPosData</span><span class='Delimiter'>; 
</span> 
<a name="LN330"></a><span class='Control'>typedef</span> <a href="nbtree.h.html#LN293"><span class='Ref_to_Struct'>BTScanPosData</span></a> <span class='Operator'>*</span><span class='Declare_Typedef'>BTScanPos</span><span class='Delimiter'>; 
</span> 
<a name="LN332"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>BTScanPosIsPinned</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>scanpos</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span><span class='Parentheses'>(</span> <span class='Operator'>\ 
</span>    <a href="../c.h.html#LN675"><span class='Ref_to_Macro'>AssertMacro</span></a><span class='Parentheses'>(</span><a href="../storage/block.h.html#LN69"><span class='Ref_to_Macro'>BlockNumberIsValid</span></a><span class='Parentheses'>((</span><a href="nbtree.h.html#LN332"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>currPage<span class='Parentheses'>)</span> <span class='Operator'>|| \ 
</span>                <span class='Operator'>!</span><a href="../storage/bufmgr.h.html#LN113"><span class='Ref_to_Macro'>BufferIsValid</span></a><span class='Parentheses'>((</span><a href="nbtree.h.html#LN332"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>buf<span class='Parentheses'>))</span><span class='Delimiter'>, </span><span class='Operator'>\ 
</span>    <a href="../storage/bufmgr.h.html#LN113"><span class='Ref_to_Macro'>BufferIsValid</span></a><span class='Parentheses'>((</span><a href="nbtree.h.html#LN332"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>buf<span class='Parentheses'>)</span> <span class='Operator'>\ 
</span><span class='Parentheses'>)</span> 
<a name="LN338"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>BTScanPosUnpin</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>scanpos</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <a href="../storage/bufmgr.h.html#LN174"><span class='Ref_to_Proto'>ReleaseBuffer</span></a><span class='Parentheses'>((</span><a href="nbtree.h.html#LN338"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>buf<span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>(</span><a href="nbtree.h.html#LN338"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>buf <span class='Operator'>= </span><a href="../storage/buf.h.html#LN24"><span class='Ref_to_Const'>InvalidBuffer</span></a><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span><a name="LN343"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>BTScanPosUnpinIfPinned</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>scanpos</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="nbtree.h.html#LN332"><span class='Ref_to_Macro'>BTScanPosIsPinned</span></a><span class='Parentheses'>(</span><a href="nbtree.h.html#LN343"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>))</span> <span class='Operator'>\ 
</span>            <a href="nbtree.h.html#LN338"><span class='Ref_to_Macro'>BTScanPosUnpin</span></a><span class='Parentheses'>(</span><a href="nbtree.h.html#LN343"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<a name="LN349"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>BTScanPosIsValid</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>scanpos</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span><span class='Parentheses'>(</span> <span class='Operator'>\ 
</span>    <a href="../c.h.html#LN675"><span class='Ref_to_Macro'>AssertMacro</span></a><span class='Parentheses'>(</span><a href="../storage/block.h.html#LN69"><span class='Ref_to_Macro'>BlockNumberIsValid</span></a><span class='Parentheses'>((</span><a href="nbtree.h.html#LN349"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>currPage<span class='Parentheses'>)</span> <span class='Operator'>|| \ 
</span>                <span class='Operator'>!</span><a href="../storage/bufmgr.h.html#LN113"><span class='Ref_to_Macro'>BufferIsValid</span></a><span class='Parentheses'>((</span><a href="nbtree.h.html#LN349"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>buf<span class='Parentheses'>))</span><span class='Delimiter'>, </span><span class='Operator'>\ 
</span>    <a href="../storage/block.h.html#LN69"><span class='Ref_to_Macro'>BlockNumberIsValid</span></a><span class='Parentheses'>((</span><a href="nbtree.h.html#LN349"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>currPage<span class='Parentheses'>)</span> <span class='Operator'>\ 
</span><span class='Parentheses'>)</span> 
<a name="LN355"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>BTScanPosInvalidate</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>scanpos</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>(</span><a href="nbtree.h.html#LN355"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>currPage <span class='Operator'>= </span><a href="../storage/block.h.html#LN32"><span class='Ref_to_Const'>InvalidBlockNumber</span></a><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>(</span><a href="nbtree.h.html#LN355"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>nextPage <span class='Operator'>= </span><a href="../storage/block.h.html#LN32"><span class='Ref_to_Const'>InvalidBlockNumber</span></a><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>(</span><a href="nbtree.h.html#LN355"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>buf <span class='Operator'>= </span><a href="../storage/buf.h.html#LN24"><span class='Ref_to_Const'>InvalidBuffer</span></a><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>(</span><a href="nbtree.h.html#LN355"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>lsn <span class='Operator'>= </span><a href="xlogdefs.h.html#LN27"><span class='Ref_to_Const'>InvalidXLogRecPtr</span></a><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>(</span><a href="nbtree.h.html#LN355"><span class='Ref_to_Parameter'>scanpos</span></a><span class='Parentheses'>)</span><span class='Operator'>.</span>nextTupleOffset <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* We need one of these for each equality-type SK_SEARCHARRAY scan key */ 
</span><a name="LN365"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>BTArrayKeyInfo</span> 
<span class='Delimiter'>{ 
</span><a name="LN367"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>scan_key</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* index of associated key in arrayKeyData */ 
</span><a name="LN368"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>cur_elem</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* index of current element in elem_values */ 
</span><a name="LN369"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>mark_elem</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* index of marked element in elem_values */ 
</span><a name="LN370"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>num_elems</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* number of elems in current array value */ 
</span><a name="LN371"></a>    <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Member'>elem_values</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* array of num_elems Datums */ 
</span><a name="LN372"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>BTArrayKeyInfo</span><span class='Delimiter'>; 
</span> 
<a name="LN374"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>BTScanOpaqueData</span> 
<span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* these fields are set by _bt_preprocess_keys(): */ 
</span><a name="LN377"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>qual_ok</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* false if qual can never be satisfied */ 
</span><a name="LN378"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>numberOfKeys</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* number of preprocessed scan keys */ 
</span><a name="LN379"></a>    <a href="skey.h.html#LN74"><span class='Ref_to_Typedef'>ScanKey</span></a>     <span class='Declare_Member'>keyData</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* array of preprocessed scan keys */ 
</span> 
    <span class='Comment_Multi_Line'>/* workspace for SK_SEARCHARRAY support */ 
</span><a name="LN382"></a>    <a href="skey.h.html#LN74"><span class='Ref_to_Typedef'>ScanKey</span></a>     <span class='Declare_Member'>arrayKeyData</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* modified copy of scan-&GT;keyData */ 
</span><a name="LN383"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>numArrayKeys</span><span class='Delimiter'>;</span>   <span class='Comment_Multi_Line'>/* number of equality-type array keys (-1 if 
                                 * there are any unsatisfiable array keys) */ 
</span><a name="LN385"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>arrayKeyCount</span><span class='Delimiter'>;</span>  <span class='Comment_Multi_Line'>/* count indicating number of array scan keys 
                                 * processed */ 
</span><a name="LN387"></a>    <a href="nbtree.h.html#LN365"><span class='Ref_to_Struct'>BTArrayKeyInfo</span></a> <span class='Operator'>*</span><span class='Declare_Member'>arrayKeys</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* info about each equality-type array key */ 
</span><a name="LN388"></a>    <a href="../utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Member'>arrayContext</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* scan-lifespan context for array data */ 
</span> 
    <span class='Comment_Multi_Line'>/* info about killed items if any (killedItems is NULL if never used) */ 
</span><a name="LN391"></a>    <span class='Keyword'>int</span>        <span class='Operator'>*</span><span class='Declare_Member'>killedItems</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* currPos.items indexes of killed items */ 
</span><a name="LN392"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>numKilled</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* number of currently stored items */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If we are doing an index-only scan, these are the tuple storage 
     * workspaces for the currPos and markPos respectively.  Each is of size 
     * BLCKSZ, so it can hold as much as a full page's worth of tuples. 
     */ 
</span><a name="LN399"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>currTuples</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* tuple storage for currPos */ 
</span><a name="LN400"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>markTuples</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* tuple storage for markPos */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the marked position is on the same page as current position, we 
     * don't use markPos, but just keep the marked itemIndex in markItemIndex 
     * (all the rest of currPos is valid for the mark position). Hence, to 
     * determine if there is a mark, first look at markItemIndex, then at 
     * markPos. 
     */ 
</span><a name="LN409"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>markItemIndex</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* itemIndex, or -1 if not valid */ 
</span> 
    <span class='Comment_Multi_Line'>/* keep these last in struct for efficiency */ 
</span><a name="LN412"></a>    <a href="nbtree.h.html#LN293"><span class='Ref_to_Struct'>BTScanPosData</span></a> <span class='Declare_Member'>currPos</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* current position data */ 
</span><a name="LN413"></a>    <a href="nbtree.h.html#LN293"><span class='Ref_to_Struct'>BTScanPosData</span></a> <span class='Declare_Member'>markPos</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* marked position, if any */ 
</span><a name="LN414"></a><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end BTScanOpaqueData &raquo; </span> <span class='Declare_Typedef'>BTScanOpaqueData</span><span class='Delimiter'>; 
</span> 
<a name="LN416"></a><span class='Control'>typedef</span> <a href="nbtree.h.html#LN374"><span class='Ref_to_Struct'>BTScanOpaqueData</span></a> <span class='Operator'>*</span><span class='Declare_Typedef'>BTScanOpaque</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * We use some private sk_flags bits in preprocessed scan keys.  We're allowed 
 * to use bits 16-31 (see skey.h).  The uppermost bits are copied from the 
 * index's indoption[] array entry for the index attribute. 
 */ 
</span><a name="LN423"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SK_BT_REQFWD</span>    <span class='Number'>0x00010000</span>      <span class='Comment_Single_Line'>/* required to continue forward scan */ 
</span><a name="LN424"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SK_BT_REQBKWD</span>   <span class='Number'>0x00020000</span>      <span class='Comment_Single_Line'>/* required to continue backward scan */ 
</span><a name="LN425"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SK_BT_INDOPTION_SHIFT</span>  <span class='Number'>24</span>       <span class='Comment_Single_Line'>/* must clear the above bits */ 
</span><a name="LN426"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SK_BT_DESC</span>          <span class='Parentheses'>(</span><a href="../catalog/pg_index.h.html#LN98"><span class='Ref_to_Const'>INDOPTION_DESC</span></a> <span class='Operator'>&LT;&LT; </span><a href="nbtree.h.html#LN425"><span class='Ref_to_Const'>SK_BT_INDOPTION_SHIFT</span></a><span class='Parentheses'>) 
</span><a name="LN427"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SK_BT_NULLS_FIRST</span>   <span class='Parentheses'>(</span><a href="../catalog/pg_index.h.html#LN99"><span class='Ref_to_Const'>INDOPTION_NULLS_FIRST</span></a> <span class='Operator'>&LT;&LT; </span><a href="nbtree.h.html#LN425"><span class='Ref_to_Const'>SK_BT_INDOPTION_SHIFT</span></a><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * external entry points for btree, in nbtree.c 
 */ 
</span><a name="LN432"></a><span class='Keyword'>extern </span><a href="genam.h.html#LN29"><span class='Ref_to_Struct'>IndexBuildResult</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>btbuild</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>heap</span><span class='Delimiter'>, </span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>index</span><span class='Delimiter'>, 
</span><a name="LN433"></a>        <span class='Control'>struct</span> <a href="../nodes/execnodes.h.html#LN130"><span class='Ref_to_Struct'>IndexInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indexInfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN434"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>btbuildempty</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>index</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN435"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>btinsert</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>values</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>isnull</span><span class='Delimiter'>, 
</span><a name="LN436"></a>         <a href="../storage/itemptr.h.html#LN47"><span class='Ref_to_Typedef'>ItemPointer</span></a> <span class='Declare_Parameter'>ht_ctid</span><span class='Delimiter'>, </span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>heapRel</span><span class='Delimiter'>, 
</span><a name="LN437"></a>         <a href="genam.h.html#LN110"><span class='Ref_to_Enum'>IndexUniqueCheck</span></a> <span class='Declare_Parameter'>checkUnique</span><span class='Delimiter'>, 
</span><a name="LN438"></a>         <span class='Control'>struct</span> <a href="../nodes/execnodes.h.html#LN130"><span class='Ref_to_Struct'>IndexInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>indexInfo</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN439"></a><span class='Keyword'>extern </span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Prototype'>btbeginscan</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nkeys</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>norderbys</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN440"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a> <span class='Declare_Prototype'>btestimateparallelscan</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN441"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>btinitparallelscan</span><span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>target</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN442"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>btgettuple</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Delimiter'>, </span><a href="sdir.h.html#LN21"><span class='Ref_to_Enum'>ScanDirection</span></a> <span class='Declare_Parameter'>dir</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN443"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN294"><span class='Ref_to_Typedef'>int64</span></a> <span class='Declare_Prototype'>btgetbitmap</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Delimiter'>, </span><a href="../../backend/nodes/tidbitmap.c.html#LN146"><span class='Ref_to_Struct'>TIDBitmap</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tbm</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN444"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>btrescan</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Delimiter'>, </span><a href="skey.h.html#LN74"><span class='Ref_to_Typedef'>ScanKey</span></a> <span class='Declare_Parameter'>scankey</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nscankeys</span><span class='Delimiter'>, 
</span><a name="LN445"></a>         <a href="skey.h.html#LN74"><span class='Ref_to_Typedef'>ScanKey</span></a> <span class='Declare_Parameter'>orderbys</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>norderbys</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN446"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>btparallelrescan</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN447"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>btendscan</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN448"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>btmarkpos</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN449"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>btrestrpos</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN450"></a><span class='Keyword'>extern </span><a href="genam.h.html#LN70"><span class='Ref_to_Struct'>IndexBulkDeleteResult</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>btbulkdelete</span><span class='Parentheses'>(</span><a href="genam.h.html#LN43"><span class='Ref_to_Struct'>IndexVacuumInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>info</span><span class='Delimiter'>, 
</span><a name="LN451"></a>             <a href="genam.h.html#LN70"><span class='Ref_to_Struct'>IndexBulkDeleteResult</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stats</span><span class='Delimiter'>, 
</span><a name="LN452"></a>             <a href="genam.h.html#LN82"><span class='Ref_to_Typedef'>IndexBulkDeleteCallback</span></a> <span class='Declare_Parameter'>callback</span><span class='Delimiter'>, 
</span><a name="LN453"></a>             <span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>callback_state</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN454"></a><span class='Keyword'>extern </span><a href="genam.h.html#LN70"><span class='Ref_to_Struct'>IndexBulkDeleteResult</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>btvacuumcleanup</span><span class='Parentheses'>(</span><a href="genam.h.html#LN43"><span class='Ref_to_Struct'>IndexVacuumInfo</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>info</span><span class='Delimiter'>, 
</span><a name="LN455"></a>                <a href="genam.h.html#LN70"><span class='Ref_to_Struct'>IndexBulkDeleteResult</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stats</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN456"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>btcanreturn</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>index</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>attno</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * prototypes for internal functions in nbtree.c 
 */ 
</span><a name="LN461"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>_bt_parallel_seize</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Delimiter'>, </span><a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>pageno</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN462"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_parallel_release</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Delimiter'>, </span><a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Parameter'>scan_page</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN463"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_parallel_done</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN464"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_parallel_advance_array_keys</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * prototypes for functions in nbtinsert.c 
 */ 
</span><a name="LN469"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>_bt_doinsert</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="itup.h.html#LN52"><span class='Ref_to_Typedef'>IndexTuple</span></a> <span class='Declare_Parameter'>itup</span><span class='Delimiter'>, 
</span><a name="LN470"></a>             <a href="genam.h.html#LN110"><span class='Ref_to_Enum'>IndexUniqueCheck</span></a> <span class='Declare_Parameter'>checkUnique</span><span class='Delimiter'>, </span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>heapRel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN471"></a><span class='Keyword'>extern </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Prototype'>_bt_getstackbuf</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="nbtree.h.html#LN258"><span class='Ref_to_Typedef'>BTStack</span></a> <span class='Declare_Parameter'>stack</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>access</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN472"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_finish_split</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Parameter'>bbuf</span><span class='Delimiter'>, </span><a href="nbtree.h.html#LN258"><span class='Ref_to_Typedef'>BTStack</span></a> <span class='Declare_Parameter'>stack</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * prototypes for functions in nbtpage.c 
 */ 
</span><a name="LN477"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_initmetapage</span><span class='Parentheses'>(</span><a href="../storage/bufpage.h.html#LN73"><span class='Ref_to_Typedef'>Page</span></a> <span class='Declare_Parameter'>page</span><span class='Delimiter'>, </span><a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Parameter'>rootbknum</span><span class='Delimiter'>, </span><a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a> <span class='Declare_Parameter'>level</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN478"></a><span class='Keyword'>extern </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Prototype'>_bt_getroot</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>access</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN479"></a><span class='Keyword'>extern </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Prototype'>_bt_gettrueroot</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN480"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>_bt_getrootheight</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN481"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_checkpage</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Parameter'>buf</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN482"></a><span class='Keyword'>extern </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Prototype'>_bt_getbuf</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Parameter'>blkno</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>access</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN483"></a><span class='Keyword'>extern </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Prototype'>_bt_relandgetbuf</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Parameter'>obuf</span><span class='Delimiter'>, 
</span><a name="LN484"></a>                 <a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Parameter'>blkno</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>access</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN485"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_relbuf</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Parameter'>buf</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN486"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_pageinit</span><span class='Parentheses'>(</span><a href="../storage/bufpage.h.html#LN73"><span class='Ref_to_Typedef'>Page</span></a> <span class='Declare_Parameter'>page</span><span class='Delimiter'>, </span><a href="../c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a> <span class='Declare_Parameter'>size</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN487"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>_bt_page_recyclable</span><span class='Parentheses'>(</span><a href="../storage/bufpage.h.html#LN73"><span class='Ref_to_Typedef'>Page</span></a> <span class='Declare_Parameter'>page</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN488"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_delitems_delete</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, 
</span><a name="LN489"></a>                    <a href="../storage/off.h.html#LN23"><span class='Ref_to_Typedef'>OffsetNumber</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>itemnos</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nitems</span><span class='Delimiter'>, </span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>heapRel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN490"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_delitems_vacuum</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, 
</span><a name="LN491"></a>                    <a href="../storage/off.h.html#LN23"><span class='Ref_to_Typedef'>OffsetNumber</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>itemnos</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nitems</span><span class='Delimiter'>, 
</span><a name="LN492"></a>                    <a href="../storage/block.h.html#LN30"><span class='Ref_to_Typedef'>BlockNumber</span></a> <span class='Declare_Parameter'>lastBlockVacuumed</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN493"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>_bt_pagedel</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Parameter'>buf</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * prototypes for functions in nbtsearch.c 
 */ 
</span><a name="LN498"></a><span class='Keyword'>extern </span><a href="nbtree.h.html#LN258"><span class='Ref_to_Typedef'>BTStack</span></a> <span class='Declare_Prototype'>_bt_search</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, 
</span><a name="LN499"></a>           <span class='Keyword'>int </span><span class='Declare_Parameter'>keysz</span><span class='Delimiter'>, </span><a href="skey.h.html#LN74"><span class='Ref_to_Typedef'>ScanKey</span></a> <span class='Declare_Parameter'>scankey</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>nextkey</span><span class='Delimiter'>, 
</span><a name="LN500"></a>           <a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>bufP</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>access</span><span class='Delimiter'>, </span><a href="../utils/snapshot.h.html#LN22"><span class='Ref_to_Typedef'>Snapshot</span></a> <span class='Declare_Parameter'>snapshot</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN501"></a><span class='Keyword'>extern </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Prototype'>_bt_moveright</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>keysz</span><span class='Delimiter'>, 
</span><a name="LN502"></a>              <a href="skey.h.html#LN74"><span class='Ref_to_Typedef'>ScanKey</span></a> <span class='Declare_Parameter'>scankey</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>nextkey</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>forupdate</span><span class='Delimiter'>, </span><a href="nbtree.h.html#LN258"><span class='Ref_to_Typedef'>BTStack</span></a> <span class='Declare_Parameter'>stack</span><span class='Delimiter'>, 
</span><a name="LN503"></a>              <span class='Keyword'>int </span><span class='Declare_Parameter'>access</span><span class='Delimiter'>, </span><a href="../utils/snapshot.h.html#LN22"><span class='Ref_to_Typedef'>Snapshot</span></a> <span class='Declare_Parameter'>snapshot</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN504"></a><span class='Keyword'>extern </span><a href="../storage/off.h.html#LN23"><span class='Ref_to_Typedef'>OffsetNumber</span></a> <span class='Declare_Prototype'>_bt_binsrch</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>keysz</span><span class='Delimiter'>, 
</span><a name="LN505"></a>            <a href="skey.h.html#LN74"><span class='Ref_to_Typedef'>ScanKey</span></a> <span class='Declare_Parameter'>scankey</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>nextkey</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN506"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Declare_Prototype'>_bt_compare</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>keysz</span><span class='Delimiter'>, </span><a href="skey.h.html#LN74"><span class='Ref_to_Typedef'>ScanKey</span></a> <span class='Declare_Parameter'>scankey</span><span class='Delimiter'>, 
</span><a name="LN507"></a>            <a href="../storage/bufpage.h.html#LN73"><span class='Ref_to_Typedef'>Page</span></a> <span class='Declare_Parameter'>page</span><span class='Delimiter'>, </span><a href="../storage/off.h.html#LN23"><span class='Ref_to_Typedef'>OffsetNumber</span></a> <span class='Declare_Parameter'>offnum</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN508"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>_bt_first</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Delimiter'>, </span><a href="sdir.h.html#LN21"><span class='Ref_to_Enum'>ScanDirection</span></a> <span class='Declare_Parameter'>dir</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN509"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>_bt_next</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Delimiter'>, </span><a href="sdir.h.html#LN21"><span class='Ref_to_Enum'>ScanDirection</span></a> <span class='Declare_Parameter'>dir</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN510"></a><span class='Keyword'>extern </span><a href="../storage/buf.h.html#LN22"><span class='Ref_to_Typedef'>Buffer</span></a> <span class='Declare_Prototype'>_bt_get_endpoint</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a> <span class='Declare_Parameter'>level</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>rightmost</span><span class='Delimiter'>, 
</span><a name="LN511"></a>                 <a href="../utils/snapshot.h.html#LN22"><span class='Ref_to_Typedef'>Snapshot</span></a> <span class='Declare_Parameter'>snapshot</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * prototypes for functions in nbtutils.c 
 */ 
</span><a name="LN516"></a><span class='Keyword'>extern </span><a href="skey.h.html#LN74"><span class='Ref_to_Typedef'>ScanKey</span></a> <span class='Declare_Prototype'>_bt_mkscankey</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Delimiter'>, </span><a href="itup.h.html#LN52"><span class='Ref_to_Typedef'>IndexTuple</span></a> <span class='Declare_Parameter'>itup</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN517"></a><span class='Keyword'>extern </span><a href="skey.h.html#LN74"><span class='Ref_to_Typedef'>ScanKey</span></a> <span class='Declare_Prototype'>_bt_mkscankey_nodata</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN518"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_freeskey</span><span class='Parentheses'>(</span><a href="skey.h.html#LN74"><span class='Ref_to_Typedef'>ScanKey</span></a> <span class='Declare_Parameter'>skey</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN519"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_freestack</span><span class='Parentheses'>(</span><a href="nbtree.h.html#LN258"><span class='Ref_to_Typedef'>BTStack</span></a> <span class='Declare_Parameter'>stack</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN520"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_preprocess_array_keys</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN521"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_start_array_keys</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Delimiter'>, </span><a href="sdir.h.html#LN21"><span class='Ref_to_Enum'>ScanDirection</span></a> <span class='Declare_Parameter'>dir</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN522"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>_bt_advance_array_keys</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Delimiter'>, </span><a href="sdir.h.html#LN21"><span class='Ref_to_Enum'>ScanDirection</span></a> <span class='Declare_Parameter'>dir</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN523"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_mark_array_keys</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN524"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_restore_array_keys</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN525"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_preprocess_keys</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN526"></a><span class='Keyword'>extern </span><a href="itup.h.html#LN52"><span class='Ref_to_Typedef'>IndexTuple</span></a> <span class='Declare_Prototype'>_bt_checkkeys</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Delimiter'>, 
</span><a name="LN527"></a>              <a href="../storage/bufpage.h.html#LN73"><span class='Ref_to_Typedef'>Page</span></a> <span class='Declare_Parameter'>page</span><span class='Delimiter'>, </span><a href="../storage/off.h.html#LN23"><span class='Ref_to_Typedef'>OffsetNumber</span></a> <span class='Declare_Parameter'>offnum</span><span class='Delimiter'>, 
</span><a name="LN528"></a>              <a href="sdir.h.html#LN21"><span class='Ref_to_Enum'>ScanDirection</span></a> <span class='Declare_Parameter'>dir</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>continuescan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN529"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_killitems</span><span class='Parentheses'>(</span><a href="genam.h.html#LN85"><span class='Ref_to_Typedef'>IndexScanDesc</span></a> <span class='Declare_Parameter'>scan</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN530"></a><span class='Keyword'>extern </span><a href="nbtree.h.html#LN25"><span class='Ref_to_Typedef'>BTCycleId</span></a> <span class='Declare_Prototype'>_bt_vacuum_cycleid</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN531"></a><span class='Keyword'>extern </span><a href="nbtree.h.html#LN25"><span class='Ref_to_Typedef'>BTCycleId</span></a> <span class='Declare_Prototype'>_bt_start_vacuum</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN532"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_end_vacuum</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN533"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_end_vacuum_callback</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>code</span><span class='Delimiter'>, </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>arg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN534"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a> <span class='Declare_Prototype'>BTreeShmemSize</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN535"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>BTreeShmemInit</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN536"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN451"><span class='Ref_to_Typedef'>bytea</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>btoptions</span><span class='Parentheses'>(</span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>reloptions</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>validate</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN537"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>btproperty</span><span class='Parentheses'>(</span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>index_oid</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>attno</span><span class='Delimiter'>, 
</span><a name="LN538"></a>           <a href="amapi.h.html#LN33"><span class='Ref_to_Enum'>IndexAMProperty</span></a> <span class='Declare_Parameter'>prop</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>propname</span><span class='Delimiter'>, 
</span><a name="LN539"></a>           <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>res</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>isnull</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * prototypes for functions in nbtvalidate.c 
 */ 
</span><a name="LN544"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>btvalidate</span><span class='Parentheses'>(</span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>opclassoid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * prototypes for functions in nbtsort.c 
 */ 
</span><a name="LN549"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <a href="../../backend/access/nbtree/nbtsort.c.html#LN84"><span class='Ref_to_Struct'>BTSpool</span></a> <span class='Declare_Typedef'>BTSpool</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* opaque type known only within nbtsort.c */ 
</span> 
<a name="LN551"></a><span class='Keyword'>extern </span><a href="../../backend/access/nbtree/nbtsort.c.html#LN84"><span class='Ref_to_Struct'>BTSpool</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>_bt_spoolinit</span><span class='Parentheses'>(</span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>heap</span><span class='Delimiter'>, </span><a href="../utils/relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>index</span><span class='Delimiter'>, 
</span><a name="LN552"></a>              <span class='Keyword'>bool </span><span class='Declare_Parameter'>isunique</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isdead</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN553"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_spooldestroy</span><span class='Parentheses'>(</span><a href="../../backend/access/nbtree/nbtsort.c.html#LN84"><span class='Ref_to_Struct'>BTSpool</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>btspool</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN554"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_spool</span><span class='Parentheses'>(</span><a href="../../backend/access/nbtree/nbtsort.c.html#LN84"><span class='Ref_to_Struct'>BTSpool</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>btspool</span><span class='Delimiter'>, </span><a href="../storage/itemptr.h.html#LN47"><span class='Ref_to_Typedef'>ItemPointer</span></a> <span class='Declare_Parameter'>self</span><span class='Delimiter'>, 
</span><a name="LN555"></a>          <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>values</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>isnull</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN556"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>_bt_leafbuild</span><span class='Parentheses'>(</span><a href="../../backend/access/nbtree/nbtsort.c.html#LN84"><span class='Ref_to_Struct'>BTSpool</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>btspool</span><span class='Delimiter'>, </span><a href="../../backend/access/nbtree/nbtsort.c.html#LN84"><span class='Ref_to_Struct'>BTSpool</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>spool2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* NBTREE_H */ 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>