<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\include\access\xact.h</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\include\access\xact.h</b></p></td>
<td align='right'>
Wed Jun 14 08:26:03 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * xact.h 
 *    postgres transaction system definitions 
 * 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * src/include/access/xact.h 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Directive'>#ifndef</span> <a href="xact.h.html#LN14"><span class='Ref_to_Const'>XACT_H</span></a> 
<a name="LN14"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_H</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/xlogreader.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"lib/stringinfo.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/pg_list.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/relfilenode.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/sinval.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/datetime.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Xact isolation levels 
 */ 
</span><a name="LN27"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_READ_UNCOMMITTED</span>   <span class='Number'>0</span> 
<a name="LN28"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_READ_COMMITTED</span>     <span class='Number'>1</span> 
<a name="LN29"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_REPEATABLE_READ</span>    <span class='Number'>2</span> 
<a name="LN30"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_SERIALIZABLE</span>       <span class='Number'>3</span> 
 
<a name="LN32"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>DefaultXactIsoLevel</span><span class='Delimiter'>; 
</span><a name="LN33"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/sqlca.h.html#LN5"><span class='Ref_to_Const'>PGDLLIMPORT</span></a> <span class='Keyword'>int </span><span class='Declare_Var'>XactIsoLevel</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * We implement three isolation levels internally. 
 * The two stronger ones use one snapshot per database transaction; 
 * the others use one snapshot per statement. 
 * Serializable uses predicate locks in addition to snapshots. 
 * These macros should be used to check which isolation level is selected. 
 */ 
</span><a name="LN42"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IsolationUsesXactSnapshot</span><span class='Parentheses'>() (</span><a href="../../backend/access/transam/xact.c.html#LN73"><span class='Ref_to_Global_Var'>XactIsoLevel</span></a> <span class='Operator'>&GT;= </span><a href="xact.h.html#LN29"><span class='Ref_to_Const'>XACT_REPEATABLE_READ</span></a><span class='Parentheses'>) 
</span><a name="LN43"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>IsolationIsSerializable</span><span class='Parentheses'>() (</span><a href="../../backend/access/transam/xact.c.html#LN73"><span class='Ref_to_Global_Var'>XactIsoLevel</span></a> <span class='Operator'>== </span><a href="xact.h.html#LN30"><span class='Ref_to_Const'>XACT_SERIALIZABLE</span></a><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* Xact read-only state */ 
</span><a name="LN46"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>DefaultXactReadOnly</span><span class='Delimiter'>; 
</span><a name="LN47"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>XactReadOnly</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Xact is deferrable -- only meaningful (currently) for read only 
 * SERIALIZABLE transactions 
 */ 
</span><a name="LN53"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>DefaultXactDeferrable</span><span class='Delimiter'>; 
</span><a name="LN54"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>XactDeferrable</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN58"></a>    <span class='Declare_Enum_Const'>SYNCHRONOUS_COMMIT_OFF</span><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* asynchronous commit */ 
</span><a name="LN59"></a>    <span class='Declare_Enum_Const'>SYNCHRONOUS_COMMIT_LOCAL_FLUSH</span><span class='Delimiter'>,</span>     <span class='Comment_Single_Line'>/* wait for local flush only */ 
</span><a name="LN60"></a>    <span class='Declare_Enum_Const'>SYNCHRONOUS_COMMIT_REMOTE_WRITE</span><span class='Delimiter'>,</span>    <span class='Comment_Multi_Line'>/* wait for local flush and remote 
                                         * write */ 
</span><a name="LN62"></a>    <span class='Declare_Enum_Const'>SYNCHRONOUS_COMMIT_REMOTE_FLUSH</span><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'>/* wait for local and remote flush */ 
</span><a name="LN63"></a>    <span class='Declare_Enum_Const'>SYNCHRONOUS_COMMIT_REMOTE_APPLY</span>     <span class='Comment_Multi_Line'>/* wait for local flush and remote 
                                         * apply */ 
</span><a name="LN65"></a><span class='Delimiter'>}</span>   <span class='Declare_Typedef'>SyncCommitLevel</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Define the default setting for synchronous_commit */ 
</span><a name="LN68"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SYNCHRONOUS_COMMIT_ON</span>   <a href="xact.h.html#LN62"><span class='Ref_to_EnumConst'>SYNCHRONOUS_COMMIT_REMOTE_FLUSH</span></a> 
 
<span class='Comment_Multi_Line'>/* Synchronous commit level */ 
</span><a name="LN71"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>synchronous_commit</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Miscellaneous flag bits to record events which occur on the top level 
 * transaction. These flags are only persisted in MyXactFlags and are intended 
 * so we remember to do certain things later in the transaction. This is 
 * globally accessible, so can be set from anywhere in the code which requires 
 * recording flags. 
 */ 
</span><a name="LN80"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>MyXactFlags</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * XACT_FLAGS_ACCESSEDTEMPREL - set when a temporary relation is accessed. We 
 * don't allow PREPARE TRANSACTION in that case. 
 */ 
</span><a name="LN86"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_FLAGS_ACCESSEDTEMPREL</span>              <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * XACT_FLAGS_ACQUIREDACCESSEXCLUSIVELOCK - records whether the top level xact 
 * logged any Access Exclusive Locks. 
 */ 
</span><a name="LN92"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_FLAGS_ACQUIREDACCESSEXCLUSIVELOCK</span>  <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 *  start- and end-of-transaction callbacks for dynamically loaded modules 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN100"></a>    <span class='Declare_Enum_Const'>XACT_EVENT_COMMIT</span><span class='Delimiter'>, 
</span><a name="LN101"></a>    <span class='Declare_Enum_Const'>XACT_EVENT_PARALLEL_COMMIT</span><span class='Delimiter'>, 
</span><a name="LN102"></a>    <span class='Declare_Enum_Const'>XACT_EVENT_ABORT</span><span class='Delimiter'>, 
</span><a name="LN103"></a>    <span class='Declare_Enum_Const'>XACT_EVENT_PARALLEL_ABORT</span><span class='Delimiter'>, 
</span><a name="LN104"></a>    <span class='Declare_Enum_Const'>XACT_EVENT_PREPARE</span><span class='Delimiter'>, 
</span><a name="LN105"></a>    <span class='Declare_Enum_Const'>XACT_EVENT_PRE_COMMIT</span><span class='Delimiter'>, 
</span><a name="LN106"></a>    <span class='Declare_Enum_Const'>XACT_EVENT_PARALLEL_PRE_COMMIT</span><span class='Delimiter'>, 
</span><a name="LN107"></a>    <span class='Declare_Enum_Const'>XACT_EVENT_PRE_PREPARE</span> 
<a name="LN108"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>XactEvent</span><span class='Delimiter'>; 
</span> 
<a name="LN110"></a><span class='Control'>typedef</span> <span class='Keyword'>void </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>XactCallback</span><span class='Parentheses'>) (</span><a href="xact.h.html#LN98"><span class='Ref_to_Typedef'>XactEvent</span></a> event<span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span>arg<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN114"></a>    <span class='Declare_Enum_Const'>SUBXACT_EVENT_START_SUB</span><span class='Delimiter'>, 
</span><a name="LN115"></a>    <span class='Declare_Enum_Const'>SUBXACT_EVENT_COMMIT_SUB</span><span class='Delimiter'>, 
</span><a name="LN116"></a>    <span class='Declare_Enum_Const'>SUBXACT_EVENT_ABORT_SUB</span><span class='Delimiter'>, 
</span><a name="LN117"></a>    <span class='Declare_Enum_Const'>SUBXACT_EVENT_PRE_COMMIT_SUB</span> 
<a name="LN118"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>SubXactEvent</span><span class='Delimiter'>; 
</span> 
<a name="LN120"></a><span class='Control'>typedef</span> <span class='Keyword'>void </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>SubXactCallback</span><span class='Parentheses'>) (</span><a href="xact.h.html#LN112"><span class='Ref_to_Typedef'>SubXactEvent</span></a> event<span class='Delimiter'>, </span><a href="../c.h.html#LN400"><span class='Ref_to_Typedef'>SubTransactionId</span></a> mySubid<span class='Delimiter'>, 
</span>                                    <a href="../c.h.html#LN400"><span class='Ref_to_Typedef'>SubTransactionId</span></a> parentSubid<span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span>arg<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      transaction-related XLOG entries 
 * ---------------- 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * XLOG allows to store some information in high 4 bits of log record xl_info 
 * field. We use 3 for the opcode, and one about an optional flag variable. 
 */ 
</span><a name="LN133"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XLOG_XACT_COMMIT</span>            <span class='Number'>0x00</span> 
<a name="LN134"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XLOG_XACT_PREPARE</span>           <span class='Number'>0x10</span> 
<a name="LN135"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XLOG_XACT_ABORT</span>             <span class='Number'>0x20</span> 
<a name="LN136"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XLOG_XACT_COMMIT_PREPARED</span>   <span class='Number'>0x30</span> 
<a name="LN137"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XLOG_XACT_ABORT_PREPARED</span>    <span class='Number'>0x40</span> 
<a name="LN138"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XLOG_XACT_ASSIGNMENT</span>        <span class='Number'>0x50</span> 
<span class='Comment_Multi_Line'>/* free opcode 0x60 */ 
/* free opcode 0x70 */ 
</span> 
<span class='Comment_Multi_Line'>/* mask for filtering opcodes out of xl_info */ 
</span><a name="LN143"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XLOG_XACT_OPMASK</span>            <span class='Number'>0x70</span> 
 
<span class='Comment_Multi_Line'>/* does this record have a 'xinfo' field or not */ 
</span><a name="LN146"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XLOG_XACT_HAS_INFO</span>          <span class='Number'>0x80</span> 
 
<span class='Comment_Multi_Line'>/* 
 * The following flags, stored in xinfo, determine which information is 
 * contained in commit/abort records. 
 */ 
</span><a name="LN152"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_XINFO_HAS_DBINFO</span>           <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span><a name="LN153"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_XINFO_HAS_SUBXACTS</span>         <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>1</span><span class='Parentheses'>) 
</span><a name="LN154"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_XINFO_HAS_RELFILENODES</span>     <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>2</span><span class='Parentheses'>) 
</span><a name="LN155"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_XINFO_HAS_INVALS</span>           <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>3</span><span class='Parentheses'>) 
</span><a name="LN156"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_XINFO_HAS_TWOPHASE</span>         <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>4</span><span class='Parentheses'>) 
</span><a name="LN157"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_XINFO_HAS_ORIGIN</span>           <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>5</span><span class='Parentheses'>) 
</span><a name="LN158"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_XINFO_HAS_AE_LOCKS</span>         <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>6</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Also stored in xinfo, these indicating a variety of additional actions that 
 * need to occur when emulating transaction effects during recovery. 
 * 
 * They are named XactCompletion... to differentiate them from 
 * EOXact... routines which run at the end of the original transaction 
 * completion. 
 */ 
</span><a name="LN168"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_COMPLETION_APPLY_FEEDBACK</span>          <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>29</span><span class='Parentheses'>) 
</span><a name="LN169"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_COMPLETION_UPDATE_RELCACHE_FILE</span>    <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>30</span><span class='Parentheses'>) 
</span><a name="LN170"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XACT_COMPLETION_FORCE_SYNC_COMMIT</span>       <span class='Parentheses'>(</span><span class='Number'>1U</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>31</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* Access macros for above flags */ 
</span><a name="LN173"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>XactCompletionApplyFeedback</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>xinfo</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="xact.h.html#LN173"><span class='Ref_to_Parameter'>xinfo</span></a> <span class='Operator'>& </span><a href="xact.h.html#LN168"><span class='Ref_to_Const'>XACT_COMPLETION_APPLY_FEEDBACK</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
<a name="LN175"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>XactCompletionRelcacheInitFileInval</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>xinfo</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="xact.h.html#LN175"><span class='Ref_to_Parameter'>xinfo</span></a> <span class='Operator'>& </span><a href="xact.h.html#LN169"><span class='Ref_to_Const'>XACT_COMPLETION_UPDATE_RELCACHE_FILE</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
<a name="LN177"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>XactCompletionForceSyncCommit</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>xinfo</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="xact.h.html#LN177"><span class='Ref_to_Parameter'>xinfo</span></a> <span class='Operator'>& </span><a href="xact.h.html#LN170"><span class='Ref_to_Const'>XACT_COMPLETION_FORCE_SYNC_COMMIT</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
 
<a name="LN180"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_assignment</span> 
<span class='Delimiter'>{ 
</span><a name="LN182"></a>    <a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Member'>xtop</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* assigned XID's top-level XID */ 
</span><a name="LN183"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nsubxacts</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* number of subtransaction XIDs */ 
</span><a name="LN184"></a>    <a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Member'>xsub</span><span class='Delimiter'>[</span>FLEXIBLE_ARRAY_MEMBER<span class='Delimiter'>];</span>  <span class='Comment_Single_Line'>/* assigned subxids */ 
</span><a name="LN185"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>xl_xact_assignment</span><span class='Delimiter'>; 
</span> 
<a name="LN187"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MinSizeOfXactAssignment</span> <a href="../c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="xact.h.html#LN180"><span class='Ref_to_Struct'>xl_xact_assignment</span></a><span class='Delimiter'>, </span>xsub<span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Commit and abort records can contain a lot of information. But a large 
 * portion of the records won't need all possible pieces of information. So we 
 * only include what's needed. 
 * 
 * A minimal commit/abort record only consists of a xl_xact_commit/abort 
 * struct. The presence of additional information is indicated by bits set in 
 * 'xl_xact_xinfo-&GT;xinfo'. The presence of the xinfo field itself is signalled 
 * by a set XLOG_XACT_HAS_INFO bit in the xl_info field. 
 * 
 * NB: All the individual data chunks should be sized to multiples of 
 * sizeof(int) and only require int32 alignment. If they require bigger 
 * alignment, they need to be copied upon reading. 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* sub-records for commit/abort */ 
</span> 
<a name="LN206"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_xinfo</span> 
<span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * Even though we right now only require 1 byte of space in xinfo we use 
     * four so following records don't have to care about alignment. Commit 
     * records can be large, so copying large portions isn't attractive. 
     */ 
</span><a name="LN213"></a>    <a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>xinfo</span><span class='Delimiter'>; 
</span><a name="LN214"></a>} <span class='Declare_Typedef'>xl_xact_xinfo</span><span class='Delimiter'>; 
</span> 
<a name="LN216"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_dbinfo</span> 
<span class='Delimiter'>{ 
</span><a name="LN218"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>dbId</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* MyDatabaseId */ 
</span><a name="LN219"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>tsId</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* MyDatabaseTableSpace */ 
</span><a name="LN220"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>xl_xact_dbinfo</span><span class='Delimiter'>; 
</span> 
<a name="LN222"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_subxacts</span> 
<span class='Delimiter'>{ 
</span><a name="LN224"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nsubxacts</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* number of subtransaction XIDs */ 
</span><a name="LN225"></a>    <a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Member'>subxacts</span><span class='Delimiter'>[</span>FLEXIBLE_ARRAY_MEMBER<span class='Delimiter'>]; 
</span><a name="LN226"></a>} <span class='Declare_Typedef'>xl_xact_subxacts</span><span class='Delimiter'>; 
</span><a name="LN227"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MinSizeOfXactSubxacts</span> <a href="../c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="xact.h.html#LN222"><span class='Ref_to_Struct'>xl_xact_subxacts</span></a><span class='Delimiter'>, </span>subxacts<span class='Parentheses'>) 
</span> 
<a name="LN229"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_relfilenodes</span> 
<span class='Delimiter'>{ 
</span><a name="LN231"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nrels</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* number of subtransaction XIDs */ 
</span><a name="LN232"></a>    <a href="../storage/relfilenode.h.html#LN56"><span class='Ref_to_Struct'>RelFileNode</span></a> <span class='Declare_Member'>xnodes</span><span class='Delimiter'>[</span>FLEXIBLE_ARRAY_MEMBER<span class='Delimiter'>]; 
</span><a name="LN233"></a>} <span class='Declare_Typedef'>xl_xact_relfilenodes</span><span class='Delimiter'>; 
</span><a name="LN234"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MinSizeOfXactRelfilenodes</span> <a href="../c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="xact.h.html#LN229"><span class='Ref_to_Struct'>xl_xact_relfilenodes</span></a><span class='Delimiter'>, </span>xnodes<span class='Parentheses'>) 
</span> 
<a name="LN236"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_invals</span> 
<span class='Delimiter'>{ 
</span><a name="LN238"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nmsgs</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* number of shared inval msgs */ 
</span><a name="LN239"></a>    <a href="../storage/sinval.h.html#LN112"><span class='Ref_to_Typedef'>SharedInvalidationMessage</span></a> <span class='Declare_Member'>msgs</span><span class='Delimiter'>[</span>FLEXIBLE_ARRAY_MEMBER<span class='Delimiter'>]; 
</span><a name="LN240"></a>} <span class='Declare_Typedef'>xl_xact_invals</span><span class='Delimiter'>; 
</span><a name="LN241"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MinSizeOfXactInvals</span> <a href="../c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="xact.h.html#LN236"><span class='Ref_to_Struct'>xl_xact_invals</span></a><span class='Delimiter'>, </span>msgs<span class='Parentheses'>) 
</span> 
<a name="LN243"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_twophase</span> 
<span class='Delimiter'>{ 
</span><a name="LN245"></a>    <a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Member'>xid</span><span class='Delimiter'>; 
</span><a name="LN246"></a>} <span class='Declare_Typedef'>xl_xact_twophase</span><span class='Delimiter'>; 
</span> 
<a name="LN248"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_origin</span> 
<span class='Delimiter'>{ 
</span><a name="LN250"></a>    <a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a>  <span class='Declare_Member'>origin_lsn</span><span class='Delimiter'>; 
</span><a name="LN251"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>origin_timestamp</span><span class='Delimiter'>; 
</span><a name="LN252"></a>} <span class='Declare_Typedef'>xl_xact_origin</span><span class='Delimiter'>; 
</span> 
<a name="LN254"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_commit</span> 
<span class='Delimiter'>{ 
</span><a name="LN256"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>xact_time</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* time of commit */ 
</span> 
    <span class='Comment_Multi_Line'>/* xl_xact_xinfo follows if XLOG_XACT_HAS_INFO */ 
</span>    <span class='Comment_Multi_Line'>/* xl_xact_dbinfo follows if XINFO_HAS_DBINFO */ 
</span>    <span class='Comment_Multi_Line'>/* xl_xact_subxacts follows if XINFO_HAS_SUBXACT */ 
</span>    <span class='Comment_Multi_Line'>/* xl_xact_relfilenodes follows if XINFO_HAS_RELFILENODES */ 
</span>    <span class='Comment_Multi_Line'>/* xl_xact_invals follows if XINFO_HAS_INVALS */ 
</span>    <span class='Comment_Multi_Line'>/* xl_xact_twophase follows if XINFO_HAS_TWOPHASE */ 
</span>    <span class='Comment_Multi_Line'>/* xl_xact_origin follows if XINFO_HAS_ORIGIN, stored unaligned! */ 
</span><a name="LN265"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>xl_xact_commit</span><span class='Delimiter'>; 
</span><a name="LN266"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MinSizeOfXactCommit</span> <span class='Parentheses'>(</span><a href="../c.h.html#LN554"><span class='Ref_to_Macro'>offsetof</span></a><span class='Parentheses'>(</span><a href="xact.h.html#LN254"><span class='Ref_to_Struct'>xl_xact_commit</span></a><span class='Delimiter'>, </span>xact_time<span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a><span class='Parentheses'>))</span> 
 
<a name="LN268"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_abort</span> 
<span class='Delimiter'>{ 
</span><a name="LN270"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>xact_time</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* time of abort */ 
</span> 
    <span class='Comment_Multi_Line'>/* xl_xact_xinfo follows if XLOG_XACT_HAS_INFO */ 
</span>    <span class='Comment_Multi_Line'>/* No db_info required */ 
</span>    <span class='Comment_Multi_Line'>/* xl_xact_subxacts follows if HAS_SUBXACT */ 
</span>    <span class='Comment_Multi_Line'>/* xl_xact_relfilenodes follows if HAS_RELFILENODES */ 
</span>    <span class='Comment_Multi_Line'>/* No invalidation messages needed. */ 
</span>    <span class='Comment_Multi_Line'>/* xl_xact_twophase follows if XINFO_HAS_TWOPHASE */ 
</span><a name="LN278"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>xl_xact_abort</span><span class='Delimiter'>; 
</span><a name="LN279"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MinSizeOfXactAbort</span> <span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="xact.h.html#LN268"><span class='Ref_to_Struct'>xl_xact_abort</span></a><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Commit/Abort records in the above form are a bit verbose to parse, so 
 * there's a deconstructed versions generated by ParseCommit/AbortRecord() for 
 * easier consumption. 
 */ 
</span><a name="LN286"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_parsed_commit</span> 
<span class='Delimiter'>{ 
</span><a name="LN288"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>xact_time</span><span class='Delimiter'>; 
</span> 
<a name="LN290"></a>    <a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>xinfo</span><span class='Delimiter'>; 
</span> 
<a name="LN292"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>dbId</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* MyDatabaseId */ 
</span><a name="LN293"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>tsId</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* MyDatabaseTableSpace */ 
</span> 
<a name="LN295"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nsubxacts</span><span class='Delimiter'>; 
</span><a name="LN296"></a>    <a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Operator'>*</span><span class='Declare_Member'>subxacts</span><span class='Delimiter'>; 
</span> 
<a name="LN298"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nrels</span><span class='Delimiter'>; 
</span><a name="LN299"></a>    <a href="../storage/relfilenode.h.html#LN56"><span class='Ref_to_Struct'>RelFileNode</span></a> <span class='Operator'>*</span><span class='Declare_Member'>xnodes</span><span class='Delimiter'>; 
</span> 
<a name="LN301"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nmsgs</span><span class='Delimiter'>; 
</span><a name="LN302"></a>    <a href="../storage/sinval.h.html#LN112"><span class='Ref_to_Typedef'>SharedInvalidationMessage</span></a> <span class='Operator'>*</span><span class='Declare_Member'>msgs</span><span class='Delimiter'>; 
</span> 
<a name="LN304"></a>    <a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Member'>twophase_xid</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* only for 2PC */ 
</span> 
<a name="LN306"></a>    <a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a>  <span class='Declare_Member'>origin_lsn</span><span class='Delimiter'>; 
</span><a name="LN307"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>origin_timestamp</span><span class='Delimiter'>; 
</span><a name="LN308"></a>}<span class='Auto_Annotations'> &laquo; end xl_xact_parsed_commit &raquo; </span> <span class='Declare_Typedef'>xl_xact_parsed_commit</span><span class='Delimiter'>; 
</span> 
<a name="LN310"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>xl_xact_parsed_abort</span> 
<span class='Delimiter'>{ 
</span><a name="LN312"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>xact_time</span><span class='Delimiter'>; 
</span><a name="LN313"></a>    <a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>xinfo</span><span class='Delimiter'>; 
</span> 
<a name="LN315"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nsubxacts</span><span class='Delimiter'>; 
</span><a name="LN316"></a>    <a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Operator'>*</span><span class='Declare_Member'>subxacts</span><span class='Delimiter'>; 
</span> 
<a name="LN318"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nrels</span><span class='Delimiter'>; 
</span><a name="LN319"></a>    <a href="../storage/relfilenode.h.html#LN56"><span class='Ref_to_Struct'>RelFileNode</span></a> <span class='Operator'>*</span><span class='Declare_Member'>xnodes</span><span class='Delimiter'>; 
</span> 
<a name="LN321"></a>    <a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Member'>twophase_xid</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* only for 2PC */ 
</span><a name="LN322"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>xl_xact_parsed_abort</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* ---------------- 
 *      extern definitions 
 * ---------------- 
 */ 
</span><a name="LN329"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>IsTransactionState</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN330"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>IsAbortedTransactionBlockState</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN331"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Prototype'>GetTopTransactionId</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN332"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Prototype'>GetTopTransactionIdIfAny</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN333"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Prototype'>GetCurrentTransactionId</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN334"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Prototype'>GetCurrentTransactionIdIfAny</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN335"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Prototype'>GetStableLatestTransactionId</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN336"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN400"><span class='Ref_to_Typedef'>SubTransactionId</span></a> <span class='Declare_Prototype'>GetCurrentSubTransactionId</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN337"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>MarkCurrentTransactionIdLoggedIfAny</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN338"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>SubTransactionIsActive</span><span class='Parentheses'>(</span><a href="../c.h.html#LN400"><span class='Ref_to_Typedef'>SubTransactionId</span></a> <span class='Declare_Parameter'>subxid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN339"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN410"><span class='Ref_to_Typedef'>CommandId</span></a> <span class='Declare_Prototype'>GetCurrentCommandId</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>used</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN340"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Prototype'>GetCurrentTransactionStartTimestamp</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN341"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Prototype'>GetCurrentStatementStartTimestamp</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN342"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Prototype'>GetCurrentTransactionStopTimestamp</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN343"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>SetCurrentStatementStartTimestamp</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN344"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>GetCurrentTransactionNestLevel</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN345"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>TransactionIdIsCurrentTransactionId</span><span class='Parentheses'>(</span><a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>xid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN346"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>CommandCounterIncrement</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN347"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>ForceSyncCommit</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN348"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>StartTransactionCommand</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN349"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>CommitTransactionCommand</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN350"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>AbortCurrentTransaction</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN351"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>BeginTransactionBlock</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN352"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>EndTransactionBlock</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN353"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>PrepareTransactionBlock</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>gid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN354"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>UserAbortTransactionBlock</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN355"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>ReleaseSavepoint</span><span class='Parentheses'>(</span><a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>options</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN356"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>DefineSavepoint</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>name</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN357"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>RollbackToSavepoint</span><span class='Parentheses'>(</span><a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>options</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN358"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>BeginInternalSubTransaction</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>name</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN359"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>ReleaseCurrentSubTransaction</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN360"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>RollbackAndReleaseCurrentSubTransaction</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN361"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>IsSubTransaction</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN362"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a> <span class='Declare_Prototype'>EstimateTransactionStateSpace</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN363"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>SerializeTransactionState</span><span class='Parentheses'>(</span><a href="../c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a> <span class='Declare_Parameter'>maxsize</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>start_address</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN364"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>StartParallelWorkerTransaction</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>tstatespace</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN365"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>EndParallelWorkerTransaction</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN366"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>IsTransactionBlock</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN367"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>IsTransactionOrTransactionBlock</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN368"></a><span class='Keyword'>extern char </span><span class='Declare_Prototype'>TransactionBlockStatusCode</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN369"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>AbortOutOfAnyTransaction</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN370"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>PreventTransactionChain</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isTopLevel</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>stmtType</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN371"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>RequireTransactionChain</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isTopLevel</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>stmtType</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN372"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>WarnNoTransactionChain</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isTopLevel</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>stmtType</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN373"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>IsInTransactionChain</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isTopLevel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN374"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>RegisterXactCallback</span><span class='Parentheses'>(</span><a href="xact.h.html#LN110"><span class='Ref_to_Typedef'>XactCallback</span></a> <span class='Declare_Parameter'>callback</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>arg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN375"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>UnregisterXactCallback</span><span class='Parentheses'>(</span><a href="xact.h.html#LN110"><span class='Ref_to_Typedef'>XactCallback</span></a> <span class='Declare_Parameter'>callback</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>arg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN376"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>RegisterSubXactCallback</span><span class='Parentheses'>(</span><a href="xact.h.html#LN120"><span class='Ref_to_Typedef'>SubXactCallback</span></a> <span class='Declare_Parameter'>callback</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>arg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN377"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>UnregisterSubXactCallback</span><span class='Parentheses'>(</span><a href="xact.h.html#LN120"><span class='Ref_to_Typedef'>SubXactCallback</span></a> <span class='Declare_Parameter'>callback</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>arg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN379"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>xactGetCommittedChildren</span><span class='Parentheses'>(</span><a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>ptr</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN381"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>XactLogCommitRecord</span><span class='Parentheses'>(</span><a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Parameter'>commit_time</span><span class='Delimiter'>, 
</span><a name="LN382"></a>                    <span class='Keyword'>int </span><span class='Declare_Parameter'>nsubxacts</span><span class='Delimiter'>, </span><a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subxacts</span><span class='Delimiter'>, 
</span><a name="LN383"></a>                    <span class='Keyword'>int </span><span class='Declare_Parameter'>nrels</span><span class='Delimiter'>, </span><a href="../storage/relfilenode.h.html#LN56"><span class='Ref_to_Struct'>RelFileNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rels</span><span class='Delimiter'>, 
</span><a name="LN384"></a>                    <span class='Keyword'>int </span><span class='Declare_Parameter'>nmsgs</span><span class='Delimiter'>, </span><a href="../storage/sinval.h.html#LN112"><span class='Ref_to_Typedef'>SharedInvalidationMessage</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>msgs</span><span class='Delimiter'>, 
</span><a name="LN385"></a>                    <span class='Keyword'>bool </span><span class='Declare_Parameter'>relcacheInval</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>forceSync</span><span class='Delimiter'>, 
</span><a name="LN386"></a>                    <span class='Keyword'>int </span><span class='Declare_Parameter'>xactflags</span><span class='Delimiter'>, 
</span><a name="LN387"></a>                    <a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>twophase_xid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN389"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>XactLogAbortRecord</span><span class='Parentheses'>(</span><a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Parameter'>abort_time</span><span class='Delimiter'>, 
</span><a name="LN390"></a>                   <span class='Keyword'>int </span><span class='Declare_Parameter'>nsubxacts</span><span class='Delimiter'>, </span><a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>subxacts</span><span class='Delimiter'>, 
</span><a name="LN391"></a>                   <span class='Keyword'>int </span><span class='Declare_Parameter'>nrels</span><span class='Delimiter'>, </span><a href="../storage/relfilenode.h.html#LN56"><span class='Ref_to_Struct'>RelFileNode</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rels</span><span class='Delimiter'>, 
</span><a name="LN392"></a>                   <span class='Keyword'>int </span><span class='Declare_Parameter'>xactflags</span><span class='Delimiter'>, </span><a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Declare_Parameter'>twophase_xid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN393"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>xact_redo</span><span class='Parentheses'>(</span><a href="xlogreader.h.html#LN68"><span class='Ref_to_Struct'>XLogReaderState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>record</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* xactdesc.c */ 
</span><a name="LN396"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>xact_desc</span><span class='Parentheses'>(</span><a href="../lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="xlogreader.h.html#LN68"><span class='Ref_to_Struct'>XLogReaderState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>record</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN397"></a><span class='Keyword'>extern const char </span><span class='Operator'>*</span><span class='Declare_Prototype'>xact_identify</span><span class='Parentheses'>(</span><a href="../c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a> <span class='Declare_Parameter'>info</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* also in xactdesc.c, so they can be shared between front/backend code */ 
</span><a name="LN400"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>ParseCommitRecord</span><span class='Parentheses'>(</span><a href="../c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a> <span class='Declare_Parameter'>info</span><span class='Delimiter'>, </span><a href="xact.h.html#LN254"><span class='Ref_to_Struct'>xl_xact_commit</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>xlrec</span><span class='Delimiter'>, </span><a href="xact.h.html#LN286"><span class='Ref_to_Struct'>xl_xact_parsed_commit</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parsed</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN401"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>ParseAbortRecord</span><span class='Parentheses'>(</span><a href="../c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a> <span class='Declare_Parameter'>info</span><span class='Delimiter'>, </span><a href="xact.h.html#LN268"><span class='Ref_to_Struct'>xl_xact_abort</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>xlrec</span><span class='Delimiter'>, </span><a href="xact.h.html#LN310"><span class='Ref_to_Struct'>xl_xact_parsed_abort</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>parsed</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN403"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>EnterParallelMode</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN404"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>ExitParallelMode</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN405"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>IsInParallelMode</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* XACT_H */ 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>