<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\include\access\xlog.h</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\include\access\xlog.h</b></p></td>
<td align='right'>
Wed Jun 14 08:26:03 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/* 
 * xlog.h 
 * 
 * PostgreSQL write-ahead log manager 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * src/include/access/xlog.h 
 */ 
</span><span class='Directive'>#ifndef</span> <a href="xlog.h.html#LN11"><span class='Ref_to_Const'>XLOG_H</span></a> 
<a name="LN11"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XLOG_H</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/rmgr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/xlogdefs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/xloginsert.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/xlogreader.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"datatype/timestamp.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"lib/stringinfo.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/pg_list.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/fd.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* Sync methods */ 
</span><a name="LN24"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SYNC_METHOD_FSYNC</span>       <span class='Number'>0</span> 
<a name="LN25"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SYNC_METHOD_FDATASYNC</span>   <span class='Number'>1</span> 
<a name="LN26"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SYNC_METHOD_OPEN</span>        <span class='Number'>2</span>       <span class='Comment_Single_Line'>/* for O_SYNC */ 
</span><a name="LN27"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SYNC_METHOD_FSYNC_WRITETHROUGH</span>  <span class='Number'>3</span> 
<a name="LN28"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>SYNC_METHOD_OPEN_DSYNC</span>  <span class='Number'>4</span>       <span class='Comment_Single_Line'>/* for O_DSYNC */ 
</span><a name="LN29"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>sync_method</span><span class='Delimiter'>; 
</span> 
<a name="LN31"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/sqlca.h.html#LN5"><span class='Ref_to_Const'>PGDLLIMPORT</span></a> <a href="xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a> <span class='Declare_Var'>ThisTimeLineID</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* current TLI */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Prior to 8.4, all activity during recovery was carried out by the startup 
 * process. This local variable continues to be used in many parts of the 
 * code to indicate actions taken by RecoveryManagers. Other processes that 
 * potentially perform work during recovery should check RecoveryInProgress(). 
 * See XLogCtl notes in xlog.c. 
 */ 
</span><a name="LN40"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>InRecovery</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Like InRecovery, standbyState is only valid in the startup process. 
 * In all other processes it will have the value STANDBY_DISABLED (so 
 * InHotStandby will read as FALSE). 
 * 
 * In DISABLED state, we're performing crash recovery or hot standby was 
 * disabled in postgresql.conf. 
 * 
 * In INITIALIZED state, we've run InitRecoveryTransactionEnvironment, but 
 * we haven't yet processed a RUNNING_XACTS or shutdown-checkpoint WAL record 
 * to initialize our master-transaction tracking system. 
 * 
 * When the transaction tracking is initialized, we enter the SNAPSHOT_PENDING 
 * state. The tracked information might still be incomplete, so we can't allow 
 * connections yet, but redo functions must update the in-memory state when 
 * appropriate. 
 * 
 * In SNAPSHOT_READY mode, we have full knowledge of transactions that are 
 * (or were) running in the master at the current WAL location. Snapshots 
 * can be taken, and read-only queries can be run. 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN65"></a>    <span class='Declare_Enum_Const'>STANDBY_DISABLED</span><span class='Delimiter'>, 
</span><a name="LN66"></a>    <span class='Declare_Enum_Const'>STANDBY_INITIALIZED</span><span class='Delimiter'>, 
</span><a name="LN67"></a>    <span class='Declare_Enum_Const'>STANDBY_SNAPSHOT_PENDING</span><span class='Delimiter'>, 
</span><a name="LN68"></a>    <span class='Declare_Enum_Const'>STANDBY_SNAPSHOT_READY</span> 
<a name="LN69"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>HotStandbyState</span><span class='Delimiter'>; 
</span> 
<a name="LN71"></a><span class='Keyword'>extern </span><a href="xlog.h.html#LN63"><span class='Ref_to_Typedef'>HotStandbyState</span></a> <span class='Declare_Var'>standbyState</span><span class='Delimiter'>; 
</span> 
<a name="LN73"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>InHotStandby</span> <span class='Parentheses'>(</span><a href="../../backend/access/transam/xlog.c.html#LN194"><span class='Ref_to_Global_Var'>standbyState</span></a> <span class='Operator'>&GT;= </span><a href="xlog.h.html#LN67"><span class='Ref_to_EnumConst'>STANDBY_SNAPSHOT_PENDING</span></a><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Recovery target type. 
 * Only set during a Point in Time recovery, not when standby_mode = on 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN81"></a>    <span class='Declare_Enum_Const'>RECOVERY_TARGET_UNSET</span><span class='Delimiter'>, 
</span><a name="LN82"></a>    <span class='Declare_Enum_Const'>RECOVERY_TARGET_XID</span><span class='Delimiter'>, 
</span><a name="LN83"></a>    <span class='Declare_Enum_Const'>RECOVERY_TARGET_TIME</span><span class='Delimiter'>, 
</span><a name="LN84"></a>    <span class='Declare_Enum_Const'>RECOVERY_TARGET_NAME</span><span class='Delimiter'>, 
</span><a name="LN85"></a>    <span class='Declare_Enum_Const'>RECOVERY_TARGET_LSN</span><span class='Delimiter'>, 
</span><a name="LN86"></a>    <span class='Declare_Enum_Const'>RECOVERY_TARGET_IMMEDIATE</span> 
<a name="LN87"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>RecoveryTargetType</span><span class='Delimiter'>; 
</span> 
<a name="LN89"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Var'>ProcLastRecPtr</span><span class='Delimiter'>; 
</span><a name="LN90"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Var'>XactLastRecEnd</span><span class='Delimiter'>; 
</span><a name="LN91"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/sqlca.h.html#LN5"><span class='Ref_to_Const'>PGDLLIMPORT</span></a> <a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Var'>XactLastCommitEnd</span><span class='Delimiter'>; 
</span> 
<a name="LN93"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>reachedConsistency</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* these variables are GUC parameters related to XLOG */ 
</span><a name="LN96"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>min_wal_size_mb</span><span class='Delimiter'>; 
</span><a name="LN97"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>max_wal_size_mb</span><span class='Delimiter'>; 
</span><a name="LN98"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>wal_keep_segments</span><span class='Delimiter'>; 
</span><a name="LN99"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>XLOGbuffers</span><span class='Delimiter'>; 
</span><a name="LN100"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>XLogArchiveTimeout</span><span class='Delimiter'>; 
</span><a name="LN101"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>wal_retrieve_retry_interval</span><span class='Delimiter'>; 
</span><a name="LN102"></a><span class='Keyword'>extern char </span><span class='Operator'>*</span><span class='Declare_Var'>XLogArchiveCommand</span><span class='Delimiter'>; 
</span><a name="LN103"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>EnableHotStandby</span><span class='Delimiter'>; 
</span><a name="LN104"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>fullPageWrites</span><span class='Delimiter'>; 
</span><a name="LN105"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>wal_log_hints</span><span class='Delimiter'>; 
</span><a name="LN106"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>wal_compression</span><span class='Delimiter'>; 
</span><a name="LN107"></a><span class='Keyword'>extern bool </span><span class='Operator'>*</span><span class='Declare_Var'>wal_consistency_checking</span><span class='Delimiter'>; 
</span><a name="LN108"></a><span class='Keyword'>extern char </span><span class='Operator'>*</span><span class='Declare_Var'>wal_consistency_checking_string</span><span class='Delimiter'>; 
</span><a name="LN109"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>log_checkpoints</span><span class='Delimiter'>; 
</span> 
<a name="LN111"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>CheckPointSegments</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Archive modes */ 
</span><a name="LN114"></a><span class='Control'>typedef</span> <span class='Control'>enum</span> <span class='Declare_Enum'>ArchiveMode</span> 
<span class='Delimiter'>{ 
</span><a name="LN116"></a>    <span class='Declare_Enum_Const'>ARCHIVE_MODE_OFF</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>,</span>       <span class='Comment_Single_Line'>/* disabled */ 
</span><a name="LN117"></a>    <span class='Declare_Enum_Const'>ARCHIVE_MODE_ON</span><span class='Delimiter'>,</span>            <span class='Comment_Single_Line'>/* enabled while server is running normally */ 
</span><a name="LN118"></a>    <span class='Declare_Enum_Const'>ARCHIVE_MODE_ALWAYS</span>         <span class='Comment_Single_Line'>/* enabled always (even during recovery) */ 
</span><a name="LN119"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>ArchiveMode</span><span class='Delimiter'>; 
</span><a name="LN120"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>XLogArchiveMode</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* WAL levels */ 
</span><a name="LN123"></a><span class='Control'>typedef</span> <span class='Control'>enum</span> <span class='Declare_Enum'>WalLevel</span> 
<span class='Delimiter'>{ 
</span><a name="LN125"></a>    <span class='Declare_Enum_Const'>WAL_LEVEL_MINIMAL</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN126"></a>    <span class='Declare_Enum_Const'>WAL_LEVEL_REPLICA</span><span class='Delimiter'>, 
</span><a name="LN127"></a>    <span class='Declare_Enum_Const'>WAL_LEVEL_LOGICAL</span> 
<a name="LN128"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>WalLevel</span><span class='Delimiter'>; 
</span> 
<a name="LN130"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/sqlca.h.html#LN5"><span class='Ref_to_Const'>PGDLLIMPORT</span></a> <span class='Keyword'>int </span><span class='Declare_Var'>wal_level</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Is WAL archiving enabled (always or only while server is running normally)? */ 
</span><a name="LN133"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>XLogArchivingActive</span><span class='Parentheses'>() </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="../c.h.html#LN675"><span class='Ref_to_Macro'>AssertMacro</span></a><span class='Parentheses'>(</span><a href="../../backend/access/transam/xlog.c.html#LN93"><span class='Ref_to_Global_Var'>XLogArchiveMode</span></a> <span class='Operator'>== </span><a href="xlog.h.html#LN116"><span class='Ref_to_EnumConst'>ARCHIVE_MODE_OFF</span></a> <span class='Operator'>|| </span><a href="../../backend/access/transam/xlog.c.html#LN103"><span class='Ref_to_Global_Var'>wal_level</span></a> <span class='Operator'>&GT;= </span><a href="xlog.h.html#LN126"><span class='Ref_to_EnumConst'>WAL_LEVEL_REPLICA</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../backend/access/transam/xlog.c.html#LN93"><span class='Ref_to_Global_Var'>XLogArchiveMode</span></a> <span class='Operator'>&GT; </span><a href="xlog.h.html#LN116"><span class='Ref_to_EnumConst'>ARCHIVE_MODE_OFF</span></a><span class='Parentheses'>)</span> 
<span class='Comment_Multi_Line'>/* Is WAL archiving enabled always (even during recovery)? */ 
</span><a name="LN136"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>XLogArchivingAlways</span><span class='Parentheses'>() </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="../c.h.html#LN675"><span class='Ref_to_Macro'>AssertMacro</span></a><span class='Parentheses'>(</span><a href="../../backend/access/transam/xlog.c.html#LN93"><span class='Ref_to_Global_Var'>XLogArchiveMode</span></a> <span class='Operator'>== </span><a href="xlog.h.html#LN116"><span class='Ref_to_EnumConst'>ARCHIVE_MODE_OFF</span></a> <span class='Operator'>|| </span><a href="../../backend/access/transam/xlog.c.html#LN103"><span class='Ref_to_Global_Var'>wal_level</span></a> <span class='Operator'>&GT;= </span><a href="xlog.h.html#LN126"><span class='Ref_to_EnumConst'>WAL_LEVEL_REPLICA</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../../backend/access/transam/xlog.c.html#LN93"><span class='Ref_to_Global_Var'>XLogArchiveMode</span></a> <span class='Operator'>== </span><a href="xlog.h.html#LN118"><span class='Ref_to_EnumConst'>ARCHIVE_MODE_ALWAYS</span></a><span class='Parentheses'>)</span> 
<a name="LN138"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>XLogArchiveCommandSet</span><span class='Parentheses'>() (</span><a href="../../backend/access/transam/xlog.c.html#LN94"><span class='Ref_to_Global_Var'>XLogArchiveCommand</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Is WAL-logging necessary for archival or log-shipping, or can we skip 
 * WAL-logging if we fsync() the data before committing instead? 
 */ 
</span><a name="LN144"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>XLogIsNeeded</span><span class='Parentheses'>() (</span><a href="../../backend/access/transam/xlog.c.html#LN103"><span class='Ref_to_Global_Var'>wal_level</span></a> <span class='Operator'>&GT;= </span><a href="xlog.h.html#LN126"><span class='Ref_to_EnumConst'>WAL_LEVEL_REPLICA</span></a><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Is a full-page image needed for hint bit updates? 
 * 
 * Normally, we don't WAL-log hint bit updates, but if checksums are enabled, 
 * we have to protect them against torn page writes.  When you only set 
 * individual bits on a page, it's still consistent no matter what combination 
 * of the bits make it to disk, but the checksum wouldn't match.  Also WAL-log 
 * them if forced by wal_log_hints=on. 
 */ 
</span><a name="LN155"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>XLogHintBitIsNeeded</span><span class='Parentheses'>() (</span><a href="xlog.h.html#LN259"><span class='Ref_to_Proto'>DataChecksumsEnabled</span></a><span class='Parentheses'>() </span><span class='Operator'>|| </span><a href="../../backend/access/transam/xlog.c.html#LN97"><span class='Ref_to_Global_Var'>wal_log_hints</span></a><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* Do we need to WAL-log information required only for Hot Standby and logical replication? */ 
</span><a name="LN158"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>XLogStandbyInfoActive</span><span class='Parentheses'>() (</span><a href="../../backend/access/transam/xlog.c.html#LN103"><span class='Ref_to_Global_Var'>wal_level</span></a> <span class='Operator'>&GT;= </span><a href="xlog.h.html#LN126"><span class='Ref_to_EnumConst'>WAL_LEVEL_REPLICA</span></a><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* Do we need to WAL-log information required only for logical replication? */ 
</span><a name="LN161"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>XLogLogicalInfoActive</span><span class='Parentheses'>() (</span><a href="../../backend/access/transam/xlog.c.html#LN103"><span class='Ref_to_Global_Var'>wal_level</span></a> <span class='Operator'>&GT;= </span><a href="xlog.h.html#LN127"><span class='Ref_to_EnumConst'>WAL_LEVEL_LOGICAL</span></a><span class='Parentheses'>) 
</span> 
<span class='Directive'>#ifdef</span> WAL_DEBUG 
<a name="LN164"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>XLOG_DEBUG</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
<span class='Comment_Multi_Line'>/* 
 * OR-able request flag bits for checkpoints.  The "cause" bits are used only 
 * for logging purposes.  Note: the flags must be defined so that it's 
 * sensible to OR together request flags arising from different requestors. 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* These directly affect the behavior of CreateCheckPoint and subsidiaries */ 
</span><a name="LN174"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>CHECKPOINT_IS_SHUTDOWN</span>  <span class='Number'>0x0001</span>  <span class='Comment_Single_Line'>/* Checkpoint is for shutdown */ 
</span><a name="LN175"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>CHECKPOINT_END_OF_RECOVERY</span>  <span class='Number'>0x0002</span>      <span class='Comment_Multi_Line'>/* Like shutdown checkpoint, 
                                                 * but issued at end of WAL 
                                                 * recovery */ 
</span><a name="LN178"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>CHECKPOINT_IMMEDIATE</span>    <span class='Number'>0x0004</span>  <span class='Comment_Single_Line'>/* Do it without delays */ 
</span><a name="LN179"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>CHECKPOINT_FORCE</span>        <span class='Number'>0x0008</span>  <span class='Comment_Single_Line'>/* Force even if no activity */ 
</span><a name="LN180"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>CHECKPOINT_FLUSH_ALL</span>    <span class='Number'>0x0010</span>  <span class='Comment_Multi_Line'>/* Flush all pages, including those 
                                         * belonging to unlogged tables */ 
/* These are important to RequestCheckpoint */ 
</span><a name="LN183"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>CHECKPOINT_WAIT</span>         <span class='Number'>0x0020</span>  <span class='Comment_Single_Line'>/* Wait for completion */ 
</span><span class='Comment_Multi_Line'>/* These indicate the cause of a checkpoint request */ 
</span><a name="LN185"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>CHECKPOINT_CAUSE_XLOG</span>   <span class='Number'>0x0040</span>  <span class='Comment_Single_Line'>/* XLOG consumption */ 
</span><a name="LN186"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>CHECKPOINT_CAUSE_TIME</span>   <span class='Number'>0x0080</span>  <span class='Comment_Single_Line'>/* Elapsed time */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Flag bits for the record being inserted, set using XLogSetRecordFlags(). 
 */ 
</span><a name="LN191"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XLOG_INCLUDE_ORIGIN</span>     <span class='Number'>0x01</span>    <span class='Comment_Single_Line'>/* include the replication origin */ 
</span><a name="LN192"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>XLOG_MARK_UNIMPORTANT</span>   <span class='Number'>0x02</span>    <span class='Comment_Single_Line'>/* record not important for durability */ 
</span> 
 
<span class='Comment_Multi_Line'>/* Checkpoint statistics */ 
</span><a name="LN196"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>CheckpointStatsData</span> 
<span class='Delimiter'>{ 
</span><a name="LN198"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>ckpt_start_t</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* start of checkpoint */ 
</span><a name="LN199"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>ckpt_write_t</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* start of flushing buffers */ 
</span><a name="LN200"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>ckpt_sync_t</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* start of fsyncs */ 
</span><a name="LN201"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>ckpt_sync_end_t</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* end of fsyncs */ 
</span><a name="LN202"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>ckpt_end_t</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* end of checkpoint */ 
</span> 
<a name="LN204"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ckpt_bufs_written</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* # of buffers written */ 
</span> 
<a name="LN206"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ckpt_segs_added</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* # of new xlog segments created */ 
</span><a name="LN207"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ckpt_segs_removed</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* # of xlog segments deleted */ 
</span><a name="LN208"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ckpt_segs_recycled</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* # of xlog segments recycled */ 
</span> 
<a name="LN210"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ckpt_sync_rels</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* # of relations synced */ 
</span><a name="LN211"></a>    <a href="../c.h.html#LN297"><span class='Ref_to_Typedef'>uint64</span></a>      <span class='Declare_Member'>ckpt_longest_sync</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* Longest sync for one relation */ 
</span><a name="LN212"></a>    <a href="../c.h.html#LN297"><span class='Ref_to_Typedef'>uint64</span></a>      <span class='Declare_Member'>ckpt_agg_sync_time</span><span class='Delimiter'>;</span>     <span class='Comment_Multi_Line'>/* The sum of all the individual sync 
                                         * times, which is not necessarily the 
                                         * same as the total elapsed time for 
                                         * the entire sync phase. */ 
</span><a name="LN216"></a><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end CheckpointStatsData &raquo; </span> <span class='Declare_Typedef'>CheckpointStatsData</span><span class='Delimiter'>; 
</span> 
<a name="LN218"></a><span class='Keyword'>extern </span><a href="xlog.h.html#LN196"><span class='Ref_to_Struct'>CheckpointStatsData</span></a> <span class='Declare_Var'>CheckpointStats</span><span class='Delimiter'>; 
</span> 
<span class='Control'>struct</span> <a href="xlog_internal.h.html#LN240"><span class='Ref_to_Struct'>XLogRecData</span></a><span class='Delimiter'>; 
</span> 
<a name="LN222"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>XLogInsertRecord</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="xlog_internal.h.html#LN240"><span class='Ref_to_Struct'>XLogRecData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rdata</span><span class='Delimiter'>, 
</span><a name="LN223"></a>                 <a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Parameter'>fpw_lsn</span><span class='Delimiter'>, 
</span><a name="LN224"></a>                 <a href="../c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a> <span class='Declare_Parameter'>flags</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN225"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>XLogFlush</span><span class='Parentheses'>(</span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Parameter'>RecPtr</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN226"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>XLogBackgroundFlush</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN227"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>XLogNeedsFlush</span><span class='Parentheses'>(</span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Parameter'>RecPtr</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN228"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>XLogFileInit</span><span class='Parentheses'>(</span><a href="xlogdefs.h.html#LN33"><span class='Ref_to_Typedef'>XLogSegNo</span></a> <span class='Declare_Parameter'>segno</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>use_existent</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>use_lock</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN229"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>XLogFileOpen</span><span class='Parentheses'>(</span><a href="xlogdefs.h.html#LN33"><span class='Ref_to_Typedef'>XLogSegNo</span></a> <span class='Declare_Parameter'>segno</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN231"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>CheckXLogRemoved</span><span class='Parentheses'>(</span><a href="xlogdefs.h.html#LN33"><span class='Ref_to_Typedef'>XLogSegNo</span></a> <span class='Declare_Parameter'>segno</span><span class='Delimiter'>, </span><a href="xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a> <span class='Declare_Parameter'>tli</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN232"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN33"><span class='Ref_to_Typedef'>XLogSegNo</span></a> <span class='Declare_Prototype'>XLogGetLastRemovedSegno</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN233"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>XLogSetAsyncXactLSN</span><span class='Parentheses'>(</span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Parameter'>record</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN234"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>XLogSetReplicationSlotMinimumLSN</span><span class='Parentheses'>(</span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Parameter'>lsn</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN236"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>xlog_redo</span><span class='Parentheses'>(</span><a href="xlogreader.h.html#LN68"><span class='Ref_to_Struct'>XLogReaderState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>record</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN237"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>xlog_desc</span><span class='Parentheses'>(</span><a href="../lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, </span><a href="xlogreader.h.html#LN68"><span class='Ref_to_Struct'>XLogReaderState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>record</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN238"></a><span class='Keyword'>extern const char </span><span class='Operator'>*</span><span class='Declare_Prototype'>xlog_identify</span><span class='Parentheses'>(</span><a href="../c.h.html#LN265"><span class='Ref_to_Typedef'>uint8</span></a> <span class='Declare_Parameter'>info</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN240"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>issue_xlog_fsync</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>fd</span><span class='Delimiter'>, </span><a href="xlogdefs.h.html#LN33"><span class='Ref_to_Typedef'>XLogSegNo</span></a> <span class='Declare_Parameter'>segno</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN242"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>RecoveryInProgress</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN243"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>HotStandbyActive</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN244"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>HotStandbyActiveInReplay</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN245"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>XLogInsertAllowed</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN246"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>GetXLogReceiptTime</span><span class='Parentheses'>(</span><a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>rtime</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>fromStream</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN247"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>GetXLogReplayRecPtr</span><span class='Parentheses'>(</span><a href="xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>replayTLI</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN248"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>GetXLogInsertRecPtr</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN249"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>GetXLogWriteRecPtr</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN250"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>RecoveryIsPaused</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN251"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>SetRecoveryPause</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>recoveryPause</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN252"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Prototype'>GetLatestXTime</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN253"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Prototype'>GetCurrentChunkReplayStartTime</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN254"></a><span class='Keyword'>extern char </span><span class='Operator'>*</span><span class='Declare_Prototype'>XLogFileNameP</span><span class='Parentheses'>(</span><a href="xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a> <span class='Declare_Parameter'>tli</span><span class='Delimiter'>, </span><a href="xlogdefs.h.html#LN33"><span class='Ref_to_Typedef'>XLogSegNo</span></a> <span class='Declare_Parameter'>segno</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN256"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>UpdateControlFile</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN257"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN297"><span class='Ref_to_Typedef'>uint64</span></a> <span class='Declare_Prototype'>GetSystemIdentifier</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN258"></a><span class='Keyword'>extern char </span><span class='Operator'>*</span><span class='Declare_Prototype'>GetMockAuthenticationNonce</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN259"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>DataChecksumsEnabled</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN260"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>GetFakeLSNForUnloggedRel</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN261"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a> <span class='Declare_Prototype'>XLOGShmemSize</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN262"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>XLOGShmemInit</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN263"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>BootStrapXLOG</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN264"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>StartupXLOG</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN265"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>ShutdownXLOG</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>code</span><span class='Delimiter'>, </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>arg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN266"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>InitXLOGAccess</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN267"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>CreateCheckPoint</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN268"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>CreateRestartPoint</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>flags</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN269"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>XLogPutNextOid</span><span class='Parentheses'>(</span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>nextOid</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN270"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>XLogRestorePoint</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>rpName</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN271"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>UpdateFullPageWrites</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN272"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>GetFullPageWriteInfo</span><span class='Parentheses'>(</span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>RedoRecPtr_p</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>doPageWrites_p</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN273"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>GetRedoRecPtr</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN274"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>GetInsertRecPtr</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN275"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>GetFlushRecPtr</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN276"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>GetLastImportantRecPtr</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN277"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>GetNextXidAndEpoch</span><span class='Parentheses'>(</span><a href="../c.h.html#LN396"><span class='Ref_to_Typedef'>TransactionId</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>xid</span><span class='Delimiter'>, </span><a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>epoch</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN278"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>RemovePromoteSignalFiles</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN280"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>CheckPromoteSignal</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN281"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>WakeupRecovery</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN282"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>SetWalWriterSleeping</span><span class='Parentheses'>(</span><span class='Keyword'>bool </span><span class='Declare_Parameter'>sleeping</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN284"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>XLogRequestWalReceiverReply</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN286"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>assign_max_wal_size</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>newval</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>extra</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN287"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>assign_checkpoint_completion_target</span><span class='Parentheses'>(</span><span class='Keyword'>double </span><span class='Declare_Parameter'>newval</span><span class='Delimiter'>, </span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>extra</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Routines to start, stop, and get status of a base backup. 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Session-level status of base backups 
 * 
 * This is used in parallel with the shared memory status to control parallel 
 * execution of base backup functions for a given session, be it a backend 
 * dedicated to replication or a normal backend connected to a database. The 
 * update of the session-level status happens at the same time as the shared 
 * memory counters to keep a consistent global and local state of the backups 
 * running. 
 */ 
</span><a name="LN303"></a><span class='Control'>typedef</span> <span class='Control'>enum</span> <span class='Declare_Enum'>SessionBackupState</span> 
<span class='Delimiter'>{ 
</span><a name="LN305"></a>    <span class='Declare_Enum_Const'>SESSION_BACKUP_NONE</span><span class='Delimiter'>, 
</span><a name="LN306"></a>    <span class='Declare_Enum_Const'>SESSION_BACKUP_EXCLUSIVE</span><span class='Delimiter'>, 
</span><a name="LN307"></a>    <span class='Declare_Enum_Const'>SESSION_BACKUP_NON_EXCLUSIVE</span> 
<a name="LN308"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>SessionBackupState</span><span class='Delimiter'>; 
</span> 
<a name="LN310"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>do_pg_start_backup</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>backupidstr</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>fast</span><span class='Delimiter'>, 
</span><a name="LN311"></a>                <a href="xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>starttli_p</span><span class='Delimiter'>, </span><a href="../lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>labelfile</span><span class='Delimiter'>, </span><a href="../../port/dirent.c.html#LN24"><span class='Ref_to_Struct'>DIR</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>tblspcdir</span><span class='Delimiter'>, 
</span><a name="LN312"></a>              <a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>tablespaces</span><span class='Delimiter'>, </span><a href="../lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>tblspcmapfile</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>infotbssize</span><span class='Delimiter'>, 
</span><a name="LN313"></a>                   <span class='Keyword'>bool </span><span class='Declare_Parameter'>needtblspcmapfile</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN314"></a><span class='Keyword'>extern </span><a href="xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>do_pg_stop_backup</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>labelfile</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>waitforarchive</span><span class='Delimiter'>, 
</span><a name="LN315"></a>                  <a href="xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stoptli_p</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN316"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>do_pg_abort_backup</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN317"></a><span class='Keyword'>extern </span><a href="xlog.h.html#LN303"><span class='Ref_to_Enum'>SessionBackupState</span></a> <span class='Declare_Prototype'>get_backup_status</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* File path names (all relative to $PGDATA) */ 
</span><a name="LN320"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BACKUP_LABEL_FILE</span>       <span class='String'>"backup_label"</span> 
<a name="LN321"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>BACKUP_LABEL_OLD</span>        <span class='String'>"backup_label.old"</span> 
 
<a name="LN323"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TABLESPACE_MAP</span>          <span class='String'>"tablespace_map"</span> 
<a name="LN324"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TABLESPACE_MAP_OLD</span>      <span class='String'>"tablespace_map.old"</span> 
 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* XLOG_H */ 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>