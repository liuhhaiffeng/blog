<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\include\replication\walreceiver.h</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\include\replication\walreceiver.h</b></p></td>
<td align='right'>
Wed Jun 14 08:26:08 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * walreceiver.h 
 *    Exports from replication/walreceiverfuncs.c. 
 * 
 * Portions Copyright (c) 2010-2017, PostgreSQL Global Development Group 
 * 
 * src/include/replication/walreceiver.h 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Directive'>#ifndef</span> <a href="walreceiver.h.html#LN12"><span class='Ref_to_Const'>_WALRECEIVER_H</span></a> 
<a name="LN12"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>_WALRECEIVER_H</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/xlog.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/xlogdefs.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"fmgr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"replication/logicalproto.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"replication/walsender.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/latch.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/spin.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"pgtime.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/tuplestore.h"</span> 
 
<span class='Comment_Multi_Line'>/* user-settable parameters */ 
</span><a name="LN25"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>wal_receiver_status_interval</span><span class='Delimiter'>; 
</span><a name="LN26"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>wal_receiver_timeout</span><span class='Delimiter'>; 
</span><a name="LN27"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>hot_standby_feedback</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * MAXCONNINFO: maximum size of a connection string. 
 * 
 * XXX: Should this move to pg_config_manual.h? 
 */ 
</span><a name="LN34"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAXCONNINFO</span>     <span class='Number'>1024</span> 
 
<span class='Comment_Multi_Line'>/* Can we allow the standby to accept replication connection from another standby? */ 
</span><a name="LN37"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>AllowCascadeReplication</span><span class='Parentheses'>() (</span><a href="../../backend/access/transam/xlog.c.html#LN95"><span class='Ref_to_Global_Var'>EnableHotStandby</span></a> <span class='Operator'>&& </span><a href="../../backend/replication/walsender.c.html#LN119"><span class='Ref_to_Global_Var'>max_wal_senders</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Values for WalRcv-&GT;walRcvState. 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN44"></a>    <span class='Declare_Enum_Const'>WALRCV_STOPPED</span><span class='Delimiter'>,</span>             <span class='Comment_Single_Line'>/* stopped and mustn't start up again */ 
</span><a name="LN45"></a>    <span class='Declare_Enum_Const'>WALRCV_STARTING</span><span class='Delimiter'>,</span>            <span class='Comment_Multi_Line'>/* launched, but the process hasn't 
                                 * initialized yet */ 
</span><a name="LN47"></a>    <span class='Declare_Enum_Const'>WALRCV_STREAMING</span><span class='Delimiter'>,</span>           <span class='Comment_Single_Line'>/* walreceiver is streaming */ 
</span><a name="LN48"></a>    <span class='Declare_Enum_Const'>WALRCV_WAITING</span><span class='Delimiter'>,</span>             <span class='Comment_Single_Line'>/* stopped streaming, waiting for orders */ 
</span><a name="LN49"></a>    <span class='Declare_Enum_Const'>WALRCV_RESTARTING</span><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* asked to restart streaming */ 
</span><a name="LN50"></a>    <span class='Declare_Enum_Const'>WALRCV_STOPPING</span>             <span class='Comment_Single_Line'>/* requested to stop, but still running */ 
</span><a name="LN51"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>WalRcvState</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Shared memory area for management of walreceiver process */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * PID of currently active walreceiver process, its current state and 
     * start time (actually, the time at which it was requested to be 
     * started). 
     */ 
</span><a name="LN61"></a>    <a href="../port/win32.h.html#LN255"><span class='Ref_to_Typedef'>pid_t</span></a>       <span class='Declare_Member'>pid</span><span class='Delimiter'>; 
</span><a name="LN62"></a>    <a href="walreceiver.h.html#LN42"><span class='Ref_to_Typedef'>WalRcvState</span></a> <span class='Declare_Member'>walRcvState</span><span class='Delimiter'>; 
</span><a name="LN63"></a>    <a href="../pgtime.h.html#LN22"><span class='Ref_to_Typedef'>pg_time_t</span></a>   <span class='Declare_Member'>startTime</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * receiveStart and receiveStartTLI indicate the first byte position and 
     * timeline that will be received. When startup process starts the 
     * walreceiver, it sets these to the point where it wants the streaming to 
     * begin. 
     */ 
</span><a name="LN71"></a>    <a href="../access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a>  <span class='Declare_Member'>receiveStart</span><span class='Delimiter'>; 
</span><a name="LN72"></a>    <a href="../access/xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a>  <span class='Declare_Member'>receiveStartTLI</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * receivedUpto-1 is the last byte position that has already been 
     * received, and receivedTLI is the timeline it came from.  At the first 
     * startup of walreceiver, these are set to receiveStart and 
     * receiveStartTLI. After that, walreceiver updates these whenever it 
     * flushes the received WAL to disk. 
     */ 
</span><a name="LN81"></a>    <a href="../access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a>  <span class='Declare_Member'>receivedUpto</span><span class='Delimiter'>; 
</span><a name="LN82"></a>    <a href="../access/xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a>  <span class='Declare_Member'>receivedTLI</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * latestChunkStart is the starting byte position of the current "batch" 
     * of received WAL.  It's actually the same as the previous value of 
     * receivedUpto before the last flush to disk.  Startup process can use 
     * this to detect whether it's keeping up or not. 
     */ 
</span><a name="LN90"></a>    <a href="../access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a>  <span class='Declare_Member'>latestChunkStart</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Time of send and receive of any message received. 
     */ 
</span><a name="LN95"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>lastMsgSendTime</span><span class='Delimiter'>; 
</span><a name="LN96"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>lastMsgReceiptTime</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Latest reported end of WAL on the sender 
     */ 
</span><a name="LN101"></a>    <a href="../access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a>  <span class='Declare_Member'>latestWalEnd</span><span class='Delimiter'>; 
</span><a name="LN102"></a>    <a href="../../interfaces/ecpg/include/pgtypes_timestamp.h.html#LN9"><span class='Ref_to_Typedef'>TimestampTz</span></a> <span class='Declare_Member'>latestWalEndTime</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * connection string; initially set to connect to the primary, and later 
     * clobbered to hide security-sensitive fields. 
     */ 
</span><a name="LN108"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>conninfo</span><span class='Delimiter'>[</span><a href="walreceiver.h.html#LN34"><span class='Ref_to_Const'>MAXCONNINFO</span></a><span class='Delimiter'>]; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * replication slot name; is also used for walreceiver to connect with the 
     * primary 
     */ 
</span><a name="LN114"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>slotname</span><span class='Delimiter'>[</span><a href="../../interfaces/ecpg/include/sqlda-native.h.html#LN15"><span class='Ref_to_Const'>NAMEDATALEN</span></a><span class='Delimiter'>]; 
</span> 
<a name="LN116"></a>    <a href="../storage/s_lock.h.html#LN137"><span class='Ref_to_Typedef'>slock_t</span></a>     <span class='Declare_Member'>mutex</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* locks shared variables shown above */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * force walreceiver reply?  This doesn't need to be locked; memory 
     * barriers for ordering are sufficient. 
     */ 
</span><a name="LN122"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>force_reply</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* set true once conninfo is ready to display (obfuscated pwds etc) */ 
</span><a name="LN125"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>ready_to_display</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Latch used by startup process to wake up walreceiver after telling it 
     * where to start streaming (after setting receiveStart and 
     * receiveStartTLI), and also to tell it to send apply feedback to the 
     * primary whenever specially marked commit records are applied. This is 
     * normally mapped to procLatch when walreceiver is running. 
     */ 
</span><a name="LN134"></a>    <a href="../storage/latch.h.html#LN109"><span class='Ref_to_Struct'>Latch</span></a>      <span class='Operator'>*</span><span class='Declare_Member'>latch</span><span class='Delimiter'>; 
</span><a name="LN135"></a>}<span class='Auto_Annotations'> &laquo; end {anonWalRcvData} &raquo; </span> <span class='Declare_Typedef'>WalRcvData</span><span class='Delimiter'>; 
</span> 
<a name="LN137"></a><span class='Keyword'>extern </span><a href="walreceiver.h.html#LN54"><span class='Ref_to_Typedef'>WalRcvData</span></a> <span class='Operator'>*</span><span class='Declare_Var'>WalRcv</span><span class='Delimiter'>; 
</span> 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN141"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>logical</span><span class='Delimiter'>;</span>        <span class='Comment_Multi_Line'>/* True if this is logical replication stream, 
                                 * false if physical stream.  */ 
</span><a name="LN143"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>slotname</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* Name of the replication slot or NULL. */ 
</span><a name="LN144"></a>    <a href="../access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a>  <span class='Declare_Member'>startpoint</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* LSN of starting point. */ 
</span> 
    <span class='Control'>union</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>struct</span> 
        <span class='Delimiter'>{ 
</span><a name="LN150"></a>            <a href="../access/xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a>  <span class='Declare_Member'>startpointTLI</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* Starting timeline */ 
</span><a name="LN151"></a>        <span class='Delimiter'>}</span>           <span class='Declare_Member'>physical</span><span class='Delimiter'>; 
</span>        <span class='Control'>struct</span> 
        <span class='Delimiter'>{ 
</span><a name="LN154"></a>            <a href="../c.h.html#LN267"><span class='Ref_to_Typedef'>uint32</span></a>      <span class='Declare_Member'>proto_version</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* Logical protocol version */ 
</span><a name="LN155"></a>            <a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>publication_names</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* String list of publications */ 
</span><a name="LN156"></a>        <span class='Delimiter'>}</span>           <span class='Declare_Member'>logical</span><span class='Delimiter'>; 
</span><a name="LN157"></a>    <span class='Delimiter'>}</span>           <span class='Declare_Member'>proto</span><span class='Delimiter'>; 
</span><a name="LN158"></a>} <span class='Declare_Typedef'>WalRcvStreamOptions</span><span class='Delimiter'>; 
</span> 
<span class='Control'>struct</span> <a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a><span class='Delimiter'>; 
</span><a name="LN161"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Declare_Typedef'>WalReceiverConn</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Status of walreceiver query execution. 
 * 
 * We only define statuses that are currently used. 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span><a name="LN170"></a>    <span class='Declare_Enum_Const'>WALRCV_ERROR</span><span class='Delimiter'>,</span>               <span class='Comment_Single_Line'>/* There was error when executing the query. */ 
</span><a name="LN171"></a>    <span class='Declare_Enum_Const'>WALRCV_OK_COMMAND</span><span class='Delimiter'>,</span>          <span class='Comment_Multi_Line'>/* Query executed utility or replication 
                                 * command. */ 
</span><a name="LN173"></a>    <span class='Declare_Enum_Const'>WALRCV_OK_TUPLES</span><span class='Delimiter'>,</span>           <span class='Comment_Single_Line'>/* Query returned tuples. */ 
</span><a name="LN174"></a>    <span class='Declare_Enum_Const'>WALRCV_OK_COPY_IN</span><span class='Delimiter'>,</span>          <span class='Comment_Single_Line'>/* Query started COPY FROM. */ 
</span><a name="LN175"></a>    <span class='Declare_Enum_Const'>WALRCV_OK_COPY_OUT</span><span class='Delimiter'>,</span>         <span class='Comment_Single_Line'>/* Query started COPY TO. */ 
</span><a name="LN176"></a>    <span class='Declare_Enum_Const'>WALRCV_OK_COPY_BOTH</span>         <span class='Comment_Multi_Line'>/* Query started COPY BOTH replication 
                                 * protocol. */ 
</span><a name="LN178"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>WalRcvExecStatus</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Return value for walrcv_query, returns the status of the execution and 
 * tuples if any. 
 */ 
</span><a name="LN184"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>WalRcvExecResult</span> 
<span class='Delimiter'>{ 
</span><a name="LN186"></a>    <a href="walreceiver.h.html#LN168"><span class='Ref_to_Typedef'>WalRcvExecStatus</span></a> <span class='Declare_Member'>status</span><span class='Delimiter'>; 
</span><a name="LN187"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>err</span><span class='Delimiter'>; 
</span><a name="LN188"></a>    <a href="../../backend/utils/sort/tuplestore.c.html#LN102"><span class='Ref_to_Struct'>Tuplestorestate</span></a> <span class='Operator'>*</span><span class='Declare_Member'>tuplestore</span><span class='Delimiter'>; 
</span><a name="LN189"></a>    <a href="../access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Member'>tupledesc</span><span class='Delimiter'>; 
</span><a name="LN190"></a>} <span class='Declare_Typedef'>WalRcvExecResult</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* libpqwalreceiver hooks */ 
</span><a name="LN193"></a><span class='Control'>typedef</span> <a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_connect_fn</span><span class='Parentheses'>) (</span><span class='Keyword'>const char </span><span class='Operator'>*</span>conninfo<span class='Delimiter'>, </span><span class='Keyword'>bool </span>logical<span class='Delimiter'>, 
</span>                                                         <span class='Keyword'>const char </span><span class='Operator'>*</span>appname<span class='Delimiter'>, 
</span>                                                           <span class='Keyword'>char </span><span class='Operator'>**</span>err<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN196"></a><span class='Control'>typedef</span> <span class='Keyword'>void </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_check_conninfo_fn</span><span class='Parentheses'>) (</span><span class='Keyword'>const char </span><span class='Operator'>*</span>conninfo<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN197"></a><span class='Control'>typedef</span> <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_get_conninfo_fn</span><span class='Parentheses'>) (</span><a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Operator'>*</span><a href="../../bin/pg_rewind/libpq_fetch.c.html#LN31"><span class='Ref_to_Global_Var'>conn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN198"></a><span class='Control'>typedef</span> <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_identify_system_fn</span><span class='Parentheses'>) (</span><a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Operator'>*</span><a href="../../bin/pg_rewind/libpq_fetch.c.html#LN31"><span class='Ref_to_Global_Var'>conn</span></a><span class='Delimiter'>, 
</span>                                                     <a href="../access/xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a> <span class='Operator'>*</span>primary_tli<span class='Delimiter'>, 
</span>                                                        <span class='Keyword'>int </span><span class='Operator'>*</span><a href="../../bin/pg_dump/pg_dumpall.c.html#LN81"><span class='Ref_to_Global_Var'>server_version</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN201"></a><span class='Control'>typedef</span> <span class='Keyword'>void </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_readtimelinehistoryfile_fn</span><span class='Parentheses'>) (</span><a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Operator'>*</span><a href="../../bin/pg_rewind/libpq_fetch.c.html#LN31"><span class='Ref_to_Global_Var'>conn</span></a><span class='Delimiter'>, 
</span>                                                               <a href="../access/xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a> tli<span class='Delimiter'>, 
</span>                                                             <span class='Keyword'>char </span><span class='Operator'>**</span><a href="../../bin/pg_test_fsync/pg_test_fsync.c.html#LN67"><span class='Ref_to_Global_Var'>filename</span></a><span class='Delimiter'>, 
</span>                                                  <span class='Keyword'>char </span><span class='Operator'>**</span>content<span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><a href="../../pl/plperl/ppport.h.html#LN6763"><span class='Ref_to_Global_Var'>size</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN205"></a><span class='Control'>typedef</span> <span class='Keyword'>bool </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_startstreaming_fn</span><span class='Parentheses'>) (</span><a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Operator'>*</span><a href="../../bin/pg_rewind/libpq_fetch.c.html#LN31"><span class='Ref_to_Global_Var'>conn</span></a><span class='Delimiter'>, 
</span>                                         <span class='Keyword'>const </span><a href="walreceiver.h.html#LN139"><span class='Ref_to_Typedef'>WalRcvStreamOptions</span></a> <span class='Operator'>*</span><a href="../../../contrib/oid2name/oid2name.c.html#LN25"><span class='Ref_to_Struct'>options</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN207"></a><span class='Control'>typedef</span> <span class='Keyword'>void </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_endstreaming_fn</span><span class='Parentheses'>) (</span><a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Operator'>*</span><a href="../../bin/pg_rewind/libpq_fetch.c.html#LN31"><span class='Ref_to_Global_Var'>conn</span></a><span class='Delimiter'>, 
</span>                                                    <a href="../access/xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a> <span class='Operator'>*</span>next_tli<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN209"></a><span class='Control'>typedef</span> <span class='Keyword'>int </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_receive_fn</span><span class='Parentheses'>) (</span><a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Operator'>*</span><a href="../../bin/pg_rewind/libpq_fetch.c.html#LN31"><span class='Ref_to_Global_Var'>conn</span></a><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span>buffer<span class='Delimiter'>, 
</span>                                              <a href="../port.h.html#LN25"><span class='Ref_to_Typedef'>pgsocket</span></a> <span class='Operator'>*</span>wait_fd<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN211"></a><span class='Control'>typedef</span> <span class='Keyword'>void </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_send_fn</span><span class='Parentheses'>) (</span><a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Operator'>*</span><a href="../../bin/pg_rewind/libpq_fetch.c.html#LN31"><span class='Ref_to_Global_Var'>conn</span></a><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>buffer<span class='Delimiter'>, 
</span>                                            <span class='Keyword'>int </span>nbytes<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN213"></a><span class='Control'>typedef</span> <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_create_slot_fn</span><span class='Parentheses'>) (</span><a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Operator'>*</span><a href="../../bin/pg_rewind/libpq_fetch.c.html#LN31"><span class='Ref_to_Global_Var'>conn</span></a><span class='Delimiter'>, 
</span>                                        <span class='Keyword'>const char </span><span class='Operator'>*</span>slotname<span class='Delimiter'>, </span><span class='Keyword'>bool </span>temporary<span class='Delimiter'>, 
</span>                                           <a href="walsender.h.html#LN21"><span class='Ref_to_Typedef'>CRSSnapshotAction</span></a> snapshot_action<span class='Delimiter'>, 
</span>                                                    <a href="../access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Operator'>*</span>lsn<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN217"></a><span class='Control'>typedef</span> <a href="walreceiver.h.html#LN184"><span class='Ref_to_Struct'>WalRcvExecResult</span></a> <span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_exec_fn</span><span class='Parentheses'>) (</span><a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Operator'>*</span><a href="../../bin/pg_rewind/libpq_fetch.c.html#LN31"><span class='Ref_to_Global_Var'>conn</span></a><span class='Delimiter'>, 
</span>                                                         <span class='Keyword'>const char </span><span class='Operator'>*</span>query<span class='Delimiter'>, 
</span>                                                         <span class='Keyword'>const int </span>nRetTypes<span class='Delimiter'>, 
</span>                                                         <span class='Keyword'>const </span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Operator'>*</span>retTypes<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN221"></a><span class='Control'>typedef</span> <span class='Keyword'>void </span><span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Typedef'>walrcv_disconnect_fn</span><span class='Parentheses'>) (</span><a href="../../backend/replication/libpqwalreceiver/libpqwalreceiver.c.html#LN39"><span class='Ref_to_Struct'>WalReceiverConn</span></a> <span class='Operator'>*</span><a href="../../bin/pg_rewind/libpq_fetch.c.html#LN31"><span class='Ref_to_Global_Var'>conn</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN223"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>WalReceiverFunctionsType</span> 
<span class='Delimiter'>{ 
</span><a name="LN225"></a>    <a href="walreceiver.h.html#LN193"><span class='Ref_to_Typedef'>walrcv_connect_fn</span></a> <span class='Declare_Member'>walrcv_connect</span><span class='Delimiter'>; 
</span><a name="LN226"></a>    <a href="walreceiver.h.html#LN196"><span class='Ref_to_Typedef'>walrcv_check_conninfo_fn</span></a> <span class='Declare_Member'>walrcv_check_conninfo</span><span class='Delimiter'>; 
</span><a name="LN227"></a>    <a href="walreceiver.h.html#LN197"><span class='Ref_to_Typedef'>walrcv_get_conninfo_fn</span></a> <span class='Declare_Member'>walrcv_get_conninfo</span><span class='Delimiter'>; 
</span><a name="LN228"></a>    <a href="walreceiver.h.html#LN198"><span class='Ref_to_Typedef'>walrcv_identify_system_fn</span></a> <span class='Declare_Member'>walrcv_identify_system</span><span class='Delimiter'>; 
</span><a name="LN229"></a>    <a href="walreceiver.h.html#LN201"><span class='Ref_to_Typedef'>walrcv_readtimelinehistoryfile_fn</span></a> <span class='Declare_Member'>walrcv_readtimelinehistoryfile</span><span class='Delimiter'>; 
</span><a name="LN230"></a>    <a href="walreceiver.h.html#LN205"><span class='Ref_to_Typedef'>walrcv_startstreaming_fn</span></a> <span class='Declare_Member'>walrcv_startstreaming</span><span class='Delimiter'>; 
</span><a name="LN231"></a>    <a href="walreceiver.h.html#LN207"><span class='Ref_to_Typedef'>walrcv_endstreaming_fn</span></a> <span class='Declare_Member'>walrcv_endstreaming</span><span class='Delimiter'>; 
</span><a name="LN232"></a>    <a href="walreceiver.h.html#LN209"><span class='Ref_to_Typedef'>walrcv_receive_fn</span></a> <span class='Declare_Member'>walrcv_receive</span><span class='Delimiter'>; 
</span><a name="LN233"></a>    <a href="walreceiver.h.html#LN211"><span class='Ref_to_Typedef'>walrcv_send_fn</span></a> <span class='Declare_Member'>walrcv_send</span><span class='Delimiter'>; 
</span><a name="LN234"></a>    <a href="walreceiver.h.html#LN213"><span class='Ref_to_Typedef'>walrcv_create_slot_fn</span></a> <span class='Declare_Member'>walrcv_create_slot</span><span class='Delimiter'>; 
</span><a name="LN235"></a>    <a href="walreceiver.h.html#LN217"><span class='Ref_to_Typedef'>walrcv_exec_fn</span></a> <span class='Declare_Member'>walrcv_exec</span><span class='Delimiter'>; 
</span><a name="LN236"></a>    <a href="walreceiver.h.html#LN221"><span class='Ref_to_Typedef'>walrcv_disconnect_fn</span></a> <span class='Declare_Member'>walrcv_disconnect</span><span class='Delimiter'>; 
</span><a name="LN237"></a>} <span class='Declare_Typedef'>WalReceiverFunctionsType</span><span class='Delimiter'>; 
</span> 
<a name="LN239"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/sqlca.h.html#LN5"><span class='Ref_to_Const'>PGDLLIMPORT</span></a> <a href="walreceiver.h.html#LN223"><span class='Ref_to_Struct'>WalReceiverFunctionsType</span></a> <span class='Operator'>*</span><span class='Declare_Var'>WalReceiverFunctions</span><span class='Delimiter'>; 
</span> 
<a name="LN241"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_connect</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conninfo</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>logical</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>appname</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>err</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN225"><span class='Ref_to_Member'>walrcv_connect</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN241"><span class='Ref_to_Parameter'>conninfo</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN241"><span class='Ref_to_Parameter'>logical</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN241"><span class='Ref_to_Parameter'>appname</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN241"><span class='Ref_to_Parameter'>err</span></a><span class='Parentheses'>) 
</span><a name="LN243"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_check_conninfo</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conninfo</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN226"><span class='Ref_to_Member'>walrcv_check_conninfo</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN243"><span class='Ref_to_Parameter'>conninfo</span></a><span class='Parentheses'>) 
</span><a name="LN245"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_get_conninfo</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conn</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN227"><span class='Ref_to_Member'>walrcv_get_conninfo</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN245"><span class='Ref_to_Parameter'>conn</span></a><span class='Parentheses'>) 
</span><a name="LN247"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_identify_system</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conn</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>primary_tli</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>server_version</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN228"><span class='Ref_to_Member'>walrcv_identify_system</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN247"><span class='Ref_to_Parameter'>conn</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN247"><span class='Ref_to_Parameter'>primary_tli</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN247"><span class='Ref_to_Parameter'>server_version</span></a><span class='Parentheses'>) 
</span><a name="LN249"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_readtimelinehistoryfile</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conn</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>tli</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>filename</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>content</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>size</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN229"><span class='Ref_to_Member'>walrcv_readtimelinehistoryfile</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN249"><span class='Ref_to_Parameter'>conn</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN249"><span class='Ref_to_Parameter'>tli</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN249"><span class='Ref_to_Parameter'>filename</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN249"><span class='Ref_to_Parameter'>content</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN249"><span class='Ref_to_Parameter'>size</span></a><span class='Parentheses'>) 
</span><a name="LN251"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_startstreaming</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conn</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>options</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN230"><span class='Ref_to_Member'>walrcv_startstreaming</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN251"><span class='Ref_to_Parameter'>conn</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN251"><span class='Ref_to_Parameter'>options</span></a><span class='Parentheses'>) 
</span><a name="LN253"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_endstreaming</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conn</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>next_tli</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN231"><span class='Ref_to_Member'>walrcv_endstreaming</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN253"><span class='Ref_to_Parameter'>conn</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN253"><span class='Ref_to_Parameter'>next_tli</span></a><span class='Parentheses'>) 
</span><a name="LN255"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_receive</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conn</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>buffer</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>wait_fd</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN232"><span class='Ref_to_Member'>walrcv_receive</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN255"><span class='Ref_to_Parameter'>conn</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN255"><span class='Ref_to_Parameter'>buffer</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN255"><span class='Ref_to_Parameter'>wait_fd</span></a><span class='Parentheses'>) 
</span><a name="LN257"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_send</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conn</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>buffer</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>nbytes</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN233"><span class='Ref_to_Member'>walrcv_send</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN257"><span class='Ref_to_Parameter'>conn</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN257"><span class='Ref_to_Parameter'>buffer</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN257"><span class='Ref_to_Parameter'>nbytes</span></a><span class='Parentheses'>) 
</span><a name="LN259"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_create_slot</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conn</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>slotname</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>temporary</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>snapshot_action</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>lsn</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN234"><span class='Ref_to_Member'>walrcv_create_slot</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN259"><span class='Ref_to_Parameter'>conn</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN259"><span class='Ref_to_Parameter'>slotname</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN259"><span class='Ref_to_Parameter'>temporary</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN259"><span class='Ref_to_Parameter'>snapshot_action</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN259"><span class='Ref_to_Parameter'>lsn</span></a><span class='Parentheses'>) 
</span><a name="LN261"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_exec</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conn</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>exec</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>nRetTypes</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>retTypes</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN235"><span class='Ref_to_Member'>walrcv_exec</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN261"><span class='Ref_to_Parameter'>conn</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN261"><span class='Ref_to_Parameter'>exec</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN261"><span class='Ref_to_Parameter'>nRetTypes</span></a><span class='Delimiter'>, </span><a href="walreceiver.h.html#LN261"><span class='Ref_to_Parameter'>retTypes</span></a><span class='Parentheses'>) 
</span><a name="LN263"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>walrcv_disconnect</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>conn</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/replication/walreceiver.c.html#LN79"><span class='Ref_to_Global_Var'>WalReceiverFunctions</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN236"><span class='Ref_to_Member'>walrcv_disconnect</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN263"><span class='Ref_to_Parameter'>conn</span></a><span class='Parentheses'>) 
</span> 
<span class='Keyword'>static inline void 
</span><a name="LN267"></a><span class='Declare_Function'>walrcv_clear_result</span><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN184"><span class='Ref_to_Struct'>WalRcvExecResult</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>walres</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="walreceiver.h.html#LN267"><span class='Ref_to_Parameter'>walres</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="walreceiver.h.html#LN267"><span class='Ref_to_Parameter'>walres</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN187"><span class='Ref_to_Member'>err</span></a><span class='Parentheses'>) 
</span>        <a href="../common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN267"><span class='Ref_to_Parameter'>walres</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN187"><span class='Ref_to_Member'>err</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="walreceiver.h.html#LN267"><span class='Ref_to_Parameter'>walres</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN188"><span class='Ref_to_Member'>tuplestore</span></a><span class='Parentheses'>) 
</span>        <a href="../utils/tuplestore.h.html#LN88"><span class='Ref_to_Proto'>tuplestore_end</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN267"><span class='Ref_to_Parameter'>walres</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN188"><span class='Ref_to_Member'>tuplestore</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="walreceiver.h.html#LN267"><span class='Ref_to_Parameter'>walres</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN189"><span class='Ref_to_Member'>tupledesc</span></a><span class='Parentheses'>) 
</span>        <a href="../access/tupdesc.h.html#LN95"><span class='Ref_to_Proto'>FreeTupleDesc</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN267"><span class='Ref_to_Parameter'>walres</span></a><span class='Operator'>-&GT;</span><a href="walreceiver.h.html#LN189"><span class='Ref_to_Member'>tupledesc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="walreceiver.h.html#LN267"><span class='Ref_to_Parameter'>walres</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* prototypes for functions in walreceiver.c */ 
</span><a name="LN285"></a><span class='Keyword'>extern void </span><a href="../../backend/replication/walreceiver.c.html#LN186"><span class='Ref_to_Func'>WalReceiverMain</span></a><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_noreturn</span><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* prototypes for functions in walreceiverfuncs.c */ 
</span><a name="LN288"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a> <span class='Declare_Prototype'>WalRcvShmemSize</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN289"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>WalRcvShmemInit</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN290"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>ShutdownWalRcv</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN291"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>WalRcvStreaming</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN292"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>WalRcvRunning</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN293"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>RequestXLogStreaming</span><span class='Parentheses'>(</span><a href="../access/xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a> <span class='Declare_Parameter'>tli</span><span class='Delimiter'>, </span><a href="../access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Parameter'>recptr</span><span class='Delimiter'>, 
</span><a name="LN294"></a>                     <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>conninfo</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>slotname</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN295"></a><span class='Keyword'>extern </span><a href="../access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Declare_Prototype'>GetWalRcvWriteRecPtr</span><span class='Parentheses'>(</span><a href="../access/xlogdefs.h.html#LN20"><span class='Ref_to_Typedef'>XLogRecPtr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>latestChunkStart</span><span class='Delimiter'>, </span><a href="../access/xlogdefs.h.html#LN44"><span class='Ref_to_Typedef'>TimeLineID</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>receiveTLI</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN296"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>GetReplicationApplyDelay</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN297"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>GetReplicationTransferLatency</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN298"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>WalRcvForceReply</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* _WALRECEIVER_H */ 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>