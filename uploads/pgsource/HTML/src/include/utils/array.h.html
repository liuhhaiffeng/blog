<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\include\utils\array.h</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\include\utils\array.h</b></p></td>
<td align='right'>
Wed Jun 14 08:26:08 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * array.h 
 *    Declarations for Postgres arrays. 
 * 
 * A standard varlena array has the following internal structure: 
 *    &LT;vl_len_&GT;     - standard varlena header word 
 *    &LT;ndim&GT;        - number of dimensions of the array 
 *    &LT;dataoffset&GT;  - offset to stored data, or 0 if no nulls bitmap 
 *    &LT;elemtype&GT;    - element type OID 
 *    &LT;dimensions&GT;  - length of each array axis (C array of int) 
 *    &LT;lower bnds&GT;  - lower boundary of each dimension (C array of int) 
 *    &LT;null bitmap&GT; - bitmap showing locations of nulls (OPTIONAL) 
 *    &LT;actual data&GT; - whatever is the stored data 
 * 
 * The &LT;dimensions&GT; and &LT;lower bnds&GT; arrays each have ndim elements. 
 * 
 * The &LT;null bitmap&GT; may be omitted if the array contains no NULL elements. 
 * If it is absent, the &LT;dataoffset&GT; field is zero and the offset to the 
 * stored data must be computed on-the-fly.  If the bitmap is present, 
 * &LT;dataoffset&GT; is nonzero and is equal to the offset from the array start 
 * to the first data element (including any alignment padding).  The bitmap 
 * follows the same conventions as tuple null bitmaps, ie, a 1 indicates 
 * a non-null entry and the LSB of each bitmap byte is used first. 
 * 
 * The actual data starts on a MAXALIGN boundary.  Individual items in the 
 * array are aligned as specified by the array element type.  They are 
 * stored in row-major order (last subscript varies most rapidly). 
 * 
 * NOTE: it is important that array elements of toastable datatypes NOT be 
 * toasted, since the tupletoaster won't know they are there.  (We could 
 * support compressed toasted items; only out-of-line items are dangerous. 
 * However, it seems preferable to store such items uncompressed and allow 
 * the toaster to compress the whole array as one input.) 
 * 
 * 
 * The OIDVECTOR and INT2VECTOR datatypes are storage-compatible with 
 * generic arrays, but they support only one-dimensional arrays with no 
 * nulls (and no null bitmap).  They don't support being toasted, either. 
 * 
 * There are also some "fixed-length array" datatypes, such as NAME and 
 * POINT.  These are simply a sequence of a fixed number of items each 
 * of a fixed-length datatype, with no overhead; the item size must be 
 * a multiple of its alignment requirement, because we do no padding. 
 * We support subscripting on these types, but array_in() and array_out() 
 * only work with varlena arrays. 
 * 
 * In addition, arrays are a major user of the "expanded object" TOAST 
 * infrastructure.  This allows a varlena array to be converted to a 
 * separate representation that may include "deconstructed" Datum/isnull 
 * arrays holding the elements. 
 * 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * src/include/utils/array.h 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Directive'>#ifndef</span> <a href="array.h.html#LN61"><span class='Ref_to_Const'>ARRAY_H</span></a> 
<a name="LN61"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ARRAY_H</span> 
 
<span class='Keyword'>#include </span><span class='String'>"fmgr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/expandeddatum.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Arrays are varlena objects, so must meet the varlena convention that 
 * the first int32 of the object contains the total object size in bytes. 
 * Be sure to use VARSIZE() and SET_VARSIZE() to access it, though! 
 * 
 * CAUTION: if you change the header for ordinary arrays you will also 
 * need to change the headers for oidvector and int2vector! 
 */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN77"></a>    <a href="../c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Member'>vl_len_</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* varlena header (do not touch directly!) */ 
</span><a name="LN78"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ndim</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* # of dimensions */ 
</span><a name="LN79"></a>    <a href="../c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Member'>dataoffset</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* offset to data, or 0 if no bitmap */ 
</span><a name="LN80"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>elemtype</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* element type OID */ 
</span><a name="LN81"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>ArrayType</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * An expanded array is contained within a private memory context (as 
 * all expanded objects must be) and has a control structure as below. 
 * 
 * The expanded array might contain a regular "flat" array if that was the 
 * original input and we've not modified it significantly.  Otherwise, the 
 * contents are represented by Datum/isnull arrays plus dimensionality and 
 * type information.  We could also have both forms, if we've deconstructed 
 * the original array for access purposes but not yet changed it.  For pass- 
 * by-reference element types, the Datums would point into the flat array in 
 * this situation.  Once we start modifying array elements, new pass-by-ref 
 * elements are separately palloc'd within the memory context. 
 */ 
</span><a name="LN96"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>EA_MAGIC</span> <span class='Number'>689375833</span>      <span class='Comment_Single_Line'>/* ID for debugging crosschecks */ 
</span> 
<a name="LN98"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ExpandedArrayHeader</span> 
<span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Standard header for expanded objects */ 
</span><a name="LN101"></a>    <a href="expandeddatum.h.html#LN97"><span class='Ref_to_Struct'>ExpandedObjectHeader</span></a> <span class='Declare_Member'>hdr</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Magic value identifying an expanded array (for debugging only) */ 
</span><a name="LN104"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ea_magic</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Dimensionality info (always valid) */ 
</span><a name="LN107"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ndims</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* # of dimensions */ 
</span><a name="LN108"></a>    <span class='Keyword'>int</span>        <span class='Operator'>*</span><span class='Declare_Member'>dims</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* array dimensions */ 
</span><a name="LN109"></a>    <span class='Keyword'>int</span>        <span class='Operator'>*</span><span class='Declare_Member'>lbound</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* index lower bounds for each dimension */ 
</span> 
    <span class='Comment_Multi_Line'>/* Element type info (always valid) */ 
</span><a name="LN112"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>element_type</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* element type OID */ 
</span><a name="LN113"></a>    <a href="../c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Member'>typlen</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* needed info about element datatype */ 
</span><a name="LN114"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>typbyval</span><span class='Delimiter'>; 
</span><a name="LN115"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>typalign</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If we have a Datum-array representation of the array, it's kept here; 
     * else dvalues/dnulls are NULL.  The dvalues and dnulls arrays are always 
     * palloc'd within the object private context, but may change size from 
     * time to time.  For pass-by-ref element types, dvalues entries might 
     * point either into the fstartptr..fendptr area, or to separately 
     * palloc'd chunks.  Elements should always be fully detoasted, as they 
     * are in the standard flat representation. 
     * 
     * Even when dvalues is valid, dnulls can be NULL if there are no null 
     * elements. 
     */ 
</span><a name="LN129"></a>    <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Member'>dvalues</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* array of Datums */ 
</span><a name="LN130"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Member'>dnulls</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* array of is-null flags for Datums */ 
</span><a name="LN131"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>dvalueslen</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* allocated length of above arrays */ 
</span><a name="LN132"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nelems</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* number of valid entries in above arrays */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * flat_size is the current space requirement for the flat equivalent of 
     * the expanded array, if known; otherwise it's 0.  We store this to make 
     * consecutive calls of get_flat_size cheap. 
     */ 
</span><a name="LN139"></a>    <a href="../c.h.html#LN355"><span class='Ref_to_Typedef'>Size</span></a>        <span class='Declare_Member'>flat_size</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * fvalue points to the flat representation if it is valid, else it is 
     * NULL.  If we have or ever had a flat representation then 
     * fstartptr/fendptr point to the start and end+1 of its data area; this 
     * is so that we can tell which Datum pointers point into the flat 
     * representation rather than being pointers to separately palloc'd data. 
     */ 
</span><a name="LN148"></a>    <a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a>  <span class='Operator'>*</span><span class='Declare_Member'>fvalue</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* must be a fully detoasted array */ 
</span><a name="LN149"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>fstartptr</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* start of its data area */ 
</span><a name="LN150"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>fendptr</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* end+1 of its data area */ 
</span><a name="LN151"></a><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end ExpandedArrayHeader &raquo; </span> <span class='Declare_Typedef'>ExpandedArrayHeader</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Functions that can handle either a "flat" varlena array or an expanded 
 * array use this union to work with their input. 
 */ 
</span><a name="LN157"></a><span class='Control'>typedef</span> <span class='Control'>union</span> <span class='Declare_Union'>AnyArrayType</span> 
<span class='Delimiter'>{ 
</span><a name="LN159"></a>    <a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a>   <span class='Declare_Member'>flt</span><span class='Delimiter'>; 
</span><a name="LN160"></a>    <a href="array.h.html#LN98"><span class='Ref_to_Struct'>ExpandedArrayHeader</span></a> <span class='Declare_Member'>xpn</span><span class='Delimiter'>; 
</span><a name="LN161"></a>} <span class='Declare_Typedef'>AnyArrayType</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * working state for accumArrayResult() and friends 
 * note that the input must be scalars (legal array elements) 
 */ 
</span><a name="LN167"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ArrayBuildState</span> 
<span class='Delimiter'>{ 
</span><a name="LN169"></a>    <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Member'>mcontext</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* where all the temp stuff is kept */ 
</span><a name="LN170"></a>    <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a>      <span class='Operator'>*</span><span class='Declare_Member'>dvalues</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* array of accumulated Datums */ 
</span><a name="LN171"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Member'>dnulls</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* array of is-null flags for Datums */ 
</span><a name="LN172"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>alen</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* allocated length of above arrays */ 
</span><a name="LN173"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nelems</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* number of valid entries in above arrays */ 
</span><a name="LN174"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>element_type</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* data type of the Datums */ 
</span><a name="LN175"></a>    <a href="../c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Member'>typlen</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* needed info about datatype */ 
</span><a name="LN176"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>typbyval</span><span class='Delimiter'>; 
</span><a name="LN177"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>typalign</span><span class='Delimiter'>; 
</span><a name="LN178"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>private_cxt</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* use private memory context */ 
</span><a name="LN179"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>ArrayBuildState</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * working state for accumArrayResultArr() and friends 
 * note that the input must be arrays, and the same array type is returned 
 */ 
</span><a name="LN185"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ArrayBuildStateArr</span> 
<span class='Delimiter'>{ 
</span><a name="LN187"></a>    <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Member'>mcontext</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* where all the temp stuff is kept */ 
</span><a name="LN188"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>data</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* accumulated data */ 
</span><a name="LN189"></a>    <a href="../c.h.html#LN274"><span class='Ref_to_Typedef'>bits8</span></a>      <span class='Operator'>*</span><span class='Declare_Member'>nullbitmap</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* bitmap of is-null flags, or NULL if none */ 
</span><a name="LN190"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>abytes</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* allocated length of "data" */ 
</span><a name="LN191"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nbytes</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* number of bytes used so far */ 
</span><a name="LN192"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>aitems</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* allocated length of bitmap (in elements) */ 
</span><a name="LN193"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nitems</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* total number of elements in result */ 
</span><a name="LN194"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>ndims</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* current dimensions of result */ 
</span><a name="LN195"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>dims</span><span class='Delimiter'>[</span><a href="../c.h.html#LN418"><span class='Ref_to_Const'>MAXDIM</span></a><span class='Delimiter'>]; 
</span><a name="LN196"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>lbs</span><span class='Delimiter'>[</span><a href="../c.h.html#LN418"><span class='Ref_to_Const'>MAXDIM</span></a><span class='Delimiter'>]; 
</span><a name="LN197"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>array_type</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* data type of the arrays */ 
</span><a name="LN198"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>element_type</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* data type of the array elements */ 
</span><a name="LN199"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>private_cxt</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* use private memory context */ 
</span><a name="LN200"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>ArrayBuildStateArr</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * working state for accumArrayResultAny() and friends 
 * these functions handle both cases 
 */ 
</span><a name="LN206"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ArrayBuildStateAny</span> 
<span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Exactly one of these is not NULL: */ 
</span><a name="LN209"></a>    <a href="array.h.html#LN167"><span class='Ref_to_Struct'>ArrayBuildState</span></a> <span class='Operator'>*</span><span class='Declare_Member'>scalarstate</span><span class='Delimiter'>; 
</span><a name="LN210"></a>    <a href="array.h.html#LN185"><span class='Ref_to_Struct'>ArrayBuildStateArr</span></a> <span class='Operator'>*</span><span class='Declare_Member'>arraystate</span><span class='Delimiter'>; 
</span><a name="LN211"></a>} <span class='Declare_Typedef'>ArrayBuildStateAny</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * structure to cache type metadata needed for array manipulation 
 */ 
</span><a name="LN216"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ArrayMetaState</span> 
<span class='Delimiter'>{ 
</span><a name="LN218"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>element_type</span><span class='Delimiter'>; 
</span><a name="LN219"></a>    <a href="../c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Member'>typlen</span><span class='Delimiter'>; 
</span><a name="LN220"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>typbyval</span><span class='Delimiter'>; 
</span><a name="LN221"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>typalign</span><span class='Delimiter'>; 
</span><a name="LN222"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>typdelim</span><span class='Delimiter'>; 
</span><a name="LN223"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>typioparam</span><span class='Delimiter'>; 
</span><a name="LN224"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>typiofunc</span><span class='Delimiter'>; 
</span><a name="LN225"></a>    <a href="../fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a>    <span class='Declare_Member'>proc</span><span class='Delimiter'>; 
</span><a name="LN226"></a>} <span class='Declare_Typedef'>ArrayMetaState</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * private state needed by array_map (here because caller must provide it) 
 */ 
</span><a name="LN231"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ArrayMapState</span> 
<span class='Delimiter'>{ 
</span><a name="LN233"></a>    <a href="array.h.html#LN216"><span class='Ref_to_Struct'>ArrayMetaState</span></a> <span class='Declare_Member'>inp_extra</span><span class='Delimiter'>; 
</span><a name="LN234"></a>    <a href="array.h.html#LN216"><span class='Ref_to_Struct'>ArrayMetaState</span></a> <span class='Declare_Member'>ret_extra</span><span class='Delimiter'>; 
</span><a name="LN235"></a>} <span class='Declare_Typedef'>ArrayMapState</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* ArrayIteratorData is private in arrayfuncs.c */ 
</span><a name="LN238"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <a href="../../backend/utils/adt/arrayfuncs.c.html#LN65"><span class='Ref_to_Struct'>ArrayIteratorData</span></a> <span class='Operator'>*</span><span class='Declare_Typedef'>ArrayIterator</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* fmgr macros for regular varlena array objects */ 
</span><a name="LN241"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>DatumGetArrayTypeP</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>X</span><span class='Parentheses'>)</span>         <span class='Parentheses'>((</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../fmgr.h.html#LN204"><span class='Ref_to_Macro'>PG_DETOAST_DATUM</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN241"><span class='Ref_to_Parameter'>X</span></a><span class='Parentheses'>))</span> 
<a name="LN242"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>DatumGetArrayTypePCopy</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>X</span><span class='Parentheses'>)</span>     <span class='Parentheses'>((</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../fmgr.h.html#LN206"><span class='Ref_to_Macro'>PG_DETOAST_DATUM_COPY</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN242"><span class='Ref_to_Parameter'>X</span></a><span class='Parentheses'>))</span> 
<a name="LN243"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_GETARG_ARRAYTYPE_P</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>n</span><span class='Parentheses'>)</span>      <a href="array.h.html#LN241"><span class='Ref_to_Macro'>DatumGetArrayTypeP</span></a><span class='Parentheses'>(</span><a href="../fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN243"><span class='Ref_to_Parameter'>n</span></a><span class='Parentheses'>))</span> 
<a name="LN244"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_GETARG_ARRAYTYPE_P_COPY</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>n</span><span class='Parentheses'>) </span><a href="array.h.html#LN242"><span class='Ref_to_Macro'>DatumGetArrayTypePCopy</span></a><span class='Parentheses'>(</span><a href="../fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN244"><span class='Ref_to_Parameter'>n</span></a><span class='Parentheses'>))</span> 
<a name="LN245"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_RETURN_ARRAYTYPE_P</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>x</span><span class='Parentheses'>)</span>      <a href="../fmgr.h.html#LN320"><span class='Ref_to_Macro'>PG_RETURN_POINTER</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN245"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* fmgr macros for expanded array objects */ 
</span><a name="LN248"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_GETARG_EXPANDED_ARRAY</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>n</span><span class='Parentheses'>)</span>  <a href="../../backend/utils/adt/array_expanded.c.html#LN350"><span class='Ref_to_Func'>DatumGetExpandedArray</span></a><span class='Parentheses'>(</span><a href="../fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN248"><span class='Ref_to_Parameter'>n</span></a><span class='Parentheses'>))</span> 
<a name="LN249"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_GETARG_EXPANDED_ARRAYX</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>n</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>metacache</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <a href="../../backend/utils/adt/array_expanded.c.html#LN370"><span class='Ref_to_Func'>DatumGetExpandedArrayX</span></a><span class='Parentheses'>(</span><a href="../fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN249"><span class='Ref_to_Parameter'>n</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="array.h.html#LN249"><span class='Ref_to_Parameter'>metacache</span></a><span class='Parentheses'>)</span> 
<a name="LN251"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_RETURN_EXPANDED_ARRAY</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>x</span><span class='Parentheses'>)</span>  <a href="../fmgr.h.html#LN312"><span class='Ref_to_Macro'>PG_RETURN_DATUM</span></a><span class='Parentheses'>(</span><a href="expandeddatum.h.html#LN135"><span class='Ref_to_Macro'>EOHPGetRWDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="array.h.html#LN251"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>hdr<span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* fmgr macros for AnyArrayType (ie, get either varlena or expanded form) */ 
</span><a name="LN254"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_GETARG_ANY_ARRAY</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>n</span><span class='Parentheses'>)</span>  <a href="../../backend/utils/adt/array_expanded.c.html#LN399"><span class='Ref_to_Func'>DatumGetAnyArray</span></a><span class='Parentheses'>(</span><a href="../fmgr.h.html#LN232"><span class='Ref_to_Macro'>PG_GETARG_DATUM</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN254"><span class='Ref_to_Parameter'>n</span></a><span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Access macros for varlena array header fields. 
 * 
 * ARR_DIMS returns a pointer to an array of array dimensions (number of 
 * elements along the various array axes). 
 * 
 * ARR_LBOUND returns a pointer to an array of array lower bounds. 
 * 
 * That is: if the third axis of an array has elements 5 through 8, then 
 * ARR_DIMS(a)[2] == 4 and ARR_LBOUND(a)[2] == 5. 
 * 
 * Unlike C, the default lower bound is 1. 
 */ 
</span><a name="LN269"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ARR_SIZE</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>)</span>             <a href="../postgres.h.html#LN303"><span class='Ref_to_Macro'>VARSIZE</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN269"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>) 
</span><a name="LN270"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ARR_NDIM</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>)</span>             <span class='Parentheses'>((</span><a href="array.h.html#LN270"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>ndim<span class='Parentheses'>)</span> 
<a name="LN271"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ARR_HASNULL</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>)</span>          <span class='Parentheses'>((</span><a href="array.h.html#LN271"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>dataoffset <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
<a name="LN272"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ARR_ELEMTYPE</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>)</span>         <span class='Parentheses'>((</span><a href="array.h.html#LN272"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>elemtype<span class='Parentheses'>)</span> 
 
<a name="LN274"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ARR_DIMS</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>((</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>(((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="array.h.html#LN274"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>))</span> <span class='Operator'>+ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a><span class='Parentheses'>)))</span> 
<a name="LN276"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ARR_LBOUND</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>((</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>(((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="array.h.html#LN276"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>))</span> <span class='Operator'>+ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a><span class='Parentheses'>)</span> <span class='Operator'>+ \ 
</span>                  <span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>)</span> <span class='Operator'>* </span><a href="array.h.html#LN270"><span class='Ref_to_Macro'>ARR_NDIM</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN276"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)))</span> 
 
<a name="LN280"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ARR_NULLBITMAP</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>(</span><a href="array.h.html#LN271"><span class='Ref_to_Macro'>ARR_HASNULL</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN280"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span> <span class='Operator'>? \ 
</span>         <span class='Parentheses'>(</span><a href="../c.h.html#LN274"><span class='Ref_to_Typedef'>bits8</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>(((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="array.h.html#LN280"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>))</span> <span class='Operator'>+ </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a><span class='Parentheses'>)</span> <span class='Operator'>+ \ 
</span>                    <span class='Number'>2</span> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>)</span> <span class='Operator'>* </span><a href="array.h.html#LN270"><span class='Ref_to_Macro'>ARR_NDIM</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN280"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>))</span> <span class='Operator'>\ 
</span>         <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="../c.h.html#LN274"><span class='Ref_to_Typedef'>bits8</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * The total array header size (in bytes) for an array with the specified 
 * number of dimensions and total number of items. 
 */ 
</span><a name="LN290"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ARR_OVERHEAD_NONULLS</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>ndims</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <a href="../c.h.html#LN587"><span class='Ref_to_Macro'>MAXALIGN</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>2</span> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Parentheses'>(</span><a href="array.h.html#LN290"><span class='Ref_to_Parameter'>ndims</span></a><span class='Parentheses'>))</span> 
<a name="LN292"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ARR_OVERHEAD_WITHNULLS</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>ndims</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>nitems</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <a href="../c.h.html#LN587"><span class='Ref_to_Macro'>MAXALIGN</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a><span class='Parentheses'>)</span> <span class='Operator'>+ </span><span class='Number'>2</span> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>)</span> <span class='Operator'>* </span><span class='Parentheses'>(</span><a href="array.h.html#LN292"><span class='Ref_to_Parameter'>ndims</span></a><span class='Parentheses'>)</span> <span class='Operator'>+ \ 
</span>                 <span class='Parentheses'>((</span><a href="array.h.html#LN292"><span class='Ref_to_Parameter'>nitems</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>7</span><span class='Parentheses'>)</span> <span class='Operator'>/ </span><span class='Number'>8</span><span class='Parentheses'>)</span> 
 
<a name="LN296"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ARR_DATA_OFFSET</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>(</span><a href="array.h.html#LN271"><span class='Ref_to_Macro'>ARR_HASNULL</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN296"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Parentheses'>(</span><a href="array.h.html#LN296"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>dataoffset <span class='Operator'>: </span><a href="array.h.html#LN290"><span class='Ref_to_Macro'>ARR_OVERHEAD_NONULLS</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN270"><span class='Ref_to_Macro'>ARR_NDIM</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN296"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)))</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Returns a pointer to the actual array data. 
 */ 
</span><a name="LN302"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ARR_DATA_PTR</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>(((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="array.h.html#LN302"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>))</span> <span class='Operator'>+ </span><a href="array.h.html#LN296"><span class='Ref_to_Macro'>ARR_DATA_OFFSET</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN302"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Macros for working with AnyArrayType inputs.  Beware multiple references! 
 */ 
</span><a name="LN308"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>AARR_NDIM</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="expandeddatum.h.html#LN127"><span class='Ref_to_Macro'>VARATT_IS_EXPANDED_HEADER</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN308"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Parentheses'>(</span><a href="array.h.html#LN308"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>xpn<span class='Operator'>.</span>ndims <span class='Operator'>: </span><a href="array.h.html#LN270"><span class='Ref_to_Macro'>ARR_NDIM</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="array.h.html#LN308"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flt<span class='Parentheses'>))</span> 
<a name="LN310"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>AARR_HASNULL</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="expandeddatum.h.html#LN127"><span class='Ref_to_Macro'>VARATT_IS_EXPANDED_HEADER</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN310"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span> <span class='Operator'>? \ 
</span>     <span class='Parentheses'>((</span><a href="array.h.html#LN310"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>xpn<span class='Operator'>.</span>dvalues <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>? </span><span class='Parentheses'>(</span><a href="array.h.html#LN310"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>xpn<span class='Operator'>.</span>dnulls <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>: </span><a href="array.h.html#LN271"><span class='Ref_to_Macro'>ARR_HASNULL</span></a><span class='Parentheses'>((</span><a href="array.h.html#LN310"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>xpn<span class='Operator'>.</span>fvalue<span class='Parentheses'>))</span> <span class='Operator'>: \ 
</span>     <a href="array.h.html#LN271"><span class='Ref_to_Macro'>ARR_HASNULL</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="array.h.html#LN310"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flt<span class='Parentheses'>))</span> 
<a name="LN314"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>AARR_ELEMTYPE</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="expandeddatum.h.html#LN127"><span class='Ref_to_Macro'>VARATT_IS_EXPANDED_HEADER</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN314"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Parentheses'>(</span><a href="array.h.html#LN314"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>xpn<span class='Operator'>.</span>element_type <span class='Operator'>: </span><a href="array.h.html#LN272"><span class='Ref_to_Macro'>ARR_ELEMTYPE</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="array.h.html#LN314"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flt<span class='Parentheses'>))</span> 
<a name="LN316"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>AARR_DIMS</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="expandeddatum.h.html#LN127"><span class='Ref_to_Macro'>VARATT_IS_EXPANDED_HEADER</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN316"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Parentheses'>(</span><a href="array.h.html#LN316"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>xpn<span class='Operator'>.</span>dims <span class='Operator'>: </span><a href="array.h.html#LN274"><span class='Ref_to_Macro'>ARR_DIMS</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="array.h.html#LN316"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flt<span class='Parentheses'>))</span> 
<a name="LN318"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>AARR_LBOUND</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="expandeddatum.h.html#LN127"><span class='Ref_to_Macro'>VARATT_IS_EXPANDED_HEADER</span></a><span class='Parentheses'>(</span><a href="array.h.html#LN318"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='Parentheses'>(</span><a href="array.h.html#LN318"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>xpn<span class='Operator'>.</span>lbound <span class='Operator'>: </span><a href="array.h.html#LN276"><span class='Ref_to_Macro'>ARR_LBOUND</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="array.h.html#LN318"><span class='Ref_to_Parameter'>a</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>flt<span class='Parentheses'>))</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * GUC parameter 
 */ 
</span><a name="LN325"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>Array_nulls</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * prototypes for functions defined in arrayfuncs.c 
 */ 
</span><a name="LN330"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>CopyArrayEls</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>array</span><span class='Delimiter'>, 
</span><a name="LN331"></a>             <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>values</span><span class='Delimiter'>, 
</span><a name="LN332"></a>             <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>nulls</span><span class='Delimiter'>, 
</span><a name="LN333"></a>             <span class='Keyword'>int </span><span class='Declare_Parameter'>nitems</span><span class='Delimiter'>, 
</span><a name="LN334"></a>             <span class='Keyword'>int </span><span class='Declare_Parameter'>typlen</span><span class='Delimiter'>, 
</span><a name="LN335"></a>             <span class='Keyword'>bool </span><span class='Declare_Parameter'>typbyval</span><span class='Delimiter'>, 
</span><a name="LN336"></a>             <span class='Keyword'>char </span><span class='Declare_Parameter'>typalign</span><span class='Delimiter'>, 
</span><a name="LN337"></a>             <span class='Keyword'>bool </span><span class='Declare_Parameter'>freedata</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN339"></a><span class='Keyword'>extern </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Prototype'>array_get_element</span><span class='Parentheses'>(</span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>arraydatum</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nSubscripts</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>indx</span><span class='Delimiter'>, 
</span><a name="LN340"></a>                  <span class='Keyword'>int </span><span class='Declare_Parameter'>arraytyplen</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>elmlen</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>elmbyval</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>elmalign</span><span class='Delimiter'>, 
</span><a name="LN341"></a>                  <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>isNull</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN342"></a><span class='Keyword'>extern </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Prototype'>array_set_element</span><span class='Parentheses'>(</span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>arraydatum</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nSubscripts</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>indx</span><span class='Delimiter'>, 
</span><a name="LN343"></a>                  <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>dataValue</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isNull</span><span class='Delimiter'>, 
</span><a name="LN344"></a>                  <span class='Keyword'>int </span><span class='Declare_Parameter'>arraytyplen</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>elmlen</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>elmbyval</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>elmalign</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN345"></a><span class='Keyword'>extern </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Prototype'>array_get_slice</span><span class='Parentheses'>(</span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>arraydatum</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nSubscripts</span><span class='Delimiter'>, 
</span><a name="LN346"></a>                <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>upperIndx</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>lowerIndx</span><span class='Delimiter'>, 
</span><a name="LN347"></a>                <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>upperProvided</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>lowerProvided</span><span class='Delimiter'>, 
</span><a name="LN348"></a>                <span class='Keyword'>int </span><span class='Declare_Parameter'>arraytyplen</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>elmlen</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>elmbyval</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>elmalign</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN349"></a><span class='Keyword'>extern </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Prototype'>array_set_slice</span><span class='Parentheses'>(</span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>arraydatum</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nSubscripts</span><span class='Delimiter'>, 
</span><a name="LN350"></a>                <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>upperIndx</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>lowerIndx</span><span class='Delimiter'>, 
</span><a name="LN351"></a>                <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>upperProvided</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>lowerProvided</span><span class='Delimiter'>, 
</span><a name="LN352"></a>                <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>srcArrayDatum</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isNull</span><span class='Delimiter'>, 
</span><a name="LN353"></a>                <span class='Keyword'>int </span><span class='Declare_Parameter'>arraytyplen</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>elmlen</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>elmbyval</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>elmalign</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN355"></a><span class='Keyword'>extern </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Prototype'>array_ref</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>array</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nSubscripts</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>indx</span><span class='Delimiter'>, 
</span><a name="LN356"></a>          <span class='Keyword'>int </span><span class='Declare_Parameter'>arraytyplen</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>elmlen</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>elmbyval</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>elmalign</span><span class='Delimiter'>, 
</span><a name="LN357"></a>          <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>isNull</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN358"></a><span class='Keyword'>extern </span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>array_set</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>array</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nSubscripts</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>indx</span><span class='Delimiter'>, 
</span><a name="LN359"></a>          <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>dataValue</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>isNull</span><span class='Delimiter'>, 
</span><a name="LN360"></a>          <span class='Keyword'>int </span><span class='Declare_Parameter'>arraytyplen</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>elmlen</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>elmbyval</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>elmalign</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN362"></a><span class='Keyword'>extern </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Prototype'>array_map</span><span class='Parentheses'>(</span><a href="../fmgr.h.html#LN37"><span class='Ref_to_Typedef'>FunctionCallInfo</span></a> <span class='Declare_Parameter'>fcinfo</span><span class='Delimiter'>, </span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>retType</span><span class='Delimiter'>, 
</span><a name="LN363"></a>          <a href="array.h.html#LN231"><span class='Ref_to_Struct'>ArrayMapState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>amstate</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN365"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>array_bitmap_copy</span><span class='Parentheses'>(</span><a href="../c.h.html#LN274"><span class='Ref_to_Typedef'>bits8</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>destbitmap</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>destoffset</span><span class='Delimiter'>, 
</span><a name="LN366"></a>                  <span class='Keyword'>const </span><a href="../c.h.html#LN274"><span class='Ref_to_Typedef'>bits8</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>srcbitmap</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>srcoffset</span><span class='Delimiter'>, 
</span><a name="LN367"></a>                  <span class='Keyword'>int </span><span class='Declare_Parameter'>nitems</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN369"></a><span class='Keyword'>extern </span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>construct_array</span><span class='Parentheses'>(</span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>elems</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nelems</span><span class='Delimiter'>, 
</span><a name="LN370"></a>                <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>elmtype</span><span class='Delimiter'>, 
</span><a name="LN371"></a>                <span class='Keyword'>int </span><span class='Declare_Parameter'>elmlen</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>elmbyval</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>elmalign</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN372"></a><span class='Keyword'>extern </span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>construct_md_array</span><span class='Parentheses'>(</span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>elems</span><span class='Delimiter'>, 
</span><a name="LN373"></a>                   <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>nulls</span><span class='Delimiter'>, 
</span><a name="LN374"></a>                   <span class='Keyword'>int </span><span class='Declare_Parameter'>ndims</span><span class='Delimiter'>, 
</span><a name="LN375"></a>                   <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dims</span><span class='Delimiter'>, 
</span><a name="LN376"></a>                   <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>lbs</span><span class='Delimiter'>, 
</span><a name="LN377"></a>                   <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>elmtype</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>elmlen</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>elmbyval</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>elmalign</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN378"></a><span class='Keyword'>extern </span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>construct_empty_array</span><span class='Parentheses'>(</span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>elmtype</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN379"></a><span class='Keyword'>extern </span><a href="array.h.html#LN98"><span class='Ref_to_Struct'>ExpandedArrayHeader</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>construct_empty_expanded_array</span><span class='Parentheses'>(</span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>element_type</span><span class='Delimiter'>, 
</span><a name="LN380"></a>                               <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>parentcontext</span><span class='Delimiter'>, 
</span><a name="LN381"></a>                               <a href="array.h.html#LN216"><span class='Ref_to_Struct'>ArrayMetaState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>metacache</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN382"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>deconstruct_array</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>array</span><span class='Delimiter'>, 
</span><a name="LN383"></a>                  <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>elmtype</span><span class='Delimiter'>, 
</span><a name="LN384"></a>                  <span class='Keyword'>int </span><span class='Declare_Parameter'>elmlen</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>elmbyval</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>elmalign</span><span class='Delimiter'>, 
</span><a name="LN385"></a>                  <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>elemsp</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>**</span><span class='Declare_Parameter'>nullsp</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>nelemsp</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN386"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>array_contains_nulls</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>array</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN388"></a><span class='Keyword'>extern </span><a href="array.h.html#LN167"><span class='Ref_to_Struct'>ArrayBuildState</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>initArrayResult</span><span class='Parentheses'>(</span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>element_type</span><span class='Delimiter'>, 
</span><a name="LN389"></a>                <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>rcontext</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>subcontext</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN390"></a><span class='Keyword'>extern </span><a href="array.h.html#LN167"><span class='Ref_to_Struct'>ArrayBuildState</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>accumArrayResult</span><span class='Parentheses'>(</span><a href="array.h.html#LN167"><span class='Ref_to_Struct'>ArrayBuildState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>astate</span><span class='Delimiter'>, 
</span><a name="LN391"></a>                 <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>dvalue</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>disnull</span><span class='Delimiter'>, 
</span><a name="LN392"></a>                 <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>element_type</span><span class='Delimiter'>, 
</span><a name="LN393"></a>                 <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>rcontext</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN394"></a><span class='Keyword'>extern </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Prototype'>makeArrayResult</span><span class='Parentheses'>(</span><a href="array.h.html#LN167"><span class='Ref_to_Struct'>ArrayBuildState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>astate</span><span class='Delimiter'>, 
</span><a name="LN395"></a>                <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>rcontext</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN396"></a><span class='Keyword'>extern </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Prototype'>makeMdArrayResult</span><span class='Parentheses'>(</span><a href="array.h.html#LN167"><span class='Ref_to_Struct'>ArrayBuildState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>astate</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>ndims</span><span class='Delimiter'>, 
</span><a name="LN397"></a>                  <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dims</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>lbs</span><span class='Delimiter'>, </span><a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>rcontext</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>release</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN399"></a><span class='Keyword'>extern </span><a href="array.h.html#LN185"><span class='Ref_to_Struct'>ArrayBuildStateArr</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>initArrayResultArr</span><span class='Parentheses'>(</span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>array_type</span><span class='Delimiter'>, </span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>element_type</span><span class='Delimiter'>, 
</span><a name="LN400"></a>                   <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>rcontext</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>subcontext</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN401"></a><span class='Keyword'>extern </span><a href="array.h.html#LN185"><span class='Ref_to_Struct'>ArrayBuildStateArr</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>accumArrayResultArr</span><span class='Parentheses'>(</span><a href="array.h.html#LN185"><span class='Ref_to_Struct'>ArrayBuildStateArr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>astate</span><span class='Delimiter'>, 
</span><a name="LN402"></a>                    <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>dvalue</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>disnull</span><span class='Delimiter'>, 
</span><a name="LN403"></a>                    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>array_type</span><span class='Delimiter'>, 
</span><a name="LN404"></a>                    <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>rcontext</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN405"></a><span class='Keyword'>extern </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Prototype'>makeArrayResultArr</span><span class='Parentheses'>(</span><a href="array.h.html#LN185"><span class='Ref_to_Struct'>ArrayBuildStateArr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>astate</span><span class='Delimiter'>, 
</span><a name="LN406"></a>                   <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>rcontext</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>release</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN408"></a><span class='Keyword'>extern </span><a href="array.h.html#LN206"><span class='Ref_to_Struct'>ArrayBuildStateAny</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>initArrayResultAny</span><span class='Parentheses'>(</span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>input_type</span><span class='Delimiter'>, 
</span><a name="LN409"></a>                   <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>rcontext</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>subcontext</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN410"></a><span class='Keyword'>extern </span><a href="array.h.html#LN206"><span class='Ref_to_Struct'>ArrayBuildStateAny</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>accumArrayResultAny</span><span class='Parentheses'>(</span><a href="array.h.html#LN206"><span class='Ref_to_Struct'>ArrayBuildStateAny</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>astate</span><span class='Delimiter'>, 
</span><a name="LN411"></a>                    <a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>dvalue</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>disnull</span><span class='Delimiter'>, 
</span><a name="LN412"></a>                    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> <span class='Declare_Parameter'>input_type</span><span class='Delimiter'>, 
</span><a name="LN413"></a>                    <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>rcontext</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN414"></a><span class='Keyword'>extern </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Prototype'>makeArrayResultAny</span><span class='Parentheses'>(</span><a href="array.h.html#LN206"><span class='Ref_to_Struct'>ArrayBuildStateAny</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>astate</span><span class='Delimiter'>, 
</span><a name="LN415"></a>                   <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>rcontext</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>release</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN417"></a><span class='Keyword'>extern </span><a href="array.h.html#LN238"><span class='Ref_to_Typedef'>ArrayIterator</span></a> <span class='Declare_Prototype'>array_create_iterator</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>arr</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>slice_ndim</span><span class='Delimiter'>, </span><a href="array.h.html#LN216"><span class='Ref_to_Struct'>ArrayMetaState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>mstate</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN418"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>array_iterate</span><span class='Parentheses'>(</span><a href="array.h.html#LN238"><span class='Ref_to_Typedef'>ArrayIterator</span></a> <span class='Declare_Parameter'>iterator</span><span class='Delimiter'>, </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>value</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>isnull</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN419"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>array_free_iterator</span><span class='Parentheses'>(</span><a href="array.h.html#LN238"><span class='Ref_to_Typedef'>ArrayIterator</span></a> <span class='Declare_Parameter'>iterator</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * prototypes for functions defined in arrayutils.c 
 */ 
</span> 
<a name="LN425"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>ArrayGetOffset</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>n</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dim</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>lb</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>indx</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN426"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>ArrayGetOffset0</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>n</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>tup</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>scale</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN427"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>ArrayGetNItems</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>ndim</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dims</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN428"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>mda_get_range</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>n</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>span</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>st</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>endp</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN429"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>mda_get_prod</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>n</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>range</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>prod</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN430"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>mda_get_offset_values</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>n</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dist</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>prod</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>span</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN431"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>mda_next_tuple</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>n</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>curr</span><span class='Delimiter'>, </span><span class='Keyword'>const int </span><span class='Operator'>*</span><span class='Declare_Parameter'>span</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN432"></a><span class='Keyword'>extern </span><a href="../c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>ArrayGetIntegerTypmods</span><span class='Parentheses'>(</span><a href="array.h.html#LN75"><span class='Ref_to_Typedef'>ArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>arr</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>n</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * prototypes for functions defined in array_expanded.c 
 */ 
</span><a name="LN437"></a><span class='Keyword'>extern </span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Prototype'>expand_array</span><span class='Parentheses'>(</span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>arraydatum</span><span class='Delimiter'>, </span><a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Parameter'>parentcontext</span><span class='Delimiter'>, 
</span><a name="LN438"></a>             <a href="array.h.html#LN216"><span class='Ref_to_Struct'>ArrayMetaState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>metacache</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN439"></a><span class='Keyword'>extern </span><a href="array.h.html#LN98"><span class='Ref_to_Struct'>ExpandedArrayHeader</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>DatumGetExpandedArray</span><span class='Parentheses'>(</span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>d</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN440"></a><span class='Keyword'>extern </span><a href="array.h.html#LN98"><span class='Ref_to_Struct'>ExpandedArrayHeader</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>DatumGetExpandedArrayX</span><span class='Parentheses'>(</span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>d</span><span class='Delimiter'>, 
</span><a name="LN441"></a>                       <a href="array.h.html#LN216"><span class='Ref_to_Struct'>ArrayMetaState</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>metacache</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN442"></a><span class='Keyword'>extern </span><a href="array.h.html#LN157"><span class='Ref_to_Union'>AnyArrayType</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>DatumGetAnyArray</span><span class='Parentheses'>(</span><a href="../postgres.h.html#LN371"><span class='Ref_to_Typedef'>Datum</span></a> <span class='Declare_Parameter'>d</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN443"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>deconstruct_expanded_array</span><span class='Parentheses'>(</span><a href="array.h.html#LN98"><span class='Ref_to_Struct'>ExpandedArrayHeader</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>eah</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* ARRAY_H */ 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>