<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\include\utils\elog.h</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\include\utils\elog.h</b></p></td>
<td align='right'>
Wed Jun 14 08:26:08 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * elog.h 
 *    POSTGRES error reporting/logging definitions. 
 * 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * src/include/utils/elog.h 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Directive'>#ifndef</span> <a href="elog.h.html#LN14"><span class='Ref_to_Const'>ELOG_H</span></a> 
<a name="LN14"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ELOG_H</span> 
 
<span class='Keyword'>#include </span><span class='String'>&LT;setjmp.h&GT;</span> 
 
<span class='Comment_Multi_Line'>/* Error level codes */ 
</span><a name="LN19"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEBUG5</span>      <span class='Number'>10</span>          <span class='Comment_Multi_Line'>/* Debugging messages, in categories of 
                                 * decreasing detail. */ 
</span><a name="LN21"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEBUG4</span>      <span class='Number'>11</span> 
<a name="LN22"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEBUG3</span>      <span class='Number'>12</span> 
<a name="LN23"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEBUG2</span>      <span class='Number'>13</span> 
<a name="LN24"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>DEBUG1</span>      <span class='Number'>14</span>          <span class='Comment_Single_Line'>/* used by GUC debug_* variables */ 
</span><a name="LN25"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LOG</span>         <span class='Number'>15</span>          <span class='Comment_Multi_Line'>/* Server operational messages; sent only to 
                                 * server log by default. */ 
</span><a name="LN27"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LOG_SERVER_ONLY</span> <span class='Number'>16</span>      <span class='Comment_Multi_Line'>/* Same as LOG for server reporting, but never 
                                 * sent to client. */ 
</span><a name="LN29"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>COMMERROR</span>   <a href="elog.h.html#LN27"><span class='Ref_to_Const'>LOG_SERVER_ONLY</span></a>     <span class='Comment_Multi_Line'>/* Client communication problems; same 
                                         * as LOG for server reporting, but 
                                         * never sent to client. */ 
</span><a name="LN32"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>INFO</span>        <span class='Number'>17</span>          <span class='Comment_Multi_Line'>/* Messages specifically requested by user (eg 
                                 * VACUUM VERBOSE output); always sent to 
                                 * client regardless of client_min_messages, 
                                 * but by default not sent to server log. */ 
</span><a name="LN36"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>NOTICE</span>      <span class='Number'>18</span>          <span class='Comment_Multi_Line'>/* Helpful messages to users about query 
                                 * operation; sent to client and not to server 
                                 * log by default. */ 
</span><a name="LN39"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>WARNING</span>     <span class='Number'>19</span>          <span class='Comment_Multi_Line'>/* Warnings.  NOTICE is for expected messages 
                                 * like implicit sequence creation by SERIAL. 
                                 * WARNING is for unexpected messages. */ 
</span><a name="LN42"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>ERROR</span>       <span class='Number'>20</span>          <span class='Comment_Multi_Line'>/* user error - abort transaction; return to 
                                 * known state */ 
/* Save ERROR value in PGERROR so it can be restored when Win32 includes 
 * modify it.  We have to use a constant rather than ERROR because macros 
 * are expanded only when referenced outside macros. 
 */ 
</span><span class='Directive'>#ifdef</span> <a href="../c.h.html#LN61"><span class='Ref_to_Const'>WIN32</span></a> 
<a name="LN49"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PGERROR</span>     <span class='Number'>20</span> 
<span class='Directive'>#endif</span> 
<a name="LN51"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>FATAL</span>       <span class='Number'>21</span>          <span class='Comment_Single_Line'>/* fatal error - abort process */ 
</span><a name="LN52"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>PANIC</span>       <span class='Number'>22</span>          <span class='Comment_Single_Line'>/* take down the other backends with me */ 
</span> 
 <span class='Comment_Multi_Line'>/* #define DEBUG DEBUG1 */ </span><span class='Comment_Single_Line'>/* Backward compatibility with pre-7.3 */ 
</span> 
 
<span class='Comment_Multi_Line'>/* macros for representing SQLSTATE strings compactly */ 
</span><a name="LN58"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PGSIXBIT</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>ch</span><span class='Parentheses'>)</span>    <span class='Parentheses'>(((</span><a href="elog.h.html#LN58"><span class='Ref_to_Parameter'>ch</span></a><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='String'>'0'</span><span class='Parentheses'>)</span> <span class='Operator'>& </span><span class='Number'>0x3F</span><span class='Parentheses'>)</span> 
<a name="LN59"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PGUNSIXBIT</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>val</span><span class='Parentheses'>) (((</span><a href="elog.h.html#LN59"><span class='Ref_to_Parameter'>val</span></a><span class='Parentheses'>) </span><span class='Operator'>& </span><span class='Number'>0x3F</span><span class='Parentheses'>)</span> <span class='Operator'>+ </span><span class='String'>'0'</span><span class='Parentheses'>)</span> 
 
<a name="LN61"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>MAKE_SQLSTATE</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>ch1</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>ch2</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>ch3</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>ch4</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>ch5</span><span class='Parentheses'>)</span>  <span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="elog.h.html#LN58"><span class='Ref_to_Macro'>PGSIXBIT</span></a><span class='Parentheses'>(</span><a href="elog.h.html#LN61"><span class='Ref_to_Parameter'>ch1</span></a><span class='Parentheses'>)</span> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="elog.h.html#LN58"><span class='Ref_to_Macro'>PGSIXBIT</span></a><span class='Parentheses'>(</span><a href="elog.h.html#LN61"><span class='Ref_to_Parameter'>ch2</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>6</span><span class='Parentheses'>)</span> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="elog.h.html#LN58"><span class='Ref_to_Macro'>PGSIXBIT</span></a><span class='Parentheses'>(</span><a href="elog.h.html#LN61"><span class='Ref_to_Parameter'>ch3</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>12</span><span class='Parentheses'>)</span> <span class='Operator'>+ \ 
</span>     <span class='Parentheses'>(</span><a href="elog.h.html#LN58"><span class='Ref_to_Macro'>PGSIXBIT</span></a><span class='Parentheses'>(</span><a href="elog.h.html#LN61"><span class='Ref_to_Parameter'>ch4</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>18</span><span class='Parentheses'>)</span> <span class='Operator'>+ </span><span class='Parentheses'>(</span><a href="elog.h.html#LN58"><span class='Ref_to_Macro'>PGSIXBIT</span></a><span class='Parentheses'>(</span><a href="elog.h.html#LN61"><span class='Ref_to_Parameter'>ch5</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;&LT; </span><span class='Number'>24</span><span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* These macros depend on the fact that '0' becomes a zero in SIXBIT */ 
</span><a name="LN66"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ERRCODE_TO_CATEGORY</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>ec</span><span class='Parentheses'>)</span>  <span class='Parentheses'>((</span><a href="elog.h.html#LN66"><span class='Ref_to_Parameter'>ec</span></a><span class='Parentheses'>)</span> <span class='Operator'>& </span><span class='Parentheses'>((</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>12</span><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>))</span> 
<a name="LN67"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ERRCODE_IS_CATEGORY</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>ec</span><span class='Parentheses'>)</span>  <span class='Parentheses'>(((</span><a href="elog.h.html#LN67"><span class='Ref_to_Parameter'>ec</span></a><span class='Parentheses'>)</span> <span class='Operator'>& ~</span><span class='Parentheses'>((</span><span class='Number'>1</span> <span class='Operator'>&LT;&LT; </span><span class='Number'>12</span><span class='Parentheses'>) </span><span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* SQLSTATE codes for errors are defined in a separate file */ 
</span><span class='Keyword'>#include </span><span class='String'>"utils/errcodes.h"</span> 
 
 
<span class='Comment_Multi_Line'>/*---------- 
 * New-style error reporting API: to be used in this way: 
 *      ereport(ERROR, 
 *              (errcode(ERRCODE_UNDEFINED_CURSOR), 
 *               errmsg("portal \"%s\" not found", stmt-&GT;portalname), 
 *               ... other errxxx() fields as needed ...)); 
 * 
 * The error level is required, and so is a primary error message (errmsg 
 * or errmsg_internal).  All else is optional.  errcode() defaults to 
 * ERRCODE_INTERNAL_ERROR if elevel is ERROR or more, ERRCODE_WARNING 
 * if elevel is WARNING, or ERRCODE_SUCCESSFUL_COMPLETION if elevel is 
 * NOTICE or below. 
 * 
 * ereport_domain() allows a message domain to be specified, for modules that 
 * wish to use a different message catalog from the backend's.  To avoid having 
 * one copy of the default text domain per .o file, we define it as NULL here 
 * and have errstart insert the default text domain.  Modules can either use 
 * ereport_domain() directly, or preferably they can override the TEXTDOMAIN 
 * macro. 
 * 
 * If elevel &GT;= ERROR, the call will not return; we try to inform the compiler 
 * of that via pg_unreachable().  However, no useful optimization effect is 
 * obtained unless the compiler sees elevel as a compile-time constant, else 
 * we're just adding code bloat.  So, if __builtin_constant_p is available, 
 * use that to cause the second if() to vanish completely for non-constant 
 * cases.  We avoid using a local variable because it's not necessary and 
 * prevents gcc from making the unreachability deduction at optlevel -O0. 
 *---------- 
 */ 
</span><span class='Directive'>#ifdef</span> HAVE__BUILTIN_CONSTANT_P 
<a name="LN103"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ereport_domain</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>elevel</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>domain</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>rest</span><span class='Parentheses'>)</span>    <span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="elog.h.html#LN126"><span class='Ref_to_Proto'>errstart</span></a><span class='Parentheses'>(</span><a href="elog.h.html#LN103"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, </span>__FILE__<span class='Delimiter'>, </span>__LINE__<span class='Delimiter'>, </span><a href="../c.h.html#LN176"><span class='Ref_to_Const'>PG_FUNCNAME_MACRO</span></a><span class='Delimiter'>, </span><a href="elog.h.html#LN103"><span class='Ref_to_Parameter'>domain</span></a><span class='Parentheses'>))</span> <span class='Operator'>\ 
</span>            <a href="elog.h.html#LN128"><span class='Ref_to_Proto'>errfinish</span></a> <a href="elog.h.html#LN103"><span class='Ref_to_Parameter'>rest</span></a><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>__builtin_constant_p<span class='Parentheses'>(</span><a href="elog.h.html#LN103"><span class='Ref_to_Parameter'>elevel</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="elog.h.html#LN103"><span class='Ref_to_Parameter'>elevel</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><a href="../port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Parentheses'>)</span> <span class='Operator'>\ 
</span>            <a href="../c.h.html#LN941"><span class='Ref_to_Macro'>pg_unreachable</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span><span class='Directive'>#else</span>                           <span class='Comment_Single_Line'>/* !HAVE__BUILTIN_CONSTANT_P */ 
</span><a name="LN111"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ereport_domain</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>elevel</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>domain</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>rest</span><span class='Parentheses'>)</span>    <span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <span class='Keyword'>const int </span>elevel_ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="elog.h.html#LN111"><span class='Ref_to_Parameter'>elevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="elog.h.html#LN126"><span class='Ref_to_Proto'>errstart</span></a><span class='Parentheses'>(</span>elevel_<span class='Delimiter'>, </span>__FILE__<span class='Delimiter'>, </span>__LINE__<span class='Delimiter'>, </span><a href="../c.h.html#LN176"><span class='Ref_to_Const'>PG_FUNCNAME_MACRO</span></a><span class='Delimiter'>, </span><a href="elog.h.html#LN111"><span class='Ref_to_Parameter'>domain</span></a><span class='Parentheses'>))</span> <span class='Operator'>\ 
</span>            <a href="elog.h.html#LN128"><span class='Ref_to_Proto'>errfinish</span></a> <a href="elog.h.html#LN111"><span class='Ref_to_Parameter'>rest</span></a><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>elevel_ <span class='Operator'>&GT;= </span><a href="../port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>            <a href="../c.h.html#LN941"><span class='Ref_to_Macro'>pg_unreachable</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span><span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* HAVE__BUILTIN_CONSTANT_P */ 
</span> 
<a name="LN121"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>ereport</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>elevel</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>rest</span><span class='Parentheses'>)</span>   <span class='Operator'>\ 
</span>    <a href="elog.h.html#LN103"><span class='Ref_to_Macro'>ereport_domain</span></a><span class='Parentheses'>(</span><a href="elog.h.html#LN121"><span class='Ref_to_Parameter'>elevel</span></a><span class='Delimiter'>, </span><a href="../../pl/plpgsql/src/plpgsql.h.html#LN29"><span class='Ref_to_Const'>TEXTDOMAIN</span></a><span class='Delimiter'>, </span><a href="elog.h.html#LN121"><span class='Ref_to_Parameter'>rest</span></a><span class='Parentheses'>) 
</span> 
<a name="LN124"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>TEXTDOMAIN</span> <span class='Null_Value'>NULL 
</span> 
<a name="LN126"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>errstart</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>elevel</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>filename</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>lineno</span><span class='Delimiter'>, 
</span><a name="LN127"></a>         <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>funcname</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>domain</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN128"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>errfinish</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>dummy</span><span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN130"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>errcode</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>sqlerrcode</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN132"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>errcode_for_file_access</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN133"></a><span class='Keyword'>extern int</span>  <span class='Declare_Prototype'>errcode_for_socket_access</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN135"></a><span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN136"></a><span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN825"><span class='Ref_to_Func'>errmsg_internal</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>extern int </span><a href="../../backend/utils/error/elog.c.html#LN848"><span class='Ref_to_Func'>errmsg_plural</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt_singular<span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt_plural<span class='Delimiter'>, 
</span><a name="LN139"></a>    <span class='Keyword'>unsigned long </span>n<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><a href="../../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN141"></a><span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN871"><span class='Ref_to_Func'>errdetail</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN142"></a><span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN898"><span class='Ref_to_Func'>errdetail_internal</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN144"></a><span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN919"><span class='Ref_to_Func'>errdetail_log</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>extern int </span><a href="../../backend/utils/error/elog.c.html#LN940"><span class='Ref_to_Func'>errdetail_log_plural</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt_singular<span class='Delimiter'>, 
</span>                     <span class='Keyword'>const char </span><span class='Operator'>*</span>fmt_plural<span class='Delimiter'>, 
</span><a name="LN148"></a>    <span class='Keyword'>unsigned long </span>n<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><a href="../../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN150"></a><span class='Keyword'>extern int </span><span class='Declare_Function'>errdetail_plural</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>fmt_singular</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>fmt_plural</span><span class='Delimiter'>, 
</span><a name="LN151"></a>    <span class='Keyword'>unsigned long </span><span class='Declare_Parameter'>n</span><span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><a href="../../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>) </span><a href="../../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><a href="../../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * errcontext() is typically called in error context callback functions, not 
 * within an ereport() invocation. The callback function can be in a different 
 * module than the ereport() call, so the message domain passed in errstart() 
 * is not usually the correct domain for translating the context message. 
 * set_errcontext_domain() first sets the domain to be used, and 
 * errcontext_msg() passes the actual message. 
 */ 
</span><span class='Keyword'>#define </span>errcontext  <a href="../../backend/utils/error/elog.c.html#LN1046"><span class='Ref_to_Func'>set_errcontext_domain</span></a><span class='Parentheses'>(</span><a href="../../pl/plpgsql/src/plpgsql.h.html#LN29"><span class='Ref_to_Const'>TEXTDOMAIN</span></a><span class='Parentheses'>)</span><span class='Delimiter'>,</span>  <a href="../../backend/utils/error/elog.c.html#LN1010"><span class='Ref_to_Func'>errcontext_msg</span></a> 
 
<span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1046"><span class='Ref_to_Func'>set_errcontext_domain</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>domain<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1010"><span class='Ref_to_Func'>errcontext_msg</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><a href="../../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1066"><span class='Ref_to_Func'>errhidestmt</span></a><span class='Parentheses'>(</span><span class='Keyword'>bool </span>hide_stmt<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1085"><span class='Ref_to_Func'>errhidecontext</span></a><span class='Parentheses'>(</span><span class='Keyword'>bool </span>hide_ctx<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1106"><span class='Ref_to_Func'>errfunction</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>funcname<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1123"><span class='Ref_to_Func'>errposition</span></a><span class='Parentheses'>(</span><span class='Keyword'>int </span>cursorpos<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1139"><span class='Ref_to_Func'>internalerrposition</span></a><span class='Parentheses'>(</span><span class='Keyword'>int </span>cursorpos<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1159"><span class='Ref_to_Func'>internalerrquery</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>query<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1189"><span class='Ref_to_Func'>err_generic_string</span></a><span class='Parentheses'>(</span><span class='Keyword'>int </span>field<span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><a href="../../test/isolation/specparse.y.html#LN26"><span class='Ref_to_Global_Var'>str</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1238"><span class='Ref_to_Func'>geterrcode</span></a><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1255"><span class='Ref_to_Func'>geterrposition</span></a><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>extern int</span>  <a href="../../backend/utils/error/elog.c.html#LN1272"><span class='Ref_to_Func'>getinternalerrposition</span></a><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/*---------- 
 * Old-style error reporting API: to be used in this way: 
 *      elog(ERROR, "portal \"%s\" not found", stmt-&GT;portalname); 
 *---------- 
 */ 
</span><span class='Directive'>#ifdef</span> HAVE__VA_ARGS 
<span class='Comment_Multi_Line'>/* 
 * If we have variadic macros, we can give the compiler a hint about the 
 * call not returning when elevel &GT;= ERROR.  See comments for ereport(). 
 * Note that historically elog() has called elog_start (which saves errno) 
 * before evaluating "elevel", so we preserve that behavior here. 
 */ 
</span><span class='Directive'>#ifdef</span> HAVE__BUILTIN_CONSTANT_P 
<span class='Keyword'>#define </span><a href="../../backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../backend/commands/vacuumlazy.c.html#LN136"><span class='Ref_to_Global_Var'>elevel</span></a><span class='Delimiter'>, </span><span class='Operator'>...</span><span class='Parentheses'>)</span>  <span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <a href="elog.h.html#LN223"><span class='Ref_to_Proto'>elog_start</span></a><span class='Parentheses'>(</span>__FILE__<span class='Delimiter'>, </span>__LINE__<span class='Delimiter'>, </span><a href="../c.h.html#LN176"><span class='Ref_to_Const'>PG_FUNCNAME_MACRO</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <a href="elog.h.html#LN224"><span class='Ref_to_Func'>elog_finish</span></a><span class='Parentheses'>(</span><a href="../../backend/commands/vacuumlazy.c.html#LN136"><span class='Ref_to_Global_Var'>elevel</span></a><span class='Delimiter'>, </span>__VA_ARGS__<span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>__builtin_constant_p<span class='Parentheses'>(</span><a href="../../backend/commands/vacuumlazy.c.html#LN136"><span class='Ref_to_Global_Var'>elevel</span></a><span class='Parentheses'>) </span><span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="../../backend/commands/vacuumlazy.c.html#LN136"><span class='Ref_to_Global_Var'>elevel</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT;= </span><a href="../port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Parentheses'>)</span> <span class='Operator'>\ 
</span>            <a href="../c.h.html#LN941"><span class='Ref_to_Macro'>pg_unreachable</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end errdetail_plural &raquo; </span> <span class='Control'>while</span><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span><span class='Directive'>#else</span>                           <span class='Comment_Single_Line'>/* !HAVE__BUILTIN_CONSTANT_P */ 
</span><a name="LN206"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>elog</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>elevel</span><span class='Delimiter'>, </span><span class='Operator'>...</span><span class='Parentheses'>)</span>  <span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <a href="elog.h.html#LN223"><span class='Ref_to_Proto'>elog_start</span></a><span class='Parentheses'>(</span>__FILE__<span class='Delimiter'>, </span>__LINE__<span class='Delimiter'>, </span><a href="../c.h.html#LN176"><span class='Ref_to_Const'>PG_FUNCNAME_MACRO</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>            <span class='Keyword'>const int </span>elevel_ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="elog.h.html#LN206"><span class='Ref_to_Parameter'>elevel</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>            <a href="elog.h.html#LN224"><span class='Ref_to_Func'>elog_finish</span></a><span class='Parentheses'>(</span>elevel_<span class='Delimiter'>, </span>__VA_ARGS__<span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>elevel_ <span class='Operator'>&GT;= </span><a href="../port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>                <a href="../c.h.html#LN941"><span class='Ref_to_Macro'>pg_unreachable</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Delimiter'>} </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span><span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* HAVE__BUILTIN_CONSTANT_P */ 
</span><span class='Directive'>#else</span>                           <span class='Comment_Single_Line'>/* !HAVE__VA_ARGS */ 
</span><a name="LN218"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>elog</span>  <span class='Operator'>\ 
</span>    <a href="elog.h.html#LN223"><span class='Ref_to_Proto'>elog_start</span></a><span class='Parentheses'>(</span>__FILE__<span class='Delimiter'>, </span>__LINE__<span class='Delimiter'>, </span><a href="../c.h.html#LN176"><span class='Ref_to_Const'>PG_FUNCNAME_MACRO</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>\ 
</span>    <a href="elog.h.html#LN224"><span class='Ref_to_Func'>elog_finish</span></a> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* HAVE__VA_ARGS */ 
</span> 
<a name="LN223"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>elog_start</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>filename</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>lineno</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>funcname</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN224"></a><span class='Keyword'>extern void </span><span class='Declare_Function'>elog_finish</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>elevel</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>fmt</span><span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><a href="../../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>2</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* Support for constructing error strings separately from ereport() calls */ 
</span> 
<span class='Keyword'>extern void </span><a href="../../backend/utils/error/elog.c.html#LN1402"><span class='Ref_to_Func'>pre_format_elog_string</span></a><span class='Parentheses'>(</span><span class='Keyword'>int </span>errnumber<span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span>domain<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>extern char </span><span class='Operator'>*</span><a href="../../backend/utils/error/elog.c.html#LN1411"><span class='Ref_to_Func'>format_elog_string</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><a href="elog.h.html#LN224"><span class='Ref_to_Parameter'>fmt</span></a><span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><a href="../../port/win32security.c.html#LN25"><span class='Ref_to_Func'>pg_attribute_printf</span></a><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* Support for attaching context information to error reports */ 
</span> 
<span class='Control'>typedef</span> <span class='Control'>struct</span> ErrorContextCallback 
<span class='Delimiter'>{ 
</span><a name="LN237"></a>    <span class='Control'>struct</span> ErrorContextCallback <span class='Operator'>*</span><span class='Declare_Local'>previous</span><span class='Delimiter'>; 
</span><a name="LN238"></a>    <span class='Keyword'>void</span>        <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Declare_Local'>callback</span><span class='Parentheses'>) (</span><span class='Keyword'>void </span><span class='Operator'>*</span><a href="elog.h.html#LN239"><span class='Ref_To_Local'>arg</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN239"></a>    <span class='Keyword'>void</span>       <span class='Operator'>*</span><span class='Declare_Local'>arg</span><span class='Delimiter'>; 
} </span>ErrorContextCallback<span class='Delimiter'>; 
</span> 
<a name="LN242"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/sqlca.h.html#LN5"><span class='Ref_to_Const'>PGDLLIMPORT</span></a> ErrorContextCallback <span class='Operator'>*</span><span class='Declare_Var'>error_context_stack</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/*---------- 
 * API for catching ereport(ERROR) exits.  Use these macros like so: 
 * 
 *      PG_TRY(); 
 *      { 
 *          ... code that might throw ereport(ERROR) ... 
 *      } 
 *      PG_CATCH(); 
 *      { 
 *          ... error recovery code ... 
 *      } 
 *      PG_END_TRY(); 
 * 
 * (The braces are not actually necessary, but are recommended so that 
 * pgindent will indent the construct nicely.)  The error recovery code 
 * can optionally do PG_RE_THROW() to propagate the same error outwards. 
 * 
 * Note: while the system will correctly propagate any new ereport(ERROR) 
 * occurring in the recovery section, there is a small limit on the number 
 * of levels this will work for.  It's best to keep the error recovery 
 * section simple enough that it can't generate any new errors, at least 
 * not before popping the error stack. 
 * 
 * Note: an ereport(FATAL) will not be caught by this construct; control will 
 * exit straight through proc_exit().  Therefore, do NOT put any cleanup 
 * of non-process-local resources into the error recovery section, at least 
 * not without taking thought for what will happen during ereport(FATAL). 
 * The PG_ENSURE_ERROR_CLEANUP macros provided by storage/ipc.h may be 
 * helpful in such cases. 
 * 
 * Note: if a local variable of the function containing PG_TRY is modified 
 * in the PG_TRY section and used in the PG_CATCH section, that variable 
 * must be declared "volatile" for POSIX compliance.  This is not mere 
 * pedantry; we have seen bugs from compilers improperly optimizing code 
 * away when such a variable was not marked.  Beware that gcc's -Wclobbered 
 * warnings are just about entirely useless for catching such oversights. 
 *---------- 
 */ 
</span><a name="LN283"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_TRY</span><span class='Parentheses'>()</span>  <span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <a href="../c.h.html#LN1087"><span class='Ref_to_Const'>sigjmp_buf</span></a> <span class='Operator'>*</span>save_exception_stack <span class='Operator'>= </span><a href="../../backend/utils/error/elog.c.html#LN89"><span class='Ref_to_Global_Var'>PG_exception_stack</span></a><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        ErrorContextCallback <span class='Operator'>*</span>save_context_stack <span class='Operator'>= </span><a href="../../backend/utils/error/elog.c.html#LN87"><span class='Ref_to_Global_Var'>error_context_stack</span></a><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <a href="../c.h.html#LN1087"><span class='Ref_to_Const'>sigjmp_buf</span></a> local_sigjmp_buf<span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../c.h.html#LN1088"><span class='Ref_to_Macro'>sigsetjmp</span></a><span class='Parentheses'>(</span>local_sigjmp_buf<span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> <span class='Operator'>\ 
</span>        <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>            <a href="../../backend/utils/error/elog.c.html#LN89"><span class='Ref_to_Global_Var'>PG_exception_stack</span></a> <span class='Operator'>= &</span>local_sigjmp_buf 
 
<a name="LN292"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_CATCH</span><span class='Parentheses'>()</span>  <span class='Operator'>\ 
</span>        <span class='Delimiter'>} </span><span class='Operator'>\ 
</span>        <span class='Control'>else</span> <span class='Operator'>\ 
</span>        <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>            <a href="../../backend/utils/error/elog.c.html#LN89"><span class='Ref_to_Global_Var'>PG_exception_stack</span></a> <span class='Operator'>= </span>save_exception_stack<span class='Delimiter'>; </span><span class='Operator'>\ 
</span>            <a href="../../backend/utils/error/elog.c.html#LN87"><span class='Ref_to_Global_Var'>error_context_stack</span></a> <span class='Operator'>= </span>save_context_stack 
 
<a name="LN299"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_END_TRY</span><span class='Parentheses'>()</span>  <span class='Operator'>\ 
</span>        <span class='Delimiter'>} </span><span class='Operator'>\ 
</span>        <a href="../../backend/utils/error/elog.c.html#LN89"><span class='Ref_to_Global_Var'>PG_exception_stack</span></a> <span class='Operator'>= </span>save_exception_stack<span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <a href="../../backend/utils/error/elog.c.html#LN87"><span class='Ref_to_Global_Var'>error_context_stack</span></a> <span class='Operator'>= </span>save_context_stack<span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Some compilers understand pg_attribute_noreturn(); for other compilers, 
 * insert pg_unreachable() so that the compiler gets the point. 
 */ 
</span><span class='Directive'>#ifdef</span> <a href="../c.h.html#LN645"><span class='Ref_to_Const'>HAVE_PG_ATTRIBUTE_NORETURN</span></a> 
<a name="LN310"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_RE_THROW</span><span class='Parentheses'>()</span>  <span class='Operator'>\ 
</span>    <a href="../../backend/utils/error/elog.c.html#LN1727"><span class='Ref_to_Func'>pg_re_throw</span></a><span class='Parentheses'>() 
</span><span class='Directive'>#else</span> 
<a name="LN313"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_RE_THROW</span><span class='Parentheses'>()</span>  <span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="../../backend/utils/error/elog.c.html#LN1727"><span class='Ref_to_Func'>pg_re_throw</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><a href="../c.h.html#LN941"><span class='Ref_to_Macro'>pg_unreachable</span></a><span class='Parentheses'>())</span> 
<span class='Directive'>#endif</span> 
 
<a name="LN317"></a><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/sqlca.h.html#LN5"><span class='Ref_to_Const'>PGDLLIMPORT</span></a> <a href="../c.h.html#LN1087">sigjmp_buf</a> <span class='Operator'>*</span><span class='Declare_Var'>PG_exception_stack</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* Stuff that error handlers might want to use */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * ErrorData holds the data accumulated during any one ereport() cycle. 
 * Any non-NULL pointers must point to palloc'd data. 
 * (The const pointers are an exception; we assume they point at non-freeable 
 * constant strings.) 
 */ 
</span><a name="LN328"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ErrorData</span> 
<span class='Delimiter'>{ 
</span><a name="LN330"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>elevel</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* error level */ 
</span><a name="LN331"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>output_to_server</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* will report to server log? */ 
</span><a name="LN332"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>output_to_client</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* will report to client? */ 
</span><a name="LN333"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>show_funcname</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* true to force funcname inclusion */ 
</span><a name="LN334"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>hide_stmt</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* true to prevent STATEMENT: inclusion */ 
</span><a name="LN335"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>hide_ctx</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* true to prevent CONTEXT: inclusion */ 
</span><a name="LN336"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>filename</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* __FILE__ of ereport() call */ 
</span><a name="LN337"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>lineno</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* __LINE__ of ereport() call */ 
</span><a name="LN338"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>funcname</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* __func__ of ereport() call */ 
</span><a name="LN339"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>domain</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* message domain */ 
</span><a name="LN340"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>context_domain</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* message domain for context message */ 
</span><a name="LN341"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>sqlerrcode</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* encoded ERRSTATE */ 
</span><a name="LN342"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>message</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* primary error message (translated) */ 
</span><a name="LN343"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>detail</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* detail error message */ 
</span><a name="LN344"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>detail_log</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* detail error message for server log only */ 
</span><a name="LN345"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>hint</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* hint message */ 
</span><a name="LN346"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>context</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* context message */ 
</span><a name="LN347"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Member'>message_id</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* primary message's id (original string) */ 
</span><a name="LN348"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>schema_name</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* name of schema */ 
</span><a name="LN349"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>table_name</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* name of table */ 
</span><a name="LN350"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>column_name</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* name of column */ 
</span><a name="LN351"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>datatype_name</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* name of datatype */ 
</span><a name="LN352"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>constraint_name</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* name of constraint */ 
</span><a name="LN353"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>cursorpos</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* cursor index into query string */ 
</span><a name="LN354"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>internalpos</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* cursor index into internalquery */ 
</span><a name="LN355"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>internalquery</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* text of internally-generated query */ 
</span><a name="LN356"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>saved_errno</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* errno at entry */ 
</span> 
    <span class='Comment_Multi_Line'>/* context containing associated non-constant strings */ 
</span><a name="LN359"></a>    <span class='Control'>struct</span> <a href="../nodes/memnodes.h.html#LN72"><span class='Ref_to_Struct'>MemoryContextData</span></a> <span class='Operator'>*</span><span class='Declare_Member'>assoc_context</span><span class='Delimiter'>; 
</span><a name="LN360"></a>}<span class='Auto_Annotations'> &laquo; end ErrorData &raquo; </span> <span class='Declare_Typedef'>ErrorData</span><span class='Delimiter'>; 
</span> 
<a name="LN362"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>EmitErrorReport</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN363"></a><span class='Keyword'>extern </span><a href="elog.h.html#LN328"><span class='Ref_to_Struct'>ErrorData</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>CopyErrorData</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN364"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>FreeErrorData</span><span class='Parentheses'>(</span><a href="elog.h.html#LN328"><span class='Ref_to_Struct'>ErrorData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>edata</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN365"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>FlushErrorState</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN366"></a><span class='Keyword'>extern void </span><span class='Declare_Function'>ReThrowError</span><span class='Parentheses'>(</span><a href="elog.h.html#LN328"><span class='Ref_to_Struct'>ErrorData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>edata</span><span class='Parentheses'>) </span><a href="../../backend/replication/logical/tablesync.c.html#LN118"><span class='Ref_to_Func'>pg_attribute_noreturn</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><span class='Keyword'>extern void </span><a href="../../backend/utils/error/elog.c.html#LN1610"><span class='Ref_to_Func'>ThrowErrorData</span></a><span class='Parentheses'>(</span><a href="elog.h.html#LN328"><span class='Ref_to_Struct'>ErrorData</span></a> <span class='Operator'>*</span><a href="elog.h.html#LN366"><span class='Ref_to_Parameter'>edata</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>extern void </span><a href="../../backend/utils/error/elog.c.html#LN1727"><span class='Ref_to_Func'>pg_re_throw</span></a><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="../../backend/replication/logical/tablesync.c.html#LN118"><span class='Ref_to_Func'>pg_attribute_noreturn</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
<span class='Keyword'>extern char </span><span class='Operator'>*</span><a href="../../backend/utils/error/elog.c.html#LN1794"><span class='Ref_to_Func'>GetErrorContextStack</span></a><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Hook for intercepting messages before they are sent to the server log */ 
</span><span class='Control'>typedef</span> <span class='Keyword'>void </span><span class='Parentheses'>(</span><span class='Operator'>*</span>emit_log_hook_type<span class='Parentheses'>) (</span><a href="elog.h.html#LN328"><span class='Ref_to_Struct'>ErrorData</span></a> <span class='Operator'>*</span><a href="elog.h.html#LN366"><span class='Ref_to_Parameter'>edata</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Keyword'>extern </span><a href="../../interfaces/ecpg/include/sqlca.h.html#LN5"><span class='Ref_to_Const'>PGDLLIMPORT</span></a> emit_log_hook_type <a href="../../backend/utils/error/elog.c.html#LN100"><span class='Ref_to_Global_Var'>emit_log_hook</span></a><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* GUC-configurable parameters */ 
</span> 
<span class='Control'>typedef</span> <span class='Control'>enum</span> 
<span class='Delimiter'>{ 
</span>    PGERROR_TERSE<span class='Delimiter'>,</span>              <span class='Comment_Single_Line'>/* single-line error messages */ 
</span>    PGERROR_DEFAULT<span class='Delimiter'>,</span>            <span class='Comment_Single_Line'>/* recommended style */ 
</span>    PGERROR_VERBOSE             <span class='Comment_Single_Line'>/* all the facts, ma'am */ 
</span><span class='Delimiter'>}</span>   PGErrorVerbosity<span class='Delimiter'>; 
</span> 
<a name="LN386"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>Log_error_verbosity</span><span class='Delimiter'>; 
</span><a name="LN387"></a><span class='Keyword'>extern char </span><span class='Operator'>*</span><span class='Declare_Var'>Log_line_prefix</span><span class='Delimiter'>; 
</span><a name="LN388"></a><span class='Keyword'>extern int</span>  <span class='Declare_Var'>Log_destination</span><span class='Delimiter'>; 
</span><a name="LN389"></a><span class='Keyword'>extern char </span><span class='Operator'>*</span><span class='Declare_Var'>Log_destination_string</span><span class='Delimiter'>; 
</span><a name="LN390"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>syslog_sequence_numbers</span><span class='Delimiter'>; 
</span><a name="LN391"></a><span class='Keyword'>extern bool </span><span class='Declare_Var'>syslog_split_messages</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Log destination bitmap */ 
</span><a name="LN394"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LOG_DESTINATION_STDERR</span>   <span class='Number'>1</span> 
<a name="LN395"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LOG_DESTINATION_SYSLOG</span>   <span class='Number'>2</span> 
<a name="LN396"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LOG_DESTINATION_EVENTLOG</span> <span class='Number'>4</span> 
<a name="LN397"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>LOG_DESTINATION_CSVLOG</span>   <span class='Number'>8</span> 
 
<span class='Comment_Multi_Line'>/* Other exported functions */ 
</span><a name="LN400"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>DebugFileOpen</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN401"></a><span class='Keyword'>extern char </span><span class='Operator'>*</span><span class='Declare_Prototype'>unpack_sql_state</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>sql_state</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN402"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>in_error_recursion_trouble</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#ifdef</span> HAVE_SYSLOG 
<a name="LN405"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>set_syslog_parameters</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>ident</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>facility</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Write errors to stderr (or by equal means when stderr is 
 * not available). Used before ereport/elog can be used 
 * safely (memory context, GUC load etc) 
 */ 
</span><a name="LN413"></a><span class='Keyword'>extern void </span><a href="../../bin/pg_dump/parallel.c.html#LN179"><span class='Ref_to_Macro'>write_stderr</span></a><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span>fmt<span class='Delimiter'>,</span><span class='Operator'>...</span><span class='Parentheses'>) </span><span class='Declare_Var'>pg_attribute_printf</span><span class='Parentheses'>(</span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* ELOG_H */ 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>