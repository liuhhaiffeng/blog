<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\include\utils\rel.h</title>
<LINK REL=StyleSheet HREF="../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\include\utils\rel.h</b></p></td>
<td align='right'>
Wed Jun 14 08:26:08 2017
</td></tr>
<tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * rel.h 
 *    POSTGRES relation descriptor (a/k/a relcache entry) definitions. 
 * 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * src/include/utils/rel.h 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Directive'>#ifndef</span> <a href="rel.h.html#LN14"><span class='Ref_to_Const'>REL_H</span></a> 
<a name="LN14"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>REL_H</span> 
 
<span class='Keyword'>#include </span><span class='String'>"access/tupdesc.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"access/xlog.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_class.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_index.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_publication.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"fmgr.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"nodes/bitmapset.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"rewrite/prs2lock.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/block.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"storage/relfilenode.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/relcache.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/reltrigger.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * LockRelId and LockInfo really belong to lmgr.h, but it's more convenient 
 * to declare them here so we can have a LockInfoData field in a Relation. 
 */ 
</span> 
<a name="LN35"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>LockRelId</span> 
<span class='Delimiter'>{ 
</span><a name="LN37"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>relId</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* a relation identifier */ 
</span><a name="LN38"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>dbId</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* a database identifier */ 
</span><a name="LN39"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>LockRelId</span><span class='Delimiter'>; 
</span> 
<a name="LN41"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>LockInfoData</span> 
<span class='Delimiter'>{ 
</span><a name="LN43"></a>    <a href="rel.h.html#LN35"><span class='Ref_to_Struct'>LockRelId</span></a>   <span class='Declare_Member'>lockRelId</span><span class='Delimiter'>; 
</span><a name="LN44"></a>} <span class='Declare_Typedef'>LockInfoData</span><span class='Delimiter'>; 
</span> 
<a name="LN46"></a><span class='Control'>typedef</span> <a href="rel.h.html#LN41"><span class='Ref_to_Struct'>LockInfoData</span></a> <span class='Operator'>*</span><span class='Declare_Typedef'>LockInfo</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Information about the partition key of a relation 
 */ 
</span><a name="LN51"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>PartitionKeyData</span> 
<span class='Delimiter'>{ 
</span><a name="LN53"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>strategy</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* partitioning strategy */ 
</span><a name="LN54"></a>    <a href="../c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>       <span class='Declare_Member'>partnatts</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* number of columns in the partition key */ 
</span><a name="LN55"></a>    <a href="../access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a> <span class='Operator'>*</span><span class='Declare_Member'>partattrs</span><span class='Delimiter'>;</span>      <span class='Comment_Multi_Line'>/* attribute numbers of columns in the 
                                 * partition key */ 
</span><a name="LN57"></a>    <a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>partexprs</span><span class='Delimiter'>;</span>      <span class='Comment_Multi_Line'>/* list of expressions in the partitioning 
                                 * key, or NIL */ 
</span> 
<a name="LN60"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Member'>partopfamily</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* OIDs of operator families */ 
</span><a name="LN61"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Member'>partopcintype</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* OIDs of opclass declared input data types */ 
</span><a name="LN62"></a>    <a href="../fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Member'>partsupfunc</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* lookup info for support funcs */ 
</span> 
    <span class='Comment_Multi_Line'>/* Partitioning collation per attribute */ 
</span><a name="LN65"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Member'>partcollation</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Type information per attribute */ 
</span><a name="LN68"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Member'>parttypid</span><span class='Delimiter'>; 
</span><a name="LN69"></a>    <a href="../c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>      <span class='Operator'>*</span><span class='Declare_Member'>parttypmod</span><span class='Delimiter'>; 
</span><a name="LN70"></a>    <a href="../c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>      <span class='Operator'>*</span><span class='Declare_Member'>parttyplen</span><span class='Delimiter'>; 
</span><a name="LN71"></a>    <span class='Keyword'>bool</span>       <span class='Operator'>*</span><span class='Declare_Member'>parttypbyval</span><span class='Delimiter'>; 
</span><a name="LN72"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Member'>parttypalign</span><span class='Delimiter'>; 
</span><a name="LN73"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Member'>parttypcoll</span><span class='Delimiter'>; 
</span><a name="LN74"></a>}<span class='Auto_Annotations'> &laquo; end PartitionKeyData &raquo; </span>   <span class='Declare_Typedef'>PartitionKeyData</span><span class='Delimiter'>; 
</span> 
<a name="LN76"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <a href="rel.h.html#LN51"><span class='Ref_to_Struct'>PartitionKeyData</span></a> <span class='Operator'>*</span><span class='Declare_Typedef'>PartitionKey</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Here are the contents of a relation cache entry. 
 */ 
</span> 
<a name="LN82"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>RelationData</span> 
<span class='Delimiter'>{ 
</span><a name="LN84"></a>    <a href="../storage/relfilenode.h.html#LN56"><span class='Ref_to_Struct'>RelFileNode</span></a> <span class='Declare_Member'>rd_node</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* relation physical identifier */ 
</span>    <span class='Comment_Multi_Line'>/* use "struct" here to avoid needing to include smgr.h: */ 
</span><a name="LN86"></a>    <span class='Control'>struct</span> <a href="../storage/smgr.h.html#LN39"><span class='Ref_to_Struct'>SMgrRelationData</span></a> <span class='Operator'>*</span><span class='Declare_Member'>rd_smgr</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* cached file handle, or NULL */ 
</span><a name="LN87"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>rd_refcnt</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* reference count */ 
</span><a name="LN88"></a>    <a href="../storage/backendid.h.html#LN20"><span class='Ref_to_Typedef'>BackendId</span></a>   <span class='Declare_Member'>rd_backend</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* owning backend id, if temporary relation */ 
</span><a name="LN89"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>rd_islocaltemp</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* rel is a temp rel of this session */ 
</span><a name="LN90"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>rd_isnailed</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* rel is nailed in cache */ 
</span><a name="LN91"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>rd_isvalid</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* relcache entry is valid */ 
</span><a name="LN92"></a>    <span class='Keyword'>char</span>        <span class='Declare_Member'>rd_indexvalid</span><span class='Delimiter'>;</span>  <span class='Comment_Multi_Line'>/* state of rd_indexlist: 0 = not valid, 1 = 
                                 * valid, 2 = temporarily forced */ 
</span><a name="LN94"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>rd_statvalid</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* is rd_statlist valid? */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * rd_createSubid is the ID of the highest subtransaction the rel has 
     * survived into; or zero if the rel was not created in the current top 
     * transaction.  This can be now be relied on, whereas previously it could 
     * be "forgotten" in earlier releases. Likewise, rd_newRelfilenodeSubid is 
     * the ID of the highest subtransaction the relfilenode change has 
     * survived into, or zero if not changed in the current transaction (or we 
     * have forgotten changing it). rd_newRelfilenodeSubid can be forgotten 
     * when a relation has multiple new relfilenodes within a single 
     * transaction, with one of them occurring in a subsequently aborted 
     * subtransaction, e.g. BEGIN; TRUNCATE t; SAVEPOINT save; TRUNCATE t; 
     * ROLLBACK TO save; -- rd_newRelfilenode is now forgotten 
     */ 
</span><a name="LN109"></a>    <a href="../c.h.html#LN400"><span class='Ref_to_Typedef'>SubTransactionId</span></a> <span class='Declare_Member'>rd_createSubid</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* rel was created in current xact */ 
</span><a name="LN110"></a>    <a href="../c.h.html#LN400"><span class='Ref_to_Typedef'>SubTransactionId</span></a> <span class='Declare_Member'>rd_newRelfilenodeSubid</span><span class='Delimiter'>;</span>    <span class='Comment_Multi_Line'>/* new relfilenode assigned in 
                                                 * current xact */ 
</span> 
<a name="LN113"></a>    <a href="../catalog/pg_class.h.html#LN94"><span class='Ref_to_Typedef'>Form_pg_class</span></a> <span class='Declare_Member'>rd_rel</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* RELATION tuple */ 
</span><a name="LN114"></a>    <a href="../access/tupdesc.h.html#LN70"><span class='Ref_to_Typedef'>TupleDesc</span></a>   <span class='Declare_Member'>rd_att</span><span class='Delimiter'>;</span>         <span class='Comment_Single_Line'>/* tuple descriptor */ 
</span><a name="LN115"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>rd_id</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* relation's object id */ 
</span><a name="LN116"></a>    <a href="rel.h.html#LN41"><span class='Ref_to_Struct'>LockInfoData</span></a> <span class='Declare_Member'>rd_lockInfo</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* lock mgr's info for locking relation */ 
</span><a name="LN117"></a>    <a href="../rewrite/prs2lock.h.html#LN39"><span class='Ref_to_Struct'>RuleLock</span></a>   <span class='Operator'>*</span><span class='Declare_Member'>rd_rules</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* rewrite rules */ 
</span><a name="LN118"></a>    <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Member'>rd_rulescxt</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* private memory cxt for rd_rules, if any */ 
</span><a name="LN119"></a>    <a href="reltrigger.h.html#LN45"><span class='Ref_to_Struct'>TriggerDesc</span></a> <span class='Operator'>*</span><span class='Declare_Member'>trigdesc</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* Trigger info, or NULL if rel has none */ 
</span>    <span class='Comment_Multi_Line'>/* use "struct" here to avoid needing to include rowsecurity.h: */ 
</span><a name="LN121"></a>    <span class='Control'>struct</span> <a href="../rewrite/rowsecurity.h.html#LN30"><span class='Ref_to_Struct'>RowSecurityDesc</span></a> <span class='Operator'>*</span><span class='Declare_Member'>rd_rsdesc</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* row security policies, or NULL */ 
</span> 
    <span class='Comment_Multi_Line'>/* data managed by RelationGetFKeyList: */ 
</span><a name="LN124"></a>    <a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>rd_fkeylist</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* list of ForeignKeyCacheInfo (see below) */ 
</span><a name="LN125"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>rd_fkeyvalid</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* true if list has been computed */ 
</span> 
<a name="LN127"></a>    <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Member'>rd_partkeycxt</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* private memory cxt for the below */ 
</span><a name="LN128"></a>    <span class='Control'>struct</span> <a href="rel.h.html#LN51"><span class='Ref_to_Struct'>PartitionKeyData</span></a> <span class='Operator'>*</span><span class='Declare_Member'>rd_partkey</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* partition key, or NULL */ 
</span><a name="LN129"></a>    <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Member'>rd_pdcxt</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* private context for partdesc */ 
</span><a name="LN130"></a>    <span class='Control'>struct</span> <a href="../catalog/partition.h.html#LN32"><span class='Ref_to_Struct'>PartitionDescData</span></a> <span class='Operator'>*</span><span class='Declare_Member'>rd_partdesc</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* partitions, or NULL */ 
</span><a name="LN131"></a>    <a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>rd_partcheck</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* partition CHECK quals */ 
</span> 
    <span class='Comment_Multi_Line'>/* data managed by RelationGetIndexList: */ 
</span><a name="LN134"></a>    <a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>rd_indexlist</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* list of OIDs of indexes on relation */ 
</span><a name="LN135"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>rd_oidindex</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* OID of unique index on OID, if any */ 
</span><a name="LN136"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>rd_pkindex</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* OID of primary key, if any */ 
</span><a name="LN137"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>rd_replidindex</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* OID of replica identity index, if any */ 
</span> 
    <span class='Comment_Multi_Line'>/* data managed by RelationGetStatExtList: */ 
</span><a name="LN140"></a>    <a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>rd_statlist</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* list of OIDs of extended stats */ 
</span> 
    <span class='Comment_Multi_Line'>/* data managed by RelationGetIndexAttrBitmap: */ 
</span><a name="LN143"></a>    <a href="../nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a>  <span class='Operator'>*</span><span class='Declare_Member'>rd_indexattr</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* identifies columns used in indexes */ 
</span><a name="LN144"></a>    <a href="../nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a>  <span class='Operator'>*</span><span class='Declare_Member'>rd_keyattr</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* cols that can be ref'd by foreign keys */ 
</span><a name="LN145"></a>    <a href="../nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a>  <span class='Operator'>*</span><span class='Declare_Member'>rd_pkattr</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* cols included in primary key */ 
</span><a name="LN146"></a>    <a href="../nodes/bitmapset.h.html#LN36"><span class='Ref_to_Struct'>Bitmapset</span></a>  <span class='Operator'>*</span><span class='Declare_Member'>rd_idattr</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* included in replica identity index */ 
</span> 
<a name="LN148"></a>    <a href="../catalog/pg_publication.h.html#LN73"><span class='Ref_to_Struct'>PublicationActions</span></a> <span class='Operator'>*</span><span class='Declare_Member'>rd_pubactions</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* publication actions */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * rd_options is set whenever rd_rel is loaded into the relcache entry. 
     * Note that you can NOT look into rd_rel for this data.  NULL means "use 
     * defaults". 
     */ 
</span><a name="LN155"></a>    <a href="../c.h.html#LN451"><span class='Ref_to_Typedef'>bytea</span></a>      <span class='Operator'>*</span><span class='Declare_Member'>rd_options</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* parsed pg_class.reloptions */ 
</span> 
    <span class='Comment_Multi_Line'>/* These are non-NULL only for an index relation: */ 
</span><a name="LN158"></a>    <a href="../catalog/pg_index.h.html#LN66"><span class='Ref_to_Typedef'>Form_pg_index</span></a> <span class='Declare_Member'>rd_index</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* pg_index tuple describing this index */ 
</span>    <span class='Comment_Multi_Line'>/* use "struct" here to avoid needing to include htup.h: */ 
</span><a name="LN160"></a>    <span class='Control'>struct</span> <a href="../access/htup.h.html#LN61"><span class='Ref_to_Struct'>HeapTupleData</span></a> <span class='Operator'>*</span><span class='Declare_Member'>rd_indextuple</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* all of pg_index tuple */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * index access support info (used only for an index relation) 
     * 
     * Note: only default support procs for each opclass are cached, namely 
     * those with lefttype and righttype equal to the opclass's opcintype. The 
     * arrays are indexed by support function number, which is a sufficient 
     * identifier given that restriction. 
     * 
     * Note: rd_amcache is available for index AMs to cache private data about 
     * an index.  This must be just a cache since it may get reset at any time 
     * (in particular, it will get reset by a relcache inval message for the 
     * index).  If used, it must point to a single memory chunk palloc'd in 
     * rd_indexcxt.  A relcache reset will include freeing that chunk and 
     * setting rd_amcache = NULL. 
     */ 
</span><a name="LN177"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>rd_amhandler</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* OID of index AM's handler function */ 
</span><a name="LN178"></a>    <a href="palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Member'>rd_indexcxt</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* private memory cxt for this stuff */ 
</span>    <span class='Comment_Multi_Line'>/* use "struct" here to avoid needing to include amapi.h: */ 
</span><a name="LN180"></a>    <span class='Control'>struct</span> <a href="../access/amapi.h.html#LN158"><span class='Ref_to_Struct'>IndexAmRoutine</span></a> <span class='Operator'>*</span><span class='Declare_Member'>rd_amroutine</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* index AM's API struct */ 
</span><a name="LN181"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Member'>rd_opfamily</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* OIDs of op families for each index col */ 
</span><a name="LN182"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Member'>rd_opcintype</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* OIDs of opclass declared input data types */ 
</span><a name="LN183"></a>    <a href="../c.h.html#LN394"><span class='Ref_to_Typedef'>RegProcedure</span></a> <span class='Operator'>*</span><span class='Declare_Member'>rd_support</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* OIDs of support procedures */ 
</span><a name="LN184"></a>    <a href="../fmgr.h.html#LN55"><span class='Ref_to_Struct'>FmgrInfo</span></a>   <span class='Operator'>*</span><span class='Declare_Member'>rd_supportinfo</span><span class='Delimiter'>; </span><span class='Comment_Single_Line'>/* lookup info for support procedures */ 
</span><a name="LN185"></a>    <a href="../c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a>      <span class='Operator'>*</span><span class='Declare_Member'>rd_indoption</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* per-column AM-specific flags */ 
</span><a name="LN186"></a>    <a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>rd_indexprs</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* index expression trees, if any */ 
</span><a name="LN187"></a>    <a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Member'>rd_indpred</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* index predicate tree, if any */ 
</span><a name="LN188"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Member'>rd_exclops</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* OIDs of exclusion operators, if any */ 
</span><a name="LN189"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Member'>rd_exclprocs</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* OIDs of exclusion ops' procs, if any */ 
</span><a name="LN190"></a>    <a href="../c.h.html#LN266"><span class='Ref_to_Typedef'>uint16</span></a>     <span class='Operator'>*</span><span class='Declare_Member'>rd_exclstrats</span><span class='Delimiter'>;</span>  <span class='Comment_Single_Line'>/* exclusion ops' strategy numbers, if any */ 
</span><a name="LN191"></a>    <span class='Keyword'>void</span>       <span class='Operator'>*</span><span class='Declare_Member'>rd_amcache</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* available for use by index AM */ 
</span><a name="LN192"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>        <span class='Operator'>*</span><span class='Declare_Member'>rd_indcollation</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* OIDs of index collations */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * foreign-table support 
     * 
     * rd_fdwroutine must point to a single memory chunk palloc'd in 
     * CacheMemoryContext.  It will be freed and reset to NULL on a relcache 
     * reset. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* use "struct" here to avoid needing to include fdwapi.h: */ 
</span><a name="LN203"></a>    <span class='Control'>struct</span> <a href="../foreign/fdwapi.h.html#LN168"><span class='Ref_to_Struct'>FdwRoutine</span></a> <span class='Operator'>*</span><span class='Declare_Member'>rd_fdwroutine</span><span class='Delimiter'>;</span>   <span class='Comment_Single_Line'>/* cached function pointers, or NULL */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Hack for CLUSTER, rewriting ALTER TABLE, etc: when writing a new 
     * version of a table, we need to make any toast pointers inserted into it 
     * have the existing toast table's OID, not the OID of the transient toast 
     * table.  If rd_toastoid isn't InvalidOid, it is the OID to place in 
     * toast pointers inserted into this rel.  (Note it's set on the new 
     * version of the main heap, not the toast table itself.)  This also 
     * causes toast_save_datum() to try to preserve toast value OIDs. 
     */ 
</span><a name="LN214"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>rd_toastoid</span><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* Real TOAST table's OID, or InvalidOid */ 
</span> 
    <span class='Comment_Multi_Line'>/* use "struct" here to avoid needing to include pgstat.h: */ 
</span><a name="LN217"></a>    <span class='Control'>struct</span> <a href="../pgstat.h.html#LN152"><span class='Ref_to_Struct'>PgStat_TableStatus</span></a> <span class='Operator'>*</span><span class='Declare_Member'>pgstat_info</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* statistics collection area */ 
</span><a name="LN218"></a><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end RelationData &raquo; </span> <span class='Declare_Typedef'>RelationData</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * ForeignKeyCacheInfo 
 *      Information the relcache can cache about foreign key constraints 
 * 
 * This is basically just an image of relevant columns from pg_constraint. 
 * We make it a subclass of Node so that copyObject() can be used on a list 
 * of these, but we also ensure it is a "flat" object without substructure, 
 * so that list_free_deep() is sufficient to free such a list. 
 * The per-FK-column arrays can be fixed-size because we allow at most 
 * INDEX_MAX_KEYS columns in a foreign key constraint. 
 * 
 * Currently, we only cache fields of interest to the planner, but the 
 * set of fields could be expanded in future. 
 */ 
</span><a name="LN235"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ForeignKeyCacheInfo</span> 
<span class='Delimiter'>{ 
</span><a name="LN237"></a>    <a href="../nodes/nodes.h.html#LN25"><span class='Ref_to_Enum'>NodeTag</span></a>     <span class='Declare_Member'>type</span><span class='Delimiter'>; 
</span><a name="LN238"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>conrelid</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* relation constrained by the foreign key */ 
</span><a name="LN239"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>confrelid</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* relation referenced by the foreign key */ 
</span><a name="LN240"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>nkeys</span><span class='Delimiter'>;</span>          <span class='Comment_Single_Line'>/* number of columns in the foreign key */ 
</span>    <span class='Comment_Multi_Line'>/* these arrays each have nkeys valid entries: */ 
</span><a name="LN242"></a>    <a href="../access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Member'>conkey</span><span class='Delimiter'>[</span><a href="../pg_config_manual.h.html#LN45"><span class='Ref_to_Const'>INDEX_MAX_KEYS</span></a><span class='Delimiter'>]; </span><span class='Comment_Single_Line'>/* cols in referencing table */ 
</span><a name="LN243"></a>    <a href="../access/attnum.h.html#LN20"><span class='Ref_to_Typedef'>AttrNumber</span></a>  <span class='Declare_Member'>confkey</span><span class='Delimiter'>[</span><a href="../pg_config_manual.h.html#LN45"><span class='Ref_to_Const'>INDEX_MAX_KEYS</span></a><span class='Delimiter'>];</span>        <span class='Comment_Single_Line'>/* cols in referenced table */ 
</span><a name="LN244"></a>    <a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Member'>conpfeqop</span><span class='Delimiter'>[</span><a href="../pg_config_manual.h.html#LN45"><span class='Ref_to_Const'>INDEX_MAX_KEYS</span></a><span class='Delimiter'>];</span>      <span class='Comment_Single_Line'>/* PK = FK operator OIDs */ 
</span><a name="LN245"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>ForeignKeyCacheInfo</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * StdRdOptions 
 *      Standard contents of rd_options for heaps and generic indexes. 
 * 
 * RelationGetFillFactor() and RelationGetTargetPageFreeSpace() can only 
 * be applied to relations that use this format or a superset for 
 * private options data. 
 */ 
</span> <span class='Comment_Multi_Line'>/* autovacuum-related reloptions. */ 
</span><a name="LN257"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>AutoVacOpts</span> 
<span class='Delimiter'>{ 
</span><a name="LN259"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>enabled</span><span class='Delimiter'>; 
</span><a name="LN260"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>vacuum_threshold</span><span class='Delimiter'>; 
</span><a name="LN261"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>analyze_threshold</span><span class='Delimiter'>; 
</span><a name="LN262"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>vacuum_cost_delay</span><span class='Delimiter'>; 
</span><a name="LN263"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>vacuum_cost_limit</span><span class='Delimiter'>; 
</span><a name="LN264"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>freeze_min_age</span><span class='Delimiter'>; 
</span><a name="LN265"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>freeze_max_age</span><span class='Delimiter'>; 
</span><a name="LN266"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>freeze_table_age</span><span class='Delimiter'>; 
</span><a name="LN267"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>multixact_freeze_min_age</span><span class='Delimiter'>; 
</span><a name="LN268"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>multixact_freeze_max_age</span><span class='Delimiter'>; 
</span><a name="LN269"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>multixact_freeze_table_age</span><span class='Delimiter'>; 
</span><a name="LN270"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>log_min_duration</span><span class='Delimiter'>; 
</span><a name="LN271"></a>    <a href="../c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Member'>vacuum_scale_factor</span><span class='Delimiter'>; 
</span><a name="LN272"></a>    <a href="../c.h.html#LN380"><span class='Ref_to_Typedef'>float8</span></a>      <span class='Declare_Member'>analyze_scale_factor</span><span class='Delimiter'>; 
</span><a name="LN273"></a>} <span class='Declare_Typedef'>AutoVacOpts</span><span class='Delimiter'>; 
</span> 
<a name="LN275"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>StdRdOptions</span> 
<span class='Delimiter'>{ 
</span><a name="LN277"></a>    <a href="../c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Member'>vl_len_</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* varlena header (do not touch directly!) */ 
</span><a name="LN278"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>fillfactor</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* page fill factor in percent (0..100) */ 
</span><a name="LN279"></a>    <a href="rel.h.html#LN257"><span class='Ref_to_Struct'>AutoVacOpts</span></a> <span class='Declare_Member'>autovacuum</span><span class='Delimiter'>;</span>     <span class='Comment_Single_Line'>/* autovacuum-related options */ 
</span><a name="LN280"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>user_catalog_table</span><span class='Delimiter'>;</span>     <span class='Comment_Multi_Line'>/* use as an additional catalog 
                                         * relation */ 
</span><a name="LN282"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>parallel_workers</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* max number of parallel workers */ 
</span><a name="LN283"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>StdRdOptions</span><span class='Delimiter'>; 
</span> 
<a name="LN285"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>HEAP_MIN_FILLFACTOR</span>         <span class='Number'>10</span> 
<a name="LN286"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>HEAP_DEFAULT_FILLFACTOR</span>     <span class='Number'>100</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationGetFillFactor 
 *      Returns the relation's fillfactor.  Note multiple eval of argument! 
 */ 
</span><a name="LN292"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetFillFactor</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>defaultff</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN292"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options <span class='Operator'>? \ 
</span>     <span class='Parentheses'>((</span><a href="rel.h.html#LN275"><span class='Ref_to_Struct'>StdRdOptions</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="rel.h.html#LN292"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>fillfactor <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="rel.h.html#LN292"><span class='Ref_to_Parameter'>defaultff</span></a><span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationGetTargetPageUsage 
 *      Returns the relation's desired space usage per page in bytes. 
 */ 
</span><a name="LN300"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetTargetPageUsage</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>defaultff</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span>BLCKSZ <span class='Operator'>* </span><a href="rel.h.html#LN292"><span class='Ref_to_Macro'>RelationGetFillFactor</span></a><span class='Parentheses'>(</span><a href="rel.h.html#LN300"><span class='Ref_to_Parameter'>relation</span></a><span class='Delimiter'>, </span><a href="rel.h.html#LN300"><span class='Ref_to_Parameter'>defaultff</span></a><span class='Parentheses'>) </span><span class='Operator'>/ </span><span class='Number'>100</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationGetTargetPageFreeSpace 
 *      Returns the relation's desired freespace per page in bytes. 
 */ 
</span><a name="LN307"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetTargetPageFreeSpace</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>defaultff</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span>BLCKSZ <span class='Operator'>* </span><span class='Parentheses'>(</span><span class='Number'>100</span> <span class='Operator'>- </span><a href="rel.h.html#LN292"><span class='Ref_to_Macro'>RelationGetFillFactor</span></a><span class='Parentheses'>(</span><a href="rel.h.html#LN307"><span class='Ref_to_Parameter'>relation</span></a><span class='Delimiter'>, </span><a href="rel.h.html#LN307"><span class='Ref_to_Parameter'>defaultff</span></a><span class='Parentheses'>))</span> <span class='Operator'>/ </span><span class='Number'>100</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationIsUsedAsCatalogTable 
 *      Returns whether the relation should be treated as a catalog table 
 *      from the pov of logical decoding.  Note multiple eval of argument! 
 */ 
</span><a name="LN315"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationIsUsedAsCatalogTable</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>)</span>  <span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN315"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options <span class='Operator'>&& \ 
</span>     <span class='Parentheses'>((</span><a href="rel.h.html#LN315"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Operator'>-&GT;</span>relkind <span class='Operator'>== </span><a href="../catalog/pg_class.h.html#LN159"><span class='Ref_to_Const'>RELKIND_RELATION</span></a> <span class='Operator'>|| \ 
</span>      <span class='Parentheses'>(</span><a href="rel.h.html#LN315"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Operator'>-&GT;</span>relkind <span class='Operator'>== </span><a href="../catalog/pg_class.h.html#LN164"><span class='Ref_to_Const'>RELKIND_MATVIEW</span></a><span class='Parentheses'>)</span> <span class='Operator'>? \ 
</span>     <span class='Parentheses'>((</span><a href="rel.h.html#LN275"><span class='Ref_to_Struct'>StdRdOptions</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="rel.h.html#LN315"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>user_catalog_table <span class='Operator'>: </span><span class='Boolean'>false</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationGetParallelWorkers 
 *      Returns the relation's parallel_workers reloption setting. 
 *      Note multiple eval of argument! 
 */ 
</span><a name="LN326"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetParallelWorkers</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>defaultpw</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN326"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options <span class='Operator'>? \ 
</span>     <span class='Parentheses'>((</span><a href="rel.h.html#LN275"><span class='Ref_to_Struct'>StdRdOptions</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="rel.h.html#LN326"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>parallel_workers <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="rel.h.html#LN326"><span class='Ref_to_Parameter'>defaultpw</span></a><span class='Parentheses'>))</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * ViewOptions 
 *      Contents of rd_options for views 
 */ 
</span><a name="LN335"></a><span class='Control'>typedef</span> <span class='Control'>struct</span> <span class='Declare_Struct'>ViewOptions</span> 
<span class='Delimiter'>{ 
</span><a name="LN337"></a>    <a href="../c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Member'>vl_len_</span><span class='Delimiter'>;</span>        <span class='Comment_Single_Line'>/* varlena header (do not touch directly!) */ 
</span><a name="LN338"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Member'>security_barrier</span><span class='Delimiter'>; 
</span><a name="LN339"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>check_option_offset</span><span class='Delimiter'>; 
</span><a name="LN340"></a>} <span class='Declare_Typedef'>ViewOptions</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * RelationIsSecurityView 
 *      Returns whether the relation is security view, or not.  Note multiple 
 *      eval of argument! 
 */ 
</span><a name="LN347"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationIsSecurityView</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>)</span>    <span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN347"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options <span class='Operator'>?</span>               <span class='Operator'>\ 
</span>     <span class='Parentheses'>((</span><a href="rel.h.html#LN335"><span class='Ref_to_Struct'>ViewOptions</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="rel.h.html#LN347"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>security_barrier <span class='Operator'>: </span><span class='Boolean'>false</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationHasCheckOption 
 *      Returns true if the relation is a view defined with either the local 
 *      or the cascaded check option.  Note multiple eval of argument! 
 */ 
</span><a name="LN356"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationHasCheckOption</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>)</span>                                    <span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN356"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options <span class='Operator'>&&</span>                                              <span class='Operator'>\ 
</span>     <span class='Parentheses'>((</span><a href="rel.h.html#LN335"><span class='Ref_to_Struct'>ViewOptions</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="rel.h.html#LN356"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>check_option_offset <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationHasLocalCheckOption 
 *      Returns true if the relation is a view defined with the local check 
 *      option.  Note multiple eval of argument! 
 */ 
</span><a name="LN365"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationHasLocalCheckOption</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>)</span>                               <span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN365"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options <span class='Operator'>&&</span>                                              <span class='Operator'>\ 
</span>     <span class='Parentheses'>((</span><a href="rel.h.html#LN335"><span class='Ref_to_Struct'>ViewOptions</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>(</span><a href="rel.h.html#LN365"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>check_option_offset <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>?</span>   <span class='Operator'>\ 
</span>     strcmp<span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>(</span><a href="rel.h.html#LN365"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options <span class='Operator'>+</span>                               <span class='Operator'>\ 
</span>            <span class='Parentheses'>((</span><a href="rel.h.html#LN335"><span class='Ref_to_Struct'>ViewOptions</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="rel.h.html#LN365"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>check_option_offset<span class='Delimiter'>,</span>  <span class='Operator'>\ 
</span>            <span class='String'>"local"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Boolean'>false</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationHasCascadedCheckOption 
 *      Returns true if the relation is a view defined with the cascaded check 
 *      option.  Note multiple eval of argument! 
 */ 
</span><a name="LN377"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationHasCascadedCheckOption</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>)</span>                            <span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN377"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options <span class='Operator'>&&</span>                                              <span class='Operator'>\ 
</span>     <span class='Parentheses'>((</span><a href="rel.h.html#LN335"><span class='Ref_to_Struct'>ViewOptions</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>(</span><a href="rel.h.html#LN377"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>check_option_offset <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>?</span>   <span class='Operator'>\ 
</span>     strcmp<span class='Parentheses'>((</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>)</span> <span class='Parentheses'>(</span><a href="rel.h.html#LN377"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options <span class='Operator'>+</span>                               <span class='Operator'>\ 
</span>            <span class='Parentheses'>((</span><a href="rel.h.html#LN335"><span class='Ref_to_Struct'>ViewOptions</span></a> <span class='Operator'>*</span><span class='Parentheses'>) (</span><a href="rel.h.html#LN377"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_options<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>check_option_offset<span class='Delimiter'>,</span>  <span class='Operator'>\ 
</span>            <span class='String'>"cascaded"</span><span class='Parentheses'>)</span> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>: </span><span class='Boolean'>false</span><span class='Parentheses'>)</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * RelationIsValid 
 *      True iff relation descriptor is valid. 
 */ 
</span><a name="LN389"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationIsValid</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><a href="../c.h.html#LN525"><span class='Ref_to_Macro'>PointerIsValid</span></a><span class='Parentheses'>(</span><a href="rel.h.html#LN389"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>) 
</span> 
<a name="LN391"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>InvalidRelation</span> <span class='Parentheses'>((</span><a href="relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a><span class='Parentheses'>) </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationHasReferenceCountZero 
 *      True iff relation reference count is zero. 
 * 
 * Note: 
 *      Assumes relation descriptor is valid. 
 */ 
</span><a name="LN400"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationHasReferenceCountZero</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>((</span><span class='Keyword'>bool</span><span class='Parentheses'>)((</span><a href="rel.h.html#LN400"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_refcnt <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationGetForm 
 *      Returns pg_class tuple for a relation. 
 * 
 * Note: 
 *      Assumes relation descriptor is valid. 
 */ 
</span><a name="LN410"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetForm</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) ((</span><a href="rel.h.html#LN410"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationGetRelid 
 *      Returns the OID of the relation 
 */ 
</span><a name="LN416"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetRelid</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) ((</span><a href="rel.h.html#LN416"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_id<span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationGetNumberOfAttributes 
 *      Returns the number of attributes in a relation. 
 */ 
</span><a name="LN422"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetNumberOfAttributes</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) ((</span><a href="rel.h.html#LN422"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Operator'>-&GT;</span>relnatts<span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationGetDescr 
 *      Returns tuple descriptor for a relation. 
 */ 
</span><a name="LN428"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetDescr</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) ((</span><a href="rel.h.html#LN428"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_att<span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationGetRelationName 
 *      Returns the rel's name. 
 * 
 * Note that the name is only unique within the containing namespace. 
 */ 
</span><a name="LN436"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetRelationName</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="../c.h.html#LN498"><span class='Ref_to_Macro'>NameStr</span></a><span class='Parentheses'>((</span><a href="rel.h.html#LN436"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Operator'>-&GT;</span>relname<span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationGetNamespace 
 *      Returns the rel's namespace OID. 
 */ 
</span><a name="LN443"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetNamespace</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN443"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Operator'>-&GT;</span>relnamespace<span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationIsMapped 
 *      True if the relation uses the relfilenode map. 
 * 
 * NB: this is only meaningful for relkinds that have storage, else it 
 * will misleadingly say "true". 
 */ 
</span><a name="LN453"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationIsMapped</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN453"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Operator'>-&GT;</span>relfilenode <span class='Operator'>== </span><a href="../postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationOpenSmgr 
 *      Open the relation at the smgr level, if not already done. 
 */ 
</span><a name="LN460"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationOpenSmgr</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="rel.h.html#LN460"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_smgr <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> <span class='Operator'>\ 
</span>            <a href="../storage/smgr.h.html#LN85"><span class='Ref_to_Proto'>smgrsetowner</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>((</span><a href="rel.h.html#LN460"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_smgr<span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="../storage/smgr.h.html#LN83"><span class='Ref_to_Proto'>smgropen</span></a><span class='Parentheses'>((</span><a href="rel.h.html#LN460"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_node<span class='Delimiter'>, </span><span class='Parentheses'>(</span><a href="rel.h.html#LN460"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_backend<span class='Parentheses'>))</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * RelationCloseSmgr 
 *      Close the relation at the smgr level, if not already done. 
 * 
 * Note: smgrclose should unhook from owner pointer, hence the Assert. 
 */ 
</span><a name="LN472"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationCloseSmgr</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="rel.h.html#LN472"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_smgr <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> <span class='Operator'>\ 
</span>        <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>            <a href="../storage/smgr.h.html#LN87"><span class='Ref_to_Proto'>smgrclose</span></a><span class='Parentheses'>((</span><a href="rel.h.html#LN472"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_smgr<span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>((</span><a href="rel.h.html#LN472"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_smgr <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Delimiter'>} </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * RelationGetTargetBlock 
 *      Fetch relation's current insertion target block. 
 * 
 * Returns InvalidBlockNumber if there is no current target block.  Note 
 * that the target block status is discarded on any smgr-level invalidation. 
 */ 
</span><a name="LN488"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetTargetBlock</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span> <span class='Parentheses'>(</span><a href="rel.h.html#LN488"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_smgr <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>? </span><span class='Parentheses'>(</span><a href="rel.h.html#LN488"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_smgr<span class='Operator'>-&GT;</span>smgr_targblock <span class='Operator'>: </span><a href="../storage/block.h.html#LN32"><span class='Ref_to_Const'>InvalidBlockNumber</span></a> <span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationSetTargetBlock 
 *      Set relation's current insertion target block. 
 */ 
</span><a name="LN495"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationSetTargetBlock</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>targblock</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <a href="rel.h.html#LN460"><span class='Ref_to_Macro'>RelationOpenSmgr</span></a><span class='Parentheses'>(</span><a href="rel.h.html#LN495"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>        <span class='Parentheses'>(</span><a href="rel.h.html#LN495"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_smgr<span class='Operator'>-&GT;</span>smgr_targblock <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="rel.h.html#LN495"><span class='Ref_to_Parameter'>targblock</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * RelationNeedsWAL 
 *      True if relation needs WAL. 
 */ 
</span><a name="LN505"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationNeedsWAL</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN505"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Operator'>-&GT;</span>relpersistence <span class='Operator'>== </span><a href="../catalog/pg_class.h.html#LN169"><span class='Ref_to_Const'>RELPERSISTENCE_PERMANENT</span></a><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationUsesLocalBuffers 
 *      True if relation's pages are stored in local buffers. 
 */ 
</span><a name="LN512"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationUsesLocalBuffers</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN512"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Operator'>-&GT;</span>relpersistence <span class='Operator'>== </span><a href="../catalog/pg_class.h.html#LN171"><span class='Ref_to_Const'>RELPERSISTENCE_TEMP</span></a><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RELATION_IS_LOCAL 
 *      If a rel is either temp or newly created in the current transaction, 
 *      it can be assumed to be accessible only to the current backend. 
 *      This is typically used to decide that we can skip acquiring locks. 
 * 
 * Beware of multiple eval of argument 
 */ 
</span><a name="LN523"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RELATION_IS_LOCAL</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN523"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_islocaltemp <span class='Operator'>|| \ 
</span>     <span class='Parentheses'>(</span><a href="rel.h.html#LN523"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_createSubid <span class='Operator'>!= </span><a href="../c.h.html#LN402"><span class='Ref_to_Const'>InvalidSubTransactionId</span></a><span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RELATION_IS_OTHER_TEMP 
 *      Test for a temporary relation that belongs to some other session. 
 * 
 * Beware of multiple eval of argument 
 */ 
</span><a name="LN533"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RELATION_IS_OTHER_TEMP</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="rel.h.html#LN533"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Operator'>-&GT;</span>relpersistence <span class='Operator'>== </span><a href="../catalog/pg_class.h.html#LN171"><span class='Ref_to_Const'>RELPERSISTENCE_TEMP</span></a> <span class='Operator'>&& \ 
</span>     <span class='Operator'>!</span><span class='Parentheses'>(</span><a href="rel.h.html#LN533"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_islocaltemp<span class='Parentheses'>)</span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * RelationIsScannable 
 *      Currently can only be false for a materialized view which has not been 
 *      populated by its query.  This is likely to get more complicated later, 
 *      so use a macro which looks like a function. 
 */ 
</span><a name="LN544"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationIsScannable</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) ((</span><a href="rel.h.html#LN544"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Operator'>-&GT;</span>relispopulated<span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationIsPopulated 
 *      Currently, we don't physically distinguish the "populated" and 
 *      "scannable" properties of matviews, but that may change later. 
 *      Hence, use the appropriate one of these macros in code tests. 
 */ 
</span><a name="LN552"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationIsPopulated</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) ((</span><a href="rel.h.html#LN552"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_rel<span class='Operator'>-&GT;</span>relispopulated<span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationIsAccessibleInLogicalDecoding 
 *      True if we need to log enough information to have access via 
 *      decoding snapshot. 
 */ 
</span><a name="LN559"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationIsAccessibleInLogicalDecoding</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="../access/xlog.h.html#LN161"><span class='Ref_to_Macro'>XLogLogicalInfoActive</span></a><span class='Parentheses'>()</span> <span class='Operator'>&& \ 
</span>     <a href="rel.h.html#LN505"><span class='Ref_to_Macro'>RelationNeedsWAL</span></a><span class='Parentheses'>(</span><a href="rel.h.html#LN559"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span> <span class='Operator'>&& \ 
</span>     <span class='Parentheses'>(</span><a href="../catalog/catalog.h.html#LN31"><span class='Ref_to_Proto'>IsCatalogRelation</span></a><span class='Parentheses'>(</span><a href="rel.h.html#LN559"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>) </span><span class='Operator'>|| </span><a href="rel.h.html#LN315"><span class='Ref_to_Macro'>RelationIsUsedAsCatalogTable</span></a><span class='Parentheses'>(</span><a href="rel.h.html#LN559"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)))</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationIsLogicallyLogged 
 *      True if we need to log enough information to extract the data from the 
 *      WAL stream. 
 * 
 * We don't log information for unlogged tables (since they don't WAL log 
 * anyway) and for system tables (their content is hard to make sense of, and 
 * it would complicate decoding slightly for little gain). Note that we *do* 
 * log information for user defined catalog tables since they presumably are 
 * interesting to the user... 
 */ 
</span><a name="LN575"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationIsLogicallyLogged</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>(</span><a href="../access/xlog.h.html#LN161"><span class='Ref_to_Macro'>XLogLogicalInfoActive</span></a><span class='Parentheses'>() </span><span class='Operator'>&& \ 
</span>     <a href="rel.h.html#LN505"><span class='Ref_to_Macro'>RelationNeedsWAL</span></a><span class='Parentheses'>(</span><a href="rel.h.html#LN575"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>) </span><span class='Operator'>&& \ 
</span>     <span class='Operator'>!</span><a href="../catalog/catalog.h.html#LN31"><span class='Ref_to_Proto'>IsCatalogRelation</span></a><span class='Parentheses'>(</span><a href="rel.h.html#LN575"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>))</span> 
 
<span class='Comment_Multi_Line'>/* 
 * RelationGetPartitionKey 
 *      Returns the PartitionKey of a relation 
 */ 
</span><a name="LN584"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetPartitionKey</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) ((</span><a href="rel.h.html#LN584"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_partkey<span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* 
 * PartitionKey inquiry functions 
 */ 
</span><span class='Keyword'>static inline int 
</span><a name="LN590"></a><span class='Declare_Function'>get_partition_strategy</span><span class='Parentheses'>(</span><a href="rel.h.html#LN76"><span class='Ref_to_Typedef'>PartitionKey</span></a> <span class='Declare_Parameter'>key</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="rel.h.html#LN590"><span class='Ref_to_Parameter'>key</span></a><span class='Operator'>-&GT;</span><a href="rel.h.html#LN53"><span class='Ref_to_Member'>strategy</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static inline int 
</span><a name="LN596"></a><span class='Declare_Function'>get_partition_natts</span><span class='Parentheses'>(</span><a href="rel.h.html#LN76"><span class='Ref_to_Typedef'>PartitionKey</span></a> <span class='Declare_Parameter'>key</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="rel.h.html#LN596"><span class='Ref_to_Parameter'>key</span></a><span class='Operator'>-&GT;</span><a href="rel.h.html#LN54"><span class='Ref_to_Member'>partnatts</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static inline </span><a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN602"></a><span class='Declare_Function'>get_partition_exprs</span><span class='Parentheses'>(</span><a href="rel.h.html#LN76"><span class='Ref_to_Typedef'>PartitionKey</span></a> <span class='Declare_Parameter'>key</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="rel.h.html#LN602"><span class='Ref_to_Parameter'>key</span></a><span class='Operator'>-&GT;</span><a href="rel.h.html#LN57"><span class='Ref_to_Member'>partexprs</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * PartitionKey inquiry functions - one column 
 */ 
</span><span class='Keyword'>static inline </span><a href="../c.h.html#LN254"><span class='Ref_to_Typedef'>int16</span></a> 
<a name="LN611"></a><span class='Declare_Function'>get_partition_col_attnum</span><span class='Parentheses'>(</span><a href="rel.h.html#LN76"><span class='Ref_to_Typedef'>PartitionKey</span></a> <span class='Declare_Parameter'>key</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>col</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="rel.h.html#LN611"><span class='Ref_to_Parameter'>key</span></a><span class='Operator'>-&GT;</span><a href="rel.h.html#LN55"><span class='Ref_to_Member'>partattrs</span></a><span class='Delimiter'>[</span><a href="rel.h.html#LN611"><span class='Ref_to_Parameter'>col</span></a><span class='Delimiter'>]; 
} 
</span> 
<span class='Keyword'>static inline </span><a href="../postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a> 
<a name="LN617"></a><span class='Declare_Function'>get_partition_col_typid</span><span class='Parentheses'>(</span><a href="rel.h.html#LN76"><span class='Ref_to_Typedef'>PartitionKey</span></a> <span class='Declare_Parameter'>key</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>col</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="rel.h.html#LN617"><span class='Ref_to_Parameter'>key</span></a><span class='Operator'>-&GT;</span><a href="rel.h.html#LN68"><span class='Ref_to_Member'>parttypid</span></a><span class='Delimiter'>[</span><a href="rel.h.html#LN617"><span class='Ref_to_Parameter'>col</span></a><span class='Delimiter'>]; 
} 
</span> 
<span class='Keyword'>static inline </span><a href="../c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a> 
<a name="LN623"></a><span class='Declare_Function'>get_partition_col_typmod</span><span class='Parentheses'>(</span><a href="rel.h.html#LN76"><span class='Ref_to_Typedef'>PartitionKey</span></a> <span class='Declare_Parameter'>key</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>col</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="rel.h.html#LN623"><span class='Ref_to_Parameter'>key</span></a><span class='Operator'>-&GT;</span><a href="rel.h.html#LN69"><span class='Ref_to_Member'>parttypmod</span></a><span class='Delimiter'>[</span><a href="rel.h.html#LN623"><span class='Ref_to_Parameter'>col</span></a><span class='Delimiter'>]; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * RelationGetPartitionDesc 
 *      Returns partition descriptor for a relation. 
 */ 
</span><a name="LN632"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>RelationGetPartitionDesc</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>relation</span><span class='Parentheses'>) ((</span><a href="rel.h.html#LN632"><span class='Ref_to_Parameter'>relation</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>rd_partdesc<span class='Parentheses'>)</span> 
 
<span class='Comment_Multi_Line'>/* routines in utils/cache/relcache.c */ 
</span><a name="LN635"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>RelationIncrementReferenceCount</span><span class='Parentheses'>(</span><a href="relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN636"></a><span class='Keyword'>extern void </span><span class='Declare_Prototype'>RelationDecrementReferenceCount</span><span class='Parentheses'>(</span><a href="relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN637"></a><span class='Keyword'>extern bool </span><span class='Declare_Prototype'>RelationHasUnloggedIndex</span><span class='Parentheses'>(</span><a href="relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN638"></a><span class='Keyword'>extern </span><a href="../nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>RelationGetRepsetList</span><span class='Parentheses'>(</span><a href="relcache.h.html#LN20"><span class='Ref_to_Typedef'>Relation</span></a> <span class='Declare_Parameter'>rel</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Directive'>#endif</span>   <span class='Comment_Single_Line'>/* REL_H */ 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>