<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\interfaces\ecpg\pgtypeslib\interval.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\interfaces\ecpg\pgtypeslib\interval.c</b></p></td>
<td align='right'>
Wed Jun 14 08:26:09 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Comment_Multi_Line'>/* src/interfaces/ecpg/pgtypeslib/interval.c */ 
</span> 
<span class='Keyword'>#include </span><span class='String'>"postgres_fe.h"</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;time.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;math.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;limits.h&GT;</span> 
 
<span class='Directive'>#ifdef</span> __FAST_MATH__ 
#error <span class='Operator'>-</span>ffast<span class='Operator'>-</span>math is known to <span class='Control'>break</span> <span class='Keyword'>this </span>code 
<span class='Directive'>#endif</span> 
 
<span class='Keyword'>#include </span><span class='String'>"extern.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"dt.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"pgtypes_error.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"pgtypes_interval.h"</span> 
 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c */ 
</span><span class='Keyword'>static int 
</span><a name="LN18"></a><span class='Declare_Function'>strtoint</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>nptr</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>endptr</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>base</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN20"></a>    <span class='Keyword'>long</span>        <span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span> 
    <a href="interval.c.html#LN20"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span>strtol<span class='Parentheses'>(</span><a href="interval.c.html#LN18"><span class='Ref_to_Parameter'>nptr</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN18"><span class='Ref_to_Parameter'>endptr</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN18"><span class='Ref_to_Parameter'>base</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><span class='Directive'>#ifdef</span> HAVE_LONG_INT_64 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN20"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>!= </span><span class='Parentheses'>(</span><span class='Keyword'>long</span><span class='Parentheses'>)</span> <span class='Parentheses'>((</span><a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a><span class='Parentheses'>) </span><a href="interval.c.html#LN20"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>))</span> 
        errno <span class='Operator'>= </span>ERANGE<span class='Delimiter'>; 
</span><span class='Directive'>#endif</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="interval.c.html#LN20"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c 
 * and changesd struct pg_tm to struct tm 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN34"></a><span class='Declare_Function'>AdjustFractSeconds</span><span class='Parentheses'>(</span><span class='Keyword'>double </span><span class='Declare_Parameter'>frac</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <span class='Comment_Multi_Line'>/* pg_ */ </span><a href="interval.c.html#LN34"><span class='Ref_to_Parameter'>tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><a href="dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fsec</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>scale</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN36"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>sec</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN34"><span class='Ref_to_Parameter'>frac</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN34"><span class='Ref_to_Parameter'>frac</span></a> <span class='Operator'>*= </span><a href="interval.c.html#LN34"><span class='Ref_to_Parameter'>scale</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN36"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="interval.c.html#LN34"><span class='Ref_to_Parameter'>frac</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN34"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN36"><span class='Ref_To_Local'>sec</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN34"><span class='Ref_to_Parameter'>frac</span></a> <span class='Operator'>-= </span><a href="interval.c.html#LN36"><span class='Ref_To_Local'>sec</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="interval.c.html#LN34"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>+= </span><a href="../../../port/rint.c.html#LN20"><span class='Ref_to_Func'>rint</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN34"><span class='Ref_to_Parameter'>frac</span></a> <span class='Operator'>* </span><span class='Number'>1000000</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c 
 * and changesd struct pg_tm to struct tm 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN52"></a><span class='Declare_Function'>AdjustFractDays</span><span class='Parentheses'>(</span><span class='Keyword'>double </span><span class='Declare_Parameter'>frac</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <span class='Comment_Multi_Line'>/* pg_ */ </span><a href="interval.c.html#LN52"><span class='Ref_to_Parameter'>tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><a href="dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fsec</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>scale</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN54"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>extra_days</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN52"><span class='Ref_to_Parameter'>frac</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN52"><span class='Ref_to_Parameter'>frac</span></a> <span class='Operator'>*= </span><a href="interval.c.html#LN52"><span class='Ref_to_Parameter'>scale</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN54"><span class='Ref_To_Local'>extra_days</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="interval.c.html#LN52"><span class='Ref_to_Parameter'>frac</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN52"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN54"><span class='Ref_To_Local'>extra_days</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN52"><span class='Ref_to_Parameter'>frac</span></a> <span class='Operator'>-= </span><a href="interval.c.html#LN54"><span class='Ref_To_Local'>extra_days</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN52"><span class='Ref_to_Parameter'>frac</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN52"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN52"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN85"><span class='Ref_to_Const'>SECS_PER_DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c */ 
</span><span class='Keyword'>static int 
</span><a name="LN67"></a><span class='Declare_Function'>ParseISO8601Number</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>endptr</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>ipart</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Operator'>*</span><span class='Declare_Parameter'>fpart</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN69"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Parentheses'>(</span>isdigit<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><a href="interval.c.html#LN67"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>)</span> <span class='Operator'>|| *</span><a href="interval.c.html#LN67"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'-'</span> <span class='Operator'>|| *</span><a href="interval.c.html#LN67"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>))</span> 
        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>    errno <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN69"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span>strtod<span class='Parentheses'>(</span><a href="interval.c.html#LN67"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN67"><span class='Ref_to_Parameter'>endptr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* did we not see anything that looks like a double? */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN67"><span class='Ref_to_Parameter'>endptr</span></a> <span class='Operator'>== </span><a href="interval.c.html#LN67"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>|| </span>errno <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* watch out for overflow */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN69"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>&LT; </span>INT_MIN <span class='Operator'>|| </span><a href="interval.c.html#LN69"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>&GT; </span>INT_MAX<span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="dt.h.html#LN26"><span class='Ref_to_Const'>DTERR_FIELD_OVERFLOW</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* be very sure we truncate towards zero (cf dtrunc()) */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN69"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="interval.c.html#LN67"><span class='Ref_to_Parameter'>ipart</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span>floor<span class='Parentheses'>(</span><a href="interval.c.html#LN69"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Operator'>*</span><a href="interval.c.html#LN67"><span class='Ref_to_Parameter'>ipart</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><span class='Operator'>-</span>floor<span class='Parentheses'>(</span><span class='Operator'>-</span><a href="interval.c.html#LN69"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="interval.c.html#LN67"><span class='Ref_to_Parameter'>fpart</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN69"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>- *</span><a href="interval.c.html#LN67"><span class='Ref_to_Parameter'>ipart</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end ParseISO8601Number &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c */ 
</span><span class='Keyword'>static int 
</span><a name="LN92"></a><span class='Declare_Function'>ISO8601IntegerWidth</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>fieldstart</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* We might have had a leading '-' */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN92"><span class='Ref_to_Parameter'>fieldstart</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>        <a href="interval.c.html#LN92"><span class='Ref_to_Parameter'>fieldstart</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> strspn<span class='Parentheses'>(</span><a href="interval.c.html#LN92"><span class='Ref_to_Parameter'>fieldstart</span></a><span class='Delimiter'>, </span><span class='String'>"0123456789"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c 
 * and changesd struct pg_tm to struct tm 
 */ 
</span><span class='Keyword'>static inline void 
</span><a name="LN105"></a><span class='Declare_Function'>ClearPgTm</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <span class='Comment_Multi_Line'>/* pg_ */ </span><a href="interval.c.html#LN105"><span class='Ref_to_Parameter'>tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><a href="dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fsec</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="interval.c.html#LN105"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN105"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN105"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN105"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN105"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN105"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="interval.c.html#LN105"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c 
 * 
 * * changesd struct pg_tm to struct tm 
 * 
 * * Made the function static 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN123"></a><span class='Declare_Function'>DecodeISO8601Interval</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, 
</span><a name="LN124"></a>                      <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dtype</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <span class='Comment_Multi_Line'>/* pg_ */ </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><a href="dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fsec</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN126"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>datepart</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span><a name="LN127"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>havefield</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>dtype</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN156"><span class='Ref_to_Const'>DTK_DELTA</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN104"><span class='Ref_to_Func'>ClearPgTm</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>2</span> <span class='Operator'>|| </span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'P'</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span> 
    <a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN138"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>fieldstart</span><span class='Delimiter'>; 
</span><a name="LN139"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span><a name="LN140"></a>        <span class='Keyword'>double</span>      <span class='Declare_Local'>fval</span><span class='Delimiter'>; 
</span><a name="LN141"></a>        <span class='Keyword'>char</span>        <span class='Declare_Local'>unit</span><span class='Delimiter'>; 
</span><a name="LN142"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>dterr</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'T'</span><span class='Parentheses'>)</span>        <span class='Comment_Single_Line'>/* T indicates the beginning of the time part */ 
</span>        <span class='Delimiter'>{ 
</span>            <a href="interval.c.html#LN126"><span class='Ref_To_Local'>datepart</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN127"><span class='Ref_To_Local'>havefield</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="interval.c.html#LN138"><span class='Ref_To_Local'>fieldstart</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span>        <a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN66"><span class='Ref_to_Func'>ParseISO8601Number</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Note: we could step off the end of the string here.  Code below 
         * *must* exit the loop if unit == '\0'. 
         */ 
</span>        <a href="interval.c.html#LN141"><span class='Ref_To_Local'>unit</span></a> <span class='Operator'>= *</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN126"><span class='Ref_To_Local'>datepart</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN141"><span class='Ref_To_Local'>unit</span></a><span class='Parentheses'>)</span>       <span class='Comment_Single_Line'>/* before T: Y M W D */ 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <span class='String'>'Y'</span><span class='Operator'>: 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>+= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>* </span><span class='Number'>12</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'M'</span><span class='Operator'>: 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="../../../backend/utils/adt/datetime.c.html#LN49"><span class='Ref_to_Proto'>AdjustFractDays</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN76"><span class='Ref_to_Const'>DAYS_PER_MONTH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'W'</span><span class='Operator'>: 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>* </span><span class='Number'>7</span><span class='Delimiter'>; 
</span>                    <a href="../../../backend/utils/adt/datetime.c.html#LN49"><span class='Ref_to_Proto'>AdjustFractDays</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><span class='Number'>7</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'D'</span><span class='Operator'>: 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN85"><span class='Ref_to_Const'>SECS_PER_DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'T'</span><span class='Operator'>:</span>       <span class='Comment_Single_Line'>/* ISO 8601 4.4.3.3 Alternative Format / Basic */ 
</span>                <span class='Control'>case</span> <span class='String'>'\0'</span><span class='Operator'>: 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN91"><span class='Ref_to_Func'>ISO8601IntegerWidth</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN138"><span class='Ref_To_Local'>fieldstart</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>8</span> <span class='Operator'>&& !</span><a href="interval.c.html#LN127"><span class='Ref_To_Local'>havefield</span></a><span class='Parentheses'>)</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>/ </span><span class='Number'>10000</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>+= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>/ </span><span class='Number'>100</span><span class='Parentheses'>) </span><span class='Operator'>% </span><span class='Number'>100</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>% </span><span class='Number'>100</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN85"><span class='Ref_to_Const'>SECS_PER_DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN141"><span class='Ref_To_Local'>unit</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                            <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN126"><span class='Ref_To_Local'>datepart</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN127"><span class='Ref_To_Local'>havefield</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Comment_Multi_Line'>/* Else fall through to extended alternative format */ 
</span>                <span class='Control'>case</span> <span class='String'>'-'</span><span class='Operator'>:</span>       <span class='Comment_Multi_Line'>/* ISO 8601 4.4.3.3 Alternative Format, 
                                 * Extended */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN127"><span class='Ref_To_Local'>havefield</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span> 
                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>+= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>* </span><span class='Number'>12</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN141"><span class='Ref_To_Local'>unit</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN141"><span class='Ref_To_Local'>unit</span></a> <span class='Operator'>== </span><span class='String'>'T'</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="interval.c.html#LN126"><span class='Ref_To_Local'>datepart</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN127"><span class='Ref_To_Local'>havefield</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN66"><span class='Ref_to_Func'>ParseISO8601Number</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="../../../backend/utils/adt/datetime.c.html#LN49"><span class='Ref_to_Proto'>AdjustFractDays</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN76"><span class='Ref_to_Const'>DAYS_PER_MONTH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'T'</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="interval.c.html#LN126"><span class='Ref_To_Local'>datepart</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN127"><span class='Ref_To_Local'>havefield</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>!= </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
                    <a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN66"><span class='Ref_to_Func'>ParseISO8601Number</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN85"><span class='Ref_to_Const'>SECS_PER_DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'T'</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="interval.c.html#LN126"><span class='Ref_To_Local'>datepart</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN127"><span class='Ref_To_Local'>havefield</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>continue</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* not a valid date unit suffix */ 
</span>                    <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch unit &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if datepart &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN141"><span class='Ref_To_Local'>unit</span></a><span class='Parentheses'>)</span>       <span class='Comment_Single_Line'>/* after T: H M S */ 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <span class='String'>'H'</span><span class='Operator'>: 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN86"><span class='Ref_to_Const'>SECS_PER_HOUR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'M'</span><span class='Operator'>: 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'S'</span><span class='Operator'>: 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Control'>case</span> <span class='String'>'\0'</span><span class='Operator'>:</span>      <span class='Comment_Single_Line'>/* ISO 8601 4.4.3.3 Alternative Format */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN91"><span class='Ref_to_Func'>ISO8601IntegerWidth</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN138"><span class='Ref_To_Local'>fieldstart</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>6</span> <span class='Operator'>&& !</span><a href="interval.c.html#LN127"><span class='Ref_To_Local'>havefield</span></a><span class='Parentheses'>)</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>/ </span><span class='Number'>10000</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>+= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>/ </span><span class='Number'>100</span><span class='Parentheses'>) </span><span class='Operator'>% </span><span class='Number'>100</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>% </span><span class='Number'>100</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Comment_Multi_Line'>/* Else fall through to extended alternative format */ 
</span>                <span class='Control'>case</span> <span class='String'>':'</span><span class='Operator'>:</span>       <span class='Comment_Multi_Line'>/* ISO 8601 4.4.3.3 Alternative Format, 
                                 * Extended */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN127"><span class='Ref_To_Local'>havefield</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span> 
                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN86"><span class='Ref_to_Const'>SECS_PER_HOUR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN141"><span class='Ref_To_Local'>unit</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span> 
                    <a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN66"><span class='Ref_to_Func'>ParseISO8601Number</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>!= </span><span class='String'>':'</span><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
                    <a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN66"><span class='Ref_to_Func'>ParseISO8601Number</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <a href="interval.c.html#LN142"><span class='Ref_To_Local'>dterr</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a> <span class='Operator'>+= </span><a href="interval.c.html#LN139"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN140"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN124"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN123"><span class='Ref_to_Parameter'>str</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>default</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* not a valid time unit suffix */ 
</span>                    <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch unit &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
        <a href="interval.c.html#LN127"><span class='Ref_To_Local'>havefield</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while *str &raquo; </span> 
 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end DecodeISO8601Interval &raquo; </span> 
 
 
 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c 
 * with 3 exceptions 
 * 
 *  * changesd struct pg_tm to struct tm 
 * 
 *  * ECPG code called this without a 'range' parameter 
 *    removed 'int range' from the argument list and 
 *    places where DecodeTime is called; and added 
 *       int range = INTERVAL_FULL_RANGE; 
 * 
 *  * ECPG semes not to have a global IntervalStyle 
 *    so added 
 *      int IntervalStyle = INTSTYLE_POSTGRES; 
 * 
 *  * Assert wasn't available so removed it. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN337"></a><span class='Declare_Function'>DecodeInterval</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>field</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>ftype</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>nf</span><span class='Delimiter'>,</span>        <span class='Comment_Single_Line'>/* int range, */ 
</span><a name="LN338"></a>               <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>dtype</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <span class='Comment_Multi_Line'>/* pg_ */ </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><a href="dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fsec</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN340"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>IntervalStyle</span> <span class='Operator'>= </span><a href="dt.h.html#LN17"><span class='Ref_to_Const'>INTSTYLE_POSTGRES_VERBOSE</span></a><span class='Delimiter'>; 
</span><a name="LN341"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>range</span> <span class='Operator'>= </span><a href="dt.h.html#LN21"><span class='Ref_to_Const'>INTERVAL_FULL_RANGE</span></a><span class='Delimiter'>; 
</span><a name="LN342"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_before</span> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span><a name="LN343"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span><a name="LN344"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>fmask</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>, 
</span><a name="LN345"></a>                <span class='Declare_Local'>tmask</span><span class='Delimiter'>, 
</span><a name="LN346"></a>                <span class='Declare_Local'>type</span><span class='Delimiter'>; 
</span><a name="LN347"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN348"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>dterr</span><span class='Delimiter'>; 
</span><a name="LN349"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span><a name="LN350"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>fval</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>dtype</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN156"><span class='Ref_to_Const'>DTK_DELTA</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN97"><span class='Ref_to_Const'>IGNORE_DTF</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN104"><span class='Ref_to_Func'>ClearPgTm</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* read through list backwards to pick up units before values */ 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>nf</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>ftype</span></a><span class='Delimiter'>[</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> <a href="dt.h.html#LN140"><span class='Ref_to_Const'>DTK_TIME</span></a><span class='Operator'>: 
</span>                <a href="interval.c.html#LN348"><span class='Ref_To_Local'>dterr</span></a> <span class='Operator'>= </span><a href="../../../backend/utils/adt/datetime.c.html#LN40"><span class='Ref_to_Proto'>DecodeTime</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>field</span></a><span class='Delimiter'>[</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>],</span>    <span class='Comment_Single_Line'>/* range, */ 
</span>                                   <span class='Operator'>&</span><a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN348"><span class='Ref_To_Local'>dterr</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <a href="interval.c.html#LN348"><span class='Ref_To_Local'>dterr</span></a><span class='Delimiter'>; 
</span>                <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN160"><span class='Ref_to_Const'>DTK_DAY</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <a href="dt.h.html#LN141"><span class='Ref_to_Const'>DTK_TZ</span></a><span class='Operator'>: 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Timezone is a token with a leading sign character and at 
                 * least one digit; there could be ':', '.', '-' embedded in 
                 * it as well. 
                 */ 
</span>                <span class='Comment_Multi_Line'>/* Assert(*field[i] == '-' || *field[i] == '+'); */ 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * Try for hh:mm or hh:mm:ss.  If not, fall through to 
                 * DTK_NUMBER case, which can handle signed float numbers and 
                 * signed year-month values. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>strchr<span class='Parentheses'>(</span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>field</span></a><span class='Delimiter'>[</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='String'>':'</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& 
</span>                    <a href="../../../backend/utils/adt/datetime.c.html#LN40"><span class='Ref_to_Proto'>DecodeTime</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>field</span></a><span class='Delimiter'>[</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'>/* INTERVAL_FULL_RANGE, */ 
</span>                               <span class='Operator'>&</span><a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>field</span></a><span class='Delimiter'>[</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* flip the sign on all fields */ 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour<span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_min <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_min<span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec<span class='Delimiter'>; 
</span>                        <span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>= -</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span> 
                    <span class='Comment_Multi_Line'>/* 
                     * Set the next type to be a day, if units are not 
                     * specified. This handles the case of '1 +02:03' since we 
                     * are reading right to left. 
                     */ 
</span>                    <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN160"><span class='Ref_to_Const'>DTK_DAY</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN94"><span class='Ref_to_Const'>TZ</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if strchr(field[i]+1,':'... &raquo; </span> 
                <span class='Comment_Multi_Line'>/* FALL THROUGH */ 
</span> 
            <span class='Control'>case</span> <a href="dt.h.html#LN139"><span class='Ref_to_Const'>DTK_DATE</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="dt.h.html#LN136"><span class='Ref_to_Const'>DTK_NUMBER</span></a><span class='Operator'>: 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>== </span><a href="dt.h.html#LN97"><span class='Ref_to_Const'>IGNORE_DTF</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* use typmod to decide what rightmost field is */ 
</span>                    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN341"><span class='Ref_To_Local'>range</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                            <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN164"><span class='Ref_to_Const'>DTK_YEAR</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN90"><span class='Ref_to_Const'>MONTH</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN90"><span class='Ref_to_Const'>MONTH</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                            <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN162"><span class='Ref_to_Const'>DTK_MONTH</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN92"><span class='Ref_to_Const'>DAY</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                            <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN160"><span class='Ref_to_Const'>DTK_DAY</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN99"><span class='Ref_to_Const'>HOUR</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN92"><span class='Ref_to_Const'>DAY</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN99"><span class='Ref_to_Const'>HOUR</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN92"><span class='Ref_to_Const'>DAY</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN99"><span class='Ref_to_Const'>HOUR</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN100"><span class='Ref_to_Const'>MINUTE</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN92"><span class='Ref_to_Const'>DAY</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN99"><span class='Ref_to_Const'>HOUR</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN100"><span class='Ref_to_Const'>MINUTE</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN101"><span class='Ref_to_Const'>SECOND</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                            <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN159"><span class='Ref_to_Const'>DTK_HOUR</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN100"><span class='Ref_to_Const'>MINUTE</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN99"><span class='Ref_to_Const'>HOUR</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN100"><span class='Ref_to_Const'>MINUTE</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                            <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN158"><span class='Ref_to_Const'>DTK_MINUTE</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN101"><span class='Ref_to_Const'>SECOND</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN99"><span class='Ref_to_Const'>HOUR</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN100"><span class='Ref_to_Const'>MINUTE</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN101"><span class='Ref_to_Const'>SECOND</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                        <span class='Control'>case</span> <a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN100"><span class='Ref_to_Const'>MINUTE</span></a><span class='Parentheses'>) </span><span class='Operator'>| </span><a href="dt.h.html#LN22"><span class='Ref_to_Macro'>INTERVAL_MASK</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN101"><span class='Ref_to_Const'>SECOND</span></a><span class='Parentheses'>)</span><span class='Operator'>: 
</span>                            <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN157"><span class='Ref_to_Const'>DTK_SECOND</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                        <span class='Control'>default</span><span class='Operator'>: 
</span>                            <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN157"><span class='Ref_to_Const'>DTK_SECOND</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>break</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch range &raquo; </span> 
                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if type==IGNORE_DTF &raquo; </span> 
 
                errno <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN17"><span class='Ref_to_Func'>strtoint</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>field</span></a><span class='Delimiter'>[</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="interval.c.html#LN343"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>errno <span class='Operator'>== </span>ERANGE<span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <a href="dt.h.html#LN26"><span class='Ref_to_Const'>DTERR_FIELD_OVERFLOW</span></a><span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN343"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* SQL "years-months" syntax */ 
</span><a name="LN453"></a>                    <span class='Keyword'>int</span>         <span class='Declare_Local'>val2</span><span class='Delimiter'>; 
</span> 
                    <a href="interval.c.html#LN453"><span class='Ref_To_Local'>val2</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN17"><span class='Ref_to_Func'>strtoint</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN343"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN343"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span>errno <span class='Operator'>== </span>ERANGE <span class='Operator'>|| </span><a href="interval.c.html#LN453"><span class='Ref_To_Local'>val2</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN453"><span class='Ref_To_Local'>val2</span></a> <span class='Operator'>&GT;= </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <a href="dt.h.html#LN26"><span class='Ref_to_Const'>DTERR_FIELD_OVERFLOW</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN343"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN162"><span class='Ref_to_Const'>DTK_MONTH</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>field</span></a><span class='Delimiter'>[</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                        <a href="interval.c.html#LN453"><span class='Ref_To_Local'>val2</span></a> <span class='Operator'>= -</span><a href="interval.c.html#LN453"><span class='Ref_To_Local'>val2</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>+ </span><a href="interval.c.html#LN453"><span class='Ref_To_Local'>val2</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN343"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    errno <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>= </span>strtod<span class='Parentheses'>(</span><a href="interval.c.html#LN343"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN343"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN343"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span> <span class='Operator'>|| </span>errno <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span> 
                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>field</span></a><span class='Delimiter'>[</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>                        <a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>= -</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN343"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>                    <a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span> 
                <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* DTK_M(type); */ 
</span> 
                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="dt.h.html#LN169"><span class='Ref_to_Const'>DTK_MICROSEC</span></a><span class='Operator'>: 
</span>                        <span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>+= </span><a href="../../../port/rint.c.html#LN20"><span class='Ref_to_Func'>rint</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>+ </span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN103"><span class='Ref_to_Const'>MICROSECOND</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN168"><span class='Ref_to_Const'>DTK_MILLISEC</span></a><span class='Operator'>: 
</span>                        <span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>+= </span><a href="../../../port/rint.c.html#LN20"><span class='Ref_to_Func'>rint</span></a><span class='Parentheses'>((</span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>+ </span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a><span class='Parentheses'>) </span><span class='Operator'>* </span><span class='Number'>1000</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN102"><span class='Ref_to_Const'>MILLISECOND</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN157"><span class='Ref_to_Const'>DTK_SECOND</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec <span class='Operator'>+= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                        <span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>+= </span><a href="../../../port/rint.c.html#LN20"><span class='Ref_to_Func'>rint</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>* </span><span class='Number'>1000000</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Comment_Multi_Line'>/* 
                         * If any subseconds were specified, consider this 
                         * microsecond and millisecond input as well. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                            <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN101"><span class='Ref_to_Const'>SECOND</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN185"><span class='Ref_to_Const'>DTK_ALL_SECS_M</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN158"><span class='Ref_to_Const'>DTK_MINUTE</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_min <span class='Operator'>+= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN87"><span class='Ref_to_Const'>SECS_PER_MINUTE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN100"><span class='Ref_to_Const'>MINUTE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN159"><span class='Ref_to_Const'>DTK_HOUR</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour <span class='Operator'>+= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN86"><span class='Ref_to_Const'>SECS_PER_HOUR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN99"><span class='Ref_to_Const'>HOUR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN160"><span class='Ref_to_Const'>DTK_DAY</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN160"><span class='Ref_to_Const'>DTK_DAY</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mday <span class='Operator'>+= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN33"><span class='Ref_to_Func'>AdjustFractSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN85"><span class='Ref_to_Const'>SECS_PER_DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN344"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>& </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN92"><span class='Ref_to_Const'>DAY</span></a><span class='Parentheses'>))</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN92"><span class='Ref_to_Const'>DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN161"><span class='Ref_to_Const'>DTK_WEEK</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mday <span class='Operator'>+= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>* </span><span class='Number'>7</span><span class='Delimiter'>; 
</span>                        <a href="../../../backend/utils/adt/datetime.c.html#LN49"><span class='Ref_to_Proto'>AdjustFractDays</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><span class='Number'>7</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN344"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>& </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN92"><span class='Ref_to_Const'>DAY</span></a><span class='Parentheses'>))</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN92"><span class='Ref_to_Const'>DAY</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN162"><span class='Ref_to_Const'>DTK_MONTH</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>+= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                        <a href="../../../backend/utils/adt/datetime.c.html#LN49"><span class='Ref_to_Proto'>AdjustFractDays</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="../../../include/datatype/timestamp.h.html#LN76"><span class='Ref_to_Const'>DAYS_PER_MONTH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN90"><span class='Ref_to_Const'>MONTH</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN164"><span class='Ref_to_Const'>DTK_YEAR</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>+= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                            <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>+= </span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN344"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>& </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>))</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN165"><span class='Ref_to_Const'>DTK_DECADE</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>+= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>* </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                            <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>+= </span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>* </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN344"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>& </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>))</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN166"><span class='Ref_to_Const'>DTK_CENTURY</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>+= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>* </span><span class='Number'>100</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                            <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>+= </span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>* </span><span class='Number'>100</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN344"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>& </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>))</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN167"><span class='Ref_to_Const'>DTK_MILLENNIUM</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>+= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>* </span><span class='Number'>1000</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                            <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>+= </span><a href="interval.c.html#LN350"><span class='Ref_To_Local'>fval</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>* </span><span class='Number'>1000</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN344"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>& </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>))</span> <span class='Operator'>? </span><span class='Number'>0</span> <span class='Operator'>: </span><a href="dt.h.html#LN184"><span class='Ref_to_Macro'>DTK_M</span></a><span class='Parentheses'>(</span><a href="dt.h.html#LN91"><span class='Ref_to_Const'>YEAR</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch type &raquo; </span> 
                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>case</span> <a href="dt.h.html#LN137"><span class='Ref_to_Const'>DTK_STRING</span></a><span class='Operator'>: 
</span>            <span class='Control'>case</span> <a href="dt.h.html#LN144"><span class='Ref_to_Const'>DTK_SPECIAL</span></a><span class='Operator'>: 
</span>                <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="dt.h.html#LN318"><span class='Ref_to_Proto'>DecodeUnits</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>field</span></a><span class='Delimiter'>[</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>== </span><a href="dt.h.html#LN97"><span class='Ref_to_Const'>IGNORE_DTF</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
                <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* DTK_M(type); */ 
</span>                <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Control'>case</span> <a href="dt.h.html#LN106"><span class='Ref_to_Const'>UNITS</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN109"><span class='Ref_to_Const'>AGO</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN342"><span class='Ref_To_Local'>is_before</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>                        <a href="interval.c.html#LN346"><span class='Ref_To_Local'>type</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>case</span> <a href="dt.h.html#LN89"><span class='Ref_to_Const'>RESERV</span></a><span class='Operator'>: 
</span>                        <a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="dt.h.html#LN186"><span class='Ref_to_Const'>DTK_DATE_M</span></a> <span class='Operator'>| </span><a href="dt.h.html#LN187"><span class='Ref_to_Const'>DTK_TIME_M</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>dtype</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN349"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                    <span class='Control'>default</span><span class='Operator'>: 
</span>                        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>default</span><span class='Operator'>: 
</span>                <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch ftype[i] &raquo; </span> 
 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a> <span class='Operator'>& </span><a href="interval.c.html#LN344"><span class='Ref_To_Local'>fmask</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span>        <a href="interval.c.html#LN344"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>|= </span><a href="interval.c.html#LN345"><span class='Ref_To_Local'>tmask</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=nf-1;i&GT;=0;i-- &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* ensure that at least one time field has been found */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN344"><span class='Ref_To_Local'>fmask</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="dt.h.html#LN25"><span class='Ref_to_Const'>DTERR_BAD_FORMAT</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* ensure fractional seconds are fractional */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN617"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>sec</span><span class='Delimiter'>; 
</span> 
        <a href="interval.c.html#LN617"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>= *</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN93"><span class='Ref_to_Const'>USECS_PER_SEC</span></a><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>-= </span><a href="interval.c.html#LN617"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN93"><span class='Ref_to_Const'>USECS_PER_SEC</span></a><span class='Delimiter'>; 
</span>        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec <span class='Operator'>+= </span><a href="interval.c.html#LN617"><span class='Ref_To_Local'>sec</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/*---------- 
     * The SQL standard defines the interval literal 
     *   '-1 1:00:00' 
     * to mean "negative 1 days and negative 1 hours", while Postgres 
     * traditionally treats this as meaning "negative 1 days and positive 
     * 1 hours".  In SQL_STANDARD intervalstyle, we apply the leading sign 
     * to all fields if there are no other explicit signs. 
     * 
     * We leave the signs alone if there are additional explicit signs. 
     * This protects us against misinterpreting postgres-style dump output, 
     * since the postgres-style output code has always put an explicit sign on 
     * all fields following a negative field.  But note that SQL-spec output 
     * is ambiguous and can be misinterpreted on load!  (So it's best practice 
     * to dump in postgres style, not SQL style.) 
     *---------- 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN340"><span class='Ref_To_Local'>IntervalStyle</span></a> <span class='Operator'>== </span><a href="dt.h.html#LN18"><span class='Ref_to_Const'>INTSTYLE_SQL_STANDARD</span></a> <span class='Operator'>&& *</span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>field</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'-'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Check for additional explicit signs */ 
</span><a name="LN643"></a>        <span class='Keyword'>bool</span>        <span class='Declare_Local'>more_signs</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>nf</span></a><span class='Delimiter'>; </span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>field</span></a><span class='Delimiter'>[</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'-'</span> <span class='Operator'>|| *</span><a href="interval.c.html#LN337"><span class='Ref_to_Parameter'>field</span></a><span class='Delimiter'>[</span><a href="interval.c.html#LN347"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'+'</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="interval.c.html#LN643"><span class='Ref_To_Local'>more_signs</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="interval.c.html#LN643"><span class='Ref_To_Local'>more_signs</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Rather than re-determining which field was field[0], just force 
             * 'em all negative. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>= -</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec<span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_min <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_min <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_min<span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour<span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mday <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mday <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mday<span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon<span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year<span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if !more_signs &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if IntervalStyle==INTSTY... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* finally, AGO negates everything */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN342"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>= -</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>fsec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec<span class='Delimiter'>; 
</span>        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_min <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_min<span class='Delimiter'>; 
</span>        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour<span class='Delimiter'>; 
</span>        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mday <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mday<span class='Delimiter'>; 
</span>        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon<span class='Delimiter'>; 
</span>        <a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>= -</span><a href="interval.c.html#LN338"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year<span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end DecodeInterval &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN695"></a><span class='Declare_Function'>AddVerboseIntPart</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>cp</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>value</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>units</span><span class='Delimiter'>, 
</span><a name="LN696"></a>                  <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>is_zero</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>is_before</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Keyword'>value </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="interval.c.html#LN695"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* first nonzero value sets is_before */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN696"><span class='Ref_to_Parameter'>is_zero</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="interval.c.html#LN696"><span class='Ref_to_Parameter'>is_before</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>value </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Keyword'>value </span><span class='Operator'>= </span>abs<span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN696"><span class='Ref_to_Parameter'>is_before</span></a><span class='Parentheses'>) 
</span>        <span class='Keyword'>value </span><span class='Operator'>= -</span><span class='Keyword'>value</span><span class='Delimiter'>; 
</span>    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN695"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>, </span><span class='String'>" %d %s%s"</span><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Delimiter'>, </span><a href="interval.c.html#LN695"><span class='Ref_to_Parameter'>units</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>value </span><span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>""</span> <span class='Operator'>: </span><span class='String'>"s"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="interval.c.html#LN696"><span class='Ref_to_Parameter'>is_zero</span></a> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="interval.c.html#LN695"><span class='Ref_to_Parameter'>cp</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><a href="interval.c.html#LN695"><span class='Ref_to_Parameter'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN715"></a><span class='Declare_Function'>AddPostgresIntPart</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>cp</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>value</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>units</span><span class='Delimiter'>, 
</span><a name="LN716"></a>                   <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>is_zero</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>is_before</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Keyword'>value </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="interval.c.html#LN715"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN715"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%s%s%d %s%s"</span><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><span class='Operator'>!*</span><a href="interval.c.html#LN716"><span class='Ref_to_Parameter'>is_zero</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>" "</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN716"><span class='Ref_to_Parameter'>is_before</span></a> <span class='Operator'>&& </span><span class='Keyword'>value </span><span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"+"</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Delimiter'>, 
</span>            <span class='Keyword'>value</span><span class='Delimiter'>, 
</span>            <a href="interval.c.html#LN715"><span class='Ref_to_Parameter'>units</span></a><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><span class='Keyword'>value </span><span class='Operator'>!= </span><span class='Number'>1</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>"s"</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Each nonzero field sets is_before for (only) the next one.  This is a 
     * tad bizarre but it's how it worked before... 
     */ 
</span>    <span class='Operator'>*</span><a href="interval.c.html#LN716"><span class='Ref_to_Parameter'>is_before</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>value </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="interval.c.html#LN716"><span class='Ref_to_Parameter'>is_zero</span></a> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="interval.c.html#LN715"><span class='Ref_to_Parameter'>cp</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><a href="interval.c.html#LN715"><span class='Ref_to_Parameter'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end AddPostgresIntPart &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN738"></a><span class='Declare_Function'>AddISO8601IntPart</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>cp</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>value</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Declare_Parameter'>units</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Keyword'>value </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="interval.c.html#LN738"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>; 
</span>    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN738"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%d%c"</span><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Delimiter'>, </span><a href="interval.c.html#LN738"><span class='Ref_to_Parameter'>units</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="interval.c.html#LN738"><span class='Ref_to_Parameter'>cp</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><a href="interval.c.html#LN738"><span class='Ref_to_Parameter'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c */ 
</span><span class='Keyword'>static void 
</span><a name="LN748"></a><span class='Declare_Function'>AppendSeconds</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>cp</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>sec</span><span class='Delimiter'>, </span><a href="dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a> <span class='Declare_Parameter'>fsec</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>precision</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Declare_Parameter'>fillzeros</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>fillzeros</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%02d"</span><span class='Delimiter'>, </span>abs<span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>sec</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%d"</span><span class='Delimiter'>, </span>abs<span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>sec</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>fillzeros</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%02d.%0*d"</span><span class='Delimiter'>, </span>abs<span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>sec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>precision</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/c.h.html#LN811"><span class='Ref_to_Macro'>Abs</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>fsec</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%d.%0*d"</span><span class='Delimiter'>, </span>abs<span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>sec</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>precision</span></a><span class='Delimiter'>, </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="../../../include/c.h.html#LN811"><span class='Ref_to_Macro'>Abs</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>fsec</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <a href="dt.h.html#LN327"><span class='Ref_to_Proto'>TrimTrailingZeros</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN748"><span class='Ref_to_Parameter'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* copy&pasted from .../src/backend/utils/adt/datetime.c 
 * 
 * Change pg_tm to tm 
 */ 
</span> 
<span class='Keyword'>int 
</span><a name="LN774"></a><span class='Declare_Function'>EncodeInterval</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <span class='Comment_Multi_Line'>/* pg_ */ </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><a href="dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a> <span class='Declare_Parameter'>fsec</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>style</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN776"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cp</span> <span class='Operator'>= </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span><a name="LN777"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>year</span> <span class='Operator'>= </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN31"><span class='Ref_to_Member'>tm_year</span></a><span class='Delimiter'>; 
</span><a name="LN778"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>mon</span> <span class='Operator'>= </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN30"><span class='Ref_to_Member'>tm_mon</span></a><span class='Delimiter'>; 
</span><a name="LN779"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>mday</span> <span class='Operator'>= </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN29"><span class='Ref_to_Member'>tm_mday</span></a><span class='Delimiter'>; 
</span><a name="LN780"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>hour</span> <span class='Operator'>= </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN28"><span class='Ref_to_Member'>tm_hour</span></a><span class='Delimiter'>; 
</span><a name="LN781"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>min</span> <span class='Operator'>= </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN27"><span class='Ref_to_Member'>tm_min</span></a><span class='Delimiter'>; 
</span><a name="LN782"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>sec</span> <span class='Operator'>= </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span><a href="../../../include/pgtime.h.html#LN26"><span class='Ref_to_Member'>tm_sec</span></a><span class='Delimiter'>; 
</span><a name="LN783"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_before</span> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span><a name="LN784"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>is_zero</span> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * The sign of year and month are guaranteed to match, since they are 
     * stored internally as "month". But we'll need to check for is_before and 
     * is_zero when determining the signs of day and hour/minute/seconds 
     * fields. 
     */ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>style</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* SQL Standard interval format */ 
</span>        <span class='Control'>case</span> <a href="dt.h.html#LN18"><span class='Ref_to_Const'>INTSTYLE_SQL_STANDARD</span></a><span class='Operator'>: 
</span>            <span class='Delimiter'>{ 
</span><a name="LN797"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>has_negative</span> <span class='Operator'>= </span><a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>                <a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>                <a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN800"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>has_positive</span> <span class='Operator'>= </span><a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>                <a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>                <a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN803"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>has_year_month</span> <span class='Operator'>= </span><a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN804"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>has_day_time</span> <span class='Operator'>= </span><a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>                <a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN806"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>has_day</span> <span class='Operator'>= </span><a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN807"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>sql_standard_value</span> <span class='Operator'>= !</span><span class='Parentheses'>(</span><a href="interval.c.html#LN797"><span class='Ref_To_Local'>has_negative</span></a> <span class='Operator'>&& </span><a href="interval.c.html#LN800"><span class='Ref_To_Local'>has_positive</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                <span class='Operator'>!</span><span class='Parentheses'>(</span><a href="interval.c.html#LN803"><span class='Ref_To_Local'>has_year_month</span></a> <span class='Operator'>&& </span><a href="interval.c.html#LN804"><span class='Ref_To_Local'>has_day_time</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <span class='Comment_Multi_Line'>/* 
                 * SQL Standard wants only 1 "&LT;sign&GT;" preceding the whole 
                 * interval ... but can't do that if mixed signs. 
                 */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN797"><span class='Ref_To_Local'>has_negative</span></a> <span class='Operator'>&& </span><a href="interval.c.html#LN807"><span class='Ref_To_Local'>sql_standard_value</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Operator'>*</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>= -</span><a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a> <span class='Operator'>= -</span><a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a> <span class='Operator'>= -</span><a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a> <span class='Operator'>= -</span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a> <span class='Operator'>= -</span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>= -</span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>= -</span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="interval.c.html#LN797"><span class='Ref_To_Local'>has_negative</span></a> <span class='Operator'>&& !</span><a href="interval.c.html#LN800"><span class='Ref_To_Local'>has_positive</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"0"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="interval.c.html#LN807"><span class='Ref_To_Local'>sql_standard_value</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* 
                     * For non sql-standard interval values, force outputting 
                     * the signs to avoid ambiguities with intervals with 
                     * mixed sign components. 
                     */ 
</span><a name="LN837"></a>                    <span class='Keyword'>char</span>        <span class='Declare_Local'>year_sign</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>'-'</span> <span class='Operator'>: </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span><a name="LN838"></a>                    <span class='Keyword'>char</span>        <span class='Declare_Local'>day_sign</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>'-'</span> <span class='Operator'>: </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span><a name="LN839"></a>                    <span class='Keyword'>char</span>        <span class='Declare_Local'>sec_sign</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>                                            <a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='String'>'-'</span> <span class='Operator'>: </span><span class='String'>'+'</span><span class='Delimiter'>; 
</span> 
                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%c%d-%d %c%d %c%d:%02d:"</span><span class='Delimiter'>, 
</span>                            <a href="interval.c.html#LN837"><span class='Ref_To_Local'>year_sign</span></a><span class='Delimiter'>, </span>abs<span class='Parentheses'>(</span><a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span>abs<span class='Parentheses'>(</span><a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="interval.c.html#LN838"><span class='Ref_To_Local'>day_sign</span></a><span class='Delimiter'>, </span>abs<span class='Parentheses'>(</span><a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                            <a href="interval.c.html#LN839"><span class='Ref_To_Local'>sec_sign</span></a><span class='Delimiter'>, </span>abs<span class='Parentheses'>(</span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span>abs<span class='Parentheses'>(</span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../../backend/utils/adt/datetime.c.html#LN45"><span class='Ref_to_Proto'>AppendSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="dt.h.html#LN23"><span class='Ref_to_Const'>MAX_INTERVAL_PRECISION</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN803"><span class='Ref_To_Local'>has_year_month</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%d-%d"</span><span class='Delimiter'>, </span><a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN806"><span class='Ref_To_Local'>has_day</span></a><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%d %d:%02d:"</span><span class='Delimiter'>, </span><a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../../backend/utils/adt/datetime.c.html#LN45"><span class='Ref_to_Proto'>AppendSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="dt.h.html#LN23"><span class='Ref_to_Const'>MAX_INTERVAL_PRECISION</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%d:%02d:"</span><span class='Delimiter'>, </span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="../../../backend/utils/adt/datetime.c.html#LN45"><span class='Ref_to_Proto'>AppendSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="dt.h.html#LN23"><span class='Ref_to_Const'>MAX_INTERVAL_PRECISION</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* ISO 8601 "time-intervals by duration only" */ 
</span>        <span class='Control'>case</span> <a href="dt.h.html#LN19"><span class='Ref_to_Const'>INTSTYLE_ISO_8601</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* special-case zero to avoid printing nothing */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>                <a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"PT0S"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Operator'>*</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'P'</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN737"><span class='Ref_to_Func'>AddISO8601IntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a><span class='Delimiter'>, </span><span class='String'>'Y'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN737"><span class='Ref_to_Func'>AddISO8601IntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a><span class='Delimiter'>, </span><span class='String'>'M'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN737"><span class='Ref_to_Func'>AddISO8601IntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a><span class='Delimiter'>, </span><span class='String'>'D'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Operator'>*</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'T'</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN737"><span class='Ref_to_Func'>AddISO8601IntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a><span class='Delimiter'>, </span><span class='String'>'H'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN737"><span class='Ref_to_Func'>AddISO8601IntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a><span class='Delimiter'>, </span><span class='String'>'M'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <span class='Operator'>*</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>                <a href="../../../backend/utils/adt/datetime.c.html#LN45"><span class='Ref_to_Proto'>AppendSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="dt.h.html#LN23"><span class='Ref_to_Const'>MAX_INTERVAL_PRECISION</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'S'</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Compatible with postgresql &LT; 8.4 when DateStyle = 'iso' */ 
</span>        <span class='Control'>case</span> <a href="dt.h.html#LN16"><span class='Ref_to_Const'>INTSTYLE_POSTGRES</span></a><span class='Operator'>: 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN714"><span class='Ref_to_Func'>AddPostgresIntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a><span class='Delimiter'>, </span><span class='String'>"year"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN714"><span class='Ref_to_Func'>AddPostgresIntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a><span class='Delimiter'>, </span><span class='String'>"mon"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN714"><span class='Ref_to_Func'>AddPostgresIntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a><span class='Delimiter'>, </span><span class='String'>"day"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a> <span class='Operator'>|| </span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN903"></a>                <span class='Keyword'>bool</span>        <span class='Declare_Local'>minus</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"%s%s%02d:%02d:"</span><span class='Delimiter'>, 
</span>                        <a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a> <span class='Operator'>? </span><span class='String'>""</span> <span class='Operator'>: </span><span class='String'>" "</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="interval.c.html#LN903"><span class='Ref_To_Local'>minus</span></a> <span class='Operator'>? </span><span class='String'>"-"</span> <span class='Operator'>: </span><span class='Parentheses'>(</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a> <span class='Operator'>? </span><span class='String'>"+"</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                        abs<span class='Parentheses'>(</span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span>abs<span class='Parentheses'>(</span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../backend/utils/adt/datetime.c.html#LN45"><span class='Ref_to_Proto'>AppendSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="dt.h.html#LN23"><span class='Ref_to_Const'>MAX_INTERVAL_PRECISION</span></a><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Compatible with postgresql &LT; 8.4 when DateStyle != 'iso' */ 
</span>        <span class='Control'>case</span> <a href="dt.h.html#LN17"><span class='Ref_to_Const'>INTSTYLE_POSTGRES_VERBOSE</span></a><span class='Operator'>: 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>"@"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN694"><span class='Ref_to_Func'>AddVerboseIntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN777"><span class='Ref_To_Local'>year</span></a><span class='Delimiter'>, </span><span class='String'>"year"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN694"><span class='Ref_to_Func'>AddVerboseIntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN778"><span class='Ref_To_Local'>mon</span></a><span class='Delimiter'>, </span><span class='String'>"mon"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN694"><span class='Ref_to_Func'>AddVerboseIntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN779"><span class='Ref_To_Local'>mday</span></a><span class='Delimiter'>, </span><span class='String'>"day"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN694"><span class='Ref_to_Func'>AddVerboseIntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN780"><span class='Ref_To_Local'>hour</span></a><span class='Delimiter'>, </span><span class='String'>"hour"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN694"><span class='Ref_to_Func'>AddVerboseIntPart</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN781"><span class='Ref_To_Local'>min</span></a><span class='Delimiter'>, </span><span class='String'>"min"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>' '</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><span class='Parentheses'>(</span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>))</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a><span class='Parentheses'>) 
</span>                        <a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>) 
</span>                        <span class='Operator'>*</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>) 
</span>                    <span class='Operator'>*</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span>                <a href="../../../backend/utils/adt/datetime.c.html#LN45"><span class='Ref_to_Proto'>AppendSeconds</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>, </span><a href="dt.h.html#LN23"><span class='Ref_to_Const'>MAX_INTERVAL_PRECISION</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>+= </span>strlen<span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>" sec%s"</span><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span>abs<span class='Parentheses'>(</span><a href="interval.c.html#LN782"><span class='Ref_To_Local'>sec</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>1</span> <span class='Operator'>|| </span><a href="interval.c.html#LN774"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> <span class='Operator'>? </span><span class='String'>"s"</span> <span class='Operator'>: </span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Comment_Multi_Line'>/* identically zero? then put in a unitless zero... */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN784"><span class='Ref_To_Local'>is_zero</span></a><span class='Parentheses'>) 
</span>                strcat<span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>" 0"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN783"><span class='Ref_To_Local'>is_before</span></a><span class='Parentheses'>) 
</span>                strcat<span class='Parentheses'>(</span><a href="interval.c.html#LN776"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>, </span><span class='String'>" ago"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch style &raquo; </span> 
 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end EncodeInterval &raquo; </span>   <span class='Comment_Single_Line'>/* EncodeInterval() */ 
</span> 
 
<span class='Comment_Multi_Line'>/* interval2tm() 
 * Convert an interval data type to a tm structure. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN958"></a><span class='Declare_Function'>interval2tm</span><span class='Parentheses'>(</span><a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a> <span class='Declare_Parameter'>span</span><span class='Delimiter'>, </span><span class='Control'>struct</span> <a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><a href="dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fsec</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN960"></a>    <a href="../../../include/c.h.html#LN294"><span class='Ref_to_Typedef'>int64</span></a>       <span class='Declare_Local'>time</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>span</span></a><span class='Operator'>.</span><a href="../include/pgtypes_interval.h.html#LN28"><span class='Ref_to_Member'>month</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>= </span><a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>span</span></a><span class='Operator'>.</span><a href="../include/pgtypes_interval.h.html#LN28"><span class='Ref_to_Member'>month</span></a> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a><span class='Delimiter'>; 
</span>        <a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>= </span><a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>span</span></a><span class='Operator'>.</span><a href="../include/pgtypes_interval.h.html#LN28"><span class='Ref_to_Member'>month</span></a> <span class='Operator'>% </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a><span class='Delimiter'>; 
</span> 
    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="interval.c.html#LN960"><span class='Ref_To_Local'>time</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>span</span></a><span class='Operator'>.</span><a href="../include/pgtypes_interval.h.html#LN27"><span class='Ref_to_Member'>time</span></a><span class='Delimiter'>; 
</span> 
    <a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mday <span class='Operator'>= </span><a href="interval.c.html#LN960"><span class='Ref_To_Local'>time</span></a> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN90"><span class='Ref_to_Const'>USECS_PER_DAY</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN960"><span class='Ref_To_Local'>time</span></a> <span class='Operator'>-= </span><a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mday <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN90"><span class='Ref_to_Const'>USECS_PER_DAY</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour <span class='Operator'>= </span><a href="interval.c.html#LN960"><span class='Ref_To_Local'>time</span></a> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN91"><span class='Ref_to_Const'>USECS_PER_HOUR</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN960"><span class='Ref_To_Local'>time</span></a> <span class='Operator'>-= </span><a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN91"><span class='Ref_to_Const'>USECS_PER_HOUR</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_min <span class='Operator'>= </span><a href="interval.c.html#LN960"><span class='Ref_To_Local'>time</span></a> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN92"><span class='Ref_to_Const'>USECS_PER_MINUTE</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN960"><span class='Ref_To_Local'>time</span></a> <span class='Operator'>-= </span><a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_min <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN92"><span class='Ref_to_Const'>USECS_PER_MINUTE</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec <span class='Operator'>= </span><a href="interval.c.html#LN960"><span class='Ref_To_Local'>time</span></a> <span class='Operator'>/ </span><a href="../../../include/datatype/timestamp.h.html#LN93"><span class='Ref_to_Const'>USECS_PER_SEC</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>fsec</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN960"><span class='Ref_To_Local'>time</span></a> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="interval.c.html#LN958"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN93"><span class='Ref_to_Const'>USECS_PER_SEC</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end interval2tm &raquo; </span>   <span class='Comment_Single_Line'>/* interval2tm() */ 
</span> 
<span class='Keyword'>static int 
</span><a name="LN989"></a><span class='Declare_Function'>tm2interval</span><span class='Parentheses'>(</span><span class='Control'>struct</span> <a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>tm</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>tm</span><span class='Delimiter'>, </span><a href="dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a> <span class='Declare_Parameter'>fsec</span><span class='Delimiter'>, </span><a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>span</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>+ </span><a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>&GT; </span>INT_MAX <span class='Operator'>|| 
</span>        <span class='Parentheses'>(</span><span class='Keyword'>double</span><span class='Parentheses'>) </span><a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>+ </span><a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>&LT; </span>INT_MIN<span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>span</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_interval.h.html#LN28"><span class='Ref_to_Member'>month</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN68"><span class='Ref_to_Const'>MONTHS_PER_YEAR</span></a> <span class='Operator'>+ </span><a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon<span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>span</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_interval.h.html#LN27"><span class='Ref_to_Member'>time</span></a> <span class='Operator'>= </span><span class='Parentheses'>(((((((</span><a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_mday <span class='Operator'>* </span><a href="../../../include/c.h.html#LN306"><span class='Ref_to_Macro'>INT64CONST</span></a><span class='Parentheses'>(</span><span class='Number'>24</span><span class='Parentheses'>))</span> <span class='Operator'>+ 
</span>                       <a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour<span class='Parentheses'>)</span> <span class='Operator'>* </span><a href="../../../include/c.h.html#LN306"><span class='Ref_to_Macro'>INT64CONST</span></a><span class='Parentheses'>(</span><span class='Number'>60</span><span class='Parentheses'>))</span> <span class='Operator'>+ 
</span>                     <a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_min<span class='Parentheses'>)</span> <span class='Operator'>* </span><a href="../../../include/c.h.html#LN306"><span class='Ref_to_Macro'>INT64CONST</span></a><span class='Parentheses'>(</span><span class='Number'>60</span><span class='Parentheses'>))</span> <span class='Operator'>+ 
</span>                   <a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec<span class='Parentheses'>)</span> <span class='Operator'>* </span><a href="../../../include/datatype/timestamp.h.html#LN93"><span class='Ref_to_Const'>USECS_PER_SEC</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><a href="interval.c.html#LN989"><span class='Ref_to_Parameter'>fsec</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span>   <span class='Comment_Single_Line'>/* tm2interval() */ 
</span> 
<a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a> <span class='Operator'>* 
</span><a name="LN1004"></a><span class='Declare_Function'>PGTYPESinterval_new</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1006"></a>    <a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span> 
    <a href="interval.c.html#LN1006"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="common.c.html#LN7"><span class='Ref_to_Func'>pgtypes_alloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* result can be NULL if we run out of memory */ 
</span>    <span class='Control'>return</span> <a href="interval.c.html#LN1006"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>void 
</span><a name="LN1014"></a><span class='Declare_Function'>PGTYPESinterval_free</span><span class='Parentheses'>(</span><a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>intvl</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN1014"><span class='Ref_to_Parameter'>intvl</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a> <span class='Operator'>* 
</span><a name="LN1020"></a><span class='Declare_Function'>PGTYPESinterval_from_asc</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>endptr</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1022"></a>    <a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN1023"></a>    <a href="dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a>      <span class='Declare_Local'>fsec</span><span class='Delimiter'>; 
</span><a name="LN1024"></a>    <span class='Control'>struct</span> <a href="interval.c.html#LN1025"><span class='Ref_To_Local'>tm</span></a>   <span class='Declare_Local'>tt</span><span class='Delimiter'>, 
</span><a name="LN1025"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tm</span> <span class='Operator'>= &</span><a href="interval.c.html#LN1024"><span class='Ref_To_Local'>tt</span></a><span class='Delimiter'>; 
</span><a name="LN1026"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>dtype</span><span class='Delimiter'>; 
</span><a name="LN1027"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>nf</span><span class='Delimiter'>; 
</span><a name="LN1028"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>field</span><span class='Delimiter'>[</span><a href="dt.h.html#LN197"><span class='Ref_to_Const'>MAXDATEFIELDS</span></a><span class='Delimiter'>]; 
</span><a name="LN1029"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ftype</span><span class='Delimiter'>[</span><a href="dt.h.html#LN197"><span class='Ref_to_Const'>MAXDATEFIELDS</span></a><span class='Delimiter'>]; 
</span><a name="LN1030"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>lowstr</span><span class='Delimiter'>[</span><a href="dt.h.html#LN195"><span class='Ref_to_Const'>MAXDATELEN</span></a> <span class='Operator'>+ </span><a href="dt.h.html#LN197"><span class='Ref_to_Const'>MAXDATEFIELDS</span></a><span class='Delimiter'>]; 
</span><a name="LN1031"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>realptr</span><span class='Delimiter'>; 
</span><a name="LN1032"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>ptr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="interval.c.html#LN1020"><span class='Ref_to_Parameter'>endptr</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="interval.c.html#LN1020"><span class='Ref_to_Parameter'>endptr</span></a> <span class='Operator'>: &</span><a href="interval.c.html#LN1031"><span class='Ref_To_Local'>realptr</span></a><span class='Delimiter'>; 
</span> 
    <a href="interval.c.html#LN1025"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span>tm_year <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN1025"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span>tm_mon <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN1025"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span>tm_mday <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN1025"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span>tm_hour <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN1025"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span>tm_min <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN1025"><span class='Ref_To_Local'>tm</span></a><span class='Operator'>-&GT;</span>tm_sec <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN1023"><span class='Ref_To_Local'>fsec</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span><a href="interval.c.html#LN1020"><span class='Ref_to_Parameter'>str</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><a href="dt.h.html#LN195"><span class='Ref_to_Const'>MAXDATELEN</span></a><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN17"><span class='Ref_to_Const'>PGTYPES_INTVL_BAD_INTERVAL</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/datetime.h.html#LN293"><span class='Ref_to_Proto'>ParseDateTime</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN1020"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1030"><span class='Ref_To_Local'>lowstr</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1028"><span class='Ref_To_Local'>field</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1029"><span class='Ref_To_Local'>ftype</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN1027"><span class='Ref_To_Local'>nf</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1032"><span class='Ref_To_Local'>ptr</span></a><span class='Parentheses'>)</span> <span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>|| 
</span>        <span class='Parentheses'>(</span><a href="../../../include/utils/datetime.h.html#LN303"><span class='Ref_to_Proto'>DecodeInterval</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN1028"><span class='Ref_To_Local'>field</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1029"><span class='Ref_To_Local'>ftype</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1027"><span class='Ref_To_Local'>nf</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN1026"><span class='Ref_To_Local'>dtype</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1025"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN1023"><span class='Ref_To_Local'>fsec</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span> <span class='Operator'>&& 
</span>         <a href="interval.c.html#LN122"><span class='Ref_to_Func'>DecodeISO8601Interval</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN1020"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN1026"><span class='Ref_To_Local'>dtype</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1025"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN1023"><span class='Ref_To_Local'>fsec</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN17"><span class='Ref_to_Const'>PGTYPES_INTVL_BAD_INTERVAL</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="interval.c.html#LN1022"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="common.c.html#LN7"><span class='Ref_to_Func'>pgtypes_alloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="interval.c.html#LN1022"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="interval.c.html#LN1026"><span class='Ref_To_Local'>dtype</span></a> <span class='Operator'>!= </span><a href="dt.h.html#LN156"><span class='Ref_to_Const'>DTK_DELTA</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN17"><span class='Ref_to_Const'>PGTYPES_INTVL_BAD_INTERVAL</span></a><span class='Delimiter'>; 
</span>        <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN1022"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/timestamp.h.html#LN89"><span class='Ref_to_Proto'>tm2interval</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN1025"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1023"><span class='Ref_To_Local'>fsec</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1022"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN17"><span class='Ref_to_Const'>PGTYPES_INTVL_BAD_INTERVAL</span></a><span class='Delimiter'>; 
</span>        <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN1022"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    errno <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="interval.c.html#LN1022"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESinterval_from_asc &raquo; </span> 
 
<span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN1079"></a><span class='Declare_Function'>PGTYPESinterval_to_asc</span><span class='Parentheses'>(</span><a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>span</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1081"></a>    <span class='Control'>struct</span> <a href="interval.c.html#LN1082"><span class='Ref_To_Local'>tm</span></a>   <span class='Declare_Local'>tt</span><span class='Delimiter'>, 
</span><a name="LN1082"></a>               <span class='Operator'>*</span><span class='Declare_Local'>tm</span> <span class='Operator'>= &</span><a href="interval.c.html#LN1081"><span class='Ref_To_Local'>tt</span></a><span class='Delimiter'>; 
</span><a name="LN1083"></a>    <a href="dt.h.html#LN9"><span class='Ref_to_Typedef'>fsec_t</span></a>      <span class='Declare_Local'>fsec</span><span class='Delimiter'>; 
</span><a name="LN1084"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>buf</span><span class='Delimiter'>[</span><a href="dt.h.html#LN195"><span class='Ref_to_Const'>MAXDATELEN</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>]; 
</span><a name="LN1085"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>IntervalStyle</span> <span class='Operator'>= </span><a href="dt.h.html#LN17"><span class='Ref_to_Const'>INTSTYLE_POSTGRES_VERBOSE</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/utils/timestamp.h.html#LN88"><span class='Ref_to_Proto'>interval2tm</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="interval.c.html#LN1079"><span class='Ref_to_Parameter'>span</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1082"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="interval.c.html#LN1083"><span class='Ref_To_Local'>fsec</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN17"><span class='Ref_to_Const'>PGTYPES_INTVL_BAD_INTERVAL</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="dt.h.html#LN316"><span class='Ref_to_Proto'>EncodeInterval</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN1082"><span class='Ref_To_Local'>tm</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1083"><span class='Ref_To_Local'>fsec</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1085"><span class='Ref_To_Local'>IntervalStyle</span></a><span class='Delimiter'>, </span><a href="interval.c.html#LN1084"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN17"><span class='Ref_to_Const'>PGTYPES_INTVL_BAD_INTERVAL</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="common.c.html#LN17"><span class='Ref_to_Func'>pgtypes_strdup</span></a><span class='Parentheses'>(</span><a href="interval.c.html#LN1084"><span class='Ref_To_Local'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESinterval_to_asc &raquo; </span> 
 
<span class='Keyword'>int 
</span><a name="LN1103"></a><span class='Declare_Function'>PGTYPESinterval_copy</span><span class='Parentheses'>(</span><a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>intvlsrc</span><span class='Delimiter'>, </span><a href="../include/pgtypes_interval.h.html#LN25"><span class='Ref_to_Typedef'>interval</span></a> <span class='Operator'>* </span><span class='Declare_Parameter'>intvldest</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="interval.c.html#LN1103"><span class='Ref_to_Parameter'>intvldest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_interval.h.html#LN27"><span class='Ref_to_Member'>time</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN1103"><span class='Ref_to_Parameter'>intvlsrc</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_interval.h.html#LN27"><span class='Ref_to_Member'>time</span></a><span class='Delimiter'>; 
</span>    <a href="interval.c.html#LN1103"><span class='Ref_to_Parameter'>intvldest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_interval.h.html#LN28"><span class='Ref_to_Member'>month</span></a> <span class='Operator'>= </span><a href="interval.c.html#LN1103"><span class='Ref_to_Parameter'>intvlsrc</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_interval.h.html#LN28"><span class='Ref_to_Member'>month</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>