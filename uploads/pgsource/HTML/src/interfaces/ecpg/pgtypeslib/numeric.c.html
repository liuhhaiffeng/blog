<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\interfaces\ecpg\pgtypeslib\numeric.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\interfaces\ecpg\pgtypeslib\numeric.c</b></p></td>
<td align='right'>
Wed Jun 14 08:26:09 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/* src/interfaces/ecpg/pgtypeslib/numeric.c */ 
</span> 
<span class='Keyword'>#include </span><span class='String'>"postgres_fe.h"</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;ctype.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;float.h&GT;</span> 
<span class='Keyword'>#include </span><span class='String'>&LT;limits.h&GT;</span> 
 
<span class='Keyword'>#include </span><span class='String'>"extern.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"pgtypes_error.h"</span> 
 
<a name="LN10"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>Max</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>y</span><span class='Parentheses'>)</span>               <span class='Parentheses'>((</span><a href="numeric.c.html#LN10"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&GT; </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN10"><span class='Ref_to_Parameter'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN10"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>: </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN10"><span class='Ref_to_Parameter'>y</span></a><span class='Parentheses'>))</span> 
<a name="LN11"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>Min</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>x</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>y</span><span class='Parentheses'>)</span>               <span class='Parentheses'>((</span><a href="numeric.c.html#LN11"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN11"><span class='Ref_to_Parameter'>y</span></a><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN11"><span class='Ref_to_Parameter'>x</span></a><span class='Parentheses'>) </span><span class='Operator'>: </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN11"><span class='Ref_to_Parameter'>y</span></a><span class='Parentheses'>))</span> 
 
<a name="LN13"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>init_var</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>v</span><span class='Parentheses'>)</span>             memset<span class='Parentheses'>(</span><a href="numeric.c.html#LN13"><span class='Ref_to_Parameter'>v</span></a><span class='Delimiter'>,</span><span class='Number'>0</span><span class='Delimiter'>,</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a><span class='Parentheses'>))</span> 
 
<a name="LN15"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>digitbuf_alloc</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>size</span><span class='Parentheses'>) ((</span><a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="common.c.html#LN7"><span class='Ref_to_Func'>pgtypes_alloc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN15"><span class='Ref_to_Parameter'>size</span></a><span class='Parentheses'>))</span> 
<a name="LN16"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>digitbuf_free</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>buf</span><span class='Parentheses'>)</span>      <span class='Operator'>\ 
</span>       <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>                 <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="numeric.c.html#LN16"><span class='Ref_to_Parameter'>buf</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> <span class='Operator'>\ 
</span>                          <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN16"><span class='Ref_to_Parameter'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; </span><span class='Operator'>\ 
</span>          <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Keyword'>#include </span><span class='String'>"pgtypes_numeric.h"</span> 
 
<span class='Directive'>#if</span> <span class='Number'>0</span> 
<span class='Inactive_Code'>/* ---------- 
 * apply_typmod() - 
 * 
 *  Do bounds checking and rounding according to the attributes 
 *  typmod field. 
 * ---------- 
 */ 
static int 
apply_typmod(numeric *var, long typmod) 
{ 
    int         precision; 
    int         scale; 
    int         maxweight; 
    int         i; 
 
    /* Do nothing if we have a default typmod (-1) */ 
    if (typmod &LT; (long) (VARHDRSZ)) 
        return (0); 
 
    typmod -= VARHDRSZ; 
    precision = (typmod &GT;&GT; 16) & 0xffff; 
    scale = typmod & 0xffff; 
    maxweight = precision - scale; 
 
    /* Round to target scale */ 
    i = scale + var-&GT;weight + 1; 
    if (i &GT;= 0 && var-&GT;ndigits &GT; i) 
    { 
        int         carry = (var-&GT;digits[i] &GT; 4) ? 1 : 0; 
 
        var-&GT;ndigits = i; 
 
        while (carry) 
        { 
            carry += var-&GT;digits[--i]; 
            var-&GT;digits[i] = carry % 10; 
            carry /= 10; 
        } 
 
        if (i &LT; 0) 
        { 
            var-&GT;digits--; 
            var-&GT;ndigits++; 
            var-&GT;weight++; 
        } 
    } 
    else 
        var-&GT;ndigits = Max(0, Min(i, var-&GT;ndigits)); 
 
    /* 
     * Check for overflow - note we can't do this before rounding, because 
     * rounding could raise the weight.  Also note that the var's weight could 
     * be inflated by leading zeroes, which will be stripped before storage 
     * but perhaps might not have been yet. In any case, we must recognize a 
     * true zero, whose weight doesn't mean anything. 
     */ 
    if (var-&GT;weight &GT;= maxweight) 
    { 
        /* Determine true weight; and check for all-zero result */ 
        int         tweight = var-&GT;weight; 
 
        for (i = 0; i &LT; var-&GT;ndigits; i++) 
        { 
            if (var-&GT;digits[i]) 
                break; 
            tweight--; 
        } 
 
        if (tweight &GT;= maxweight && i &LT; var-&GT;ndigits) 
        { 
            errno = PGTYPES_NUM_OVERFLOW; 
            return -1; 
        } 
    } 
 
    var-&GT;rscale = scale; 
    var-&GT;dscale = scale; 
    return (0); 
} 
</span><span class='Directive'>#endif</span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 *  alloc_var() - 
 * 
 *   Allocate a digit buffer of ndigits digits (plus a spare digit for rounding) 
 * ---------- 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN113"></a><span class='Declare_Function'>alloc_var</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>ndigits</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="numeric.c.html#LN16"><span class='Ref_to_Macro'>digitbuf_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN113"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN113"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN15"><span class='Ref_to_Macro'>digitbuf_alloc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN113"><span class='Ref_to_Parameter'>ndigits</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN113"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN113"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN113"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN113"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN113"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN113"><span class='Ref_to_Parameter'>ndigits</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>* 
</span><a name="LN126"></a><span class='Declare_Function'>PGTYPESnumeric_new</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN128"></a>    <a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>var</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="numeric.c.html#LN128"><span class='Ref_To_Local'>var</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <a href="common.c.html#LN7"><span class='Ref_to_Func'>pgtypes_alloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a><span class='Parentheses'>)))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN112"><span class='Ref_to_Func'>alloc_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN128"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN128"><span class='Ref_To_Local'>var</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="numeric.c.html#LN128"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>; 
} 
</span> 
<a href="../test/expected/preproc-outofscope.c.html#LN53"><span class='Ref_to_Typedef'>decimal</span></a> <span class='Operator'>* 
</span><a name="LN143"></a><span class='Declare_Function'>PGTYPESdecimal_new</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN145"></a>    <a href="../test/expected/preproc-outofscope.c.html#LN53"><span class='Ref_to_Typedef'>decimal</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>var</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="numeric.c.html#LN145"><span class='Ref_To_Local'>var</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../test/expected/preproc-outofscope.c.html#LN53"><span class='Ref_to_Typedef'>decimal</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span> <a href="common.c.html#LN7"><span class='Ref_to_Func'>pgtypes_alloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../test/expected/preproc-outofscope.c.html#LN53"><span class='Ref_to_Typedef'>decimal</span></a><span class='Parentheses'>)))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    memset<span class='Parentheses'>(</span><a href="numeric.c.html#LN145"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../test/expected/preproc-outofscope.c.html#LN53"><span class='Ref_to_Typedef'>decimal</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="numeric.c.html#LN145"><span class='Ref_To_Local'>var</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * set_var_from_str() 
 * 
 *  Parse a string and put the number into a variable 
 * ---------- 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN162"></a><span class='Declare_Function'>set_var_from_str</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>ptr</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dest</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN164"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>have_dp</span> <span class='Operator'>= </span><span class='Boolean'>FALSE</span><span class='Delimiter'>; 
</span><a name="LN165"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    errno <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)))</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../port/pgstrcasecmp.c.html#LN67"><span class='Ref_to_Func'>pg_strncasecmp</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><span class='String'>"NaN"</span><span class='Delimiter'>, </span><span class='Number'>3</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a> <span class='Operator'>+= </span><span class='Number'>3</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN5"><span class='Ref_to_Const'>NUMERIC_NAN</span></a><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Should be nothing left but spaces */ 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)))</span> 
            <span class='Delimiter'>{ 
</span>                errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN3"><span class='Ref_to_Const'>PGTYPES_NUM_BAD_NUMERIC</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN112"><span class='Ref_to_Func'>alloc_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Delimiter'>, </span>strlen<span class='Parentheses'>((</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)))</span> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>switch</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <span class='String'>'+'</span><span class='Operator'>: 
</span>            <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>case</span> <span class='String'>'-'</span><span class='Operator'>: 
</span>            <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Delimiter'>; 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN164"><span class='Ref_To_Local'>have_dp</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>        <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span>isdigit<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)))</span> 
    <span class='Delimiter'>{ 
</span>        errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN3"><span class='Ref_to_Const'>PGTYPES_NUM_BAD_NUMERIC</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>isdigit<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN165"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>= *</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++ - </span><span class='String'>'0'</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="numeric.c.html#LN164"><span class='Ref_To_Local'>have_dp</span></a><span class='Parentheses'>) 
</span>                <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>)</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN164"><span class='Ref_To_Local'>have_dp</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN3"><span class='Ref_to_Const'>PGTYPES_NUM_BAD_NUMERIC</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <a href="numeric.c.html#LN164"><span class='Ref_To_Local'>have_dp</span></a> <span class='Operator'>= </span><span class='Boolean'>TRUE</span><span class='Delimiter'>; 
</span>            <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while *(*ptr) &raquo; </span> 
    <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN165"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Handle exponent, if any */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='String'>'e'</span> <span class='Operator'>|| *</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='String'>'E'</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span><a name="LN254"></a>        <span class='Keyword'>long</span>        <span class='Declare_Local'>exponent</span><span class='Delimiter'>; 
</span><a name="LN255"></a>        <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>endptr</span><span class='Delimiter'>; 
</span> 
        <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN254"><span class='Ref_To_Local'>exponent</span></a> <span class='Operator'>= </span>strtol<span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="numeric.c.html#LN255"><span class='Ref_To_Local'>endptr</span></a><span class='Delimiter'>, </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN255"><span class='Ref_To_Local'>endptr</span></a> <span class='Operator'>== </span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN3"><span class='Ref_to_Const'>PGTYPES_NUM_BAD_NUMERIC</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><a href="numeric.c.html#LN255"><span class='Ref_To_Local'>endptr</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN254"><span class='Ref_To_Local'>exponent</span></a> <span class='Operator'>&GT;= </span>INT_MAX <span class='Operator'>/ </span><span class='Number'>2</span> <span class='Operator'>|| </span><a href="numeric.c.html#LN254"><span class='Ref_To_Local'>exponent</span></a> <span class='Operator'>&LT;= -</span><span class='Parentheses'>(</span>INT_MAX <span class='Operator'>/ </span><span class='Number'>2</span><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN3"><span class='Ref_to_Const'>PGTYPES_NUM_BAD_NUMERIC</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>+= </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="numeric.c.html#LN254"><span class='Ref_To_Local'>exponent</span></a><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>-= </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="numeric.c.html#LN254"><span class='Ref_To_Local'>exponent</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if *(*ptr)=='e'||*(*ptr)... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Should be nothing left but spaces */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span>isspace<span class='Parentheses'>((</span><span class='Keyword'>unsigned char</span><span class='Parentheses'>) </span><span class='Operator'>*</span><span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)))</span> 
        <span class='Delimiter'>{ 
</span>            errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN3"><span class='Ref_to_Const'>PGTYPES_NUM_BAD_NUMERIC</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>ptr</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Strip any leading zeroes */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& *</span><span class='Parentheses'>(</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Parentheses'>(</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Parentheses'>(</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Parentheses'>)</span><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <span class='Parentheses'>(</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>)</span><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN162"><span class='Ref_to_Parameter'>dest</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end set_var_from_str &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * get_str_from_var() - 
 * 
 *  Convert a var to text representation (guts of numeric_out). 
 *  CAUTION: var's contents may be modified by rounding! 
 * ---------- 
 */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN310"></a><span class='Declare_Function'>get_str_from_var</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>dscale</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN312"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>str</span><span class='Delimiter'>; 
</span><a name="LN313"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span><a name="LN314"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN315"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>d</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN5"><span class='Ref_to_Const'>NUMERIC_NAN</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN312"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><a href="common.c.html#LN7"><span class='Ref_to_Func'>pgtypes_alloc</span></a><span class='Parentheses'>(</span><span class='Number'>4</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN312"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>        <a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN312"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>, </span><span class='String'>"NaN"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <a href="numeric.c.html#LN312"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Check if we must round up before printing the value and do so. 
     */ 
</span>    <a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>dscale</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>&GT; </span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN332"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>carry</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><span class='Number'>4</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN332"><span class='Ref_To_Local'>carry</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN332"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>+= </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><span class='Operator'>--</span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>            <a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN332"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>% </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN332"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>/= </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if i&GT;=0&&var-&GT;ndigits&GT;i &raquo; </span> 
    <span class='Control'>else</span> 
        <a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Allocate space for the result 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="numeric.c.html#LN312"><span class='Ref_To_Local'>str</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>)</span> <a href="common.c.html#LN7"><span class='Ref_to_Func'>pgtypes_alloc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>dscale</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>4</span><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN313"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN312"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Output a dash for negative values 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="numeric.c.html#LN313"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'-'</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Output all digits before the decimal point 
     */ 
</span>    <a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN315"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT;= </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>&& </span><a href="numeric.c.html#LN315"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>) 
</span>            <span class='Operator'>*</span><a href="numeric.c.html#LN313"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN315"><span class='Ref_To_Local'>d</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>+ </span><span class='String'>'0'</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <span class='Operator'>*</span><a href="numeric.c.html#LN313"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'0'</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If requested, output a decimal point and all the digits that follow it. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>dscale</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="numeric.c.html#LN313"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'.'</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= -</span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>dscale</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT;= </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>&& </span><a href="numeric.c.html#LN315"><span class='Ref_To_Local'>d</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>) 
</span>                <span class='Operator'>*</span><a href="numeric.c.html#LN313"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><a href="numeric.c.html#LN310"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN315"><span class='Ref_To_Local'>d</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>+ </span><span class='String'>'0'</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <span class='Operator'>*</span><a href="numeric.c.html#LN313"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++ = </span><span class='String'>'0'</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN314"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * terminate the string and return it 
     */ 
</span>    <span class='Operator'>*</span><a href="numeric.c.html#LN313"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="numeric.c.html#LN312"><span class='Ref_To_Local'>str</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end get_str_from_var &raquo; </span> 
 
<a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>* 
</span><a name="LN405"></a><span class='Declare_Function'>PGTYPESnumeric_from_asc</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Delimiter'>, </span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Declare_Parameter'>endptr</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN407"></a>    <a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>value</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="common.c.html#LN7"><span class='Ref_to_Func'>pgtypes_alloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN408"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ret</span><span class='Delimiter'>; 
</span> 
<a name="LN410"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>realptr</span><span class='Delimiter'>; 
</span><a name="LN411"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>ptr</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN405"><span class='Ref_to_Parameter'>endptr</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) </span><span class='Operator'>? </span><a href="numeric.c.html#LN405"><span class='Ref_to_Parameter'>endptr</span></a> <span class='Operator'>: &</span><a href="numeric.c.html#LN410"><span class='Ref_To_Local'>realptr</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Keyword'>value</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN408"><span class='Ref_To_Local'>ret</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN161"><span class='Ref_to_Func'>set_var_from_str</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN405"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN411"><span class='Ref_To_Local'>ptr</span></a><span class='Delimiter'>, </span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN408"><span class='Ref_To_Local'>ret</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../include/pgtypes_numeric.h.html#LN43"><span class='Ref_to_Proto'>PGTYPESnumeric_free</span></a><span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><span class='Keyword'>value</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_from_asc &raquo; </span> 
 
<span class='Keyword'>char </span><span class='Operator'>* 
</span><a name="LN427"></a><span class='Declare_Function'>PGTYPESnumeric_to_asc</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>num</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>dscale</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN429"></a>    <a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>numcopy</span> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN41"><span class='Ref_to_Proto'>PGTYPESnumeric_new</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN430"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN429"><span class='Ref_To_Local'>numcopy</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN54"><span class='Ref_to_Proto'>PGTYPESnumeric_copy</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN427"><span class='Ref_to_Parameter'>num</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN429"><span class='Ref_To_Local'>numcopy</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../include/pgtypes_numeric.h.html#LN43"><span class='Ref_to_Proto'>PGTYPESnumeric_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN429"><span class='Ref_To_Local'>numcopy</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN427"><span class='Ref_to_Parameter'>dscale</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN427"><span class='Ref_to_Parameter'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN427"><span class='Ref_to_Parameter'>num</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* get_str_from_var may change its argument */ 
</span>    <a href="numeric.c.html#LN430"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN309"><span class='Ref_to_Func'>get_str_from_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN429"><span class='Ref_To_Local'>numcopy</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN427"><span class='Ref_to_Parameter'>dscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../include/pgtypes_numeric.h.html#LN43"><span class='Ref_to_Proto'>PGTYPESnumeric_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN429"><span class='Ref_To_Local'>numcopy</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN430"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_to_asc &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * zero_var() - 
 * 
 *  Set a variable to ZERO. 
 *  Note: rscale and dscale are not touched. 
 * ---------- 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN458"></a><span class='Declare_Function'>zero_var</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="numeric.c.html#LN16"><span class='Ref_to_Macro'>digitbuf_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN458"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN458"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN458"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN458"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN458"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>            <span class='Comment_Single_Line'>/* by convention; doesn't really matter */ 
</span>    <a href="numeric.c.html#LN458"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* anything but NAN... */ 
</span><span class='Delimiter'>} 
</span> 
<span class='Keyword'>void 
</span><a name="LN469"></a><span class='Declare_Function'>PGTYPESnumeric_free</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="numeric.c.html#LN16"><span class='Ref_to_Macro'>digitbuf_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN469"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN469"><span class='Ref_to_Parameter'>var</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>void 
</span><a name="LN476"></a><span class='Declare_Function'>PGTYPESdecimal_free</span><span class='Parentheses'>(</span><a href="../test/expected/preproc-outofscope.c.html#LN53"><span class='Ref_to_Typedef'>decimal</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN476"><span class='Ref_to_Parameter'>var</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* ---------- 
 * cmp_abs() - 
 * 
 *  Compare the absolute values of var1 and var2 
 *  Returns:    -1 for ABS(var1) &LT; ABS(var2) 
 *              0  for ABS(var1) == ABS(var2) 
 *              1  for ABS(var1) &GT; ABS(var2) 
 * ---------- 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN491"></a><span class='Declare_Function'>cmp_abs</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var1</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN493"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i1</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN494"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i2</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN495"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>w1</span> <span class='Operator'>= </span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Delimiter'>; 
</span><a name="LN496"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>w2</span> <span class='Operator'>= </span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Delimiter'>; 
</span><a name="LN497"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>stat</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN495"><span class='Ref_To_Local'>w1</span></a> <span class='Operator'>&GT; </span><a href="numeric.c.html#LN496"><span class='Ref_To_Local'>w2</span></a> <span class='Operator'>&& </span><a href="numeric.c.html#LN493"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN493"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN495"><span class='Ref_To_Local'>w1</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN496"><span class='Ref_To_Local'>w2</span></a> <span class='Operator'>&GT; </span><a href="numeric.c.html#LN495"><span class='Ref_To_Local'>w1</span></a> <span class='Operator'>&& </span><a href="numeric.c.html#LN494"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN494"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN496"><span class='Ref_To_Local'>w2</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN495"><span class='Ref_To_Local'>w1</span></a> <span class='Operator'>== </span><a href="numeric.c.html#LN496"><span class='Ref_To_Local'>w2</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN493"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>&& </span><a href="numeric.c.html#LN494"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN497"><span class='Ref_To_Local'>stat</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN493"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>- </span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN494"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>++</span><span class='Delimiter'>]; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN497"><span class='Ref_To_Local'>stat</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN497"><span class='Ref_To_Local'>stat</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>                <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN493"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN493"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN494"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN491"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN494"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>++</span><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end cmp_abs &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * add_abs() - 
 * 
 *  Add the absolute values of two variables into result. 
 *  result might point to one of the operands without danger. 
 * ---------- 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN549"></a><span class='Declare_Function'>add_abs</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var1</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var2</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>result</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN551"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>res_buf</span><span class='Delimiter'>; 
</span><a name="LN552"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>res_digits</span><span class='Delimiter'>; 
</span><a name="LN553"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_ndigits</span><span class='Delimiter'>; 
</span><a name="LN554"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_weight</span><span class='Delimiter'>; 
</span><a name="LN555"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_rscale</span><span class='Delimiter'>; 
</span><a name="LN556"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_dscale</span><span class='Delimiter'>; 
</span><a name="LN557"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN558"></a>                <span class='Declare_Local'>i1</span><span class='Delimiter'>, 
</span><a name="LN559"></a>                <span class='Declare_Local'>i2</span><span class='Delimiter'>; 
</span><a name="LN560"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>carry</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* copy these values into local vars for speed in inner loop */ 
</span><a name="LN563"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>var1ndigits</span> <span class='Operator'>= </span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; 
</span><a name="LN564"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>var2ndigits</span> <span class='Operator'>= </span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; 
</span><a name="LN565"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>var1digits</span> <span class='Operator'>= </span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>; 
</span><a name="LN566"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>var2digits</span> <span class='Operator'>= </span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN554"><span class='Ref_To_Local'>res_weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN555"><span class='Ref_To_Local'>res_rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN556"><span class='Ref_To_Local'>res_dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN555"><span class='Ref_To_Local'>res_rscale</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN554"><span class='Ref_To_Local'>res_weight</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="numeric.c.html#LN551"><span class='Ref_To_Local'>res_buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN15"><span class='Ref_to_Macro'>digitbuf_alloc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN552"><span class='Ref_To_Local'>res_digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN551"><span class='Ref_To_Local'>res_buf</span></a><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN558"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN555"><span class='Ref_To_Local'>res_rscale</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN559"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN555"><span class='Ref_To_Local'>res_rscale</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN557"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN557"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN557"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN558"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN559"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN558"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN558"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN563"><span class='Ref_To_Local'>var1ndigits</span></a><span class='Parentheses'>) 
</span>            <a href="numeric.c.html#LN560"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>+= </span><a href="numeric.c.html#LN565"><span class='Ref_To_Local'>var1digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN558"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN559"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN559"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN564"><span class='Ref_To_Local'>var2ndigits</span></a><span class='Parentheses'>) 
</span>            <a href="numeric.c.html#LN560"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>+= </span><a href="numeric.c.html#LN566"><span class='Ref_To_Local'>var2digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN559"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN560"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>&GT;= </span><span class='Number'>10</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN552"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN557"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN560"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>- </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN560"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN552"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN557"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN560"><span class='Ref_To_Local'>carry</span></a><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN560"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=res_ndigits-1;i&GT;=0;... &raquo; </span> 
 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& *</span><a href="numeric.c.html#LN552"><span class='Ref_To_Local'>res_digits</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN552"><span class='Ref_To_Local'>res_digits</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN554"><span class='Ref_To_Local'>res_weight</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN552"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN554"><span class='Ref_To_Local'>res_weight</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN16"><span class='Ref_to_Macro'>digitbuf_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN553"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN551"><span class='Ref_To_Local'>res_buf</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN552"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN554"><span class='Ref_To_Local'>res_weight</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN555"><span class='Ref_To_Local'>res_rscale</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN549"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN556"><span class='Ref_To_Local'>res_dscale</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end add_abs &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * sub_abs() - 
 * 
 *  Subtract the absolute value of var2 from the absolute value of var1 
 *  and store in result. result might point to one of the operands 
 *  without danger. 
 * 
 *  ABS(var1) MUST BE GREATER OR EQUAL ABS(var2) !!! 
 * ---------- 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN637"></a><span class='Declare_Function'>sub_abs</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var1</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var2</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>result</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN639"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>res_buf</span><span class='Delimiter'>; 
</span><a name="LN640"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>res_digits</span><span class='Delimiter'>; 
</span><a name="LN641"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_ndigits</span><span class='Delimiter'>; 
</span><a name="LN642"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_weight</span><span class='Delimiter'>; 
</span><a name="LN643"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_rscale</span><span class='Delimiter'>; 
</span><a name="LN644"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_dscale</span><span class='Delimiter'>; 
</span><a name="LN645"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN646"></a>                <span class='Declare_Local'>i1</span><span class='Delimiter'>, 
</span><a name="LN647"></a>                <span class='Declare_Local'>i2</span><span class='Delimiter'>; 
</span><a name="LN648"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>borrow</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* copy these values into local vars for speed in inner loop */ 
</span><a name="LN651"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>var1ndigits</span> <span class='Operator'>= </span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; 
</span><a name="LN652"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>var2ndigits</span> <span class='Operator'>= </span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; 
</span><a name="LN653"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>var1digits</span> <span class='Operator'>= </span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>; 
</span><a name="LN654"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>var2digits</span> <span class='Operator'>= </span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN642"><span class='Ref_To_Local'>res_weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN643"><span class='Ref_To_Local'>res_rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN644"><span class='Ref_To_Local'>res_dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN643"><span class='Ref_To_Local'>res_rscale</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN642"><span class='Ref_To_Local'>res_weight</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="numeric.c.html#LN639"><span class='Ref_To_Local'>res_buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN15"><span class='Ref_to_Macro'>digitbuf_alloc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN640"><span class='Ref_To_Local'>res_digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN639"><span class='Ref_To_Local'>res_buf</span></a><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN646"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN643"><span class='Ref_To_Local'>res_rscale</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN647"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN643"><span class='Ref_To_Local'>res_rscale</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN645"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN645"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN645"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN646"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN647"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN646"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN646"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN651"><span class='Ref_To_Local'>var1ndigits</span></a><span class='Parentheses'>) 
</span>            <a href="numeric.c.html#LN648"><span class='Ref_To_Local'>borrow</span></a> <span class='Operator'>+= </span><a href="numeric.c.html#LN653"><span class='Ref_To_Local'>var1digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN646"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN647"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN647"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN652"><span class='Ref_To_Local'>var2ndigits</span></a><span class='Parentheses'>) 
</span>            <a href="numeric.c.html#LN648"><span class='Ref_To_Local'>borrow</span></a> <span class='Operator'>-= </span><a href="numeric.c.html#LN654"><span class='Ref_To_Local'>var2digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN647"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN648"><span class='Ref_To_Local'>borrow</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN640"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN645"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN648"><span class='Ref_To_Local'>borrow</span></a> <span class='Operator'>+ </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN648"><span class='Ref_To_Local'>borrow</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN640"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN645"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN648"><span class='Ref_To_Local'>borrow</span></a><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN648"><span class='Ref_To_Local'>borrow</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for i=res_ndigits-1;i&GT;=0;... &raquo; </span> 
 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& *</span><a href="numeric.c.html#LN640"><span class='Ref_To_Local'>res_digits</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN640"><span class='Ref_To_Local'>res_digits</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN642"><span class='Ref_To_Local'>res_weight</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN640"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN642"><span class='Ref_To_Local'>res_weight</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN16"><span class='Ref_to_Macro'>digitbuf_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN641"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN639"><span class='Ref_To_Local'>res_buf</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN640"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN642"><span class='Ref_To_Local'>res_weight</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN643"><span class='Ref_To_Local'>res_rscale</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN637"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN644"><span class='Ref_To_Local'>res_dscale</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end sub_abs &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * add_var() - 
 * 
 *  Full version of add functionality on variable level (handling signs). 
 *  result might point to one of the operands too without danger. 
 * ---------- 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN721"></a><span class='Declare_Function'>PGTYPESnumeric_add</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var1</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var2</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>result</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * Decide on the signs of the two variables what to do 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Both are positive result = +(ABS(var1) + ABS(var2)) 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN527"><span class='Ref_to_Proto'>add_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * var1 is positive, var2 is negative Must compare absolute values 
             */ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN490"><span class='Ref_to_Func'>cmp_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) == ABS(var2) 
                     * result = ZERO 
                     * ---------- 
                     */ 
</span>                    <a href="numeric.c.html#LN457"><span class='Ref_to_Func'>zero_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) &GT; ABS(var2) 
                     * result = +(ABS(var1) - ABS(var2)) 
                     * ---------- 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN528"><span class='Ref_to_Proto'>sub_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) &LT; ABS(var2) 
                     * result = -(ABS(var2) - ABS(var1)) 
                     * ---------- 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN528"><span class='Ref_to_Proto'>sub_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch cmp_abs(var1,var2) &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if var1-&GT;sign==NUMERIC_P... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* ---------- 
             * var1 is negative, var2 is positive 
             * Must compare absolute values 
             * ---------- 
             */ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN490"><span class='Ref_to_Func'>cmp_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) == ABS(var2) 
                     * result = ZERO 
                     * ---------- 
                     */ 
</span>                    <a href="numeric.c.html#LN457"><span class='Ref_to_Func'>zero_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) &GT; ABS(var2) 
                     * result = -(ABS(var1) - ABS(var2)) 
                     * ---------- 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN528"><span class='Ref_to_Proto'>sub_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) &LT; ABS(var2) 
                     * result = +(ABS(var2) - ABS(var1)) 
                     * ---------- 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN528"><span class='Ref_to_Proto'>sub_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch cmp_abs(var1,var2) &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if var2-&GT;sign==NUMERIC_P... &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* ---------- 
             * Both are negative 
             * result = -(ABS(var1) + ABS(var2)) 
             * ---------- 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN527"><span class='Ref_to_Proto'>add_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN721"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_add &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * sub_var() - 
 * 
 *  Full version of sub functionality on variable level (handling signs). 
 *  result might point to one of the operands too without danger. 
 * ---------- 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN849"></a><span class='Declare_Function'>PGTYPESnumeric_sub</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var1</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var2</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>result</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* 
     * Decide on the signs of the two variables what to do 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* ---------- 
             * var1 is positive, var2 is negative 
             * result = +(ABS(var1) + ABS(var2)) 
             * ---------- 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN527"><span class='Ref_to_Proto'>add_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* ---------- 
             * Both are positive 
             * Must compare absolute values 
             * ---------- 
             */ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN490"><span class='Ref_to_Func'>cmp_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) == ABS(var2) 
                     * result = ZERO 
                     * ---------- 
                     */ 
</span>                    <a href="numeric.c.html#LN457"><span class='Ref_to_Func'>zero_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) &GT; ABS(var2) 
                     * result = +(ABS(var1) - ABS(var2)) 
                     * ---------- 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN528"><span class='Ref_to_Proto'>sub_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) &LT; ABS(var2) 
                     * result = -(ABS(var2) - ABS(var1)) 
                     * ---------- 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN528"><span class='Ref_to_Proto'>sub_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch cmp_abs(var1,var2) &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if var1-&GT;sign==NUMERIC_P... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* ---------- 
             * Both are negative 
             * Must compare absolute values 
             * ---------- 
             */ 
</span>            <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN490"><span class='Ref_to_Func'>cmp_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Control'>case</span> <span class='Number'>0</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) == ABS(var2) 
                     * result = ZERO 
                     * ---------- 
                     */ 
</span>                    <a href="numeric.c.html#LN457"><span class='Ref_to_Func'>zero_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) &GT; ABS(var2) 
                     * result = -(ABS(var1) - ABS(var2)) 
                     * ---------- 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN528"><span class='Ref_to_Proto'>sub_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
                <span class='Control'>case</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Operator'>: 
</span>                    <span class='Comment_Multi_Line'>/* ---------- 
                     * ABS(var1) &LT; ABS(var2) 
                     * result = +(ABS(var2) - ABS(var1)) 
                     * ---------- 
                     */ 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN528"><span class='Ref_to_Proto'>sub_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch cmp_abs(var1,var2) &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if var2-&GT;sign==NUMERIC_N... &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* ---------- 
             * var1 is negative, var2 is positive 
             * result = -(ABS(var1) + ABS(var2)) 
             * ---------- 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN527"><span class='Ref_to_Proto'>add_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN849"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_sub &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* ---------- 
 * mul_var() - 
 * 
 *  Multiplication on variable level. Product of var1 * var2 is stored 
 *  in result.  Accuracy of result is determined by global_rscale. 
 * ---------- 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN980"></a><span class='Declare_Function'>PGTYPESnumeric_mul</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var1</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var2</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>result</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN982"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>res_buf</span><span class='Delimiter'>; 
</span><a name="LN983"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>res_digits</span><span class='Delimiter'>; 
</span><a name="LN984"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_ndigits</span><span class='Delimiter'>; 
</span><a name="LN985"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_weight</span><span class='Delimiter'>; 
</span><a name="LN986"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_sign</span><span class='Delimiter'>; 
</span><a name="LN987"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>, 
</span><a name="LN988"></a>                <span class='Declare_Local'>ri</span><span class='Delimiter'>, 
</span><a name="LN989"></a>                <span class='Declare_Local'>i1</span><span class='Delimiter'>, 
</span><a name="LN990"></a>                <span class='Declare_Local'>i2</span><span class='Delimiter'>; 
</span><a name="LN991"></a>    <span class='Keyword'>long</span>        <span class='Declare_Local'>sum</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN992"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>global_rscale</span> <span class='Operator'>= </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN985"><span class='Ref_To_Local'>res_weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN986"><span class='Ref_To_Local'>res_sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="numeric.c.html#LN986"><span class='Ref_To_Local'>res_sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="numeric.c.html#LN982"><span class='Ref_To_Local'>res_buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN15"><span class='Ref_to_Macro'>digitbuf_alloc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN982"><span class='Ref_To_Local'>res_buf</span></a><span class='Delimiter'>; 
</span>    memset<span class='Parentheses'>(</span><a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN988"><span class='Ref_To_Local'>ri</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN989"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN989"><span class='Ref_To_Local'>i1</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN989"><span class='Ref_To_Local'>i1</span></a><span class='Operator'>--</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN991"><span class='Ref_To_Local'>sum</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= --</span><a href="numeric.c.html#LN988"><span class='Ref_To_Local'>ri</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN990"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN990"><span class='Ref_To_Local'>i2</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN990"><span class='Ref_To_Local'>i2</span></a><span class='Operator'>--</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN991"><span class='Ref_To_Local'>sum</span></a> <span class='Operator'>+= </span><a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>+ </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN989"><span class='Ref_To_Local'>i1</span></a><span class='Delimiter'>] </span><span class='Operator'>* </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN990"><span class='Ref_To_Local'>i2</span></a><span class='Delimiter'>]; 
</span>            <a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN991"><span class='Ref_To_Local'>sum</span></a> <span class='Operator'>% </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN991"><span class='Ref_To_Local'>sum</span></a> <span class='Operator'>/= </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN991"><span class='Ref_To_Local'>sum</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN985"><span class='Ref_To_Local'>res_weight</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN992"><span class='Ref_To_Local'>global_rscale</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN991"><span class='Ref_To_Local'>sum</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><span class='Number'>4</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN991"><span class='Ref_To_Local'>sum</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN991"><span class='Ref_To_Local'>sum</span></a> <span class='Operator'>+= </span><a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>            <a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN987"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN991"><span class='Ref_To_Local'>sum</span></a> <span class='Operator'>% </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN991"><span class='Ref_To_Local'>sum</span></a> <span class='Operator'>/= </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& *</span><a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN985"><span class='Ref_To_Local'>res_weight</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN986"><span class='Ref_To_Local'>res_sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN985"><span class='Ref_To_Local'>res_weight</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="numeric.c.html#LN16"><span class='Ref_to_Macro'>digitbuf_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN982"><span class='Ref_To_Local'>res_buf</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN983"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN984"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN985"><span class='Ref_To_Local'>res_weight</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN992"><span class='Ref_To_Local'>global_rscale</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN986"><span class='Ref_To_Local'>res_sign</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN980"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_mul &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Default scale selection for division 
 * 
 * Returns the appropriate display scale for the division result, 
 * and sets global_rscale to the result scale to use during div_var. 
 * 
 * Note that this must be called before div_var. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN1071"></a><span class='Declare_Function'>select_div_scale</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var1</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var2</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>rscale</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1073"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>weight1</span><span class='Delimiter'>, 
</span><a name="LN1074"></a>                <span class='Declare_Local'>weight2</span><span class='Delimiter'>, 
</span><a name="LN1075"></a>                <span class='Declare_Local'>qweight</span><span class='Delimiter'>, 
</span><a name="LN1076"></a>                <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1077"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Declare_Local'>firstdigit1</span><span class='Delimiter'>, 
</span><a name="LN1078"></a>                <span class='Declare_Local'>firstdigit2</span><span class='Delimiter'>; 
</span><a name="LN1079"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_dscale</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * The result scale of a division isn't specified in any SQL standard. For 
     * PostgreSQL we select a display scale that will give at least 
     * NUMERIC_MIN_SIG_DIGITS significant digits, so that numeric gives a 
     * result no less accurate than float8; but use a scale not less than 
     * either input's display scale. 
     */ 
</span> 
    <span class='Comment_Multi_Line'>/* Get the actual (normalized) weight and first digit of each input */ 
</span> 
    <a href="numeric.c.html#LN1073"><span class='Ref_To_Local'>weight1</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>                <span class='Comment_Single_Line'>/* values to use if var1 is zero */ 
</span>    <a href="numeric.c.html#LN1077"><span class='Ref_To_Local'>firstdigit1</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1076"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1076"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN1071"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; </span><a href="numeric.c.html#LN1076"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN1077"><span class='Ref_To_Local'>firstdigit1</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1071"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1076"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1077"><span class='Ref_To_Local'>firstdigit1</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN1073"><span class='Ref_To_Local'>weight1</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1071"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>- </span><a href="numeric.c.html#LN1076"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="numeric.c.html#LN1074"><span class='Ref_To_Local'>weight2</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>                <span class='Comment_Single_Line'>/* values to use if var2 is zero */ 
</span>    <a href="numeric.c.html#LN1078"><span class='Ref_To_Local'>firstdigit2</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1076"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1076"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN1071"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; </span><a href="numeric.c.html#LN1076"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN1078"><span class='Ref_To_Local'>firstdigit2</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1071"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1076"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1078"><span class='Ref_To_Local'>firstdigit2</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN1074"><span class='Ref_To_Local'>weight2</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1071"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>- </span><a href="numeric.c.html#LN1076"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Estimate weight of quotient.  If the two first digits are equal, we 
     * can't be sure, but assume that var1 is less than var2. 
     */ 
</span>    <a href="numeric.c.html#LN1075"><span class='Ref_To_Local'>qweight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1073"><span class='Ref_To_Local'>weight1</span></a> <span class='Operator'>- </span><a href="numeric.c.html#LN1074"><span class='Ref_To_Local'>weight2</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1077"><span class='Ref_To_Local'>firstdigit1</span></a> <span class='Operator'>&LT;= </span><a href="numeric.c.html#LN1078"><span class='Ref_To_Local'>firstdigit2</span></a><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN1075"><span class='Ref_To_Local'>qweight</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Select display scale */ 
</span>    <a href="numeric.c.html#LN1079"><span class='Ref_To_Local'>res_dscale</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN10"><span class='Ref_to_Const'>NUMERIC_MIN_SIG_DIGITS</span></a> <span class='Operator'>- </span><a href="numeric.c.html#LN1075"><span class='Ref_To_Local'>qweight</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1079"><span class='Ref_To_Local'>res_dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1079"><span class='Ref_To_Local'>res_dscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1071"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1079"><span class='Ref_To_Local'>res_dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1079"><span class='Ref_To_Local'>res_dscale</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1071"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1079"><span class='Ref_To_Local'>res_dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN10"><span class='Ref_to_Macro'>Max</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1079"><span class='Ref_To_Local'>res_dscale</span></a><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN9"><span class='Ref_to_Const'>NUMERIC_MIN_DISPLAY_SCALE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1079"><span class='Ref_To_Local'>res_dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN11"><span class='Ref_to_Macro'>Min</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1079"><span class='Ref_To_Local'>res_dscale</span></a><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN8"><span class='Ref_to_Const'>NUMERIC_MAX_DISPLAY_SCALE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Select result scale */ 
</span>    <span class='Operator'>*</span><a href="numeric.c.html#LN1071"><span class='Ref_to_Parameter'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1079"><span class='Ref_To_Local'>res_dscale</span></a> <span class='Operator'>+ </span><span class='Number'>4</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="numeric.c.html#LN1079"><span class='Ref_To_Local'>res_dscale</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end select_div_scale &raquo; </span> 
 
<span class='Keyword'>int 
</span><a name="LN1137"></a><span class='Declare_Function'>PGTYPESnumeric_div</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var1</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var2</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>result</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1139"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>res_digits</span><span class='Delimiter'>; 
</span><a name="LN1140"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_ndigits</span><span class='Delimiter'>; 
</span><a name="LN1141"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_sign</span><span class='Delimiter'>; 
</span><a name="LN1142"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_weight</span><span class='Delimiter'>; 
</span><a name="LN1143"></a>    <a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a>     <span class='Declare_Local'>dividend</span><span class='Delimiter'>; 
</span><a name="LN1144"></a>    <a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a>     <span class='Declare_Local'>divisor</span><span class='Delimiter'>[</span><span class='Number'>10</span><span class='Delimiter'>]; 
</span><a name="LN1145"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ndigits_tmp</span><span class='Delimiter'>; 
</span><a name="LN1146"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>weight_tmp</span><span class='Delimiter'>; 
</span><a name="LN1147"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>rscale_tmp</span><span class='Delimiter'>; 
</span><a name="LN1148"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>ri</span><span class='Delimiter'>; 
</span><a name="LN1149"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1150"></a>    <span class='Keyword'>long</span>        <span class='Declare_Local'>guess</span><span class='Delimiter'>; 
</span><a name="LN1151"></a>    <span class='Keyword'>long</span>        <span class='Declare_Local'>first_have</span><span class='Delimiter'>; 
</span><a name="LN1152"></a>    <span class='Keyword'>long</span>        <span class='Declare_Local'>first_div</span><span class='Delimiter'>; 
</span><a name="LN1153"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>first_nextdigit</span><span class='Delimiter'>; 
</span><a name="LN1154"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>stat</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1155"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>rscale</span><span class='Delimiter'>; 
</span><a name="LN1156"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>res_dscale</span> <span class='Operator'>= </span><a href="../../../backend/utils/adt/numeric.c.html#LN508"><span class='Ref_to_Proto'>select_div_scale</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="numeric.c.html#LN1155"><span class='Ref_To_Local'>rscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1157"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>err</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN1158"></a>    <a href="../include/pgtypes_numeric.h.html#LN14"><span class='Ref_to_Typedef'>NumericDigit</span></a> <span class='Operator'>*</span><span class='Declare_Local'>tmp_buf</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * First of all division by zero check 
     */ 
</span>    <a href="numeric.c.html#LN1145"><span class='Ref_To_Local'>ndigits_tmp</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1145"><span class='Ref_To_Local'>ndigits_tmp</span></a> <span class='Operator'>== </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN4"><span class='Ref_to_Const'>PGTYPES_NUM_DIVIDE_ZERO</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Determine the result sign, weight and number of digits to calculate 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN1141"><span class='Ref_To_Local'>res_sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="numeric.c.html#LN1141"><span class='Ref_To_Local'>res_sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1142"><span class='Ref_To_Local'>res_weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>- </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1140"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1155"><span class='Ref_To_Local'>rscale</span></a> <span class='Operator'>+ </span><a href="numeric.c.html#LN1142"><span class='Ref_To_Local'>res_weight</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1140"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN1140"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Now result zero check 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN457"><span class='Ref_to_Func'>zero_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1155"><span class='Ref_To_Local'>rscale</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Initialize local variables 
     */ 
</span>    <a href="numeric.c.html#LN13"><span class='Ref_to_Macro'>init_var</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1149"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1149"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><span class='Number'>10</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1149"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN13"><span class='Ref_to_Macro'>init_var</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1149"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Make a copy of the divisor which has one leading zero digit 
     */ 
</span>    <a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1145"><span class='Ref_To_Local'>ndigits_tmp</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN15"><span class='Ref_to_Macro'>digitbuf_alloc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1145"><span class='Ref_To_Local'>ndigits_tmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="numeric.c.html#LN1347"><span class='Ref_to_Label'>done</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1145"><span class='Ref_To_Local'>ndigits_tmp</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Make a copy of the dividend 
     */ 
</span>    <a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN15"><span class='Ref_to_Macro'>digitbuf_alloc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="numeric.c.html#LN1347"><span class='Ref_to_Label'>done</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span>    memcpy<span class='Parentheses'>(</span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Setup the result. Do the allocation in a temporary buffer first, so we 
     * don't free result-&GT;buf unless we have successfully allocated a buffer 
     * to replace it with. 
     */ 
</span>    <a href="numeric.c.html#LN1158"><span class='Ref_To_Local'>tmp_buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN15"><span class='Ref_to_Macro'>digitbuf_alloc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1140"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>+ </span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1158"><span class='Ref_To_Local'>tmp_buf</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="numeric.c.html#LN1347"><span class='Ref_to_Label'>done</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN16"><span class='Ref_to_Macro'>digitbuf_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1158"><span class='Ref_To_Local'>tmp_buf</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1139"><span class='Ref_To_Local'>res_digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1139"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1140"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1142"><span class='Ref_To_Local'>res_weight</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1155"><span class='Ref_To_Local'>rscale</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1141"><span class='Ref_To_Local'>res_sign</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1139"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN1152"><span class='Ref_To_Local'>first_div</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>* </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1145"><span class='Ref_To_Local'>ndigits_tmp</span></a> <span class='Operator'>&GT; </span><span class='Number'>2</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN1152"><span class='Ref_To_Local'>first_div</span></a> <span class='Operator'>+= </span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>]; 
</span> 
    <a href="numeric.c.html#LN1151"><span class='Ref_To_Local'>first_have</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1153"><span class='Ref_To_Local'>first_nextdigit</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN1146"><span class='Ref_To_Local'>weight_tmp</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1147"><span class='Ref_To_Local'>rscale_tmp</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a> <span class='Operator'>&LT;= </span><a href="numeric.c.html#LN1140"><span class='Ref_To_Local'>res_ndigits</span></a><span class='Delimiter'>; </span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN1151"><span class='Ref_To_Local'>first_have</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1151"><span class='Ref_To_Local'>first_have</span></a> <span class='Operator'>* </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1153"><span class='Ref_To_Local'>first_nextdigit</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN1153"><span class='Ref_To_Local'>first_nextdigit</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>) 
</span>            <a href="numeric.c.html#LN1151"><span class='Ref_To_Local'>first_have</span></a> <span class='Operator'>+= </span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1153"><span class='Ref_To_Local'>first_nextdigit</span></a><span class='Delimiter'>]; 
</span>        <a href="numeric.c.html#LN1153"><span class='Ref_To_Local'>first_nextdigit</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
        <a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN1151"><span class='Ref_To_Local'>first_have</span></a> <span class='Operator'>* </span><span class='Number'>10</span><span class='Parentheses'>) </span><span class='Operator'>/ </span><a href="numeric.c.html#LN1152"><span class='Ref_To_Local'>first_div</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a> <span class='Operator'>&GT; </span><span class='Number'>9</span><span class='Parentheses'>) 
</span>            <a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a> <span class='Operator'>= </span><span class='Number'>9</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN1268"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1269"></a>                <span class='Keyword'>long</span>        <span class='Declare_Local'>sum</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
                memcpy<span class='Parentheses'>(</span><span class='Operator'>&</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN15"><span class='Ref_to_Macro'>digitbuf_alloc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                    <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="numeric.c.html#LN1347"><span class='Ref_to_Label'>done</span></a><span class='Delimiter'>; 
</span>                <a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Delimiter'>; 
</span>                <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1268"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1268"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1268"><span class='Ref_To_Local'>i</span></a><span class='Operator'>--</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span>                    <a href="numeric.c.html#LN1269"><span class='Ref_To_Local'>sum</span></a> <span class='Operator'>+= </span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1268"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>* </span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1268"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN1269"><span class='Ref_To_Local'>sum</span></a> <span class='Operator'>% </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>                    <a href="numeric.c.html#LN1269"><span class='Ref_To_Local'>sum</span></a> <span class='Operator'>/= </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>} 
</span> 
            <a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1146"><span class='Ref_To_Local'>weight_tmp</span></a><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1147"><span class='Ref_To_Local'>rscale_tmp</span></a><span class='Delimiter'>; 
</span> 
            <a href="numeric.c.html#LN1154"><span class='Ref_To_Local'>stat</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN490"><span class='Ref_to_Func'>cmp_abs</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1154"><span class='Ref_To_Local'>stat</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while guess&GT;0 &raquo; </span> 
 
        <a href="numeric.c.html#LN1139"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1154"><span class='Ref_To_Local'>stat</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <a href="numeric.c.html#LN1146"><span class='Ref_To_Local'>weight_tmp</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN1147"><span class='Ref_To_Local'>rscale_tmp</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>continue</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../backend/utils/adt/numeric.c.html#LN528"><span class='Ref_to_Proto'>sub_abs</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1150"><span class='Ref_To_Local'>guess</span></a><span class='Delimiter'>], </span><span class='Operator'>&</span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>goto</span> <span class='Symbol_Characters'>&darr;</span><a href="numeric.c.html#LN1347"><span class='Ref_to_Label'>done</span></a><span class='Delimiter'>; 
</span> 
        <a href="numeric.c.html#LN1153"><span class='Ref_To_Local'>first_nextdigit</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>- </span><a href="numeric.c.html#LN1146"><span class='Ref_To_Local'>weight_tmp</span></a><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN1151"><span class='Ref_To_Local'>first_have</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1153"><span class='Ref_To_Local'>first_nextdigit</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN1153"><span class='Ref_To_Local'>first_nextdigit</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>) 
</span>            <a href="numeric.c.html#LN1151"><span class='Ref_To_Local'>first_have</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1153"><span class='Ref_To_Local'>first_nextdigit</span></a><span class='Delimiter'>]; 
</span>        <a href="numeric.c.html#LN1153"><span class='Ref_To_Local'>first_nextdigit</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ri=0;ri&LT;=res_ndigits;... &raquo; </span> 
 
    <a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a> <span class='Operator'>== </span><a href="numeric.c.html#LN1140"><span class='Ref_To_Local'>res_ndigits</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN1320"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>carry</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN1139"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a><span class='Delimiter'>] </span><span class='Operator'>&GT; </span><span class='Number'>4</span><span class='Parentheses'>) </span><span class='Operator'>? </span><span class='Number'>1</span> <span class='Operator'>: </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN1139"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1320"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>&& </span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="numeric.c.html#LN1320"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>+= </span><a href="numeric.c.html#LN1139"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><span class='Operator'>--</span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a><span class='Delimiter'>]; 
</span>            <a href="numeric.c.html#LN1139"><span class='Ref_To_Local'>res_digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1148"><span class='Ref_To_Local'>ri</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN1320"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>% </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>            <a href="numeric.c.html#LN1320"><span class='Ref_To_Local'>carry</span></a> <span class='Operator'>/= </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& *</span><span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Parentheses'>)</span><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Parentheses'>)</span><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>)</span><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>)</span><span class='Operator'>--</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN1137"><span class='Ref_to_Parameter'>result</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1156"><span class='Ref_To_Local'>res_dscale</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1157"><span class='Ref_To_Local'>err</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>;</span>                    <span class='Comment_Single_Line'>/* if we've made it this far, return success */ 
</span> 
<a name="LN1347"></a><span class='Label'>done</span><span class='Operator'>: 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Tidy up 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN16"><span class='Ref_to_Macro'>digitbuf_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1143"><span class='Ref_To_Local'>dividend</span></a><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1149"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1149"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><span class='Number'>10</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1149"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1149"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="numeric.c.html#LN16"><span class='Ref_to_Macro'>digitbuf_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1144"><span class='Ref_To_Local'>divisor</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1149"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><a href="../include/pgtypes_numeric.h.html#LN22"><span class='Ref_to_Member'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="numeric.c.html#LN1157"><span class='Ref_To_Local'>err</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_div &raquo; </span> 
 
 
<span class='Keyword'>int 
</span><a name="LN1366"></a><span class='Declare_Function'>PGTYPESnumeric_cmp</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var1</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var2</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* use cmp_abs function to calculate the result */ 
</span> 
    <span class='Comment_Multi_Line'>/* both are positive: normal comparison with cmp_abs */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a> <span class='Operator'>&& </span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="numeric.c.html#LN490"><span class='Ref_to_Func'>cmp_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var1</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* both are negative: return the inverse of the normal comparison */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a> <span class='Operator'>&& </span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * instead of inverting the result, we invert the parameter ordering 
         */ 
</span>        <span class='Control'>return</span> <a href="numeric.c.html#LN490"><span class='Ref_to_Func'>cmp_abs</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var2</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* one is positive, one is negative: trivial */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a> <span class='Operator'>&& </span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var1</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a> <span class='Operator'>&& </span><a href="numeric.c.html#LN1366"><span class='Ref_to_Parameter'>var2</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>== </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN3"><span class='Ref_to_Const'>PGTYPES_NUM_BAD_NUMERIC</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> INT_MAX<span class='Delimiter'>; 
</span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_cmp &raquo; </span> 
 
<span class='Keyword'>int 
</span><a name="LN1395"></a><span class='Declare_Function'>PGTYPESnumeric_from_int</span><span class='Parentheses'>(</span><span class='Keyword'>signed int </span><span class='Declare_Parameter'>int_val</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* implicit conversion */ 
</span><a name="LN1398"></a>    <span class='Keyword'>signed long int </span><span class='Declare_Local'>long_int</span> <span class='Operator'>= </span><a href="numeric.c.html#LN1395"><span class='Ref_to_Parameter'>int_val</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="../include/pgtypes_numeric.h.html#LN53"><span class='Ref_to_Proto'>PGTYPESnumeric_from_long</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1398"><span class='Ref_To_Local'>long_int</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1395"><span class='Ref_to_Parameter'>var</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>int 
</span><a name="LN1404"></a><span class='Declare_Function'>PGTYPESnumeric_from_long</span><span class='Parentheses'>(</span><span class='Keyword'>signed long int </span><span class='Declare_Parameter'>long_val</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* calculate the size of the long int number */ 
</span>    <span class='Comment_Multi_Line'>/* a number n needs log_10 n digits */ 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * however we multiply by 10 each time and compare instead of calculating 
     * the logarithm 
     */ 
</span> 
<a name="LN1414"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>size</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN1415"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span><a name="LN1416"></a>    <span class='Keyword'>signed long int </span><span class='Declare_Local'>abs_long_val</span> <span class='Operator'>= </span><a href="numeric.c.html#LN1404"><span class='Ref_to_Parameter'>long_val</span></a><span class='Delimiter'>; 
</span><a name="LN1417"></a>    <span class='Keyword'>signed long int </span><span class='Declare_Local'>extract</span><span class='Delimiter'>; 
</span><a name="LN1418"></a>    <span class='Keyword'>signed long int </span><span class='Declare_Local'>reach_limit</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1416"><span class='Ref_To_Local'>abs_long_val</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN1416"><span class='Ref_To_Local'>abs_long_val</span></a> <span class='Operator'>*= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN1404"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN4"><span class='Ref_to_Const'>NUMERIC_NEG</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="numeric.c.html#LN1404"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN3"><span class='Ref_to_Const'>NUMERIC_POS</span></a><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN1418"><span class='Ref_To_Local'>reach_limit</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Control'>do</span> 
    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN1414"><span class='Ref_To_Local'>size</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN1418"><span class='Ref_To_Local'>reach_limit</span></a> <span class='Operator'>*= </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1418"><span class='Ref_To_Local'>reach_limit</span></a> <span class='Operator'>- </span><span class='Number'>1</span> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN1416"><span class='Ref_To_Local'>abs_long_val</span></a> <span class='Operator'>&& </span><a href="numeric.c.html#LN1418"><span class='Ref_To_Local'>reach_limit</span></a> <span class='Operator'>&LT;= </span>LONG_MAX <span class='Operator'>/ </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1418"><span class='Ref_To_Local'>reach_limit</span></a> <span class='Operator'>&GT; </span>LONG_MAX <span class='Operator'>/ </span><span class='Number'>10</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* add the first digit and a .0 */ 
</span>        <a href="numeric.c.html#LN1414"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>+= </span><span class='Number'>2</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* always add a .0 */ 
</span>        <a href="numeric.c.html#LN1414"><span class='Ref_To_Local'>size</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN1418"><span class='Ref_To_Local'>reach_limit</span></a> <span class='Operator'>/= </span><span class='Number'>10</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN112"><span class='Ref_to_Func'>alloc_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1404"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1414"><span class='Ref_To_Local'>size</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN1404"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1404"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1404"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1414"><span class='Ref_To_Local'>size</span></a> <span class='Operator'>- </span><span class='Number'>2</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN1415"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>do</span> 
    <span class='Delimiter'>{ 
</span>        <a href="numeric.c.html#LN1417"><span class='Ref_To_Local'>extract</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1416"><span class='Ref_To_Local'>abs_long_val</span></a> <span class='Operator'>- </span><span class='Parentheses'>(</span><a href="numeric.c.html#LN1416"><span class='Ref_To_Local'>abs_long_val</span></a> <span class='Operator'>% </span><a href="numeric.c.html#LN1418"><span class='Ref_To_Local'>reach_limit</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN1404"><span class='Ref_to_Parameter'>var</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1415"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN1417"><span class='Ref_To_Local'>extract</span></a> <span class='Operator'>/ </span><a href="numeric.c.html#LN1418"><span class='Ref_To_Local'>reach_limit</span></a><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN1416"><span class='Ref_To_Local'>abs_long_val</span></a> <span class='Operator'>-= </span><a href="numeric.c.html#LN1417"><span class='Ref_To_Local'>extract</span></a><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN1415"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="numeric.c.html#LN1418"><span class='Ref_To_Local'>reach_limit</span></a> <span class='Operator'>/= </span><span class='Number'>10</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * we can abandon if abs_long_val reaches 0, because the memory is 
         * initialized properly and filled with '0', so converting 10000 in 
         * only one step is no problem 
         */ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1416"><span class='Ref_To_Local'>abs_long_val</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_from_long &raquo; </span> 
 
<span class='Keyword'>int 
</span><a name="LN1474"></a><span class='Declare_Function'>PGTYPESnumeric_copy</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dst</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1476"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>dst</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN457"><span class='Ref_to_Func'>zero_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>dst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN112"><span class='Ref_to_Func'>alloc_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>dst</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1476"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1476"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; </span><a href="numeric.c.html#LN1476"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1476"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN1474"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1476"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_copy &raquo; </span> 
 
<span class='Keyword'>int 
</span><a name="LN1497"></a><span class='Declare_Function'>PGTYPESnumeric_from_double</span><span class='Parentheses'>(</span><span class='Keyword'>double </span><span class='Declare_Parameter'>d</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dst</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1499"></a>    <span class='Keyword'>char</span>        <span class='Declare_Local'>buffer</span><span class='Delimiter'>[</span>DBL_DIG <span class='Operator'>+ </span><span class='Number'>100</span><span class='Delimiter'>]; 
</span><a name="LN1500"></a>    <a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span><a name="LN1501"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/port.h.html#LN170"><span class='Ref_to_Macro'>sprintf</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1499"><span class='Ref_To_Local'>buffer</span></a><span class='Delimiter'>, </span><span class='String'>"%.*g"</span><span class='Delimiter'>, </span>DBL_DIG<span class='Delimiter'>, </span><a href="numeric.c.html#LN1497"><span class='Ref_to_Parameter'>d</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT;= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="numeric.c.html#LN1500"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN45"><span class='Ref_to_Proto'>PGTYPESnumeric_from_asc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1499"><span class='Ref_To_Local'>buffer</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>))</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1501"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN54"><span class='Ref_to_Proto'>PGTYPESnumeric_copy</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1500"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1497"><span class='Ref_to_Parameter'>dst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../include/pgtypes_numeric.h.html#LN43"><span class='Ref_to_Proto'>PGTYPESnumeric_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1500"><span class='Ref_To_Local'>tmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1501"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    errno <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_from_double &raquo; </span> 
 
<span class='Keyword'>static int 
</span><a name="LN1518"></a><span class='Declare_Function'>numericvar_to_double</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>var</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Operator'>*</span><span class='Declare_Parameter'>dp</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1520"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span><a name="LN1521"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>val</span><span class='Delimiter'>; 
</span><a name="LN1522"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>endptr</span><span class='Delimiter'>; 
</span><a name="LN1523"></a>    <a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a>    <span class='Operator'>*</span><span class='Declare_Local'>varcopy</span> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN41"><span class='Ref_to_Proto'>PGTYPESnumeric_new</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1523"><span class='Ref_To_Local'>varcopy</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN54"><span class='Ref_to_Proto'>PGTYPESnumeric_copy</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1518"><span class='Ref_to_Parameter'>var</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1523"><span class='Ref_To_Local'>varcopy</span></a><span class='Parentheses'>) </span><span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <a href="../include/pgtypes_numeric.h.html#LN43"><span class='Ref_to_Proto'>PGTYPESnumeric_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1523"><span class='Ref_To_Local'>varcopy</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="numeric.c.html#LN1520"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN309"><span class='Ref_to_Func'>get_str_from_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1523"><span class='Ref_To_Local'>varcopy</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1523"><span class='Ref_To_Local'>varcopy</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../include/pgtypes_numeric.h.html#LN43"><span class='Ref_to_Proto'>PGTYPESnumeric_free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1523"><span class='Ref_To_Local'>varcopy</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1520"><span class='Ref_To_Local'>tmp</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * strtod does not reset errno to 0 in case of success. 
     */ 
</span>    errno <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1521"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>= </span>strtod<span class='Parentheses'>(</span><a href="numeric.c.html#LN1520"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="numeric.c.html#LN1522"><span class='Ref_To_Local'>endptr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>errno <span class='Operator'>== </span>ERANGE<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1520"><span class='Ref_To_Local'>tmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1521"><span class='Ref_To_Local'>val</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN5"><span class='Ref_to_Const'>PGTYPES_NUM_UNDERFLOW</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN2"><span class='Ref_to_Const'>PGTYPES_NUM_OVERFLOW</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* can't free tmp yet, endptr points still into it */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN1522"><span class='Ref_To_Local'>endptr</span></a> <span class='Operator'>!= </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* shouldn't happen ... */ 
</span>        <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1520"><span class='Ref_To_Local'>tmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN3"><span class='Ref_to_Const'>PGTYPES_NUM_BAD_NUMERIC</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1520"><span class='Ref_To_Local'>tmp</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="numeric.c.html#LN1518"><span class='Ref_to_Parameter'>dp</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1521"><span class='Ref_To_Local'>val</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end numericvar_to_double &raquo; </span> 
 
<span class='Keyword'>int 
</span><a name="LN1569"></a><span class='Declare_Function'>PGTYPESnumeric_to_double</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>nv</span><span class='Delimiter'>, </span><span class='Keyword'>double </span><span class='Operator'>*</span><span class='Declare_Parameter'>dp</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1571"></a>    <span class='Keyword'>double</span>      <span class='Declare_Local'>tmp</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1517"><span class='Ref_to_Func'>numericvar_to_double</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1569"><span class='Ref_to_Parameter'>nv</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="numeric.c.html#LN1571"><span class='Ref_To_Local'>tmp</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="numeric.c.html#LN1569"><span class='Ref_to_Parameter'>dp</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1571"><span class='Ref_To_Local'>tmp</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>int 
</span><a name="LN1580"></a><span class='Declare_Function'>PGTYPESnumeric_to_int</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>nv</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>ip</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1582"></a>    <span class='Keyword'>long</span>        <span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span><a name="LN1583"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="numeric.c.html#LN1583"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN58"><span class='Ref_to_Proto'>PGTYPESnumeric_to_long</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1580"><span class='Ref_to_Parameter'>nv</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="numeric.c.html#LN1582"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>))</span> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <a href="numeric.c.html#LN1583"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1582"><span class='Ref_To_Local'>l</span></a> <span class='Operator'>&LT; -</span>INT_MAX <span class='Operator'>|| </span><a href="numeric.c.html#LN1582"><span class='Ref_To_Local'>l</span></a> <span class='Operator'>&GT; </span>INT_MAX<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN2"><span class='Ref_to_Const'>PGTYPES_NUM_OVERFLOW</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Operator'>*</span><a href="numeric.c.html#LN1580"><span class='Ref_to_Parameter'>ip</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><a href="numeric.c.html#LN1582"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>int 
</span><a name="LN1599"></a><span class='Declare_Function'>PGTYPESnumeric_to_long</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>nv</span><span class='Delimiter'>, </span><span class='Keyword'>long </span><span class='Operator'>*</span><span class='Declare_Parameter'>lp</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1601"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>s</span> <span class='Operator'>= </span><a href="../include/pgtypes_numeric.h.html#LN46"><span class='Ref_to_Proto'>PGTYPESnumeric_to_asc</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1599"><span class='Ref_to_Parameter'>nv</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN1602"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>endptr</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1601"><span class='Ref_To_Local'>s</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    errno <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="numeric.c.html#LN1599"><span class='Ref_to_Parameter'>lp</span></a> <span class='Operator'>= </span>strtol<span class='Parentheses'>(</span><a href="numeric.c.html#LN1601"><span class='Ref_To_Local'>s</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="numeric.c.html#LN1602"><span class='Ref_To_Local'>endptr</span></a><span class='Delimiter'>, </span><span class='Number'>10</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1602"><span class='Ref_To_Local'>endptr</span></a> <span class='Operator'>== </span><a href="numeric.c.html#LN1601"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* this should not happen actually */ 
</span>        <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1601"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../include/snowball/header.h.html#LN64"><span class='Ref_to_Macro'>free</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1601"><span class='Ref_To_Local'>s</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>errno <span class='Operator'>== </span>ERANGE<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="numeric.c.html#LN1599"><span class='Ref_to_Parameter'>lp</span></a> <span class='Operator'>== </span>LONG_MIN<span class='Parentheses'>) 
</span>            errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN5"><span class='Ref_to_Const'>PGTYPES_NUM_UNDERFLOW</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN2"><span class='Ref_to_Const'>PGTYPES_NUM_OVERFLOW</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_to_long &raquo; </span> 
 
<span class='Keyword'>int 
</span><a name="LN1628"></a><span class='Declare_Function'>PGTYPESnumeric_to_decimal</span><span class='Parentheses'>(</span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><a href="../test/expected/preproc-outofscope.c.html#LN53"><span class='Ref_to_Typedef'>decimal</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dst</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1630"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>&GT; </span><a href="../include/pgtypes_numeric.h.html#LN12"><span class='Ref_to_Const'>DECSIZE</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        errno <span class='Operator'>= </span><a href="../include/pgtypes_error.h.html#LN2"><span class='Ref_to_Const'>PGTYPES_NUM_OVERFLOW</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN29"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN30"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN31"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN32"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN28"><span class='Ref_to_Member'>ndigits</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1630"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1630"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN17"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; </span><a href="numeric.c.html#LN1630"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN33"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1630"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN1628"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1630"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_to_decimal &raquo; </span> 
 
<span class='Keyword'>int 
</span><a name="LN1651"></a><span class='Declare_Function'>PGTYPESnumeric_from_decimal</span><span class='Parentheses'>(</span><a href="../test/expected/preproc-outofscope.c.html#LN53"><span class='Ref_to_Typedef'>decimal</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>src</span><span class='Delimiter'>, </span><a href="../include/pgtypes_numeric.h.html#LN15"><span class='Ref_to_Typedef'>numeric</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>dst</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN1653"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN457"><span class='Ref_to_Func'>zero_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>dst</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN18"><span class='Ref_to_Member'>weight</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN29"><span class='Ref_to_Member'>weight</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN19"><span class='Ref_to_Member'>rscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN30"><span class='Ref_to_Member'>rscale</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN20"><span class='Ref_to_Member'>dscale</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN31"><span class='Ref_to_Member'>dscale</span></a><span class='Delimiter'>; 
</span>    <a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN21"><span class='Ref_to_Member'>sign</span></a> <span class='Operator'>= </span><a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN32"><span class='Ref_to_Member'>sign</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN112"><span class='Ref_to_Func'>alloc_var</span></a><span class='Parentheses'>(</span><a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>dst</span></a><span class='Delimiter'>, </span><a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN28"><span class='Ref_to_Member'>ndigits</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
        <span class='Control'>return</span> <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="numeric.c.html#LN1653"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="numeric.c.html#LN1653"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN28"><span class='Ref_to_Member'>ndigits</span></a><span class='Delimiter'>; </span><a href="numeric.c.html#LN1653"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>        <a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>dst</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN23"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1653"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="numeric.c.html#LN1651"><span class='Ref_to_Parameter'>src</span></a><span class='Operator'>-&GT;</span><a href="../include/pgtypes_numeric.h.html#LN33"><span class='Ref_to_Member'>digits</span></a><span class='Delimiter'>[</span><a href="numeric.c.html#LN1653"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]; 
</span> 
    <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end PGTYPESnumeric_from_decimal &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>