<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\pl\plpgsql\src\pl_gram.y</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\pl\plpgsql\src\pl_gram.y</b></p></td>
<td align='right'>
Wed Jun 14 08:26:13 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Operator'>%</span><span class='Delimiter'>{ 
</span><span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * pl_gram.y            - Parser for the PL/pgSQL procedural language 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/pl/plpgsql/src/pl_gram.y 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span> 
<span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"catalog/namespace.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"catalog/pg_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parser.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/parse_type.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/scanner.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/scansup.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"utils/builtins.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"plpgsql.h"</span> 
 
 
<span class='Comment_Multi_Line'>/* Location tracking support --- simpler than bison's default */ 
</span><a name="LN29"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>YYLLOC_DEFAULT</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>Current</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>Rhs</span><span class='Delimiter'>, </span><span class='Declare_Parameter'>N</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Control'>do</span> <span class='Delimiter'>{ </span><span class='Operator'>\ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN29"><span class='Ref_to_Parameter'>N</span></a><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>            <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN29"><span class='Ref_to_Parameter'>Current</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN29"><span class='Ref_to_Parameter'>Rhs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>]; </span><span class='Operator'>\ 
</span>        <span class='Control'>else</span> <span class='Operator'>\ 
</span>            <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN29"><span class='Ref_to_Parameter'>Current</span></a><span class='Parentheses'>) </span><span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN29"><span class='Ref_to_Parameter'>Rhs</span></a><span class='Parentheses'>)</span><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]; </span><span class='Operator'>\ 
</span>    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>) 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Bison doesn't allocate anything that needs to live across parser calls, 
 * so we can easily have it use palloc instead of malloc.  This prevents 
 * memory leaks if we error out during parsing.  Note this only works with 
 * bison &GT;= 2.0.  However, in bison 1.875 the default is to use alloca() 
 * if possible, so there's not really much problem anyhow, at least if 
 * you're building with gcc. 
 */ 
</span><a name="LN45"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>YYMALLOC</span> <a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a> 
<a name="LN46"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>YYFREE</span>   <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a> 
 
 
<span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN51"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>location</span><span class='Delimiter'>; 
</span><a name="LN52"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>leaderlen</span><span class='Delimiter'>; 
</span><a name="LN53"></a>} <span class='Declare_Typedef'>sql_error_callback_arg</span><span class='Delimiter'>; 
</span> 
<a name="LN55"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>parser_errposition</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>pos</span><span class='Parentheses'>)</span>  <a href="pl_scanner.c.html#LN586"><span class='Ref_to_Func'>plpgsql_scanner_errposition</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN55"><span class='Ref_to_Parameter'>pos</span></a><span class='Parentheses'>) 
</span> 
<span class='Control'>union</span> <a href="../../../../contrib/cube/cubeparse.y.html#LN12"><span class='Ref_to_Const'>YYSTYPE</span></a><span class='Delimiter'>;</span>                  <span class='Comment_Single_Line'>/* need forward reference for tok_is_keyword */ 
</span> 
<a name="LN59"></a><span class='Keyword'>static</span>  <span class='Keyword'>bool</span>            <span class='Declare_Prototype'>tok_is_keyword</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>token</span><span class='Delimiter'>, </span><span class='Control'>union</span> <a href="../../../../contrib/cube/cubeparse.y.html#LN12"><span class='Ref_to_Const'>YYSTYPE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lval</span><span class='Delimiter'>, 
</span><a name="LN60"></a>                                       <span class='Keyword'>int </span><span class='Declare_Parameter'>kw_token</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>kw_str</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN61"></a><span class='Keyword'>static</span>  <span class='Keyword'>void</span>            <span class='Declare_Prototype'>word_is_not_variable</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN986"><span class='Ref_to_Struct'>PLword</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN62"></a><span class='Keyword'>static</span>  <span class='Keyword'>void</span>            <span class='Declare_Prototype'>cword_is_not_variable</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN992"><span class='Ref_to_Struct'>PLcword</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cword</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN63"></a><span class='Keyword'>static</span>  <span class='Keyword'>void</span>            <span class='Declare_Prototype'>current_token_is_not_variable</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>tok</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN64"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>read_sql_construct</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>until</span><span class='Delimiter'>, 
</span><a name="LN65"></a>                                            <span class='Keyword'>int </span><span class='Declare_Parameter'>until2</span><span class='Delimiter'>, 
</span><a name="LN66"></a>                                            <span class='Keyword'>int </span><span class='Declare_Parameter'>until3</span><span class='Delimiter'>, 
</span><a name="LN67"></a>                                            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>expected</span><span class='Delimiter'>, 
</span><a name="LN68"></a>                                            <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>sqlstart</span><span class='Delimiter'>, 
</span><a name="LN69"></a>                                            <span class='Keyword'>bool </span><span class='Declare_Parameter'>isexpression</span><span class='Delimiter'>, 
</span><a name="LN70"></a>                                            <span class='Keyword'>bool </span><span class='Declare_Parameter'>valid_sql</span><span class='Delimiter'>, 
</span><a name="LN71"></a>                                            <span class='Keyword'>bool </span><span class='Declare_Parameter'>trim</span><span class='Delimiter'>, 
</span><a name="LN72"></a>                                            <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>startloc</span><span class='Delimiter'>, 
</span><a name="LN73"></a>                                            <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>endtoken</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN74"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>read_sql_expression</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>until</span><span class='Delimiter'>, 
</span><a name="LN75"></a>                                             <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>expected</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN76"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>read_sql_expression2</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>until</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>until2</span><span class='Delimiter'>, 
</span><a name="LN77"></a>                                              <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>expected</span><span class='Delimiter'>, 
</span><a name="LN78"></a>                                              <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>endtoken</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN79"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>read_sql_stmt</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>sqlstart</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN80"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN175"><span class='Ref_to_Struct'>PLpgSQL_type</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>read_datatype</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>tok</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN81"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>make_execsql_stmt</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>firsttoken</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN82"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN636"><span class='Ref_to_Struct'>PLpgSQL_stmt_fetch</span></a> <span class='Operator'>*</span><span class='Declare_Prototype'>read_fetch_direction</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN83"></a><span class='Keyword'>static</span>  <span class='Keyword'>void</span>             <span class='Declare_Prototype'>complete_direction</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN636"><span class='Ref_to_Struct'>PLpgSQL_stmt_fetch</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fetch</span><span class='Delimiter'>, 
</span><a name="LN84"></a>                                            <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>check_FROM</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN85"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>make_return_stmt</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN86"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>make_return_next_stmt</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN87"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>make_return_query_stmt</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN88"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>make_case</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Delimiter'>, </span><a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>t_expr</span><span class='Delimiter'>, 
</span><a name="LN89"></a>                                   <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>case_when_list</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>else_stmts</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN90"></a><span class='Keyword'>static</span>  <span class='Keyword'>char</span>            <span class='Operator'>*</span><span class='Declare_Prototype'>NameOfDatum</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN997"><span class='Ref_to_Struct'>PLwdatum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>wdatum</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN91"></a><span class='Keyword'>static</span>  <span class='Keyword'>void</span>             <span class='Declare_Prototype'>check_assignable</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>datum</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN92"></a><span class='Keyword'>static</span>  <span class='Keyword'>void</span>             <span class='Declare_Prototype'>read_into_target</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN299"><span class='Ref_to_Struct'>PLpgSQL_rec</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>rec</span><span class='Delimiter'>, </span><a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>row</span><span class='Delimiter'>, 
</span><a name="LN93"></a>                                          <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>strict</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN94"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a>     <span class='Operator'>*</span><span class='Declare_Prototype'>read_into_scalar_list</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>initial_name</span><span class='Delimiter'>, 
</span><a name="LN95"></a>                                               <a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>initial_datum</span><span class='Delimiter'>, 
</span><a name="LN96"></a>                                               <span class='Keyword'>int </span><span class='Declare_Parameter'>initial_location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN97"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a>     <span class='Operator'>*</span><span class='Declare_Prototype'>make_scalar_list1</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>initial_name</span><span class='Delimiter'>, 
</span><a name="LN98"></a>                                           <a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>initial_datum</span><span class='Delimiter'>, 
</span><a name="LN99"></a>                                           <span class='Keyword'>int </span><span class='Declare_Parameter'>lineno</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN100"></a><span class='Keyword'>static</span>  <span class='Keyword'>void</span>             <span class='Declare_Prototype'>check_sql_expr</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>stmt</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Delimiter'>, 
</span><a name="LN101"></a>                                        <span class='Keyword'>int </span><span class='Declare_Parameter'>leaderlen</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN102"></a><span class='Keyword'>static</span>  <span class='Keyword'>void</span>             <span class='Declare_Prototype'>plpgsql_sql_error_callback</span><span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>arg</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN103"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN175"><span class='Ref_to_Struct'>PLpgSQL_type</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>parse_datatype</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>string</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN104"></a><span class='Keyword'>static</span>  <span class='Keyword'>void</span>             <span class='Declare_Prototype'>check_labels</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>start_label</span><span class='Delimiter'>, 
</span><a name="LN105"></a>                                      <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>end_label</span><span class='Delimiter'>, 
</span><a name="LN106"></a>                                      <span class='Keyword'>int </span><span class='Declare_Parameter'>end_location</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN107"></a><span class='Keyword'>static</span>  <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>    <span class='Operator'>*</span><span class='Declare_Prototype'>read_cursor_args</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cursor</span><span class='Delimiter'>, 
</span><a name="LN108"></a>                                          <span class='Keyword'>int </span><span class='Declare_Parameter'>until</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>expected</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN109"></a><span class='Keyword'>static</span>  <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>            <span class='Operator'>*</span><span class='Declare_Prototype'>read_raise_options</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN110"></a><span class='Keyword'>static</span>  <span class='Keyword'>void</span>            <span class='Declare_Prototype'>check_raise_parameters</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN709"><span class='Ref_to_Struct'>PLpgSQL_stmt_raise</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stmt</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Operator'>%</span><span class='Delimiter'>} 
</span> 
<span class='Operator'>%</span>expect <span class='Number'>0</span> 
<span class='Operator'>%</span>name<span class='Operator'>-</span>prefix<span class='Operator'>=</span><span class='String'>"plpgsql_yy"</span> 
<span class='Operator'>%</span>locations 
 
<span class='Operator'>%</span><span class='Control'>union</span> <span class='Delimiter'>{ 
</span><a name="LN119"></a>        <a href="../../../include/parser/scanner.h.html#LN28"><span class='Ref_to_Union'>core_YYSTYPE</span></a>            <span class='Declare_Var'>core_yystype</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* these fields must match core_YYSTYPE: */ 
</span><a name="LN121"></a>        <span class='Keyword'>int</span>                     <span class='Declare_Var'>ival</span><span class='Delimiter'>; 
</span><a name="LN122"></a>        <span class='Keyword'>char</span>                    <span class='Operator'>*</span><span class='Declare_Var'>str</span><span class='Delimiter'>; 
</span><a name="LN123"></a>        <span class='Keyword'>const char</span>              <span class='Operator'>*</span><span class='Declare_Var'>keyword</span><span class='Delimiter'>; 
</span> 
<a name="LN125"></a>        <a href="plpgsql.h.html#LN986"><span class='Ref_to_Struct'>PLword</span></a>                  <span class='Declare_Var'>word</span><span class='Delimiter'>; 
</span><a name="LN126"></a>        <a href="plpgsql.h.html#LN992"><span class='Ref_to_Struct'>PLcword</span></a>                 <span class='Declare_Var'>cword</span><span class='Delimiter'>; 
</span><a name="LN127"></a>        <a href="plpgsql.h.html#LN997"><span class='Ref_to_Struct'>PLwdatum</span></a>                <span class='Declare_Var'>wdatum</span><span class='Delimiter'>; 
</span><a name="LN128"></a>        <span class='Keyword'>bool</span>                    <span class='Declare_Var'>boolean</span><span class='Delimiter'>; 
</span><a name="LN129"></a>        <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>                     <span class='Declare_Var'>oid</span><span class='Delimiter'>; 
</span>        <span class='Control'>struct</span> 
        <span class='Delimiter'>{ 
</span><a name="LN132"></a>            <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Member'>name</span><span class='Delimiter'>; 
</span><a name="LN133"></a>            <span class='Keyword'>int</span>  <span class='Declare_Member'>lineno</span><span class='Delimiter'>; 
</span><a name="LN134"></a>        <span class='Delimiter'>}</span>                       <span class='Declare_Var'>varname</span><span class='Delimiter'>; 
</span>        <span class='Control'>struct</span> 
        <span class='Delimiter'>{ 
</span><a name="LN137"></a>            <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Member'>name</span><span class='Delimiter'>; 
</span><a name="LN138"></a>            <span class='Keyword'>int</span>  <span class='Declare_Member'>lineno</span><span class='Delimiter'>; 
</span><a name="LN139"></a>            <a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a>   <span class='Operator'>*</span><span class='Declare_Member'>scalar</span><span class='Delimiter'>; 
</span><a name="LN140"></a>            <a href="plpgsql.h.html#LN299"><span class='Ref_to_Struct'>PLpgSQL_rec</span></a>     <span class='Operator'>*</span><span class='Declare_Member'>rec</span><span class='Delimiter'>; 
</span><a name="LN141"></a>            <a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a>     <span class='Operator'>*</span><span class='Declare_Member'>row</span><span class='Delimiter'>; 
</span><a name="LN142"></a>        <span class='Delimiter'>}</span>                       <span class='Declare_Var'>forvariable</span><span class='Delimiter'>; 
</span>        <span class='Control'>struct</span> 
        <span class='Delimiter'>{ 
</span><a name="LN145"></a>            <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Member'>label</span><span class='Delimiter'>; 
</span><a name="LN146"></a>            <span class='Keyword'>int</span>  <span class='Declare_Member'>n_initvars</span><span class='Delimiter'>; 
</span><a name="LN147"></a>            <span class='Keyword'>int</span>  <span class='Operator'>*</span><span class='Declare_Member'>initvarnos</span><span class='Delimiter'>; 
</span><a name="LN148"></a>        <span class='Delimiter'>}</span>                       <span class='Declare_Var'>declhdr</span><span class='Delimiter'>; 
</span>        <span class='Control'>struct</span> 
        <span class='Delimiter'>{ 
</span><a name="LN151"></a>            <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Member'>stmts</span><span class='Delimiter'>; 
</span><a name="LN152"></a>            <span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Member'>end_label</span><span class='Delimiter'>; 
</span><a name="LN153"></a>            <span class='Keyword'>int</span>   <span class='Declare_Member'>end_label_location</span><span class='Delimiter'>; 
</span><a name="LN154"></a>        <span class='Delimiter'>}</span>                       <span class='Declare_Var'>loop_body</span><span class='Delimiter'>; 
</span><a name="LN155"></a>        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>                    <span class='Operator'>*</span><span class='Declare_Var'>list</span><span class='Delimiter'>; 
</span><a name="LN156"></a>        <a href="plpgsql.h.html#LN175"><span class='Ref_to_Struct'>PLpgSQL_type</span></a>            <span class='Operator'>*</span><span class='Declare_Var'>dtype</span><span class='Delimiter'>; 
</span><a name="LN157"></a>        <a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a>           <span class='Operator'>*</span><span class='Declare_Var'>datum</span><span class='Delimiter'>; 
</span><a name="LN158"></a>        <a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a>             <span class='Operator'>*</span><span class='Declare_Var'>var</span><span class='Delimiter'>; 
</span><a name="LN159"></a>        <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>            <span class='Operator'>*</span><span class='Declare_Var'>expr</span><span class='Delimiter'>; 
</span><a name="LN160"></a>        <a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a>            <span class='Operator'>*</span><span class='Declare_Var'>stmt</span><span class='Delimiter'>; 
</span><a name="LN161"></a>        <a href="plpgsql.h.html#LN373"><span class='Ref_to_Struct'>PLpgSQL_condition</span></a>       <span class='Operator'>*</span><span class='Declare_Var'>condition</span><span class='Delimiter'>; 
</span><a name="LN162"></a>        <a href="plpgsql.h.html#LN393"><span class='Ref_to_Struct'>PLpgSQL_exception</span></a>       <span class='Operator'>*</span><span class='Declare_Var'>exception</span><span class='Delimiter'>; 
</span><a name="LN163"></a>        <a href="plpgsql.h.html#LN383"><span class='Ref_to_Struct'>PLpgSQL_exception_block</span></a> <span class='Operator'>*</span><span class='Declare_Var'>exception_block</span><span class='Delimiter'>; 
</span><a name="LN164"></a>        <a href="plpgsql.h.html#LN348"><span class='Ref_to_Struct'>PLpgSQL_nsitem</span></a>          <span class='Operator'>*</span><span class='Declare_Var'>nsitem</span><span class='Delimiter'>; 
</span><a name="LN165"></a>        <a href="plpgsql.h.html#LN438"><span class='Ref_to_Struct'>PLpgSQL_diag_item</span></a>       <span class='Operator'>*</span><span class='Declare_Var'>diagitem</span><span class='Delimiter'>; 
</span><a name="LN166"></a>        <a href="plpgsql.h.html#LN636"><span class='Ref_to_Struct'>PLpgSQL_stmt_fetch</span></a>      <span class='Operator'>*</span><span class='Declare_Var'>fetch</span><span class='Delimiter'>; 
</span><a name="LN167"></a>        <a href="plpgsql.h.html#LN495"><span class='Ref_to_Struct'>PLpgSQL_case_when</span></a>       <span class='Operator'>*</span><span class='Declare_Var'>casewhen</span><span class='Delimiter'>; 
} 
</span> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN148"><span class='Ref_to_Global_Var'>declhdr</span></a><span class='Operator'>&GT; </span><a href="pl_gram.y.html#LN424"><span class='Ref_to_Label'>decl_sect</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN134"><span class='Ref_to_Global_Var'>varname</span></a><span class='Operator'>&GT; </span><a href="pl_gram.y.html#LN726"><span class='Ref_to_Label'>decl_varname</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN128"><span class='Ref_to_Global_Var'>boolean</span></a><span class='Operator'>&GT; </span><a href="pl_gram.y.html#LN784"><span class='Ref_to_Label'>decl_const</span></a> <a href="pl_gram.y.html#LN819">decl_notnull</a> <a href="pl_gram.y.html#LN1714">exit_type</a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN482"><span class='Ref_to_Global_Var'>decl_defval</span></a> <a href="pl_gram.y.html#LN544"><span class='Ref_to_Global_Var'>decl_cursor_query</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN156"><span class='Ref_to_Global_Var'>dtype</span></a><span class='Operator'>&GT;</span>   <a href="pl_gram.y.html#LN657"><span class='Ref_to_Global_Var'>decl_datatype</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN129"><span class='Ref_to_Global_Var'>oid</span></a><span class='Operator'>&GT;</span>     <a href="pl_gram.y.html#LN801"><span class='Ref_to_Label'>decl_collate</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN157"><span class='Ref_to_Global_Var'>datum</span></a><span class='Operator'>&GT;</span>   <a href="pl_gram.y.html#LN614"><span class='Ref_to_Label'>decl_cursor_args</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../backend/replication/syncrep_gram.y.html#LN44"><span class='Ref_to_Global_Var'>list</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN647"><span class='Ref_to_Label'>decl_cursor_arglist</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN164"><span class='Ref_to_Global_Var'>nsitem</span></a><span class='Operator'>&GT;</span>  <a href="pl_gram.y.html#LN668"><span class='Ref_to_Label'>decl_aliasitem</span></a> 
 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN902"><span class='Ref_to_Global_Var'>expr_until_semi</span></a> <a href="pl_gram.y.html#LN2330"><span class='Ref_to_Label'>expr_until_rightbracket</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN2334"><span class='Ref_to_Label'>expr_until_then</span></a> <a href="pl_gram.y.html#LN2338">expr_until_loop</a> <a href="pl_gram.y.html#LN1170">opt_expr_until_when</a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN1662"><span class='Ref_to_Global_Var'>opt_exitcond</span></a> 
 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN157"><span class='Ref_to_Global_Var'>datum</span></a><span class='Operator'>&GT;</span>   <a href="pl_gram.y.html#LN1099"><span class='Ref_to_Label'>assign_var</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Operator'>&GT;</span>     <a href="pl_gram.y.html#LN2029"><span class='Ref_to_Global_Var'>cursor_variable</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN157"><span class='Ref_to_Global_Var'>datum</span></a><span class='Operator'>&GT;</span>   <a href="pl_gram.y.html#LN657"><span class='Ref_to_Label'>decl_cursor_arg</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN142"><span class='Ref_to_Global_Var'>forvariable</span></a><span class='Operator'>&GT; </span><a href="pl_gram.y.html#LN1556"><span class='Ref_to_Label'>for_variable</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../bin/pgbench/exprparse.y.html#LN40"><span class='Ref_to_Global_Var'>ival</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN1652"><span class='Ref_to_Label'>foreach_slice</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN160"><span class='Ref_to_Global_Var'>stmt</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN1294"><span class='Ref_to_Label'>for_control</span></a> 
 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../test/isolation/specparse.y.html#LN26"><span class='Ref_to_Global_Var'>str</span></a><span class='Operator'>&GT;</span>     <a href="pl_gram.y.html#LN2386"><span class='Ref_to_Label'>any_identifier</span></a> <a href="pl_gram.y.html#LN2342">opt_block_label</a> <a href="pl_gram.y.html#LN2354">opt_loop_label</a> <a href="pl_gram.y.html#LN402"><span class='Ref_to_Global_Var'>opt_label</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../test/isolation/specparse.y.html#LN26"><span class='Ref_to_Global_Var'>str</span></a><span class='Operator'>&GT;</span>     <a href="pl_gram.y.html#LN389"><span class='Ref_to_Label'>option_value</span></a> 
 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../backend/replication/syncrep_gram.y.html#LN44"><span class='Ref_to_Global_Var'>list</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN846"><span class='Ref_to_Label'>proc_sect</span></a> <a href="pl_gram.y.html#LN1137">stmt_elsifs</a> <a href="pl_gram.y.html#LN1154">stmt_else</a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN154"><span class='Ref_to_Global_Var'>loop_body</span></a><span class='Operator'>&GT;</span>   <a href="pl_gram.y.html#LN154"><span class='Ref_to_Global_Var'>loop_body</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN160"><span class='Ref_to_Global_Var'>stmt</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN858"><span class='Ref_to_Label'>proc_stmt</span></a> <a href="pl_gram.y.html#LN402">pl_block</a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN160"><span class='Ref_to_Global_Var'>stmt</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN915"><span class='Ref_to_Label'>stmt_assign</span></a> <a href="pl_gram.y.html#LN1121">stmt_if</a> <a href="pl_gram.y.html#LN1225">stmt_loop</a> <a href="pl_gram.y.html#LN1242">stmt_while</a> <a href="pl_gram.y.html#LN1662">stmt_exit</a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN160"><span class='Ref_to_Global_Var'>stmt</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN1724"><span class='Ref_to_Label'>stmt_return</span></a> <a href="pl_gram.y.html#LN1750">stmt_raise</a> <a href="pl_gram.y.html#LN1894">stmt_assert</a> <a href="pl_gram.y.html#LN1935">stmt_execsql</a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN160"><span class='Ref_to_Global_Var'>stmt</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN1965"><span class='Ref_to_Label'>stmt_dynexecute</span></a> <a href="pl_gram.y.html#LN1260">stmt_for</a> <a href="pl_gram.y.html#LN902">stmt_perform</a> <a href="pl_gram.y.html#LN929">stmt_getdiag</a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN160"><span class='Ref_to_Global_Var'>stmt</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN2029"><span class='Ref_to_Label'>stmt_open</span></a> <a href="pl_gram.y.html#LN2106">stmt_fetch</a> <a href="pl_gram.y.html#LN2138">stmt_move</a> <a href="pl_gram.y.html#LN2156">stmt_close</a> <a href="pl_gram.y.html#LN2169">stmt_null</a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN160"><span class='Ref_to_Global_Var'>stmt</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN1164"><span class='Ref_to_Label'>stmt_case</span></a> <a href="pl_gram.y.html#LN1610">stmt_foreach_a</a> 
 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../backend/replication/syncrep_gram.y.html#LN44"><span class='Ref_to_Global_Var'>list</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN2252"><span class='Ref_to_Label'>proc_exceptions</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN163"><span class='Ref_to_Global_Var'>exception_block</span></a><span class='Operator'>&GT; </span><a href="pl_gram.y.html#LN2210"><span class='Ref_to_Label'>exception_sect</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><span class='Keyword'>exception</span><span class='Operator'>&GT;</span>   <a href="pl_gram.y.html#LN2252"><span class='Ref_to_Global_Var'>proc_exception</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN161"><span class='Ref_to_Global_Var'>condition</span></a><span class='Operator'>&GT;</span>   <a href="pl_gram.y.html#LN2275"><span class='Ref_to_Label'>proc_conditions</span></a> <a href="pl_gram.y.html#LN2275"><span class='Ref_to_Global_Var'>proc_condition</span></a> 
 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN167"><span class='Ref_to_Global_Var'>casewhen</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN1185"><span class='Ref_to_Global_Var'>case_when</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../backend/replication/syncrep_gram.y.html#LN44"><span class='Ref_to_Global_Var'>list</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN1185"><span class='Ref_to_Label'>case_when_list</span></a> <a href="pl_gram.y.html#LN1206">opt_case_else</a> 
 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN128"><span class='Ref_to_Global_Var'>boolean</span></a><span class='Operator'>&GT; </span><a href="pl_gram.y.html#LN991"><span class='Ref_to_Label'>getdiag_area_opt</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../backend/replication/syncrep_gram.y.html#LN44"><span class='Ref_to_Global_Var'>list</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN1005"><span class='Ref_to_Label'>getdiag_list</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN165"><span class='Ref_to_Global_Var'>diagitem</span></a><span class='Operator'>&GT; </span><a href="pl_gram.y.html#LN1015"><span class='Ref_to_Label'>getdiag_list_item</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN157"><span class='Ref_to_Global_Var'>datum</span></a><span class='Operator'>&GT;</span>   <a href="pl_gram.y.html#LN1075"><span class='Ref_to_Label'>getdiag_target</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../bin/pgbench/exprparse.y.html#LN40"><span class='Ref_to_Global_Var'>ival</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN1015"><span class='Ref_to_Global_Var'>getdiag_item</span></a> 
 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="../../../bin/pgbench/exprparse.y.html#LN40"><span class='Ref_to_Global_Var'>ival</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN594"><span class='Ref_to_Label'>opt_scrollable</span></a> 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Operator'>&GT;</span>   <a href="pl_gram.y.html#LN2150"><span class='Ref_to_Label'>opt_fetch_direction</span></a> 
 
<span class='Operator'>%</span>type <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT; </span><a href="pl_gram.y.html#LN2402"><span class='Ref_to_Label'>unreserved_keyword</span></a> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Basic non-keyword token types.  These are hard-wired into the core lexer. 
 * They must be listed first so that their numeric codes do not depend on 
 * the set of keywords.  Keep this list in sync with backend/parser/gram.y! 
 * 
 * Some of these are not directly referenced in this file, but they must be 
 * here anyway. 
 */ 
</span><span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="../../../test/isolation/specparse.y.html#LN26"><span class='Ref_to_Global_Var'>str</span></a><span class='Operator'>&GT;</span>    <a href="../../../backend/replication/repl_gram.y.html#LN269"><span class='Ref_to_Global_Var'>IDENT</span></a> FCONST <a href="../../../backend/replication/repl_gram.y.html#LN174"><span class='Ref_to_Global_Var'>SCONST</span></a> BCONST XCONST Op 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="../../../bin/pgbench/exprparse.y.html#LN40"><span class='Ref_to_Global_Var'>ival</span></a><span class='Operator'>&GT;</span>   ICONST PARAM 
<span class='Operator'>%</span>token          TYPECAST DOT_DOT COLON_EQUALS EQUALS_GREATER 
<span class='Operator'>%</span>token          LESS_EQUALS GREATER_EQUALS NOT_EQUALS 
 
<span class='Comment_Multi_Line'>/* 
 * Other tokens recognized by plpgsql's lexer interface layer (pl_scanner.c). 
 */ 
</span><span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="../../../backend/regex/regcomp.c.html#LN47"><span class='Ref_to_Proto'>word</span></a><span class='Operator'>&GT;</span>       T_WORD      <span class='Comment_Single_Line'>/* unrecognized simple identifier */ 
</span><span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN126"><span class='Ref_to_Global_Var'>cword</span></a><span class='Operator'>&GT;</span>      T_CWORD     <span class='Comment_Single_Line'>/* unrecognized composite identifier */ 
</span><span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN127"><span class='Ref_to_Global_Var'>wdatum</span></a><span class='Operator'>&GT;</span>     T_DATUM     <span class='Comment_Single_Line'>/* a VAR, ROW, REC, or RECFIELD variable */ 
</span><span class='Operator'>%</span>token              LESS_LESS 
<span class='Operator'>%</span>token              GREATER_GREATER 
 
<span class='Comment_Multi_Line'>/* 
 * Keyword tokens.  Some of these are reserved and some are not; 
 * see pl_scanner.c for info.  Be sure unreserved keywords are listed 
 * in the "unreserved_keyword" production below. 
 */ 
</span><span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_ABSOLUTE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_ALIAS 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_ALL 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_ARRAY 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_ASSERT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_BACKWARD 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_BEGIN 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_BY 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_CASE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_CLOSE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_COLLATE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_COLUMN 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_COLUMN_NAME 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_CONSTANT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_CONSTRAINT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_CONSTRAINT_NAME 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_CONTINUE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_CURRENT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_CURSOR 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_DATATYPE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_DEBUG 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_DECLARE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_DEFAULT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_DETAIL 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_DIAGNOSTICS 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_DUMP 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_ELSE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_ELSIF 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_END 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_ERRCODE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_ERROR 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_EXCEPTION 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_EXECUTE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_EXIT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_FETCH 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_FIRST 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_FOR 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_FOREACH 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_FORWARD 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_FROM 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_GET 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_HINT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_IF 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_IMPORT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN1294"><span class='Ref_to_Global_Var'>K_IN</span></a> 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_INFO 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_INSERT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    <a href="pl_gram.y.html#LN2106"><span class='Ref_to_Global_Var'>K_INTO</span></a> 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_IS 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_LAST 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_LOG 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_LOOP 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_MESSAGE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_MESSAGE_TEXT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_MOVE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_NEXT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_NO 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_NOT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_NOTICE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_NULL 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_OPEN 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_OPTION 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_OR 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_PERFORM 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_PG_CONTEXT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_PG_DATATYPE_NAME 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_PG_EXCEPTION_CONTEXT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_PG_EXCEPTION_DETAIL 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_PG_EXCEPTION_HINT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_PRINT_STRICT_PARAMS 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_PRIOR 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_QUERY 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_RAISE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_RELATIVE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_RESULT_OID 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_RETURN 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_RETURNED_SQLSTATE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_REVERSE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_ROW_COUNT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_ROWTYPE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_SCHEMA 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_SCHEMA_NAME 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_SCROLL 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_SLICE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_SQLSTATE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_STACKED 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_STRICT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_TABLE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_TABLE_NAME 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_THEN 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_TO 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_TYPE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_USE_COLUMN 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_USE_VARIABLE 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_USING 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_VARIABLE_CONFLICT 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_WARNING 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_WHEN 
<span class='Operator'>%</span>token <span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN123"><span class='Ref_to_Global_Var'>keyword</span></a><span class='Operator'>&GT;</span>    K_WHILE 
 
<span class='Operator'>%% 
</span> 
pl_function     <span class='Operator'>: </span><a href="pl_gram.y.html#LN358"><span class='Ref_to_Label'>comp_options</span></a> <a href="pl_gram.y.html#LN402">pl_block</a> <a href="pl_gram.y.html#LN398">opt_semi</a> 
                    <span class='Delimiter'>{ 
</span>                        <a href="pl_comp.c.html#LN42"><span class='Ref_to_Global_Var'>plpgsql_parse_result</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN403"><span class='Ref_to_Struct'>PLpgSQL_stmt_block</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>$2<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN358"></a><span class='Label'>comp_options</span>    <span class='Operator'>: 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN358"><span class='Ref_to_Label'>comp_options</span></a> <a href="pl_gram.y.html#LN362">comp_option</a> 
                <span class='Delimiter'>; 
</span> 
<a name="LN362"></a><span class='Label'>comp_option</span>     <span class='Operator'>: </span><span class='String'>'#'</span> K_OPTION K_DUMP 
                    <span class='Delimiter'>{ 
</span>                        <a href="pl_comp.c.html#LN50"><span class='Ref_to_Global_Var'>plpgsql_DumpExecTree</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><span class='String'>'#'</span> K_PRINT_STRICT_PARAMS <a href="pl_gram.y.html#LN389"><span class='Ref_to_Label'>option_value</span></a> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span>$3<span class='Delimiter'>, </span><span class='String'>"on"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                            <a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN858"><span class='Ref_to_Member'>print_strict_params</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span>$3<span class='Delimiter'>, </span><span class='String'>"off"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                            <a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN858"><span class='Ref_to_Member'>print_strict_params</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
<a name="LN373"></a>                            <span class='Declare_Prototype'>elog</span><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized print_strict_params option %s"</span><span class='Delimiter'>, </span>$3<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><span class='String'>'#'</span> K_VARIABLE_CONFLICT K_ERROR 
                    <span class='Delimiter'>{ 
</span>                        <a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN856"><span class='Ref_to_Member'>resolve_option</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN162"><span class='Ref_to_EnumConst'>PLPGSQL_RESOLVE_ERROR</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><span class='String'>'#'</span> K_VARIABLE_CONFLICT K_USE_VARIABLE 
                    <span class='Delimiter'>{ 
</span>                        <a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN856"><span class='Ref_to_Member'>resolve_option</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN163"><span class='Ref_to_EnumConst'>PLPGSQL_RESOLVE_VARIABLE</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><span class='String'>'#'</span> K_VARIABLE_CONFLICT K_USE_COLUMN 
                    <span class='Delimiter'>{ 
</span>                        <a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN856"><span class='Ref_to_Member'>resolve_option</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN164"><span class='Ref_to_EnumConst'>PLPGSQL_RESOLVE_COLUMN</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN389"></a><span class='Label'>option_value</span> <span class='Operator'>: </span>T_WORD 
                <span class='Delimiter'>{ 
</span>                    $$ <span class='Operator'>= </span>$1<span class='Operator'>.</span>ident<span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>             <span class='Operator'>| </span><a href="pl_gram.y.html#LN2402"><span class='Ref_to_Label'>unreserved_keyword</span></a> 
                <span class='Delimiter'>{ 
</span>                    $$ <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span> 
<a name="LN398"></a><span class='Label'>opt_semi</span>        <span class='Operator'>: 
</span>                <span class='Operator'>| </span><span class='String'>';'</span> 
                <span class='Delimiter'>; 
</span> 
<a name="LN402"></a><span class='Label'>pl_block</span>        <span class='Operator'>: </span><a href="pl_gram.y.html#LN424"><span class='Ref_to_Label'>decl_sect</span></a> K_BEGIN <a href="pl_gram.y.html#LN846"><span class='Ref_to_Label'>proc_sect</span></a> <a href="pl_gram.y.html#LN2210">exception_sect</a> K_END <span class='Declare_Var'>opt_label</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN403"><span class='Ref_to_Struct'>PLpgSQL_stmt_block</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN403"><span class='Ref_to_Struct'>PLpgSQL_stmt_block</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type   <span class='Operator'>= </span><a href="plpgsql.h.html#LN84"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_BLOCK</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno     <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>label      <span class='Operator'>= </span>$1<span class='Operator'>.</span>label<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>n_initvars <span class='Operator'>= </span>$1<span class='Operator'>.</span>n_initvars<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>initvarnos <span class='Operator'>= </span>$1<span class='Operator'>.</span>initvarnos<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>body       <span class='Operator'>= </span>$3<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>exceptions <span class='Operator'>= </span>$4<span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN104"><span class='Ref_to_Proto'>check_labels</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>label<span class='Delimiter'>, </span>$6<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>6</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="pl_funcs.c.html#LN67"><span class='Ref_to_Func'>plpgsql_ns_pop</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
 
<a name="LN424"></a><span class='Label'>decl_sect</span>       <span class='Operator'>: </span><a href="pl_gram.y.html#LN2342"><span class='Ref_to_Label'>opt_block_label</span></a> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* done with decls, so resume identifier lookup */ 
</span>                        <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1011"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_NORMAL</span></a><span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>label      <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>n_initvars <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>initvarnos <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2342"><span class='Ref_to_Label'>opt_block_label</span></a> <a href="pl_gram.y.html#LN448">decl_start</a> 
                    <span class='Delimiter'>{ 
</span>                        <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1011"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_NORMAL</span></a><span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>label      <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>n_initvars <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>initvarnos <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2342"><span class='Ref_to_Label'>opt_block_label</span></a> <a href="pl_gram.y.html#LN448">decl_start</a> <a href="pl_gram.y.html#LN460">decl_stmts</a> 
                    <span class='Delimiter'>{ 
</span>                        <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1011"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_NORMAL</span></a><span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>label      <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* Remember variables declared in decl_stmts */ 
</span>                        $$<span class='Operator'>.</span>n_initvars <span class='Operator'>= </span><a href="plpgsql.h.html#LN1080"><span class='Ref_to_Proto'>plpgsql_add_initdatums</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>$$<span class='Operator'>.</span>initvarnos<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN448"></a><span class='Label'>decl_start</span>      <span class='Operator'>: </span>K_DECLARE 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* Forget any variables created before block */ 
</span>                        <a href="plpgsql.h.html#LN1080"><span class='Ref_to_Proto'>plpgsql_add_initdatums</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Disable scanner lookup of identifiers while 
                         * we process the decl_stmts 
                         */ 
</span>                        <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1012"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_DECLARE</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN460"></a><span class='Label'>decl_stmts</span>      <span class='Operator'>: </span><a href="pl_gram.y.html#LN460"><span class='Ref_to_Label'>decl_stmts</span></a> <a href="pl_gram.y.html#LN464">decl_stmt</a> 
                <span class='Operator'>| </span><a href="pl_gram.y.html#LN464"><span class='Ref_to_Label'>decl_stmt</span></a> 
                <span class='Delimiter'>; 
</span> 
<a name="LN464"></a><span class='Label'>decl_stmt</span>       <span class='Operator'>: </span><a href="pl_gram.y.html#LN482"><span class='Ref_to_Label'>decl_statement</span></a> 
                <span class='Operator'>| </span>K_DECLARE 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* We allow useless extra DECLAREs */ 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>LESS_LESS <a href="pl_gram.y.html#LN2386"><span class='Ref_to_Label'>any_identifier</span></a> GREATER_GREATER 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Throw a helpful error if user tries to put block 
                         * label just before BEGIN, instead of before DECLARE. 
                         */ 
</span>                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"block label must be placed before DECLARE, not after"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                 <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN482"></a><span class='Label'>decl_statement</span>  <span class='Operator'>: </span><a href="pl_gram.y.html#LN726"><span class='Ref_to_Label'>decl_varname</span></a> <a href="pl_gram.y.html#LN784">decl_const</a> <a href="pl_gram.y.html#LN657"><span class='Ref_to_Global_Var'>decl_datatype</span></a> <a href="pl_gram.y.html#LN801"><span class='Ref_to_Label'>decl_collate</span></a> <a href="pl_gram.y.html#LN819">decl_notnull</a> <span class='Declare_Var'>decl_defval</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN207"><span class='Ref_to_Struct'>PLpgSQL_variable</span></a>    <span class='Operator'>*</span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Delimiter'>; 
</span> 
                        <span class='Comment_Multi_Line'>/* 
                         * If a collation is supplied, insert it into the 
                         * datatype.  We assume decl_datatype always returns 
                         * a freshly built struct not shared with other 
                         * variables. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span>$4<span class='Parentheses'>))</span> 
                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="../../../include/c.h.html#LN537"><span class='Ref_to_Macro'>OidIsValid</span></a><span class='Parentheses'>(</span>$3<span class='Operator'>-&GT;</span>collation<span class='Parentheses'>))</span> 
                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"collations are not supported by type %s"</span><span class='Delimiter'>, 
</span>                                                <a href="../../../backend/utils/adt/format_type.c.html#LN92"><span class='Ref_to_Func'>format_type_be</span></a><span class='Parentheses'>(</span>$3<span class='Operator'>-&GT;</span>typoid<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>4</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                            $3<span class='Operator'>-&GT;</span>collation <span class='Operator'>= </span>$4<span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                        <a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1071"><span class='Ref_to_Proto'>plpgsql_build_variable</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>name<span class='Delimiter'>, </span>$1<span class='Operator'>.</span>lineno<span class='Delimiter'>, 
</span>                                                     $3<span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$2<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN255"><span class='Ref_to_Member'>dtype</span></a> <span class='Operator'>== </span><a href="plpgsql.h.html#LN60"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_VAR</span></a><span class='Parentheses'>) 
</span>                                <span class='Parentheses'>((</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN261"><span class='Ref_to_Member'>isconst</span></a> <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"row or record variable cannot be CONSTANT"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>2</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$5<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN255"><span class='Ref_to_Member'>dtype</span></a> <span class='Operator'>== </span><a href="plpgsql.h.html#LN60"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_VAR</span></a><span class='Parentheses'>) 
</span>                                <span class='Parentheses'>((</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN262"><span class='Ref_to_Member'>notnull</span></a> <span class='Operator'>= </span>$5<span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"row or record variable cannot be NOT NULL"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>4</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
                        <span class='Delimiter'>} 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$6 <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN255"><span class='Ref_to_Member'>dtype</span></a> <span class='Operator'>== </span><a href="plpgsql.h.html#LN60"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_VAR</span></a><span class='Parentheses'>) 
</span>                                <span class='Parentheses'>((</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN263"><span class='Ref_to_Member'>default_val</span></a> <span class='Operator'>= </span>$6<span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"default value for row or record variable is not supported"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>5</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN726"><span class='Ref_to_Label'>decl_varname</span></a> K_ALIAS K_FOR <a href="pl_gram.y.html#LN668"><span class='Ref_to_Label'>decl_aliasitem</span></a> <span class='String'>';'</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="pl_funcs.c.html#LN92"><span class='Ref_to_Func'>plpgsql_ns_additem</span></a><span class='Parentheses'>(</span>$4<span class='Operator'>-&GT;</span>itemtype<span class='Delimiter'>, 
</span>                                           $4<span class='Operator'>-&GT;</span>itemno<span class='Delimiter'>, </span>$1<span class='Operator'>.</span>name<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN726"><span class='Ref_to_Label'>decl_varname</span></a> <a href="pl_gram.y.html#LN594">opt_scrollable</a> K_CURSOR 
                    <span class='Delimiter'>{ </span><a href="pl_funcs.c.html#LN54"><span class='Ref_to_Func'>plpgsql_ns_push</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>name<span class='Delimiter'>, </span><a href="plpgsql.h.html#LN52"><span class='Ref_to_EnumConst'>PLPGSQL_LABEL_OTHER</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; } 
</span><a name="LN544"></a>                  <a href="pl_gram.y.html#LN614"><span class='Ref_to_Label'>decl_cursor_args</span></a> <a href="pl_gram.y.html#LN665">decl_is_for</a> <span class='Declare_Var'>decl_cursor_query</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                        <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>*</span>curname_def<span class='Delimiter'>; 
</span>                        <span class='Keyword'>char</span>        <a href="../../../bin/pg_test_fsync/pg_test_fsync.c.html#LN66"><span class='Ref_to_Global_Var'>buf</span></a><span class='Delimiter'>[</span><span class='Number'>1024</span><span class='Delimiter'>]; 
</span>                        <span class='Keyword'>char</span>        <span class='Operator'>*</span>cp1<span class='Delimiter'>; 
</span>                        <span class='Keyword'>char</span>        <span class='Operator'>*</span>cp2<span class='Delimiter'>; 
</span> 
                        <span class='Comment_Multi_Line'>/* pop local namespace for cursor args */ 
</span>                        <a href="pl_funcs.c.html#LN67"><span class='Ref_to_Func'>plpgsql_ns_pop</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>                            <a href="plpgsql.h.html#LN1071"><span class='Ref_to_Proto'>plpgsql_build_variable</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>name<span class='Delimiter'>, </span>$1<span class='Operator'>.</span>lineno<span class='Delimiter'>, 
</span>                                                   <a href="plpgsql.h.html#LN1069"><span class='Ref_to_Proto'>plpgsql_build_datatype</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN59"><span class='Ref_to_Const'>REFCURSOROID</span></a><span class='Delimiter'>, 
</span>                                                                          <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                                                          <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                   <span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        curname_def <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                        curname_def<span class='Operator'>-&GT;</span>dtype <span class='Operator'>= </span><a href="plpgsql.h.html#LN65"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_EXPR</span></a><span class='Delimiter'>; 
</span>                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span><a href="../../../bin/pg_test_fsync/pg_test_fsync.c.html#LN66"><span class='Ref_to_Global_Var'>buf</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        cp1 <span class='Operator'>= </span><span class='Control'>new</span><span class='Operator'>-&GT;</span>refname<span class='Delimiter'>; 
</span>                        cp2 <span class='Operator'>= </span><a href="../../../bin/pg_test_fsync/pg_test_fsync.c.html#LN66"><span class='Ref_to_Global_Var'>buf</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><a href="../../../bin/pg_test_fsync/pg_test_fsync.c.html#LN66"><span class='Ref_to_Global_Var'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Don't trust standard_conforming_strings here; 
                         * it might change before we use the string. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>strchr<span class='Parentheses'>(</span>cp1<span class='Delimiter'>, </span><span class='String'>'\\'</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
                            <span class='Operator'>*</span>cp2<span class='Operator'>++ = </span><a href="../../../include/c.h.html#LN509"><span class='Ref_to_Const'>ESCAPE_STRING_SYNTAX</span></a><span class='Delimiter'>; 
</span>                        <span class='Operator'>*</span>cp2<span class='Operator'>++ = </span><span class='String'>'\''</span><span class='Delimiter'>; 
</span>                        <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>*</span>cp1<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/c.h.html#LN506"><span class='Ref_to_Macro'>SQL_STR_DOUBLE</span></a><span class='Parentheses'>(</span><span class='Operator'>*</span>cp1<span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>))</span> 
                                <span class='Operator'>*</span>cp2<span class='Operator'>++ = *</span>cp1<span class='Delimiter'>; 
</span>                            <span class='Operator'>*</span>cp2<span class='Operator'>++ = *</span>cp1<span class='Operator'>++</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <a href="../../../../contrib/cube/cubeparse.y.html#LN150"><span class='Ref_to_Proto'>strcpy</span></a><span class='Parentheses'>(</span>cp2<span class='Delimiter'>, </span><span class='String'>"'::pg_catalog.refcursor"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        curname_def<span class='Operator'>-&GT;</span>query <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="../../../bin/pg_test_fsync/pg_test_fsync.c.html#LN66"><span class='Ref_to_Global_Var'>buf</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>default_val <span class='Operator'>= </span>curname_def<span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cursor_explicit_expr <span class='Operator'>= </span>$7<span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$5 <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>cursor_explicit_argrow <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>cursor_explicit_argrow <span class='Operator'>= </span>$5<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cursor_options <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2607"><span class='Ref_to_Const'>CURSOR_OPT_FAST_PLAN</span></a> <span class='Operator'>| </span>$2<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN594"></a><span class='Label'>opt_scrollable</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>K_NO K_SCROLL 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2603"><span class='Ref_to_Const'>CURSOR_OPT_NO_SCROLL</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>K_SCROLL 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2602"><span class='Ref_to_Const'>CURSOR_OPT_SCROLL</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN608"></a><span class='Label'>decl_cursor_query</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN79"><span class='Ref_to_Proto'>read_sql_stmt</span></a><span class='Parentheses'>(</span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN614"></a><span class='Label'>decl_cursor_args</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><span class='String'>'('</span> <a href="pl_gram.y.html#LN647"><span class='Ref_to_Label'>decl_cursor_arglist</span></a> <span class='String'>')'</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                        <span class='Keyword'>int </span><a href="../../../interfaces/ecpg/test/expected/preproc-comment.c.html#LN22"><span class='Ref_to_Global_Var'>i</span></a><span class='Delimiter'>; 
</span>                        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a> <span class='Operator'>*</span>l<span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>dtype <span class='Operator'>= </span><a href="plpgsql.h.html#LN61"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ROW</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>rowtupdesc <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>nfields <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span>$2<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>fieldnames <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>nfields <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>varnos <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>nfields <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                        <a href="../../../interfaces/ecpg/test/expected/preproc-comment.c.html#LN22"><span class='Ref_to_Global_Var'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a> <span class='Parentheses'>(</span>l<span class='Delimiter'>, </span>$2<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="plpgsql.h.html#LN207"><span class='Ref_to_Struct'>PLpgSQL_variable</span></a> <span class='Operator'>*</span>arg <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN207"><span class='Ref_to_Struct'>PLpgSQL_variable</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span>l<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>fieldnames<span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/test/expected/preproc-comment.c.html#LN22"><span class='Ref_to_Global_Var'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span>arg<span class='Operator'>-&GT;</span>refname<span class='Delimiter'>; 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>varnos<span class='Delimiter'>[</span><a href="../../../interfaces/ecpg/test/expected/preproc-comment.c.html#LN22"><span class='Ref_to_Global_Var'>i</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span>arg<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                            <a href="../../../interfaces/ecpg/test/expected/preproc-comment.c.html#LN22"><span class='Ref_to_Global_Var'>i</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <a href="../../../include/nodes/pg_list.h.html#LN265"><span class='Ref_to_Proto'>list_free</span></a><span class='Parentheses'>(</span>$2<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <a href="plpgsql.h.html#LN1079"><span class='Ref_to_Proto'>plpgsql_adddatum</span></a><span class='Parentheses'>((</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN647"></a><span class='Label'>decl_cursor_arglist</span> <span class='Operator'>: </span><a href="pl_gram.y.html#LN657"><span class='Ref_to_Label'>decl_cursor_arg</span></a> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN647"><span class='Ref_to_Label'>decl_cursor_arglist</span></a> <span class='String'>','</span> <a href="pl_gram.y.html#LN657"><span class='Ref_to_Label'>decl_cursor_arg</span></a> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span>$1<span class='Delimiter'>, </span>$3<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN657"></a><span class='Label'>decl_cursor_arg</span> <span class='Operator'>: </span><a href="pl_gram.y.html#LN726"><span class='Ref_to_Label'>decl_varname</span></a> <span class='Declare_Var'>decl_datatype</span> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>                            <a href="plpgsql.h.html#LN1071"><span class='Ref_to_Proto'>plpgsql_build_variable</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>name<span class='Delimiter'>, </span>$1<span class='Operator'>.</span>lineno<span class='Delimiter'>, 
</span>                                                   $2<span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN665"></a><span class='Label'>decl_is_for</span>     <span class='Operator'>:</span>   K_IS <span class='Operator'>|</span>      <span class='Comment_Single_Line'>/* Oracle */ 
</span>                    K_FOR<span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* SQL standard */ 
</span> 
<a name="LN668"></a><span class='Label'>decl_aliasitem</span>  <span class='Operator'>: </span>T_WORD 
                    <span class='Delimiter'>{ 
</span><a name="LN670"></a>                        <a href="plpgsql.h.html#LN348"><span class='Ref_to_Struct'>PLpgSQL_nsitem</span></a> <span class='Operator'>*</span><span class='Declare_Var'>nsi</span><span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>= </span><a href="pl_funcs.c.html#LN130"><span class='Ref_to_Func'>plpgsql_ns_lookup</span></a><span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                                $1<span class='Operator'>.</span>ident<span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                                <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span><a name="LN676"></a>                            <span class='Declare_Prototype'>ereport</span><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_OBJECT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"variable \"%s\" does not exist"</span><span class='Delimiter'>, 
</span>                                            $1<span class='Operator'>.</span>ident<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2402"><span class='Ref_to_Label'>unreserved_keyword</span></a> 
                    <span class='Delimiter'>{ 
</span><a name="LN685"></a>                        <a href="plpgsql.h.html#LN348"><span class='Ref_to_Struct'>PLpgSQL_nsitem</span></a> <span class='Operator'>*</span><span class='Declare_Var'>nsi</span><span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>= </span><a href="pl_funcs.c.html#LN130"><span class='Ref_to_Func'>plpgsql_ns_lookup</span></a><span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                                $1<span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                                <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span><a name="LN691"></a>                            <span class='Declare_Prototype'>ereport</span><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_OBJECT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"variable \"%s\" does not exist"</span><span class='Delimiter'>, 
</span>                                            $1<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>T_CWORD 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN348"><span class='Ref_to_Struct'>PLpgSQL_nsitem</span></a> <span class='Operator'>*</span><a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>idents<span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>2</span><span class='Parentheses'>)</span> 
                            <a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>= </span><a href="pl_funcs.c.html#LN130"><span class='Ref_to_Func'>plpgsql_ns_lookup</span></a><span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>idents<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>idents<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                                    <span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                                    <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>idents<span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>3</span><span class='Parentheses'>)</span> 
                            <a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>= </span><a href="pl_funcs.c.html#LN130"><span class='Ref_to_Func'>plpgsql_ns_lookup</span></a><span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>idents<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN115"><span class='Ref_to_Macro'>lsecond</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>idents<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                                    <a href="../../../include/nodes/value.h.html#LN53"><span class='Ref_to_Macro'>strVal</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN120"><span class='Ref_to_Macro'>lthird</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>idents<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                                    <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_UNDEFINED_OBJECT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"variable \"%s\" does not exist"</span><span class='Delimiter'>, 
</span>                                            <a href="../../../include/catalog/namespace.h.html#LN120"><span class='Ref_to_Proto'>NameListToString</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>idents<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN726"></a><span class='Label'>decl_varname</span>    <span class='Operator'>: </span>T_WORD 
                    <span class='Delimiter'>{ 
</span>                        $$<span class='Operator'>.</span>name <span class='Operator'>= </span>$1<span class='Operator'>.</span>ident<span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Check to make sure name isn't already declared 
                         * in the current block. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN130"><span class='Ref_to_Func'>plpgsql_ns_lookup</span></a><span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                              $1<span class='Operator'>.</span>ident<span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                              <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
<a name="LN737"></a>                            <span class='Declare_Prototype'>yyerror</span><span class='Parentheses'>(</span><span class='String'>"duplicate declaration"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN861"><span class='Ref_to_Member'>extra_warnings</span></a> <span class='Operator'>& </span><a href="plpgsql.h.html#LN1026"><span class='Ref_to_Const'>PLPGSQL_XCHECK_SHADOWVAR</span></a> <span class='Operator'>|| 
</span>                            <a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN862"><span class='Ref_to_Member'>extra_errors</span></a> <span class='Operator'>& </span><a href="plpgsql.h.html#LN1026"><span class='Ref_to_Const'>PLPGSQL_XCHECK_SHADOWVAR</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span><a name="LN742"></a>                            <a href="plpgsql.h.html#LN348"><span class='Ref_to_Struct'>PLpgSQL_nsitem</span></a> <span class='Operator'>*</span><span class='Declare_Local'>nsi</span><span class='Delimiter'>; 
</span>                            <a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>= </span><a href="pl_funcs.c.html#LN130"><span class='Ref_to_Func'>plpgsql_ns_lookup</span></a><span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                                    $1<span class='Operator'>.</span>ident<span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN862"><span class='Ref_to_Member'>extra_errors</span></a> <span class='Operator'>& </span><a href="plpgsql.h.html#LN1026"><span class='Ref_to_Const'>PLPGSQL_XCHECK_SHADOWVAR</span></a> <span class='Operator'>? </span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a> <span class='Operator'>: </span><a href="../../../include/utils/elog.h.html#LN39"><span class='Ref_to_Const'>WARNING</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DUPLICATE_ALIAS<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"variable \"%s\" shadows a previously defined variable"</span><span class='Delimiter'>, 
</span>                                                $1<span class='Operator'>.</span>ident<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2402"><span class='Ref_to_Label'>unreserved_keyword</span></a> 
                    <span class='Delimiter'>{ 
</span>                        $$<span class='Operator'>.</span>name <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * Check to make sure name isn't already declared 
                         * in the current block. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN130"><span class='Ref_to_Func'>plpgsql_ns_lookup</span></a><span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                              $1<span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, 
</span>                                              <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
                            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"duplicate declaration"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN861"><span class='Ref_to_Member'>extra_warnings</span></a> <span class='Operator'>& </span><a href="plpgsql.h.html#LN1026"><span class='Ref_to_Const'>PLPGSQL_XCHECK_SHADOWVAR</span></a> <span class='Operator'>|| 
</span>                            <a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN862"><span class='Ref_to_Member'>extra_errors</span></a> <span class='Operator'>& </span><a href="plpgsql.h.html#LN1026"><span class='Ref_to_Const'>PLPGSQL_XCHECK_SHADOWVAR</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="plpgsql.h.html#LN348"><span class='Ref_to_Struct'>PLpgSQL_nsitem</span></a> <span class='Operator'>*</span><a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a><span class='Delimiter'>; 
</span>                            <a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>= </span><a href="pl_funcs.c.html#LN130"><span class='Ref_to_Func'>plpgsql_ns_lookup</span></a><span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                                    $1<span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN670"><span class='Ref_to_Global_Var'>nsi</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN862"><span class='Ref_to_Member'>extra_errors</span></a> <span class='Operator'>& </span><a href="plpgsql.h.html#LN1026"><span class='Ref_to_Const'>PLPGSQL_XCHECK_SHADOWVAR</span></a> <span class='Operator'>? </span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a> <span class='Operator'>: </span><a href="../../../include/utils/elog.h.html#LN39"><span class='Ref_to_Const'>WARNING</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DUPLICATE_ALIAS<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"variable \"%s\" shadows a previously defined variable"</span><span class='Delimiter'>, 
</span>                                                $1<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN784"></a><span class='Label'>decl_const</span>      <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span>K_CONSTANT 
                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; } 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN790"></a><span class='Label'>decl_datatype</span>   <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * If there's a lookahead token, read_datatype 
                         * should consume it. 
                         */ 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN80"><span class='Ref_to_Proto'>read_datatype</span></a><span class='Parentheses'>(</span>yychar<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        yyclearin<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN801"></a><span class='Label'>decl_collate</span>    <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span>K_COLLATE T_WORD 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/catalog/namespace.h.html#LN142"><span class='Ref_to_Proto'>get_collation_oid</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="../../../backend/nodes/value.c.html#LN51"><span class='Ref_to_Func'>makeString</span></a><span class='Parentheses'>(</span>$2<span class='Operator'>.</span>ident<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                               <span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>K_COLLATE <a href="pl_gram.y.html#LN2402"><span class='Ref_to_Label'>unreserved_keyword</span></a> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/catalog/namespace.h.html#LN142"><span class='Ref_to_Proto'>get_collation_oid</span></a><span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><a href="../../../backend/nodes/value.c.html#LN51"><span class='Ref_to_Func'>makeString</span></a><span class='Parentheses'>(</span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span>$2<span class='Parentheses'>)))</span><span class='Delimiter'>, 
</span>                                               <span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>K_COLLATE T_CWORD 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/catalog/namespace.h.html#LN142"><span class='Ref_to_Proto'>get_collation_oid</span></a><span class='Parentheses'>(</span>$2<span class='Operator'>.</span>idents<span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN819"></a><span class='Label'>decl_notnull</span>    <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span>K_NOT K_NULL 
                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; } 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN825"></a><span class='Label'>decl_defval</span>     <span class='Operator'>: </span><span class='String'>';'</span> 
                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN833"><span class='Ref_to_Label'>decl_defkey</span></a> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN74"><span class='Ref_to_Proto'>read_sql_expression</span></a><span class='Parentheses'>(</span><span class='String'>';'</span><span class='Delimiter'>, </span><span class='String'>";"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN833"></a><span class='Label'>decl_defkey</span>     <span class='Operator'>: </span><a href="pl_gram.y.html#LN842"><span class='Ref_to_Label'>assign_operator</span></a> 
                <span class='Operator'>| </span>K_DEFAULT 
                <span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Ada-based PL/SQL uses := for assignment and variable defaults, while 
 * the SQL standard uses equals for these cases and for GET 
 * DIAGNOSTICS, so we support both.  FOR and OPEN only support :=. 
 */ 
</span><a name="LN842"></a><span class='Label'>assign_operator</span> <span class='Operator'>: </span><span class='String'>'='</span> 
                <span class='Operator'>| </span>COLON_EQUALS 
                <span class='Delimiter'>; 
</span> 
<a name="LN846"></a><span class='Label'>proc_sect</span>       <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN846"><span class='Ref_to_Label'>proc_sect</span></a> <a href="pl_gram.y.html#LN858">proc_stmt</a> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* don't bother linking null statements into list */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$2 <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                            $$ <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            $$ <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span>$1<span class='Delimiter'>, </span>$2<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN858"></a><span class='Label'>proc_stmt</span>       <span class='Operator'>: </span><a href="pl_gram.y.html#LN402"><span class='Ref_to_Label'>pl_block</span></a> <span class='String'>';'</span> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN915"><span class='Ref_to_Label'>stmt_assign</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1121"><span class='Ref_to_Label'>stmt_if</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1164"><span class='Ref_to_Label'>stmt_case</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1225"><span class='Ref_to_Label'>stmt_loop</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1242"><span class='Ref_to_Label'>stmt_while</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1260"><span class='Ref_to_Label'>stmt_for</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1610"><span class='Ref_to_Label'>stmt_foreach_a</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1662"><span class='Ref_to_Label'>stmt_exit</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1724"><span class='Ref_to_Label'>stmt_return</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1750"><span class='Ref_to_Label'>stmt_raise</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1894"><span class='Ref_to_Label'>stmt_assert</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1935"><span class='Ref_to_Label'>stmt_execsql</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1965"><span class='Ref_to_Label'>stmt_dynexecute</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN902"><span class='Ref_to_Label'>stmt_perform</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN929"><span class='Ref_to_Label'>stmt_getdiag</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2029"><span class='Ref_to_Label'>stmt_open</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2106"><span class='Ref_to_Label'>stmt_fetch</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2138"><span class='Ref_to_Label'>stmt_move</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2156"><span class='Ref_to_Label'>stmt_close</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2169"><span class='Ref_to_Label'>stmt_null</span></a> 
                        <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$1<span class='Delimiter'>; } 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN902"></a><span class='Label'>stmt_perform</span>    <span class='Operator'>: </span>K_PERFORM <span class='Declare_Var'>expr_until_semi</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN428"><span class='Ref_to_Struct'>PLpgSQL_stmt_perform</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN428"><span class='Ref_to_Struct'>PLpgSQL_stmt_perform</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN107"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_PERFORM</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno   <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>expr  <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN915"></a><span class='Label'>stmt_assign</span>     <span class='Operator'>: </span><a href="pl_gram.y.html#LN1099"><span class='Ref_to_Label'>assign_var</span></a> <a href="pl_gram.y.html#LN842">assign_operator</a> <span class='Declare_Var'>expr_until_semi</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN417"><span class='Ref_to_Struct'>PLpgSQL_stmt_assign</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN417"><span class='Ref_to_Struct'>PLpgSQL_stmt_assign</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN85"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_ASSIGN</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno   <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>varno <span class='Operator'>= </span>$1<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>expr  <span class='Operator'>= </span>$3<span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN929"></a><span class='Label'>stmt_getdiag</span>    <span class='Operator'>: </span>K_GET <a href="pl_gram.y.html#LN991"><span class='Ref_to_Label'>getdiag_area_opt</span></a> K_DIAGNOSTICS <a href="pl_gram.y.html#LN1005"><span class='Ref_to_Label'>getdiag_list</span></a> <span class='String'>';'</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN447"><span class='Ref_to_Struct'>PLpgSQL_stmt_getdiag</span></a>     <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a>        <span class='Operator'>*</span>lc<span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN447"><span class='Ref_to_Struct'>PLpgSQL_stmt_getdiag</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN103"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_GETDIAG</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno   <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>is_stacked <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>diag_items <span class='Operator'>= </span>$4<span class='Delimiter'>; 
</span> 
                        <span class='Comment_Multi_Line'>/* 
                         * Check information items are valid for area option. 
                         */ 
</span>                        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span>lc<span class='Delimiter'>, </span><span class='Control'>new</span><span class='Operator'>-&GT;</span>diag_items<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="plpgsql.h.html#LN438"><span class='Ref_to_Struct'>PLpgSQL_diag_item</span></a> <span class='Operator'>*</span>ditem <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN438"><span class='Ref_to_Struct'>PLpgSQL_diag_item</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span>lc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <span class='Control'>switch</span> <span class='Parentheses'>(</span>ditem<span class='Operator'>-&GT;</span>kind<span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Comment_Multi_Line'>/* these fields are disallowed in stacked case */ 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN126"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_ROW_COUNT</span></a><span class='Operator'>: 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN127"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_RESULT_OID</span></a><span class='Operator'>: 
</span>                                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>is_stacked<span class='Parentheses'>) 
</span>                                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                 <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"diagnostics item %s is not allowed in GET STACKED DIAGNOSTICS"</span><span class='Delimiter'>, 
</span>                                                        <a href="pl_funcs.c.html#LN294"><span class='Ref_to_Func'>plpgsql_getdiag_kindname</span></a><span class='Parentheses'>(</span>ditem<span class='Operator'>-&GT;</span>kind<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                                 <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                                <span class='Comment_Multi_Line'>/* these fields are disallowed in current case */ 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN129"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_ERROR_CONTEXT</span></a><span class='Operator'>: 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN130"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_ERROR_DETAIL</span></a><span class='Operator'>: 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN131"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_ERROR_HINT</span></a><span class='Operator'>: 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN132"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_RETURNED_SQLSTATE</span></a><span class='Operator'>: 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN133"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_COLUMN_NAME</span></a><span class='Operator'>: 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN134"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_CONSTRAINT_NAME</span></a><span class='Operator'>: 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN135"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_DATATYPE_NAME</span></a><span class='Operator'>: 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN136"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_MESSAGE_TEXT</span></a><span class='Operator'>: 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN137"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_TABLE_NAME</span></a><span class='Operator'>: 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN138"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_SCHEMA_NAME</span></a><span class='Operator'>: 
</span>                                    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>is_stacked<span class='Parentheses'>) 
</span>                                        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                 <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"diagnostics item %s is not allowed in GET CURRENT DIAGNOSTICS"</span><span class='Delimiter'>, 
</span>                                                        <a href="pl_funcs.c.html#LN294"><span class='Ref_to_Func'>plpgsql_getdiag_kindname</span></a><span class='Parentheses'>(</span>ditem<span class='Operator'>-&GT;</span>kind<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                                 <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                                <span class='Comment_Multi_Line'>/* these fields are allowed in either case */ 
</span>                                <span class='Control'>case</span> <a href="plpgsql.h.html#LN128"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_CONTEXT</span></a><span class='Operator'>: 
</span>                                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                                <span class='Control'>default</span><span class='Operator'>: 
</span>                                    <a href="../../../backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized diagnostic item kind: %d"</span><span class='Delimiter'>, 
</span>                                         ditem<span class='Operator'>-&GT;</span>kind<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                        <span class='Delimiter'>} 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN991"></a><span class='Label'>getdiag_area_opt</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>K_CURRENT 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>K_STACKED 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1005"></a><span class='Label'>getdiag_list</span> <span class='Operator'>: </span><a href="pl_gram.y.html#LN1005"><span class='Ref_to_Label'>getdiag_list</span></a> <span class='String'>','</span> <a href="pl_gram.y.html#LN1015"><span class='Ref_to_Label'>getdiag_list_item</span></a> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span>$1<span class='Delimiter'>, </span>$3<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1015"><span class='Ref_to_Label'>getdiag_list_item</span></a> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1015"></a><span class='Label'>getdiag_list_item</span> <span class='Operator'>: </span><a href="pl_gram.y.html#LN1075"><span class='Ref_to_Label'>getdiag_target</span></a> <a href="pl_gram.y.html#LN842">assign_operator</a> <span class='Declare_Var'>getdiag_item</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN438"><span class='Ref_to_Struct'>PLpgSQL_diag_item</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN438"><span class='Ref_to_Struct'>PLpgSQL_diag_item</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>target <span class='Operator'>= </span>$1<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>kind <span class='Operator'>= </span>$3<span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1027"></a><span class='Label'>getdiag_item</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Keyword'>int </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                           K_ROW_COUNT<span class='Delimiter'>, </span><span class='String'>"row_count"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN126"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_ROW_COUNT</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_RESULT_OID<span class='Delimiter'>, </span><span class='String'>"result_oid"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN127"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_RESULT_OID</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_PG_CONTEXT<span class='Delimiter'>, </span><span class='String'>"pg_context"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN128"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_CONTEXT</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_PG_EXCEPTION_DETAIL<span class='Delimiter'>, </span><span class='String'>"pg_exception_detail"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN130"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_ERROR_DETAIL</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_PG_EXCEPTION_HINT<span class='Delimiter'>, </span><span class='String'>"pg_exception_hint"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN131"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_ERROR_HINT</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_PG_EXCEPTION_CONTEXT<span class='Delimiter'>, </span><span class='String'>"pg_exception_context"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN129"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_ERROR_CONTEXT</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_COLUMN_NAME<span class='Delimiter'>, </span><span class='String'>"column_name"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN133"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_COLUMN_NAME</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_CONSTRAINT_NAME<span class='Delimiter'>, </span><span class='String'>"constraint_name"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN134"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_CONSTRAINT_NAME</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_PG_DATATYPE_NAME<span class='Delimiter'>, </span><span class='String'>"pg_datatype_name"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN135"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_DATATYPE_NAME</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_MESSAGE_TEXT<span class='Delimiter'>, </span><span class='String'>"message_text"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN136"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_MESSAGE_TEXT</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_TABLE_NAME<span class='Delimiter'>, </span><span class='String'>"table_name"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN137"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_TABLE_NAME</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_SCHEMA_NAME<span class='Delimiter'>, </span><span class='String'>"schema_name"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN138"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_SCHEMA_NAME</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_RETURNED_SQLSTATE<span class='Delimiter'>, </span><span class='String'>"returned_sqlstate"</span><span class='Parentheses'>))</span> 
                            $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN132"><span class='Ref_to_EnumConst'>PLPGSQL_GETDIAG_RETURNED_SQLSTATE</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"unrecognized GET DIAGNOSTICS item"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1075"></a><span class='Label'>getdiag_target</span>  <span class='Operator'>: </span><a href="pl_gram.y.html#LN1099"><span class='Ref_to_Label'>assign_var</span></a> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN61"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ROW</span></a> <span class='Operator'>|| 
</span>                            $1<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN62"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_REC</span></a><span class='Parentheses'>) 
</span><a name="LN1079"></a>                            <span class='Declare_Prototype'>ereport</span><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"%s\" is not a scalar variable"</span><span class='Delimiter'>, 
</span>                                            <span class='Parentheses'>((</span><a href="plpgsql.h.html#LN207"><span class='Ref_to_Struct'>PLpgSQL_variable</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>$1<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>refname<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>T_WORD 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* just to give a better message than "syntax error" */ 
</span><a name="LN1089"></a>                        <span class='Declare_Prototype'>word_is_not_variable</span><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>T_CWORD 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* just to give a better message than "syntax error" */ 
</span>                        <a href="pl_gram.y.html#LN62"><span class='Ref_to_Proto'>cword_is_not_variable</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
 
<a name="LN1099"></a><span class='Label'>assign_var</span>      <span class='Operator'>: </span>T_DATUM 
                    <span class='Delimiter'>{ 
</span><a name="LN1101"></a>                        <span class='Declare_Prototype'>check_assignable</span><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>datum<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span>$1<span class='Operator'>.</span>datum<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1099"><span class='Ref_to_Label'>assign_var</span></a> <span class='String'>'['</span> <a href="pl_gram.y.html#LN2330"><span class='Ref_to_Label'>expr_until_rightbracket</span></a> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN326"><span class='Ref_to_Struct'>PLpgSQL_arrayelem</span></a>   <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN326"><span class='Ref_to_Struct'>PLpgSQL_arrayelem</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>dtype      <span class='Operator'>= </span><a href="plpgsql.h.html#LN64"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ARRAYELEM</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>subscript  <span class='Operator'>= </span>$3<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>arrayparentno <span class='Operator'>= </span>$1<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* initialize cached type data to "not valid" */ 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>parenttypoid <span class='Operator'>= </span><a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Delimiter'>; 
</span> 
                        <a href="plpgsql.h.html#LN1079"><span class='Ref_to_Proto'>plpgsql_adddatum</span></a><span class='Parentheses'>((</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1121"></a><span class='Label'>stmt_if</span>         <span class='Operator'>: </span>K_IF <a href="pl_gram.y.html#LN2334"><span class='Ref_to_Label'>expr_until_then</span></a> <a href="pl_gram.y.html#LN846">proc_sect</a> <a href="pl_gram.y.html#LN1137">stmt_elsifs</a> <a href="pl_gram.y.html#LN1154">stmt_else</a> K_END K_IF <span class='String'>';'</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN458"><span class='Ref_to_Struct'>PLpgSQL_stmt_if</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN458"><span class='Ref_to_Struct'>PLpgSQL_stmt_if</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type   <span class='Operator'>= </span><a href="plpgsql.h.html#LN86"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_IF</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno     <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cond       <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>then_body  <span class='Operator'>= </span>$3<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>elsif_list <span class='Operator'>= </span>$4<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>else_body  <span class='Operator'>= </span>$5<span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1137"></a><span class='Label'>stmt_elsifs</span>     <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1137"><span class='Ref_to_Label'>stmt_elsifs</span></a> K_ELSIF <a href="pl_gram.y.html#LN2334"><span class='Ref_to_Label'>expr_until_then</span></a> <a href="pl_gram.y.html#LN846">proc_sect</a> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN471"><span class='Ref_to_Struct'>PLpgSQL_if_elsif</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN471"><span class='Ref_to_Struct'>PLpgSQL_if_elsif</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cond   <span class='Operator'>= </span>$3<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>stmts  <span class='Operator'>= </span>$4<span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span>$1<span class='Delimiter'>, </span><span class='Control'>new</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1154"></a><span class='Label'>stmt_else</span>       <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>K_ELSE <a href="pl_gram.y.html#LN846"><span class='Ref_to_Label'>proc_sect</span></a> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1164"></a><span class='Label'>stmt_case</span>       <span class='Operator'>: </span>K_CASE <a href="pl_gram.y.html#LN1170"><span class='Ref_to_Label'>opt_expr_until_when</span></a> <a href="pl_gram.y.html#LN1185">case_when_list</a> <a href="pl_gram.y.html#LN1206">opt_case_else</a> K_END K_CASE <span class='String'>';'</span> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN88"><span class='Ref_to_Proto'>make_case</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Delimiter'>, </span>$2<span class='Delimiter'>, </span>$3<span class='Delimiter'>, </span>$4<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1170"></a><span class='Label'>opt_expr_until_when</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>*</span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                        <span class='Keyword'>int </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>!= </span>K_WHEN<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN74"><span class='Ref_to_Proto'>read_sql_expression</span></a><span class='Parentheses'>(</span>K_WHEN<span class='Delimiter'>, </span><span class='String'>"WHEN"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span>K_WHEN<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1185"></a><span class='Label'>case_when_list</span>  <span class='Operator'>: </span><a href="pl_gram.y.html#LN1185"><span class='Ref_to_Label'>case_when_list</span></a> <span class='Declare_Var'>case_when</span> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span>$1<span class='Delimiter'>, </span>$2<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN1185"><span class='Ref_to_Global_Var'>case_when</span></a> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1195"></a><span class='Label'>case_when</span>       <span class='Operator'>: </span>K_WHEN <a href="pl_gram.y.html#LN2334"><span class='Ref_to_Label'>expr_until_then</span></a> <span class='Declare_Var'>proc_sect</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN495"><span class='Ref_to_Struct'>PLpgSQL_case_when</span></a> <span class='Operator'>*</span><span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN495"><span class='Ref_to_Struct'>PLpgSQL_case_when</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>expr   <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>stmts  <span class='Operator'>= </span>$3<span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1206"></a><span class='Label'>opt_case_else</span>   <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>K_ELSE <a href="pl_gram.y.html#LN846"><span class='Ref_to_Label'>proc_sect</span></a> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * proc_sect could return an empty list, but we 
                         * must distinguish that from not having ELSE at all. 
                         * Simplest fix is to return a list with one NULL 
                         * pointer, which make_case() must take care of. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$2 <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>) 
</span>                            $$ <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            $$ <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1225"></a><span class='Label'>stmt_loop</span>       <span class='Operator'>: </span><a href="pl_gram.y.html#LN2354"><span class='Ref_to_Label'>opt_loop_label</span></a> K_LOOP <span class='Declare_Var'>loop_body</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN505"><span class='Ref_to_Struct'>PLpgSQL_stmt_loop</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN505"><span class='Ref_to_Struct'>PLpgSQL_stmt_loop</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN88"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_LOOP</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno   <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>label    <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>body     <span class='Operator'>= </span>$3<span class='Operator'>.</span>stmts<span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN104"><span class='Ref_to_Proto'>check_labels</span></a><span class='Parentheses'>(</span>$1<span class='Delimiter'>, </span>$3<span class='Operator'>.</span>end_label<span class='Delimiter'>, </span>$3<span class='Operator'>.</span>end_label_location<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="pl_funcs.c.html#LN67"><span class='Ref_to_Func'>plpgsql_ns_pop</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1242"></a><span class='Label'>stmt_while</span>      <span class='Operator'>: </span><a href="pl_gram.y.html#LN2354"><span class='Ref_to_Label'>opt_loop_label</span></a> K_WHILE <a href="pl_gram.y.html#LN2338"><span class='Ref_to_Label'>expr_until_loop</span></a> <span class='Declare_Var'>loop_body</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN516"><span class='Ref_to_Struct'>PLpgSQL_stmt_while</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN516"><span class='Ref_to_Struct'>PLpgSQL_stmt_while</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN89"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_WHILE</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno   <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>label    <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cond     <span class='Operator'>= </span>$3<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>body     <span class='Operator'>= </span>$4<span class='Operator'>.</span>stmts<span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN104"><span class='Ref_to_Proto'>check_labels</span></a><span class='Parentheses'>(</span>$1<span class='Delimiter'>, </span>$4<span class='Operator'>.</span>end_label<span class='Delimiter'>, </span>$4<span class='Operator'>.</span>end_label_location<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="pl_funcs.c.html#LN67"><span class='Ref_to_Func'>plpgsql_ns_pop</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1260"></a><span class='Label'>stmt_for</span>        <span class='Operator'>: </span><a href="pl_gram.y.html#LN2354"><span class='Ref_to_Label'>opt_loop_label</span></a> K_FOR <a href="pl_gram.y.html#LN1294"><span class='Ref_to_Label'>for_control</span></a> <span class='Declare_Var'>loop_body</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* This runs after we've scanned the loop body */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$3<span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>== </span><a href="plpgsql.h.html#LN90"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_FORI</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <a href="plpgsql.h.html#LN528"><span class='Ref_to_Struct'>PLpgSQL_stmt_fori</span></a>       <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                            <span class='Control'>new</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN528"><span class='Ref_to_Struct'>PLpgSQL_stmt_fori</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>$3<span class='Delimiter'>; 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno   <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>label    <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>body     <span class='Operator'>= </span>$4<span class='Operator'>.</span>stmts<span class='Delimiter'>; 
</span>                            $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="plpgsql.h.html#LN546"><span class='Ref_to_Struct'>PLpgSQL_stmt_forq</span></a>       <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                            <span class='Debug'>Assert</span><span class='Parentheses'>(</span>$3<span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>== </span><a href="plpgsql.h.html#LN91"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_FORS</span></a> <span class='Operator'>|| 
</span>                                   $3<span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>== </span><a href="plpgsql.h.html#LN92"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_FORC</span></a> <span class='Operator'>|| 
</span>                                   $3<span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>== </span><a href="plpgsql.h.html#LN102"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_DYNFORS</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Comment_Multi_Line'>/* forq is the common supertype of all three */ 
</span>                            <span class='Control'>new</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN546"><span class='Ref_to_Struct'>PLpgSQL_stmt_forq</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>$3<span class='Delimiter'>; 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno   <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>label    <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>body     <span class='Operator'>= </span>$4<span class='Operator'>.</span>stmts<span class='Delimiter'>; 
</span>                            $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                        <a href="pl_gram.y.html#LN104"><span class='Ref_to_Proto'>check_labels</span></a><span class='Parentheses'>(</span>$1<span class='Delimiter'>, </span>$4<span class='Operator'>.</span>end_label<span class='Delimiter'>, </span>$4<span class='Operator'>.</span>end_label_location<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* close namespace started in opt_loop_label */ 
</span>                        <a href="pl_funcs.c.html#LN67"><span class='Ref_to_Func'>plpgsql_ns_pop</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1294"></a><span class='Label'>for_control</span>     <span class='Operator'>: </span><a href="pl_gram.y.html#LN1556"><span class='Ref_to_Label'>for_variable</span></a> <span class='Declare_Var'>K_IN</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Keyword'>int</span>         <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                        <span class='Keyword'>int</span>         tokloc <span class='Operator'>= </span>yylloc<span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span>K_EXECUTE<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Comment_Multi_Line'>/* EXECUTE means it's a dynamic FOR loop */ 
</span>                            <a href="plpgsql.h.html#LN590"><span class='Ref_to_Struct'>PLpgSQL_stmt_dynfors</span></a>    <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                            <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>            <span class='Operator'>*</span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Delimiter'>; 
</span>                            <span class='Keyword'>int</span>                     term<span class='Delimiter'>; 
</span> 
                            <a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span>K_LOOP<span class='Delimiter'>, </span>K_USING<span class='Delimiter'>, 
</span>                                                        <span class='String'>"LOOP or USING"</span><span class='Delimiter'>, 
</span>                                                        <span class='Operator'>&</span>term<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN590"><span class='Ref_to_Struct'>PLpgSQL_stmt_dynfors</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN102"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_DYNFORS</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>rec<span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>rec <span class='Operator'>= </span>$1<span class='Operator'>.</span>rec<span class='Delimiter'>; 
</span>                                <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>((</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Operator'>-&GT;</span>rec<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>row<span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>row <span class='Operator'>= </span>$1<span class='Operator'>.</span>row<span class='Delimiter'>; 
</span>                                <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>((</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Operator'>-&GT;</span>row<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>scalar<span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Comment_Multi_Line'>/* convert single scalar to list */ 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>row <span class='Operator'>= </span><a href="pl_gram.y.html#LN97"><span class='Ref_to_Proto'>make_scalar_list1</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>name<span class='Delimiter'>, </span>$1<span class='Operator'>.</span>scalar<span class='Delimiter'>, 
</span>                                                             $1<span class='Operator'>.</span>lineno<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Comment_Multi_Line'>/* no need for check_assignable */ 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> 
                            <span class='Delimiter'>{ 
</span>                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"loop variable of loop over rows must be a record or row variable or list of scalar variables"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>query <span class='Operator'>= </span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Delimiter'>; 
</span> 
                            <span class='Control'>if</span> <span class='Parentheses'>(</span>term <span class='Operator'>== </span>K_USING<span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>do</span> 
                                <span class='Delimiter'>{ 
</span>                                    <a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span><span class='String'>','</span><span class='Delimiter'>, </span>K_LOOP<span class='Delimiter'>, 
</span>                                                                <span class='String'>", or LOOP"</span><span class='Delimiter'>, 
</span>                                                                <span class='Operator'>&</span>term<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>new</span><span class='Operator'>-&GT;</span>params <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>params<span class='Delimiter'>, </span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span>term <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span> 
                            $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span>T_DATUM <span class='Operator'>&& 
</span>                                 yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN60"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_VAR</span></a> <span class='Operator'>&& 
</span>                                 <span class='Parentheses'>((</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>datatype<span class='Operator'>-&GT;</span>typoid <span class='Operator'>== </span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN59"><span class='Ref_to_Const'>REFCURSOROID</span></a><span class='Parentheses'>)</span> 
                        <span class='Delimiter'>{ 
</span>                            <span class='Comment_Multi_Line'>/* It's FOR var IN cursor */ 
</span>                            <a href="plpgsql.h.html#LN574"><span class='Ref_to_Struct'>PLpgSQL_stmt_forc</span></a>   <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                            <a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a>         <span class='Operator'>*</span><a href="../../../interfaces/ecpg/preproc/type.h.html#LN124"><span class='Ref_to_Struct'>cursor</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Delimiter'>; 
</span> 
                            <span class='Control'>new</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN574"><span class='Ref_to_Struct'>PLpgSQL_stmt_forc</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN574"><span class='Ref_to_Struct'>PLpgSQL_stmt_forc</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN92"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_FORC</span></a><span class='Delimiter'>; 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>curvar <span class='Operator'>= </span><a href="../../../interfaces/ecpg/preproc/type.h.html#LN124"><span class='Ref_to_Struct'>cursor</span></a><span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span> 
                            <span class='Comment_Multi_Line'>/* Should have had a single variable name */ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>scalar <span class='Operator'>&& </span>$1<span class='Operator'>.</span>row<span class='Parentheses'>) 
</span>                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cursor FOR loop must have only one target variable"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
                            <span class='Comment_Multi_Line'>/* can't use an unbound cursor this way */ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/preproc/type.h.html#LN124"><span class='Ref_to_Struct'>cursor</span></a><span class='Operator'>-&GT;</span>cursor_explicit_expr <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cursor FOR loop must use a bound cursor variable"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>tokloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
                            <span class='Comment_Multi_Line'>/* collect cursor's parameters if any */ 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>argquery <span class='Operator'>= </span><a href="pl_gram.y.html#LN107"><span class='Ref_to_Proto'>read_cursor_args</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/preproc/type.h.html#LN124"><span class='Ref_to_Struct'>cursor</span></a><span class='Delimiter'>, 
</span>                                                             K_LOOP<span class='Delimiter'>, 
</span>                                                             <span class='String'>"LOOP"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <span class='Comment_Multi_Line'>/* create loop's private RECORD variable */ 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>rec <span class='Operator'>= </span><a href="plpgsql.h.html#LN1074"><span class='Ref_to_Proto'>plpgsql_build_record</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>name<span class='Delimiter'>, 
</span>                                                            $1<span class='Operator'>.</span>lineno<span class='Delimiter'>, 
</span>                                                            <span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>    <span class='Operator'>*</span>expr1<span class='Delimiter'>; 
</span>                            <span class='Keyword'>int</span>             expr1loc<span class='Delimiter'>; 
</span>                            <span class='Keyword'>bool</span>            reverse <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                            <span class='Comment_Multi_Line'>/* 
                             * We have to distinguish between two 
                             * alternatives: FOR var IN a .. b and FOR 
                             * var IN query. Unfortunately this is 
                             * tricky, since the query in the second 
                             * form needn't start with a SELECT 
                             * keyword.  We use the ugly hack of 
                             * looking for two periods after the first 
                             * token. We also check for the REVERSE 
                             * keyword, which means it must be an 
                             * integer loop. 
                             */ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                               K_REVERSE<span class='Delimiter'>, </span><span class='String'>"reverse"</span><span class='Parentheses'>))</span> 
                                reverse <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                                <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <span class='Comment_Multi_Line'>/* 
                             * Read tokens until we see either a ".." 
                             * or a LOOP. The text we read may not 
                             * necessarily be a well-formed SQL 
                             * statement, so we need to invoke 
                             * read_sql_construct directly. 
                             */ 
</span>                            expr1 <span class='Operator'>= </span><a href="pl_gram.y.html#LN64"><span class='Ref_to_Proto'>read_sql_construct</span></a><span class='Parentheses'>(</span>DOT_DOT<span class='Delimiter'>, 
</span>                                                       K_LOOP<span class='Delimiter'>, 
</span>                                                       <span class='Number'>0</span><span class='Delimiter'>, 
</span>                                                       <span class='String'>"LOOP"</span><span class='Delimiter'>, 
</span>                                                       <span class='String'>"SELECT "</span><span class='Delimiter'>, 
</span>                                                       <span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                                       <span class='Boolean'>false</span><span class='Delimiter'>, 
</span>                                                       <span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                                       <span class='Operator'>&</span>expr1loc<span class='Delimiter'>, 
</span>                                                       <span class='Operator'>&</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span>DOT_DOT<span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Comment_Multi_Line'>/* Saw "..", so it must be an integer loop */ 
</span>                                <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>        <span class='Operator'>*</span>expr2<span class='Delimiter'>; 
</span>                                <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>        <span class='Operator'>*</span>expr_by<span class='Delimiter'>; 
</span>                                <a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a>         <span class='Operator'>*</span>fvar<span class='Delimiter'>; 
</span>                                <a href="plpgsql.h.html#LN528"><span class='Ref_to_Struct'>PLpgSQL_stmt_fori</span></a>   <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                                <span class='Comment_Multi_Line'>/* Check first expression is well-formed */ 
</span>                                <a href="pl_gram.y.html#LN100"><span class='Ref_to_Proto'>check_sql_expr</span></a><span class='Parentheses'>(</span>expr1<span class='Operator'>-&GT;</span>query<span class='Delimiter'>, </span>expr1loc<span class='Delimiter'>, </span><span class='Number'>7</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                                <span class='Comment_Multi_Line'>/* Read and check the second one */ 
</span>                                expr2 <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span>K_LOOP<span class='Delimiter'>, </span>K_BY<span class='Delimiter'>, 
</span>                                                             <span class='String'>"LOOP"</span><span class='Delimiter'>, 
</span>                                                             <span class='Operator'>&</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                                <span class='Comment_Multi_Line'>/* Get the BY clause if any */ 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span>K_BY<span class='Parentheses'>) 
</span>                                    expr_by <span class='Operator'>= </span><a href="pl_gram.y.html#LN74"><span class='Ref_to_Proto'>read_sql_expression</span></a><span class='Parentheses'>(</span>K_LOOP<span class='Delimiter'>, 
</span>                                                                  <span class='String'>"LOOP"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Control'>else</span> 
                                    expr_by <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
                                <span class='Comment_Multi_Line'>/* Should have had a single variable name */ 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>scalar <span class='Operator'>&& </span>$1<span class='Operator'>.</span>row<span class='Parentheses'>) 
</span>                                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                             <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"integer FOR loop must have only one target variable"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                             <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
                                <span class='Comment_Multi_Line'>/* create loop's private variable */ 
</span>                                fvar <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>                                    <a href="plpgsql.h.html#LN1071"><span class='Ref_to_Proto'>plpgsql_build_variable</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>name<span class='Delimiter'>, 
</span>                                                           $1<span class='Operator'>.</span>lineno<span class='Delimiter'>, 
</span>                                                           <a href="plpgsql.h.html#LN1069"><span class='Ref_to_Proto'>plpgsql_build_datatype</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN24"><span class='Ref_to_Const'>INT4OID</span></a><span class='Delimiter'>, 
</span>                                                                                  <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                                                                  <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                           <span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                                <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN528"><span class='Ref_to_Struct'>PLpgSQL_stmt_fori</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN90"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_FORI</span></a><span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>var      <span class='Operator'>= </span>fvar<span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>reverse  <span class='Operator'>= </span>reverse<span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>lower    <span class='Operator'>= </span>expr1<span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>upper    <span class='Operator'>= </span>expr2<span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>step     <span class='Operator'>= </span>expr_by<span class='Delimiter'>; 
</span> 
                                $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> 
                            <span class='Delimiter'>{ 
</span>                                <span class='Comment_Multi_Line'>/* 
                                 * No "..", so it must be a query loop. We've 
                                 * prefixed an extra SELECT to the query text, 
                                 * so we need to remove that before performing 
                                 * syntax checking. 
                                 */ 
</span>                                <span class='Keyword'>char</span>                <span class='Operator'>*</span>tmp_query<span class='Delimiter'>; 
</span>                                <a href="plpgsql.h.html#LN559"><span class='Ref_to_Struct'>PLpgSQL_stmt_fors</span></a>   <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                                <span class='Control'>if</span> <span class='Parentheses'>(</span>reverse<span class='Parentheses'>) 
</span>                                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                             <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot specify REVERSE in query FOR loop"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                             <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>tokloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
                                <span class='Debug'>Assert</span><span class='Parentheses'>(</span>strncmp<span class='Parentheses'>(</span>expr1<span class='Operator'>-&GT;</span>query<span class='Delimiter'>, </span><span class='String'>"SELECT "</span><span class='Delimiter'>, </span><span class='Number'>7</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                tmp_query <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span>expr1<span class='Operator'>-&GT;</span>query <span class='Operator'>+ </span><span class='Number'>7</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span>expr1<span class='Operator'>-&GT;</span>query<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                expr1<span class='Operator'>-&GT;</span>query <span class='Operator'>= </span>tmp_query<span class='Delimiter'>; 
</span> 
                                <a href="pl_gram.y.html#LN100"><span class='Ref_to_Proto'>check_sql_expr</span></a><span class='Parentheses'>(</span>expr1<span class='Operator'>-&GT;</span>query<span class='Delimiter'>, </span>expr1loc<span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                                <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN559"><span class='Ref_to_Struct'>PLpgSQL_stmt_fors</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN91"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_FORS</span></a><span class='Delimiter'>; 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>rec<span class='Parentheses'>) 
</span>                                <span class='Delimiter'>{ 
</span>                                    <span class='Control'>new</span><span class='Operator'>-&GT;</span>rec <span class='Operator'>= </span>$1<span class='Operator'>.</span>rec<span class='Delimiter'>; 
</span>                                    <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>((</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Operator'>-&GT;</span>rec<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Delimiter'>} 
</span>                                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>row<span class='Parentheses'>) 
</span>                                <span class='Delimiter'>{ 
</span>                                    <span class='Control'>new</span><span class='Operator'>-&GT;</span>row <span class='Operator'>= </span>$1<span class='Operator'>.</span>row<span class='Delimiter'>; 
</span>                                    <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>((</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Operator'>-&GT;</span>row<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Delimiter'>} 
</span>                                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>scalar<span class='Parentheses'>) 
</span>                                <span class='Delimiter'>{ 
</span>                                    <span class='Comment_Multi_Line'>/* convert single scalar to list */ 
</span>                                    <span class='Control'>new</span><span class='Operator'>-&GT;</span>row <span class='Operator'>= </span><a href="pl_gram.y.html#LN97"><span class='Ref_to_Proto'>make_scalar_list1</span></a><span class='Parentheses'>(</span>$1<span class='Operator'>.</span>name<span class='Delimiter'>, </span>$1<span class='Operator'>.</span>scalar<span class='Delimiter'>, 
</span>                                                                 $1<span class='Operator'>.</span>lineno<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                    <span class='Comment_Multi_Line'>/* no need for check_assignable */ 
</span>                                <span class='Delimiter'>} 
</span>                                <span class='Control'>else</span> 
                                <span class='Delimiter'>{ 
</span>                                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                             <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"loop variable of loop over rows must be a record or row variable or list of scalar variables"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                             <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                                <span class='Delimiter'>} 
</span> 
                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>query <span class='Operator'>= </span>expr1<span class='Delimiter'>; 
</span>                                $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Processing the for_variable is tricky because we don't yet know if the 
 * FOR is an integer FOR loop or a loop over query results.  In the former 
 * case, the variable is just a name that we must instantiate as a loop 
 * local variable, regardless of any other definition it might have. 
 * Therefore, we always save the actual identifier into $$.name where it 
 * can be used for that case.  We also save the outer-variable definition, 
 * if any, because that's what we need for the loop-over-query case.  Note 
 * that we must NOT apply check_assignable() or any other semantic check 
 * until we know what's what. 
 * 
 * However, if we see a comma-separated list of names, we know that it 
 * can't be an integer FOR loop and so it's OK to check the variables 
 * immediately.  In particular, for T_WORD followed by comma, we should 
 * complain that the name is not known rather than say it's a syntax error. 
 * Note that the non-error result of this case sets *both* $$.scalar and 
 * $$.row; see the for_control production. 
 */ 
</span><a name="LN1556"></a><span class='Label'>for_variable</span>    <span class='Operator'>: </span>T_DATUM 
                    <span class='Delimiter'>{ 
</span>                        $$<span class='Operator'>.</span>name <span class='Operator'>= </span><a href="pl_gram.y.html#LN90"><span class='Ref_to_Proto'>NameOfDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>$1<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN61"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ROW</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            $$<span class='Operator'>.</span>scalar <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                            $$<span class='Operator'>.</span>rec <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                            $$<span class='Operator'>.</span>row <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>$1<span class='Operator'>.</span>datum<span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN62"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_REC</span></a><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            $$<span class='Operator'>.</span>scalar <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                            $$<span class='Operator'>.</span>rec <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN299"><span class='Ref_to_Struct'>PLpgSQL_rec</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>$1<span class='Operator'>.</span>datum<span class='Delimiter'>; 
</span>                            $$<span class='Operator'>.</span>row <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> 
                        <span class='Delimiter'>{ 
</span><a name="LN1574"></a>                            <span class='Keyword'>int</span>         <span class='Declare_Local'>tok</span><span class='Delimiter'>; 
</span> 
                            $$<span class='Operator'>.</span>scalar <span class='Operator'>= </span>$1<span class='Operator'>.</span>datum<span class='Delimiter'>; 
</span>                            $$<span class='Operator'>.</span>rec <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                            $$<span class='Operator'>.</span>row <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                            <span class='Comment_Multi_Line'>/* check for comma-separated list */ 
</span>                            <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                            <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>) 
</span>                                $$<span class='Operator'>.</span>row <span class='Operator'>= </span><a href="pl_gram.y.html#LN94"><span class='Ref_to_Proto'>read_into_scalar_list</span></a><span class='Parentheses'>(</span>$$<span class='Operator'>.</span>name<span class='Delimiter'>, 
</span>                                                               $$<span class='Operator'>.</span>scalar<span class='Delimiter'>, 
</span>                                                               <span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>T_WORD 
                    <span class='Delimiter'>{ 
</span><a name="LN1590"></a>                        <span class='Keyword'>int</span>         <span class='Declare_Var'>tok</span><span class='Delimiter'>; 
</span> 
                        $$<span class='Operator'>.</span>name <span class='Operator'>= </span>$1<span class='Operator'>.</span>ident<span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>scalar <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>rec <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>row <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                        <span class='Comment_Multi_Line'>/* check for comma-separated list */ 
</span>                        <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN1599"></a>                        <span class='Declare_Prototype'>plpgsql_push_back_token</span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>) 
</span><a name="LN1601"></a>                            <span class='Declare_Prototype'>word_is_not_variable</span><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>T_CWORD 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* just to give a better message than "syntax error" */ 
</span>                        <a href="pl_gram.y.html#LN62"><span class='Ref_to_Proto'>cword_is_not_variable</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1610"></a><span class='Label'>stmt_foreach_a</span>  <span class='Operator'>: </span><a href="pl_gram.y.html#LN2354"><span class='Ref_to_Label'>opt_loop_label</span></a> K_FOREACH <a href="pl_gram.y.html#LN1556"><span class='Ref_to_Label'>for_variable</span></a> <a href="pl_gram.y.html#LN1652">foreach_slice</a> <a href="pl_gram.y.html#LN1294"><span class='Ref_to_Global_Var'>K_IN</span></a> K_ARRAY <a href="pl_gram.y.html#LN2338"><span class='Ref_to_Label'>expr_until_loop</span></a> <span class='Declare_Var'>loop_body</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN606"><span class='Ref_to_Struct'>PLpgSQL_stmt_foreach_a</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN606"><span class='Ref_to_Struct'>PLpgSQL_stmt_foreach_a</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN93"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_FOREACH_A</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>2</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>label <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>slice <span class='Operator'>= </span>$4<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>expr <span class='Operator'>= </span>$7<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>body <span class='Operator'>= </span>$8<span class='Operator'>.</span>stmts<span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$3<span class='Operator'>.</span>rec<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>varno <span class='Operator'>= </span>$3<span class='Operator'>.</span>rec<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                            <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>((</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>$3<span class='Operator'>.</span>rec<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>$3<span class='Operator'>.</span>row<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>varno <span class='Operator'>= </span>$3<span class='Operator'>.</span>row<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                            <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>((</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>$3<span class='Operator'>.</span>row<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>$3<span class='Operator'>.</span>scalar<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>varno <span class='Operator'>= </span>$3<span class='Operator'>.</span>scalar<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                            <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>(</span>$3<span class='Operator'>.</span>scalar<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>3</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"loop variable of FOREACH must be a known variable or list of variables"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                             <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>3</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                        <a href="pl_gram.y.html#LN104"><span class='Ref_to_Proto'>check_labels</span></a><span class='Parentheses'>(</span>$1<span class='Delimiter'>, </span>$8<span class='Operator'>.</span>end_label<span class='Delimiter'>, </span>$8<span class='Operator'>.</span>end_label_location<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="pl_funcs.c.html#LN67"><span class='Ref_to_Func'>plpgsql_ns_pop</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1652"></a><span class='Label'>foreach_slice</span>   <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>K_SLICE ICONST 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1662"></a><span class='Label'>stmt_exit</span>       <span class='Operator'>: </span><a href="pl_gram.y.html#LN1714"><span class='Ref_to_Label'>exit_type</span></a> <a href="pl_gram.y.html#LN402"><span class='Ref_to_Global_Var'>opt_label</span></a> <span class='Declare_Var'>opt_exitcond</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN663"><span class='Ref_to_Struct'>PLpgSQL_stmt_exit</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN663"><span class='Ref_to_Struct'>PLpgSQL_stmt_exit</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN94"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_EXIT</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>is_exit  <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno   <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>label    <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cond     <span class='Operator'>= </span>$3<span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$2<span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Comment_Multi_Line'>/* We have a label, so verify it exists */ 
</span>                            <a href="plpgsql.h.html#LN348"><span class='Ref_to_Struct'>PLpgSQL_nsitem</span></a> <span class='Operator'>*</span><a href="../../../bin/pg_basebackup/pg_basebackup.c.html#LN80"><span class='Ref_to_Global_Var'>label</span></a><span class='Delimiter'>; 
</span> 
                            <a href="../../../bin/pg_basebackup/pg_basebackup.c.html#LN80"><span class='Ref_to_Global_Var'>label</span></a> <span class='Operator'>= </span><a href="pl_funcs.c.html#LN195"><span class='Ref_to_Func'>plpgsql_ns_lookup_label</span></a><span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>, </span>$2<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../bin/pg_basebackup/pg_basebackup.c.html#LN80"><span class='Ref_to_Global_Var'>label</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"there is no label \"%s\" "</span> 
                                                <span class='String'>"attached to any block or loop enclosing this statement"</span><span class='Delimiter'>, 
</span>                                                $2<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>2</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                            <span class='Comment_Multi_Line'>/* CONTINUE only allows loop labels */ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../bin/pg_basebackup/pg_basebackup.c.html#LN80"><span class='Ref_to_Global_Var'>label</span></a><span class='Operator'>-&GT;</span>itemno <span class='Operator'>!= </span><a href="plpgsql.h.html#LN51"><span class='Ref_to_EnumConst'>PLPGSQL_LABEL_LOOP</span></a> <span class='Operator'>&& !</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>is_exit<span class='Parentheses'>) 
</span>                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"block label \"%s\" cannot be used in CONTINUE"</span><span class='Delimiter'>, 
</span>                                                $2<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>2</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> 
                        <span class='Delimiter'>{ 
</span>                            <span class='Comment_Multi_Line'>/* 
                             * No label, so make sure there is some loop (an 
                             * unlabelled EXIT does not match a block, so this 
                             * is the same test for both EXIT and CONTINUE) 
                             */ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN214"><span class='Ref_to_Func'>plpgsql_ns_find_nearest_loop</span></a><span class='Parentheses'>(</span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>())</span> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
                                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <span class='Control'>new</span><span class='Operator'>-&GT;</span>is_exit <span class='Operator'>? 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"EXIT cannot be used outside a loop, unless it has a label"</span><span class='Parentheses'>) </span><span class='Operator'>: 
</span>                                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"CONTINUE cannot be used outside a loop"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1714"></a><span class='Label'>exit_type</span>       <span class='Operator'>: </span>K_EXIT 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>K_CONTINUE 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1724"></a><span class='Label'>stmt_return</span>     <span class='Operator'>: </span>K_RETURN 
                    <span class='Delimiter'>{ 
</span>                        <span class='Keyword'>int </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"unexpected end of function definition"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                           K_NEXT<span class='Delimiter'>, </span><span class='String'>"next"</span><span class='Parentheses'>))</span> 
                        <span class='Delimiter'>{ 
</span>                            $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN86"><span class='Ref_to_Proto'>make_return_next_stmt</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                K_QUERY<span class='Delimiter'>, </span><span class='String'>"query"</span><span class='Parentheses'>))</span> 
                        <span class='Delimiter'>{ 
</span>                            $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN87"><span class='Ref_to_Proto'>make_return_query_stmt</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN85"><span class='Ref_to_Proto'>make_return_stmt</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1750"></a><span class='Label'>stmt_raise</span>      <span class='Operator'>: </span>K_RAISE 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN709"><span class='Ref_to_Struct'>PLpgSQL_stmt_raise</span></a>      <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                        <span class='Keyword'>int </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN709"><span class='Ref_to_Struct'>PLpgSQL_stmt_raise</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type   <span class='Operator'>= </span><a href="plpgsql.h.html#LN98"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_RAISE</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno     <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>elog_level <span class='Operator'>= </span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>;</span>    <span class='Comment_Single_Line'>/* default */ 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>condname   <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>message    <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>params     <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>options    <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"unexpected end of function definition"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Comment_Multi_Line'>/* 
                         * We could have just RAISE, meaning to re-throw 
                         * the current error. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>!= </span><span class='String'>';'</span><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Comment_Multi_Line'>/* 
                             * First is an optional elog severity level. 
                             */ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                               K_EXCEPTION<span class='Delimiter'>, </span><span class='String'>"exception"</span><span class='Parentheses'>))</span> 
                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>elog_level <span class='Operator'>= </span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>; 
</span>                                <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                    K_WARNING<span class='Delimiter'>, </span><span class='String'>"warning"</span><span class='Parentheses'>))</span> 
                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>elog_level <span class='Operator'>= </span><a href="../../../include/utils/elog.h.html#LN39"><span class='Ref_to_Const'>WARNING</span></a><span class='Delimiter'>; 
</span>                                <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                    K_NOTICE<span class='Delimiter'>, </span><span class='String'>"notice"</span><span class='Parentheses'>))</span> 
                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>elog_level <span class='Operator'>= </span><a href="../../../include/utils/elog.h.html#LN36"><span class='Ref_to_Const'>NOTICE</span></a><span class='Delimiter'>; 
</span>                                <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                    K_INFO<span class='Delimiter'>, </span><span class='String'>"info"</span><span class='Parentheses'>))</span> 
                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>elog_level <span class='Operator'>= </span><a href="../../../include/utils/elog.h.html#LN32"><span class='Ref_to_Const'>INFO</span></a><span class='Delimiter'>; 
</span>                                <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                    K_LOG<span class='Delimiter'>, </span><span class='String'>"log"</span><span class='Parentheses'>))</span> 
                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>elog_level <span class='Operator'>= </span><a href="../../../include/utils/elog.h.html#LN25"><span class='Ref_to_Const'>LOG</span></a><span class='Delimiter'>; 
</span>                                <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                    K_DEBUG<span class='Delimiter'>, </span><span class='String'>"debug"</span><span class='Parentheses'>))</span> 
                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>elog_level <span class='Operator'>= </span><a href="../../../include/utils/elog.h.html#LN24"><span class='Ref_to_Const'>DEBUG1</span></a><span class='Delimiter'>; 
</span>                                <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                                <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"unexpected end of function definition"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <span class='Comment_Multi_Line'>/* 
                             * Next we can have a condition name, or 
                             * equivalently SQLSTATE 'xxxxx', or a string 
                             * literal that is the old-style message format, 
                             * or USING to start the option list immediately. 
                             */ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><a href="../../../backend/replication/repl_gram.y.html#LN174"><span class='Ref_to_Global_Var'>SCONST</span></a><span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Comment_Multi_Line'>/* old style message and parameters */ 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>message <span class='Operator'>= </span>yylval<span class='Operator'>.</span>str<span class='Delimiter'>; 
</span>                                <span class='Comment_Multi_Line'>/* 
                                 * We expect either a semi-colon, which 
                                 * indicates no parameters, or a comma that 
                                 * begins the list of parameter expressions, 
                                 * or USING to begin the options list. 
                                 */ 
</span>                                <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>!= </span><span class='String'>','</span> <span class='Operator'>&& </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>!= </span><span class='String'>';'</span> <span class='Operator'>&& </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>!= </span>K_USING<span class='Parentheses'>) 
</span>                                    <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                                <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>) 
</span>                                <span class='Delimiter'>{ 
</span>                                    <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>*</span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Delimiter'>; 
</span> 
                                    <a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN64"><span class='Ref_to_Proto'>read_sql_construct</span></a><span class='Parentheses'>(</span><span class='String'>','</span><span class='Delimiter'>, </span><span class='String'>';'</span><span class='Delimiter'>, </span>K_USING<span class='Delimiter'>, 
</span>                                                              <span class='String'>", or ; or USING"</span><span class='Delimiter'>, 
</span>                                                              <span class='String'>"SELECT "</span><span class='Delimiter'>, 
</span>                                                              <span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                                              <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>new</span><span class='Operator'>-&GT;</span>params <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>params<span class='Delimiter'>, </span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Delimiter'>} 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>!= </span>K_USING<span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Comment_Multi_Line'>/* must be condition name or SQLSTATE */ 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                   K_SQLSTATE<span class='Delimiter'>, </span><span class='String'>"sqlstate"</span><span class='Parentheses'>))</span> 
                                <span class='Delimiter'>{ 
</span>                                    <span class='Comment_Multi_Line'>/* next token should be a string literal */ 
</span>                                    <span class='Keyword'>char</span>   <span class='Operator'>*</span>sqlstatestr<span class='Delimiter'>; 
</span> 
                                    <span class='Control'>if</span> <span class='Parentheses'>(</span>yylex<span class='Parentheses'>() </span><span class='Operator'>!= </span><a href="../../../backend/replication/repl_gram.y.html#LN174"><span class='Ref_to_Global_Var'>SCONST</span></a><span class='Parentheses'>)</span> 
                                        <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                    sqlstatestr <span class='Operator'>= </span>yylval<span class='Operator'>.</span>str<span class='Delimiter'>; 
</span> 
                                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span>sqlstatestr<span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>5</span><span class='Parentheses'>)</span> 
                                        <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"invalid SQLSTATE code"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>if</span> <span class='Parentheses'>(</span>strspn<span class='Parentheses'>(</span>sqlstatestr<span class='Delimiter'>, </span><span class='String'>"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>5</span><span class='Parentheses'>)</span> 
                                        <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"invalid SQLSTATE code"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>new</span><span class='Operator'>-&GT;</span>condname <span class='Operator'>= </span>sqlstatestr<span class='Delimiter'>; 
</span>                                <span class='Delimiter'>} 
</span>                                <span class='Control'>else</span> 
                                <span class='Delimiter'>{ 
</span>                                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span>T_WORD<span class='Parentheses'>) 
</span>                                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>condname <span class='Operator'>= </span>yylval<span class='Operator'>.</span>word<span class='Operator'>.</span>ident<span class='Delimiter'>; 
</span>                                    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN501"><span class='Ref_to_Func'>plpgsql_token_is_unreserved_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>))</span> 
                                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>condname <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>keyword<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>else</span> 
                                        <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                    <a href="plpgsql.h.html#LN1076"><span class='Ref_to_Proto'>plpgsql_recognize_err_condition</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>condname<span class='Delimiter'>, 
</span>                                                                    <span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Delimiter'>} 
</span>                                <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>!= </span><span class='String'>';'</span> <span class='Operator'>&& </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>!= </span>K_USING<span class='Parentheses'>) 
</span>                                    <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span> 
                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span>K_USING<span class='Parentheses'>) 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>options <span class='Operator'>= </span><a href="pl_gram.y.html#LN109"><span class='Ref_to_Proto'>read_raise_options</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                        <a href="pl_gram.y.html#LN110"><span class='Ref_to_Proto'>check_raise_parameters</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1894"></a><span class='Label'>stmt_assert</span>     <span class='Operator'>: </span>K_ASSERT 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN732"><span class='Ref_to_Struct'>PLpgSQL_stmt_assert</span></a>     <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                        <span class='Keyword'>int </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN732"><span class='Ref_to_Struct'>PLpgSQL_stmt_assert</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type   <span class='Operator'>= </span><a href="plpgsql.h.html#LN99"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_ASSERT</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno     <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cond <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span><span class='String'>','</span><span class='Delimiter'>, </span><span class='String'>';'</span><span class='Delimiter'>, 
</span>                                                         <span class='String'>", or ;"</span><span class='Delimiter'>, 
</span>                                                         <span class='Operator'>&</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>) 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>message <span class='Operator'>= </span><a href="pl_gram.y.html#LN74"><span class='Ref_to_Proto'>read_sql_expression</span></a><span class='Parentheses'>(</span><span class='String'>';'</span><span class='Delimiter'>, </span><span class='String'>";"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>message <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1917"></a><span class='Label'>loop_body</span>       <span class='Operator'>: </span><a href="pl_gram.y.html#LN846"><span class='Ref_to_Label'>proc_sect</span></a> K_END K_LOOP <a href="pl_gram.y.html#LN402"><span class='Ref_to_Global_Var'>opt_label</span></a> <span class='String'>';'</span> 
                    <span class='Delimiter'>{ 
</span>                        $$<span class='Operator'>.</span>stmts <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>end_label <span class='Operator'>= </span>$4<span class='Delimiter'>; 
</span>                        $$<span class='Operator'>.</span>end_label_location <span class='Operator'>= @</span><span class='Number'>4</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * T_WORD+T_CWORD match any initial identifier that is not a known plpgsql 
 * variable.  (The composite case is probably a syntax error, but we'll let 
 * the core parser decide that.)  Normally, we should assume that such a 
 * word is a SQL statement keyword that isn't also a plpgsql keyword. 
 * However, if the next token is assignment or '[', it can't be a valid 
 * SQL statement, and what we're probably looking at is an intended variable 
 * assignment.  Give an appropriate complaint for that, instead of letting 
 * the core parser throw an unhelpful "syntax error". 
 */ 
</span><a name="LN1935"></a><span class='Label'>stmt_execsql</span>    <span class='Operator'>: </span>K_IMPORT 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN81"><span class='Ref_to_Proto'>make_execsql_stmt</span></a><span class='Parentheses'>(</span>K_IMPORT<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>K_INSERT 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN81"><span class='Ref_to_Proto'>make_execsql_stmt</span></a><span class='Parentheses'>(</span>K_INSERT<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>T_WORD 
                    <span class='Delimiter'>{ 
</span><a name="LN1945"></a>                        <span class='Keyword'>int</span>         <span class='Declare_Var'>tok</span><span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span><a name="LN1948"></a>                        <span class='Declare_Prototype'>plpgsql_push_back_token</span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><span class='String'>'='</span> <span class='Operator'>|| </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span>COLON_EQUALS <span class='Operator'>|| </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><span class='String'>'['</span><span class='Parentheses'>) 
</span><a name="LN1950"></a>                            <span class='Declare_Prototype'>word_is_not_variable</span><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN81"><span class='Ref_to_Proto'>make_execsql_stmt</span></a><span class='Parentheses'>(</span>T_WORD<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>T_CWORD 
                    <span class='Delimiter'>{ 
</span>                        <span class='Keyword'>int</span>         <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                        <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><span class='String'>'='</span> <span class='Operator'>|| </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span>COLON_EQUALS <span class='Operator'>|| </span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span><span class='String'>'['</span><span class='Parentheses'>) 
</span>                            <a href="pl_gram.y.html#LN62"><span class='Ref_to_Proto'>cword_is_not_variable</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN81"><span class='Ref_to_Proto'>make_execsql_stmt</span></a><span class='Parentheses'>(</span>T_CWORD<span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN1965"></a><span class='Label'>stmt_dynexecute</span> <span class='Operator'>: </span>K_EXECUTE 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN759"><span class='Ref_to_Struct'>PLpgSQL_stmt_dynexecute</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                        <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>*</span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Delimiter'>; 
</span>                        <span class='Keyword'>int </span>endtoken<span class='Delimiter'>; 
</span> 
                        <a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN64"><span class='Ref_to_Proto'>read_sql_construct</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2106"><span class='Ref_to_Global_Var'>K_INTO</span></a><span class='Delimiter'>, </span>K_USING<span class='Delimiter'>, </span><span class='String'>';'</span><span class='Delimiter'>, 
</span>                                                  <span class='String'>"INTO or USING or ;"</span><span class='Delimiter'>, 
</span>                                                  <span class='String'>"SELECT "</span><span class='Delimiter'>, 
</span>                                                  <span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                                  <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span>endtoken<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN759"><span class='Ref_to_Struct'>PLpgSQL_stmt_dynexecute</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN101"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_DYNEXECUTE</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>query <span class='Operator'>= </span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>into <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>strict <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>rec <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>row <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>params <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
                        <span class='Comment_Multi_Line'>/* 
                         * We loop to allow the INTO and USING clauses to 
                         * appear in either order, since people easily get 
                         * that wrong.  This coding also prevents "INTO foo" 
                         * from getting absorbed into a USING expression, 
                         * which is *really* confusing. 
                         */ 
</span>                        <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span>endtoken <span class='Operator'>== </span><a href="pl_gram.y.html#LN2106"><span class='Ref_to_Global_Var'>K_INTO</span></a><span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>into<span class='Parentheses'>)</span>          <span class='Comment_Single_Line'>/* multiple INTO */ 
</span>                                    <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>into <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                                <a href="pl_gram.y.html#LN92"><span class='Ref_to_Proto'>read_into_target</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>rec<span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>row<span class='Delimiter'>, </span><span class='Operator'>&</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>strict<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                endtoken <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>endtoken <span class='Operator'>== </span>K_USING<span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>params<span class='Parentheses'>)</span>        <span class='Comment_Single_Line'>/* multiple USING */ 
</span>                                    <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Control'>do</span> 
                                <span class='Delimiter'>{ 
</span>                                    <a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN64"><span class='Ref_to_Proto'>read_sql_construct</span></a><span class='Parentheses'>(</span><span class='String'>','</span><span class='Delimiter'>, </span><span class='String'>';'</span><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2106"><span class='Ref_to_Global_Var'>K_INTO</span></a><span class='Delimiter'>, 
</span>                                                              <span class='String'>", or ; or INTO"</span><span class='Delimiter'>, 
</span>                                                              <span class='String'>"SELECT "</span><span class='Delimiter'>, 
</span>                                                              <span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                                              <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span>endtoken<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                    <span class='Control'>new</span><span class='Operator'>-&GT;</span>params <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>params<span class='Delimiter'>, </span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span>endtoken <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>endtoken <span class='Operator'>== </span><span class='String'>';'</span><span class='Parentheses'>) 
</span>                                <span class='Control'>break</span><span class='Delimiter'>; 
</span>                            <span class='Control'>else</span> 
                                <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
 
<a name="LN2029"></a><span class='Label'>stmt_open</span>       <span class='Operator'>: </span>K_OPEN <span class='Declare_Var'>cursor_variable</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN620"><span class='Ref_to_Struct'>PLpgSQL_stmt_open</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                        <span class='Keyword'>int</span>               <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN620"><span class='Ref_to_Struct'>PLpgSQL_stmt_open</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN104"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_OPEN</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>curvar <span class='Operator'>= </span>$2<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cursor_options <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2607"><span class='Ref_to_Const'>CURSOR_OPT_FAST_PLAN</span></a><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$2<span class='Operator'>-&GT;</span>cursor_explicit_expr <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>                        <span class='Delimiter'>{ 
</span>                            <span class='Comment_Multi_Line'>/* be nice if we could use opt_scrollable here */ 
</span>                            <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                               K_NO<span class='Delimiter'>, </span><span class='String'>"no"</span><span class='Parentheses'>))</span> 
                            <span class='Delimiter'>{ 
</span>                                <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                   K_SCROLL<span class='Delimiter'>, </span><span class='String'>"scroll"</span><span class='Parentheses'>))</span> 
                                <span class='Delimiter'>{ 
</span>                                    <span class='Control'>new</span><span class='Operator'>-&GT;</span>cursor_options <span class='Operator'>|= </span><a href="../../../include/nodes/parsenodes.h.html#LN2603"><span class='Ref_to_Const'>CURSOR_OPT_NO_SCROLL</span></a><span class='Delimiter'>; 
</span>                                    <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                                <span class='Delimiter'>} 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                                    K_SCROLL<span class='Delimiter'>, </span><span class='String'>"scroll"</span><span class='Parentheses'>))</span> 
                            <span class='Delimiter'>{ 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>cursor_options <span class='Operator'>|= </span><a href="../../../include/nodes/parsenodes.h.html#LN2602"><span class='Ref_to_Const'>CURSOR_OPT_SCROLL</span></a><span class='Delimiter'>; 
</span>                                <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span> 
                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>!= </span>K_FOR<span class='Parentheses'>) 
</span>                                <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error, expected \"FOR\""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                            <a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a> <span class='Operator'>== </span>K_EXECUTE<span class='Parentheses'>) 
</span>                            <span class='Delimiter'>{ 
</span>                                <span class='Keyword'>int</span>     endtoken<span class='Delimiter'>; 
</span> 
                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>dynquery <span class='Operator'>= 
</span>                                    <a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span>K_USING<span class='Delimiter'>, </span><span class='String'>';'</span><span class='Delimiter'>, 
</span>                                                         <span class='String'>"USING or ;"</span><span class='Delimiter'>, 
</span>                                                         <span class='Operator'>&</span>endtoken<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                                <span class='Comment_Multi_Line'>/* If we found "USING", collect argument(s) */ 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span>endtoken <span class='Operator'>== </span>K_USING<span class='Parentheses'>) 
</span>                                <span class='Delimiter'>{ 
</span>                                    <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>*</span><a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Delimiter'>; 
</span> 
                                    <span class='Control'>do</span> 
                                    <span class='Delimiter'>{ 
</span>                                        <a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span><span class='String'>','</span><span class='Delimiter'>, </span><span class='String'>';'</span><span class='Delimiter'>, 
</span>                                                                    <span class='String'>", or ;"</span><span class='Delimiter'>, 
</span>                                                                    <span class='Operator'>&</span>endtoken<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>params <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span>params<span class='Delimiter'>, 
</span>                                                              <a href="../../../bin/pgbench/exprparse.y.html#LN43"><span class='Ref_to_Global_Var'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                    <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span>endtoken <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Delimiter'>} 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> 
                            <span class='Delimiter'>{ 
</span>                                <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN1590"><span class='Ref_to_Global_Var'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>query <span class='Operator'>= </span><a href="pl_gram.y.html#LN79"><span class='Ref_to_Proto'>read_sql_stmt</span></a><span class='Parentheses'>(</span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                        <span class='Delimiter'>} 
</span>                        <span class='Control'>else</span> 
                        <span class='Delimiter'>{ 
</span>                            <span class='Comment_Multi_Line'>/* predefined cursor query, so read args */ 
</span>                            <span class='Control'>new</span><span class='Operator'>-&GT;</span>argquery <span class='Operator'>= </span><a href="pl_gram.y.html#LN107"><span class='Ref_to_Proto'>read_cursor_args</span></a><span class='Parentheses'>(</span>$2<span class='Delimiter'>, </span><span class='String'>';'</span><span class='Delimiter'>, </span><span class='String'>";"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2106"></a><span class='Label'>stmt_fetch</span>      <span class='Operator'>: </span>K_FETCH <a href="pl_gram.y.html#LN2150"><span class='Ref_to_Label'>opt_fetch_direction</span></a> <a href="pl_gram.y.html#LN2029"><span class='Ref_to_Global_Var'>cursor_variable</span></a> <span class='Declare_Var'>K_INTO</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN636"><span class='Ref_to_Struct'>PLpgSQL_stmt_fetch</span></a> <span class='Operator'>*</span><a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a> <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                        <a href="plpgsql.h.html#LN299"><span class='Ref_to_Struct'>PLpgSQL_rec</span></a>    <span class='Operator'>*</span>rec<span class='Delimiter'>; 
</span>                        <a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a>    <span class='Operator'>*</span>row<span class='Delimiter'>; 
</span> 
                        <span class='Comment_Multi_Line'>/* We have already parsed everything through the INTO keyword */ 
</span>                        <a href="pl_gram.y.html#LN92"><span class='Ref_to_Proto'>read_into_target</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span>rec<span class='Delimiter'>, </span><span class='Operator'>&</span>row<span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(</span>yylex<span class='Parentheses'>() </span><span class='Operator'>!= </span><span class='String'>';'</span><span class='Parentheses'>)</span> 
                            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                        <span class='Comment_Multi_Line'>/* 
                         * We don't allow multiple rows in PL/pgSQL's FETCH 
                         * statement, only in MOVE. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN647"><span class='Ref_to_Member'>returns_multiple_rows</span></a><span class='Parentheses'>) 
</span>                            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_FEATURE_NOT_SUPPORTED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"FETCH statement cannot return multiple rows"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN639"><span class='Ref_to_Member'>lineno</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN640"><span class='Ref_to_Member'>rec</span></a>      <span class='Operator'>= </span>rec<span class='Delimiter'>; 
</span>                        <a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN641"><span class='Ref_to_Member'>row</span></a>      <span class='Operator'>= </span>row<span class='Delimiter'>; 
</span>                        <a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN642"><span class='Ref_to_Member'>curvar</span></a>   <span class='Operator'>= </span>$3<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                        <a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN646"><span class='Ref_to_Member'>is_move</span></a>  <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2138"></a><span class='Label'>stmt_move</span>       <span class='Operator'>: </span>K_MOVE <a href="pl_gram.y.html#LN2150"><span class='Ref_to_Label'>opt_fetch_direction</span></a> <a href="pl_gram.y.html#LN2029"><span class='Ref_to_Global_Var'>cursor_variable</span></a> <span class='String'>';'</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN636"><span class='Ref_to_Struct'>PLpgSQL_stmt_fetch</span></a> <span class='Operator'>*</span><a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a> <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN639"><span class='Ref_to_Member'>lineno</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN642"><span class='Ref_to_Member'>curvar</span></a>   <span class='Operator'>= </span>$3<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                        <a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN646"><span class='Ref_to_Member'>is_move</span></a>  <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><a href="pl_gram.y.html#LN166"><span class='Ref_to_Global_Var'>fetch</span></a><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2150"></a><span class='Label'>opt_fetch_direction</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN82"><span class='Ref_to_Proto'>read_fetch_direction</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2156"></a><span class='Label'>stmt_close</span>      <span class='Operator'>: </span>K_CLOSE <a href="pl_gram.y.html#LN2029"><span class='Ref_to_Global_Var'>cursor_variable</span></a> <span class='String'>';'</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN653"><span class='Ref_to_Struct'>PLpgSQL_stmt_close</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN653"><span class='Ref_to_Struct'>PLpgSQL_stmt_close</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>cmd_type <span class='Operator'>= </span><a href="plpgsql.h.html#LN106"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_CLOSE</span></a><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>curvar <span class='Operator'>= </span>$2<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2169"></a><span class='Label'>stmt_null</span>       <span class='Operator'>: </span>K_NULL <span class='String'>';'</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* We do not bother building a node for NULL */ 
</span>                        $$ <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2176"></a><span class='Label'>cursor_variable</span> <span class='Operator'>: </span>T_DATUM 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * In principle we should support a cursor_variable 
                         * that is an array element, but for now we don't, so 
                         * just throw an error if next token is '['. 
                         */ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>!= </span><a href="plpgsql.h.html#LN60"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_VAR</span></a> <span class='Operator'>|| 
</span>                            <a href="pl_scanner.c.html#LN534"><span class='Ref_to_Func'>plpgsql_peek</span></a><span class='Parentheses'>() </span><span class='Operator'>== </span><span class='String'>'['</span><span class='Parentheses'>)</span> 
<a name="LN2185"></a>                            <span class='Declare_Prototype'>ereport</span><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cursor variable must be a simple variable"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>$1<span class='Operator'>.</span>datum<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>datatype<span class='Operator'>-&GT;</span>typoid <span class='Operator'>!= </span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN59"><span class='Ref_to_Const'>REFCURSOROID</span></a><span class='Parentheses'>)</span> 
<a name="LN2191"></a>                            <span class='Declare_Prototype'>ereport</span><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"variable \"%s\" must be of type cursor or refcursor"</span><span class='Delimiter'>, 
</span>                                            <span class='Parentheses'>((</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>$1<span class='Operator'>.</span>datum<span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>refname<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>$1<span class='Operator'>.</span>datum<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>T_WORD 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* just to give a better message than "syntax error" */ 
</span><a name="LN2201"></a>                        <span class='Declare_Prototype'>word_is_not_variable</span><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>T_CWORD 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* just to give a better message than "syntax error" */ 
</span>                        <a href="pl_gram.y.html#LN62"><span class='Ref_to_Proto'>cword_is_not_variable</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2210"></a><span class='Label'>exception_sect</span>  <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span>K_EXCEPTION 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* 
                         * We use a mid-rule action to add these 
                         * special variables to the namespace before 
                         * parsing the WHEN clauses themselves.  The 
                         * scope of the names extends to the end of the 
                         * current block. 
                         */ 
</span><a name="LN2221"></a>                        <span class='Keyword'>int</span>         <span class='Declare_Var'>lineno</span> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN2222"></a>                        <a href="plpgsql.h.html#LN383"><span class='Ref_to_Struct'>PLpgSQL_exception_block</span></a> <span class='Operator'>*</span><span class='Declare_Var'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN383"><span class='Ref_to_Struct'>PLpgSQL_exception_block</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span><a name="LN2223"></a>                        <a href="plpgsql.h.html#LN207"><span class='Ref_to_Struct'>PLpgSQL_variable</span></a> <span class='Operator'>*</span><span class='Declare_Var'>var</span><span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1071"><span class='Ref_to_Proto'>plpgsql_build_variable</span></a><span class='Parentheses'>(</span><span class='String'>"sqlstate"</span><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2221"><span class='Ref_to_Global_Var'>lineno</span></a><span class='Delimiter'>, 
</span>                                                     <a href="plpgsql.h.html#LN1069"><span class='Ref_to_Proto'>plpgsql_build_datatype</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN26"><span class='Ref_to_Const'>TEXTOID</span></a><span class='Delimiter'>, 
</span>                                                                            <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                                                            <a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN824"><span class='Ref_to_Member'>fn_input_collation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                     <span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Parentheses'>((</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN261"><span class='Ref_to_Member'>isconst</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN385"><span class='Ref_to_Member'>sqlstate_varno</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN256"><span class='Ref_to_Member'>dno</span></a><span class='Delimiter'>; 
</span> 
                        <a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1071"><span class='Ref_to_Proto'>plpgsql_build_variable</span></a><span class='Parentheses'>(</span><span class='String'>"sqlerrm"</span><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2221"><span class='Ref_to_Global_Var'>lineno</span></a><span class='Delimiter'>, 
</span>                                                     <a href="plpgsql.h.html#LN1069"><span class='Ref_to_Proto'>plpgsql_build_datatype</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN26"><span class='Ref_to_Const'>TEXTOID</span></a><span class='Delimiter'>, 
</span>                                                                            <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                                                            <a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN824"><span class='Ref_to_Member'>fn_input_collation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                                     <span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Parentheses'>((</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN261"><span class='Ref_to_Member'>isconst</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN386"><span class='Ref_to_Member'>sqlerrm_varno</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN158"><span class='Ref_to_Global_Var'>var</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN256"><span class='Ref_to_Member'>dno</span></a><span class='Delimiter'>; 
</span> 
<a name="LN2241"></a>                        <a href="../../../interfaces/ecpg/preproc/pgc.l.html#LN176"><span class='Ref_to_Func'>$</span></a><span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN163"><span class='Ref_to_Global_Var'>exception_block</span></a><span class='Operator'>&GT;</span><span class='Declare_Var'>$</span> <span class='Operator'>= </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <a href="pl_gram.y.html#LN2252"><span class='Ref_to_Label'>proc_exceptions</span></a> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN383"><span class='Ref_to_Struct'>PLpgSQL_exception_block</span></a> <span class='Operator'>*</span><span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/preproc/pgc.l.html#LN176"><span class='Ref_to_Func'>$</span></a><span class='Operator'>&LT;</span><a href="pl_gram.y.html#LN163"><span class='Ref_to_Global_Var'>exception_block</span></a><span class='Operator'>&GT;</span><span class='Number'>2</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN387"><span class='Ref_to_Member'>exc_list</span></a> <span class='Operator'>= </span>$3<span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2252"></a><span class='Label'>proc_exceptions</span> <span class='Operator'>: </span><a href="pl_gram.y.html#LN2252"><span class='Ref_to_Label'>proc_exceptions</span></a> <span class='Declare_Var'>proc_exception</span> 
                        <span class='Delimiter'>{ 
</span>                            $$ <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span>$1<span class='Delimiter'>, </span>$2<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2252"><span class='Ref_to_Global_Var'>proc_exception</span></a> 
                        <span class='Delimiter'>{ 
</span>                            $$ <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN138"><span class='Ref_to_Macro'>list_make1</span></a><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2262"></a><span class='Label'>proc_exception</span>  <span class='Operator'>: </span>K_WHEN <a href="pl_gram.y.html#LN2275"><span class='Ref_to_Label'>proc_conditions</span></a> K_THEN <span class='Declare_Var'>proc_sect</span> 
                    <span class='Delimiter'>{ 
</span>                        <a href="plpgsql.h.html#LN393"><span class='Ref_to_Struct'>PLpgSQL_exception</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span> 
                        <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN393"><span class='Ref_to_Struct'>PLpgSQL_exception</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>lineno <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><span class='Operator'>@</span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>conditions <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                        <span class='Control'>new</span><span class='Operator'>-&GT;</span>action <span class='Operator'>= </span>$4<span class='Delimiter'>; 
</span> 
                        $$ <span class='Operator'>= </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2275"></a><span class='Label'>proc_conditions</span> <span class='Operator'>: </span><a href="pl_gram.y.html#LN2275"><span class='Ref_to_Label'>proc_conditions</span></a> K_OR <span class='Declare_Var'>proc_condition</span> 
                        <span class='Delimiter'>{ 
</span>                            <a href="plpgsql.h.html#LN373"><span class='Ref_to_Struct'>PLpgSQL_condition</span></a>   <span class='Operator'>*</span><a href="../../../interfaces/ecpg/preproc/pgc.l.html#LN70"><span class='Ref_to_Global_Var'>old</span></a><span class='Delimiter'>; 
</span> 
                            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/preproc/pgc.l.html#LN70"><span class='Ref_to_Global_Var'>old</span></a> <span class='Operator'>= </span>$1<span class='Delimiter'>; </span><a href="../../../interfaces/ecpg/preproc/pgc.l.html#LN70"><span class='Ref_to_Global_Var'>old</span></a><span class='Operator'>-&GT;</span>next <span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; </span><a href="../../../interfaces/ecpg/preproc/pgc.l.html#LN70"><span class='Ref_to_Global_Var'>old</span></a> <span class='Operator'>= </span><a href="../../../interfaces/ecpg/preproc/pgc.l.html#LN70"><span class='Ref_to_Global_Var'>old</span></a><span class='Operator'>-&GT;</span>next<span class='Parentheses'>) 
</span>                                <span class='Comment_Multi_Line'>/* skip */ </span><span class='Delimiter'>; 
</span>                            <a href="../../../interfaces/ecpg/preproc/pgc.l.html#LN70"><span class='Ref_to_Global_Var'>old</span></a><span class='Operator'>-&GT;</span>next <span class='Operator'>= </span>$3<span class='Delimiter'>; 
</span>                            $$ <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2275"><span class='Ref_to_Global_Var'>proc_condition</span></a> 
                        <span class='Delimiter'>{ 
</span>                            $$ <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                        <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2290"></a><span class='Label'>proc_condition</span>  <span class='Operator'>: </span><a href="pl_gram.y.html#LN2386"><span class='Ref_to_Label'>any_identifier</span></a> 
                        <span class='Delimiter'>{ 
</span>                            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span>$1<span class='Delimiter'>, </span><span class='String'>"sqlstate"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                            <span class='Delimiter'>{ 
</span>                                $$ <span class='Operator'>= </span><a href="plpgsql.h.html#LN1078"><span class='Ref_to_Proto'>plpgsql_parse_err_condition</span></a><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                            <span class='Control'>else</span> 
                            <span class='Delimiter'>{ 
</span>                                <a href="plpgsql.h.html#LN373"><span class='Ref_to_Struct'>PLpgSQL_condition</span></a> <span class='Operator'>*</span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                                <span class='Keyword'>char</span>   <span class='Operator'>*</span>sqlstatestr<span class='Delimiter'>; 
</span> 
                                <span class='Comment_Multi_Line'>/* next token should be a string literal */ 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span>yylex<span class='Parentheses'>() </span><span class='Operator'>!= </span><a href="../../../backend/replication/repl_gram.y.html#LN174"><span class='Ref_to_Global_Var'>SCONST</span></a><span class='Parentheses'>)</span> 
                                    <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                sqlstatestr <span class='Operator'>= </span>yylval<span class='Operator'>.</span>str<span class='Delimiter'>; 
</span> 
                                <span class='Control'>if</span> <span class='Parentheses'>(</span>strlen<span class='Parentheses'>(</span>sqlstatestr<span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>5</span><span class='Parentheses'>)</span> 
                                    <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"invalid SQLSTATE code"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Control'>if</span> <span class='Parentheses'>(</span>strspn<span class='Parentheses'>(</span>sqlstatestr<span class='Delimiter'>, </span><span class='String'>"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>5</span><span class='Parentheses'>)</span> 
                                    <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"invalid SQLSTATE code"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
                                <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN373"><span class='Ref_to_Struct'>PLpgSQL_condition</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>sqlerrstate <span class='Operator'>= 
</span>                                    <a href="../../../include/utils/elog.h.html#LN61"><span class='Ref_to_Macro'>MAKE_SQLSTATE</span></a><span class='Parentheses'>(</span>sqlstatestr<span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>], 
</span>                                                  sqlstatestr<span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>], 
</span>                                                  sqlstatestr<span class='Delimiter'>[</span><span class='Number'>2</span><span class='Delimiter'>], 
</span>                                                  sqlstatestr<span class='Delimiter'>[</span><span class='Number'>3</span><span class='Delimiter'>], 
</span>                                                  sqlstatestr<span class='Delimiter'>[</span><span class='Number'>4</span><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>condname <span class='Operator'>= </span>sqlstatestr<span class='Delimiter'>; 
</span>                                <span class='Control'>new</span><span class='Operator'>-&GT;</span>next <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span> 
                                $$ <span class='Operator'>= </span><span class='Control'>new</span><span class='Delimiter'>; 
</span>                            <span class='Delimiter'>} 
</span>                        <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2326"></a><span class='Label'>expr_until_semi</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN74"><span class='Ref_to_Proto'>read_sql_expression</span></a><span class='Parentheses'>(</span><span class='String'>';'</span><span class='Delimiter'>, </span><span class='String'>";"</span><span class='Parentheses'>)</span><span class='Delimiter'>; } 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2330"></a><span class='Label'>expr_until_rightbracket</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN74"><span class='Ref_to_Proto'>read_sql_expression</span></a><span class='Parentheses'>(</span><span class='String'>']'</span><span class='Delimiter'>, </span><span class='String'>"]"</span><span class='Parentheses'>)</span><span class='Delimiter'>; } 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2334"></a><span class='Label'>expr_until_then</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN74"><span class='Ref_to_Proto'>read_sql_expression</span></a><span class='Parentheses'>(</span>K_THEN<span class='Delimiter'>, </span><span class='String'>"THEN"</span><span class='Parentheses'>)</span><span class='Delimiter'>; } 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2338"></a><span class='Label'>expr_until_loop</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><a href="pl_gram.y.html#LN74"><span class='Ref_to_Proto'>read_sql_expression</span></a><span class='Parentheses'>(</span>K_LOOP<span class='Delimiter'>, </span><span class='String'>"LOOP"</span><span class='Parentheses'>)</span><span class='Delimiter'>; } 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2342"></a><span class='Label'>opt_block_label</span> <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span><a name="LN2344"></a>                        <span class='Declare_Prototype'>plpgsql_ns_push</span><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="plpgsql.h.html#LN50"><span class='Ref_to_EnumConst'>PLPGSQL_LABEL_BLOCK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>LESS_LESS <a href="pl_gram.y.html#LN2386"><span class='Ref_to_Label'>any_identifier</span></a> GREATER_GREATER 
                    <span class='Delimiter'>{ 
</span>                        <a href="pl_funcs.c.html#LN54"><span class='Ref_to_Func'>plpgsql_ns_push</span></a><span class='Parentheses'>(</span>$2<span class='Delimiter'>, </span><a href="plpgsql.h.html#LN50"><span class='Ref_to_EnumConst'>PLPGSQL_LABEL_BLOCK</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2354"></a><span class='Label'>opt_loop_label</span>  <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span><a name="LN2356"></a>                        <span class='Declare_Prototype'>plpgsql_ns_push</span><span class='Parentheses'>(</span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="plpgsql.h.html#LN51"><span class='Ref_to_EnumConst'>PLPGSQL_LABEL_LOOP</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>LESS_LESS <a href="pl_gram.y.html#LN2386"><span class='Ref_to_Label'>any_identifier</span></a> GREATER_GREATER 
                    <span class='Delimiter'>{ 
</span>                        <a href="pl_funcs.c.html#LN54"><span class='Ref_to_Func'>plpgsql_ns_push</span></a><span class='Parentheses'>(</span>$2<span class='Delimiter'>, </span><a href="plpgsql.h.html#LN51"><span class='Ref_to_EnumConst'>PLPGSQL_LABEL_LOOP</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span>$2<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2366"></a><span class='Label'>opt_label</span>   <span class='Operator'>: 
</span>                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2386"><span class='Ref_to_Label'>any_identifier</span></a> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* label validity will be checked by outer production */ 
</span>                        $$ <span class='Operator'>= </span>$1<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2377"></a><span class='Label'>opt_exitcond</span>    <span class='Operator'>: </span><span class='String'>';'</span> 
                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; } 
</span>                <span class='Operator'>| </span>K_WHEN <a href="pl_gram.y.html#LN902"><span class='Ref_to_Global_Var'>expr_until_semi</span></a> 
                    <span class='Delimiter'>{ </span>$$ <span class='Operator'>= </span>$2<span class='Delimiter'>; } 
</span>                <span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * need to allow DATUM because scanner will have tried to resolve as variable 
 */ 
</span><a name="LN2386"></a><span class='Label'>any_identifier</span>  <span class='Operator'>: </span>T_WORD 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span>$1<span class='Operator'>.</span>ident<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span><a href="pl_gram.y.html#LN2402"><span class='Ref_to_Label'>unreserved_keyword</span></a> 
                    <span class='Delimiter'>{ 
</span>                        $$ <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span>$1<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Operator'>| </span>T_DATUM 
                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span>$1<span class='Operator'>.</span>ident <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) </span><span class='Comment_Single_Line'>/* composite name not OK */ 
</span>                            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        $$ <span class='Operator'>= </span>$1<span class='Operator'>.</span>ident<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>; 
</span> 
<a name="LN2402"></a><span class='Label'>unreserved_keyword</span>  <span class='Operator'>: 
</span>                K_ABSOLUTE 
                <span class='Operator'>| </span>K_ALIAS 
                <span class='Operator'>| </span>K_ARRAY 
                <span class='Operator'>| </span>K_ASSERT 
                <span class='Operator'>| </span>K_BACKWARD 
                <span class='Operator'>| </span>K_CLOSE 
                <span class='Operator'>| </span>K_COLLATE 
                <span class='Operator'>| </span>K_COLUMN 
                <span class='Operator'>| </span>K_COLUMN_NAME 
                <span class='Operator'>| </span>K_CONSTANT 
                <span class='Operator'>| </span>K_CONSTRAINT 
                <span class='Operator'>| </span>K_CONSTRAINT_NAME 
                <span class='Operator'>| </span>K_CONTINUE 
                <span class='Operator'>| </span>K_CURRENT 
                <span class='Operator'>| </span>K_CURSOR 
                <span class='Operator'>| </span>K_DATATYPE 
                <span class='Operator'>| </span>K_DEBUG 
                <span class='Operator'>| </span>K_DEFAULT 
                <span class='Operator'>| </span>K_DETAIL 
                <span class='Operator'>| </span>K_DIAGNOSTICS 
                <span class='Operator'>| </span>K_DUMP 
                <span class='Operator'>| </span>K_ELSIF 
                <span class='Operator'>| </span>K_ERRCODE 
                <span class='Operator'>| </span>K_ERROR 
                <span class='Operator'>| </span>K_EXCEPTION 
                <span class='Operator'>| </span>K_EXIT 
                <span class='Operator'>| </span>K_FETCH 
                <span class='Operator'>| </span>K_FIRST 
                <span class='Operator'>| </span>K_FORWARD 
                <span class='Operator'>| </span>K_GET 
                <span class='Operator'>| </span>K_HINT 
                <span class='Operator'>| </span>K_IMPORT 
                <span class='Operator'>| </span>K_INFO 
                <span class='Operator'>| </span>K_INSERT 
                <span class='Operator'>| </span>K_IS 
                <span class='Operator'>| </span>K_LAST 
                <span class='Operator'>| </span>K_LOG 
                <span class='Operator'>| </span>K_MESSAGE 
                <span class='Operator'>| </span>K_MESSAGE_TEXT 
                <span class='Operator'>| </span>K_MOVE 
                <span class='Operator'>| </span>K_NEXT 
                <span class='Operator'>| </span>K_NO 
                <span class='Operator'>| </span>K_NOTICE 
                <span class='Operator'>| </span>K_OPEN 
                <span class='Operator'>| </span>K_OPTION 
                <span class='Operator'>| </span>K_PERFORM 
                <span class='Operator'>| </span>K_PG_CONTEXT 
                <span class='Operator'>| </span>K_PG_DATATYPE_NAME 
                <span class='Operator'>| </span>K_PG_EXCEPTION_CONTEXT 
                <span class='Operator'>| </span>K_PG_EXCEPTION_DETAIL 
                <span class='Operator'>| </span>K_PG_EXCEPTION_HINT 
                <span class='Operator'>| </span>K_PRINT_STRICT_PARAMS 
                <span class='Operator'>| </span>K_PRIOR 
                <span class='Operator'>| </span>K_QUERY 
                <span class='Operator'>| </span>K_RAISE 
                <span class='Operator'>| </span>K_RELATIVE 
                <span class='Operator'>| </span>K_RESULT_OID 
                <span class='Operator'>| </span>K_RETURN 
                <span class='Operator'>| </span>K_RETURNED_SQLSTATE 
                <span class='Operator'>| </span>K_REVERSE 
                <span class='Operator'>| </span>K_ROW_COUNT 
                <span class='Operator'>| </span>K_ROWTYPE 
                <span class='Operator'>| </span>K_SCHEMA 
                <span class='Operator'>| </span>K_SCHEMA_NAME 
                <span class='Operator'>| </span>K_SCROLL 
                <span class='Operator'>| </span>K_SLICE 
                <span class='Operator'>| </span>K_SQLSTATE 
                <span class='Operator'>| </span>K_STACKED 
                <span class='Operator'>| </span>K_TABLE 
                <span class='Operator'>| </span>K_TABLE_NAME 
                <span class='Operator'>| </span>K_TYPE 
                <span class='Operator'>| </span>K_USE_COLUMN 
                <span class='Operator'>| </span>K_USE_VARIABLE 
                <span class='Operator'>| </span>K_VARIABLE_CONFLICT 
                <span class='Operator'>| </span>K_WARNING 
                <span class='Delimiter'>; 
</span> 
<span class='Operator'>%% 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Check whether a token represents an "unreserved keyword". 
 * We have various places where we want to recognize a keyword in preference 
 * to a variable name, but not reserve that keyword in other contexts. 
 * Hence, this kluge. 
 */ 
</span><span class='Keyword'>static bool 
</span><a name="LN2489"></a><span class='Declare_Function'>tok_is_keyword</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>token</span><span class='Delimiter'>, </span><span class='Control'>union</span> <a href="../../../../contrib/cube/cubeparse.y.html#LN12"><span class='Ref_to_Const'>YYSTYPE</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>lval</span><span class='Delimiter'>, 
</span><a name="LN2490"></a>               <span class='Keyword'>int </span><span class='Declare_Parameter'>kw_token</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>kw_str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2489"><span class='Ref_to_Parameter'>token</span></a> <span class='Operator'>== </span><a href="pl_gram.y.html#LN2490"><span class='Ref_to_Parameter'>kw_token</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Normal case, was recognized by scanner (no conflicting variable) */ 
</span>        <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2489"><span class='Ref_to_Parameter'>token</span></a> <span class='Operator'>== </span>T_DATUM<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * It's a variable, so recheck the string name.  Note we will not 
         * match composite names (hence an unreserved word followed by "." 
         * will not be recognized). 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pl_gram.y.html#LN2489"><span class='Ref_to_Parameter'>lval</span></a><span class='Operator'>-&GT;</span>wdatum<span class='Operator'>.</span>quoted <span class='Operator'>&& </span><a href="pl_gram.y.html#LN2489"><span class='Ref_to_Parameter'>lval</span></a><span class='Operator'>-&GT;</span>wdatum<span class='Operator'>.</span>ident <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& 
</span>            strcmp<span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2489"><span class='Ref_to_Parameter'>lval</span></a><span class='Operator'>-&GT;</span>wdatum<span class='Operator'>.</span>ident<span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2490"><span class='Ref_to_Parameter'>kw_str</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>;</span>               <span class='Comment_Single_Line'>/* not the keyword */ 
</span><span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end tok_is_keyword &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convenience routine to complain when we expected T_DATUM and got T_WORD, 
 * ie, unrecognized variable. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2516"></a><span class='Declare_Function'>word_is_not_variable</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN986"><span class='Ref_to_Struct'>PLword</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>word</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"%s\" is not a known variable"</span><span class='Delimiter'>, 
</span>                    <a href="pl_gram.y.html#LN2516"><span class='Ref_to_Parameter'>word</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN988"><span class='Ref_to_Member'>ident</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2516"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* Same, for a CWORD */ 
</span><span class='Keyword'>static void 
</span><a name="LN2527"></a><span class='Declare_Function'>cword_is_not_variable</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN992"><span class='Ref_to_Struct'>PLcword</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cword</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>             <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"%s\" is not a known variable"</span><span class='Delimiter'>, 
</span>                    <a href="../../../include/catalog/namespace.h.html#LN120"><span class='Ref_to_Proto'>NameListToString</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2527"><span class='Ref_to_Parameter'>cword</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN994"><span class='Ref_to_Member'>idents</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>             <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2527"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Convenience routine to complain when we expected T_DATUM and got 
 * something else.  "tok" must be the current token, since we also 
 * look at yylval and yylloc. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN2542"></a><span class='Declare_Function'>current_token_is_not_variable</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>tok</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2542"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span>T_WORD<span class='Parentheses'>) 
</span>        <a href="pl_gram.y.html#LN61"><span class='Ref_to_Proto'>word_is_not_variable</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>word<span class='Parentheses'>)</span><span class='Delimiter'>, </span>yylloc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2542"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span>T_CWORD<span class='Parentheses'>) 
</span>        <a href="pl_gram.y.html#LN62"><span class='Ref_to_Proto'>cword_is_not_variable</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>cword<span class='Parentheses'>)</span><span class='Delimiter'>, </span>yylloc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* Convenience routine to read an expression with one possible terminator */ 
</span><span class='Keyword'>static </span><a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>* 
</span><a name="LN2554"></a><span class='Declare_Function'>read_sql_expression</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>until</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>expected</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="pl_gram.y.html#LN64"><span class='Ref_to_Proto'>read_sql_construct</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2554"><span class='Ref_to_Parameter'>until</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2554"><span class='Ref_to_Parameter'>expected</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT "</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* Convenience routine to read an expression with two possible terminators */ 
</span><span class='Keyword'>static </span><a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>* 
</span><a name="LN2562"></a><span class='Declare_Function'>read_sql_expression2</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>until</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>until2</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>expected</span><span class='Delimiter'>, 
</span><a name="LN2563"></a>                     <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>endtoken</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="pl_gram.y.html#LN64"><span class='Ref_to_Proto'>read_sql_construct</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2562"><span class='Ref_to_Parameter'>until</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2562"><span class='Ref_to_Parameter'>until2</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2562"><span class='Ref_to_Parameter'>expected</span></a><span class='Delimiter'>, 
</span>                              <span class='String'>"SELECT "</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2563"><span class='Ref_to_Parameter'>endtoken</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* Convenience routine to read a SQL statement that must end with ';' */ 
</span><span class='Keyword'>static </span><a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>* 
</span><a name="LN2571"></a><span class='Declare_Function'>read_sql_stmt</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>sqlstart</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="pl_gram.y.html#LN64"><span class='Ref_to_Proto'>read_sql_construct</span></a><span class='Parentheses'>(</span><span class='String'>';'</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, </span><span class='String'>";"</span><span class='Delimiter'>, 
</span>                              <a href="pl_gram.y.html#LN2571"><span class='Ref_to_Parameter'>sqlstart</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Read a SQL construct and build a PLpgSQL_expr for it. 
 * 
 * until:       token code for expected terminator 
 * until2:      token code for alternate terminator (pass 0 if none) 
 * until3:      token code for another alternate terminator (pass 0 if none) 
 * expected:    text to use in complaining that terminator was not found 
 * sqlstart:    text to prefix to the accumulated SQL text 
 * isexpression: whether to say we're reading an "expression" or a "statement" 
 * valid_sql:   whether to check the syntax of the expr (prefixed with sqlstart) 
 * trim:        trim trailing whitespace 
 * startloc:    if not NULL, location of first token is stored at *startloc 
 * endtoken:    if not NULL, ending token is stored at *endtoken 
 *              (this is only interesting if until2 or until3 isn't zero) 
 */ 
</span><span class='Keyword'>static </span><a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>* 
</span><a name="LN2593"></a><span class='Declare_Function'>read_sql_construct</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>until</span><span class='Delimiter'>, 
</span><a name="LN2594"></a>                   <span class='Keyword'>int </span><span class='Declare_Parameter'>until2</span><span class='Delimiter'>, 
</span><a name="LN2595"></a>                   <span class='Keyword'>int </span><span class='Declare_Parameter'>until3</span><span class='Delimiter'>, 
</span><a name="LN2596"></a>                   <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>expected</span><span class='Delimiter'>, 
</span><a name="LN2597"></a>                   <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>sqlstart</span><span class='Delimiter'>, 
</span><a name="LN2598"></a>                   <span class='Keyword'>bool </span><span class='Declare_Parameter'>isexpression</span><span class='Delimiter'>, 
</span><a name="LN2599"></a>                   <span class='Keyword'>bool </span><span class='Declare_Parameter'>valid_sql</span><span class='Delimiter'>, 
</span><a name="LN2600"></a>                   <span class='Keyword'>bool </span><span class='Declare_Parameter'>trim</span><span class='Delimiter'>, 
</span><a name="LN2601"></a>                   <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>startloc</span><span class='Delimiter'>, 
</span><a name="LN2602"></a>                   <span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>endtoken</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2604"></a>    <span class='Keyword'>int</span>                 <span class='Declare_Local'>tok</span><span class='Delimiter'>; 
</span><a name="LN2605"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a>      <span class='Declare_Local'>ds</span><span class='Delimiter'>; 
</span><a name="LN2606"></a>    <a href="plpgsql.h.html#LN1009"><span class='Ref_to_Typedef'>IdentifierLookup</span></a>    <span class='Declare_Local'>save_IdentifierLookup</span><span class='Delimiter'>; 
</span><a name="LN2607"></a>    <span class='Keyword'>int</span>                 <span class='Declare_Local'>startlocation</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN2608"></a>    <span class='Keyword'>int</span>                 <span class='Declare_Local'>parenlevel</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span><a name="LN2609"></a>    <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span> 
    <a href="../../../backend/lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2605"><span class='Ref_To_Local'>ds</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2605"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2597"><span class='Ref_to_Parameter'>sqlstart</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* special lookup mode for identifiers within the SQL text */ 
</span>    <a href="pl_gram.y.html#LN2606"><span class='Ref_To_Local'>save_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1013"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_EXPR</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN2604"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2607"><span class='Ref_To_Local'>startlocation</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>)</span>          <span class='Comment_Single_Line'>/* remember loc of first token */ 
</span>            <a href="pl_gram.y.html#LN2607"><span class='Ref_To_Local'>startlocation</span></a> <span class='Operator'>= </span>yylloc<span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2604"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><a href="pl_gram.y.html#LN2593"><span class='Ref_to_Parameter'>until</span></a> <span class='Operator'>&& </span><a href="pl_gram.y.html#LN2608"><span class='Ref_To_Local'>parenlevel</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2604"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><a href="pl_gram.y.html#LN2594"><span class='Ref_to_Parameter'>until2</span></a> <span class='Operator'>&& </span><a href="pl_gram.y.html#LN2608"><span class='Ref_To_Local'>parenlevel</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2604"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><a href="pl_gram.y.html#LN2595"><span class='Ref_to_Parameter'>until3</span></a> <span class='Operator'>&& </span><a href="pl_gram.y.html#LN2608"><span class='Ref_To_Local'>parenlevel</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2604"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='String'>'('</span> <span class='Operator'>|| </span><a href="pl_gram.y.html#LN2604"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='String'>'['</span><span class='Parentheses'>) 
</span>            <a href="pl_gram.y.html#LN2608"><span class='Ref_To_Local'>parenlevel</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2604"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='String'>')'</span> <span class='Operator'>|| </span><a href="pl_gram.y.html#LN2604"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='String'>']'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pl_gram.y.html#LN2608"><span class='Ref_To_Local'>parenlevel</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2608"><span class='Ref_To_Local'>parenlevel</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"mismatched parentheses"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Comment_Multi_Line'>/* 
         * End of function definition is an error, and we don't expect to 
         * hit a semicolon either (unless it's the until symbol, in which 
         * case we should have fallen out above). 
         */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2604"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="pl_gram.y.html#LN2604"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='String'>';'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2608"><span class='Ref_To_Local'>parenlevel</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"mismatched parentheses"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2598"><span class='Ref_to_Parameter'>isexpression</span></a><span class='Parentheses'>) 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"missing \"%s\" at end of SQL expression"</span><span class='Delimiter'>, 
</span>                                <a href="pl_gram.y.html#LN2596"><span class='Ref_to_Parameter'>expected</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"missing \"%s\" at end of SQL statement"</span><span class='Delimiter'>, 
</span>                                <a href="pl_gram.y.html#LN2596"><span class='Ref_to_Parameter'>expected</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;; &raquo; </span> 
 
    <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN2606"><span class='Ref_To_Local'>save_IdentifierLookup</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2601"><span class='Ref_to_Parameter'>startloc</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="pl_gram.y.html#LN2601"><span class='Ref_to_Parameter'>startloc</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN2607"><span class='Ref_To_Local'>startlocation</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2602"><span class='Ref_to_Parameter'>endtoken</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="pl_gram.y.html#LN2602"><span class='Ref_to_Parameter'>endtoken</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN2604"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* give helpful complaint about empty input */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2607"><span class='Ref_To_Local'>startlocation</span></a> <span class='Operator'>&GT;= </span>yylloc<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2598"><span class='Ref_to_Parameter'>isexpression</span></a><span class='Parentheses'>) 
</span>            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"missing expression"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"missing SQL statement"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pl_scanner.c.html#LN518"><span class='Ref_to_Func'>plpgsql_append_source_text</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2605"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2607"><span class='Ref_To_Local'>startlocation</span></a><span class='Delimiter'>, </span>yylloc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* trim any trailing whitespace, for neatness */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2600"><span class='Ref_to_Parameter'>trim</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2605"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="../../../include/parser/scansup.h.html#LN27"><span class='Ref_to_Proto'>scanner_isspace</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2605"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN2605"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
            <a href="pl_gram.y.html#LN2605"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Operator'>--</span><a href="pl_gram.y.html#LN2605"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pl_gram.y.html#LN2609"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2609"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN220"><span class='Ref_to_Member'>dtype</span></a>         <span class='Operator'>= </span><a href="plpgsql.h.html#LN65"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_EXPR</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2609"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN222"><span class='Ref_to_Member'>query</span></a>         <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2605"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2609"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN223"><span class='Ref_to_Member'>plan</span></a>          <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2609"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN224"><span class='Ref_to_Member'>paramnos</span></a>      <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2609"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN225"><span class='Ref_to_Member'>rwparam</span></a>       <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2609"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN231"><span class='Ref_to_Member'>ns</span></a>            <span class='Operator'>= </span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2605"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2599"><span class='Ref_to_Parameter'>valid_sql</span></a><span class='Parentheses'>) 
</span>        <a href="pl_gram.y.html#LN100"><span class='Ref_to_Proto'>check_sql_expr</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2609"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN222"><span class='Ref_to_Member'>query</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2607"><span class='Ref_To_Local'>startlocation</span></a><span class='Delimiter'>, </span>strlen<span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2597"><span class='Ref_to_Parameter'>sqlstart</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pl_gram.y.html#LN2609"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end read_sql_construct &raquo; </span> 
 
<span class='Keyword'>static </span><a href="plpgsql.h.html#LN175"><span class='Ref_to_Struct'>PLpgSQL_type</span></a> <span class='Operator'>* 
</span><a name="LN2702"></a><span class='Declare_Function'>read_datatype</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>tok</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2704"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a>      <span class='Declare_Local'>ds</span><span class='Delimiter'>; 
</span><a name="LN2705"></a>    <span class='Keyword'>char</span>               <span class='Operator'>*</span><span class='Declare_Local'>type_name</span><span class='Delimiter'>; 
</span><a name="LN2706"></a>    <span class='Keyword'>int</span>                 <span class='Declare_Local'>startlocation</span><span class='Delimiter'>; 
</span><a name="LN2707"></a>    <a href="plpgsql.h.html#LN175"><span class='Ref_to_Struct'>PLpgSQL_type</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>result</span><span class='Delimiter'>; 
</span><a name="LN2708"></a>    <span class='Keyword'>int</span>                 <span class='Declare_Local'>parenlevel</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Should only be called while parsing DECLARE sections */ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>== </span><a href="plpgsql.h.html#LN1012"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_DECLARE</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Often there will be a lookahead token, but if not, get one */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span>YYEMPTY<span class='Parentheses'>) 
</span>        <a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN2706"><span class='Ref_To_Local'>startlocation</span></a> <span class='Operator'>= </span>yylloc<span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If we have a simple or composite identifier, check for %TYPE 
     * and %ROWTYPE constructs. 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span>T_WORD<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2725"></a>        <span class='Keyword'>char</span>   <span class='Operator'>*</span><span class='Declare_Local'>dtname</span> <span class='Operator'>= </span>yylval<span class='Operator'>.</span>word<span class='Operator'>.</span>ident<span class='Delimiter'>; 
</span> 
        <a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span><span class='String'>'%'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                               K_TYPE<span class='Delimiter'>, </span><span class='String'>"type"</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1065"><span class='Ref_to_Proto'>plpgsql_parse_wordtype</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2725"><span class='Ref_To_Local'>dtname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                    K_ROWTYPE<span class='Delimiter'>, </span><span class='String'>"rowtype"</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1067"><span class='Ref_to_Proto'>plpgsql_parse_wordrowtype</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2725"><span class='Ref_To_Local'>dtname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tok==T_WORD &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN501"><span class='Ref_to_Func'>plpgsql_token_is_unreserved_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span><a name="LN2749"></a>        <span class='Keyword'>char</span>   <span class='Operator'>*</span><span class='Declare_Local'>dtname</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>keyword<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span><span class='String'>'%'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                               K_TYPE<span class='Delimiter'>, </span><span class='String'>"type"</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1065"><span class='Ref_to_Proto'>plpgsql_parse_wordtype</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2749"><span class='Ref_To_Local'>dtname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                    K_ROWTYPE<span class='Delimiter'>, </span><span class='String'>"rowtype"</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1067"><span class='Ref_to_Proto'>plpgsql_parse_wordrowtype</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2749"><span class='Ref_To_Local'>dtname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if plpgsql_token_is_unre... &raquo; </span> 
    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span>T_CWORD<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN2773"></a>        <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>dtnames</span> <span class='Operator'>= </span>yylval<span class='Operator'>.</span>cword<span class='Operator'>.</span>idents<span class='Delimiter'>; 
</span> 
        <a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span><span class='String'>'%'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                               K_TYPE<span class='Delimiter'>, </span><span class='String'>"type"</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1066"><span class='Ref_to_Proto'>plpgsql_parse_cwordtype</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2773"><span class='Ref_To_Local'>dtnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                    K_ROWTYPE<span class='Delimiter'>, </span><span class='String'>"rowtype"</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1068"><span class='Ref_to_Proto'>plpgsql_parse_cwordrowtype</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2773"><span class='Ref_To_Local'>dtnames</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Parentheses'>) 
</span>                    <span class='Control'>return</span> <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tok==T_CWORD &raquo; </span> 
 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>!= </span><span class='String'>';'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2708"><span class='Ref_To_Local'>parenlevel</span></a> <span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>                <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"mismatched parentheses"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"incomplete data type declaration"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Comment_Multi_Line'>/* Possible followers for datatype in a declaration */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span>K_COLLATE <span class='Operator'>|| </span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span>K_NOT <span class='Operator'>|| 
</span>            <a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span><span class='String'>'='</span> <span class='Operator'>|| </span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span>COLON_EQUALS <span class='Operator'>|| </span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span>K_DEFAULT<span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Comment_Multi_Line'>/* Possible followers for datatype in a cursor_arg list */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span><span class='String'>','</span> <span class='Operator'>|| </span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span><span class='String'>')'</span><span class='Parentheses'>) </span><span class='Operator'>&& </span><a href="pl_gram.y.html#LN2708"><span class='Ref_To_Local'>parenlevel</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span><span class='String'>'('</span><span class='Parentheses'>) 
</span>            <a href="pl_gram.y.html#LN2708"><span class='Ref_To_Local'>parenlevel</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>== </span><span class='String'>')'</span><span class='Parentheses'>) 
</span>            <a href="pl_gram.y.html#LN2708"><span class='Ref_To_Local'>parenlevel</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span> 
        <a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while tok!=';' &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* set up ds to contain complete typename text */ 
</span>    <a href="../../../backend/lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2704"><span class='Ref_To_Local'>ds</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN518"><span class='Ref_to_Func'>plpgsql_append_source_text</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2704"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2706"><span class='Ref_To_Local'>startlocation</span></a><span class='Delimiter'>, </span>yylloc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2705"><span class='Ref_To_Local'>type_name</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN2704"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2705"><span class='Ref_To_Local'>type_name</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>        <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"missing data type declaration"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN103"><span class='Ref_to_Proto'>parse_datatype</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2705"><span class='Ref_To_Local'>type_name</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2706"><span class='Ref_To_Local'>startlocation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2704"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2702"><span class='Ref_to_Parameter'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pl_gram.y.html#LN2707"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end read_datatype &raquo; </span> 
 
<span class='Keyword'>static </span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>* 
</span><a name="LN2838"></a><span class='Declare_Function'>make_execsql_stmt</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>firsttoken</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2840"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a>      <span class='Declare_Local'>ds</span><span class='Delimiter'>; 
</span><a name="LN2841"></a>    <a href="plpgsql.h.html#LN1009"><span class='Ref_to_Typedef'>IdentifierLookup</span></a>    <span class='Declare_Local'>save_IdentifierLookup</span><span class='Delimiter'>; 
</span><a name="LN2842"></a>    <a href="plpgsql.h.html#LN743"><span class='Ref_to_Struct'>PLpgSQL_stmt_execsql</span></a> <span class='Operator'>*</span><span class='Declare_Local'>execsql</span><span class='Delimiter'>; 
</span><a name="LN2843"></a>    <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a>        <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span><a name="LN2844"></a>    <a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a>         <span class='Operator'>*</span><span class='Declare_Local'>row</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2845"></a>    <a href="plpgsql.h.html#LN299"><span class='Ref_to_Struct'>PLpgSQL_rec</span></a>         <span class='Operator'>*</span><span class='Declare_Local'>rec</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN2846"></a>    <span class='Keyword'>int</span>                 <span class='Declare_Local'>tok</span><span class='Delimiter'>; 
</span><a name="LN2847"></a>    <span class='Keyword'>int</span>                 <span class='Declare_Local'>prev_tok</span><span class='Delimiter'>; 
</span><a name="LN2848"></a>    <span class='Keyword'>bool</span>                <span class='Declare_Local'>have_into</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN2849"></a>    <span class='Keyword'>bool</span>                <span class='Declare_Local'>have_strict</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span><a name="LN2850"></a>    <span class='Keyword'>int</span>                 <span class='Declare_Local'>into_start_loc</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span><a name="LN2851"></a>    <span class='Keyword'>int</span>                 <span class='Declare_Local'>into_end_loc</span> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <a href="../../../backend/lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* special lookup mode for identifiers within the SQL text */ 
</span>    <a href="pl_gram.y.html#LN2841"><span class='Ref_To_Local'>save_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1013"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_EXPR</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Scan to the end of the SQL command.  Identify any INTO-variables 
     * clause lurking within it, and parse that via read_into_target(). 
     * 
     * Because INTO is sometimes used in the main SQL grammar, we have to be 
     * careful not to take any such usage of INTO as a PL/pgSQL INTO clause. 
     * There are currently three such cases: 
     * 
     * 1. SELECT ... INTO.  We don't care, we just override that with the 
     * PL/pgSQL definition. 
     * 
     * 2. INSERT INTO.  This is relatively easy to recognize since the words 
     * must appear adjacently; but we can't assume INSERT starts the command, 
     * because it can appear in CREATE RULE or WITH.  Unfortunately, INSERT is 
     * *not* fully reserved, so that means there is a chance of a false match; 
     * but it's not very likely. 
     * 
     * 3. IMPORT FOREIGN SCHEMA ... INTO.  This is not allowed in CREATE RULE 
     * or WITH, so we just check for IMPORT as the command's first token. 
     * (If IMPORT FOREIGN SCHEMA returned data someone might wish to capture 
     * with an INTO-variables clause, we'd have to work much harder here.) 
     * 
     * Fortunately, INTO is a fully reserved word in the main grammar, so 
     * at least we need not worry about it appearing as an identifier. 
     * 
     * Any future additional uses of INTO in the main grammar will doubtless 
     * break this logic again ... beware! 
     */ 
</span>    <a href="pl_gram.y.html#LN2846"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN2838"><span class='Ref_to_Parameter'>firsttoken</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN2847"><span class='Ref_To_Local'>prev_tok</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN2846"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN2846"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2848"><span class='Ref_To_Local'>have_into</span></a> <span class='Operator'>&& </span><a href="pl_gram.y.html#LN2851"><span class='Ref_To_Local'>into_end_loc</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="pl_gram.y.html#LN2851"><span class='Ref_To_Local'>into_end_loc</span></a> <span class='Operator'>= </span>yylloc<span class='Delimiter'>;</span>      <span class='Comment_Single_Line'>/* token after the INTO part */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2846"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='String'>';'</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2846"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"unexpected end of function definition"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2846"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><a href="pl_gram.y.html#LN2106"><span class='Ref_to_Global_Var'>K_INTO</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2847"><span class='Ref_To_Local'>prev_tok</span></a> <span class='Operator'>== </span>K_INSERT<span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* INSERT INTO is not an INTO-target */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2838"><span class='Ref_to_Parameter'>firsttoken</span></a> <span class='Operator'>== </span>K_IMPORT<span class='Parentheses'>) 
</span>                <span class='Control'>continue</span><span class='Delimiter'>;</span>       <span class='Comment_Single_Line'>/* IMPORT ... INTO is not an INTO-target */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2848"><span class='Ref_To_Local'>have_into</span></a><span class='Parentheses'>) 
</span>                <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"INTO specified more than once"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pl_gram.y.html#LN2848"><span class='Ref_To_Local'>have_into</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>            <a href="pl_gram.y.html#LN2850"><span class='Ref_To_Local'>into_start_loc</span></a> <span class='Operator'>= </span>yylloc<span class='Delimiter'>; 
</span>            <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1011"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_NORMAL</span></a><span class='Delimiter'>; 
</span>            <a href="pl_gram.y.html#LN92"><span class='Ref_to_Proto'>read_into_target</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2845"><span class='Ref_To_Local'>rec</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2844"><span class='Ref_To_Local'>row</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2849"><span class='Ref_To_Local'>have_strict</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1013"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_EXPR</span></a><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;; &raquo; </span> 
 
    <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN2841"><span class='Ref_To_Local'>save_IdentifierLookup</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2848"><span class='Ref_To_Local'>have_into</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Insert an appropriate number of spaces corresponding to the 
         * INTO text, so that locations within the redacted SQL statement 
         * still line up with those in the original source text. 
         */ 
</span>        <a href="pl_scanner.c.html#LN518"><span class='Ref_to_Func'>plpgsql_append_source_text</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2838"><span class='Ref_to_Parameter'>location</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2850"><span class='Ref_To_Local'>into_start_loc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="../../../include/lib/stringinfo.h.html#LN135"><span class='Ref_to_Proto'>appendStringInfoSpaces</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2851"><span class='Ref_To_Local'>into_end_loc</span></a> <span class='Operator'>- </span><a href="pl_gram.y.html#LN2850"><span class='Ref_To_Local'>into_start_loc</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pl_scanner.c.html#LN518"><span class='Ref_to_Func'>plpgsql_append_source_text</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2851"><span class='Ref_To_Local'>into_end_loc</span></a><span class='Delimiter'>, </span>yylloc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
        <a href="pl_scanner.c.html#LN518"><span class='Ref_to_Func'>plpgsql_append_source_text</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2838"><span class='Ref_to_Parameter'>location</span></a><span class='Delimiter'>, </span>yylloc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* trim any trailing whitespace, for neatness */ 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span> <span class='Operator'>&& </span><a href="../../../include/parser/scansup.h.html#LN27"><span class='Ref_to_Proto'>scanner_isspace</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Delimiter'>]</span><span class='Parentheses'>))</span> 
        <a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Delimiter'>[</span><span class='Operator'>--</span><a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN37"><span class='Ref_to_Member'>len</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN2843"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2843"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN220"><span class='Ref_to_Member'>dtype</span></a>         <span class='Operator'>= </span><a href="plpgsql.h.html#LN65"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_EXPR</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2843"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN222"><span class='Ref_to_Member'>query</span></a>         <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2843"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN223"><span class='Ref_to_Member'>plan</span></a>          <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2843"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN224"><span class='Ref_to_Member'>paramnos</span></a>      <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2843"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN225"><span class='Ref_to_Member'>rwparam</span></a>       <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2843"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN231"><span class='Ref_to_Member'>ns</span></a>            <span class='Operator'>= </span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2840"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN100"><span class='Ref_to_Proto'>check_sql_expr</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2843"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN222"><span class='Ref_to_Member'>query</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2838"><span class='Ref_to_Parameter'>location</span></a><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN2842"><span class='Ref_To_Local'>execsql</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN743"><span class='Ref_to_Struct'>PLpgSQL_stmt_execsql</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2842"><span class='Ref_To_Local'>execsql</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN745"><span class='Ref_to_Member'>cmd_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN100"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_EXECSQL</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2842"><span class='Ref_To_Local'>execsql</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN746"><span class='Ref_to_Member'>lineno</span></a>  <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2838"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2842"><span class='Ref_To_Local'>execsql</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN747"><span class='Ref_to_Member'>sqlstmt</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN2843"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2842"><span class='Ref_To_Local'>execsql</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN750"><span class='Ref_to_Member'>into</span></a>    <span class='Operator'>= </span><a href="pl_gram.y.html#LN2848"><span class='Ref_To_Local'>have_into</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2842"><span class='Ref_To_Local'>execsql</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN751"><span class='Ref_to_Member'>strict</span></a>  <span class='Operator'>= </span><a href="pl_gram.y.html#LN2849"><span class='Ref_To_Local'>have_strict</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2842"><span class='Ref_To_Local'>execsql</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN752"><span class='Ref_to_Member'>rec</span></a>     <span class='Operator'>= </span><a href="pl_gram.y.html#LN2845"><span class='Ref_To_Local'>rec</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2842"><span class='Ref_To_Local'>execsql</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN753"><span class='Ref_to_Member'>row</span></a>     <span class='Operator'>= </span><a href="pl_gram.y.html#LN2844"><span class='Ref_To_Local'>row</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pl_gram.y.html#LN2842"><span class='Ref_To_Local'>execsql</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end make_execsql_stmt &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* 
 * Read FETCH or MOVE direction clause (everything through FROM/IN). 
 */ 
</span><span class='Keyword'>static </span><a href="plpgsql.h.html#LN636"><span class='Ref_to_Struct'>PLpgSQL_stmt_fetch</span></a> <span class='Operator'>* 
</span><a name="LN2962"></a><span class='Declare_Function'>read_fetch_direction</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN2964"></a>    <a href="plpgsql.h.html#LN636"><span class='Ref_to_Struct'>PLpgSQL_stmt_fetch</span></a> <span class='Operator'>*</span><span class='Declare_Local'>fetch</span><span class='Delimiter'>; 
</span><a name="LN2965"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tok</span><span class='Delimiter'>; 
</span><a name="LN2966"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>check_FROM</span> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * We create the PLpgSQL_stmt_fetch struct here, but only fill in 
     * the fields arising from the optional direction clause 
     */ 
</span>    <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN636"><span class='Ref_to_Struct'>PLpgSQL_stmt_fetch</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN636"><span class='Ref_to_Struct'>PLpgSQL_stmt_fetch</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN638"><span class='Ref_to_Member'>cmd_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN105"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_FETCH</span></a><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* set direction defaults: */ 
</span>    <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN643"><span class='Ref_to_Member'>direction</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2638"><span class='Ref_to_EnumConst'>FETCH_FORWARD</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN644"><span class='Ref_to_Member'>how_many</span></a>  <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN645"><span class='Ref_to_Member'>expr</span></a>      <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN647"><span class='Ref_to_Member'>returns_multiple_rows</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"unexpected end of function definition"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                       K_NEXT<span class='Delimiter'>, </span><span class='String'>"next"</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* use defaults */ 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                            K_PRIOR<span class='Delimiter'>, </span><span class='String'>"prior"</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN643"><span class='Ref_to_Member'>direction</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2639"><span class='Ref_to_EnumConst'>FETCH_BACKWARD</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                            K_FIRST<span class='Delimiter'>, </span><span class='String'>"first"</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN643"><span class='Ref_to_Member'>direction</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2641"><span class='Ref_to_EnumConst'>FETCH_ABSOLUTE</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                            K_LAST<span class='Delimiter'>, </span><span class='String'>"last"</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN643"><span class='Ref_to_Member'>direction</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2641"><span class='Ref_to_EnumConst'>FETCH_ABSOLUTE</span></a><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN644"><span class='Ref_to_Member'>how_many</span></a>  <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                            K_ABSOLUTE<span class='Delimiter'>, </span><span class='String'>"absolute"</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN643"><span class='Ref_to_Member'>direction</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2641"><span class='Ref_to_EnumConst'>FETCH_ABSOLUTE</span></a><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN645"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span>K_FROM<span class='Delimiter'>, </span><a href="pl_gram.y.html#LN1294"><span class='Ref_to_Global_Var'>K_IN</span></a><span class='Delimiter'>, 
</span>                                           <span class='String'>"FROM or IN"</span><span class='Delimiter'>, 
</span>                                           <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN2966"><span class='Ref_To_Local'>check_FROM</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                            K_RELATIVE<span class='Delimiter'>, </span><span class='String'>"relative"</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN643"><span class='Ref_to_Member'>direction</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2642"><span class='Ref_to_EnumConst'>FETCH_RELATIVE</span></a><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN645"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span>K_FROM<span class='Delimiter'>, </span><a href="pl_gram.y.html#LN1294"><span class='Ref_to_Global_Var'>K_IN</span></a><span class='Delimiter'>, 
</span>                                           <span class='String'>"FROM or IN"</span><span class='Delimiter'>, 
</span>                                           <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN2966"><span class='Ref_To_Local'>check_FROM</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                            K_ALL<span class='Delimiter'>, </span><span class='String'>"all"</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN644"><span class='Ref_to_Member'>how_many</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2645"><span class='Ref_to_Const'>FETCH_ALL</span></a><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN647"><span class='Ref_to_Member'>returns_multiple_rows</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                            K_FORWARD<span class='Delimiter'>, </span><span class='String'>"forward"</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN83"><span class='Ref_to_Proto'>complete_direction</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2966"><span class='Ref_To_Local'>check_FROM</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                            K_BACKWARD<span class='Delimiter'>, </span><span class='String'>"backward"</span><span class='Parentheses'>))</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN643"><span class='Ref_to_Member'>direction</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2639"><span class='Ref_to_EnumConst'>FETCH_BACKWARD</span></a><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN83"><span class='Ref_to_Proto'>complete_direction</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN2966"><span class='Ref_To_Local'>check_FROM</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span>K_FROM <span class='Operator'>|| </span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><a href="pl_gram.y.html#LN1294"><span class='Ref_to_Global_Var'>K_IN</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* empty direction */ 
</span>        <a href="pl_gram.y.html#LN2966"><span class='Ref_To_Local'>check_FROM</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span>T_DATUM<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Assume there's no direction clause and tok is a cursor name */ 
</span>        <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN2966"><span class='Ref_To_Local'>check_FROM</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Assume it's a count expression with no preceding keyword. 
         * Note: we allow this syntax because core SQL does, but we don't 
         * document it because of the ambiguity with the omitted-direction 
         * case.  For instance, "MOVE n IN c" will fail if n is a variable. 
         * Perhaps this can be improved someday, but it's hardly worth a 
         * lot of work. 
         */ 
</span>        <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN645"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span>K_FROM<span class='Delimiter'>, </span><a href="pl_gram.y.html#LN1294"><span class='Ref_to_Global_Var'>K_IN</span></a><span class='Delimiter'>, 
</span>                                           <span class='String'>"FROM or IN"</span><span class='Delimiter'>, 
</span>                                           <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN647"><span class='Ref_to_Member'>returns_multiple_rows</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN2966"><span class='Ref_To_Local'>check_FROM</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* check FROM or IN keyword after direction's specification */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2966"><span class='Ref_To_Local'>check_FROM</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>!= </span>K_FROM <span class='Operator'>&& </span><a href="pl_gram.y.html#LN2965"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>!= </span><a href="pl_gram.y.html#LN1294"><span class='Ref_to_Global_Var'>K_IN</span></a><span class='Parentheses'>) 
</span>            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"expected FROM or IN"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="pl_gram.y.html#LN2964"><span class='Ref_To_Local'>fetch</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end read_fetch_direction &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Process remainder of FETCH/MOVE direction after FORWARD or BACKWARD. 
 * Allows these cases: 
 *   FORWARD expr,  FORWARD ALL,  FORWARD 
 *   BACKWARD expr, BACKWARD ALL, BACKWARD 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3087"></a><span class='Declare_Function'>complete_direction</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN636"><span class='Ref_to_Struct'>PLpgSQL_stmt_fetch</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>fetch</span><span class='Delimiter'>,</span>  <span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>check_FROM</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3089"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tok</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN3089"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3089"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>        <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"unexpected end of function definition"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3089"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span>K_FROM <span class='Operator'>|| </span><a href="pl_gram.y.html#LN3089"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><a href="pl_gram.y.html#LN1294"><span class='Ref_to_Global_Var'>K_IN</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pl_gram.y.html#LN3087"><span class='Ref_to_Parameter'>check_FROM</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3089"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span>K_ALL<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN3087"><span class='Ref_to_Parameter'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN644"><span class='Ref_to_Member'>how_many</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/parsenodes.h.html#LN2645"><span class='Ref_to_Const'>FETCH_ALL</span></a><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN3087"><span class='Ref_to_Parameter'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN647"><span class='Ref_to_Member'>returns_multiple_rows</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Operator'>*</span><a href="pl_gram.y.html#LN3087"><span class='Ref_to_Parameter'>check_FROM</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3089"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3087"><span class='Ref_to_Parameter'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN645"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span>K_FROM<span class='Delimiter'>, </span><a href="pl_gram.y.html#LN1294"><span class='Ref_to_Global_Var'>K_IN</span></a><span class='Delimiter'>, 
</span>                                       <span class='String'>"FROM or IN"</span><span class='Delimiter'>, 
</span>                                       <span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3087"><span class='Ref_to_Parameter'>fetch</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN647"><span class='Ref_to_Member'>returns_multiple_rows</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pl_gram.y.html#LN3087"><span class='Ref_to_Parameter'>check_FROM</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end complete_direction &raquo; </span> 
 
 
<span class='Keyword'>static </span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>* 
</span><a name="LN3119"></a><span class='Declare_Function'>make_return_stmt</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3121"></a>    <a href="plpgsql.h.html#LN675"><span class='Ref_to_Struct'>PLpgSQL_stmt_return</span></a> <span class='Operator'>*</span><span class='Declare_Local'>new</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN675"><span class='Ref_to_Struct'>PLpgSQL_stmt_return</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN677"><span class='Ref_to_Member'>cmd_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN95"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_RETURN</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN678"><span class='Ref_to_Member'>lineno</span></a>   <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3119"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN679"><span class='Ref_to_Member'>expr</span></a>     <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN680"><span class='Ref_to_Member'>retvarno</span></a> <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN832"><span class='Ref_to_Member'>fn_retset</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>yylex<span class='Parentheses'>() </span><span class='Operator'>!= </span><span class='String'>';'</span><span class='Parentheses'>)</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"RETURN cannot have a parameter in function returning set"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN985"><span class='Ref_to_Func'>errhint</span></a><span class='Parentheses'>(</span><span class='String'>"Use RETURN NEXT or RETURN QUERY."</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN837"><span class='Ref_to_Member'>out_param_varno</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>yylex<span class='Parentheses'>() </span><span class='Operator'>!= </span><span class='String'>';'</span><span class='Parentheses'>)</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"RETURN cannot have a parameter in function with OUT parameters"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN680"><span class='Ref_to_Member'>retvarno</span></a> <span class='Operator'>= </span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN837"><span class='Ref_to_Member'>out_param_varno</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN828"><span class='Ref_to_Member'>fn_rettype</span></a> <span class='Operator'>== </span><a href="../../../include/catalog/pg_type.h.html#LN689"><span class='Ref_to_Const'>VOIDOID</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>yylex<span class='Parentheses'>() </span><span class='Operator'>!= </span><span class='String'>';'</span><span class='Parentheses'>)</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"RETURN cannot have a parameter in function returning void"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * We want to special-case simple variable references for efficiency. 
         * So peek ahead to see if that's what we have. 
         */ 
</span><a name="LN3161"></a>        <span class='Keyword'>int</span>     <span class='Declare_Local'>tok</span> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3161"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span>T_DATUM <span class='Operator'>&& </span><a href="pl_scanner.c.html#LN534"><span class='Ref_to_Func'>plpgsql_peek</span></a><span class='Parentheses'>() </span><span class='Operator'>== </span><span class='String'>';'</span> <span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN60"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_VAR</span></a> <span class='Operator'>|| 
</span>             yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN61"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ROW</span></a> <span class='Operator'>|| 
</span>             yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN62"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_REC</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN680"><span class='Ref_to_Member'>retvarno</span></a> <span class='Operator'>= </span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* eat the semicolon token that we only peeked at above */ 
</span>            <a href="pl_gram.y.html#LN3161"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3161"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='String'>';'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Not (just) a variable name, so treat as expression. 
             * 
             * Note that a well-formed expression is _required_ here; 
             * anything else is a compile-time error. 
             */ 
</span>            <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3161"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN679"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN74"><span class='Ref_to_Proto'>read_sql_expression</span></a><span class='Parentheses'>(</span><span class='String'>';'</span><span class='Delimiter'>, </span><span class='String'>";"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end make_return_stmt &raquo; </span> 
 
 
<span class='Keyword'>static </span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>* 
</span><a name="LN3191"></a><span class='Declare_Function'>make_return_next_stmt</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3193"></a>    <a href="plpgsql.h.html#LN686"><span class='Ref_to_Struct'>PLpgSQL_stmt_return_next</span></a> <span class='Operator'>*</span><span class='Declare_Local'>new</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN832"><span class='Ref_to_Member'>fn_retset</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot use RETURN NEXT in a non-SETOF function"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3191"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN686"><span class='Ref_to_Struct'>PLpgSQL_stmt_return_next</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN688"><span class='Ref_to_Member'>cmd_type</span></a>   <span class='Operator'>= </span><a href="plpgsql.h.html#LN96"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_RETURN_NEXT</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN689"><span class='Ref_to_Member'>lineno</span></a>     <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3191"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN690"><span class='Ref_to_Member'>expr</span></a>       <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN691"><span class='Ref_to_Member'>retvarno</span></a>   <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN837"><span class='Ref_to_Member'>out_param_varno</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>yylex<span class='Parentheses'>() </span><span class='Operator'>!= </span><span class='String'>';'</span><span class='Parentheses'>)</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"RETURN NEXT cannot have a parameter in function with OUT parameters"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>        <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN691"><span class='Ref_to_Member'>retvarno</span></a> <span class='Operator'>= </span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN837"><span class='Ref_to_Member'>out_param_varno</span></a><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * We want to special-case simple variable references for efficiency. 
         * So peek ahead to see if that's what we have. 
         */ 
</span><a name="LN3222"></a>        <span class='Keyword'>int</span>     <span class='Declare_Local'>tok</span> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3222"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span>T_DATUM <span class='Operator'>&& </span><a href="pl_scanner.c.html#LN534"><span class='Ref_to_Func'>plpgsql_peek</span></a><span class='Parentheses'>() </span><span class='Operator'>== </span><span class='String'>';'</span> <span class='Operator'>&& 
</span>            <span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN60"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_VAR</span></a> <span class='Operator'>|| 
</span>             yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN61"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ROW</span></a> <span class='Operator'>|| 
</span>             yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN62"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_REC</span></a><span class='Parentheses'>))</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN691"><span class='Ref_to_Member'>retvarno</span></a> <span class='Operator'>= </span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* eat the semicolon token that we only peeked at above */ 
</span>            <a href="pl_gram.y.html#LN3222"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3222"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='String'>';'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* 
             * Not (just) a variable name, so treat as expression. 
             * 
             * Note that a well-formed expression is _required_ here; 
             * anything else is a compile-time error. 
             */ 
</span>            <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3222"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN690"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN74"><span class='Ref_to_Proto'>read_sql_expression</span></a><span class='Parentheses'>(</span><span class='String'>';'</span><span class='Delimiter'>, </span><span class='String'>";"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end make_return_next_stmt &raquo; </span> 
 
 
<span class='Keyword'>static </span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>* 
</span><a name="LN3252"></a><span class='Declare_Function'>make_return_query_stmt</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3254"></a>    <a href="plpgsql.h.html#LN697"><span class='Ref_to_Struct'>PLpgSQL_stmt_return_query</span></a> <span class='Operator'>*</span><span class='Declare_Local'>new</span><span class='Delimiter'>; 
</span><a name="LN3255"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tok</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN832"><span class='Ref_to_Member'>fn_retset</span></a><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_DATATYPE_MISMATCH<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cannot use RETURN QUERY in a non-SETOF function"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3252"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN697"><span class='Ref_to_Struct'>PLpgSQL_stmt_return_query</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN699"><span class='Ref_to_Member'>cmd_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN97"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_RETURN_QUERY</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN700"><span class='Ref_to_Member'>lineno</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3252"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* check for RETURN QUERY EXECUTE */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pl_gram.y.html#LN3255"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>())</span> <span class='Operator'>!= </span>K_EXECUTE<span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* ordinary static query */ 
</span>        <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3255"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN701"><span class='Ref_to_Member'>query</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN79"><span class='Ref_to_Proto'>read_sql_stmt</span></a><span class='Parentheses'>(</span><span class='String'>""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* dynamic SQL */ 
</span><a name="LN3277"></a>        <span class='Keyword'>int</span>     <span class='Declare_Local'>term</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN702"><span class='Ref_to_Member'>dynquery</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span><span class='String'>';'</span><span class='Delimiter'>, </span>K_USING<span class='Delimiter'>, </span><span class='String'>"; or USING"</span><span class='Delimiter'>, 
</span>                                             <span class='Operator'>&</span><a href="pl_gram.y.html#LN3277"><span class='Ref_To_Local'>term</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3277"><span class='Ref_To_Local'>term</span></a> <span class='Operator'>== </span>K_USING<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>do</span> 
            <span class='Delimiter'>{ 
</span><a name="LN3285"></a>                <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span> 
                <a href="pl_gram.y.html#LN3285"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span><span class='String'>','</span><span class='Delimiter'>, </span><span class='String'>';'</span><span class='Delimiter'>, </span><span class='String'>", or ;"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3277"><span class='Ref_To_Local'>term</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN703"><span class='Ref_to_Member'>params</span></a> <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN703"><span class='Ref_to_Member'>params</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3285"><span class='Ref_To_Local'>expr</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} </span><span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3277"><span class='Ref_To_Local'>term</span></a> <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end make_return_query_stmt &raquo; </span> 
 
 
<span class='Comment_Multi_Line'>/* convenience routine to fetch the name of a T_DATUM */ 
</span><span class='Keyword'>static char </span><span class='Operator'>* 
</span><a name="LN3299"></a><span class='Declare_Function'>NameOfDatum</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN997"><span class='Ref_to_Struct'>PLwdatum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>wdatum</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3299"><span class='Ref_to_Parameter'>wdatum</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN1000"><span class='Ref_to_Member'>ident</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <a href="pl_gram.y.html#LN3299"><span class='Ref_to_Parameter'>wdatum</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN1000"><span class='Ref_to_Member'>ident</span></a><span class='Delimiter'>; 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3299"><span class='Ref_to_Parameter'>wdatum</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN1002"><span class='Ref_to_Member'>idents</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="../../../include/catalog/namespace.h.html#LN120"><span class='Ref_to_Proto'>NameListToString</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3299"><span class='Ref_to_Parameter'>wdatum</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN1002"><span class='Ref_to_Member'>idents</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Keyword'>static void 
</span><a name="LN3308"></a><span class='Declare_Function'>check_assignable</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>datum</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3308"><span class='Ref_to_Parameter'>datum</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN197"><span class='Ref_to_Member'>dtype</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> <a href="plpgsql.h.html#LN60"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_VAR</span></a><span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(((</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pl_gram.y.html#LN3308"><span class='Ref_to_Parameter'>datum</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>isconst<span class='Parentheses'>)</span> 
                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_ERROR_IN_ASSIGNMENT<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"%s\" is declared CONSTANT"</span><span class='Delimiter'>, 
</span>                                <span class='Parentheses'>((</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pl_gram.y.html#LN3308"><span class='Ref_to_Parameter'>datum</span></a><span class='Parentheses'>)</span><span class='Operator'>-&GT;</span>refname<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3308"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="plpgsql.h.html#LN61"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ROW</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* always assignable? */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="plpgsql.h.html#LN62"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_REC</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* always assignable?  What about NEW/OLD? */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="plpgsql.h.html#LN63"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_RECFIELD</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* always assignable? */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>case</span> <a href="plpgsql.h.html#LN64"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ARRAYELEM</span></a><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* always assignable? */ 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>        <span class='Control'>default</span><span class='Operator'>: 
</span>            <a href="../../../backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"unrecognized dtype: %d"</span><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3308"><span class='Ref_to_Parameter'>datum</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN197"><span class='Ref_to_Member'>dtype</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch datum-&GT;dtype &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end check_assignable &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Read the argument of an INTO clause.  On entry, we have just read the 
 * INTO keyword. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3343"></a><span class='Declare_Function'>read_into_target</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN299"><span class='Ref_to_Struct'>PLpgSQL_rec</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>rec</span><span class='Delimiter'>, </span><a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a> <span class='Operator'>**</span><span class='Declare_Parameter'>row</span><span class='Delimiter'>, </span><span class='Keyword'>bool </span><span class='Operator'>*</span><span class='Declare_Parameter'>strict</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3345"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tok</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Set default results */ 
</span>    <span class='Operator'>*</span><a href="pl_gram.y.html#LN3343"><span class='Ref_to_Parameter'>rec</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pl_gram.y.html#LN3343"><span class='Ref_to_Parameter'>row</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3343"><span class='Ref_to_Parameter'>strict</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="pl_gram.y.html#LN3343"><span class='Ref_to_Parameter'>strict</span></a> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN3345"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3343"><span class='Ref_to_Parameter'>strict</span></a> <span class='Operator'>&& </span><a href="pl_gram.y.html#LN3345"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span>K_STRICT<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Operator'>*</span><a href="pl_gram.y.html#LN3343"><span class='Ref_to_Parameter'>strict</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <a href="pl_gram.y.html#LN3345"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Currently, a row or record variable can be the single INTO target, 
     * but not a member of a multi-target list.  So we throw error if there 
     * is a comma after it, because that probably means the user tried to 
     * write a multi-target list.  If this ever gets generalized, we should 
     * probably refactor read_into_scalar_list so it handles all cases. 
     */ 
</span>    <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3345"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>case</span> T_DATUM<span class='Operator'>: 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN61"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ROW</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Delimiter'>, </span>yylloc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="pl_gram.y.html#LN3343"><span class='Ref_to_Parameter'>row</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pl_gram.y.html#LN3345"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>())</span> <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>)</span> 
                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"record or row variable cannot be part of multiple-item INTO list"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3345"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN62"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_REC</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Delimiter'>, </span>yylloc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Operator'>*</span><a href="pl_gram.y.html#LN3343"><span class='Ref_to_Parameter'>rec</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN299"><span class='Ref_to_Struct'>PLpgSQL_rec</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Delimiter'>; 
</span> 
                <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pl_gram.y.html#LN3345"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>())</span> <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>)</span> 
                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"record or row variable cannot be part of multiple-item INTO list"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3345"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Operator'>*</span><a href="pl_gram.y.html#LN3343"><span class='Ref_to_Parameter'>row</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN94"><span class='Ref_to_Proto'>read_into_scalar_list</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN90"><span class='Ref_to_Proto'>NameOfDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>wdatum<span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                                             yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Delimiter'>, </span>yylloc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>default</span><span class='Operator'>: 
</span>            <span class='Comment_Multi_Line'>/* just to give a better message than "syntax error" */ 
</span>            <a href="pl_gram.y.html#LN63"><span class='Ref_to_Proto'>current_token_is_not_variable</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3345"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end switch tok &raquo; </span> 
<span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end read_into_target &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Given the first datum and name in the INTO list, continue to read 
 * comma-separated scalar variables until we run out. Then construct 
 * and return a fake "row" variable that represents the list of 
 * scalars. 
 */ 
</span><span class='Keyword'>static </span><a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a> <span class='Operator'>* 
</span><a name="LN3414"></a><span class='Declare_Function'>read_into_scalar_list</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>initial_name</span><span class='Delimiter'>, 
</span><a name="LN3415"></a>                      <a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>initial_datum</span><span class='Delimiter'>, 
</span><a name="LN3416"></a>                      <span class='Keyword'>int </span><span class='Declare_Parameter'>initial_location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3418"></a>    <span class='Keyword'>int</span>              <span class='Declare_Local'>nfields</span><span class='Delimiter'>; 
</span><a name="LN3419"></a>    <span class='Keyword'>char</span>            <span class='Operator'>*</span><span class='Declare_Local'>fieldnames</span><span class='Delimiter'>[</span><span class='Number'>1024</span><span class='Delimiter'>]; 
</span><a name="LN3420"></a>    <span class='Keyword'>int</span>              <span class='Declare_Local'>varnos</span><span class='Delimiter'>[</span><span class='Number'>1024</span><span class='Delimiter'>]; 
</span><a name="LN3421"></a>    <a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>row</span><span class='Delimiter'>; 
</span><a name="LN3422"></a>    <span class='Keyword'>int</span>              <span class='Declare_Local'>tok</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3415"><span class='Ref_to_Parameter'>initial_datum</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3416"><span class='Ref_to_Parameter'>initial_location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3419"><span class='Ref_To_Local'>fieldnames</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="pl_gram.y.html#LN3414"><span class='Ref_to_Parameter'>initial_name</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3420"><span class='Ref_To_Local'>varnos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>]</span>     <span class='Operator'>= </span><a href="pl_gram.y.html#LN3415"><span class='Ref_to_Parameter'>initial_datum</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN198"><span class='Ref_to_Member'>dno</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a>       <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>((</span><a href="pl_gram.y.html#LN3422"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>())</span> <span class='Operator'>== </span><span class='String'>','</span><span class='Parentheses'>)</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* Check for array overflow */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a> <span class='Operator'>&GT;= </span><span class='Number'>1024</span><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_PROGRAM_LIMIT_EXCEEDED<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too many INTO variables specified"</span><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <a href="pl_gram.y.html#LN3422"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Control'>switch</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3422"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>case</span> T_DATUM<span class='Operator'>: 
</span>                <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Delimiter'>, </span>yylloc<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN61"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ROW</span></a> <span class='Operator'>|| 
</span>                    yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dtype <span class='Operator'>== </span><a href="plpgsql.h.html#LN62"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_REC</span></a><span class='Parentheses'>) 
</span>                    <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                            <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                             <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"\"%s\" is not a scalar variable"</span><span class='Delimiter'>, 
</span>                                    <a href="pl_gram.y.html#LN90"><span class='Ref_to_Proto'>NameOfDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>wdatum<span class='Parentheses'>)))</span><span class='Delimiter'>, 
</span>                             <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>                <a href="pl_gram.y.html#LN3419"><span class='Ref_To_Local'>fieldnames</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="pl_gram.y.html#LN90"><span class='Ref_to_Proto'>NameOfDatum</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><span class='Parentheses'>(</span>yylval<span class='Operator'>.</span>wdatum<span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>                <a href="pl_gram.y.html#LN3420"><span class='Ref_To_Local'>varnos</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a><span class='Operator'>++</span><span class='Delimiter'>]</span>   <span class='Operator'>= </span>yylval<span class='Operator'>.</span>wdatum<span class='Operator'>.</span>datum<span class='Operator'>-&GT;</span>dno<span class='Delimiter'>; 
</span>                <span class='Control'>break</span><span class='Delimiter'>; 
</span> 
            <span class='Control'>default</span><span class='Operator'>: 
</span>                <span class='Comment_Multi_Line'>/* just to give a better message than "syntax error" */ 
</span>                <a href="pl_gram.y.html#LN63"><span class='Ref_to_Proto'>current_token_is_not_variable</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3422"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end while (tok=yylex())==',' &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* 
     * We read an extra, non-comma token from yylex(), so push it 
     * back onto the input stream 
     */ 
</span>    <a href="pl_scanner.c.html#LN484"><span class='Ref_to_Func'>plpgsql_push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3422"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN278"><span class='Ref_to_Member'>dtype</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN61"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ROW</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN280"><span class='Ref_to_Member'>refname</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><span class='String'>"*internal*"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN281"><span class='Ref_to_Member'>lineno</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3416"><span class='Ref_to_Parameter'>initial_location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN284"><span class='Ref_to_Member'>rowtupdesc</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN291"><span class='Ref_to_Member'>nfields</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN292"><span class='Ref_to_Member'>fieldnames</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN293"><span class='Ref_to_Member'>varnos</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>) </span><span class='Operator'>* </span><a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>while</span> <span class='Parentheses'>(</span><span class='Operator'>--</span><a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a> <span class='Operator'>&GT;= </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN292"><span class='Ref_to_Member'>fieldnames</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="pl_gram.y.html#LN3419"><span class='Ref_To_Local'>fieldnames</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>]; 
</span>        <a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN293"><span class='Ref_to_Member'>varnos</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="pl_gram.y.html#LN3420"><span class='Ref_To_Local'>varnos</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3418"><span class='Ref_To_Local'>nfields</span></a><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>} 
</span> 
    <a href="plpgsql.h.html#LN1079"><span class='Ref_to_Proto'>plpgsql_adddatum</span></a><span class='Parentheses'>((</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pl_gram.y.html#LN3421"><span class='Ref_To_Local'>row</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end read_into_scalar_list &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Convert a single scalar into a "row" list.  This is exactly 
 * like read_into_scalar_list except we never consume any input. 
 * 
 * Note: lineno could be computed from location, but since callers 
 * have it at hand already, we may as well pass it in. 
 */ 
</span><span class='Keyword'>static </span><a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a> <span class='Operator'>* 
</span><a name="LN3493"></a><span class='Declare_Function'>make_scalar_list1</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Declare_Parameter'>initial_name</span><span class='Delimiter'>, 
</span><a name="LN3494"></a>                  <a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>initial_datum</span><span class='Delimiter'>, 
</span><a name="LN3495"></a>                  <span class='Keyword'>int </span><span class='Declare_Parameter'>lineno</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3497"></a>    <a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a>     <span class='Operator'>*</span><span class='Declare_Local'>row</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN91"><span class='Ref_to_Proto'>check_assignable</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3494"><span class='Ref_to_Parameter'>initial_datum</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3495"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN278"><span class='Ref_to_Member'>dtype</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN61"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_ROW</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN280"><span class='Ref_to_Member'>refname</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><span class='String'>"*internal*"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN281"><span class='Ref_to_Member'>lineno</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3495"><span class='Ref_to_Parameter'>lineno</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN284"><span class='Ref_to_Member'>rowtupdesc</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN291"><span class='Ref_to_Member'>nfields</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN292"><span class='Ref_to_Member'>fieldnames</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN293"><span class='Ref_to_Member'>varnos</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>int</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN292"><span class='Ref_to_Member'>fieldnames</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="pl_gram.y.html#LN3493"><span class='Ref_to_Parameter'>initial_name</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN293"><span class='Ref_to_Member'>varnos</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="pl_gram.y.html#LN3494"><span class='Ref_to_Parameter'>initial_datum</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN198"><span class='Ref_to_Member'>dno</span></a><span class='Delimiter'>; 
</span> 
    <a href="plpgsql.h.html#LN1079"><span class='Ref_to_Proto'>plpgsql_adddatum</span></a><span class='Parentheses'>((</span><a href="plpgsql.h.html#LN195"><span class='Ref_to_Struct'>PLpgSQL_datum</span></a> <span class='Operator'>*</span><span class='Parentheses'>)</span><a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pl_gram.y.html#LN3497"><span class='Ref_To_Local'>row</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end make_scalar_list1 &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * When the PL/pgSQL parser expects to see a SQL statement, it is very 
 * liberal in what it accepts; for example, we often assume an 
 * unrecognized keyword is the beginning of a SQL statement. This 
 * avoids the need to duplicate parts of the SQL grammar in the 
 * PL/pgSQL grammar, but it means we can accept wildly malformed 
 * input. To try and catch some of the more obviously invalid input, 
 * we run the strings we expect to be SQL statements through the main 
 * SQL parser. 
 * 
 * We only invoke the raw parser (not the analyzer); this doesn't do 
 * any database access and does not check any semantic rules, it just 
 * checks for basic syntactic correctness. We do this here, rather 
 * than after parsing has finished, because a malformed SQL statement 
 * may cause the PL/pgSQL parser to become confused about statement 
 * borders. So it is best to bail out as early as we can. 
 * 
 * It is assumed that "stmt" represents a copy of the function source text 
 * beginning at offset "location", with leader text of length "leaderlen" 
 * (typically "SELECT ") prefixed to the source text.  We use this assumption 
 * to transpose any error cursor position back to the function source text. 
 * If no error cursor is provided, we'll just point at "location". 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3541"></a><span class='Declare_Function'>check_sql_expr</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>stmt</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>leaderlen</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3543"></a>    <a href="pl_gram.y.html#LN49"><span class='Ref_to_Typedef'>sql_error_callback_arg</span></a> <span class='Declare_Local'>cbarg</span><span class='Delimiter'>; 
</span><a name="LN3544"></a>    ErrorContextCallback  <span class='Declare_Local'>syntax_errcontext</span><span class='Delimiter'>; 
</span><a name="LN3545"></a>    <a href="../../../include/utils/palloc.h.html#LN35"><span class='Ref_to_Typedef'>MemoryContext</span></a> <span class='Declare_Local'>oldCxt</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pl_comp.c.html#LN51"><span class='Ref_to_Global_Var'>plpgsql_check_syntax</span></a><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN3543"><span class='Ref_To_Local'>cbarg</span></a><span class='Operator'>.</span><a href="pl_gram.y.html#LN51"><span class='Ref_to_Member'>location</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3541"><span class='Ref_to_Parameter'>location</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3543"><span class='Ref_To_Local'>cbarg</span></a><span class='Operator'>.</span><a href="pl_gram.y.html#LN52"><span class='Ref_to_Member'>leaderlen</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3541"><span class='Ref_to_Parameter'>leaderlen</span></a><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN3544"><span class='Ref_To_Local'>syntax_errcontext</span></a><span class='Operator'>.</span>callback <span class='Operator'>= </span><a href="pl_gram.y.html#LN102"><span class='Ref_to_Proto'>plpgsql_sql_error_callback</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3544"><span class='Ref_To_Local'>syntax_errcontext</span></a><span class='Operator'>.</span>arg <span class='Operator'>= &</span><a href="pl_gram.y.html#LN3543"><span class='Ref_To_Local'>cbarg</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3544"><span class='Ref_To_Local'>syntax_errcontext</span></a><span class='Operator'>.</span>previous <span class='Operator'>= </span><a href="../../../backend/utils/error/elog.c.html#LN87"><span class='Ref_to_Global_Var'>error_context_stack</span></a><span class='Delimiter'>; 
</span>    <a href="../../../backend/utils/error/elog.c.html#LN87"><span class='Ref_to_Global_Var'>error_context_stack</span></a> <span class='Operator'>= &</span><a href="pl_gram.y.html#LN3544"><span class='Ref_To_Local'>syntax_errcontext</span></a><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN3545"><span class='Ref_To_Local'>oldCxt</span></a> <span class='Operator'>= </span><a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="pl_comp.c.html#LN56"><span class='Ref_to_Global_Var'>plpgsql_compile_tmp_cxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="../../../backend/parser/parser.c.html#LN34"><span class='Ref_to_Func'>raw_parser</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3541"><span class='Ref_to_Parameter'>stmt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/utils/palloc.h.html#LN107"><span class='Ref_to_Func'>MemoryContextSwitchTo</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3545"><span class='Ref_To_Local'>oldCxt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Restore former ereport callback */ 
</span>    <a href="../../../backend/utils/error/elog.c.html#LN87"><span class='Ref_to_Global_Var'>error_context_stack</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3544"><span class='Ref_To_Local'>syntax_errcontext</span></a><span class='Operator'>.</span>previous<span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end check_sql_expr &raquo; </span> 
 
<span class='Keyword'>static void 
</span><a name="LN3567"></a><span class='Declare_Function'>plpgsql_sql_error_callback</span><span class='Parentheses'>(</span><span class='Keyword'>void </span><span class='Operator'>*</span><span class='Declare_Parameter'>arg</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3569"></a>    <a href="pl_gram.y.html#LN49"><span class='Ref_to_Typedef'>sql_error_callback_arg</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cbarg</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN49"><span class='Ref_to_Typedef'>sql_error_callback_arg</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pl_gram.y.html#LN3567"><span class='Ref_to_Parameter'>arg</span></a><span class='Delimiter'>; 
</span><a name="LN3570"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>errpos</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * First, set up internalerrposition to point to the start of the 
     * statement text within the function text.  Note this converts 
     * location (a byte offset) to a character number. 
     */ 
</span>    <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3569"><span class='Ref_To_Local'>cbarg</span></a><span class='Operator'>-&GT;</span><a href="pl_gram.y.html#LN51"><span class='Ref_to_Member'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * If the core parser provided an error position, transpose it. 
     * Note we are dealing with 1-based character numbers at this point. 
     */ 
</span>    <a href="pl_gram.y.html#LN3570"><span class='Ref_To_Local'>errpos</span></a> <span class='Operator'>= </span><a href="../../../backend/utils/error/elog.c.html#LN1255"><span class='Ref_to_Func'>geterrposition</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3570"><span class='Ref_To_Local'>errpos</span></a> <span class='Operator'>&GT; </span><a href="pl_gram.y.html#LN3569"><span class='Ref_To_Local'>cbarg</span></a><span class='Operator'>-&GT;</span><a href="pl_gram.y.html#LN52"><span class='Ref_to_Member'>leaderlen</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3586"></a>        <span class='Keyword'>int</span>     <span class='Declare_Local'>myerrpos</span> <span class='Operator'>= </span><a href="../../../backend/utils/error/elog.c.html#LN1272"><span class='Ref_to_Func'>getinternalerrposition</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3586"><span class='Ref_To_Local'>myerrpos</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>)</span>       <span class='Comment_Single_Line'>/* safety check */ 
</span>            <a href="../../../backend/utils/error/elog.c.html#LN1139"><span class='Ref_to_Func'>internalerrposition</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3586"><span class='Ref_To_Local'>myerrpos</span></a> <span class='Operator'>+ </span><a href="pl_gram.y.html#LN3570"><span class='Ref_To_Local'>errpos</span></a> <span class='Operator'>- </span><a href="pl_gram.y.html#LN3569"><span class='Ref_To_Local'>cbarg</span></a><span class='Operator'>-&GT;</span><a href="pl_gram.y.html#LN52"><span class='Ref_to_Member'>leaderlen</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* In any case, flush errposition --- we want internalerrpos only */ 
</span>    <a href="../../../backend/utils/error/elog.c.html#LN1123"><span class='Ref_to_Func'>errposition</span></a><span class='Parentheses'>(</span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end plpgsql_sql_error_callback &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Parse a SQL datatype name and produce a PLpgSQL_type structure. 
 * 
 * The heavy lifting is done elsewhere.  Here we are only concerned 
 * with setting up an errcontext link that will let us give an error 
 * cursor pointing into the plpgsql function source, if necessary. 
 * This is handled the same as in check_sql_expr(), and we likewise 
 * expect that the given string is a copy from the source text. 
 */ 
</span><span class='Keyword'>static </span><a href="plpgsql.h.html#LN175"><span class='Ref_to_Struct'>PLpgSQL_type</span></a> <span class='Operator'>* 
</span><a name="LN3606"></a><span class='Declare_Function'>parse_datatype</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>string</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3608"></a>    <a href="../../../include/postgres_ext.h.html#LN30"><span class='Ref_to_Typedef'>Oid</span></a>         <span class='Declare_Local'>type_id</span><span class='Delimiter'>; 
</span><a name="LN3609"></a>    <a href="../../../include/c.h.html#LN255"><span class='Ref_to_Typedef'>int32</span></a>       <span class='Declare_Local'>typmod</span><span class='Delimiter'>; 
</span><a name="LN3610"></a>    <a href="pl_gram.y.html#LN49"><span class='Ref_to_Typedef'>sql_error_callback_arg</span></a> <span class='Declare_Local'>cbarg</span><span class='Delimiter'>; 
</span><a name="LN3611"></a>    ErrorContextCallback  <span class='Declare_Local'>syntax_errcontext</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN3610"><span class='Ref_To_Local'>cbarg</span></a><span class='Operator'>.</span><a href="pl_gram.y.html#LN51"><span class='Ref_to_Member'>location</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3606"><span class='Ref_to_Parameter'>location</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3610"><span class='Ref_To_Local'>cbarg</span></a><span class='Operator'>.</span><a href="pl_gram.y.html#LN52"><span class='Ref_to_Member'>leaderlen</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN3611"><span class='Ref_To_Local'>syntax_errcontext</span></a><span class='Operator'>.</span>callback <span class='Operator'>= </span><a href="pl_gram.y.html#LN102"><span class='Ref_to_Proto'>plpgsql_sql_error_callback</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3611"><span class='Ref_To_Local'>syntax_errcontext</span></a><span class='Operator'>.</span>arg <span class='Operator'>= &</span><a href="pl_gram.y.html#LN3610"><span class='Ref_To_Local'>cbarg</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3611"><span class='Ref_To_Local'>syntax_errcontext</span></a><span class='Operator'>.</span>previous <span class='Operator'>= </span><a href="../../../backend/utils/error/elog.c.html#LN87"><span class='Ref_to_Global_Var'>error_context_stack</span></a><span class='Delimiter'>; 
</span>    <a href="../../../backend/utils/error/elog.c.html#LN87"><span class='Ref_to_Global_Var'>error_context_stack</span></a> <span class='Operator'>= &</span><a href="pl_gram.y.html#LN3611"><span class='Ref_To_Local'>syntax_errcontext</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Let the main parser try to parse it under standard SQL rules */ 
</span>    <a href="../../../include/parser/parse_type.h.html#LN50"><span class='Ref_to_Proto'>parseTypeString</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3606"><span class='Ref_to_Parameter'>string</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3608"><span class='Ref_To_Local'>type_id</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3609"><span class='Ref_To_Local'>typmod</span></a><span class='Delimiter'>, </span><span class='Boolean'>false</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Restore former ereport callback */ 
</span>    <a href="../../../backend/utils/error/elog.c.html#LN87"><span class='Ref_to_Global_Var'>error_context_stack</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3611"><span class='Ref_To_Local'>syntax_errcontext</span></a><span class='Operator'>.</span>previous<span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Okay, build a PLpgSQL_type data structure for it */ 
</span>    <span class='Control'>return</span> <a href="plpgsql.h.html#LN1069"><span class='Ref_to_Proto'>plpgsql_build_datatype</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3608"><span class='Ref_To_Local'>type_id</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3609"><span class='Ref_To_Local'>typmod</span></a><span class='Delimiter'>, 
</span>                                  <a href="pl_comp.c.html#LN53"><span class='Ref_to_Global_Var'>plpgsql_curr_compile</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN824"><span class='Ref_to_Member'>fn_input_collation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end parse_datatype &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Check block starting and ending labels match. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3636"></a><span class='Declare_Function'>check_labels</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>start_label</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>end_label</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>end_location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3636"><span class='Ref_to_Parameter'>end_label</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pl_gram.y.html#LN3636"><span class='Ref_to_Parameter'>start_label</span></a><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"end label \"%s\" specified for unlabelled block"</span><span class='Delimiter'>, 
</span>                            <a href="pl_gram.y.html#LN3636"><span class='Ref_to_Parameter'>end_label</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3636"><span class='Ref_to_Parameter'>end_location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3636"><span class='Ref_to_Parameter'>start_label</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3636"><span class='Ref_to_Parameter'>end_label</span></a><span class='Parentheses'>) </span><span class='Operator'>!= </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"end label \"%s\" differs from block's label \"%s\""</span><span class='Delimiter'>, 
</span>                            <a href="pl_gram.y.html#LN3636"><span class='Ref_to_Parameter'>end_label</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3636"><span class='Ref_to_Parameter'>start_label</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3636"><span class='Ref_to_Parameter'>end_location</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end check_labels &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Read the arguments (if any) for a cursor, followed by the until token 
 * 
 * If cursor has no args, just swallow the until token and return NULL. 
 * If it does have args, we expect to see "( arg [, arg ...] )" followed 
 * by the until token, where arg may be a plain expression, or a named 
 * parameter assignment of the form argname := expr. Consume all that and 
 * return a SELECT query that evaluates the expression(s) (without the outer 
 * parens). 
 */ 
</span><span class='Keyword'>static </span><a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>* 
</span><a name="LN3667"></a><span class='Declare_Function'>read_cursor_args</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>cursor</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>until</span><span class='Delimiter'>, </span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>expected</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3669"></a>    <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>expr</span><span class='Delimiter'>; 
</span><a name="LN3670"></a>    <a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a> <span class='Operator'>*</span><span class='Declare_Local'>row</span><span class='Delimiter'>; 
</span><a name="LN3671"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tok</span><span class='Delimiter'>; 
</span><a name="LN3672"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>argc</span><span class='Delimiter'>; 
</span><a name="LN3673"></a>    <span class='Keyword'>char</span>      <span class='Operator'>**</span><span class='Declare_Local'>argv</span><span class='Delimiter'>; 
</span><a name="LN3674"></a>    <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a> <span class='Declare_Local'>ds</span><span class='Delimiter'>; 
</span><a name="LN3675"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>sqlstart</span> <span class='Operator'>= </span><span class='String'>"SELECT "</span><span class='Delimiter'>; 
</span><a name="LN3676"></a>    <span class='Keyword'>bool</span>        <span class='Declare_Local'>any_named</span> <span class='Operator'>= </span><span class='Boolean'>false</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN3671"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3667"><span class='Ref_to_Parameter'>cursor</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN265"><span class='Ref_to_Member'>cursor_explicit_argrow</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* No arguments expected */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3671"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='String'>'('</span><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cursor \"%s\" has no arguments"</span><span class='Delimiter'>, 
</span>                            <a href="pl_gram.y.html#LN3667"><span class='Ref_to_Parameter'>cursor</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN257"><span class='Ref_to_Member'>refname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3671"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>!= </span><a href="pl_gram.y.html#LN3667"><span class='Ref_to_Parameter'>until</span></a><span class='Parentheses'>) 
</span>            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>return</span> <span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Multi_Line'>/* Else better provide arguments */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3671"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>!= </span><span class='String'>'('</span><span class='Parentheses'>) 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cursor \"%s\" has arguments"</span><span class='Delimiter'>, 
</span>                        <a href="pl_gram.y.html#LN3667"><span class='Ref_to_Parameter'>cursor</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN257"><span class='Ref_to_Member'>refname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * Read the arguments, one by one. 
     */ 
</span>    <a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN276"><span class='Ref_to_Struct'>PLpgSQL_row</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="pl_comp.c.html#LN46"><span class='Ref_to_Global_Var'>plpgsql_Datums</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3667"><span class='Ref_to_Parameter'>cursor</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN265"><span class='Ref_to_Member'>cursor_explicit_argrow</span></a><span class='Delimiter'>]; 
</span>    <a href="pl_gram.y.html#LN3673"><span class='Ref_To_Local'>argv</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>**</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN291"><span class='Ref_to_Member'>nfields</span></a> <span class='Operator'>* </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><span class='Keyword'>char </span><span class='Operator'>*</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a> <span class='Operator'>&LT; </span><a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN291"><span class='Ref_to_Member'>nfields</span></a><span class='Delimiter'>; </span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3711"></a>        <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>item</span><span class='Delimiter'>; 
</span><a name="LN3712"></a>        <span class='Keyword'>int</span>     <span class='Declare_Local'>endtoken</span><span class='Delimiter'>; 
</span><a name="LN3713"></a>        <span class='Keyword'>int</span>     <span class='Declare_Local'>argpos</span><span class='Delimiter'>; 
</span><a name="LN3714"></a>        <span class='Keyword'>int</span>     <span class='Declare_Local'>tok1</span><span class='Delimiter'>, 
</span><a name="LN3715"></a>                <span class='Declare_Local'>tok2</span><span class='Delimiter'>; 
</span><a name="LN3716"></a>        <span class='Keyword'>int</span>     <span class='Declare_Local'>arglocation</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Check if it's a named parameter: "param := value" */ 
</span>        <a href="pl_scanner.c.html#LN553"><span class='Ref_to_Func'>plpgsql_peek2</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3714"><span class='Ref_To_Local'>tok1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3715"><span class='Ref_To_Local'>tok2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3716"><span class='Ref_To_Local'>arglocation</span></a><span class='Delimiter'>, </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3714"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>== </span><a href="../../../backend/replication/repl_gram.y.html#LN269"><span class='Ref_to_Global_Var'>IDENT</span></a> <span class='Operator'>&& </span><a href="pl_gram.y.html#LN3715"><span class='Ref_To_Local'>tok2</span></a> <span class='Operator'>== </span>COLON_EQUALS<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN3722"></a>            <span class='Keyword'>char</span>   <span class='Operator'>*</span><span class='Declare_Local'>argname</span><span class='Delimiter'>; 
</span><a name="LN3723"></a>            <a href="plpgsql.h.html#LN1009"><span class='Ref_to_Typedef'>IdentifierLookup</span></a> <span class='Declare_Local'>save_IdentifierLookup</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Read the argument name, ignoring any matching variable */ 
</span>            <a href="pl_gram.y.html#LN3723"><span class='Ref_To_Local'>save_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a><span class='Delimiter'>; 
</span>            <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1012"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_DECLARE</span></a><span class='Delimiter'>; 
</span>            yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <a href="pl_gram.y.html#LN3722"><span class='Ref_To_Local'>argname</span></a> <span class='Operator'>= </span>yylval<span class='Operator'>.</span>str<span class='Delimiter'>; 
</span>            <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3723"><span class='Ref_To_Local'>save_IdentifierLookup</span></a><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* Match argument name to cursor arguments */ 
</span>            <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3713"><span class='Ref_To_Local'>argpos</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pl_gram.y.html#LN3713"><span class='Ref_To_Local'>argpos</span></a> <span class='Operator'>&LT; </span><a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN291"><span class='Ref_to_Member'>nfields</span></a><span class='Delimiter'>; </span><a href="pl_gram.y.html#LN3713"><span class='Ref_To_Local'>argpos</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN292"><span class='Ref_to_Member'>fieldnames</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3713"><span class='Ref_To_Local'>argpos</span></a><span class='Delimiter'>], </span><a href="pl_gram.y.html#LN3722"><span class='Ref_To_Local'>argname</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                    <span class='Control'>break</span><span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3713"><span class='Ref_To_Local'>argpos</span></a> <span class='Operator'>== </span><a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN291"><span class='Ref_to_Member'>nfields</span></a><span class='Parentheses'>) 
</span>                <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                        <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"cursor \"%s\" has no argument named \"%s\""</span><span class='Delimiter'>, 
</span>                                <a href="pl_gram.y.html#LN3667"><span class='Ref_to_Parameter'>cursor</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN257"><span class='Ref_to_Member'>refname</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3722"><span class='Ref_To_Local'>argname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                         <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * Eat the ":=". We already peeked, so the error should never 
             * happen. 
             */ 
</span>            <a href="pl_gram.y.html#LN3715"><span class='Ref_To_Local'>tok2</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3715"><span class='Ref_To_Local'>tok2</span></a> <span class='Operator'>!= </span>COLON_EQUALS<span class='Parentheses'>) 
</span>                <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="pl_gram.y.html#LN3676"><span class='Ref_To_Local'>any_named</span></a> <span class='Operator'>= </span><span class='Boolean'>true</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tok1==IDENT&&tok2==CO... &raquo; </span> 
        <span class='Control'>else</span> 
            <a href="pl_gram.y.html#LN3713"><span class='Ref_To_Local'>argpos</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3673"><span class='Ref_To_Local'>argv</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3713"><span class='Ref_To_Local'>argpos</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"value for parameter \"%s\" of cursor \"%s\" specified more than once"</span><span class='Delimiter'>, 
</span>                            <a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN292"><span class='Ref_to_Member'>fieldnames</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3713"><span class='Ref_To_Local'>argpos</span></a><span class='Delimiter'>], </span><a href="pl_gram.y.html#LN3667"><span class='Ref_to_Parameter'>cursor</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN257"><span class='Ref_to_Member'>refname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3716"><span class='Ref_To_Local'>arglocation</span></a><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Read the value expression. To provide the user with meaningful 
         * parse error positions, we check the syntax immediately, instead of 
         * checking the final expression that may have the arguments 
         * reordered. Trailing whitespace must not be trimmed, because 
         * otherwise input of the form (param -- comment\n, param) would be 
         * translated into a form where the second parameter is commented 
         * out. 
         */ 
</span>        <a href="pl_gram.y.html#LN3711"><span class='Ref_To_Local'>item</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN64"><span class='Ref_to_Proto'>read_sql_construct</span></a><span class='Parentheses'>(</span><span class='String'>','</span><span class='Delimiter'>, </span><span class='String'>')'</span><span class='Delimiter'>, </span><span class='Number'>0</span><span class='Delimiter'>, 
</span>                                  <span class='String'>",\" or \")"</span><span class='Delimiter'>, 
</span>                                  <a href="pl_gram.y.html#LN3675"><span class='Ref_To_Local'>sqlstart</span></a><span class='Delimiter'>, 
</span>                                  <span class='Boolean'>true</span><span class='Delimiter'>, </span><span class='Boolean'>true</span><span class='Delimiter'>, 
</span>                                  <span class='Boolean'>false</span><span class='Delimiter'>, </span><span class='Comment_Single_Line'>/* do not trim */ 
</span>                                  <span class='Null_Value'>NULL</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3712"><span class='Ref_To_Local'>endtoken</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pl_gram.y.html#LN3673"><span class='Ref_To_Local'>argv</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3713"><span class='Ref_To_Local'>argpos</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="pl_gram.y.html#LN3711"><span class='Ref_To_Local'>item</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN222"><span class='Ref_to_Member'>query</span></a> <span class='Operator'>+ </span>strlen<span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3675"><span class='Ref_To_Local'>sqlstart</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3712"><span class='Ref_To_Local'>endtoken</span></a> <span class='Operator'>== </span><span class='String'>')'</span> <span class='Operator'>&& !</span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a> <span class='Operator'>== </span><a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN291"><span class='Ref_to_Member'>nfields</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>))</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"not enough arguments for cursor \"%s\""</span><span class='Delimiter'>, 
</span>                            <a href="pl_gram.y.html#LN3667"><span class='Ref_to_Parameter'>cursor</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN257"><span class='Ref_to_Member'>refname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3712"><span class='Ref_To_Local'>endtoken</span></a> <span class='Operator'>== </span><span class='String'>','</span> <span class='Operator'>&& </span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a> <span class='Operator'>== </span><a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN291"><span class='Ref_to_Member'>nfields</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>))</span> 
            <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                    <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too many arguments for cursor \"%s\""</span><span class='Delimiter'>, 
</span>                            <a href="pl_gram.y.html#LN3667"><span class='Ref_to_Parameter'>cursor</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN257"><span class='Ref_to_Member'>refname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                     <a href="pl_gram.y.html#LN55"><span class='Ref_to_Macro'>parser_errposition</span></a><span class='Parentheses'>(</span>yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for argc=0;argc&LT;row-&GT;nfie... &raquo; </span> 
 
    <span class='Comment_Multi_Line'>/* Make positional argument list */ 
</span>    <a href="../../../backend/lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3674"><span class='Ref_To_Local'>ds</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3674"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3675"><span class='Ref_To_Local'>sqlstart</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a> <span class='Operator'>&LT; </span><a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN291"><span class='Ref_to_Member'>nfields</span></a><span class='Delimiter'>; </span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3673"><span class='Ref_To_Local'>argv</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * Because named notation allows permutated argument lists, include 
         * the parameter name for meaningful runtime errors. 
         */ 
</span>        <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3674"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3673"><span class='Ref_To_Local'>argv</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a><span class='Delimiter'>]</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3676"><span class='Ref_To_Local'>any_named</span></a><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3674"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><span class='String'>" AS %s"</span><span class='Delimiter'>, 
</span>                             <a href="../../../include/utils/builtins.h.html#LN77"><span class='Ref_to_Proto'>quote_identifier</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN292"><span class='Ref_to_Member'>fieldnames</span></a><span class='Delimiter'>[</span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a><span class='Delimiter'>]</span><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3672"><span class='Ref_To_Local'>argc</span></a> <span class='Operator'>&LT; </span><a href="pl_gram.y.html#LN3670"><span class='Ref_To_Local'>row</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN291"><span class='Ref_to_Member'>nfields</span></a> <span class='Operator'>- </span><span class='Number'>1</span><span class='Parentheses'>) 
</span>            <a href="../../../bin/pg_waldump/compat.c.html#LN79"><span class='Ref_to_Func'>appendStringInfoString</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3674"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><span class='String'>", "</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <a href="../../../backend/replication/syncrep_scanner.l.html#LN76"><span class='Ref_to_Proto'>appendStringInfoChar</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3674"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><span class='String'>';'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <a href="pl_gram.y.html#LN3669"><span class='Ref_To_Local'>expr</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN34"><span class='Ref_to_Proto'>palloc0</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3669"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN220"><span class='Ref_to_Member'>dtype</span></a>         <span class='Operator'>= </span><a href="plpgsql.h.html#LN65"><span class='Ref_to_EnumConst'>PLPGSQL_DTYPE_EXPR</span></a><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3669"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN222"><span class='Ref_to_Member'>query</span></a>         <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3674"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3669"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN223"><span class='Ref_to_Member'>plan</span></a>          <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3669"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN224"><span class='Ref_to_Member'>paramnos</span></a>      <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3669"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN225"><span class='Ref_to_Member'>rwparam</span></a>       <span class='Operator'>= -</span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <a href="pl_gram.y.html#LN3669"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN231"><span class='Ref_to_Member'>ns</span></a>            <span class='Operator'>= </span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3674"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Next we'd better find the until token */ 
</span>    <a href="pl_gram.y.html#LN3671"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3671"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>!= </span><a href="pl_gram.y.html#LN3667"><span class='Ref_to_Parameter'>until</span></a><span class='Parentheses'>) 
</span>        <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>return</span> <a href="pl_gram.y.html#LN3669"><span class='Ref_To_Local'>expr</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end read_cursor_args &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Parse RAISE ... USING options 
 */ 
</span><span class='Keyword'>static </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>* 
</span><a name="LN3839"></a><span class='Declare_Function'>read_raise_options</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3841"></a>    <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a>       <span class='Operator'>*</span><span class='Declare_Local'>result</span> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><span class='Delimiter'>;;</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3845"></a>        <a href="plpgsql.h.html#LN723"><span class='Ref_to_Struct'>PLpgSQL_raise_option</span></a> <span class='Operator'>*</span><span class='Declare_Local'>opt</span><span class='Delimiter'>; 
</span><a name="LN3846"></a>        <span class='Keyword'>int</span>     <span class='Declare_Local'>tok</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>((</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>())</span> <span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"unexpected end of function definition"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN723"><span class='Ref_to_Struct'>PLpgSQL_raise_option</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN723"><span class='Ref_to_Struct'>PLpgSQL_raise_option</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                           K_ERRCODE<span class='Delimiter'>, </span><span class='String'>"errcode"</span><span class='Parentheses'>))</span> 
            <a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN725"><span class='Ref_to_Member'>opt_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN146"><span class='Ref_to_EnumConst'>PLPGSQL_RAISEOPTION_ERRCODE</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                K_MESSAGE<span class='Delimiter'>, </span><span class='String'>"message"</span><span class='Parentheses'>))</span> 
            <a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN725"><span class='Ref_to_Member'>opt_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN147"><span class='Ref_to_EnumConst'>PLPGSQL_RAISEOPTION_MESSAGE</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                K_DETAIL<span class='Delimiter'>, </span><span class='String'>"detail"</span><span class='Parentheses'>))</span> 
            <a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN725"><span class='Ref_to_Member'>opt_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN148"><span class='Ref_to_EnumConst'>PLPGSQL_RAISEOPTION_DETAIL</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                K_HINT<span class='Delimiter'>, </span><span class='String'>"hint"</span><span class='Parentheses'>))</span> 
            <a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN725"><span class='Ref_to_Member'>opt_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN149"><span class='Ref_to_EnumConst'>PLPGSQL_RAISEOPTION_HINT</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                K_COLUMN<span class='Delimiter'>, </span><span class='String'>"column"</span><span class='Parentheses'>))</span> 
            <a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN725"><span class='Ref_to_Member'>opt_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN150"><span class='Ref_to_EnumConst'>PLPGSQL_RAISEOPTION_COLUMN</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                K_CONSTRAINT<span class='Delimiter'>, </span><span class='String'>"constraint"</span><span class='Parentheses'>))</span> 
            <a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN725"><span class='Ref_to_Member'>opt_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN151"><span class='Ref_to_EnumConst'>PLPGSQL_RAISEOPTION_CONSTRAINT</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                K_DATATYPE<span class='Delimiter'>, </span><span class='String'>"datatype"</span><span class='Parentheses'>))</span> 
            <a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN725"><span class='Ref_to_Member'>opt_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN152"><span class='Ref_to_EnumConst'>PLPGSQL_RAISEOPTION_DATATYPE</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                K_TABLE<span class='Delimiter'>, </span><span class='String'>"table"</span><span class='Parentheses'>))</span> 
            <a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN725"><span class='Ref_to_Member'>opt_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN153"><span class='Ref_to_EnumConst'>PLPGSQL_RAISEOPTION_TABLE</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN59"><span class='Ref_to_Proto'>tok_is_keyword</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span>yylval<span class='Delimiter'>, 
</span>                                K_SCHEMA<span class='Delimiter'>, </span><span class='String'>"schema"</span><span class='Parentheses'>))</span> 
            <a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN725"><span class='Ref_to_Member'>opt_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN154"><span class='Ref_to_EnumConst'>PLPGSQL_RAISEOPTION_SCHEMA</span></a><span class='Delimiter'>; 
</span>        <span class='Control'>else</span> 
            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"unrecognized RAISE statement option"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>= </span>yylex<span class='Parentheses'>()</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>!= </span><span class='String'>'='</span> <span class='Operator'>&& </span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>!= </span>COLON_EQUALS<span class='Parentheses'>) 
</span>            <a href="../../../../contrib/seg/segscan.l.html#LN51"><span class='Ref_to_Func'>yyerror</span></a><span class='Parentheses'>(</span><span class='String'>"syntax error, expected \"=\""</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN726"><span class='Ref_to_Member'>expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN76"><span class='Ref_to_Proto'>read_sql_expression2</span></a><span class='Parentheses'>(</span><span class='String'>','</span><span class='Delimiter'>, </span><span class='String'>';'</span><span class='Delimiter'>, </span><span class='String'>", or ;"</span><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <a href="pl_gram.y.html#LN3841"><span class='Ref_To_Local'>result</span></a> <span class='Operator'>= </span><a href="../../../backend/nodes/list.c.html#LN126"><span class='Ref_to_Func'>lappend</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3841"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3845"><span class='Ref_To_Local'>opt</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3846"><span class='Ref_To_Local'>tok</span></a> <span class='Operator'>== </span><span class='String'>';'</span><span class='Parentheses'>) 
</span>            <span class='Control'>break</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end for ;; &raquo; </span> 
 
    <span class='Control'>return</span> <a href="pl_gram.y.html#LN3841"><span class='Ref_To_Local'>result</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end read_raise_options &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Check that the number of parameter placeholders in the message matches the 
 * number of parameters passed to it, if a message was given. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN3903"></a><span class='Declare_Function'>check_raise_parameters</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN709"><span class='Ref_to_Struct'>PLpgSQL_stmt_raise</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>stmt</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3905"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>cp</span><span class='Delimiter'>; 
</span><a name="LN3906"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>expected_nparams</span> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3903"><span class='Ref_to_Parameter'>stmt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN715"><span class='Ref_to_Member'>message</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3905"><span class='Ref_To_Local'>cp</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3903"><span class='Ref_to_Parameter'>stmt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN715"><span class='Ref_to_Member'>message</span></a><span class='Delimiter'>; </span><span class='Operator'>*</span><a href="pl_gram.y.html#LN3905"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>; </span><a href="pl_gram.y.html#LN3905"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3905"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>[</span><span class='Number'>0</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'%'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* ignore literal % characters */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3905"><span class='Ref_To_Local'>cp</span></a><span class='Delimiter'>[</span><span class='Number'>1</span><span class='Delimiter'>] </span><span class='Operator'>== </span><span class='String'>'%'</span><span class='Parentheses'>) 
</span>                <a href="pl_gram.y.html#LN3905"><span class='Ref_To_Local'>cp</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>            <span class='Control'>else</span> 
                <a href="pl_gram.y.html#LN3906"><span class='Ref_To_Local'>expected_nparams</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3906"><span class='Ref_To_Local'>expected_nparams</span></a> <span class='Operator'>&LT; </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3903"><span class='Ref_to_Parameter'>stmt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN716"><span class='Ref_to_Member'>params</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too many parameters specified for RAISE"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3906"><span class='Ref_To_Local'>expected_nparams</span></a> <span class='Operator'>&GT; </span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3903"><span class='Ref_to_Parameter'>stmt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN716"><span class='Ref_to_Member'>params</span></a><span class='Parentheses'>))</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"too few parameters specified for RAISE"</span><span class='Parentheses'>)))</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end check_raise_parameters &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Fix up CASE statement 
 */ 
</span><span class='Keyword'>static </span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>* 
</span><a name="LN3937"></a><span class='Declare_Function'>make_case</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Delimiter'>, </span><a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>t_expr</span><span class='Delimiter'>, 
</span><a name="LN3938"></a>          <a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>case_when_list</span><span class='Delimiter'>, </span><a href="../../../include/nodes/pg_list.h.html#LN44"><span class='Ref_to_Struct'>List</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>else_stmts</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN3940"></a>    <a href="plpgsql.h.html#LN481"><span class='Ref_to_Struct'>PLpgSQL_stmt_case</span></a>   <span class='Operator'>*</span><span class='Declare_Local'>new</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>new</span> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN33"><span class='Ref_to_Proto'>palloc</span></a><span class='Parentheses'>(</span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN481"><span class='Ref_to_Struct'>PLpgSQL_stmt_case</span></a><span class='Parentheses'>))</span><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN483"><span class='Ref_to_Member'>cmd_type</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN87"><span class='Ref_to_EnumConst'>PLPGSQL_STMT_CASE</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN484"><span class='Ref_to_Member'>lineno</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN652"><span class='Ref_to_Func'>plpgsql_location_to_lineno</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3937"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN485"><span class='Ref_to_Member'>t_expr</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3937"><span class='Ref_to_Parameter'>t_expr</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN486"><span class='Ref_to_Member'>t_varno</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN487"><span class='Ref_to_Member'>case_when_list</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3938"><span class='Ref_to_Parameter'>case_when_list</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN488"><span class='Ref_to_Member'>have_else</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3938"><span class='Ref_to_Parameter'>else_stmts</span></a> <span class='Operator'>!= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Get rid of list-with-NULL hack */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="../../../include/nodes/pg_list.h.html#LN87"><span class='Ref_to_Func'>list_length</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3938"><span class='Ref_to_Parameter'>else_stmts</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>1</span> <span class='Operator'>&& </span><a href="../../../include/nodes/pg_list.h.html#LN110"><span class='Ref_to_Macro'>linitial</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3938"><span class='Ref_to_Parameter'>else_stmts</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>)</span> 
        <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN489"><span class='Ref_to_Member'>else_stmts</span></a> <span class='Operator'>= </span><a href="../../../include/nodes/pg_list.h.html#LN68"><span class='Ref_to_Const'>NIL</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>else</span> 
        <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN489"><span class='Ref_to_Member'>else_stmts</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3938"><span class='Ref_to_Parameter'>else_stmts</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * When test expression is present, we create a var for it and then 
     * convert all the WHEN expressions to "VAR IN (original_expression)". 
     * This is a bit klugy, but okay since we haven't yet done more than 
     * read the expressions as text.  (Note that previous parsing won't 
     * have complained if the WHEN ... THEN expression contained multiple 
     * comma-separated values.) 
     */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3937"><span class='Ref_to_Parameter'>t_expr</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN3965"></a>        <span class='Keyword'>char</span>    <span class='Declare_Local'>varname</span><span class='Delimiter'>[</span><span class='Number'>32</span><span class='Delimiter'>]; 
</span><a name="LN3966"></a>        <a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Declare_Local'>t_var</span><span class='Delimiter'>; 
</span><a name="LN3967"></a>        <a href="../../../include/nodes/pg_list.h.html#LN52"><span class='Ref_to_Struct'>ListCell</span></a> <span class='Operator'>*</span><span class='Declare_Local'>l</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* use a name unlikely to collide with any user names */ 
</span>        <a href="../../plperl/plperl.h.html#LN60"><span class='Ref_to_Macro'>snprintf</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3965"><span class='Ref_To_Local'>varname</span></a><span class='Delimiter'>, </span><span class='Keyword'>sizeof</span><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3965"><span class='Ref_To_Local'>varname</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><span class='String'>"__Case__Variable_%d__"</span><span class='Delimiter'>, 
</span>                 <a href="pl_comp.c.html#LN45"><span class='Ref_to_Global_Var'>plpgsql_nDatums</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* 
         * We don't yet know the result datatype of t_expr.  Build the 
         * variable as if it were INT4; we'll fix this at runtime if needed. 
         */ 
</span>        <a href="pl_gram.y.html#LN3966"><span class='Ref_To_Local'>t_var</span></a> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN253"><span class='Ref_to_Struct'>PLpgSQL_var</span></a> <span class='Operator'>*</span><span class='Parentheses'>) 
</span>            <a href="plpgsql.h.html#LN1071"><span class='Ref_to_Proto'>plpgsql_build_variable</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3965"><span class='Ref_To_Local'>varname</span></a><span class='Delimiter'>, </span><span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN484"><span class='Ref_to_Member'>lineno</span></a><span class='Delimiter'>, 
</span>                                   <a href="plpgsql.h.html#LN1069"><span class='Ref_to_Proto'>plpgsql_build_datatype</span></a><span class='Parentheses'>(</span><a href="../../../interfaces/ecpg/ecpglib/pg_type.h.html#LN24"><span class='Ref_to_Const'>INT4OID</span></a><span class='Delimiter'>, 
</span>                                                          <span class='Operator'>-</span><span class='Number'>1</span><span class='Delimiter'>, 
</span>                                                          <a href="../../../include/postgres_ext.h.html#LN33"><span class='Ref_to_Const'>InvalidOid</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                                   <span class='Boolean'>true</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>new</span><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN486"><span class='Ref_to_Member'>t_varno</span></a> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3966"><span class='Ref_To_Local'>t_var</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN256"><span class='Ref_to_Member'>dno</span></a><span class='Delimiter'>; 
</span> 
        <a href="../../../include/nodes/pg_list.h.html#LN160"><span class='Ref_to_Macro'>foreach</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3967"><span class='Ref_To_Local'>l</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3938"><span class='Ref_to_Parameter'>case_when_list</span></a><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN3987"></a>            <a href="plpgsql.h.html#LN495"><span class='Ref_to_Struct'>PLpgSQL_case_when</span></a> <span class='Operator'>*</span><span class='Declare_Local'>cwt</span> <span class='Operator'>= </span><span class='Parentheses'>(</span><a href="plpgsql.h.html#LN495"><span class='Ref_to_Struct'>PLpgSQL_case_when</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><a href="../../../include/nodes/pg_list.h.html#LN105"><span class='Ref_to_Macro'>lfirst</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3967"><span class='Ref_To_Local'>l</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN3988"></a>            <a href="plpgsql.h.html#LN218"><span class='Ref_to_Struct'>PLpgSQL_expr</span></a> <span class='Operator'>*</span><span class='Declare_Local'>expr</span> <span class='Operator'>= </span><a href="pl_gram.y.html#LN3987"><span class='Ref_To_Local'>cwt</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN498"><span class='Ref_to_Member'>expr</span></a><span class='Delimiter'>; 
</span><a name="LN3989"></a>            <a href="../../../include/lib/stringinfo.h.html#LN34"><span class='Ref_to_Struct'>StringInfoData</span></a>  <span class='Declare_Local'>ds</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* copy expression query without SELECT keyword (expr-&GT;query + 7) */ 
</span>            <span class='Debug'>Assert</span><span class='Parentheses'>(</span>strncmp<span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3988"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN222"><span class='Ref_to_Member'>query</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT "</span><span class='Delimiter'>, </span><span class='Number'>7</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* And do the string hacking */ 
</span>            <a href="../../../backend/lib/stringinfo.c.html#LN44"><span class='Ref_to_Func'>initStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3989"><span class='Ref_To_Local'>ds</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../../bin/pg_waldump/compat.c.html#LN69"><span class='Ref_to_Func'>appendStringInfo</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_gram.y.html#LN3989"><span class='Ref_To_Local'>ds</span></a><span class='Delimiter'>, </span><span class='String'>"SELECT \"%s\" IN (%s)"</span><span class='Delimiter'>, 
</span>                             <a href="pl_gram.y.html#LN3965"><span class='Ref_To_Local'>varname</span></a><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN3988"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN222"><span class='Ref_to_Member'>query</span></a> <span class='Operator'>+ </span><span class='Number'>7</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3988"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN222"><span class='Ref_to_Member'>query</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <a href="pl_gram.y.html#LN3988"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN222"><span class='Ref_to_Member'>query</span></a> <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3989"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Comment_Multi_Line'>/* Adjust expr's namespace to include the case variable */ 
</span>            <a href="pl_gram.y.html#LN3988"><span class='Ref_To_Local'>expr</span></a><span class='Operator'>-&GT;</span><a href="plpgsql.h.html#LN231"><span class='Ref_to_Member'>ns</span></a> <span class='Operator'>= </span><a href="pl_funcs.c.html#LN81"><span class='Ref_to_Func'>plpgsql_ns_top</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
            <a href="../../../include/common/fe_memutils.h.html#LN37"><span class='Ref_to_Proto'>pfree</span></a><span class='Parentheses'>(</span><a href="pl_gram.y.html#LN3989"><span class='Ref_To_Local'>ds</span></a><span class='Operator'>.</span><a href="../../../include/lib/stringinfo.h.html#LN36"><span class='Ref_to_Member'>data</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if t_expr &raquo; </span> 
 
    <span class='Control'>return</span> <span class='Parentheses'>(</span><a href="plpgsql.h.html#LN364"><span class='Ref_to_Struct'>PLpgSQL_stmt</span></a> <span class='Operator'>*</span><span class='Parentheses'>) </span><span class='Control'>new</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end make_case &raquo; </span> 
</pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>