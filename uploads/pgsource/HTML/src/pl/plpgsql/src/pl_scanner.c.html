<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\pl\plpgsql\src\pl_scanner.c</title>
<LINK REL=StyleSheet HREF="../../../../C_Cpp_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\pl\plpgsql\src\pl_scanner.c</b></p></td>
<td align='right'>
Wed Jun 14 08:26:13 2017
</td></tr>
<tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
<span class='Comment_Multi_Line'>/*------------------------------------------------------------------------- 
 * 
 * pl_scanner.c 
 *    lexical scanning for PL/pgSQL 
 * 
 * 
 * Portions Copyright (c) 1996-2017, PostgreSQL Global Development Group 
 * Portions Copyright (c) 1994, Regents of the University of California 
 * 
 * 
 * IDENTIFICATION 
 *    src/pl/plpgsql/src/pl_scanner.c 
 * 
 *------------------------------------------------------------------------- 
 */ 
</span><span class='Keyword'>#include </span><span class='String'>"postgres.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"mb/pg_wchar.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"parser/scanner.h"</span> 
 
<span class='Keyword'>#include </span><span class='String'>"plpgsql.h"</span> 
<span class='Keyword'>#include </span><span class='String'>"pl_gram.h"</span>            <span class='Comment_Single_Line'>/* must be after parser/scanner.h */ 
</span> 
 
<a name="LN24"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>PG_KEYWORD</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>a</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>b</span><span class='Delimiter'>,</span><span class='Declare_Parameter'>c</span><span class='Parentheses'>) </span><span class='Delimiter'>{</span><a href="pl_scanner.c.html#LN24"><span class='Ref_to_Parameter'>a</span></a><span class='Delimiter'>,</span><a href="pl_scanner.c.html#LN24"><span class='Ref_to_Parameter'>b</span></a><span class='Delimiter'>,</span><a href="pl_scanner.c.html#LN24"><span class='Ref_to_Parameter'>c</span></a><span class='Delimiter'>}, 
</span> 
 
<span class='Comment_Multi_Line'>/* Klugy flag to tell scanner how to look up identifiers */ 
</span><a name="LN28"></a><a href="plpgsql.h.html#LN1009"><span class='Ref_to_Typedef'>IdentifierLookup</span></a> <span class='Declare_Var'>plpgsql_IdentifierLookup</span> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1011"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_NORMAL</span></a><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * A word about keywords: 
 * 
 * We keep reserved and unreserved keywords in separate arrays.  The 
 * reserved keywords are passed to the core scanner, so they will be 
 * recognized before (and instead of) any variable name.  Unreserved words 
 * are checked for separately, usually after determining that the identifier 
 * isn't a known variable name.  If plpgsql_IdentifierLookup is DECLARE then 
 * no variable names will be recognized, so the unreserved words always work. 
 * (Note in particular that this helps us avoid reserving keywords that are 
 * only needed in DECLARE sections.) 
 * 
 * In certain contexts it is desirable to prefer recognizing an unreserved 
 * keyword over recognizing a variable name.  In particular, at the start 
 * of a statement we should prefer unreserved keywords unless the statement 
 * looks like an assignment (i.e., first token is followed by ':=' or '['). 
 * This rule allows most statement-introducing keywords to be kept unreserved. 
 * (We still have to reserve initial keywords that might follow a block 
 * label, unfortunately, since the method used to determine if we are at 
 * start of statement doesn't recognize such cases.  We'd also have to 
 * reserve any keyword that could legitimately be followed by ':=' or '['.) 
 * Some additional cases are handled in pl_gram.y using tok_is_keyword(). 
 * 
 * We try to avoid reserving more keywords than we have to; but there's 
 * little point in not reserving a word if it's reserved in the core grammar. 
 * Currently, the following words are reserved here but not in the core: 
 * BEGIN BY DECLARE EXECUTE FOREACH IF LOOP STRICT WHILE 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Lists of keyword (name, token-value, category) entries. 
 * 
 * !!WARNING!!: These lists must be sorted by ASCII name, because binary 
 *       search is used to locate entries. 
 * 
 * Be careful not to put the same word in both lists.  Also be sure that 
 * pl_gram.y's unreserved_keyword production agrees with the second list. 
 */ 
</span> 
<a name="LN69"></a><span class='Keyword'>static const </span><a href="../../../include/common/keywords.h.html#LN23"><span class='Ref_to_Struct'>ScanKeyword</span></a> <span class='Declare_Var'>reserved_keywords</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"all"</span><span class='Delimiter'>, </span>K_ALL<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"begin"</span><span class='Delimiter'>, </span>K_BEGIN<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"by"</span><span class='Delimiter'>, </span>K_BY<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"case"</span><span class='Delimiter'>, </span>K_CASE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"declare"</span><span class='Delimiter'>, </span>K_DECLARE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"else"</span><span class='Delimiter'>, </span>K_ELSE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"end"</span><span class='Delimiter'>, </span>K_END<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"execute"</span><span class='Delimiter'>, </span>K_EXECUTE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"for"</span><span class='Delimiter'>, </span>K_FOR<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"foreach"</span><span class='Delimiter'>, </span>K_FOREACH<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"from"</span><span class='Delimiter'>, </span>K_FROM<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"if"</span><span class='Delimiter'>, </span>K_IF<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"in"</span><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN1294"><span class='Ref_to_Global_Var'>K_IN</span></a><span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"into"</span><span class='Delimiter'>, </span><a href="pl_gram.y.html#LN2106"><span class='Ref_to_Global_Var'>K_INTO</span></a><span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"loop"</span><span class='Delimiter'>, </span>K_LOOP<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"not"</span><span class='Delimiter'>, </span>K_NOT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"null"</span><span class='Delimiter'>, </span>K_NULL<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"or"</span><span class='Delimiter'>, </span>K_OR<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"strict"</span><span class='Delimiter'>, </span>K_STRICT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"then"</span><span class='Delimiter'>, </span>K_THEN<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"to"</span><span class='Delimiter'>, </span>K_TO<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"using"</span><span class='Delimiter'>, </span>K_USING<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"when"</span><span class='Delimiter'>, </span>K_WHEN<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"while"</span><span class='Delimiter'>, </span>K_WHILE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN20"><span class='Ref_to_Const'>RESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>}; 
</span> 
<a name="LN96"></a><span class='Keyword'>static const int </span><span class='Declare_Var'>num_reserved_keywords</span> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN561"><span class='Ref_to_Macro'>lengthof</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN69"><span class='Ref_to_Global_Var'>reserved_keywords</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<a name="LN98"></a><span class='Keyword'>static const </span><a href="../../../include/common/keywords.h.html#LN23"><span class='Ref_to_Struct'>ScanKeyword</span></a> <span class='Declare_Var'>unreserved_keywords</span><span class='Delimiter'>[] </span><span class='Operator'>= </span><span class='Delimiter'>{ 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"absolute"</span><span class='Delimiter'>, </span>K_ABSOLUTE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"alias"</span><span class='Delimiter'>, </span>K_ALIAS<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"array"</span><span class='Delimiter'>, </span>K_ARRAY<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"assert"</span><span class='Delimiter'>, </span>K_ASSERT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"backward"</span><span class='Delimiter'>, </span>K_BACKWARD<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"close"</span><span class='Delimiter'>, </span>K_CLOSE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"collate"</span><span class='Delimiter'>, </span>K_COLLATE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"column"</span><span class='Delimiter'>, </span>K_COLUMN<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"column_name"</span><span class='Delimiter'>, </span>K_COLUMN_NAME<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"constant"</span><span class='Delimiter'>, </span>K_CONSTANT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"constraint"</span><span class='Delimiter'>, </span>K_CONSTRAINT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"constraint_name"</span><span class='Delimiter'>, </span>K_CONSTRAINT_NAME<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"continue"</span><span class='Delimiter'>, </span>K_CONTINUE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"current"</span><span class='Delimiter'>, </span>K_CURRENT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"cursor"</span><span class='Delimiter'>, </span>K_CURSOR<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"datatype"</span><span class='Delimiter'>, </span>K_DATATYPE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"debug"</span><span class='Delimiter'>, </span>K_DEBUG<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"default"</span><span class='Delimiter'>, </span>K_DEFAULT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"detail"</span><span class='Delimiter'>, </span>K_DETAIL<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"diagnostics"</span><span class='Delimiter'>, </span>K_DIAGNOSTICS<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"dump"</span><span class='Delimiter'>, </span>K_DUMP<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"elseif"</span><span class='Delimiter'>, </span>K_ELSIF<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"elsif"</span><span class='Delimiter'>, </span>K_ELSIF<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"errcode"</span><span class='Delimiter'>, </span>K_ERRCODE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"error"</span><span class='Delimiter'>, </span>K_ERROR<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"exception"</span><span class='Delimiter'>, </span>K_EXCEPTION<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"exit"</span><span class='Delimiter'>, </span>K_EXIT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"fetch"</span><span class='Delimiter'>, </span>K_FETCH<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"first"</span><span class='Delimiter'>, </span>K_FIRST<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"forward"</span><span class='Delimiter'>, </span>K_FORWARD<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"get"</span><span class='Delimiter'>, </span>K_GET<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"hint"</span><span class='Delimiter'>, </span>K_HINT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"import"</span><span class='Delimiter'>, </span>K_IMPORT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"info"</span><span class='Delimiter'>, </span>K_INFO<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"insert"</span><span class='Delimiter'>, </span>K_INSERT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"is"</span><span class='Delimiter'>, </span>K_IS<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"last"</span><span class='Delimiter'>, </span>K_LAST<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"log"</span><span class='Delimiter'>, </span>K_LOG<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"message"</span><span class='Delimiter'>, </span>K_MESSAGE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"message_text"</span><span class='Delimiter'>, </span>K_MESSAGE_TEXT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"move"</span><span class='Delimiter'>, </span>K_MOVE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"next"</span><span class='Delimiter'>, </span>K_NEXT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"no"</span><span class='Delimiter'>, </span>K_NO<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"notice"</span><span class='Delimiter'>, </span>K_NOTICE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"open"</span><span class='Delimiter'>, </span>K_OPEN<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"option"</span><span class='Delimiter'>, </span>K_OPTION<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"perform"</span><span class='Delimiter'>, </span>K_PERFORM<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"pg_context"</span><span class='Delimiter'>, </span>K_PG_CONTEXT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"pg_datatype_name"</span><span class='Delimiter'>, </span>K_PG_DATATYPE_NAME<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"pg_exception_context"</span><span class='Delimiter'>, </span>K_PG_EXCEPTION_CONTEXT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"pg_exception_detail"</span><span class='Delimiter'>, </span>K_PG_EXCEPTION_DETAIL<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"pg_exception_hint"</span><span class='Delimiter'>, </span>K_PG_EXCEPTION_HINT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"print_strict_params"</span><span class='Delimiter'>, </span>K_PRINT_STRICT_PARAMS<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"prior"</span><span class='Delimiter'>, </span>K_PRIOR<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"query"</span><span class='Delimiter'>, </span>K_QUERY<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"raise"</span><span class='Delimiter'>, </span>K_RAISE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"relative"</span><span class='Delimiter'>, </span>K_RELATIVE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"result_oid"</span><span class='Delimiter'>, </span>K_RESULT_OID<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"return"</span><span class='Delimiter'>, </span>K_RETURN<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"returned_sqlstate"</span><span class='Delimiter'>, </span>K_RETURNED_SQLSTATE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"reverse"</span><span class='Delimiter'>, </span>K_REVERSE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"row_count"</span><span class='Delimiter'>, </span>K_ROW_COUNT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"rowtype"</span><span class='Delimiter'>, </span>K_ROWTYPE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"schema"</span><span class='Delimiter'>, </span>K_SCHEMA<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"schema_name"</span><span class='Delimiter'>, </span>K_SCHEMA_NAME<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"scroll"</span><span class='Delimiter'>, </span>K_SCROLL<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"slice"</span><span class='Delimiter'>, </span>K_SLICE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"sqlstate"</span><span class='Delimiter'>, </span>K_SQLSTATE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"stacked"</span><span class='Delimiter'>, </span>K_STACKED<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"table"</span><span class='Delimiter'>, </span>K_TABLE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"table_name"</span><span class='Delimiter'>, </span>K_TABLE_NAME<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"type"</span><span class='Delimiter'>, </span>K_TYPE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"use_column"</span><span class='Delimiter'>, </span>K_USE_COLUMN<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"use_variable"</span><span class='Delimiter'>, </span>K_USE_VARIABLE<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"variable_conflict"</span><span class='Delimiter'>, </span>K_VARIABLE_CONFLICT<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span>    <a href="pl_scanner.c.html#LN24"><span class='Ref_to_Macro'>PG_KEYWORD</span></a><span class='Parentheses'>(</span><span class='String'>"warning"</span><span class='Delimiter'>, </span>K_WARNING<span class='Delimiter'>, </span><a href="../../../include/common/keywords.h.html#LN17"><span class='Ref_to_Const'>UNRESERVED_KEYWORD</span></a><span class='Parentheses'>) 
</span><span class='Delimiter'>}; 
</span> 
<a name="LN177"></a><span class='Keyword'>static const int </span><span class='Declare_Var'>num_unreserved_keywords</span> <span class='Operator'>= </span><a href="../../../include/c.h.html#LN561"><span class='Ref_to_Macro'>lengthof</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN98"><span class='Ref_to_Global_Var'>unreserved_keywords</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * This macro must recognize all tokens that can immediately precede a 
 * PL/pgSQL executable statement (that is, proc_sect or proc_stmt in the 
 * grammar).  Fortunately, there are not very many, so hard-coding in this 
 * fashion seems sufficient. 
 */ 
</span><a name="LN185"></a><span class='Keyword'>#define </span><span class='Declare_Macro'>AT_STMT_START</span><span class='Parentheses'>(</span><span class='Declare_Parameter'>prev_token</span><span class='Parentheses'>) </span><span class='Operator'>\ 
</span>    <span class='Parentheses'>((</span><a href="pl_scanner.c.html#LN185"><span class='Ref_to_Parameter'>prev_token</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='String'>';'</span> <span class='Operator'>|| \ 
</span>     <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN185"><span class='Ref_to_Parameter'>prev_token</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span>K_BEGIN <span class='Operator'>|| \ 
</span>     <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN185"><span class='Ref_to_Parameter'>prev_token</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span>K_THEN <span class='Operator'>|| \ 
</span>     <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN185"><span class='Ref_to_Parameter'>prev_token</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span>K_ELSE <span class='Operator'>|| \ 
</span>     <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN185"><span class='Ref_to_Parameter'>prev_token</span></a><span class='Parentheses'>) </span><span class='Operator'>== </span>K_LOOP<span class='Parentheses'>)</span> 
 
 
<span class='Comment_Multi_Line'>/* Auxiliary data about a token (other than the token type) */ 
</span><span class='Control'>typedef</span> <span class='Control'>struct</span> 
<span class='Delimiter'>{ 
</span><a name="LN196"></a>    <a href="../../../../contrib/cube/cubeparse.y.html#LN12"><span class='Ref_to_Const'>YYSTYPE</span></a>     <span class='Declare_Member'>lval</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* semantic information */ 
</span><a name="LN197"></a>    <a href="../../../include/parser/scanner.h.html#LN43"><span class='Ref_to_Const'>YYLTYPE</span></a>     <span class='Declare_Member'>lloc</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* offset in scanbuf */ 
</span><a name="LN198"></a>    <span class='Keyword'>int</span>         <span class='Declare_Member'>leng</span><span class='Delimiter'>;</span>           <span class='Comment_Single_Line'>/* length in bytes */ 
</span><a name="LN199"></a><span class='Delimiter'>} </span><span class='Declare_Typedef'>TokenAuxData</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Scanner working state.  At some point we might wish to fold all this 
 * into a YY_EXTRA struct.  For the moment, there is no need for plpgsql's 
 * lexer to be re-entrant, and the notational burden of passing a yyscanner 
 * pointer around is great enough to not want to do it without need. 
 */ 
</span> 
<span class='Comment_Multi_Line'>/* The stuff the core lexer needs */ 
</span><a name="LN209"></a><span class='Keyword'>static </span><a href="../../../include/parser/scanner.h.html#LN115"><span class='Ref_to_Typedef'>core_yyscan_t</span></a> <span class='Declare_Var'>yyscanner</span> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span><a name="LN210"></a><span class='Keyword'>static </span><a href="../../../include/parser/scanner.h.html#LN65"><span class='Ref_to_Struct'>core_yy_extra_type</span></a> <span class='Declare_Var'>core_yy</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* The original input string */ 
</span><a name="LN213"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>scanorig</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Current token's length (corresponds to plpgsql_yylval and plpgsql_yylloc) */ 
</span><a name="LN216"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>plpgsql_yyleng</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Current token's code (corresponds to plpgsql_yylval and plpgsql_yylloc) */ 
</span><a name="LN219"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>plpgsql_yytoken</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Token pushback stack */ 
</span><a name="LN222"></a><span class='Keyword'>#define </span><span class='Declare_Constant'>MAX_PUSHBACKS</span> <span class='Number'>4</span> 
 
<a name="LN224"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>num_pushbacks</span><span class='Delimiter'>; 
</span><a name="LN225"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>pushback_token</span><span class='Delimiter'>[</span><a href="pl_scanner.c.html#LN222"><span class='Ref_to_Const'>MAX_PUSHBACKS</span></a><span class='Delimiter'>]; 
</span><a name="LN226"></a><span class='Keyword'>static </span><a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Declare_Var'>pushback_auxdata</span><span class='Delimiter'>[</span><a href="pl_scanner.c.html#LN222"><span class='Ref_to_Const'>MAX_PUSHBACKS</span></a><span class='Delimiter'>]; 
</span> 
<span class='Comment_Multi_Line'>/* State for plpgsql_location_to_lineno() */ 
</span><a name="LN229"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>cur_line_start</span><span class='Delimiter'>; 
</span><a name="LN230"></a><span class='Keyword'>static const char </span><span class='Operator'>*</span><span class='Declare_Var'>cur_line_end</span><span class='Delimiter'>; 
</span><a name="LN231"></a><span class='Keyword'>static int</span>  <span class='Declare_Var'>cur_line_num</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Multi_Line'>/* Internal functions */ 
</span><a name="LN234"></a><span class='Keyword'>static int</span>  <span class='Declare_Prototype'>internal_yylex</span><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>auxdata</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN235"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>push_back_token</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>token</span><span class='Delimiter'>, </span><a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>auxdata</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span><a name="LN236"></a><span class='Keyword'>static void </span><span class='Declare_Prototype'>location_lineno_init</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * This is the yylex routine called from the PL/pgSQL grammar. 
 * It is a wrapper around the core lexer, with the ability to recognize 
 * PL/pgSQL variables and return them as special T_DATUM tokens.  If a 
 * word or compound word does not match any variable name, or if matching 
 * is turned off by plpgsql_IdentifierLookup, it is returned as 
 * T_WORD or T_CWORD respectively, or as an unreserved keyword if it 
 * matches one of those. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN249"></a><span class='Declare_Function'>plpgsql_yylex</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN251"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tok1</span><span class='Delimiter'>; 
</span><a name="LN252"></a>    <a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Declare_Local'>aux1</span><span class='Delimiter'>; 
</span><a name="LN253"></a>    <span class='Keyword'>const </span><a href="../../../include/common/keywords.h.html#LN23"><span class='Ref_to_Struct'>ScanKeyword</span></a> <span class='Operator'>*</span><span class='Declare_Local'>kw</span><span class='Delimiter'>; 
</span> 
    <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN234"><span class='Ref_to_Proto'>internal_yylex</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>== </span><a href="../../../backend/replication/repl_gram.y.html#LN269"><span class='Ref_to_Global_Var'>IDENT</span></a> <span class='Operator'>|| </span><a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>== </span>PARAM<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span><a name="LN258"></a>        <span class='Keyword'>int</span>         <span class='Declare_Local'>tok2</span><span class='Delimiter'>; 
</span><a name="LN259"></a>        <a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Declare_Local'>aux2</span><span class='Delimiter'>; 
</span> 
        <a href="pl_scanner.c.html#LN258"><span class='Ref_To_Local'>tok2</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN234"><span class='Ref_to_Proto'>internal_yylex</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN259"><span class='Ref_To_Local'>aux2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN258"><span class='Ref_To_Local'>tok2</span></a> <span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span><a name="LN264"></a>            <span class='Keyword'>int</span>         <span class='Declare_Local'>tok3</span><span class='Delimiter'>; 
</span><a name="LN265"></a>            <a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Declare_Local'>aux3</span><span class='Delimiter'>; 
</span> 
            <a href="pl_scanner.c.html#LN264"><span class='Ref_To_Local'>tok3</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN234"><span class='Ref_to_Proto'>internal_yylex</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN265"><span class='Ref_To_Local'>aux3</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN264"><span class='Ref_To_Local'>tok3</span></a> <span class='Operator'>== </span><a href="../../../backend/replication/repl_gram.y.html#LN269"><span class='Ref_to_Global_Var'>IDENT</span></a><span class='Parentheses'>) 
</span>            <span class='Delimiter'>{ 
</span><a name="LN270"></a>                <span class='Keyword'>int</span>         <span class='Declare_Local'>tok4</span><span class='Delimiter'>; 
</span><a name="LN271"></a>                <a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Declare_Local'>aux4</span><span class='Delimiter'>; 
</span> 
                <a href="pl_scanner.c.html#LN270"><span class='Ref_To_Local'>tok4</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN234"><span class='Ref_to_Proto'>internal_yylex</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN271"><span class='Ref_To_Local'>aux4</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN270"><span class='Ref_To_Local'>tok4</span></a> <span class='Operator'>== </span><span class='String'>'.'</span><span class='Parentheses'>) 
</span>                <span class='Delimiter'>{ 
</span><a name="LN276"></a>                    <span class='Keyword'>int</span>         <span class='Declare_Local'>tok5</span><span class='Delimiter'>; 
</span><a name="LN277"></a>                    <a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Declare_Local'>aux5</span><span class='Delimiter'>; 
</span> 
                    <a href="pl_scanner.c.html#LN276"><span class='Ref_To_Local'>tok5</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN234"><span class='Ref_to_Proto'>internal_yylex</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN277"><span class='Ref_To_Local'>aux5</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN276"><span class='Ref_To_Local'>tok5</span></a> <span class='Operator'>== </span><a href="../../../backend/replication/repl_gram.y.html#LN269"><span class='Ref_to_Global_Var'>IDENT</span></a><span class='Parentheses'>) 
</span>                    <span class='Delimiter'>{ 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="plpgsql.h.html#LN1063"><span class='Ref_to_Proto'>plpgsql_parse_tripword</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, 
</span>                                                   <a href="pl_scanner.c.html#LN265"><span class='Ref_To_Local'>aux3</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, 
</span>                                                   <a href="pl_scanner.c.html#LN277"><span class='Ref_To_Local'>aux5</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, 
</span>                                                   <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>wdatum<span class='Delimiter'>, 
</span>                                                   <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>cword<span class='Parentheses'>))</span> 
                            <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_DATUM<span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_CWORD<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                    <span class='Control'>else</span> 
                    <span class='Delimiter'>{ 
</span>                        <span class='Comment_Multi_Line'>/* not A.B.C, so just process A.B */ 
</span>                        <a href="pl_scanner.c.html#LN235"><span class='Ref_to_Proto'>push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN276"><span class='Ref_To_Local'>tok5</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN277"><span class='Ref_To_Local'>aux5</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <a href="pl_scanner.c.html#LN235"><span class='Ref_to_Proto'>push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN270"><span class='Ref_To_Local'>tok4</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN271"><span class='Ref_To_Local'>aux4</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="plpgsql.h.html#LN1061"><span class='Ref_to_Proto'>plpgsql_parse_dblword</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, 
</span>                                                  <a href="pl_scanner.c.html#LN265"><span class='Ref_To_Local'>aux3</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, 
</span>                                                  <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>wdatum<span class='Delimiter'>, 
</span>                                                  <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>cword<span class='Parentheses'>))</span> 
                            <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_DATUM<span class='Delimiter'>; 
</span>                        <span class='Control'>else</span> 
                            <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_CWORD<span class='Delimiter'>; 
</span>                    <span class='Delimiter'>} 
</span>                <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tok4=='.' &raquo; </span> 
                <span class='Control'>else</span> 
                <span class='Delimiter'>{ 
</span>                    <span class='Comment_Multi_Line'>/* not A.B.C, so just process A.B */ 
</span>                    <a href="pl_scanner.c.html#LN235"><span class='Ref_to_Proto'>push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN270"><span class='Ref_To_Local'>tok4</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN271"><span class='Ref_To_Local'>aux4</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="plpgsql.h.html#LN1061"><span class='Ref_to_Proto'>plpgsql_parse_dblword</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, 
</span>                                              <a href="pl_scanner.c.html#LN265"><span class='Ref_To_Local'>aux3</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, 
</span>                                              <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>wdatum<span class='Delimiter'>, 
</span>                                              <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>cword<span class='Parentheses'>))</span> 
                        <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_DATUM<span class='Delimiter'>; 
</span>                    <span class='Control'>else</span> 
                        <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_CWORD<span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tok3==IDENT &raquo; </span> 
            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* not A.B, so just process A */ 
</span>                <a href="pl_scanner.c.html#LN235"><span class='Ref_to_Proto'>push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN264"><span class='Ref_To_Local'>tok3</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN265"><span class='Ref_To_Local'>aux3</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <a href="pl_scanner.c.html#LN235"><span class='Ref_to_Proto'>push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN258"><span class='Ref_To_Local'>tok2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN259"><span class='Ref_To_Local'>aux2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="plpgsql.h.html#LN1059"><span class='Ref_to_Proto'>plpgsql_parse_word</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, 
</span>                                       <a href="pl_scanner.c.html#LN210"><span class='Ref_to_Global_Var'>core_yy</span></a><span class='Operator'>.</span><a href="../../../include/parser/scanner.h.html#LN71"><span class='Ref_to_Member'>scanbuf</span></a> <span class='Operator'>+ </span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN197"><span class='Ref_to_Member'>lloc</span></a><span class='Delimiter'>, 
</span>                                       <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>wdatum<span class='Delimiter'>, 
</span>                                       <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>word<span class='Parentheses'>))</span> 
                    <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_DATUM<span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>word<span class='Operator'>.</span>quoted <span class='Operator'>&& 
</span>                         <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN253"><span class='Ref_To_Local'>kw</span></a> <span class='Operator'>= </span><a href="../../../include/common/keywords.h.html#LN39"><span class='Ref_to_Proto'>ScanKeywordLookup</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>word<span class='Operator'>.</span>ident<span class='Delimiter'>, 
</span>                                                 <a href="pl_scanner.c.html#LN98"><span class='Ref_to_Global_Var'>unreserved_keywords</span></a><span class='Delimiter'>, 
</span>                                                 <a href="pl_scanner.c.html#LN177"><span class='Ref_to_Global_Var'>num_unreserved_keywords</span></a><span class='Parentheses'>)))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>keyword <span class='Operator'>= </span><a href="pl_scanner.c.html#LN253"><span class='Ref_To_Local'>kw</span></a><span class='Operator'>-&GT;</span><a href="../../../include/common/keywords.h.html#LN25"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>; 
</span>                    <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN253"><span class='Ref_To_Local'>kw</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_WORD<span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tok2=='.' &raquo; </span> 
        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            <span class='Comment_Multi_Line'>/* not A.B, so just process A */ 
</span>            <a href="pl_scanner.c.html#LN235"><span class='Ref_to_Proto'>push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN258"><span class='Ref_To_Local'>tok2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN259"><span class='Ref_To_Local'>aux2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
            <span class='Comment_Multi_Line'>/* 
             * If we are at start of statement, prefer unreserved keywords 
             * over variable names, unless the next token is assignment or 
             * '[', in which case prefer variable names.  (Note we need not 
             * consider '.' as the next token; that case was handled above, 
             * and we always prefer variable names in that case.)  If we are 
             * not at start of statement, always prefer variable names over 
             * unreserved keywords. 
             */ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN185"><span class='Ref_to_Macro'>AT_STMT_START</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN219"><span class='Ref_to_Global_Var'>plpgsql_yytoken</span></a><span class='Parentheses'>) </span><span class='Operator'>&& 
</span>                <span class='Operator'>!</span><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN258"><span class='Ref_To_Local'>tok2</span></a> <span class='Operator'>== </span><span class='String'>'='</span> <span class='Operator'>|| </span><a href="pl_scanner.c.html#LN258"><span class='Ref_To_Local'>tok2</span></a> <span class='Operator'>== </span>COLON_EQUALS <span class='Operator'>|| </span><a href="pl_scanner.c.html#LN258"><span class='Ref_To_Local'>tok2</span></a> <span class='Operator'>== </span><span class='String'>'['</span><span class='Parentheses'>))</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* try for unreserved keyword, then for variable name */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN210"><span class='Ref_to_Global_Var'>core_yy</span></a><span class='Operator'>.</span><a href="../../../include/parser/scanner.h.html#LN71"><span class='Ref_to_Member'>scanbuf</span></a><span class='Delimiter'>[</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN197"><span class='Ref_to_Member'>lloc</span></a><span class='Delimiter'>] </span><span class='Operator'>!= </span><span class='String'>'"'</span> <span class='Operator'>&& 
</span>                    <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN253"><span class='Ref_To_Local'>kw</span></a> <span class='Operator'>= </span><a href="../../../include/common/keywords.h.html#LN39"><span class='Ref_to_Proto'>ScanKeywordLookup</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, 
</span>                                            <a href="pl_scanner.c.html#LN98"><span class='Ref_to_Global_Var'>unreserved_keywords</span></a><span class='Delimiter'>, 
</span>                                            <a href="pl_scanner.c.html#LN177"><span class='Ref_to_Global_Var'>num_unreserved_keywords</span></a><span class='Parentheses'>)))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>keyword <span class='Operator'>= </span><a href="pl_scanner.c.html#LN253"><span class='Ref_To_Local'>kw</span></a><span class='Operator'>-&GT;</span><a href="../../../include/common/keywords.h.html#LN25"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>; 
</span>                    <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN253"><span class='Ref_To_Local'>kw</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="plpgsql.h.html#LN1059"><span class='Ref_to_Proto'>plpgsql_parse_word</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, 
</span>                                            <a href="pl_scanner.c.html#LN210"><span class='Ref_to_Global_Var'>core_yy</span></a><span class='Operator'>.</span><a href="../../../include/parser/scanner.h.html#LN71"><span class='Ref_to_Member'>scanbuf</span></a> <span class='Operator'>+ </span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN197"><span class='Ref_to_Member'>lloc</span></a><span class='Delimiter'>, 
</span>                                            <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>wdatum<span class='Delimiter'>, 
</span>                                            <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>word<span class='Parentheses'>))</span> 
                    <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_DATUM<span class='Delimiter'>; 
</span>                <span class='Control'>else</span> 
                    <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_WORD<span class='Delimiter'>; 
</span>            <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if AT_STMT_START(plpgsql... &raquo; </span> 
            <span class='Control'>else</span> 
            <span class='Delimiter'>{ 
</span>                <span class='Comment_Multi_Line'>/* try for variable name, then for unreserved keyword */ 
</span>                <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="plpgsql.h.html#LN1059"><span class='Ref_to_Proto'>plpgsql_parse_word</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, 
</span>                                       <a href="pl_scanner.c.html#LN210"><span class='Ref_to_Global_Var'>core_yy</span></a><span class='Operator'>.</span><a href="../../../include/parser/scanner.h.html#LN71"><span class='Ref_to_Member'>scanbuf</span></a> <span class='Operator'>+ </span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN197"><span class='Ref_to_Member'>lloc</span></a><span class='Delimiter'>, 
</span>                                       <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>wdatum<span class='Delimiter'>, 
</span>                                       <span class='Operator'>&</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>word<span class='Parentheses'>))</span> 
                    <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_DATUM<span class='Delimiter'>; 
</span>                <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>!</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>word<span class='Operator'>.</span>quoted <span class='Operator'>&& 
</span>                         <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN253"><span class='Ref_To_Local'>kw</span></a> <span class='Operator'>= </span><a href="../../../include/common/keywords.h.html#LN39"><span class='Ref_to_Proto'>ScanKeywordLookup</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>word<span class='Operator'>.</span>ident<span class='Delimiter'>, 
</span>                                                 <a href="pl_scanner.c.html#LN98"><span class='Ref_to_Global_Var'>unreserved_keywords</span></a><span class='Delimiter'>, 
</span>                                                 <a href="pl_scanner.c.html#LN177"><span class='Ref_to_Global_Var'>num_unreserved_keywords</span></a><span class='Parentheses'>)))</span> 
                <span class='Delimiter'>{ 
</span>                    <a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>keyword <span class='Operator'>= </span><a href="pl_scanner.c.html#LN253"><span class='Ref_To_Local'>kw</span></a><span class='Operator'>-&GT;</span><a href="../../../include/common/keywords.h.html#LN25"><span class='Ref_to_Member'>name</span></a><span class='Delimiter'>; 
</span>                    <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN253"><span class='Ref_To_Local'>kw</span></a><span class='Operator'>-&GT;</span><span class='Keyword'>value</span><span class='Delimiter'>; 
</span>                <span class='Delimiter'>} 
</span>                <span class='Control'>else</span> 
                    <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span>T_WORD<span class='Delimiter'>; 
</span>            <span class='Delimiter'>} 
</span>        <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end if tok1==IDENT||tok1==PA... &raquo; </span> 
    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * Not a potential plpgsql variable name, just return the data. 
         * 
         * Note that we also come through here if the grammar pushed back a 
         * T_DATUM, T_CWORD, T_WORD, or unreserved-keyword token returned by a 
         * previous lookup cycle; thus, pushbacks do not incur extra lookup 
         * work, since we'll never do the above code twice for the same token. 
         * This property also makes it safe to rely on the old value of 
         * plpgsql_yytoken in the is-this-start-of-statement test above. 
         */ 
</span>    <span class='Delimiter'>} 
</span> 
    plpgsql_yylval <span class='Operator'>= </span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Delimiter'>; 
</span>    plpgsql_yylloc <span class='Operator'>= </span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN197"><span class='Ref_to_Member'>lloc</span></a><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN216"><span class='Ref_to_Global_Var'>plpgsql_yyleng</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN252"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN198"><span class='Ref_to_Member'>leng</span></a><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN219"><span class='Ref_to_Global_Var'>plpgsql_yytoken</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="pl_scanner.c.html#LN251"><span class='Ref_To_Local'>tok1</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end plpgsql_yylex &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Internal yylex function.  This wraps the core lexer and adds one feature: 
 * a token pushback stack.  We also make a couple of trivial single-token 
 * translations from what the core lexer does to what we want, in particular 
 * interfacing from the core_YYSTYPE to YYSTYPE union. 
 */ 
</span><span class='Keyword'>static int 
</span><a name="LN423"></a><span class='Declare_Function'>internal_yylex</span><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>auxdata</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN425"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>token</span><span class='Delimiter'>; 
</span><a name="LN426"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>yytext</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN224"><span class='Ref_to_Global_Var'>num_pushbacks</span></a> <span class='Operator'>&GT; </span><span class='Number'>0</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pl_scanner.c.html#LN224"><span class='Ref_to_Global_Var'>num_pushbacks</span></a><span class='Operator'>--</span><span class='Delimiter'>; 
</span>        <a href="pl_scanner.c.html#LN425"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN225"><span class='Ref_to_Global_Var'>pushback_token</span></a><span class='Delimiter'>[</span><a href="pl_scanner.c.html#LN224"><span class='Ref_to_Global_Var'>num_pushbacks</span></a><span class='Delimiter'>]; 
</span>        <span class='Operator'>*</span><a href="pl_scanner.c.html#LN423"><span class='Ref_to_Parameter'>auxdata</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN226"><span class='Ref_to_Global_Var'>pushback_auxdata</span></a><span class='Delimiter'>[</span><a href="pl_scanner.c.html#LN224"><span class='Ref_to_Global_Var'>num_pushbacks</span></a><span class='Delimiter'>]; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <a href="pl_scanner.c.html#LN425"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>= </span><a href="../../../include/parser/scanner.h.html#LN124"><span class='Ref_to_Proto'>core_yylex</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN423"><span class='Ref_to_Parameter'>auxdata</span></a><span class='Operator'>-&GT;</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>core_yystype<span class='Delimiter'>, 
</span>                           <span class='Operator'>&</span><a href="pl_scanner.c.html#LN423"><span class='Ref_to_Parameter'>auxdata</span></a><span class='Operator'>-&GT;</span><a href="pl_scanner.c.html#LN197"><span class='Ref_to_Member'>lloc</span></a><span class='Delimiter'>, 
</span>                           <a href="pl_scanner.c.html#LN209"><span class='Ref_to_Global_Var'>yyscanner</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* remember the length of yytext before it gets changed */ 
</span>        <a href="pl_scanner.c.html#LN426"><span class='Ref_To_Local'>yytext</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN210"><span class='Ref_to_Global_Var'>core_yy</span></a><span class='Operator'>.</span><a href="../../../include/parser/scanner.h.html#LN71"><span class='Ref_to_Member'>scanbuf</span></a> <span class='Operator'>+ </span><a href="pl_scanner.c.html#LN423"><span class='Ref_to_Parameter'>auxdata</span></a><span class='Operator'>-&GT;</span><a href="pl_scanner.c.html#LN197"><span class='Ref_to_Member'>lloc</span></a><span class='Delimiter'>; 
</span>        <a href="pl_scanner.c.html#LN423"><span class='Ref_to_Parameter'>auxdata</span></a><span class='Operator'>-&GT;</span><a href="pl_scanner.c.html#LN198"><span class='Ref_to_Member'>leng</span></a> <span class='Operator'>= </span>strlen<span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN426"><span class='Ref_To_Local'>yytext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
        <span class='Comment_Multi_Line'>/* Check for &LT;&LT; &GT;&GT; and #, which the core considers operators */ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN425"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>== </span>Op<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN423"><span class='Ref_to_Parameter'>auxdata</span></a><span class='Operator'>-&GT;</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, </span><span class='String'>"&LT;&LT;"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="pl_scanner.c.html#LN425"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>= </span>LESS_LESS<span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN423"><span class='Ref_to_Parameter'>auxdata</span></a><span class='Operator'>-&GT;</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, </span><span class='String'>"&GT;&GT;"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="pl_scanner.c.html#LN425"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>= </span>GREATER_GREATER<span class='Delimiter'>; 
</span>            <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span>strcmp<span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN423"><span class='Ref_to_Parameter'>auxdata</span></a><span class='Operator'>-&GT;</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str<span class='Delimiter'>, </span><span class='String'>"#"</span><span class='Parentheses'>) </span><span class='Operator'>== </span><span class='Number'>0</span><span class='Parentheses'>)</span> 
                <a href="pl_scanner.c.html#LN425"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>= </span><span class='String'>'#'</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Comment_Multi_Line'>/* The core returns PARAM as ival, but we treat it like IDENT */ 
</span>        <span class='Control'>else</span> <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN425"><span class='Ref_To_Local'>token</span></a> <span class='Operator'>== </span>PARAM<span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <a href="pl_scanner.c.html#LN423"><span class='Ref_to_Parameter'>auxdata</span></a><span class='Operator'>-&GT;</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a><span class='Operator'>.</span>str <span class='Operator'>= </span><a href="../../../include/common/fe_memutils.h.html#LN32"><span class='Ref_to_Proto'>pstrdup</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN426"><span class='Ref_To_Local'>yytext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>}</span><span class='Auto_Annotations'> &laquo; end else &raquo; </span> 
 
    <span class='Control'>return</span> <a href="pl_scanner.c.html#LN425"><span class='Ref_To_Local'>token</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end internal_yylex &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Push back a token to be re-read by next internal_yylex() call. 
 */ 
</span><span class='Keyword'>static void 
</span><a name="LN469"></a><span class='Declare_Function'>push_back_token</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>token</span><span class='Delimiter'>, </span><a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Operator'>*</span><span class='Declare_Parameter'>auxdata</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN224"><span class='Ref_to_Global_Var'>num_pushbacks</span></a> <span class='Operator'>&GT;= </span><a href="pl_scanner.c.html#LN222"><span class='Ref_to_Const'>MAX_PUSHBACKS</span></a><span class='Parentheses'>) 
</span>        <a href="../../../backend/bootstrap/bootscanner.l.html#LN129"><span class='Ref_to_Proto'>elog</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, </span><span class='String'>"too many tokens pushed back"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN225"><span class='Ref_to_Global_Var'>pushback_token</span></a><span class='Delimiter'>[</span><a href="pl_scanner.c.html#LN224"><span class='Ref_to_Global_Var'>num_pushbacks</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><a href="pl_scanner.c.html#LN469"><span class='Ref_to_Parameter'>token</span></a><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN226"><span class='Ref_to_Global_Var'>pushback_auxdata</span></a><span class='Delimiter'>[</span><a href="pl_scanner.c.html#LN224"><span class='Ref_to_Global_Var'>num_pushbacks</span></a><span class='Delimiter'>] </span><span class='Operator'>= *</span><a href="pl_scanner.c.html#LN469"><span class='Ref_to_Parameter'>auxdata</span></a><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN224"><span class='Ref_to_Global_Var'>num_pushbacks</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Push back a single token to be re-read by next plpgsql_yylex() call. 
 * 
 * NOTE: this does not cause yylval or yylloc to "back up".  Also, it 
 * is not a good idea to push back a token code other than what you read. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN485"></a><span class='Declare_Function'>plpgsql_push_back_token</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>token</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN487"></a>    <a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Declare_Local'>auxdata</span><span class='Delimiter'>; 
</span> 
    <a href="pl_scanner.c.html#LN487"><span class='Ref_To_Local'>auxdata</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN196"><span class='Ref_to_Member'>lval</span></a> <span class='Operator'>= </span>plpgsql_yylval<span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN487"><span class='Ref_To_Local'>auxdata</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN197"><span class='Ref_to_Member'>lloc</span></a> <span class='Operator'>= </span>plpgsql_yylloc<span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN487"><span class='Ref_To_Local'>auxdata</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN198"><span class='Ref_to_Member'>leng</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN216"><span class='Ref_to_Global_Var'>plpgsql_yyleng</span></a><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN235"><span class='Ref_to_Proto'>push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN485"><span class='Ref_to_Parameter'>token</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN487"><span class='Ref_To_Local'>auxdata</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Tell whether a token is an unreserved keyword. 
 * 
 * (If it is, its lowercased form was returned as the token value, so we 
 * do not need to offer that data here.) 
 */ 
</span><span class='Keyword'>bool 
</span><a name="LN502"></a><span class='Declare_Function'>plpgsql_token_is_unreserved_keyword</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>token</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN504"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>i</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>for</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN504"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; </span><a href="pl_scanner.c.html#LN504"><span class='Ref_To_Local'>i</span></a> <span class='Operator'>&LT; </span><a href="pl_scanner.c.html#LN177"><span class='Ref_to_Global_Var'>num_unreserved_keywords</span></a><span class='Delimiter'>; </span><a href="pl_scanner.c.html#LN504"><span class='Ref_To_Local'>i</span></a><span class='Operator'>++</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN98"><span class='Ref_to_Global_Var'>unreserved_keywords</span></a><span class='Delimiter'>[</span><a href="pl_scanner.c.html#LN504"><span class='Ref_To_Local'>i</span></a><span class='Delimiter'>]</span><span class='Operator'>.</span><span class='Keyword'>value </span><span class='Operator'>== </span><a href="pl_scanner.c.html#LN502"><span class='Ref_to_Parameter'>token</span></a><span class='Parentheses'>) 
</span>            <span class='Control'>return</span> <span class='Boolean'>true</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>return</span> <span class='Boolean'>false</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Append the function text starting at startlocation and extending to 
 * (not including) endlocation onto the existing contents of "buf". 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN519"></a><span class='Declare_Function'>plpgsql_append_source_text</span><span class='Parentheses'>(</span><a href="../../../include/lib/stringinfo.h.html#LN42"><span class='Ref_to_Typedef'>StringInfo</span></a> <span class='Declare_Parameter'>buf</span><span class='Delimiter'>, 
</span><a name="LN520"></a>                           <span class='Keyword'>int </span><span class='Declare_Parameter'>startlocation</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Declare_Parameter'>endlocation</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Debug'>Assert</span><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN520"><span class='Ref_to_Parameter'>startlocation</span></a> <span class='Operator'>&LT;= </span><a href="pl_scanner.c.html#LN520"><span class='Ref_to_Parameter'>endlocation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="../../../include/lib/stringinfo.h.html#LN142"><span class='Ref_to_Proto'>appendBinaryStringInfo</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN519"><span class='Ref_to_Parameter'>buf</span></a><span class='Delimiter'>, </span><a href="pl_scanner.c.html#LN213"><span class='Ref_to_Global_Var'>scanorig</span></a> <span class='Operator'>+ </span><a href="pl_scanner.c.html#LN520"><span class='Ref_to_Parameter'>startlocation</span></a><span class='Delimiter'>, 
</span>                           <a href="pl_scanner.c.html#LN520"><span class='Ref_to_Parameter'>endlocation</span></a> <span class='Operator'>- </span><a href="pl_scanner.c.html#LN520"><span class='Ref_to_Parameter'>startlocation</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Peek one token ahead in the input stream.  Only the token code is 
 * made available, not any of the auxiliary info such as location. 
 * 
 * NB: no variable or unreserved keyword lookup is performed here, they will 
 * be returned as IDENT. Reserved keywords are resolved as usual. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN535"></a><span class='Declare_Function'>plpgsql_peek</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN537"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tok1</span><span class='Delimiter'>; 
</span><a name="LN538"></a>    <a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Declare_Local'>aux1</span><span class='Delimiter'>; 
</span> 
    <a href="pl_scanner.c.html#LN537"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN234"><span class='Ref_to_Proto'>internal_yylex</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN538"><span class='Ref_To_Local'>aux1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN235"><span class='Ref_to_Proto'>push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN537"><span class='Ref_To_Local'>tok1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN538"><span class='Ref_To_Local'>aux1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Control'>return</span> <a href="pl_scanner.c.html#LN537"><span class='Ref_To_Local'>tok1</span></a><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * Peek two tokens ahead in the input stream. The first token and its 
 * location in the query are returned in *tok1_p and *tok1_loc, second token 
 * and its location in *tok2_p and *tok2_loc. 
 * 
 * NB: no variable or unreserved keyword lookup is performed here, they will 
 * be returned as IDENT. Reserved keywords are resolved as usual. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN554"></a><span class='Declare_Function'>plpgsql_peek2</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>tok1_p</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>tok2_p</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>tok1_loc</span><span class='Delimiter'>, </span><span class='Keyword'>int </span><span class='Operator'>*</span><span class='Declare_Parameter'>tok2_loc</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN556"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>tok1</span><span class='Delimiter'>, 
</span><a name="LN557"></a>                <span class='Declare_Local'>tok2</span><span class='Delimiter'>; 
</span><a name="LN558"></a>    <a href="pl_scanner.c.html#LN194"><span class='Ref_to_Typedef'>TokenAuxData</span></a> <span class='Declare_Local'>aux1</span><span class='Delimiter'>, 
</span><a name="LN559"></a>                <span class='Declare_Local'>aux2</span><span class='Delimiter'>; 
</span> 
    <a href="pl_scanner.c.html#LN556"><span class='Ref_To_Local'>tok1</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN234"><span class='Ref_to_Proto'>internal_yylex</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN558"><span class='Ref_To_Local'>aux1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN557"><span class='Ref_To_Local'>tok2</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN234"><span class='Ref_to_Proto'>internal_yylex</span></a><span class='Parentheses'>(</span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN559"><span class='Ref_To_Local'>aux2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Operator'>*</span><a href="pl_scanner.c.html#LN554"><span class='Ref_to_Parameter'>tok1_p</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN556"><span class='Ref_To_Local'>tok1</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN554"><span class='Ref_to_Parameter'>tok1_loc</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="pl_scanner.c.html#LN554"><span class='Ref_to_Parameter'>tok1_loc</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN558"><span class='Ref_To_Local'>aux1</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN197"><span class='Ref_to_Member'>lloc</span></a><span class='Delimiter'>; 
</span>    <span class='Operator'>*</span><a href="pl_scanner.c.html#LN554"><span class='Ref_to_Parameter'>tok2_p</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN557"><span class='Ref_To_Local'>tok2</span></a><span class='Delimiter'>; 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN554"><span class='Ref_to_Parameter'>tok2_loc</span></a><span class='Parentheses'>) 
</span>        <span class='Operator'>*</span><a href="pl_scanner.c.html#LN554"><span class='Ref_to_Parameter'>tok2_loc</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN559"><span class='Ref_To_Local'>aux2</span></a><span class='Operator'>.</span><a href="pl_scanner.c.html#LN197"><span class='Ref_to_Member'>lloc</span></a><span class='Delimiter'>; 
</span> 
    <a href="pl_scanner.c.html#LN235"><span class='Ref_to_Proto'>push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN557"><span class='Ref_To_Local'>tok2</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN559"><span class='Ref_To_Local'>aux2</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN235"><span class='Ref_to_Proto'>push_back_token</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN556"><span class='Ref_To_Local'>tok1</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN558"><span class='Ref_To_Local'>aux1</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end plpgsql_peek2 &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * plpgsql_scanner_errposition 
 *      Report an error cursor position, if possible. 
 * 
 * This is expected to be used within an ereport() call.  The return value 
 * is a dummy (always 0, in fact). 
 * 
 * Note that this can only be used for messages emitted during initial 
 * parsing of a plpgsql function, since it requires the scanorig string 
 * to still be available. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN587"></a><span class='Declare_Function'>plpgsql_scanner_errposition</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN589"></a>    <span class='Keyword'>int</span>         <span class='Declare_Local'>pos</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN587"><span class='Ref_to_Parameter'>location</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="pl_scanner.c.html#LN213"><span class='Ref_to_Global_Var'>scanorig</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>;</span>               <span class='Comment_Single_Line'>/* no-op if location is unknown */ 
</span> 
    <span class='Comment_Multi_Line'>/* Convert byte offset to character number */ 
</span>    <a href="pl_scanner.c.html#LN589"><span class='Ref_To_Local'>pos</span></a> <span class='Operator'>= </span><a href="../../../include/mb/pg_wchar.h.html#LN529"><span class='Ref_to_Proto'>pg_mbstrlen_with_len</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN213"><span class='Ref_to_Global_Var'>scanorig</span></a><span class='Delimiter'>, </span><a href="pl_scanner.c.html#LN587"><span class='Ref_to_Parameter'>location</span></a><span class='Parentheses'>) </span><span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* And pass it to the ereport mechanism */ 
</span>    <span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) </span><a href="../../../backend/utils/error/elog.c.html#LN1139"><span class='Ref_to_Func'>internalerrposition</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN589"><span class='Ref_To_Local'>pos</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* Also pass the function body string */ 
</span>    <span class='Control'>return</span> <a href="../../../backend/utils/error/elog.c.html#LN1159"><span class='Ref_to_Func'>internalerrquery</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN213"><span class='Ref_to_Global_Var'>scanorig</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* 
 * plpgsql_yyerror 
 *      Report a lexer or grammar error. 
 * 
 * The message's cursor position refers to the current token (the one 
 * last returned by plpgsql_yylex()). 
 * This is OK for syntax error messages from the Bison parser, because Bison 
 * parsers report error as soon as the first unparsable token is reached. 
 * Beware of using yyerror for other purposes, as the cursor position might 
 * be misleading! 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN614"></a><span class='Declare_Function'>plpgsql_yyerror</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>message</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN616"></a>    <span class='Keyword'>char</span>       <span class='Operator'>*</span><span class='Declare_Local'>yytext</span> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN210"><span class='Ref_to_Global_Var'>core_yy</span></a><span class='Operator'>.</span><a href="../../../include/parser/scanner.h.html#LN71"><span class='Ref_to_Member'>scanbuf</span></a> <span class='Operator'>+ </span>plpgsql_yylloc<span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><span class='Operator'>*</span><a href="pl_scanner.c.html#LN616"><span class='Ref_To_Local'>yytext</span></a> <span class='Operator'>== </span><span class='String'>'\0'</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>        <span class='Comment_Multi_Line'>/* translator: %s is typically the translation of "syntax error" */ 
</span>                 <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"%s at end of input"</span><span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN614"><span class='Ref_to_Parameter'>message</span></a><span class='Parentheses'>))</span><span class='Delimiter'>, 
</span>                 <a href="pl_scanner.c.html#LN586"><span class='Ref_to_Func'>plpgsql_scanner_errposition</span></a><span class='Parentheses'>(</span>plpgsql_yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span>    <span class='Control'>else</span> 
    <span class='Delimiter'>{ 
</span>        <span class='Comment_Multi_Line'>/* 
         * If we have done any lookahead then flex will have restored the 
         * character after the end-of-token.  Zap it again so that we report 
         * only the single token here.  This modifies scanbuf but we no longer 
         * care about that. 
         */ 
</span>        <a href="pl_scanner.c.html#LN616"><span class='Ref_To_Local'>yytext</span></a><span class='Delimiter'>[</span><a href="pl_scanner.c.html#LN216"><span class='Ref_to_Global_Var'>plpgsql_yyleng</span></a><span class='Delimiter'>] </span><span class='Operator'>= </span><span class='String'>'\0'</span><span class='Delimiter'>; 
</span> 
        <a href="../../../include/utils/elog.h.html#LN121"><span class='Ref_to_Macro'>ereport</span></a><span class='Parentheses'>(</span><a href="../../../include/port/win32/sys/socket.h.html#LN22"><span class='Ref_to_Const'>ERROR</span></a><span class='Delimiter'>, 
</span>                <span class='Parentheses'>(</span><a href="../../../include/utils/elog.h.html#LN130"><span class='Ref_to_Proto'>errcode</span></a><span class='Parentheses'>(</span>ERRCODE_SYNTAX_ERROR<span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>        <span class='Comment_Multi_Line'>/* translator: first %s is typically the translation of "syntax error" */ 
</span>                 <a href="../../../backend/utils/error/elog.c.html#LN795"><span class='Ref_to_Func'>errmsg</span></a><span class='Parentheses'>(</span><span class='String'>"%s at or near \"%s\""</span><span class='Delimiter'>, </span>_<span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN614"><span class='Ref_to_Parameter'>message</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, </span><a href="pl_scanner.c.html#LN616"><span class='Ref_To_Local'>yytext</span></a><span class='Parentheses'>)</span><span class='Delimiter'>, 
</span>                 <a href="pl_scanner.c.html#LN586"><span class='Ref_to_Func'>plpgsql_scanner_errposition</span></a><span class='Parentheses'>(</span>plpgsql_yylloc<span class='Parentheses'>)))</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
}</span><span class='Auto_Annotations'> &laquo; end plpgsql_yyerror &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Given a location (a byte offset in the function source text), 
 * return a line number. 
 * 
 * We expect that this is typically called for a sequence of increasing 
 * location values, so optimize accordingly by tracking the endpoints 
 * of the "current" line. 
 */ 
</span><span class='Keyword'>int 
</span><a name="LN653"></a><span class='Declare_Function'>plpgsql_location_to_lineno</span><span class='Parentheses'>(</span><span class='Keyword'>int </span><span class='Declare_Parameter'>location</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span><a name="LN655"></a>    <span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Local'>loc</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN653"><span class='Ref_to_Parameter'>location</span></a> <span class='Operator'>&LT; </span><span class='Number'>0</span> <span class='Operator'>|| </span><a href="pl_scanner.c.html#LN213"><span class='Ref_to_Global_Var'>scanorig</span></a> <span class='Operator'>== </span><span class='Null_Value'>NULL</span><span class='Parentheses'>) 
</span>        <span class='Control'>return</span> <span class='Number'>0</span><span class='Delimiter'>;</span>               <span class='Comment_Single_Line'>/* garbage in, garbage out */ 
</span>    <a href="pl_scanner.c.html#LN655"><span class='Ref_To_Local'>loc</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN213"><span class='Ref_to_Global_Var'>scanorig</span></a> <span class='Operator'>+ </span><a href="pl_scanner.c.html#LN653"><span class='Ref_to_Parameter'>location</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* be correct, but not fast, if input location goes backwards */ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN655"><span class='Ref_To_Local'>loc</span></a> <span class='Operator'>&LT; </span><a href="pl_scanner.c.html#LN229"><span class='Ref_to_Global_Var'>cur_line_start</span></a><span class='Parentheses'>) 
</span>        <a href="pl_scanner.c.html#LN236"><span class='Ref_to_Proto'>location_lineno_init</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>while</span> <span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN230"><span class='Ref_to_Global_Var'>cur_line_end</span></a> <span class='Operator'>!= </span><span class='Null_Value'>NULL </span><span class='Operator'>&& </span><a href="pl_scanner.c.html#LN655"><span class='Ref_To_Local'>loc</span></a> <span class='Operator'>&GT; </span><a href="pl_scanner.c.html#LN230"><span class='Ref_to_Global_Var'>cur_line_end</span></a><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <a href="pl_scanner.c.html#LN229"><span class='Ref_to_Global_Var'>cur_line_start</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN230"><span class='Ref_to_Global_Var'>cur_line_end</span></a> <span class='Operator'>+ </span><span class='Number'>1</span><span class='Delimiter'>; 
</span>        <a href="pl_scanner.c.html#LN231"><span class='Ref_to_Global_Var'>cur_line_num</span></a><span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <a href="pl_scanner.c.html#LN230"><span class='Ref_to_Global_Var'>cur_line_end</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN229"><span class='Ref_to_Global_Var'>cur_line_start</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>return</span> <a href="pl_scanner.c.html#LN231"><span class='Ref_to_Global_Var'>cur_line_num</span></a><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end plpgsql_location_to_lineno &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* initialize or reset the state for plpgsql_location_to_lineno */ 
</span><span class='Keyword'>static void 
</span><a name="LN677"></a><span class='Declare_Function'>location_lineno_init</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <a href="pl_scanner.c.html#LN229"><span class='Ref_to_Global_Var'>cur_line_start</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN213"><span class='Ref_to_Global_Var'>scanorig</span></a><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN231"><span class='Ref_to_Global_Var'>cur_line_num</span></a> <span class='Operator'>= </span><span class='Number'>1</span><span class='Delimiter'>; 
</span> 
    <a href="pl_scanner.c.html#LN230"><span class='Ref_to_Global_Var'>cur_line_end</span></a> <span class='Operator'>= </span>strchr<span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN229"><span class='Ref_to_Global_Var'>cur_line_start</span></a><span class='Delimiter'>, </span><span class='String'>'\n'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
} 
</span> 
<span class='Comment_Multi_Line'>/* return the most recently computed lineno */ 
</span><span class='Keyword'>int 
</span><a name="LN687"></a><span class='Declare_Function'>plpgsql_latest_lineno</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Control'>return</span> <a href="pl_scanner.c.html#LN231"><span class='Ref_to_Global_Var'>cur_line_num</span></a><span class='Delimiter'>; 
} 
</span> 
 
<span class='Comment_Multi_Line'>/* 
 * Called before any actual parsing is done 
 * 
 * Note: the passed "str" must remain valid until plpgsql_scanner_finish(). 
 * Although it is not fed directly to flex, we need the original string 
 * to cite in error messages. 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN701"></a><span class='Declare_Function'>plpgsql_scanner_init</span><span class='Parentheses'>(</span><span class='Keyword'>const char </span><span class='Operator'>*</span><span class='Declare_Parameter'>str</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* Start up the core scanner */ 
</span>    <a href="pl_scanner.c.html#LN209"><span class='Ref_to_Global_Var'>yyscanner</span></a> <span class='Operator'>= </span><a href="../../../include/parser/scanner.h.html#LN119"><span class='Ref_to_Proto'>scanner_init</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN701"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>, </span><span class='Operator'>&</span><a href="pl_scanner.c.html#LN210"><span class='Ref_to_Global_Var'>core_yy</span></a><span class='Delimiter'>, 
</span>                             <a href="pl_scanner.c.html#LN69"><span class='Ref_to_Global_Var'>reserved_keywords</span></a><span class='Delimiter'>, </span><a href="pl_scanner.c.html#LN96"><span class='Ref_to_Global_Var'>num_reserved_keywords</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* 
     * scanorig points to the original string, which unlike the scanner's 
     * scanbuf won't be modified on-the-fly by flex.  Notice that although 
     * yytext points into scanbuf, we rely on being able to apply locations 
     * (offsets from string start) to scanorig as well. 
     */ 
</span>    <a href="pl_scanner.c.html#LN213"><span class='Ref_to_Global_Var'>scanorig</span></a> <span class='Operator'>= </span><a href="pl_scanner.c.html#LN701"><span class='Ref_to_Parameter'>str</span></a><span class='Delimiter'>; 
</span> 
    <span class='Comment_Multi_Line'>/* Other setup */ 
</span>    <a href="pl_scanner.c.html#LN28"><span class='Ref_to_Global_Var'>plpgsql_IdentifierLookup</span></a> <span class='Operator'>= </span><a href="plpgsql.h.html#LN1011"><span class='Ref_to_EnumConst'>IDENTIFIER_LOOKUP_NORMAL</span></a><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN219"><span class='Ref_to_Global_Var'>plpgsql_yytoken</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="pl_scanner.c.html#LN224"><span class='Ref_to_Global_Var'>num_pushbacks</span></a> <span class='Operator'>= </span><span class='Number'>0</span><span class='Delimiter'>; 
</span> 
    <a href="pl_scanner.c.html#LN236"><span class='Ref_to_Proto'>location_lineno_init</span></a><span class='Parentheses'>()</span><span class='Delimiter'>; 
}</span><span class='Auto_Annotations'> &laquo; end plpgsql_scanner_init &raquo; </span> 
 
<span class='Comment_Multi_Line'>/* 
 * Called after parsing is done to clean up after plpgsql_scanner_init() 
 */ 
</span><span class='Keyword'>void 
</span><a name="LN728"></a><span class='Declare_Function'>plpgsql_scanner_finish</span><span class='Parentheses'>(</span><span class='Keyword'>void</span><span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Comment_Multi_Line'>/* release storage */ 
</span>    <a href="../../../include/parser/scanner.h.html#LN123"><span class='Ref_to_Proto'>scanner_finish</span></a><span class='Parentheses'>(</span><a href="pl_scanner.c.html#LN209"><span class='Ref_to_Global_Var'>yyscanner</span></a><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Comment_Multi_Line'>/* avoid leaving any dangling pointers */ 
</span>    <a href="pl_scanner.c.html#LN209"><span class='Ref_to_Global_Var'>yyscanner</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
</span>    <a href="pl_scanner.c.html#LN213"><span class='Ref_to_Global_Var'>scanorig</span></a> <span class='Operator'>= </span><span class='Null_Value'>NULL</span><span class='Delimiter'>; 
} 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>