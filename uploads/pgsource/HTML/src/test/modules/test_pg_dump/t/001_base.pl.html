<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="Source Insight Version 4.00.0084 Built on 2017-02-26">
<meta charset='UTF-8' />
<style type='text/css'><!--
TD {background-color: #C0C0C0; font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.blurb {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 70%; }
.filename {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 120%; font-weight: bold; }
.dirname {font-family: 'Verdana', 'Arial', 'Helvetica', Sans-Serif; font-size: 100%; font-weight: bold; margin-top: 2.5em;}
--></style>
<title>src\test\modules\test_pg_dump\t\001_base.pl</title>
<LINK REL=StyleSheet HREF="../../../../../Perl_Source_File.css" TYPE='text/css' MEDIA=screen>
</head>
<body bgcolor=#ffffff>
<table bgcolor='#c0c0c0' width='100%'>
<tr><td><p class='filename'><b>src\test\modules\test_pg_dump\t\001_base.pl</b></p></td>
<td align='right'>
Wed Jun 14 08:26:14 2017
</td></tr>
<tr><td><a href='../../../../../Contents.html'>Contents</a></td></tr>
</table>
<pre>
</span><span class='Control'>use</span> strict<span class='Delimiter'>; 
</span><span class='Control'>use</span> warnings<span class='Delimiter'>; 
</span> 
<span class='Control'>use</span> Config<span class='Delimiter'>; 
</span><span class='Control'>use</span> PostgresNode<span class='Delimiter'>; 
</span><span class='Control'>use</span> TestLib<span class='Delimiter'>; 
</span><span class='Control'>use</span> Test<span class='Operator'>::</span>More<span class='Delimiter'>; 
</span> 
<span class='Keyword'>my </span>$tempdir       <span class='Operator'>= </span>TestLib<span class='Operator'>::</span><a href="../../../perl/TestLib.pm.html#LN135"><span class='Ref_to_Func'>tempdir</span></a><span class='Delimiter'>; 
</span><span class='Keyword'>my </span>$tempdir_short <span class='Operator'>= </span>TestLib<span class='Operator'>::</span><a href="../../../perl/TestLib.pm.html#LN145"><span class='Ref_to_Func'>tempdir_short</span></a><span class='Delimiter'>; 
</span> 
<span class='Comment_Single_Line'>############################################################### 
# This structure is based off of the src/bin/pg_dump/t test 
# suite. 
############################################################### 
# Definition of the pg_dump runs to make. 
# 
# Each of these runs are named and those names are used below 
# to define how each test should (or shouldn't) treat a result 
# from a given run. 
# 
# test_key indicates that a given run should simply use the same 
# set of like/unlike tests as another run, and which run that is. 
# 
# dump_cmd is the pg_dump command to run, which is an array of 
# the full command and arguments to run.  Note that this is run 
# using $node-&GT;command_ok(), so the port does not need to be 
# specified and is pulled from $PGPORT, which is set by the 
# PostgresNode system. 
# 
# restore_cmd is the pg_restore command to run, if any.  Note 
# that this should generally be used when the pg_dump goes to 
# a non-text file and that the restore can then be used to 
# generate a text file to run through the tests from the 
# non-text file generated by pg_dump. 
# 
# TODO: Have pg_restore actually restore to an independent 
# database and then pg_dump *that* database (or something along 
# those lines) to validate that part of the process. 
</span> 
<span class='Keyword'>my </span>%pgdump_runs <span class='Operator'>= </span><span class='Parentheses'>( 
</span>    binary_upgrade <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>,</span>                            <span class='String'>'--no-sync'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/binary_upgrade.sql"</span><span class='Delimiter'>, </span><span class='String'>'--schema-only'</span><span class='Delimiter'>, 
</span>            <span class='String'>'--binary-upgrade'</span><span class='Delimiter'>,</span>                   <span class='String'>'--dbname=postgres'</span><span class='Delimiter'>, ], }, 
</span>    clean <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>, </span><span class='String'>"--file=$tempdir/clean.sql"</span><span class='Delimiter'>, 
</span>            <span class='String'>'-c'</span><span class='Delimiter'>,</span>      <span class='String'>'--no-sync'</span><span class='Delimiter'>, 
</span>            <span class='String'>'--dbname=postgres'</span><span class='Delimiter'>, ], }, 
</span>    clean_if_exists <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>, 
</span>            <span class='String'>'--no-sync'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/clean_if_exists.sql"</span><span class='Delimiter'>, 
</span>            <span class='String'>'-c'</span><span class='Delimiter'>, 
</span>            <span class='String'>'--if-exists'</span><span class='Delimiter'>, 
</span>            <span class='String'>'--encoding=UTF8'</span><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'># no-op, just tests that option is accepted 
</span>            <span class='String'>'postgres'</span><span class='Delimiter'>, ], }, 
</span>    column_inserts <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>,</span>                            <span class='String'>'--no-sync'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/column_inserts.sql"</span><span class='Delimiter'>, </span><span class='String'>'-a'</span><span class='Delimiter'>, 
</span>            <span class='String'>'--column-inserts'</span><span class='Delimiter'>,</span>                   <span class='String'>'postgres'</span><span class='Delimiter'>, ], }, 
</span>    createdb <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>, 
</span>            <span class='String'>'--no-sync'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/createdb.sql"</span><span class='Delimiter'>, 
</span>            <span class='String'>'-C'</span><span class='Delimiter'>, 
</span>            <span class='String'>'-R'</span><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'># no-op, just for testing 
</span>            <span class='String'>'postgres'</span><span class='Delimiter'>, ], }, 
</span>    data_only <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>, 
</span>            <span class='String'>'--no-sync'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/data_only.sql"</span><span class='Delimiter'>, 
</span>            <span class='String'>'-a'</span><span class='Delimiter'>, 
</span>            <span class='String'>'-v'</span><span class='Delimiter'>,</span>    <span class='Comment_Single_Line'># no-op, just make sure it works 
</span>            <span class='String'>'postgres'</span><span class='Delimiter'>, ], }, 
</span>    defaults <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ </span><span class='String'>'pg_dump'</span><span class='Delimiter'>, </span><span class='String'>'-f'</span><span class='Delimiter'>, </span><span class='String'>"$tempdir/defaults.sql"</span><span class='Delimiter'>, </span><span class='String'>'postgres'</span><span class='Delimiter'>, ], 
</span>    <span class='Delimiter'>}, 
</span>    defaults_custom_format <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        test_key <span class='Operator'>=&GT; </span><span class='String'>'defaults'</span><span class='Delimiter'>, 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>, </span><span class='String'>'--no-sync'</span><span class='Delimiter'>, </span><span class='String'>'-Fc'</span><span class='Delimiter'>, </span><span class='String'>'-Z6'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/defaults_custom_format.dump"</span><span class='Delimiter'>, </span><span class='String'>'postgres'</span><span class='Delimiter'>, ], 
</span>        restore_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_restore'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/defaults_custom_format.sql"</span><span class='Delimiter'>, 
</span>            <span class='String'>"$tempdir/defaults_custom_format.dump"</span><span class='Delimiter'>, ], }, 
</span>    defaults_dir_format <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        test_key <span class='Operator'>=&GT; </span><span class='String'>'defaults'</span><span class='Delimiter'>, 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>, </span><span class='String'>'--no-sync'</span><span class='Delimiter'>, </span><span class='String'>'-Fd'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/defaults_dir_format"</span><span class='Delimiter'>, </span><span class='String'>'postgres'</span><span class='Delimiter'>, ], 
</span>        restore_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_restore'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/defaults_dir_format.sql"</span><span class='Delimiter'>, 
</span>            <span class='String'>"$tempdir/defaults_dir_format"</span><span class='Delimiter'>, ], }, 
</span>    defaults_parallel <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        test_key <span class='Operator'>=&GT; </span><span class='String'>'defaults'</span><span class='Delimiter'>, 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>, </span><span class='String'>'--no-sync'</span><span class='Delimiter'>, </span><span class='String'>'-Fd'</span><span class='Delimiter'>, </span><span class='String'>'-j2'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/defaults_parallel"</span><span class='Delimiter'>, </span><span class='String'>'postgres'</span><span class='Delimiter'>, ], 
</span>        restore_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_restore'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/defaults_parallel.sql"</span><span class='Delimiter'>, 
</span>            <span class='String'>"$tempdir/defaults_parallel"</span><span class='Delimiter'>, ], }, 
</span>    defaults_tar_format <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        test_key <span class='Operator'>=&GT; </span><span class='String'>'defaults'</span><span class='Delimiter'>, 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>, </span><span class='String'>'--no-sync'</span><span class='Delimiter'>, </span><span class='String'>'-Ft'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/defaults_tar_format.tar"</span><span class='Delimiter'>, </span><span class='String'>'postgres'</span><span class='Delimiter'>, ], 
</span>        restore_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_restore'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/defaults_tar_format.sql"</span><span class='Delimiter'>, 
</span>            <span class='String'>"$tempdir/defaults_tar_format.tar"</span><span class='Delimiter'>, ], }, 
</span>    pg_dumpall_globals <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dumpall'</span><span class='Delimiter'>,</span>                             <span class='String'>'--no-sync'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/pg_dumpall_globals.sql"</span><span class='Delimiter'>, </span><span class='String'>'-g'</span><span class='Delimiter'>, ], }, 
</span>    no_privs <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>,</span>                      <span class='String'>'--no-sync'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/no_privs.sql"</span><span class='Delimiter'>, </span><span class='String'>'-x'</span><span class='Delimiter'>, 
</span>            <span class='String'>'postgres'</span><span class='Delimiter'>, ], }, 
</span>    no_owner <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>,</span>                      <span class='String'>'--no-sync'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/no_owner.sql"</span><span class='Delimiter'>, </span><span class='String'>'-O'</span><span class='Delimiter'>, 
</span>            <span class='String'>'postgres'</span><span class='Delimiter'>, ], }, 
</span>    schema_only <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>, </span><span class='String'>'--no-sync'</span><span class='Delimiter'>, </span><span class='String'>"--file=$tempdir/schema_only.sql"</span><span class='Delimiter'>, 
</span>            <span class='String'>'-s'</span><span class='Delimiter'>, </span><span class='String'>'postgres'</span><span class='Delimiter'>, ], }, 
</span>    section_pre_data <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>,</span>                              <span class='String'>'--no-sync'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/section_pre_data.sql"</span><span class='Delimiter'>, </span><span class='String'>'--section=pre-data'</span><span class='Delimiter'>, 
</span>            <span class='String'>'postgres'</span><span class='Delimiter'>, ], }, 
</span>    section_data <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>,</span>                          <span class='String'>'--no-sync'</span><span class='Delimiter'>, 
</span>            <span class='String'>"--file=$tempdir/section_data.sql"</span><span class='Delimiter'>, </span><span class='String'>'--section=data'</span><span class='Delimiter'>, 
</span>            <span class='String'>'postgres'</span><span class='Delimiter'>, ], }, 
</span>    section_post_data <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        dump_cmd <span class='Operator'>=&GT; </span><span class='Delimiter'>[ 
</span>            <span class='String'>'pg_dump'</span><span class='Delimiter'>, </span><span class='String'>'--no-sync'</span><span class='Delimiter'>, </span><span class='String'>"--file=$tempdir/section_post_data.sql"</span><span class='Delimiter'>, 
</span>            <span class='String'>'--section=post-data'</span><span class='Delimiter'>, </span><span class='String'>'postgres'</span><span class='Delimiter'>, ], },</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Single_Line'>############################################################### 
# Definition of the tests to run. 
# 
# Each test is defined using the log message that will be used. 
# 
# A regexp should be defined for each test which provides the 
# basis for the test.  That regexp will be run against the output 
# file of each of the runs which the test is to be run against 
# and the success of the result will depend on if the regexp 
# result matches the expected 'like' or 'unlike' case. 
# 
# For each test, there are two sets of runs defined, one for 
# the 'like' tests and one for the 'unlike' tests.  'like' 
# essentially means "the regexp for this test must match the 
# output file".  'unlike' is the opposite. 
# 
# There are a few 'catch-all' tests which can be used to have 
# a single, simple, test to over a range of other tests.  For 
# example, there is a '^CREATE ' test, which is used for the 
# 'data-only' test as there should never be any kind of CREATE 
# statement in a 'data-only' run.  Without the catch-all, we 
# would have to list the 'data-only' run in each and every 
# 'CREATE xxxx' test, which would be a lot of additional tests. 
# 
# Note that it makes no sense for the same run to ever be listed 
# in both 'like' and 'unlike' categories. 
# 
# There can then be a 'create_sql' and 'create_order' for a 
# given test.  The 'create_sql' commands are collected up in 
# 'create_order' and then run against the database prior to any 
# of the pg_dump runs happening.  This is what "seeds" the 
# system with objects to be dumped out. 
# 
# Building of this hash takes a bit of time as all of the regexps 
# included in it are compiled.  This greatly improves performance 
# as the regexps are used for each run the test applies to. 
</span> 
<span class='Keyword'>my </span>%tests <span class='Operator'>= </span><span class='Parentheses'>(</span> 
    <span class='String'>'ALTER EXTENSION test_pg_dump'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        create_order <span class='Operator'>=&GT; </span>9<span class='Delimiter'>, 
</span>        create_sql <span class='Operator'>=&GT; 
</span><span class='String'>'ALTER EXTENSION test_pg_dump ADD TABLE regress_pg_dump_table_added;'</span><span class='Delimiter'>, 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QCREATE TABLE regress_pg_dump_table_added <span class='Parentheses'>(</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\Qcol1 integer NOT NULL,\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\Qcol2 integer\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>\</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'CREATE EXTENSION test_pg_dump'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        create_order <span class='Operator'>=&GT; </span>2<span class='Delimiter'>, 
</span>        create_sql   <span class='Operator'>=&GT; </span><span class='String'>'CREATE EXTENSION test_pg_dump;'</span><span class='Delimiter'>, 
</span>        regexp       <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QCREATE EXTENSION IF NOT EXISTS test_pg_dump WITH SCHEMA public<span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean            <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only      <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            binary_upgrade     <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'CREATE ROLE regress_dump_test_role'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        create_order <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>        create_sql   <span class='Operator'>=&GT; </span><span class='String'>'CREATE ROLE regress_dump_test_role;'</span><span class='Delimiter'>, 
</span>        regexp       <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^CREATE ROLE regress_dump_test_role;\n/m</span><span class='String'>, 
</span>        like         <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike       <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            binary_upgrade    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean             <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb          <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults          <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs          <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner          <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only       <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'CREATE SEQUENCE regress_pg_dump_table_col1_seq'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>                    <span class='Operator'>\</span>QCREATE SEQUENCE regress_pg_dump_table_col1_seq<span class='Operator'>\</span>E 
                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QAS integer\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QSTART WITH 1\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QINCREMENT BY 1\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QNO MINVALUE\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QNO MAXVALUE\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QCACHE 1;\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'CREATE TABLE regress_pg_dump_table_added'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        create_order <span class='Operator'>=&GT; </span>7<span class='Delimiter'>, 
</span>        create_sql <span class='Operator'>=&GT; 
</span><span class='String'>'CREATE TABLE regress_pg_dump_table_added (col1 int not null, col2 int);'</span><span class='Delimiter'>, 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QCREATE TABLE regress_pg_dump_table_added <span class='Parentheses'>(</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\Qcol1 integer NOT NULL,\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\Qcol2 integer\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>\</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'CREATE SEQUENCE regress_pg_dump_seq'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>                    <span class='Operator'>\</span>QCREATE SEQUENCE regress_pg_dump_seq<span class='Operator'>\</span>E 
                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QSTART WITH 1\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QINCREMENT BY 1\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QNO MINVALUE\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QNO MAXVALUE\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QCACHE 1;\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'SETVAL SEQUENCE regress_seq_dumpable'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        create_order <span class='Operator'>=&GT; </span>6<span class='Delimiter'>, 
</span>        create_sql   <span class='Operator'>=&GT; qq</span><span class='String'>{SELECT nextval('regress_seq_dumpable');}</span><span class='Delimiter'>, 
</span>        regexp       <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>setval<span class='Parentheses'>(</span><span class='String'>'regress_seq_dumpable'</span><span class='Delimiter'>, </span>1<span class='Delimiter'>, </span>true<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            data_only       <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'CREATE TABLE regress_pg_dump_table'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QCREATE TABLE regress_pg_dump_table <span class='Parentheses'>(</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\Qcol1 integer NOT NULL,\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\Qcol2 integer\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>\</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'CREATE ACCESS METHOD regress_test_am'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QCREATE ACCESS METHOD regress_test_am TYPE INDEX HANDLER bthandler<span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'COMMENT ON EXTENSION test_pg_dump'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QCOMMENT ON EXTENSION test_pg_dump <span class='Operator'>\</span>E 
            <span class='Operator'>\</span>QIS <span class='String'>'Test pg_dump with an extension'</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            binary_upgrade   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean            <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only      <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'GRANT SELECT regress_pg_dump_table_added pre-ALTER EXTENSION'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        create_order <span class='Operator'>=&GT; </span>8<span class='Delimiter'>, 
</span>        create_sql <span class='Operator'>=&GT; 
</span><span class='String'>'GRANT SELECT ON regress_pg_dump_table_added TO regress_dump_test_role;'</span><span class='Delimiter'>, 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QGRANT SELECT ON TABLE regress_pg_dump_table_added TO regress_dump_test_role<span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'REVOKE SELECT regress_pg_dump_table_added post-ALTER EXTENSION'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        create_order <span class='Operator'>=&GT; </span>10<span class='Delimiter'>, 
</span>        create_sql <span class='Operator'>=&GT; 
</span><span class='String'>'REVOKE SELECT ON regress_pg_dump_table_added FROM regress_dump_test_role;'</span><span class='Delimiter'>, 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QREVOKE SELECT ON TABLE regress_pg_dump_table_added FROM regress_dump_test_role<span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            binary_upgrade   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean            <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only      <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'GRANT SELECT ON TABLE regress_pg_dump_table'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>true<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QGRANT SELECT ON TABLE regress_pg_dump_table TO regress_dump_test_role<span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>false<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xms<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'GRANT SELECT(col1) ON regress_pg_dump_table'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>true<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QGRANT SELECT<span class='Parentheses'>(</span>col1<span class='Parentheses'>) </span>ON TABLE regress_pg_dump_table TO PUBLIC<span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>false<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xms<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'GRANT SELECT(col2) ON regress_pg_dump_table TO regress_dump_test_role'</span> <span class='Operator'>=&GT; 
</span>      <span class='Delimiter'>{ </span>create_order <span class='Operator'>=&GT; </span>4<span class='Delimiter'>, 
</span>        create_sql   <span class='Operator'>=&GT; </span><span class='String'>'GRANT SELECT(col2) ON regress_pg_dump_table 
</span>                           TO regress_dump_test_role<span class='Delimiter'>;</span><span class='String'>', 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QGRANT SELECT<span class='Parentheses'>(</span>col2<span class='Parentheses'>) </span>ON TABLE regress_pg_dump_table TO regress_dump_test_role<span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            binary_upgrade   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean            <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only      <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'GRANT USAGE ON regress_pg_dump_table_col1_seq TO regress_dump_test_role'</span> 
      <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        create_order <span class='Operator'>=&GT; </span>5<span class='Delimiter'>, 
</span>        create_sql <span class='Operator'>=&GT; </span><span class='String'>'GRANT USAGE ON SEQUENCE regress_pg_dump_table_col1_seq 
</span>                           TO regress_dump_test_role<span class='Delimiter'>;</span><span class='String'>', 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QGRANT USAGE ON SEQUENCE regress_pg_dump_table_col1_seq TO regress_dump_test_role<span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            binary_upgrade   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean            <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only      <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'GRANT USAGE ON regress_pg_dump_seq TO regress_dump_test_role'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QGRANT USAGE ON SEQUENCE regress_pg_dump_seq TO regress_dump_test_role<span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'REVOKE SELECT(col1) ON regress_pg_dump_table'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        create_order <span class='Operator'>=&GT; </span>3<span class='Delimiter'>, 
</span>        create_sql   <span class='Operator'>=&GT; </span><span class='String'>'REVOKE SELECT(col1) ON regress_pg_dump_table 
</span>                           FROM PUBLIC<span class='Delimiter'>;</span><span class='String'>', 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QREVOKE SELECT<span class='Parentheses'>(</span>col1<span class='Parentheses'>) </span>ON TABLE regress_pg_dump_table FROM PUBLIC<span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            binary_upgrade   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean            <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only      <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
 <span class='Comment_Single_Line'># Objects included in extension part of a schema created by this extension */ 
</span>    <span class='String'>'CREATE TABLE regress_pg_dump_schema.test_table'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QCREATE TABLE test_table <span class='Parentheses'>(</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\Qcol1 integer,\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\Qcol2 integer\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>\</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'GRANT SELECT ON regress_pg_dump_schema.test_table'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>true<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QGRANT SELECT ON TABLE test_table TO regress_dump_test_role<span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>false<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xms<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'CREATE SEQUENCE regress_pg_dump_schema.test_seq'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>                    <span class='Operator'>\</span>QCREATE SEQUENCE test_seq<span class='Operator'>\</span>E 
                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QSTART WITH 1\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QINCREMENT BY 1\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QNO MINVALUE\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QNO MAXVALUE\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QCACHE 1;\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'GRANT USAGE ON regress_pg_dump_schema.test_seq'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>true<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QGRANT USAGE ON SEQUENCE test_seq TO regress_dump_test_role<span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>false<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xms<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'CREATE TYPE regress_pg_dump_schema.test_type'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>                    <span class='Operator'>\</span>QCREATE TYPE test_type AS <span class='Parentheses'>(</span><span class='Operator'>\</span>E 
                    <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\Qcol1 integer\E 
</span>                    <span class='Operator'>\</span>n<span class='Operator'>\</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'GRANT USAGE ON regress_pg_dump_schema.test_type'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>true<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QGRANT ALL ON TYPE test_type TO regress_dump_test_role<span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>false<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xms<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'CREATE FUNCTION regress_pg_dump_schema.test_func'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QCREATE FUNCTION test_func<span class='Parentheses'>() </span>RETURNS integer<span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QLANGUAGE sql\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'GRANT ALL ON regress_pg_dump_schema.test_func'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>true<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QGRANT ALL ON FUNCTION test_func<span class='Parentheses'>() </span>TO regress_dump_test_role<span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>false<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xms<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'CREATE AGGREGATE regress_pg_dump_schema.test_agg'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QCREATE AGGREGATE test_agg<span class='Parentheses'>(</span>smallint<span class='Parentheses'>) (</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QSFUNC = int2_sum,\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\QSTYPE = bigint\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>\</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='String'>'GRANT ALL ON regress_pg_dump_schema.test_agg'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>true<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QGRANT ALL ON FUNCTION test_agg<span class='Parentheses'>(</span>smallint<span class='Parentheses'>) </span>TO regress_dump_test_role<span class='Delimiter'>;</span><span class='Operator'>\</span>E<span class='Operator'>\</span>n 
            <span class='Operator'>\</span>QSELECT pg_catalog<span class='Operator'>.</span>binary_upgrade_set_record_init_privs<span class='Parentheses'>(</span>false<span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>/</span>xms<span class='Delimiter'>, 
</span>        like   <span class='Operator'>=&GT; </span><span class='Delimiter'>{ </span>binary_upgrade <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            clean              <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists    <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs           <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only        <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, }, 
</span> 
    <span class='Comment_Single_Line'># Objects not included in extension, part of schema created by extension 
</span>    <span class='String'>'CREATE TABLE regress_pg_dump_schema.external_tab'</span> <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>        create_order <span class='Operator'>=&GT; </span>4<span class='Delimiter'>, 
</span>        create_sql   <span class='Operator'>=&GT; </span><span class='String'>'CREATE TABLE regress_pg_dump_schema.external_tab 
</span>                           <span class='Parentheses'>(</span>col1 <span class='Keyword'>int</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='String'>', 
</span>        regexp <span class='Operator'>=&GT; </span>qr<span class='Operator'>/^ 
</span>            <span class='Operator'>\</span>QCREATE TABLE external_tab <span class='Parentheses'>(</span><span class='Operator'>\</span>E 
            <span class='Operator'>\</span>n<span class='Operator'>\s</span><span class='String'>+\Qcol1 integer\E 
</span>            <span class='Operator'>\</span>n<span class='Operator'>\</span><span class='Parentheses'>)</span><span class='Delimiter'>;</span><span class='Operator'>\</span>n<span class='Operator'>/</span>xm<span class='Delimiter'>, 
</span>        like <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            binary_upgrade   <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean            <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            clean_if_exists  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            createdb         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            defaults         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_owner         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            no_privs         <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            schema_only      <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_pre_data <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, 
</span>        unlike <span class='Operator'>=&GT; </span><span class='Delimiter'>{ 
</span>            pg_dumpall_globals <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, 
</span>            section_post_data  <span class='Operator'>=&GT; </span>1<span class='Delimiter'>, }, },</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Single_Line'>######################################### 
# Create a PG instance to test actually dumping from 
</span> 
<span class='Keyword'>my </span>$node <span class='Operator'>= </span><a href="../../../perl/PostgresNode.pm.html#LN867"><span class='Ref_to_Func'>get_new_node</span></a><span class='Parentheses'>(</span><span class='String'>'main'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>$node<span class='Operator'>-&GT;</span><a href="../../../perl/PostgresNode.pm.html#LN393"><span class='Ref_to_Func'>init</span></a><span class='Delimiter'>; 
</span>$node<span class='Operator'>-&GT;</span><a href="../../../perl/PostgresNode.pm.html#LN650"><span class='Ref_to_Func'>start</span></a><span class='Delimiter'>; 
</span> 
<span class='Keyword'>my </span>$port <span class='Operator'>= </span>$node<span class='Operator'>-&GT;</span><a href="../../../perl/PostgresNode.pm.html#LN171"><span class='Ref_to_Func'>port</span></a><span class='Delimiter'>; 
</span> 
<span class='Keyword'>my </span>$num_tests <span class='Operator'>= </span>0<span class='Delimiter'>; 
</span> 
<span class='Control'>foreach</span> <span class='Keyword'>my </span>$run <span class='Parentheses'>(</span><span class='Keyword'>sort keys </span>%pgdump_runs<span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span>    <span class='Keyword'>my </span>$test_key <span class='Operator'>= </span>$run<span class='Delimiter'>; 
</span> 
    <span class='Comment_Single_Line'># Each run of pg_dump is a test itself 
</span>    $num_tests<span class='Operator'>++</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Single_Line'># If there is a restore cmd, that's another test 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>$pgdump_runs<span class='Delimiter'>{</span>$run<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>restore_cmd<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        $num_tests<span class='Operator'>++</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>$pgdump_runs<span class='Delimiter'>{</span>$run<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>test_key<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        $test_key <span class='Operator'>= </span>$pgdump_runs<span class='Delimiter'>{</span>$run<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>test_key<span class='Delimiter'>}; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Comment_Single_Line'># Then count all the tests run against each run 
</span>    <span class='Control'>foreach</span> <span class='Keyword'>my </span>$test <span class='Parentheses'>(</span><span class='Keyword'>sort keys </span>%tests<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>$tests<span class='Delimiter'>{</span>$test<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>like<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>$test_key<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            $num_tests<span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>$tests<span class='Delimiter'>{</span>$test<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>unlike<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>$test_key<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            $num_tests<span class='Operator'>++</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
} 
</span>plan tests <span class='Operator'>=&GT; </span>$num_tests<span class='Delimiter'>; 
</span> 
<span class='Comment_Single_Line'>######################################### 
# Set up schemas, tables, etc, to be dumped. 
</span> 
<span class='Comment_Single_Line'># Build up the create statements 
</span><span class='Keyword'>my </span>$create_sql <span class='Operator'>= </span><span class='String'>''</span><span class='Delimiter'>; 
</span> 
<span class='Control'>foreach</span> <span class='Keyword'>my </span>$test <span class='Parentheses'>(</span> 
    <span class='Keyword'>sort </span><span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>$tests<span class='Delimiter'>{</span>$a<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>create_order<span class='Delimiter'>} </span>and $tests<span class='Delimiter'>{</span>$b<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>create_order<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            $tests<span class='Delimiter'>{</span>$a<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>create_order<span class='Delimiter'>} </span><span class='Operator'>&LT;=&GT; </span>$tests<span class='Delimiter'>{</span>$b<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>create_order<span class='Delimiter'>}; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>elsif</span> <span class='Parentheses'>(</span>$tests<span class='Delimiter'>{</span>$a<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>create_order<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            <span class='Operator'>-</span>1<span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>elsif</span> <span class='Parentheses'>(</span>$tests<span class='Delimiter'>{</span>$b<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>create_order<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            1<span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>        <span class='Control'>else</span> 
        <span class='Delimiter'>{ 
</span>            0<span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} </span><span class='Keyword'>keys </span>%tests<span class='Parentheses'>)</span> 
<span class='Delimiter'>{ 
</span>    <span class='Control'>if</span> <span class='Parentheses'>(</span>$tests<span class='Delimiter'>{</span>$test<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>create_sql<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        $create_sql <span class='Operator'>.= </span>$tests<span class='Delimiter'>{</span>$test<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>create_sql<span class='Delimiter'>}; 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Comment_Single_Line'># Send the combined set of commands to psql 
</span>$node<span class='Operator'>-&GT;</span><a href="../../../perl/PostgresNode.pm.html#LN969"><span class='Ref_to_Func'>safe_psql</span></a><span class='Parentheses'>(</span><span class='String'>'postgres'</span><span class='Delimiter'>, </span>$create_sql<span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
<span class='Comment_Single_Line'>######################################### 
# Run all runs 
</span> 
<span class='Control'>foreach</span> <span class='Keyword'>my </span>$run <span class='Parentheses'>(</span><span class='Keyword'>sort keys </span>%pgdump_runs<span class='Parentheses'>) 
</span><span class='Delimiter'>{ 
</span> 
    <span class='Keyword'>my </span>$test_key <span class='Operator'>= </span>$run<span class='Delimiter'>; 
</span> 
    $node<span class='Operator'>-&GT;</span><a href="../../../perl/TestLib.pm.html#LN220"><span class='Ref_to_Func'>command_ok</span></a><span class='Parentheses'>(</span><span class='Operator'>\</span>@<span class='Delimiter'>{ </span>$pgdump_runs<span class='Delimiter'>{</span>$run<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>dump_cmd<span class='Delimiter'>} }, 
</span>        <span class='String'>"$run: pg_dump runs"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>$pgdump_runs<span class='Delimiter'>{</span>$run<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>restore_cmd<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        $node<span class='Operator'>-&GT;</span><a href="../../../perl/TestLib.pm.html#LN220"><span class='Ref_to_Func'>command_ok</span></a><span class='Parentheses'>(</span><span class='Operator'>\</span>@<span class='Delimiter'>{ </span>$pgdump_runs<span class='Delimiter'>{</span>$run<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>restore_cmd<span class='Delimiter'>} }, 
</span>            <span class='String'>"$run: pg_restore runs"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Control'>if</span> <span class='Parentheses'>(</span>$pgdump_runs<span class='Delimiter'>{</span>$run<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>test_key<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        $test_key <span class='Operator'>= </span>$pgdump_runs<span class='Delimiter'>{</span>$run<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>test_key<span class='Delimiter'>}; 
</span>    <span class='Delimiter'>} 
</span> 
    <span class='Keyword'>my </span>$output_file <span class='Operator'>= </span><a href="../../../perl/TestLib.pm.html#LN196"><span class='Ref_to_Func'>slurp_file</span></a><span class='Parentheses'>(</span><span class='String'>"$tempdir/${run}.sql"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span> 
    <span class='Comment_Single_Line'>######################################### 
</span>    <span class='Comment_Single_Line'># Run all tests where this run is included 
</span>    <span class='Comment_Single_Line'># as either a 'like' or 'unlike' test. 
</span> 
    <span class='Control'>foreach</span> <span class='Keyword'>my </span>$test <span class='Parentheses'>(</span><span class='Keyword'>sort keys </span>%tests<span class='Parentheses'>) 
</span>    <span class='Delimiter'>{ 
</span>        <span class='Control'>if</span> <span class='Parentheses'>(</span>$tests<span class='Delimiter'>{</span>$test<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>like<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>$test_key<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            like<span class='Parentheses'>(</span>$output_file<span class='Delimiter'>, </span>$tests<span class='Delimiter'>{</span>$test<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>regexp<span class='Delimiter'>}, </span><span class='String'>"$run: dumps $test"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span> 
        <span class='Control'>if</span> <span class='Parentheses'>(</span>$tests<span class='Delimiter'>{</span>$test<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>unlike<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>$test_key<span class='Delimiter'>}</span><span class='Parentheses'>) 
</span>        <span class='Delimiter'>{ 
</span>            unlike<span class='Parentheses'>( 
</span>                $output_file<span class='Delimiter'>, 
</span>                $tests<span class='Delimiter'>{</span>$test<span class='Delimiter'>}</span><span class='Operator'>-&GT;</span><span class='Delimiter'>{</span>regexp<span class='Delimiter'>}, 
</span>                <span class='String'>"$run: does not dump $test"</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span>        <span class='Delimiter'>} 
</span>    <span class='Delimiter'>} 
} 
</span> 
<span class='Comment_Single_Line'>######################################### 
# Stop the database instance, which will be removed at the end of the tests. 
</span> 
$node<span class='Operator'>-&GT;</span><a href="../../../perl/PostgresNode.pm.html#LN683"><span class='Ref_to_Func'>stop</span></a><span class='Parentheses'>(</span><span class='String'>'fast'</span><span class='Parentheses'>)</span><span class='Delimiter'>; 
</span></pre>
<table bgcolor='#c0c0c0' width='100%'><tr><td><a href='../../../../../Contents.html'>Contents</a></td></tr>
</table><hr><p class='blurb' align='center'><a href='http://www.sourceinsight.com'>HTML Created by Source Insight Version 4.00.0084 Built on 2017-02-26</a></p>
</body></html>